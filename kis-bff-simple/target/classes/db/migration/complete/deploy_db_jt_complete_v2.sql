-- ============================================================================
-- Oracle Database Deployment Script V2
-- Schema: DB_JT
-- Generated: 2025-12-10
-- Target: Oracle 23ai Free (Docker)
-- Connection: DB_JT/kis_db_jt_2024@//localhost:1521/FREEPDB1
-- ============================================================================

SET SERVEROUTPUT ON SIZE UNLIMITED
SET VERIFY OFF
SET FEEDBACK ON
SET ECHO ON
SET DEFINE OFF

WHENEVER SQLERROR CONTINUE

-- Enable output buffering
ALTER SESSION SET NLS_DATE_FORMAT = 'YYYY-MM-DD HH24:MI:SS';

PROMPT ============================================================================
PROMPT Starting DB_JT Schema Deployment
PROMPT ============================================================================
PROMPT


-- ============================================================================
-- PHASE: Deploy TYPES (20 files)
-- ============================================================================

PROMPT
PROMPT ============================================================================
PROMPT Deploying TYPES (20 files)
PROMPT ============================================================================
PROMPT


-- ============================================================================
-- Deploy: MIGR_FILTER.sql
-- Category: types
-- ============================================================================

PROMPT Deploying MIGR_FILTER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Type MIGR_FILTER
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TYPE "DB_JT"."MIGR_FILTER" IS OBJECT (
  FILTER_TYPE INTEGER, -- Filter Types are 0-> ALL, 1->NAMELIST, 2->WHERE CLAUSE, 3->OBJECTID LIST
  OBJTYPE VARCHAR2(40),
  OBJECTIDS OBJECTIDLIST,
  NAMES NAMELIST,
  WHERECLAUSE VARCHAR2(1000));

/


PROMPT Completed MIGR_FILTER.sql
PROMPT


-- ============================================================================
-- Deploy: MIGR_FILTER_SET.sql
-- Category: types
-- ============================================================================

PROMPT Deploying MIGR_FILTER_SET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Type MIGR_FILTER_SET
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TYPE "DB_JT"."MIGR_FILTER_SET" IS TABLE OF MIGR_FILTER;

/


PROMPT Completed MIGR_FILTER_SET.sql
PROMPT


-- ============================================================================
-- Deploy: MIGR_REPORT_DETAIL_ROW.sql
-- Category: types
-- ============================================================================

PROMPT Deploying MIGR_REPORT_DETAIL_ROW.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Type MIGR_REPORT_DETAIL_ROW
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TYPE "DB_JT"."MIGR_REPORT_DETAIL_ROW" AS OBJECT
 (CAPTURED_ID            NUMBER(38),
  CAPTURED_NAME          VARCHAR2(4000),
  CONVERTED_NAME          VARCHAR2(4000),
  CAPTURED_TYPE          VARCHAR2(4000),
  CONVERTED_TYPE          VARCHAR2(4000),
  CAPTURE_STATUS         VARCHAR2(20),
  CONVERT_STATUS         VARCHAR2(20),
  GENERATE_STATUS        VARCHAR2(20),
  LOGTEXT               VARCHAR2(4000)
 );

/


PROMPT Completed MIGR_REPORT_DETAIL_ROW.sql
PROMPT


-- ============================================================================
-- Deploy: MIGR_REPORT_DETAIL_TABLE.sql
-- Category: types
-- ============================================================================

PROMPT Deploying MIGR_REPORT_DETAIL_TABLE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Type MIGR_REPORT_DETAIL_TABLE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TYPE "DB_JT"."MIGR_REPORT_DETAIL_TABLE" AS TABLE OF MIGR_REPORT_DETAIL_ROW;

/


PROMPT Completed MIGR_REPORT_DETAIL_TABLE.sql
PROMPT


-- ============================================================================
-- Deploy: MIGR_REPORT_SUM_ROW.sql
-- Category: types
-- ============================================================================

PROMPT Deploying MIGR_REPORT_SUM_ROW.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Type MIGR_REPORT_SUM_ROW
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TYPE "DB_JT"."MIGR_REPORT_SUM_ROW" AS OBJECT
       (LABEL           VARCHAR2(50),
	    SCHEMA_SUM      NUMBER,
        TABLE_SUM       NUMBER,
		INDEX_SUM       NUMBER,
		CONSTRAINT_SUM  NUMBER,
		VIEW_SUM        NUMBER,
		TRIGGER_SUM     NUMBER,
		SP_SUM          NUMBER		
        );

/


PROMPT Completed MIGR_REPORT_SUM_ROW.sql
PROMPT


-- ============================================================================
-- Deploy: MIGR_REPORT_SUM_TABLE.sql
-- Category: types
-- ============================================================================

PROMPT Deploying MIGR_REPORT_SUM_TABLE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Type MIGR_REPORT_SUM_TABLE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TYPE "DB_JT"."MIGR_REPORT_SUM_TABLE" AS TABLE OF MIGR_REPORT_SUM_ROW;

/


PROMPT Completed MIGR_REPORT_SUM_TABLE.sql
PROMPT


-- ============================================================================
-- Deploy: NAMELIST.sql
-- Category: types
-- ============================================================================

PROMPT Deploying NAMELIST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Type NAMELIST
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TYPE "DB_JT"."NAMELIST" IS TABLE OF VARCHAR2(40);

/


PROMPT Completed NAMELIST.sql
PROMPT


-- ============================================================================
-- Deploy: NAME_AND_COUNT_ARRAY.sql
-- Category: types
-- ============================================================================

PROMPT Deploying NAME_AND_COUNT_ARRAY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Type NAME_AND_COUNT_ARRAY
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TYPE "DB_JT"."NAME_AND_COUNT_ARRAY" IS VARRAY(30) OF name_and_count_t;

/


PROMPT Completed NAME_AND_COUNT_ARRAY.sql
PROMPT


-- ============================================================================
-- Deploy: NAME_AND_COUNT_T.sql
-- Category: types
-- ============================================================================

PROMPT Deploying NAME_AND_COUNT_T.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Type NAME_AND_COUNT_T
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TYPE "DB_JT"."NAME_AND_COUNT_T" IS OBJECT (
  OBJECT_NAME varchar2(30),
  UPDATE_COUNT INTEGER);

/


PROMPT Completed NAME_AND_COUNT_T.sql
PROMPT


-- ============================================================================
-- Deploy: OBJECTIDLIST.sql
-- Category: types
-- ============================================================================

PROMPT Deploying OBJECTIDLIST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Type OBJECTIDLIST
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TYPE "DB_JT"."OBJECTIDLIST" IS TABLE OF INTEGER;

/


PROMPT Completed OBJECTIDLIST.sql
PROMPT


-- ============================================================================
-- Deploy: T_JOBMSGREQUEST.sql
-- Category: types
-- ============================================================================

PROMPT Deploying T_JOBMSGREQUEST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Type T_JOBMSGREQUEST
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TYPE "DB_JT"."T_JOBMSGREQUEST" as object (
	-- Struktura ktera slouzi k predavani pozadavku mezi klienskym a paralelnim procesem. Jde o specifikovani zadosti, ktera popisuje co bude paralelni proces provadet.
	-- Je interne vyuzivana v kodech <a href="my_JobSlave.html">my_JobSlave</a> a <a href="my_job.html">my_job</a>. Je pouzivana interne temito packagemi a programator se
	-- pri vyuziti techto package nemusi o tuto strukturu zajimat.

		-- Ridici kod.
		-- Definuje o jakou zadost jde (co bude job delat) obsahuje nekterou
		-- z hodnot viz. <a href="my_JobSlave.html#CMD__SQL_CODE"> CMD konstant z my_JobSlave</a>
   action int,

		-- Nazev roury pro odpoved - NE roury kam bude tato zadost zapsana.
		-- Urcuje kam, do jake roury bude zapisovat paralelni proces svoji
		-- odpoved na tuto zadost - neboli na jake roure se bude poslouchat
		-- zprava o vykonani teto zadosti. Paralelni proces se proste pri vyzvednuti
		-- teto zadosti z roury na ktere posloucha prikazy dozvi do jeke roury ma
		-- zapisovat svouji odpoved na tuto zadost.
   pipeNameResponse varchar2(32),

		-- SQL prikaz. Prikaz ktery se bude provadet - v pripade, ze
		-- action=<a href="my_JobSlave.html#CMD__SQL_CODE">CMD__SQL_CODE</a>,
		-- pro jine hodnoty action je ignorovano
   sql_statement varchar2(4096),

		-- Start zadosti. Automaticky si doplni cas, kdy vznikla zadost
		-- ke zpracovani - slouzi k mereni celkove doby zpracovani.
   dt_date	date,

		-- Pocitadlo spusteni.
		-- Slouzi pro eliminaci zacykleni, pokud zadost je neuspesne
		-- trikrat spustena a kazde volani skonci na chybu 4601 (nevalidni package).
		-- Tak se po trech neuspesnych pokusech chybova hlaska preda volajicimu procesu
	nl_pocetSpusteni int,

		-- Volne pole pro uzivatelske vyuziti.
		-- Pro prenos uzivatelskych pomocnych informaci.
   info t_tableOfString256,

   -- procedura pro zapis tohoto objektu do roury
   -- %usage Pri komunikaci mezi procesy je potreba pomoci roury predavat pozadavky na provedeni nejake akce.
	-- Pozadavek reprezentuje tento objekt a procedura put zapisuje vsechny atributy tohoto objektu do roury
	-- jejiz jmeno prijde jako parametr teto procedury.
	-- %param pipeName jmeno roury do ktere bude ulozen tento objekt ( vsechny jeho atributy )
	member procedure put ( pipeName varchar2 ),

   -- procedura pro cteni tohoto objektu do roury
   -- %usage Pri komunikaci mezi procesy je potreba pomoci roury predavat pozadavky na provedeni nejake akce.
	-- Pozadavek reprezentuje tento objekt a procedura get cte vsechny atributy tohoto objektu z roury
	-- jejiz jmeno prijde jako parametr teto procedury.
	-- %param pipeName jmeno roury z ktere bude nacitan tento objekt ( vsechny jeho atributy )
	member procedure get ( pipeName varchar2 )

);


/
CREATE OR REPLACE EDITIONABLE TYPE BODY "DB_JT"."T_JOBMSGREQUEST" is

-- procedura pro zapis do roury
member procedure put ( pipeName varchar2 ) as
	ret int;
begin
	dbms_pipe.reset_buffer;

	dbms_pipe.pack_message ( action );
	dbms_pipe.pack_message ( pipeNameResponse );
   dbms_pipe.pack_message ( sql_statement );
   dbms_pipe.pack_message ( nl_pocetSpusteni );
   dt_date := sysdate;
   dbms_pipe.pack_message ( dt_date );

   if ( info is not null ) then
   	for i in 1 .. info.count() loop
   	   dbms_pipe.pack_message ( info(i) );
   	end loop;
   end if;

   ret := dbms_pipe.send_message ( pipeName, 0 );

   if ( ret != 0 ) then
	   raise_application_error ( -20001, 'Nepodarilo se zapsat do roury ' || pipeName || ' - ' || sql_statement );
   end if;

end;

-- procedura pro vyzvednuti pozadavku na provedeni sql prikazu z roury
member procedure get ( pipeName varchar2 ) as
	i int;
begin

	i := dbms_pipe.receive_message ( pipeName );

	if ( i != 0 ) then
   	raise_application_error ( -20001, 'Nepodarilo se nacist z roury ' || pipeName );
   end if;

	dbms_pipe.unpack_message ( action );
	dbms_pipe.unpack_message ( pipeNameResponse );
   dbms_pipe.unpack_message ( sql_statement );
   dbms_pipe.unpack_message ( nl_pocetSpusteni );
	dbms_pipe.unpack_message ( dt_date );

	i := 1;
   info := t_tableOfString256();

	while ( dbms_pipe.next_item_type = 9 ) loop
		info.extend();
		dbms_pipe.unpack_message ( info(i));
      i := i + 1;
	end loop;

end ;


end;



/


PROMPT Completed T_JOBMSGREQUEST.sql
PROMPT


-- ============================================================================
-- Deploy: T_JOBMSGRESPONSE.sql
-- Category: types
-- ============================================================================

PROMPT Deploying T_JOBMSGRESPONSE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Type T_JOBMSGRESPONSE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TYPE "DB_JT"."T_JOBMSGRESPONSE" as object (

   -- zda je to finalni ci docasne hlaseni ( zatim bude pouzivano pouze true )
   finish char,	-- true znamena, ze je prace ukoncena. False planuji na pouziti 'mezi zprav' - ze by proces mohl hlasit co zatim udelal

   -- jak dopadlo spusteni kodu
   sql_code int,					-- navratovy kod, ktery vygenerovalo spusteni kodu z pozadavku
   sql_errmsg varchar2(4096),	-- pripadne chybove hlaseni spusteneho kodu

	s_pipeName varchar2(32), -- jmeno roury z ktere cte a kam zapisuje

   -- pomocne informace o procesu vykonani kodu
   dt_date_request date,	-- datum zalozeni pozadavku - prebira z request zpravy
   dt_date_start date,		-- datum vyzvednuti pozadavku z fronty a spusteni kodu
   dt_date_end date,			-- datum kdy bylo dokonceno zpracovani pozadavku
	o_job t_jobQueue,

   t_request	t_jobMsgRequest,

	-- procedura pro zapis do roury s pozadavky na provedeni sql prikazu
	member procedure put ( pipeName varchar2 ),
	-- funkce pro vyzvednuti pozadavku na provedeni sql prikazu z roury
	member procedure get

)


/
CREATE OR REPLACE EDITIONABLE TYPE BODY "DB_JT"."T_JOBMSGRESPONSE" is

-- procedura pro zapis do roury s vyslednymi info o provedeni sql prikazu
member procedure put ( pipeName varchar2 ) as
ret int;
begin
	s_pipeName := pipeName;

	dbms_pipe.reset_buffer;

   dbms_pipe.pack_message ( finish );
	dbms_pipe.pack_message ( sql_code );
   dbms_pipe.pack_message ( sql_errmsg );
   dbms_pipe.pack_message ( o_job.id_job );
	dbms_pipe.pack_message ( o_job.s_pipeName);
   dbms_pipe.pack_message ( dt_date_request );
   dbms_pipe.pack_message ( dt_date_start );
   dbms_pipe.pack_message ( dt_date_end );

   ret := dbms_pipe.send_message ( s_pipeName, 0 );

   if ( ret != 0 ) then
	   raise_application_error ( -20001, 'Nepodarilo se zapsat do response job roury ' || pipeName || ' - ' || sql_errmsg );
   end if;

end;

-- procedura pro vyzvednuti pozadavku na provedeni sql prikazu z roury
member procedure get as
	i int;
begin

	i := dbms_pipe.receive_message ( s_pipeName );

	if ( i != 0 ) then
   	raise_application_error ( -20001, 'Nepodarilo se nacist z roury ' || s_pipeName );
   end if;

	o_job := t_jobQueue(null,null);

   dbms_pipe.unpack_message ( finish );
	dbms_pipe.unpack_message ( sql_code );
   dbms_pipe.unpack_message ( sql_errmsg );
   dbms_pipe.unpack_message ( o_job.id_job );
	dbms_pipe.unpack_message ( o_job.s_pipeName);
   dbms_pipe.unpack_message ( dt_date_request );
   dbms_pipe.unpack_message ( dt_date_start );
   dbms_pipe.unpack_message ( dt_date_end );

end ;


end;



/


PROMPT Completed T_JOBMSGRESPONSE.sql
PROMPT


-- ============================================================================
-- Deploy: T_JOBQUEUE.sql
-- Category: types
-- ============================================================================

PROMPT Deploying T_JOBQUEUE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Type T_JOBQUEUE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TYPE "DB_JT"."T_JOBQUEUE" as object (
	-- polozka fronty do ktere se zapisuji Joby, ktere jsou pripraveny
	-- vykonavat paralelni ukoly

	-- roura z ktere nacita prikazy
	s_pipeName varchar2(32),
	-- cislo jobu, ktery cte frontu s_pipeName
	id_job int
)



/


PROMPT Completed T_JOBQUEUE.sql
PROMPT


-- ============================================================================
-- Deploy: T_ROW_REP_DOKLAD_KONS_DATA.sql
-- Category: types
-- ============================================================================

PROMPT Deploying T_ROW_REP_DOKLAD_KONS_DATA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Type T_ROW_REP_DOKLAD_KONS_DATA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TYPE "DB_JT"."T_ROW_REP_DOKLAD_KONS_DATA" as object (
     id int,
     ucet varchar2(10),
     castka number,
     mena varchar2(3),
     id_ktgSpolecnost int, 
     id_ktgUcetniSpolecnost int,
     zeme varchar2(2 ),
     flow_kod varchar2(5),
     id_cisUcetUnif int,
     --
     flag_protistrana char, -- V vyznamna
     flag_shares char,
     flag_country char,
     protistranaLimit number,
     flag_exportCartesis int,
     flag_interniEquity int,
     flag_typeCounterParties char,
     --
     constructor function t_row_rep_doklad_kons_data ( ucet varchar2) return self as result );

/
CREATE OR REPLACE EDITIONABLE TYPE BODY "DB_JT"."T_ROW_REP_DOKLAD_KONS_DATA" as

     constructor function t_row_rep_doklad_kons_data ( ucet varchar2) return self as result as
     begin
         self.ucet := ucet;
         return;
     end;

end;


/


PROMPT Completed T_ROW_REP_DOKLAD_KONS_DATA.sql
PROMPT


-- ============================================================================
-- Deploy: T_ROW_REP_DOKLAD_KONS_EXP.sql
-- Category: types
-- ============================================================================

PROMPT Deploying T_ROW_REP_DOKLAD_KONS_EXP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Type T_ROW_REP_DOKLAD_KONS_EXP
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TYPE "DB_JT"."T_ROW_REP_DOKLAD_KONS_EXP" as object (
    id int,
    ucet varchar2(16),
    castka number,
    mena varchar2(3),
    id_ktgSpolecnost varchar2(16), 
    zeme varchar2(2 ),
    flow_kod varchar2(5),
     --
     idSortGroup int,
     --
     debug varchar2(32),
     
     constructor function t_row_rep_doklad_kons_exp ( ucet varchar2) return self as result );

/
CREATE OR REPLACE EDITIONABLE TYPE BODY "DB_JT"."T_ROW_REP_DOKLAD_KONS_EXP" as

     constructor function t_row_rep_doklad_kons_exp ( ucet varchar2) return self as result as
     begin
         self.ucet := ucet;
         return;
     end;

end;


/


PROMPT Completed T_ROW_REP_DOKLAD_KONS_EXP.sql
PROMPT


-- ============================================================================
-- Deploy: T_TABLEOFINT.sql
-- Category: types
-- ============================================================================

PROMPT Deploying T_TABLEOFINT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Type T_TABLEOFINT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TYPE "DB_JT"."T_TABLEOFINT" is TABLE of int;

/


PROMPT Completed T_TABLEOFINT.sql
PROMPT


-- ============================================================================
-- Deploy: T_TABLEOFSTRING256.sql
-- Category: types
-- ============================================================================

PROMPT Deploying T_TABLEOFSTRING256.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Type T_TABLEOFSTRING256
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TYPE "DB_JT"."T_TABLEOFSTRING256" is TABLE of varchar2(256);

/


PROMPT Completed T_TABLEOFSTRING256.sql
PROMPT


-- ============================================================================
-- Deploy: T_TABLEOFVARCHAR2.sql
-- Category: types
-- ============================================================================

PROMPT Deploying T_TABLEOFVARCHAR2.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Type T_TABLEOFVARCHAR2
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TYPE "DB_JT"."T_TABLEOFVARCHAR2" is TABLE of varchar2;

/


PROMPT Completed T_TABLEOFVARCHAR2.sql
PROMPT


-- ============================================================================
-- Deploy: T_TAB_REP_KONS_PACKAGE.sql
-- Category: types
-- ============================================================================

PROMPT Deploying T_TAB_REP_KONS_PACKAGE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Type T_TAB_REP_KONS_PACKAGE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TYPE "DB_JT"."T_TAB_REP_KONS_PACKAGE" is table of t_row_rep_doklad_kons_exp;


/


PROMPT Completed T_TAB_REP_KONS_PACKAGE.sql
PROMPT


-- ============================================================================
-- Deploy: T_TAB_REP_KONS_PACKAGE_TMP.sql
-- Category: types
-- ============================================================================

PROMPT Deploying T_TAB_REP_KONS_PACKAGE_TMP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Type T_TAB_REP_KONS_PACKAGE_TMP
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TYPE "DB_JT"."T_TAB_REP_KONS_PACKAGE_TMP" is table of t_row_rep_doklad_kons_data;


/


PROMPT Completed T_TAB_REP_KONS_PACKAGE_TMP.sql
PROMPT


-- ============================================================================
-- PHASE: Deploy SEQUENCES (115 files)
-- ============================================================================

PROMPT
PROMPT ============================================================================
PROMPT Deploying SEQUENCES (115 files)
PROMPT ============================================================================
PROMPT


-- ============================================================================
-- Deploy: DBOBJECTID_SEQUENCE.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying DBOBJECTID_SEQUENCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence DBOBJECTID_SEQUENCE
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."DBOBJECTID_SEQUENCE"  MINVALUE 1 MAXVALUE 999999999999999999999999 INCREMENT BY 50 START WITH 1 CACHE 50 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed DBOBJECTID_SEQUENCE.sql
PROMPT


-- ============================================================================
-- Deploy: ROLE_ROLE_ID_SEQ.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying ROLE_ROLE_ID_SEQ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence ROLE_ROLE_ID_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."ROLE_ROLE_ID_SEQ"  MINVALUE 1001 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1001 START WITH 139139 NOCACHE  NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed ROLE_ROLE_ID_SEQ.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_BUDGET_ZASTUP.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_BUDGET_ZASTUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_BUDGET_ZASTUP
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_BUDGET_ZASTUP"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 8006 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_BUDGET_ZASTUP.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_CIS_BANKAR.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_CIS_BANKAR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_CIS_BANKAR
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_CIS_BANKAR"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 958 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_CIS_BANKAR.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_CIS_DRUH_NAKLADU.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_CIS_DRUH_NAKLADU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_CIS_DRUH_NAKLADU
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_CIS_DRUH_NAKLADU"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_CIS_DRUH_NAKLADU.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_CIS_ISIT_APLIKACE.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_CIS_ISIT_APLIKACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_CIS_ISIT_APLIKACE
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_CIS_ISIT_APLIKACE"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 422 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_CIS_ISIT_APLIKACE.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_CIS_ISIT_BUDGET.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_CIS_ISIT_BUDGET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_CIS_ISIT_BUDGET
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_CIS_ISIT_BUDGET"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 7562 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_CIS_ISIT_BUDGET.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_CIS_ODBOR_SKUPINY.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_CIS_ODBOR_SKUPINY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_CIS_ODBOR_SKUPINY
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_CIS_ODBOR_SKUPINY"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 NOCACHE  NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_CIS_ODBOR_SKUPINY.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_CIS_PROJEKT_SKUPINY.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_CIS_PROJEKT_SKUPINY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_CIS_PROJEKT_SKUPINY
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_CIS_PROJEKT_SKUPINY"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 NOCACHE  NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_CIS_PROJEKT_SKUPINY.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_CIS_SPOL_SKUPINA.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_CIS_SPOL_SKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_CIS_SPOL_SKUPINA
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_CIS_SPOL_SKUPINA"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 NOCACHE  NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_CIS_SPOL_SKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_CIS_SPOL_SKUPINA_LOG.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_CIS_SPOL_SKUPINA_LOG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_CIS_SPOL_SKUPINA_LOG
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_CIS_SPOL_SKUPINA_LOG"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 NOCACHE  NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_CIS_SPOL_SKUPINA_LOG.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_CIS_TYPFKT.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_CIS_TYPFKT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_CIS_TYPFKT
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_CIS_TYPFKT"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 241 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_CIS_TYPFKT.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_CIS_TYP_POLOZKY.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_CIS_TYP_POLOZKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_CIS_TYP_POLOZKY
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_CIS_TYP_POLOZKY"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_CIS_TYP_POLOZKY.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_CIS_TYP_SW.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_CIS_TYP_SW.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_CIS_TYP_SW
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_CIS_TYP_SW"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_CIS_TYP_SW.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_DAT_PROJEKTMEMORANDUMZPRAVA.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_DAT_PROJEKTMEMORANDUMZPRAVA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_DAT_PROJEKTMEMORANDUMZPRAVA
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_DAT_PROJEKTMEMORANDUMZPRAVA"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 38073 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_DAT_PROJEKTMEMORANDUMZPRAVA.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_DOC_ZASTUP.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_DOC_ZASTUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_DOC_ZASTUP
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_DOC_ZASTUP"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 48088 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_DOC_ZASTUP.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_IMP_POZICE_UM.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_IMP_POZICE_UM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_IMP_POZICE_UM
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_IMP_POZICE_UM"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 43551 NOCACHE  NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_IMP_POZICE_UM.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_IMP_POZICE_UM_DATA.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_IMP_POZICE_UM_DATA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_IMP_POZICE_UM_DATA
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_IMP_POZICE_UM_DATA"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 109327954 NOCACHE  NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_IMP_POZICE_UM_DATA.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KPCISFLOW.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KPCISFLOW.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KPCISFLOW
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KPCISFLOW"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 41 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KPCISFLOW.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KPCISIFRSSEGMENT.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KPCISIFRSSEGMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KPCISIFRSSEGMENT
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KPCISIFRSSEGMENT"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KPCISIFRSSEGMENT.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KPCISIFRSSUBSEGMENT.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KPCISIFRSSUBSEGMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KPCISIFRSSUBSEGMENT
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KPCISIFRSSUBSEGMENT"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KPCISIFRSSUBSEGMENT.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KPCISMNGSEGMENT.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KPCISMNGSEGMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KPCISMNGSEGMENT
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KPCISMNGSEGMENT"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 317 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KPCISMNGSEGMENT.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KPCISTYPPROJBILANCE.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KPCISTYPPROJBILANCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KPCISTYPPROJBILANCE
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KPCISTYPPROJBILANCE"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KPCISTYPPROJBILANCE.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KPCISTYPPROJBUDGETU.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KPCISTYPPROJBUDGETU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KPCISTYPPROJBUDGETU
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KPCISTYPPROJBUDGETU"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KPCISTYPPROJBUDGETU.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KPDEFKONTROLAMAJETKOVAUCAST.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KPDEFKONTROLAMAJETKOVAUCAST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KPDEFKONTROLAMAJETKOVAUCAST
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KPDEFKONTROLAMAJETKOVAUCAST"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 302 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KPDEFKONTROLAMAJETKOVAUCAST.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KPDENNIAGREGACE.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KPDENNIAGREGACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KPDENNIAGREGACE
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KPDENNIAGREGACE"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 4541 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KPDENNIAGREGACE.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KPDOKLADNASTROJ_CASTKY.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KPDOKLADNASTROJ_CASTKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KPDOKLADNASTROJ_CASTKY
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KPDOKLADNASTROJ_CASTKY"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 1230797 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KPDOKLADNASTROJ_CASTKY.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KPDOKLADZDROJDATAGREGACE.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KPDOKLADZDROJDATAGREGACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KPDOKLADZDROJDATAGREGACE
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KPDOKLADZDROJDATAGREGACE"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 4030331816 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KPDOKLADZDROJDATAGREGACE.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KPKAPITALSKUPINY.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KPKAPITALSKUPINY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KPKAPITALSKUPINY
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KPKAPITALSKUPINY"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 12131 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KPKAPITALSKUPINY.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KPKTGDOKLADMAJUCASTVYJIMKA.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KPKTGDOKLADMAJUCASTVYJIMKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KPKTGDOKLADMAJUCASTVYJIMKA
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KPKTGDOKLADMAJUCASTVYJIMKA"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 610 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KPKTGDOKLADMAJUCASTVYJIMKA.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KPSPOLECNOSTLIST.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KPSPOLECNOSTLIST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KPSPOLECNOSTLIST
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KPSPOLECNOSTLIST"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 321 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KPSPOLECNOSTLIST.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KPSPOLECNOSTLISTDETAIL.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KPSPOLECNOSTLISTDETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KPSPOLECNOSTLISTDETAIL
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KPSPOLECNOSTLISTDETAIL"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 241 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KPSPOLECNOSTLISTDETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KPSUBKONSOLIDACEPRAVIDLO.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KPSUBKONSOLIDACEPRAVIDLO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KPSUBKONSOLIDACEPRAVIDLO
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KPSUBKONSOLIDACEPRAVIDLO"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 13635 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KPSUBKONSOLIDACEPRAVIDLO.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_BUDGET.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_BUDGET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_BUDGET
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_BUDGET"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 8010 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_BUDGET.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_BUDGETPOLOZKA.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_BUDGETPOLOZKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_BUDGETPOLOZKA
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_BUDGETPOLOZKA"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 147985 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_BUDGETPOLOZKA.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_BUSINESSLINIE.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_BUSINESSLINIE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_BUSINESSLINIE
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_BUSINESSLINIE"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_BUSINESSLINIE.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_CIS_ACC_PPF.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_CIS_ACC_PPF.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_CIS_ACC_PPF
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_CIS_ACC_PPF"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 1461 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_CIS_ACC_PPF.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_CIS_MAJETUCASTTYPTRAN.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_CIS_MAJETUCASTTYPTRAN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_CIS_MAJETUCASTTYPTRAN
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_CIS_MAJETUCASTTYPTRAN"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_CIS_MAJETUCASTTYPTRAN.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_CIS_MAJETUCASTZPUSOB.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_CIS_MAJETUCASTZPUSOB.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_CIS_MAJETUCASTZPUSOB
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_CIS_MAJETUCASTZPUSOB"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_CIS_MAJETUCASTZPUSOB.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_DANOVESAZBY.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_DANOVESAZBY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_DANOVESAZBY
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_DANOVESAZBY"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 41 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_DANOVESAZBY.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_DAT_DOKLAD.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_DAT_DOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_DAT_DOKLAD
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_DAT_DOKLAD"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 753018 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_DAT_DOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_DAT_DOKLADAGRTYPNAST.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_DAT_DOKLADAGRTYPNAST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_DAT_DOKLADAGRTYPNAST
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_DAT_DOKLADAGRTYPNAST"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 3189606316 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_DAT_DOKLADAGRTYPNAST.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_DAT_DOKLADAGRTYPNASTCP.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_DAT_DOKLADAGRTYPNASTCP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_DAT_DOKLADAGRTYPNASTCP
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_DAT_DOKLADAGRTYPNASTCP"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 87191 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_DAT_DOKLADAGRTYPNASTCP.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_DAT_DOKLADFRONTA.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_DAT_DOKLADFRONTA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_DAT_DOKLADFRONTA
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_DAT_DOKLADFRONTA"  MINVALUE 0 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 2352230 NOCACHE  NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_DAT_DOKLADFRONTA.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_DAT_DOKLADPOLOZKADENIK.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_DAT_DOKLADPOLOZKADENIK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_DAT_DOKLADPOLOZKADENIK
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_DAT_DOKLADPOLOZKADENIK"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 32149421 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_DAT_DOKLADPOLOZKADENIK.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_DAT_DOKLADPROTOKOL.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_DAT_DOKLADPROTOKOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_DAT_DOKLADPROTOKOL
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_DAT_DOKLADPROTOKOL"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 181228348 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_DAT_DOKLADPROTOKOL.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_DAT_DOKLADRADEK.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_DAT_DOKLADRADEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_DAT_DOKLADRADEK
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_DAT_DOKLADRADEK"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 986500 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_DAT_DOKLADRADEK.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_DAT_DOKLADROZDILY.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_DAT_DOKLADROZDILY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_DAT_DOKLADROZDILY
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_DAT_DOKLADROZDILY"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 45661 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_DAT_DOKLADROZDILY.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_DAT_DOKLADVAZBY.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_DAT_DOKLADVAZBY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_DAT_DOKLADVAZBY
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_DAT_DOKLADVAZBY"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 221075805 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_DAT_DOKLADVAZBY.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_DAT_KONSOLIDACEFRONTA.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_DAT_KONSOLIDACEFRONTA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_DAT_KONSOLIDACEFRONTA
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_DAT_KONSOLIDACEFRONTA"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 5461 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_DAT_KONSOLIDACEFRONTA.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_DAT_MAJETKOVAUCAST.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_DAT_MAJETKOVAUCAST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_DAT_MAJETKOVAUCAST
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_DAT_MAJETKOVAUCAST"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 81699 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_DAT_MAJETKOVAUCAST.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_DAT_OPERACNIRIZIKO.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_DAT_OPERACNIRIZIKO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_DAT_OPERACNIRIZIKO
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_DAT_OPERACNIRIZIKO"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 161 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_DAT_OPERACNIRIZIKO.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_DAT_OPERACNIRIZIKOD.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_DAT_OPERACNIRIZIKOD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_DAT_OPERACNIRIZIKOD
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_DAT_OPERACNIRIZIKOD"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 301 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_DAT_OPERACNIRIZIKOD.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_DAT_PDP.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_DAT_PDP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_DAT_PDP
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_DAT_PDP"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 119780197 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_DAT_PDP.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_DEFBUDGETMUSTEK.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_DEFBUDGETMUSTEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_DEFBUDGETMUSTEK
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_DEFBUDGETMUSTEK"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 7136 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_DEFBUDGETMUSTEK.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_DEFBUSINESSLINIE.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_DEFBUSINESSLINIE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_DEFBUSINESSLINIE
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_DEFBUSINESSLINIE"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 601 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_DEFBUSINESSLINIE.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_DEFLISTBUNKA.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_DEFLISTBUNKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_DEFLISTBUNKA
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_DEFLISTBUNKA"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 203336 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_DEFLISTBUNKA.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_DEF_NASTROJOPERACE.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_DEF_NASTROJOPERACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_DEF_NASTROJOPERACE
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_DEF_NASTROJOPERACE"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 181 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_DEF_NASTROJOPERACE.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_DEF_QUESTORVAZBAPRODUCT.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_DEF_QUESTORVAZBAPRODUCT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_DEF_QUESTORVAZBAPRODUCT
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_DEF_QUESTORVAZBAPRODUCT"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 1304 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_DEF_QUESTORVAZBAPRODUCT.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_DEF_UCETVAZBAUCET.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_DEF_UCETVAZBAUCET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_DEF_UCETVAZBAUCET
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_DEF_UCETVAZBAUCET"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 741 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_DEF_UCETVAZBAUCET.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_DOKLAD.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_DOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_DOKLAD
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_DOKLAD"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_DOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_KARTAPRAVIDLA.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_KARTAPRAVIDLA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_KARTAPRAVIDLA
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_KARTAPRAVIDLA"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 61 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_KARTAPRAVIDLA.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_KARTATYP.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_KARTATYP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_KARTATYP
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_KARTATYP"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 61 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_KARTATYP.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_KARTAVYJIMKY.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_KARTAVYJIMKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_KARTAVYJIMKY
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_KARTAVYJIMKY"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 311 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_KARTAVYJIMKY.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_KARTAZPRAVA.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_KARTAZPRAVA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_KARTAZPRAVA
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_KARTAZPRAVA"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 32229 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_KARTAZPRAVA.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_KPPROJCASHFLOW.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_KPPROJCASHFLOW.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_KPPROJCASHFLOW
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_KPPROJCASHFLOW"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 1201 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_KPPROJCASHFLOW.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_KPPROJNAKL.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_KPPROJNAKL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_KPPROJNAKL
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_KPPROJNAKL"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 15558 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_KPPROJNAKL.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_KPPROJNAKLDETAIL.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_KPPROJNAKLDETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_KPPROJNAKLDETAIL
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_KPPROJNAKLDETAIL"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 207463 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_KPPROJNAKLDETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_KTGPBKLIENT.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_KTGPBKLIENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_KTGPBKLIENT
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_KTGPBKLIENT"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 28551 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_KTGPBKLIENT.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_KTGTYPSUBETAPA.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_KTGTYPSUBETAPA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_KTGTYPSUBETAPA
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_KTGTYPSUBETAPA"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 41 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_KTGTYPSUBETAPA.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_KTGTYPSUBPRAVIDLO.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_KTGTYPSUBPRAVIDLO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_KTGTYPSUBPRAVIDLO
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_KTGTYPSUBPRAVIDLO"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 41 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_KTGTYPSUBPRAVIDLO.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_KTGTYPSUBPRAVIDLODETAIL.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_KTGTYPSUBPRAVIDLODETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_KTGTYPSUBPRAVIDLODETAIL
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_KTGTYPSUBPRAVIDLODETAIL"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 81 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_KTGTYPSUBPRAVIDLODETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_KTG_FINANCNIINVESTICE.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_KTG_FINANCNIINVESTICE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_KTG_FINANCNIINVESTICE
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_KTG_FINANCNIINVESTICE"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 24545 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_KTG_FINANCNIINVESTICE.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_KTG_FININVESTICEEMISE.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_KTG_FININVESTICEEMISE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_KTG_FININVESTICEEMISE
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_KTG_FININVESTICEEMISE"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 25390 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_KTG_FININVESTICEEMISE.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_KTG_IFRSPRAVIDLO.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_KTG_IFRSPRAVIDLO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_KTG_IFRSPRAVIDLO
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_KTG_IFRSPRAVIDLO"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 4900 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_KTG_IFRSPRAVIDLO.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_KTG_IFRSPRAVIDLODETAIL.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_KTG_IFRSPRAVIDLODETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_KTG_IFRSPRAVIDLODETAIL
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_KTG_IFRSPRAVIDLODETAIL"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 5560 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_KTG_IFRSPRAVIDLODETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_KTG_OBDOBI.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_KTG_OBDOBI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_KTG_OBDOBI
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_KTG_OBDOBI"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_KTG_OBDOBI.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_KTG_ODBOR.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_KTG_ODBOR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_KTG_ODBOR
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_KTG_ODBOR"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 812 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_KTG_ODBOR.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_KTG_SUBKONPRAVIDLODETAIL.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_KTG_SUBKONPRAVIDLODETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_KTG_SUBKONPRAVIDLODETAIL
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_KTG_SUBKONPRAVIDLODETAIL"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 22996 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_KTG_SUBKONPRAVIDLODETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_KTG_SUBKONSOLIDACEETAPA.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_KTG_SUBKONSOLIDACEETAPA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_KTG_SUBKONSOLIDACEETAPA
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_KTG_SUBKONSOLIDACEETAPA"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 4863 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_KTG_SUBKONSOLIDACEETAPA.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_KTG_UCETSPOL_LINK.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_KTG_UCETSPOL_LINK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_KTG_UCETSPOL_LINK
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_KTG_UCETSPOL_LINK"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 20667 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_KTG_UCETSPOL_LINK.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_LOGAPPUSERSPOLPROTOKOL.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_LOGAPPUSERSPOLPROTOKOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_LOGAPPUSERSPOLPROTOKOL
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_LOGAPPUSERSPOLPROTOKOL"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 6343405 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_LOGAPPUSERSPOLPROTOKOL.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_MANZDROJDAT.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_MANZDROJDAT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_MANZDROJDAT
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_MANZDROJDAT"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 3766 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_MANZDROJDAT.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_MISTRANSAKCE.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_MISTRANSAKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_MISTRANSAKCE
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_MISTRANSAKCE"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 18743 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_MISTRANSAKCE.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_MNGSEGMENTBOSS.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_MNGSEGMENTBOSS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_MNGSEGMENTBOSS
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_MNGSEGMENTBOSS"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 302 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_MNGSEGMENTBOSS.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_PROJEKT.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_PROJEKT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_PROJEKT
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_PROJEKT"  MINVALUE 1000543 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 1014309 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_PROJEKT.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_REL_ACC_JT2PPF.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_REL_ACC_JT2PPF.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_REL_ACC_JT2PPF
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_REL_ACC_JT2PPF"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 4341 CACHE 20 ORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_REL_ACC_JT2PPF.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_REL_GESTORTRANSAKCE.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_REL_GESTORTRANSAKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_REL_GESTORTRANSAKCE
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_REL_GESTORTRANSAKCE"  MINVALUE 1 MAXVALUE 999999 INCREMENT BY 1 START WITH 1741 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_REL_GESTORTRANSAKCE.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_REL_GESTORTRANSAKCESPOL.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_REL_GESTORTRANSAKCESPOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_REL_GESTORTRANSAKCESPOL
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_REL_GESTORTRANSAKCESPOL"  MINVALUE 1 MAXVALUE 999999 INCREMENT BY 1 START WITH 7521 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_REL_GESTORTRANSAKCESPOL.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_REL_SUBKONSOLNASTROJ.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_REL_SUBKONSOLNASTROJ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_REL_SUBKONSOLNASTROJ
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_REL_SUBKONSOLNASTROJ"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_REL_SUBKONSOLNASTROJ.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_REL_SUBKONSOLNASTROJCP.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_REL_SUBKONSOLNASTROJCP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_REL_SUBKONSOLNASTROJCP
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_REL_SUBKONSOLNASTROJCP"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_REL_SUBKONSOLNASTROJCP.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_TMP_DEFLISTBUNKA.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_TMP_DEFLISTBUNKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_TMP_DEFLISTBUNKA
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_TMP_DEFLISTBUNKA"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 50144 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_TMP_DEFLISTBUNKA.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_TMP_DEFLISTBUNKASUM.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_TMP_DEFLISTBUNKASUM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_TMP_DEFLISTBUNKASUM
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_TMP_DEFLISTBUNKASUM"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 10704 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_TMP_DEFLISTBUNKASUM.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_TMP_DEFLISTBUNKAUCET.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_TMP_DEFLISTBUNKAUCET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_TMP_DEFLISTBUNKAUCET
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_TMP_DEFLISTBUNKAUCET"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 95884 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_TMP_DEFLISTBUNKAUCET.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_TMP_DEFLISTBUNKAVZOREC.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_TMP_DEFLISTBUNKAVZOREC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_TMP_DEFLISTBUNKAVZOREC
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_TMP_DEFLISTBUNKAVZOREC"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 25661 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_TMP_DEFLISTBUNKAVZOREC.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_TMP_DOKLAD.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_TMP_DOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_TMP_DOKLAD
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_TMP_DOKLAD"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 16754600 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_TMP_DOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_TMP_DOKLADLOG.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_TMP_DOKLADLOG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_TMP_DOKLADLOG
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_TMP_DOKLADLOG"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_TMP_DOKLADLOG.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_TMP_DOKLADPOLOZKA.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_TMP_DOKLADPOLOZKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_TMP_DOKLADPOLOZKA
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_TMP_DOKLADPOLOZKA"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 5321944563 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_TMP_DOKLADPOLOZKA.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_TMP_HK_DETAIL.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_TMP_HK_DETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_TMP_HK_DETAIL
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_TMP_HK_DETAIL"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_TMP_HK_DETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_TMP_MENOVAPOZICE.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_TMP_MENOVAPOZICE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_TMP_MENOVAPOZICE
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_TMP_MENOVAPOZICE"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 32865 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_TMP_MENOVAPOZICE.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_TMP_NASTROJDATA.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_TMP_NASTROJDATA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_TMP_NASTROJDATA
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_TMP_NASTROJDATA"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 1966368 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_TMP_NASTROJDATA.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_TMP_ZDROJDAT.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_TMP_ZDROJDAT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_TMP_ZDROJDAT
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_TMP_ZDROJDAT"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 12376627457 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_TMP_ZDROJDAT.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_UCETUNIF.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_UCETUNIF.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_UCETUNIF
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_UCETUNIF"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 51280 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_UCETUNIF.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KP_UVERMANUAL.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KP_UVERMANUAL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KP_UVERMANUAL
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KP_UVERMANUAL"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 3231 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KP_UVERMANUAL.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KTGAPPUSER.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KTGAPPUSER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KTGAPPUSER
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KTGAPPUSER"  MINVALUE 1000 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 30212 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KTGAPPUSER.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KTG_CENNYPAPIR.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KTG_CENNYPAPIR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KTG_CENNYPAPIR
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KTG_CENNYPAPIR"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 63811 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KTG_CENNYPAPIR.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KTG_EVIADMINSPOLECNOST.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KTG_EVIADMINSPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KTG_EVIADMINSPOLECNOST
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KTG_EVIADMINSPOLECNOST"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 16606 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KTG_EVIADMINSPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_KTG_PROJEKTNAVRH.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_KTG_PROJEKTNAVRH.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_KTG_PROJEKTNAVRH
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_KTG_PROJEKTNAVRH"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 1181 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_KTG_PROJEKTNAVRH.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_LOG_AKCE.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_LOG_AKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_LOG_AKCE
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_LOG_AKCE"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_LOG_AKCE.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_LOG_AKCE_DETAIL.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_LOG_AKCE_DETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_LOG_AKCE_DETAIL
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_LOG_AKCE_DETAIL"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 596163 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_LOG_AKCE_DETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_LOG_DWH_ID.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_LOG_DWH_ID.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_LOG_DWH_ID
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_LOG_DWH_ID"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 7116 NOCACHE  NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_LOG_DWH_ID.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_PROJEKTDOKLAD.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_PROJEKTDOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_PROJEKTDOKLAD
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_PROJEKTDOKLAD"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 273366 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_PROJEKTDOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_SEGMENTZASTUP.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_SEGMENTZASTUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_SEGMENTZASTUP
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_SEGMENTZASTUP"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 1763 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_SEGMENTZASTUP.sql
PROMPT


-- ============================================================================
-- Deploy: SQ_SSRS_UA_RKC.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying SQ_SSRS_UA_RKC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence SQ_SSRS_UA_RKC
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."SQ_SSRS_UA_RKC"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1154974 NOCACHE  NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed SQ_SSRS_UA_RKC.sql
PROMPT


-- ============================================================================
-- Deploy: XX.sql
-- Category: sequences
-- ============================================================================

PROMPT Deploying XX.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Sequence XX
--------------------------------------------------------

   CREATE SEQUENCE  "DB_JT"."XX"  MINVALUE 0 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 5 NOCACHE  NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


PROMPT Completed XX.sql
PROMPT


-- ============================================================================
-- PHASE: Deploy TABLES (710 files)
-- ============================================================================

PROMPT
PROMPT ============================================================================
PROMPT Deploying TABLES (710 files)
PROMPT ============================================================================
PROMPT


-- ============================================================================
-- Deploy: ADMIN_MY_SESSION.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying ADMIN_MY_SESSION.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table ADMIN_MY_SESSION
--------------------------------------------------------

  CREATE TABLE "DB_JT"."ADMIN_MY_SESSION" 
   (	"ID" NUMBER(*,0), 
	"S_NAME" VARCHAR2(32 BYTE), 
	"C_FREE" CHAR(1 BYTE), 
	"DT_ZMENA" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed ADMIN_MY_SESSION.sql
PROMPT


-- ============================================================================
-- Deploy: AXXX.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying AXXX.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table AXXX
--------------------------------------------------------

  CREATE TABLE "DB_JT"."AXXX" 
   (	"UDID" NUMBER(20,0), 
	"UPID" NUMBER(20,0), 
	"M1D0" NUMBER(10,0), 
	"DATUM" DATE, 
	"UCET" NVARCHAR2(20), 
	"STREDISKO" NVARCHAR2(15), 
	"PROTIUCET" NVARCHAR2(20), 
	"PROTISTREDISKO" NVARCHAR2(15), 
	"TEXT" NVARCHAR2(100), 
	"CASTKA" NUMBER(34,16), 
	"MENA" NVARCHAR2(3), 
	"CASTKAMENY" NUMBER(34,16), 
	"KURZ" NUMBER(38,6), 
	"JEDNOTKA" NUMBER(10,0), 
	"DOID" NVARCHAR2(20), 
	"PARZNAK" NVARCHAR2(30), 
	"VYPZNAK" NUMBER(10,0), 
	"DATUMSPLAT" DATE, 
	"ZAKAZKA" NVARCHAR2(30), 
	"CINNOST" NVARCHAR2(30), 
	"DATUMDPH" DATE, 
	"RELACEDPH" NUMBER(10,0), 
	"SAZBADPH" NUMBER(32,16), 
	"EXPORTLOCK" NUMBER(10,0), 
	"OPID" NUMBER(10,0), 
	"DATOP" NUMBER(10,0), 
	"TOPZKRATKA" NUMBER(10,0), 
	"MANAZER_ID" NVARCHAR2(30), 
	"PROJEKT_ID" NVARCHAR2(30), 
	"XIDSL" NUMBER(10,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed AXXX.sql
PROMPT


-- ============================================================================
-- Deploy: BAK_KP_REP_SPOLECNOSTCARTESIS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying BAK_KP_REP_SPOLECNOSTCARTESIS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table BAK_KP_REP_SPOLECNOSTCARTESIS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."BAK_KP_REP_SPOLECNOSTCARTESIS" 
   (	"DT_DATUM" DATE, 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"ID_IFRSSEGMENT" NUMBER(*,0), 
	"ID_MNGSEGMENT" NUMBER(*,0), 
	"IFRS_OD" DATE, 
	"IFRS_DO" DATE, 
	"C_AKTIVNI" CHAR(1 BYTE), 
	"C_SCOPE8" CHAR(1 BYTE), 
	"DT_IN1_RKC" DATE, 
	"DT_OUT1_RKC" DATE, 
	"DT_IN2_JTFG" DATE, 
	"DT_OUT2_JTFG" DATE, 
	"DT_IN2_TECHNO" DATE, 
	"DT_OUT2_TECHNO" DATE, 
	"DT_IN4_MNG" DATE, 
	"DT_OUT4_MNG" DATE, 
	"ID_SUBTYPCLEN_1" NUMBER(*,0), 
	"ID_SUBTYPCLEN_2R" NUMBER(*,0), 
	"ID_SUBTYPCLEN_2T" NUMBER(*,0), 
	"ID_SUBTYPCLEN_4" NUMBER(*,0), 
	"S_SPOLECNOSTNAZEV" VARCHAR2(256 BYTE), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_COUNTRY" VARCHAR2(3 BYTE), 
	"S_KODKATEGORIEPROTISTRANA" CHAR(3 BYTE), 
	"ID_ZODPOVEDNAUCETNI" NUMBER(*,0), 
	"ID_SPRAVCEKONSOLIDACE" NUMBER(*,0), 
	"ID_ODPOVEDNAOSOBA" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOSTMATKA" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed BAK_KP_REP_SPOLECNOSTCARTESIS.sql
PROMPT


-- ============================================================================
-- Deploy: BCK_DOKLAD_TAMARAMA_03_2019.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying BCK_DOKLAD_TAMARAMA_03_2019.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table BCK_DOKLAD_TAMARAMA_03_2019
--------------------------------------------------------

  CREATE TABLE "DB_JT"."BCK_DOKLAD_TAMARAMA_03_2019" 
   (	"ID" NUMBER(*,0), 
	"NL_ERROR" NUMBER(*,0), 
	"NL_KROK" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"ID_KTGDOKLAD" NUMBER(*,0), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"DT_DATUM" DATE, 
	"S_POPIS" VARCHAR2(256 BYTE), 
	"ID_PARENT" NUMBER(*,0), 
	"DT_VYTVORENO" DATE, 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"DT_PLATNOSTMUSTEK" DATE, 
	"S_UZIVATELMUSTEK" VARCHAR2(20 BYTE), 
	"NL_WARNING" NUMBER(*,0), 
	"DT_DATUMPOCSTAV" DATE, 
	"ID_SUBKONSOLIDACE" NUMBER(*,0), 
	"ID_KTGSUBKONSOLIDACEETAPA" NUMBER(*,0), 
	"NL_POCETTRANSAKCI" NUMBER, 
	"ND_ZJ" NUMBER(15,2), 
	"ND_VJ" NUMBER(15,2), 
	"DT_MAXTRANSAKCE" DATE, 
	"C_SUBSMER" CHAR(1 BYTE), 
	"DT_SUBDATUM" DATE, 
	"C_BASEDOKLAD" CHAR(1 BYTE), 
	"NL_POCETTRANSAKCIPROJEKT" NUMBER(*,0), 
	"NL_POCETTRANSAKCIODBOR" NUMBER(*,0), 
	"NL_POCETTRANSAKCIPROJEKTPLUS" NUMBER(*,0), 
	"DT_DATUMRELATIVE" DATE, 
	"DT_DATUMEXPORTOLAP" DATE, 
	"NL_VYNOSY" NUMBER(*,0), 
	"NL_VYNOSYPLUS" NUMBER(*,0), 
	"NL_NAKLADY" NUMBER(*,0), 
	"NL_NAKLADYPLUS" NUMBER(*,0), 
	"C_VAZBY" CHAR(1 BYTE), 
	"C_IFRSPRIMARNI" CHAR(1 BYTE), 
	"ID_CISDATABAZE" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed BCK_DOKLAD_TAMARAMA_03_2019.sql
PROMPT


-- ============================================================================
-- Deploy: BCK_SL_337868.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying BCK_SL_337868.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table BCK_SL_337868
--------------------------------------------------------

  CREATE TABLE "DB_JT"."BCK_SL_337868" 
   (	"ID" NUMBER, 
	"ID_DOKUMENT" NUMBER, 
	"ID_ODBOR" NUMBER, 
	"ID_PROJEKT" NUMBER, 
	"ND_CASTKA" NUMBER(15,2), 
	"ID_ODBOROO" NUMBER, 
	"DT_SCHVALENOODBOR" DATE, 
	"ID_PROJEKTMAN" NUMBER, 
	"DT_SCHVALENOPROJEKT" DATE, 
	"ID_UCSPOLOO" NUMBER, 
	"DT_SCHVALENOUCSPOL" DATE, 
	"ID_UCSPOLTOP" NUMBER, 
	"DT_SCHVALENOTOP" DATE, 
	"S_KOMENTAR" VARCHAR2(100 BYTE), 
	"DT_DATUMPREFAKT" DATE, 
	"ID_PREFAKT" NUMBER, 
	"C_KPREFAKT" CHAR(1 BYTE), 
	"DT_DATUMZADANI" DATE, 
	"C_REMOVED" CHAR(1 BYTE), 
	"C_ZOBJEDNAVKY" CHAR(1 BYTE), 
	"ID_ZAMITNUTO" NUMBER, 
	"DT_ZAMITNUTO" DATE, 
	"S_ZAMITNUTO" VARCHAR2(100 BYTE), 
	"ID_DOKUMENTORIG" NUMBER, 
	"ID_ODBOROOREAL" NUMBER, 
	"ID_PROJEKTMANREAL" NUMBER, 
	"ID_UCSPOLOOREAL" NUMBER, 
	"ID_UCSPOLTOPREAL" NUMBER, 
	"ID_TYPTRANSAKCE" NUMBER(*,0), 
	"ND_OBJ_CASTKA_VOLNA" NUMBER(15,2), 
	"ID_OBJ_RADEK" NUMBER, 
	"ID_BANKAR" NUMBER, 
	"S_ISIT_BUDGET" VARCHAR2(20 BYTE), 
	"C_AKTIVACE_HNED" CHAR(1 BYTE), 
	"DT_AKTIVACE" DATE, 
	"S_SMLOUVA_CISLO" VARCHAR2(100 BYTE), 
	"ID_TYP_SW" NUMBER(8,2), 
	"ID_APLIKACE" NUMBER(8,2), 
	"ID_DRUH_NAKLADU" NUMBER(8,2)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON TABLE "DB_JT"."BCK_SL_337868"  IS 'zaloha riadkov typizovaneho SL 337868 k 15.08.2014';


PROMPT Completed BCK_SL_337868.sql
PROMPT


-- ============================================================================
-- Deploy: BCK_SL_337868_DOC.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying BCK_SL_337868_DOC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table BCK_SL_337868_DOC
--------------------------------------------------------

  CREATE TABLE "DB_JT"."BCK_SL_337868_DOC" 
   (	"ID" NUMBER, 
	"ID_CISDOKUMENT" NUMBER, 
	"ID_KTGUCETNISPOLECNOST" NUMBER, 
	"DT_DATUMZADANI" DATE, 
	"ID_ZADAVATEL" NUMBER, 
	"S_POPIS" VARCHAR2(500 BYTE), 
	"ID_TYPTRANSAKCE" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_PISEMNE" VARCHAR2(3 BYTE), 
	"C_TYPIZOVANATRAN" CHAR(1 BYTE), 
	"DT_TYPIZOVANAOD" DATE, 
	"DT_TYPIZOVANADO" DATE, 
	"DT_DATUMZAUCTOVANI" DATE, 
	"ID_SPOLECNOST" NUMBER, 
	"S_CISLODOKLADU" VARCHAR2(20 BYTE), 
	"DT_DATUMSPLATNOSTI" DATE, 
	"ID_APPUSER" NUMBER, 
	"ID_ZAUCT" NUMBER, 
	"S_PROTISTRANA" VARCHAR2(100 BYTE), 
	"ID_CISSTATUS" NUMBER, 
	"C_POKLADNITRANSAKCE" CHAR(1 BYTE), 
	"ID_GESTOR" NUMBER, 
	"DT_GESTORSCHVALENO" DATE, 
	"DT_POZADDATUMUHRADY" DATE, 
	"DT_REALDATUMUHRADY" DATE, 
	"DT_GESTORZAMITNUTO" DATE, 
	"S_GESTORZAMITNUTO" VARCHAR2(100 BYTE), 
	"DT_ZADAVATELZAMITNUTO" DATE, 
	"S_ZADAVATELZAMITNUTO" VARCHAR2(100 BYTE), 
	"ID_TYPIZLINK" NUMBER, 
	"S_DUVODZRUSENI" VARCHAR2(50 BYTE), 
	"ID_UCSPOLUHRADA" NUMBER, 
	"DT_ZAUCTUHRADA" DATE, 
	"ID_ZAUCTUHRADA" NUMBER, 
	"ID_TYPPRECENENI" NUMBER, 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UCET2" VARCHAR2(10 BYTE), 
	"C_DPH" CHAR(1 BYTE), 
	"ID_BUDGET" NUMBER(*,0), 
	"ID_TTDEVELOPER" NUMBER(*,0), 
	"ID_CISUHRADA" NUMBER(*,0), 
	"DT_UCETNIZAMITNUTO" DATE, 
	"S_UCETNIZAMITNUTO" VARCHAR2(100 BYTE), 
	"ID_KTGUCETNISPOLECNOST2" NUMBER(*,0), 
	"S_UCETB" VARCHAR2(10 BYTE), 
	"S_UCETB2" VARCHAR2(10 BYTE), 
	"CERPAT_REZERVU" VARCHAR2(1 BYTE), 
	"DT_NAVYSENI_SCHVALENO" DATE, 
	"DT_NAVYSENI_ZAMITNUTO" DATE, 
	"S_NAVYSENI_ZAMITNUTO" VARCHAR2(100 BYTE), 
	"ID_NAVYSENI_MB" NUMBER, 
	"CISLOFA" VARCHAR2(20 BYTE), 
	"DATPRIJ" DATE, 
	"DATDPH" DATE, 
	"CASTKA" NUMBER(27,2), 
	"FEIS_PRENOS" CHAR(1 BYTE), 
	"DATODES" DATE, 
	"TYP_FKT" NUMBER(*,0), 
	"C_CAPEX_OPEX" VARCHAR2(1 BYTE), 
	"S_FEISTEXT" VARCHAR2(250 BYTE), 
	"DATVYSTAVENI" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON TABLE "DB_JT"."BCK_SL_337868_DOC"  IS 'zaloha  typizovaneho SL 337868 k 15.08.2014';


PROMPT Completed BCK_SL_337868_DOC.sql
PROMPT


-- ============================================================================
-- Deploy: CISLA_VOUCHERU_JT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying CISLA_VOUCHERU_JT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table CISLA_VOUCHERU_JT
--------------------------------------------------------

  CREATE TABLE "DB_JT"."CISLA_VOUCHERU_JT" 
   (	"CISLO" NUMBER, 
	"POPIS" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed CISLA_VOUCHERU_JT.sql
PROMPT


-- ============================================================================
-- Deploy: CIS_BANKA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying CIS_BANKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table CIS_BANKA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."CIS_BANKA" 
   (	"ID" NUMBER, 
	"S_ZKRATKA" VARCHAR2(10 BYTE), 
	"ID_CISMENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed CIS_BANKA.sql
PROMPT


-- ============================================================================
-- Deploy: CIS_LOCALE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying CIS_LOCALE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table CIS_LOCALE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."CIS_LOCALE" 
   (	"S_LOCALE" VARCHAR2(6 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed CIS_LOCALE.sql
PROMPT


-- ============================================================================
-- Deploy: CREATE_JAVA_LOB_TABLE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying CREATE_JAVA_LOB_TABLE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table CREATE$JAVA$LOB$TABLE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."CREATE$JAVA$LOB$TABLE" 
   (	"NAME" VARCHAR2(700 BYTE), 
	"LOB" BLOB, 
	"LOADTIME" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS 
 LOB ("LOB") STORE AS BASICFILE "LOBSEGMENT"(
  TABLESPACE USERS ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  NOCACHE LOGGING 
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) ;


PROMPT Completed CREATE_JAVA_LOB_TABLE.sql
PROMPT


-- ============================================================================
-- Deploy: DAT_BUDGETPROJEKTTRANSAKCE_QCZ.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying DAT_BUDGETPROJEKTTRANSAKCE_QCZ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table DAT_BUDGETPROJEKTTRANSAKCE_QCZ
--------------------------------------------------------

  CREATE TABLE "DB_JT"."DAT_BUDGETPROJEKTTRANSAKCE_QCZ" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed DAT_BUDGETPROJEKTTRANSAKCE_QCZ.sql
PROMPT


-- ============================================================================
-- Deploy: DAT_BUDGETPROJEKTTRAN_ALL_QCZ.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying DAT_BUDGETPROJEKTTRAN_ALL_QCZ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table DAT_BUDGETPROJEKTTRAN_ALL_QCZ
--------------------------------------------------------

  CREATE TABLE "DB_JT"."DAT_BUDGETPROJEKTTRAN_ALL_QCZ" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE), 
	"FK_GEN_ID" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed DAT_BUDGETPROJEKTTRAN_ALL_QCZ.sql
PROMPT


-- ============================================================================
-- Deploy: DAT_BUDGETPROJEKTTRAN_ALL_QSK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying DAT_BUDGETPROJEKTTRAN_ALL_QSK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table DAT_BUDGETPROJEKTTRAN_ALL_QSK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."DAT_BUDGETPROJEKTTRAN_ALL_QSK" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE), 
	"FK_GEN_ID" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed DAT_BUDGETPROJEKTTRAN_ALL_QSK.sql
PROMPT


-- ============================================================================
-- Deploy: DAT_BUDGETPROJEKTTRAN_Q0608.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying DAT_BUDGETPROJEKTTRAN_Q0608.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table DAT_BUDGETPROJEKTTRAN_Q0608
--------------------------------------------------------

  CREATE TABLE "DB_JT"."DAT_BUDGETPROJEKTTRAN_Q0608" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed DAT_BUDGETPROJEKTTRAN_Q0608.sql
PROMPT


-- ============================================================================
-- Deploy: DAT_BUDGETPROJEKTTRAN_QCZ99.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying DAT_BUDGETPROJEKTTRAN_QCZ99.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table DAT_BUDGETPROJEKTTRAN_QCZ99
--------------------------------------------------------

  CREATE TABLE "DB_JT"."DAT_BUDGETPROJEKTTRAN_QCZ99" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed DAT_BUDGETPROJEKTTRAN_QCZ99.sql
PROMPT


-- ============================================================================
-- Deploy: DAT_BUDGETTRANSAKCE_QCZ.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying DAT_BUDGETTRANSAKCE_QCZ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table DAT_BUDGETTRANSAKCE_QCZ
--------------------------------------------------------

  CREATE TABLE "DB_JT"."DAT_BUDGETTRANSAKCE_QCZ" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed DAT_BUDGETTRANSAKCE_QCZ.sql
PROMPT


-- ============================================================================
-- Deploy: DAT_BUDGETTRANSAKCE_QSK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying DAT_BUDGETTRANSAKCE_QSK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table DAT_BUDGETTRANSAKCE_QSK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."DAT_BUDGETTRANSAKCE_QSK" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed DAT_BUDGETTRANSAKCE_QSK.sql
PROMPT


-- ============================================================================
-- Deploy: DAT_BUDGETTRANSAKCE_QSK_BCK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying DAT_BUDGETTRANSAKCE_QSK_BCK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table DAT_BUDGETTRANSAKCE_QSK_BCK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."DAT_BUDGETTRANSAKCE_QSK_BCK" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed DAT_BUDGETTRANSAKCE_QSK_BCK.sql
PROMPT


-- ============================================================================
-- Deploy: DAT_BUDGETTRANSAKCE__ALL_QCZ.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying DAT_BUDGETTRANSAKCE__ALL_QCZ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table DAT_BUDGETTRANSAKCE__ALL_QCZ
--------------------------------------------------------

  CREATE TABLE "DB_JT"."DAT_BUDGETTRANSAKCE__ALL_QCZ" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE), 
	"FK_GEN_ID" CHAR(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed DAT_BUDGETTRANSAKCE__ALL_QCZ.sql
PROMPT


-- ============================================================================
-- Deploy: DAT_BUDGETTRANSAKCE__ALL_QSK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying DAT_BUDGETTRANSAKCE__ALL_QSK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table DAT_BUDGETTRANSAKCE__ALL_QSK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."DAT_BUDGETTRANSAKCE__ALL_QSK" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE), 
	"FK_GEN_ID" CHAR(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed DAT_BUDGETTRANSAKCE__ALL_QSK.sql
PROMPT


-- ============================================================================
-- Deploy: DAT_KURZLIST.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying DAT_KURZLIST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table DAT_KURZLIST
--------------------------------------------------------

  CREATE TABLE "DB_JT"."DAT_KURZLIST" 
   (	"DT_DATUM" DATE, 
	"ID_CISBANKA" NUMBER, 
	"ID_CISMENA" VARCHAR2(3 BYTE), 
	"ND_KURZ" NUMBER(8,5), 
	"NL_KVANTITA" NUMBER(*,0), 
	"DT_CREATE" DATE DEFAULT SYSDATE, 
	"ZDROJ" VARCHAR2(10 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed DAT_KURZLIST.sql
PROMPT


-- ============================================================================
-- Deploy: DAT_KURZLISTAVG.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying DAT_KURZLISTAVG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table DAT_KURZLISTAVG
--------------------------------------------------------

  CREATE TABLE "DB_JT"."DAT_KURZLISTAVG" 
   (	"DT_DATUM" DATE, 
	"ID_CISBANKA" NUMBER, 
	"ID_CISMENA" VARCHAR2(3 BYTE), 
	"ND_KURZ" NUMBER(8,5), 
	"NL_KVANTITA" NUMBER(*,0), 
	"ZDROJ" VARCHAR2(10 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed DAT_KURZLISTAVG.sql
PROMPT


-- ============================================================================
-- Deploy: DAT_KURZLIST_CZK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying DAT_KURZLIST_CZK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table DAT_KURZLIST_CZK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."DAT_KURZLIST_CZK" 
   (	"DT_DATUM" DATE, 
	"ID_CISBANKA" NUMBER, 
	"ID_CISMENA" VARCHAR2(3 BYTE), 
	"ND_KURZ" NUMBER(8,5), 
	"NL_KVANTITA" NUMBER(*,0), 
	"DT_CREATE" DATE, 
	"ZDROJ" VARCHAR2(10 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed DAT_KURZLIST_CZK.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TABLES/DW_CIS_ISIT_APLIKACE.sql: 'utf-8' codec can't decode byte 0x96 in position 604: invalid start byte


-- ============================================================================
-- Deploy: DW_CIS_ISIT_BUDGET.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying DW_CIS_ISIT_BUDGET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table DW_CIS_ISIT_BUDGET
--------------------------------------------------------

  CREATE TABLE "DB_JT"."DW_CIS_ISIT_BUDGET" 
   (	"ISIT_BUDGET_KEY" NUMBER(22,0), 
	"ISIT_BUDGET_DATA_KEY" NUMBER(22,0), 
	"S_KOD" VARCHAR2(20 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ISIT_APLIKACE_KEY" NUMBER(22,0), 
	"ISIT_APLIKACE_DATA_KEY" NUMBER(22,0), 
	"ISIT_DRUH_NAKLADU_KEY" NUMBER(22,0), 
	"ISIT_DRUH_NAKLADU_DATA_KEY" NUMBER(22,0), 
	"KIS_TYP_TRAN_CAPEX_OPEX" VARCHAR2(1 BYTE), 
	"TYP_TRAN_CAPEX_OPEX_KEY" NUMBER(22,0), 
	"TYP_TRAN_CAPEX_OPEX_DATA_KEY" NUMBER(22,0), 
	"ISIT_TYP_POLOZKY_KEY" NUMBER(22,0), 
	"ISIT_TYP_POLOZKY_DATA_KEY" NUMBER(22,0), 
	"KIS_ODBOR_ID" NUMBER(38,0), 
	"KIS_DWT_KTG_ODBOR_KEY" NUMBER(22,0), 
	"KIS_DWT_KTG_ODBOR_DATA_KEY" NUMBER(22,0), 
	"KIS_PROJEKT_ID" NUMBER(38,0), 
	"KIS_DWT_KTG_PROJEKT_KEY" NUMBER(22,0), 
	"KIS_DWT_KTG_PROJEKT_DATA_KEY" NUMBER(22,0), 
	"KIS_UCETNI_SPOL_ID" NUMBER(38,0), 
	"KIS_DWT_KTG_UCETSPOL_KEY" NUMBER(22,0), 
	"KIS_DWT_KTG_UCETSPOL_DATA_KEY" NUMBER(22,0), 
	"BUS_DATE_FROM" DATE, 
	"BUS_DATE_TO" DATE, 
	"VALID_TIME_FROM" DATE, 
	"VALID_TIME_TO" DATE, 
	"INSERTED_BY_KEY" NUMBER(22,0), 
	"INSERTED_BY_DATA_KEY" NUMBER(22,0)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;


PROMPT Completed DW_CIS_ISIT_BUDGET.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TABLES/DW_CIS_ISIT_DRUH_NAKLADU.sql: 'utf-8' codec can't decode byte 0x96 in position 611: invalid start byte


-- ============================================================================
-- Deploy: DW_CIS_ISIT_SEMAFOR_SYNC.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying DW_CIS_ISIT_SEMAFOR_SYNC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table DW_CIS_ISIT_SEMAFOR_SYNC
--------------------------------------------------------

  CREATE TABLE "DB_JT"."DW_CIS_ISIT_SEMAFOR_SYNC" 
   (	"ZMENENY_CISLENIK" VARCHAR2(20 BYTE), 
	"DATUM_ZMENY" DATE
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;


PROMPT Completed DW_CIS_ISIT_SEMAFOR_SYNC.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TABLES/DW_CIS_ISIT_TYP_POLOZKY.sql: 'utf-8' codec can't decode byte 0x9e in position 601: invalid start byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TABLES/DW_CIS_ISIT_TYP_SW.sql: 'utf-8' codec can't decode byte 0x96 in position 575: invalid start byte


-- ============================================================================
-- Deploy: EXT_CRT_DWH_CT_ACCOUNT_RISK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying EXT_CRT_DWH_CT_ACCOUNT_RISK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table EXT_CRT_DWH_CT_ACCOUNT_RISK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."EXT_CRT_DWH_CT_ACCOUNT_RISK" 
   (	"ID" NUMBER(10,0), 
	"OWNER_SITE" NUMBER(5,0), 
	"NAME" VARCHAR2(12 CHAR), 
	"SDESC1" VARCHAR2(30 CHAR), 
	"SDESC2" VARCHAR2(30 CHAR), 
	"SDESC3" VARCHAR2(30 CHAR), 
	"SDESC4" VARCHAR2(30 CHAR), 
	"SDESC5" VARCHAR2(30 CHAR), 
	"SDESC6" VARCHAR2(30 CHAR), 
	"LDESC1" VARCHAR2(120 CHAR), 
	"LDESC2" VARCHAR2(120 CHAR), 
	"LDESC3" VARCHAR2(120 CHAR), 
	"LDESC4" VARCHAR2(120 CHAR), 
	"LDESC5" VARCHAR2(120 CHAR), 
	"LDESC6" VARCHAR2(120 CHAR), 
	"XDESC1" VARCHAR2(253 CHAR), 
	"XDESC2" VARCHAR2(253 CHAR), 
	"XDESC3" VARCHAR2(253 CHAR), 
	"XDESC4" VARCHAR2(253 CHAR), 
	"XDESC5" VARCHAR2(253 CHAR), 
	"XDESC6" VARCHAR2(253 CHAR), 
	"OWNER_WORKGROUP_ID" NUMBER(10,0), 
	"ACCESS_MODE" NUMBER(5,0), 
	"CREATION_DATE" DATE, 
	"UPDATE_DATE" DATE, 
	"AUTHOR_ID" NUMBER(10,0), 
	"UPDATE_AUTHOR_ID" NUMBER(10,0), 
	"SIGN" NUMBER(10,0), 
	"CLASS" NUMBER(10,0), 
	"CT_0000_SETACC" NUMBER(10,0), 
	"CT_0000_ANALYS" NUMBER(10,0), 
	"CT_0000_SBTOT" NUMBER(10,0), 
	"CT_0000_ICDOC" NUMBER(10,0), 
	"CT_0000_RULE2" NUMBER(10,0), 
	"CT_0000_CFS" NUMBER(10,0), 
	"CT_0000_PARENT" NUMBER(10,0), 
	"CT_0000_ICSGROUP" NUMBER(10,0), 
	"CT_0000_BCN" NUMBER(10,0), 
	"CT_0000_ACTYPE" NUMBER(10,0), 
	"CT_0000_COATYPE" NUMBER(10,0), 
	"CT_0000_OIPC" NUMBER(10,0), 
	"CT_0000_MGTH" NUMBER(10,0), 
	"CT_0000_ENTH" NUMBER(10,0), 
	"CT_0000_FINH" NUMBER(10,0), 
	"CT_0000_RKCH" NUMBER(10,0), 
	"CT_0000_FINSUM" NUMBER(10,0), 
	"CT_0000_ENTSUM" NUMBER(10,0), 
	"CT_0000_FIBSUM" NUMBER(10,0), 
	"CT_0000_RULESEL" NUMBER(10,0), 
	"CT_0000_RULECCSEL2" NUMBER(10,0), 
	"CT_0000_CEETA" NUMBER(10,0), 
	"CT_0000_RISK" NUMBER(10,0), 
	"CT_0000_RESR" NUMBER(10,0), 
	"CT_0000_EPH" NUMBER(10,0), 
	"CT_0000_TMR" NUMBER(10,0), 
	"CT_0000_BHP" NUMBER(10,0), 
	"CT_0000_SIGN" NUMBER(10,0), 
	"CT_0000_DRC" NUMBER(10,0), 
	"CT_0000_JTB" NUMBER(10,0), 
	"CT_0000_JOJ" NUMBER(10,0), 
	"CT_0000_RKC1" NUMBER(10,0), 
	"DECIMALS" NUMBER(10,0), 
	"MONETARY" CHAR(1 BYTE), 
	"CT_0000_FXRKC" CHAR(1 BYTE), 
	"CT_0000_ACIFRSTYPE" NUMBER(10,0), 
	"CT_0000_DWHEXP" CHAR(1 BYTE), 
	"DWH_BUS_DATE" DATE, 
	"DWH_VALID_FLG" CHAR(1 BYTE), 
	"DWH_INSERT_PROCESS" VARCHAR2(30 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed EXT_CRT_DWH_CT_ACCOUNT_RISK.sql
PROMPT


-- ============================================================================
-- Deploy: EXT_DOKLADUVEROVAPOZICE_UNION.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying EXT_DOKLADUVEROVAPOZICE_UNION.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table EXT_DOKLADUVEROVAPOZICE_UNION
--------------------------------------------------------

  CREATE TABLE "DB_JT"."EXT_DOKLADUVEROVAPOZICE_UNION" 
   (	"S_UCET" VARCHAR2(15 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKACNB" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"ID_DOKLAD" NUMBER(*,0), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"S_UCETUNIF" VARCHAR2(15 BYTE), 
	"ID_UNIFPROTI" NUMBER(*,0), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"C_BANKA" VARCHAR2(4000 BYTE), 
	"ND_CISTAANGAZOVANOST" NUMBER, 
	"GROUP_CODE_ZDROJ" VARCHAR2(5 BYTE), 
	"DIFFR" VARCHAR2(3 BYTE), 
	"NAZEV_SPOLECNOST" VARCHAR2(4000 BYTE), 
	"S_TYP_OBEZRETNOST_PORTFOLIA" VARCHAR2(3 BYTE), 
	"S_COUNTRY" VARCHAR2(3 BYTE), 
	"S_ESA" VARCHAR2(25 CHAR), 
	"S_NACE" VARCHAR2(25 CHAR), 
	"S_LEI" VARCHAR2(250 CHAR), 
	"S_SHADOW_BANK" VARCHAR2(1 BYTE), 
	"S_TYPE_OF_EXPOSURE" VARCHAR2(10 BYTE), 
	"S_COLL_REG_CODE" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed EXT_DOKLADUVEROVAPOZICE_UNION.sql
PROMPT


-- ============================================================================
-- Deploy: EXT_DOKLADUVEROVAPOZICE_UN_ALL.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying EXT_DOKLADUVEROVAPOZICE_UN_ALL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table EXT_DOKLADUVEROVAPOZICE_UN_ALL
--------------------------------------------------------

  CREATE TABLE "DB_JT"."EXT_DOKLADUVEROVAPOZICE_UN_ALL" 
   (	"S_UCET" VARCHAR2(15 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKACNB" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"ID_DOKLAD" NUMBER(*,0), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"S_UCETUNIF" VARCHAR2(15 BYTE), 
	"ID_UNIFPROTI" NUMBER(*,0), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"C_BANKA" VARCHAR2(4000 BYTE), 
	"ND_CISTAANGAZOVANOST" NUMBER, 
	"GROUP_CODE_ZDROJ" VARCHAR2(5 BYTE), 
	"DIFFR" VARCHAR2(3 BYTE), 
	"NAZEV_SPOLECNOST" VARCHAR2(4000 BYTE), 
	"S_TYP_OBEZRETNOST_PORTFOLIA" VARCHAR2(3 BYTE), 
	"S_COUNTRY" VARCHAR2(3 BYTE), 
	"S_ESA" VARCHAR2(25 CHAR), 
	"S_NACE" VARCHAR2(25 CHAR), 
	"S_LEI" VARCHAR2(250 CHAR), 
	"S_SHADOW_BANK" VARCHAR2(1 BYTE), 
	"S_TYPE_OF_EXPOSURE" VARCHAR2(10 BYTE), 
	"S_COLL_REG_CODE" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed EXT_DOKLADUVEROVAPOZICE_UN_ALL.sql
PROMPT


-- ============================================================================
-- Deploy: EXT_REBECCA_KLIENTI.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying EXT_REBECCA_KLIENTI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table EXT_REBECCA_KLIENTI
--------------------------------------------------------

  CREATE TABLE "DB_JT"."EXT_REBECCA_KLIENTI" 
   (	"KID" NUMBER(38,0), 
	"ICO" VARCHAR2(50 BYTE), 
	"NAZEV" VARCHAR2(256 BYTE), 
	"JMENO" VARCHAR2(256 BYTE), 
	"TIT_PRED" VARCHAR2(50 BYTE), 
	"TIT_ZA" VARCHAR2(50 BYTE), 
	"LOKACE" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed EXT_REBECCA_KLIENTI.sql
PROMPT


-- ============================================================================
-- Deploy: EXT_REBECCA_KLIENTI_BCK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying EXT_REBECCA_KLIENTI_BCK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table EXT_REBECCA_KLIENTI_BCK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."EXT_REBECCA_KLIENTI_BCK" 
   (	"KID" NUMBER(38,0), 
	"ICO" VARCHAR2(50 BYTE), 
	"NAZEV" VARCHAR2(256 BYTE), 
	"JMENO" VARCHAR2(256 BYTE), 
	"TIT_PRED" VARCHAR2(50 BYTE), 
	"TIT_ZA" VARCHAR2(50 BYTE), 
	"LOKACE" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed EXT_REBECCA_KLIENTI_BCK.sql
PROMPT


-- ============================================================================
-- Deploy: EXT_REBECCA_KLIENTI_DUPL.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying EXT_REBECCA_KLIENTI_DUPL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table EXT_REBECCA_KLIENTI_DUPL
--------------------------------------------------------

  CREATE TABLE "DB_JT"."EXT_REBECCA_KLIENTI_DUPL" 
   (	"KID" NUMBER(38,0), 
	"ICO" VARCHAR2(50 BYTE), 
	"NAZEV" VARCHAR2(256 BYTE), 
	"JMENO" VARCHAR2(256 BYTE), 
	"TIT_PRED" VARCHAR2(50 BYTE), 
	"TIT_ZA" VARCHAR2(50 BYTE), 
	"LOKACE" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed EXT_REBECCA_KLIENTI_DUPL.sql
PROMPT


-- ============================================================================
-- Deploy: EXT_REBECCA_KLIENTI_V1.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying EXT_REBECCA_KLIENTI_V1.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table EXT_REBECCA_KLIENTI_V1
--------------------------------------------------------

  CREATE TABLE "DB_JT"."EXT_REBECCA_KLIENTI_V1" 
   (	"KID" NUMBER(38,0), 
	"ICO" VARCHAR2(50 BYTE), 
	"NAZEV" VARCHAR2(256 BYTE), 
	"JMENO" VARCHAR2(256 BYTE), 
	"TIT_PRED" VARCHAR2(50 BYTE), 
	"TIT_ZA" VARCHAR2(50 BYTE), 
	"LOKACE" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed EXT_REBECCA_KLIENTI_V1.sql
PROMPT


-- ============================================================================
-- Deploy: EXT_REBECCA_KLIENTI_V2.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying EXT_REBECCA_KLIENTI_V2.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table EXT_REBECCA_KLIENTI_V2
--------------------------------------------------------

  CREATE TABLE "DB_JT"."EXT_REBECCA_KLIENTI_V2" 
   (	"KID" NUMBER(38,0), 
	"ICO" VARCHAR2(50 BYTE), 
	"NAZEV" VARCHAR2(256 BYTE), 
	"JMENO" VARCHAR2(256 BYTE), 
	"TIT_PRED" VARCHAR2(50 BYTE), 
	"TIT_ZA" VARCHAR2(50 BYTE), 
	"LOKACE" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed EXT_REBECCA_KLIENTI_V2.sql
PROMPT


-- ============================================================================
-- Deploy: EXT_REBECCA_KLIENTI_V3.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying EXT_REBECCA_KLIENTI_V3.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table EXT_REBECCA_KLIENTI_V3
--------------------------------------------------------

  CREATE TABLE "DB_JT"."EXT_REBECCA_KLIENTI_V3" 
   (	"KID" NUMBER(38,0), 
	"ICO" VARCHAR2(50 BYTE), 
	"NAZEV" VARCHAR2(256 BYTE), 
	"JMENO" VARCHAR2(256 BYTE), 
	"TIT_PRED" VARCHAR2(50 BYTE), 
	"TIT_ZA" VARCHAR2(50 BYTE), 
	"LOKACE" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed EXT_REBECCA_KLIENTI_V3.sql
PROMPT


-- ============================================================================
-- Deploy: FC_CIS_UCETNISPOLECNOST.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying FC_CIS_UCETNISPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table FC_CIS_UCETNISPOLECNOST
--------------------------------------------------------

  CREATE TABLE "DB_JT"."FC_CIS_UCETNISPOLECNOST" 
   (	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed FC_CIS_UCETNISPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: FC_N2N_LOGNASTROJZAJNASTCP.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying FC_N2N_LOGNASTROJZAJNASTCP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table FC_N2N_LOGNASTROJZAJNASTCP
--------------------------------------------------------

  CREATE TABLE "DB_JT"."FC_N2N_LOGNASTROJZAJNASTCP" 
   (	"ID_NASTROJ" NUMBER(*,0), 
	"ID_ZAJISTENI" NUMBER(*,0), 
	"DT_DATUM" DATE DEFAULT sysdate, 
	"S_USER" VARCHAR2(30 BYTE) DEFAULT user
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed FC_N2N_LOGNASTROJZAJNASTCP.sql
PROMPT


-- ============================================================================
-- Deploy: FC_N2N_NASTROJCPZAJISTENINAST.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying FC_N2N_NASTROJCPZAJISTENINAST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table FC_N2N_NASTROJCPZAJISTENINAST
--------------------------------------------------------

  CREATE TABLE "DB_JT"."FC_N2N_NASTROJCPZAJISTENINAST" 
   (	"ID_NASTROJ" NUMBER(*,0), 
	"ID_ZAJISTENI" NUMBER(*,0), 
	 CONSTRAINT "PK_FCN2NNASTROJCPZAJNAST" PRIMARY KEY ("ID_NASTROJ", "ID_ZAJISTENI") ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  ORGANIZATION INDEX NOCOMPRESS PCTFREE 10 INITRANS 2 MAXTRANS 255 LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS 
 PCTTHRESHOLD 50;


PROMPT Completed FC_N2N_NASTROJCPZAJISTENINAST.sql
PROMPT


-- ============================================================================
-- Deploy: FC_N2N_NASTROJCPZAJISTNASTCP.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying FC_N2N_NASTROJCPZAJISTNASTCP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table FC_N2N_NASTROJCPZAJISTNASTCP
--------------------------------------------------------

  CREATE TABLE "DB_JT"."FC_N2N_NASTROJCPZAJISTNASTCP" 
   (	"ID_NASTROJ" NUMBER(*,0), 
	"ID_ZAJISTENI" NUMBER(*,0), 
	 CONSTRAINT "PK_FCN2NNASTROJCPZAJNASTCP" PRIMARY KEY ("ID_NASTROJ", "ID_ZAJISTENI") ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  ORGANIZATION INDEX NOCOMPRESS PCTFREE 10 INITRANS 2 MAXTRANS 255 LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS 
 PCTTHRESHOLD 50;


PROMPT Completed FC_N2N_NASTROJCPZAJISTNASTCP.sql
PROMPT


-- ============================================================================
-- Deploy: FC_N2N_NASTROJOPRAVANASTROJ.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying FC_N2N_NASTROJOPRAVANASTROJ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table FC_N2N_NASTROJOPRAVANASTROJ
--------------------------------------------------------

  CREATE TABLE "DB_JT"."FC_N2N_NASTROJOPRAVANASTROJ" 
   (	"ID_NASTROJ" NUMBER(*,0), 
	"ID_OPRAVKA" NUMBER(*,0), 
	 CONSTRAINT "PK_FCN2NNASTROJOPRAVANASTROJ" PRIMARY KEY ("ID_NASTROJ", "ID_OPRAVKA") ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  ORGANIZATION INDEX NOCOMPRESS PCTFREE 10 INITRANS 2 MAXTRANS 255 LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS 
 PCTTHRESHOLD 50;


PROMPT Completed FC_N2N_NASTROJOPRAVANASTROJ.sql
PROMPT


-- ============================================================================
-- Deploy: FC_N2N_NASTROJOPRAVANASTROJCP.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying FC_N2N_NASTROJOPRAVANASTROJCP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table FC_N2N_NASTROJOPRAVANASTROJCP
--------------------------------------------------------

  CREATE TABLE "DB_JT"."FC_N2N_NASTROJOPRAVANASTROJCP" 
   (	"ID_NASTROJ" NUMBER(*,0), 
	"ID_OPRAVKA" NUMBER(*,0), 
	 CONSTRAINT "PK_FCN2NNASTROJOPRAVANASTROJCP" PRIMARY KEY ("ID_NASTROJ", "ID_OPRAVKA") ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  ORGANIZATION INDEX NOCOMPRESS PCTFREE 10 INITRANS 2 MAXTRANS 255 LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS 
 PCTTHRESHOLD 50;


PROMPT Completed FC_N2N_NASTROJOPRAVANASTROJCP.sql
PROMPT


-- ============================================================================
-- Deploy: FC_N2N_NASTROJZAJISTENINAST.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying FC_N2N_NASTROJZAJISTENINAST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table FC_N2N_NASTROJZAJISTENINAST
--------------------------------------------------------

  CREATE TABLE "DB_JT"."FC_N2N_NASTROJZAJISTENINAST" 
   (	"ID_NASTROJ" NUMBER(*,0), 
	"ID_ZAJISTENI" NUMBER(*,0), 
	 CONSTRAINT "PK_FCN2NNASTROJZAJNAST" PRIMARY KEY ("ID_NASTROJ", "ID_ZAJISTENI") ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  ORGANIZATION INDEX NOCOMPRESS PCTFREE 10 INITRANS 2 MAXTRANS 255 LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS 
 PCTTHRESHOLD 50;


PROMPT Completed FC_N2N_NASTROJZAJISTENINAST.sql
PROMPT


-- ============================================================================
-- Deploy: FC_N2N_NASTROJZAJISTENINASTCP.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying FC_N2N_NASTROJZAJISTENINASTCP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table FC_N2N_NASTROJZAJISTENINASTCP
--------------------------------------------------------

  CREATE TABLE "DB_JT"."FC_N2N_NASTROJZAJISTENINASTCP" 
   (	"ID_NASTROJ" NUMBER(*,0), 
	"ID_ZAJISTENI" NUMBER(*,0), 
	 CONSTRAINT "PK_FCN2NNASTROJZAJNASTCP" PRIMARY KEY ("ID_NASTROJ", "ID_ZAJISTENI") ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  ORGANIZATION INDEX NOCOMPRESS PCTFREE 10 INITRANS 2 MAXTRANS 255 LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS 
 PCTTHRESHOLD 50;


PROMPT Completed FC_N2N_NASTROJZAJISTENINASTCP.sql
PROMPT


-- ============================================================================
-- Deploy: IMPORT_POZICE_UA_RKC_ATRIBUTY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying IMPORT_POZICE_UA_RKC_ATRIBUTY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table IMPORT_POZICE_UA_RKC_ATRIBUTY
--------------------------------------------------------

  CREATE TABLE "DB_JT"."IMPORT_POZICE_UA_RKC_ATRIBUTY" 
   (	"ID_SPOLECNOST" NUMBER(38,0), 
	"S_JTBCR_COUNTRY" VARCHAR2(3 BYTE), 
	"ID_IMP_JTBCR_COUNTRY" NUMBER, 
	"S_JTBCR_ESA" VARCHAR2(25 BYTE), 
	"ID_IMP_JTBCR_ESA" NUMBER, 
	"S_JTBCR_NACE" VARCHAR2(25 BYTE), 
	"ID_IMP_JTBCR_NACE" NUMBER, 
	"S_JTBCR_LEI" VARCHAR2(250 BYTE), 
	"ID_IMP_JTBCR_LEI" NUMBER, 
	"S_JTBSR_COUNTRY" VARCHAR2(3 BYTE), 
	"ID_IMP_JTBSR_COUNTRY" NUMBER, 
	"S_JTBSR_ESA" VARCHAR2(25 BYTE), 
	"ID_IMP_JTBSR_ESA" NUMBER, 
	"S_JTBSR_NACE" VARCHAR2(25 BYTE), 
	"ID_IMP_JTBSR_NACE" NUMBER, 
	"S_JTBSR_LEI" VARCHAR2(250 BYTE), 
	"ID_IMP_JTBSR_LEI" NUMBER, 
	"S_POBA_COUNTRY" VARCHAR2(3 BYTE), 
	"ID_IMP_POBA_COUNTRY" NUMBER, 
	"S_POBA_ESA" VARCHAR2(25 BYTE), 
	"ID_IMP_POBA_ESA" NUMBER, 
	"S_POBA_NACE" VARCHAR2(25 BYTE), 
	"ID_IMP_POBA_NACE" NUMBER, 
	"S_POBA_LEI" VARCHAR2(250 BYTE), 
	"ID_IMP_POBA_LEI" NUMBER, 
	"S_VABA_COUNTRY" VARCHAR2(3 BYTE), 
	"ID_IMP_VABA_COUNTRY" NUMBER, 
	"S_VABA_ESA" VARCHAR2(25 BYTE), 
	"ID_IMP_VABA_ESA" NUMBER, 
	"S_VABA_NACE" VARCHAR2(25 BYTE), 
	"ID_IMP_VABA_NACE" NUMBER, 
	"S_VABA_LEI" VARCHAR2(250 BYTE), 
	"ID_IMP_VABA_LEI" NUMBER, 
	"S_JTBGE_COUNTRY" VARCHAR2(3 BYTE), 
	"ID_IMP_JTBGE_COUNTRY" NUMBER, 
	"S_JTBGE_ESA" VARCHAR2(25 BYTE), 
	"ID_IMP_JTBGE_ESA" NUMBER, 
	"S_JTBGE_NACE" VARCHAR2(25 BYTE), 
	"ID_IMP_JTBGE_NACE" NUMBER, 
	"S_JTBGE_LEI" VARCHAR2(250 BYTE), 
	"ID_IMP_JTBGE_LEI" NUMBER, 
	"C_JTBCR_DEFAULT_FLAG" CHAR(1 BYTE), 
	"ID_IMP_JTBCR_DEFAULT_FLAG" NUMBER, 
	"C_JTBSR_DEFAULT_FLAG" CHAR(1 BYTE), 
	"ID_IMP_JTBSR_DEFAULT_FLAG" NUMBER, 
	"C_POBA_DEFAULT_FLAG" CHAR(1 BYTE), 
	"ID_IMP_POBA_DEFAULT_FLAG" NUMBER, 
	"C_VABA_DEFAULT_FLAG" CHAR(1 BYTE), 
	"ID_IMP_VABA_DEFAULT_FLAG" NUMBER, 
	"C_JTBGE_DEFAULT_FLAG" CHAR(1 BYTE), 
	"ID_IMP_JTBGE_DEFAULT_FLAG" NUMBER, 
	"S_AFT_COUNTRY" VARCHAR2(3 BYTE), 
	"ID_IMP_AFT_COUNTRY" NUMBER, 
	"S_AFT_ESA" VARCHAR2(25 BYTE), 
	"ID_IMP_AFT_ESA" NUMBER, 
	"S_AFT_NACE" VARCHAR2(25 BYTE), 
	"ID_IMP_AFT_NACE" NUMBER, 
	"S_AFT_LEI" VARCHAR2(250 BYTE), 
	"ID_IMP_AFT_LEI" NUMBER, 
	"C_AFT_DEFAULT_FLAG" CHAR(1 BYTE), 
	"ID_IMP_AFT_DEFAULT_FLAG" NUMBER, 
	"S_JTBCR_SHADOW_BANK" VARCHAR2(1 BYTE), 
	"ID_IMP_JTBCR_SHADOW_BANK" NUMBER, 
	"S_JTBSR_SHADOW_BANK" VARCHAR2(1 BYTE), 
	"ID_IMP_JTBSR_SHADOW_BANK" NUMBER, 
	"S_POBA_SHADOW_BANK" VARCHAR2(1 BYTE), 
	"ID_IMP_POBA_SHADOW_BANK" NUMBER, 
	"S_VABA_SHADOW_BANK" VARCHAR2(1 BYTE), 
	"ID_IMP_VABA_SHADOW_BANK" NUMBER, 
	"S_JTBGE_SHADOW_BANK" VARCHAR2(1 BYTE), 
	"ID_IMP_JTBGE_SHADOW_BANK" NUMBER, 
	"S_AFT_SHADOW_BANK" VARCHAR2(1 BYTE), 
	"ID_IMP_AFT_SHADOW_BANK" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed IMPORT_POZICE_UA_RKC_ATRIBUTY.sql
PROMPT


-- ============================================================================
-- Deploy: IMPORT_POZICE_UA_RKC_RIZIKOVOST.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying IMPORT_POZICE_UA_RKC_RIZIKOVOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table IMPORT_POZICE_UA_RKC_RIZIKOVOST
--------------------------------------------------------

  CREATE TABLE "DB_JT"."IMPORT_POZICE_UA_RKC_RIZIKOVOST" 
   (	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"S_UCETUNIF" VARCHAR2(15 BYTE), 
	"S_UCETORIGINAL" VARCHAR2(15 BYTE), 
	"KATEGORIEKOEF" NUMBER(6,3)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed IMPORT_POZICE_UA_RKC_RIZIKOVOST.sql
PROMPT


-- ============================================================================
-- Deploy: IMPORT_POZICE_UM.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying IMPORT_POZICE_UM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table IMPORT_POZICE_UM
--------------------------------------------------------

  CREATE TABLE "DB_JT"."IMPORT_POZICE_UM" 
   (	"ID_IMP" NUMBER, 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"IMPORT_TYP" VARCHAR2(1 BYTE), 
	"IMP_PLATNOST_DAT" DATE, 
	"IMP_DATUM_IMPORTU" DATE, 
	"ID_USER" NUMBER, 
	"S_USER" VARCHAR2(256 BYTE), 
	"S_POPIS" VARCHAR2(256 BYTE), 
	"C_STATUS" NUMBER, 
	"S_SOUBOR_CESTA" VARCHAR2(256 BYTE), 
	"IMP_DT_END" DATE, 
	"IMP_DATUM_PRENOSU" DATE, 
	"PRENESENO_ZAZNAMU" NUMBER, 
	"ID_LOAD_AX" NUMBER, 
	"ND_POCET_ZAZNAMU_PLATNYCH" NUMBER(38,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."IMPORT_POZICE_UM"."ID_LOAD_AX" IS 'ID importu z APEX';


PROMPT Completed IMPORT_POZICE_UM.sql
PROMPT


-- ============================================================================
-- Deploy: IMPORT_POZICE_UM_CIS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying IMPORT_POZICE_UM_CIS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table IMPORT_POZICE_UM_CIS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."IMPORT_POZICE_UM_CIS" 
   (	"S_KOD" VARCHAR2(20 BYTE), 
	"ID_SPOLECNOST" NUMBER, 
	"S_UNIF_ZKRATKA" VARCHAR2(10 BYTE), 
	"ID_SPOLECNOST_IMPORT" NUMBER, 
	"S_POZNAMKA" VARCHAR2(250 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed IMPORT_POZICE_UM_CIS.sql
PROMPT


-- ============================================================================
-- Deploy: IMPORT_POZICE_UM_DATA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying IMPORT_POZICE_UM_DATA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table IMPORT_POZICE_UM_DATA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."IMPORT_POZICE_UM_DATA" 
   (	"ID_PK" NUMBER DEFAULT "DB_JT"."SQ_IMP_POZICE_UM_DATA"."NEXTVAL", 
	"ID" NUMBER(*,0), 
	"ID_DOKLAD" NUMBER(*,0), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UCET" VARCHAR2(25 BYTE), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"ID_CISRADEKTEXT" NUMBER(*,0), 
	"C_MENOVAPOZICE" CHAR(1 BYTE), 
	"C_UVEROVAPOZICE" CHAR(1 BYTE), 
	"ND_CASTKAMENA" NUMBER(18,2), 
	"ND_CASTKALOCAL" NUMBER(18,2), 
	"ND_CASTKACNB" NUMBER(18,2), 
	"C_LIST" CHAR(1 BYTE), 
	"S_EVIDOVATPROTISTRANU" VARCHAR2(4 BYTE), 
	"C_KONTOKORENT" CHAR(1 BYTE), 
	"ID_DOKLADPOLOZKA" NUMBER(*,0), 
	"S_UCETUNIF" VARCHAR2(10 BYTE), 
	"S_UCETORIGINAL" VARCHAR2(10 BYTE), 
	"ID_CISUCETUNIF" NUMBER(*,0), 
	"ID_MANUALTEXT" NUMBER(*,0), 
	"KATEGORIEKOEF" NUMBER(6,3), 
	"CUST_GROUP_CODE" VARCHAR2(5 BYTE), 
	"C_BANKA" CHAR(1 BYTE), 
	"ND_CISTAANGAZOVANOST" NUMBER(18,2), 
	"S_KTGUCETNISPOL_NAZEV" VARCHAR2(256 BYTE), 
	"S_TEXT" VARCHAR2(256 BYTE), 
	"S_MENA_LOKAL" VARCHAR2(3 BYTE), 
	"S_ICO" VARCHAR2(20 BYTE), 
	"S_KTGSPOLECNOST_NAZEV" VARCHAR2(256 BYTE), 
	"S_KOD_DEFINICE_PROTISTRANY" VARCHAR2(10 BYTE), 
	"ND_PROCENTO" NUMBER, 
	"ID_IMPORT" NUMBER, 
	"S_TYP_OBEZRETNOST_PORTFOLIA" VARCHAR2(3 BYTE), 
	"ND_EXPOZICE" NUMBER(18,2), 
	"ND_POCETNOST" NUMBER, 
	"S_COUNTRY" VARCHAR2(3 BYTE), 
	"S_ESA" VARCHAR2(25 CHAR), 
	"S_NACE" VARCHAR2(25 CHAR), 
	"S_LEI" VARCHAR2(250 CHAR), 
	"S_SHADOW_BANK" VARCHAR2(1 BYTE), 
	"S_TYPE_OF_EXPOSURE" VARCHAR2(10 BYTE), 
	"S_COLL_REG_CODE" VARCHAR2(50 BYTE), 
	"C_DEFAULT_FLAG" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed IMPORT_POZICE_UM_DATA.sql
PROMPT


-- ============================================================================
-- Deploy: IMPORT_POZICE_UM_DATA_RELOAD.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying IMPORT_POZICE_UM_DATA_RELOAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table IMPORT_POZICE_UM_DATA_RELOAD
--------------------------------------------------------

  CREATE TABLE "DB_JT"."IMPORT_POZICE_UM_DATA_RELOAD" 
   (	"ID_PK" NUMBER, 
	"ID" NUMBER(*,0), 
	"ID_DOKLAD" NUMBER(*,0), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UCET" VARCHAR2(25 BYTE), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"ID_CISRADEKTEXT" NUMBER(*,0), 
	"C_MENOVAPOZICE" CHAR(1 BYTE), 
	"C_UVEROVAPOZICE" CHAR(1 BYTE), 
	"ND_CASTKAMENA" NUMBER(18,2), 
	"ND_CASTKALOCAL" NUMBER(18,2), 
	"ND_CASTKACNB" NUMBER(18,2), 
	"C_LIST" CHAR(1 BYTE), 
	"S_EVIDOVATPROTISTRANU" VARCHAR2(4 BYTE), 
	"C_KONTOKORENT" CHAR(1 BYTE), 
	"ID_DOKLADPOLOZKA" NUMBER(*,0), 
	"S_UCETUNIF" VARCHAR2(10 BYTE), 
	"S_UCETORIGINAL" VARCHAR2(10 BYTE), 
	"ID_CISUCETUNIF" NUMBER(*,0), 
	"ID_MANUALTEXT" NUMBER(*,0), 
	"KATEGORIEKOEF" NUMBER(6,3), 
	"CUST_GROUP_CODE" VARCHAR2(5 BYTE), 
	"C_BANKA" CHAR(1 BYTE), 
	"ND_CISTAANGAZOVANOST" NUMBER(18,2), 
	"S_KTGUCETNISPOL_NAZEV" VARCHAR2(256 BYTE), 
	"S_TEXT" VARCHAR2(256 BYTE), 
	"S_MENA_LOKAL" VARCHAR2(3 BYTE), 
	"S_ICO" VARCHAR2(20 BYTE), 
	"S_KTGSPOLECNOST_NAZEV" VARCHAR2(256 BYTE), 
	"S_KOD_DEFINICE_PROTISTRANY" VARCHAR2(10 BYTE), 
	"ND_PROCENTO" NUMBER, 
	"ID_IMPORT" NUMBER, 
	"S_TYP_OBEZRETNOST_PORTFOLIA" VARCHAR2(3 BYTE), 
	"ND_EXPOZICE" NUMBER(18,2), 
	"ND_POCETNOST" NUMBER, 
	"S_COUNTRY" VARCHAR2(3 BYTE), 
	"S_ESA" VARCHAR2(25 CHAR), 
	"S_NACE" VARCHAR2(25 CHAR), 
	"S_LEI" VARCHAR2(250 CHAR), 
	"S_SHADOW_BANK" VARCHAR2(1 BYTE), 
	"S_TYPE_OF_EXPOSURE" VARCHAR2(10 BYTE), 
	"S_COLL_REG_CODE" VARCHAR2(50 BYTE), 
	"C_DEFAULT_FLAG" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed IMPORT_POZICE_UM_DATA_RELOAD.sql
PROMPT


-- ============================================================================
-- Deploy: IMP_USERS_KIS_INTRANET.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying IMP_USERS_KIS_INTRANET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table IMP_USERS_KIS_INTRANET
--------------------------------------------------------

  CREATE TABLE "DB_JT"."IMP_USERS_KIS_INTRANET" 
   (	"USERID" VARCHAR2(20 BYTE), 
	"KIS_JMENO" VARCHAR2(256 BYTE), 
	"INTRANET_JMENO" VARCHAR2(256 BYTE), 
	"INTRANET_SPOLECNOST" VARCHAR2(500 BYTE), 
	"INTRANET_STAV" VARCHAR2(30 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed IMP_USERS_KIS_INTRANET.sql
PROMPT


-- ============================================================================
-- Deploy: JAVA_OPTIONS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying JAVA_OPTIONS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table JAVA$OPTIONS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."JAVA$OPTIONS" 
   (	"WHAT" VARCHAR2(128 BYTE), 
	"OPT" VARCHAR2(20 BYTE), 
	"VALUE" VARCHAR2(128 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed JAVA_OPTIONS.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ACC_PPF.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_ACC_PPF.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_ACC_PPF
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_ACC_PPF" 
   (	"ID" NUMBER, 
	"S_ACC_ID" VARCHAR2(20 BYTE), 
	"S_ACC_INFO" VARCHAR2(200 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON TABLE "DB_JT"."KP_CIS_ACC_PPF"  IS 'cislenik uctu od PPF pro mapping JT -> PPF uctu';


PROMPT Completed KP_CIS_ACC_PPF.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ACC_PPF_BCK1.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_ACC_PPF_BCK1.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_ACC_PPF_BCK1
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_ACC_PPF_BCK1" 
   (	"ID" NUMBER, 
	"S_ACC_ID" VARCHAR2(20 BYTE), 
	"S_ACC_INFO" VARCHAR2(200 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_ACC_PPF_BCK1.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_BANKAR.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_BANKAR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_BANKAR
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_BANKAR" 
   (	"ID" NUMBER, 
	"S_KOD" VARCHAR2(20 BYTE), 
	"S_POPIS" VARCHAR2(40 BYTE), 
	"ID_ODBOR" NUMBER, 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."KP_CIS_BANKAR"."S_KOD" IS 'kod bankara';
   COMMENT ON COLUMN "DB_JT"."KP_CIS_BANKAR"."S_POPIS" IS 'popis /meno / poznamka k polozke(osobe)';
   COMMENT ON COLUMN "DB_JT"."KP_CIS_BANKAR"."ID_ODBOR" IS 'ID odboru podla KP_KTG_ODBOR.ID';
   COMMENT ON COLUMN "DB_JT"."KP_CIS_BANKAR"."DT_PLATNOSTOD" IS 'Datum ODkedy je mozne na bankara pridelovat riadky v SL';
   COMMENT ON COLUMN "DB_JT"."KP_CIS_BANKAR"."DT_PLATNOSTDO" IS 'Datum DOkedy je mozne na bankara pridelovat riadky v SL, neomedzene = null';


PROMPT Completed KP_CIS_BANKAR.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_BUSINESSLINIE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_BUSINESSLINIE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_BUSINESSLINIE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_BUSINESSLINIE" 
   (	"ID" NUMBER(*,0), 
	"S_KOD" VARCHAR2(5 BYTE), 
	"S_POPIS" VARCHAR2(50 BYTE), 
	"ND_BETA" NUMBER(5,2)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_BUSINESSLINIE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_CPINDEX.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_CPINDEX.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_CPINDEX
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_CPINDEX" 
   (	"ID" NUMBER, 
	"S_EXTID" VARCHAR2(15 BYTE), 
	"S_NAZEV" VARCHAR2(50 BYTE), 
	"ID_CISSTAT" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_CPINDEX.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_CUSTOMER_GROUP.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_CUSTOMER_GROUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_CUSTOMER_GROUP
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_CUSTOMER_GROUP" 
   (	"CUST_GROUP_NAME" VARCHAR2(35 BYTE), 
	"CUST_GROUP_CODE" VARCHAR2(5 BYTE), 
	"CUST_STRUC_NAME" VARCHAR2(35 BYTE), 
	"CUST_STRUC_CODE" VARCHAR2(3 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_CUSTOMER_GROUP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_CUSTOMER_GROUP200327U.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_CUSTOMER_GROUP200327U.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_CUSTOMER_GROUP200327U
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_CUSTOMER_GROUP200327U" 
   (	"CUST_GROUP_NAME" VARCHAR2(35 BYTE), 
	"CUST_GROUP_CODE" VARCHAR2(5 BYTE), 
	"CUST_STRUC_NAME" VARCHAR2(35 BYTE), 
	"CUST_STRUC_CODE" VARCHAR2(3 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_CUSTOMER_GROUP200327U.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_CUSTOMER_GROUP_BCK_AX.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_CUSTOMER_GROUP_BCK_AX.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_CUSTOMER_GROUP_BCK_AX
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_CUSTOMER_GROUP_BCK_AX" 
   (	"CUST_GROUP_NAME" VARCHAR2(35 BYTE), 
	"CUST_GROUP_CODE" VARCHAR2(5 BYTE), 
	"CUST_STRUC_NAME" VARCHAR2(35 BYTE), 
	"CUST_STRUC_CODE" VARCHAR2(3 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_CUSTOMER_GROUP_BCK_AX.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_CUSTOMER_GROUP_QCZ.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_CUSTOMER_GROUP_QCZ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_CUSTOMER_GROUP_QCZ
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_CUSTOMER_GROUP_QCZ" 
   (	"CUST_GROUP_NAME" VARCHAR2(35 BYTE), 
	"CUST_GROUP_CODE" VARCHAR2(5 BYTE), 
	"CUST_STRUC_NAME" VARCHAR2(35 BYTE), 
	"CUST_STRUC_CODE" VARCHAR2(3 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_CUSTOMER_GROUP_QCZ.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_CUSTOMER_GROUP_QDL_1909.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_CUSTOMER_GROUP_QDL_1909.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_CUSTOMER_GROUP_QDL_1909
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_CUSTOMER_GROUP_QDL_1909" 
   (	"CUST_GROUP_NAME" VARCHAR2(35 BYTE), 
	"CUST_GROUP_CODE" VARCHAR2(5 BYTE), 
	"CUST_STRUC_NAME" VARCHAR2(35 BYTE), 
	"CUST_STRUC_CODE" VARCHAR2(3 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_CUSTOMER_GROUP_QDL_1909.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_DATABAZE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_DATABAZE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_DATABAZE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_DATABAZE" 
   (	"ID" NUMBER(*,0), 
	"S_DBLINK" VARCHAR2(30 BYTE), 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"S_PROQUESTOR" VARCHAR2(30 BYTE), 
	"S_INSTANCE" VARCHAR2(8 BYTE), 
	"C_PBTYP" CHAR(1 BYTE), 
	"C_AKTIVNI" CHAR(1 BYTE) DEFAULT 1, 
	"C_DWH_LOAD" CHAR(1 BYTE), 
	"SEPID_STALKER" NUMBER(38,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."KP_CIS_DATABAZE"."C_DWH_LOAD" IS 'Priznak DB pre ktoru je potrebne aktualizovat protistrany.';


PROMPT Completed KP_CIS_DATABAZE.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TABLES/KP_CIS_DOKLAD.sql: 'utf-8' codec can't decode byte 0x9a in position 1603: invalid start byte


-- ============================================================================
-- Deploy: KP_CIS_DOKUMENT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_DOKUMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_DOKUMENT
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_DOKUMENT" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(30 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_DOKUMENT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_DOKUMENTSPOLTYP.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_DOKUMENTSPOLTYP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_DOKUMENTSPOLTYP
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_DOKUMENTSPOLTYP" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_DOKUMENTSPOLTYP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_DOKUMENTSTATUS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_DOKUMENTSTATUS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_DOKUMENTSTATUS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_DOKUMENTSTATUS" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_DOKUMENTSTATUS.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_DOKUMENTUHRADA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_DOKUMENTUHRADA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_DOKUMENTUHRADA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_DOKUMENTUHRADA" 
   (	"ID" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(30 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_DOKUMENTUHRADA.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TABLES/KP_CIS_EMAILZPRAVY.sql: 'utf-8' codec can't decode byte 0xe8 in position 625: invalid continuation byte


-- ============================================================================
-- Deploy: KP_CIS_EMAILZPRAVY_BCK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_EMAILZPRAVY_BCK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_EMAILZPRAVY_BCK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_EMAILZPRAVY_BCK" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(100 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_EMAILZPRAVY_BCK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_EVIDOIDENTIFIKACE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_EVIDOIDENTIFIKACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_EVIDOIDENTIFIKACE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_EVIDOIDENTIFIKACE" 
   (	"ID" NUMBER(*,0), 
	"S_NAZEV" VARCHAR2(30 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_EVIDOIDENTIFIKACE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_EVIDOVANEINFORMACE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_EVIDOVANEINFORMACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_EVIDOVANEINFORMACE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_EVIDOVANEINFORMACE" 
   (	"ID" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(30 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_EVIDOVANEINFORMACE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_EVIOBCHODNIREJSTRIK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_EVIOBCHODNIREJSTRIK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_EVIOBCHODNIREJSTRIK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_EVIOBCHODNIREJSTRIK" 
   (	"ID" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_EVIOBCHODNIREJSTRIK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_EVISTATUS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_EVISTATUS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_EVISTATUS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_EVISTATUS" 
   (	"ID" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(30 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_EVISTATUS.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_EVITYPSTATZASTUPCE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_EVITYPSTATZASTUPCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_EVITYPSTATZASTUPCE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_EVITYPSTATZASTUPCE" 
   (	"ID" NUMBER(*,0), 
	"S_NAZEV" VARCHAR2(30 BYTE), 
	"C_SPOJOVATVAZBY" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_EVITYPSTATZASTUPCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_EXTERNIRATING.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_EXTERNIRATING.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_EXTERNIRATING
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_EXTERNIRATING" 
   (	"ID" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(10 BYTE), 
	"KATEGORIEKOEF" NUMBER(6,3)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_EXTERNIRATING.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_FEIS_PRENOS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_FEIS_PRENOS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_FEIS_PRENOS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_FEIS_PRENOS" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(60 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."KP_CIS_FEIS_PRENOS"."S_POPIS" IS 'prenos SL do FEIS 0/null-zadny, 1-automaticky, 2-manualni/ucetni';


PROMPT Completed KP_CIS_FEIS_PRENOS.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_FLOW.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_FLOW.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_FLOW
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_FLOW" 
   (	"ID" NUMBER(*,0), 
	"S_KOD" VARCHAR2(5 BYTE), 
	"S_POPIS" VARCHAR2(100 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_FLOW.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_FORMULAR.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_FORMULAR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_FORMULAR
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_FORMULAR" 
   (	"ID" NUMBER(*,0), 
	"S_ZKRATKA" VARCHAR2(10 BYTE), 
	"S_POPIS" VARCHAR2(64 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_FORMULAR.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_FREKVENCEDPH.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_FREKVENCEDPH.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_FREKVENCEDPH
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_FREKVENCEDPH" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_FREKVENCEDPH.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_IFRSSEGMENT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_IFRSSEGMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_IFRSSEGMENT
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_IFRSSEGMENT" 
   (	"ID" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_IFRSSEGMENT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_IFRSSUBSEGMENT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_IFRSSUBSEGMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_IFRSSUBSEGMENT
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_IFRSSUBSEGMENT" 
   (	"ID" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(50 BYTE), 
	"ID_IFRSSEGMENT" NUMBER(*,0), 
	"ID_KTGSUBKONSOLIDACE" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_IFRSSUBSEGMENT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_IFRSTYPPRAVIDLO.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_IFRSTYPPRAVIDLO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_IFRSTYPPRAVIDLO
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_IFRSTYPPRAVIDLO" 
   (	"ID" NUMBER(*,0), 
	"S_ZKRATKA" VARCHAR2(20 BYTE), 
	"B_CHECK" CHAR(1 BYTE), 
	"S_POPIS" VARCHAR2(512 BYTE), 
	"C_TYP" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_IFRSTYPPRAVIDLO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_IFRSTYPPRAVIDLODETAIL.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_IFRSTYPPRAVIDLODETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_IFRSTYPPRAVIDLODETAIL
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_IFRSTYPPRAVIDLODETAIL" 
   (	"ID" NUMBER(*,0), 
	"S_ZKRATKA" VARCHAR2(30 BYTE), 
	"S_POPIS" VARCHAR2(512 BYTE), 
	"C_TYP" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_IFRSTYPPRAVIDLODETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_INDUSTRYTYPE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_INDUSTRYTYPE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_INDUSTRYTYPE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_INDUSTRYTYPE" 
   (	"S_CODE" VARCHAR2(4 BYTE), 
	"S_NAME" VARCHAR2(35 BYTE), 
	"C_INVESTICE" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_INDUSTRYTYPE.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TABLES/KP_CIS_ISIT_APLIKACE.sql: 'utf-8' codec can't decode byte 0x96 in position 732: invalid start byte


-- ============================================================================
-- Deploy: KP_CIS_ISIT_BUDGET.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_ISIT_BUDGET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_ISIT_BUDGET
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_ISIT_BUDGET" 
   (	"ID" NUMBER, 
	"S_KOD" VARCHAR2(20 BYTE), 
	"S_POPIS" VARCHAR2(2000 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"ID_KTG_ODBOR" NUMBER, 
	"ID_TYP_POLOZKY" NUMBER, 
	"ID_KTG_PROJEKT" NUMBER, 
	"ID_KTG_UCETNISPOL" NUMBER, 
	"ID_DRUH_TRANSAKCE" VARCHAR2(1 BYTE), 
	"ID_ISIT_APLIKACE" NUMBER, 
	"ID_ISIT_DRUH_NAKLADU" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."KP_CIS_ISIT_BUDGET"."ID" IS 'umelo vytvoreny PK';
   COMMENT ON COLUMN "DB_JT"."KP_CIS_ISIT_BUDGET"."S_KOD" IS 'id/kod ISIT_BUDGET od zadavatela';
   COMMENT ON COLUMN "DB_JT"."KP_CIS_ISIT_BUDGET"."S_POPIS" IS 'popis / poznamka k polozke';
   COMMENT ON COLUMN "DB_JT"."KP_CIS_ISIT_BUDGET"."DT_PLATNOSTOD" IS 'Datum ODkedy je mozne id ISIT_BUDGETa pridelovat - na zaciatku nepouzite';
   COMMENT ON COLUMN "DB_JT"."KP_CIS_ISIT_BUDGET"."DT_PLATNOSTDO" IS 'Datum DOkedy je mozne id ISIT_BUDGETa pridelovat - na zaciatku nepouzite';
   COMMENT ON COLUMN "DB_JT"."KP_CIS_ISIT_BUDGET"."ID_KTG_ODBOR" IS 'Oddeleni , ID ODBORU';
   COMMENT ON COLUMN "DB_JT"."KP_CIS_ISIT_BUDGET"."ID_TYP_POLOZKY" IS 'typ polozky podle ISIT_TYP_POLOZKY : SLA,SW,HW,licence...';
   COMMENT ON COLUMN "DB_JT"."KP_CIS_ISIT_BUDGET"."ID_KTG_PROJEKT" IS 'ID projektu';
   COMMENT ON COLUMN "DB_JT"."KP_CIS_ISIT_BUDGET"."ID_KTG_UCETNISPOL" IS 'ucetni spolenost';
   COMMENT ON COLUMN "DB_JT"."KP_CIS_ISIT_BUDGET"."ID_DRUH_TRANSAKCE" IS 'Typ nakladu CapexOpex';
   COMMENT ON COLUMN "DB_JT"."KP_CIS_ISIT_BUDGET"."ID_ISIT_APLIKACE" IS 'APLIKACE podle CIS_ISIT_APLIKACE';
   COMMENT ON COLUMN "DB_JT"."KP_CIS_ISIT_BUDGET"."ID_ISIT_DRUH_NAKLADU" IS 'druh Nakladu podle CIS_ISIT_DRUH_NAKLADU';


PROMPT Completed KP_CIS_ISIT_BUDGET.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ISIT_BUDGET_DWH.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_ISIT_BUDGET_DWH.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_ISIT_BUDGET_DWH
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_ISIT_BUDGET_DWH" 
   (	"ID" NUMBER, 
	"S_KOD" VARCHAR2(20 BYTE), 
	"S_POPIS" VARCHAR2(2000 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"ID_KTG_ODBOR" NUMBER, 
	"ID_TYP_POLOZKY" NUMBER, 
	"ID_KTG_PROJEKT" NUMBER, 
	"ID_KTG_UCETNISPOL" NUMBER, 
	"ID_DRUH_TRANSAKCE" VARCHAR2(1 BYTE), 
	"ID_ISIT_APLIKACE" NUMBER, 
	"ID_ISIT_DRUH_NAKLADU" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_ISIT_BUDGET_DWH.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ISIT_BUDGET_IMP_01_2019.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_ISIT_BUDGET_IMP_01_2019.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_ISIT_BUDGET_IMP_01_2019
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_ISIT_BUDGET_IMP_01_2019" 
   (	"S_KOD" VARCHAR2(20 BYTE), 
	"OC_DRUH_TRANSAKCE" VARCHAR2(10 BYTE), 
	"ID_DRUH_TRANSAKCE" VARCHAR2(1 BYTE), 
	"ID_TYP_POLOZKY" NUMBER, 
	"ID_KTG_ODBOR" NUMBER, 
	"ID_KTG_UCETNISPOL" NUMBER, 
	"ID_KTG_PROJEKT" NUMBER, 
	"S_POPIS" VARCHAR2(2000 BYTE), 
	"TOTAL" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_ISIT_BUDGET_IMP_01_2019.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ISIT_BUDGET_IMP_02_2017.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_ISIT_BUDGET_IMP_02_2017.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_ISIT_BUDGET_IMP_02_2017
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_ISIT_BUDGET_IMP_02_2017" 
   (	"S_KOD" VARCHAR2(20 BYTE), 
	"S_POPIS" VARCHAR2(2000 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"ID_KTG_ODBOR" NUMBER, 
	"ID_TYP_POLOZKY" NUMBER, 
	"ID_KTG_PROJEKT" NUMBER, 
	"ID_KTG_UCETNISPOL" NUMBER, 
	"ID_DRUH_TRANSAKCE" VARCHAR2(1 BYTE), 
	"ID_ISIT_APLIKACE" NUMBER, 
	"ID_ISIT_DRUH_NAKLADU" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_ISIT_BUDGET_IMP_02_2017.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ISIT_BUDGET_IMP_02_2018.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_ISIT_BUDGET_IMP_02_2018.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_ISIT_BUDGET_IMP_02_2018
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_ISIT_BUDGET_IMP_02_2018" 
   (	"S_KOD" VARCHAR2(20 BYTE), 
	"OC_DRUH_TRANSAKCE" VARCHAR2(10 BYTE), 
	"ID_DRUH_TRANSAKCE" VARCHAR2(1 BYTE), 
	"ID_TYP_POLOZKY" NUMBER, 
	"ID_KTG_ODBOR" NUMBER, 
	"ID_KTG_UCETNISPOL" NUMBER, 
	"ID_KTG_PROJEKT" NUMBER, 
	"S_POPIS" VARCHAR2(2000 BYTE), 
	"TOTAL" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_ISIT_BUDGET_IMP_02_2018.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ISIT_BUDGET_MRO.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_ISIT_BUDGET_MRO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_ISIT_BUDGET_MRO
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_ISIT_BUDGET_MRO" 
   (	"ID" NUMBER, 
	"S_KOD" VARCHAR2(20 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"ID_KTG_ODBOR" VARCHAR2(4000 BYTE), 
	"ID_TYP_POLOZKY" VARCHAR2(4000 BYTE), 
	"ID_KTG_PROJEKT" VARCHAR2(4000 BYTE), 
	"ID_KTG_UCETNISPOL" VARCHAR2(4000 BYTE), 
	"ID_DRUH_TRANSAKCE" VARCHAR2(4000 BYTE), 
	"ID_ISIT_APLIKACE" VARCHAR2(4000 BYTE), 
	"ID_ISIT_DRUH_NAKLADU" VARCHAR2(4000 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_ISIT_BUDGET_MRO.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TABLES/KP_CIS_ISIT_DRUH_NAKLADU.sql: 'utf-8' codec can't decode byte 0x96 in position 731: invalid start byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TABLES/KP_CIS_ISIT_TYP_POLOZKY.sql: 'utf-8' codec can't decode byte 0x9e in position 723: invalid start byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TABLES/KP_CIS_ISIT_TYP_SW.sql: 'utf-8' codec can't decode byte 0x96 in position 707: invalid start byte


-- ============================================================================
-- Deploy: KP_CIS_KATEGORIEPROTISTRAN.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_KATEGORIEPROTISTRAN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_KATEGORIEPROTISTRAN
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_KATEGORIEPROTISTRAN" 
   (	"ID" NUMBER, 
	"ID_SPOLECNOST" NUMBER, 
	"S_EXTID" VARCHAR2(3 BYTE), 
	"S_NAZEV" VARCHAR2(50 BYTE), 
	"C_LICENCE" CHAR(1 BYTE), 
	"C_SPOLECNERIZENY" CHAR(1 BYTE), 
	"C_LIKVIDA" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_KATEGORIEPROTISTRAN.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_KATSPOL.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_KATSPOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_KATSPOL
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_KATSPOL" 
   (	"ID" NUMBER, 
	"S_ZKRATKA" VARCHAR2(20 BYTE), 
	"S_POPIS" VARCHAR2(512 BYTE), 
	"C_VYRADIT" CHAR(1 BYTE) DEFAULT '0'
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_KATSPOL.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TABLES/KP_CIS_LIST.sql: 'utf-8' codec can't decode byte 0xe1 in position 709: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TABLES/KP_CIS_LOG_DWH.sql: 'utf-8' codec can't decode byte 0xf3 in position 612: invalid continuation byte


-- ============================================================================
-- Deploy: KP_CIS_MAJETKOVAUCASTTYPTRAN.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_MAJETKOVAUCASTTYPTRAN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_MAJETKOVAUCASTTYPTRAN
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_MAJETKOVAUCASTTYPTRAN" 
   (	"ID" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(32 BYTE), 
	"C_SUMAZAPOCITAVAT" CHAR(1 BYTE) DEFAULT '0'
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_MAJETKOVAUCASTTYPTRAN.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_MAJETKOVAUCASTZPUSOB.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_MAJETKOVAUCASTZPUSOB.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_MAJETKOVAUCASTZPUSOB
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_MAJETKOVAUCASTZPUSOB" 
   (	"ID" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(64 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_MAJETKOVAUCASTZPUSOB.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_MENA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_MENA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_MENA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_MENA" 
   (	"ID" VARCHAR2(3 BYTE), 
	"S_POPIS" VARCHAR2(64 BYTE), 
	"DT_LASTKURZ" DATE, 
	"DT_LASTKURZAVG" DATE, 
	"DT_NBS_LASTKURZ" DATE, 
	"DT_NBS_LASTKURZAVG" DATE, 
	"CCP_ZDROJ" VARCHAR2(30 BYTE), 
	"CCP_ZPUSOB_VYPOCTU" VARCHAR2(30 BYTE), 
	"CCP_NBS_ZDROJ" VARCHAR2(30 BYTE), 
	"CCP_NBS_ZPUSOB_VYPOCTU" VARCHAR2(30 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_MENA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_MISUCTYMDD.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_MISUCTYMDD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_MISUCTYMDD
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_MISUCTYMDD" 
   (	"ID" NUMBER, 
	"S_UCET" VARCHAR2(21 BYTE), 
	"S_POPIS" VARCHAR2(50 BYTE), 
	"ID_TYPTRANSAKCE" NUMBER(*,0), 
	"ID_CISSUBJECT" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_MISUCTYMDD.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_MNGSEGMENT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_MNGSEGMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_MNGSEGMENT
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_MNGSEGMENT" 
   (	"ID" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(50 BYTE), 
	"ID_KTGSUBKONSOLIDACE" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_MNGSEGMENT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_MNGSEGMENT_BCK_SEG.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_MNGSEGMENT_BCK_SEG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_MNGSEGMENT_BCK_SEG
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_MNGSEGMENT_BCK_SEG" 
   (	"ID" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(50 BYTE), 
	"ID_KTGSUBKONSOLIDACE" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_MNGSEGMENT_BCK_SEG.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_NOMINEE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_NOMINEE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_NOMINEE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_NOMINEE" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_NOMINEE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ODBOR_SKUPINA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_ODBOR_SKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_ODBOR_SKUPINA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_ODBOR_SKUPINA" 
   (	"ID" NUMBER, 
	"S_KOD" VARCHAR2(20 BYTE), 
	"S_POPIS" VARCHAR2(50 BYTE), 
	"ID_USER" NUMBER
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_ODBOR_SKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ODBOR_ZARADENIE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_ODBOR_ZARADENIE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_ODBOR_ZARADENIE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_ODBOR_ZARADENIE" 
   (	"ID" NUMBER, 
	"S_KOD" VARCHAR2(20 BYTE), 
	"S_POPIS" VARCHAR2(50 BYTE), 
	"ID_USER" NUMBER
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_ODBOR_ZARADENIE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_OPCE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_OPCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_OPCE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_OPCE" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_OPCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_PBKATEGORIEKLIENTA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_PBKATEGORIEKLIENTA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_PBKATEGORIEKLIENTA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_PBKATEGORIEKLIENTA" 
   (	"ID" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(30 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_PBKATEGORIEKLIENTA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_PBSTATUSKLIENTA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_PBSTATUSKLIENTA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_PBSTATUSKLIENTA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_PBSTATUSKLIENTA" 
   (	"ID" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(30 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_PBSTATUSKLIENTA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_PRENOSKATEGORIE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_PRENOSKATEGORIE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_PRENOSKATEGORIE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_PRENOSKATEGORIE" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_PRENOSKATEGORIE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_PRENOSPRIORITA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_PRENOSPRIORITA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_PRENOSPRIORITA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_PRENOSPRIORITA" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(10 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_PRENOSPRIORITA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_PROJEKTCASHFLOWTYP.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_PROJEKTCASHFLOWTYP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_PROJEKTCASHFLOWTYP
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_PROJEKTCASHFLOWTYP" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_PROJEKTCASHFLOWTYP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_PROJEKTFREKVENCE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_PROJEKTFREKVENCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_PROJEKTFREKVENCE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_PROJEKTFREKVENCE" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(64 BYTE), 
	"NL_FREKVENCE" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_PROJEKTFREKVENCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_PROJEKTINOUTTYP.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_PROJEKTINOUTTYP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_PROJEKTINOUTTYP
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_PROJEKTINOUTTYP" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(30 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_PROJEKTINOUTTYP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_PROJEKTKATEGORIE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_PROJEKTKATEGORIE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_PROJEKTKATEGORIE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_PROJEKTKATEGORIE" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(64 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 0 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_PROJEKTKATEGORIE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_PROJEKTSTATUS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_PROJEKTSTATUS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_PROJEKTSTATUS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_PROJEKTSTATUS" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(64 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_PROJEKTSTATUS.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_PROJEKTUVER.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_PROJEKTUVER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_PROJEKTUVER
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_PROJEKTUVER" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(64 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_PROJEKTUVER.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_PROJEKT_SKUPINA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_PROJEKT_SKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_PROJEKT_SKUPINA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_PROJEKT_SKUPINA" 
   (	"ID" NUMBER, 
	"S_KOD" VARCHAR2(20 BYTE), 
	"S_POPIS" VARCHAR2(50 BYTE), 
	"ID_USER" NUMBER
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_PROJEKT_SKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_PROJEKT_TYPY_TRAN.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_PROJEKT_TYPY_TRAN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_PROJEKT_TYPY_TRAN
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_PROJEKT_TYPY_TRAN" 
   (	"ID" NUMBER, 
	"S_KOD" VARCHAR2(20 BYTE), 
	"S_POPIS" VARCHAR2(50 BYTE), 
	"ID_USER" NUMBER
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_PROJEKT_TYPY_TRAN.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_RADEKTEXT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_RADEKTEXT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_RADEKTEXT
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_RADEKTEXT" 
   (	"ID" NUMBER(*,0), 
	"C_TYP" CHAR(1 BYTE) DEFAULT ( 'N' ), 
	"S_POPIS" VARCHAR2(256 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_RADEKTEXT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_RADEKTEXTLANG.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_RADEKTEXTLANG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_RADEKTEXTLANG
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_RADEKTEXTLANG" 
   (	"ID" NUMBER(*,0), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"S_POPIS" VARCHAR2(256 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_RADEKTEXTLANG.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_SEGMENTZASTUPTYP.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_SEGMENTZASTUPTYP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_SEGMENTZASTUPTYP
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_SEGMENTZASTUPTYP" 
   (	"ID" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_SEGMENTZASTUPTYP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_SPOLECNOSTKATEGORIE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_SPOLECNOSTKATEGORIE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_SPOLECNOSTKATEGORIE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_SPOLECNOSTKATEGORIE" 
   (	"ID" NUMBER(*,0), 
	"S_ZKRATKA" VARCHAR2(10 BYTE), 
	"S_POPIS" VARCHAR2(64 BYTE), 
	"S_LOCALE" VARCHAR2(6 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_SPOLECNOSTKATEGORIE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_SPOLECNOSTPRAVO.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_SPOLECNOSTPRAVO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_SPOLECNOSTPRAVO
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_SPOLECNOSTPRAVO" 
   (	"ID" NUMBER(*,0), 
	"S_ZKRATKA" VARCHAR2(30 BYTE), 
	"S_POPIS" VARCHAR2(512 BYTE), 
	"NL_SLOUPEC" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_SPOLECNOSTPRAVO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_SPOL_SKUPINA0.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_SPOL_SKUPINA0.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_SPOL_SKUPINA0
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_SPOL_SKUPINA0" 
   (	"ID" NUMBER, 
	"S_KOD" VARCHAR2(20 BYTE), 
	"S_POPIS" VARCHAR2(50 BYTE), 
	"ID_USER" NUMBER
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_SPOL_SKUPINA0.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_SPOL_SKUPINA1.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_SPOL_SKUPINA1.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_SPOL_SKUPINA1
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_SPOL_SKUPINA1" 
   (	"ID" NUMBER, 
	"S_KOD" VARCHAR2(20 BYTE), 
	"S_POPIS" VARCHAR2(50 BYTE), 
	"ID_USER" NUMBER
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_SPOL_SKUPINA1.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_SPOL_SKUPINA2.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_SPOL_SKUPINA2.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_SPOL_SKUPINA2
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_SPOL_SKUPINA2" 
   (	"ID" NUMBER, 
	"S_KOD" VARCHAR2(20 BYTE), 
	"S_POPIS" VARCHAR2(50 BYTE), 
	"ID_USER" NUMBER
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_SPOL_SKUPINA2.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_SPOL_SKUPINA3.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_SPOL_SKUPINA3.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_SPOL_SKUPINA3
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_SPOL_SKUPINA3" 
   (	"ID" NUMBER, 
	"S_KOD" VARCHAR2(20 BYTE), 
	"S_POPIS" VARCHAR2(50 BYTE), 
	"ID_USER" NUMBER
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_SPOL_SKUPINA3.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_STAT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_STAT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_STAT
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_STAT" 
   (	"ID" VARCHAR2(3 BYTE), 
	"S_POPIS" VARCHAR2(50 BYTE), 
	"C_ZONA" CHAR(1 BYTE) DEFAULT 'A', 
	"S_TOPASKOD" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_STAT.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TABLES/KP_CIS_SUBJECT.sql: 'utf-8' codec can't decode byte 0xe1 in position 618: invalid continuation byte


-- ============================================================================
-- Deploy: KP_CIS_SUBJEKTSKUPINA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_SUBJEKTSKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_SUBJEKTSKUPINA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_SUBJEKTSKUPINA" 
   (	"ID_SKUPINA" NUMBER(*,0), 
	"S_CUSTGROUPCODE" VARCHAR2(5 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_SUBJEKTSKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_SUBTYPCLENSTVI.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_SUBTYPCLENSTVI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_SUBTYPCLENSTVI
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_SUBTYPCLENSTVI" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(30 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_SUBTYPCLENSTVI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_TYPBUDGETUPROJEKTU.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_TYPBUDGETUPROJEKTU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_TYPBUDGETUPROJEKTU
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_TYPBUDGETUPROJEKTU" 
   (	"ID" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_TYPBUDGETUPROJEKTU.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_TYPFAKTURY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_TYPFAKTURY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_TYPFAKTURY
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_TYPFAKTURY" 
   (	"ID" NUMBER, 
	"TFID" NUMBER, 
	"S_POPIS" VARCHAR2(40 BYTE), 
	"S_FEIS_POPIS" VARCHAR2(40 BYTE), 
	"ID_KTGUCETNISPOLECNOST" NUMBER, 
	"STREDISKO" VARCHAR2(15 BYTE), 
	"C_PLATNOST" NUMBER, 
	"C_ZALOHOVA" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."KP_CIS_TYPFAKTURY"."TFID" IS 'ID rady faktury vo FEIS';
   COMMENT ON COLUMN "DB_JT"."KP_CIS_TYPFAKTURY"."S_FEIS_POPIS" IS 'popis rady faktury vo FEIS';
   COMMENT ON COLUMN "DB_JT"."KP_CIS_TYPFAKTURY"."STREDISKO" IS 'kod pre STREDISKO rady faktury vo FEIS';
   COMMENT ON COLUMN "DB_JT"."KP_CIS_TYPFAKTURY"."C_PLATNOST" IS '0 - NEpouzivat , 1 -platny typ dokladu ( zobrazuje sa v roletke)';
   COMMENT ON COLUMN "DB_JT"."KP_CIS_TYPFAKTURY"."C_ZALOHOVA" IS 'priznak zalohovej faktury';


PROMPT Completed KP_CIS_TYPFAKTURY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_TYPPROJEKTOVEBILANCE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_TYPPROJEKTOVEBILANCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_TYPPROJEKTOVEBILANCE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_TYPPROJEKTOVEBILANCE" 
   (	"ID" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_TYPPROJEKTOVEBILANCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_TYPPROJEKTU.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_TYPPROJEKTU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_TYPPROJEKTU
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_TYPPROJEKTU" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_TYPPROJEKTU.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_TYPSUBETAPA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_TYPSUBETAPA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_TYPSUBETAPA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_TYPSUBETAPA" 
   (	"ID" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_TYPSUBETAPA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_TYPSUBJECT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_TYPSUBJECT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_TYPSUBJECT
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_TYPSUBJECT" 
   (	"ID" NUMBER, 
	"S_KOD" VARCHAR2(3 BYTE), 
	"S_POPIS" VARCHAR2(128 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_TYPSUBJECT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_TYPTRANSAKCE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_TYPTRANSAKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_TYPTRANSAKCE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_TYPTRANSAKCE" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(50 BYTE), 
	"S_KOD" VARCHAR2(30 BYTE), 
	"ID_GESTOR_CZ" NUMBER, 
	"ID_GESTOR_SK" NUMBER, 
	"ID_GESTOR_Z" NUMBER, 
	"ID_TYPTRANSAKCEGROUP" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE DEFAULT to_date('01.01.2005','DD.MM.YYYY'), 
	"DT_PLATNOSTDO" DATE DEFAULT to_date('01.01.2099','DD.MM.YYYY'), 
	"C_PROZASTUPCE" CHAR(1 BYTE) DEFAULT '1', 
	"ND_BUDGETNAVYSENI_GESTOR" NUMBER(15,2) DEFAULT 0, 
	"C_DEVELOPER" CHAR(1 BYTE) DEFAULT '0', 
	"S_KOMENTAR" VARCHAR2(2000 BYTE), 
	"C_SPECIAL" CHAR(1 BYTE) DEFAULT '0', 
	"C_PODVOJNEMIS" CHAR(1 BYTE) DEFAULT '0', 
	"ND_UROVENPROJEKT" NUMBER, 
	"ND_UROVENSPOLECNOST" NUMBER, 
	"ND_UROVENTOP" NUMBER, 
	"S_MENAUP" VARCHAR2(3 BYTE), 
	"S_MENAUS" VARCHAR2(3 BYTE), 
	"S_MENAUT" VARCHAR2(3 BYTE), 
	"C_TISKMAJETEK" CHAR(1 BYTE) DEFAULT '0', 
	"C_BUDGETOVAT" CHAR(1 BYTE) DEFAULT '1', 
	"C_CAPEX_OPEX" CHAR(1 BYTE) DEFAULT 'O'
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_TYPTRANSAKCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_TYPTRANSAKCEGROUP.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_TYPTRANSAKCEGROUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_TYPTRANSAKCEGROUP
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_TYPTRANSAKCEGROUP" 
   (	"ID" NUMBER(*,0), 
	"S_KOD" VARCHAR2(50 BYTE), 
	"DT_PLATNOSTOD" DATE DEFAULT to_date('01.01.2005','DD.MM.YYYY'), 
	"DT_PLATNOSTDO" DATE DEFAULT to_date('01.01.2099','DD.MM.YYYY'), 
	"S_POPIS" VARCHAR2(50 BYTE), 
	"C_DEVELOPER" CHAR(1 BYTE) DEFAULT '0'
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_TYPTRANSAKCEGROUP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_TYPTRANSAKCE_TEST.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_TYPTRANSAKCE_TEST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_TYPTRANSAKCE_TEST
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_TYPTRANSAKCE_TEST" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(50 BYTE), 
	"S_KOD" VARCHAR2(15 BYTE), 
	"ID_GESTOR_CZ" NUMBER, 
	"ID_GESTOR_SK" NUMBER, 
	"ID_GESTOR_Z" NUMBER, 
	"ID_TYPTRANSAKCEGROUP" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"C_PROZASTUPCE" CHAR(1 BYTE), 
	"ND_BUDGETNAVYSENI_GESTOR" NUMBER(15,2), 
	"C_DEVELOPER" CHAR(1 BYTE), 
	"S_KOMENTAR" VARCHAR2(2000 BYTE), 
	"C_SPECIAL" CHAR(1 BYTE), 
	"C_PODVOJNEMIS" CHAR(1 BYTE), 
	"ND_UROVENPROJEKT" NUMBER, 
	"ND_UROVENSPOLECNOST" NUMBER, 
	"ND_UROVENTOP" NUMBER, 
	"S_MENAUP" VARCHAR2(3 BYTE), 
	"S_MENAUS" VARCHAR2(3 BYTE), 
	"S_MENAUT" VARCHAR2(3 BYTE), 
	"C_TISKMAJETEK" CHAR(1 BYTE), 
	"C_BUDGETOVAT" CHAR(1 BYTE), 
	"C_CAPEX_OPEX" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_TYPTRANSAKCE_TEST.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_TYPZAJISTENI.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_TYPZAJISTENI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_TYPZAJISTENI
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_TYPZAJISTENI" 
   (	"ID" NUMBER, 
	"S_EXTID" VARCHAR2(3 BYTE), 
	"ID_TYPNASTROJE" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_TYPZAJISTENI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_TYP_TRAN_CAPEX_OPEX.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_TYP_TRAN_CAPEX_OPEX.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_TYP_TRAN_CAPEX_OPEX
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_TYP_TRAN_CAPEX_OPEX" 
   (	"C_ID" VARCHAR2(1 BYTE), 
	"S_POPIS" VARCHAR2(60 BYTE), 
	"S_KOMENTAR" VARCHAR2(2000 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."KP_CIS_TYP_TRAN_CAPEX_OPEX"."S_POPIS" IS 'prenos SL do FEIS 0/null-zadny, 1-automaticky, 2-manualni/ucetni';
   COMMENT ON COLUMN "DB_JT"."KP_CIS_TYP_TRAN_CAPEX_OPEX"."S_KOMENTAR" IS 'info o druhu transakce';


PROMPT Completed KP_CIS_TYP_TRAN_CAPEX_OPEX.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_UCELUVERU.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_UCELUVERU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_UCELUVERU
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_UCELUVERU" 
   (	"ID" NUMBER, 
	"S_EXTID" VARCHAR2(2 BYTE), 
	"C_KOMERCNI" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_UCELUVERU.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_UCETPRIMARNI.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_UCETPRIMARNI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_UCETPRIMARNI
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_UCETPRIMARNI" 
   (	"ID_CISDATABAZE" NUMBER(*,0), 
	"C_TYP" CHAR(1 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_POPIS" VARCHAR2(64 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_UCETPRIMARNI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_UCETPRIMARNI_10_26.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_UCETPRIMARNI_10_26.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_UCETPRIMARNI_10_26
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_UCETPRIMARNI_10_26" 
   (	"ID_CISDATABAZE" NUMBER(*,0), 
	"C_TYP" CHAR(1 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_POPIS" VARCHAR2(64 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_UCETPRIMARNI_10_26.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_UCETSUMATYP.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_UCETSUMATYP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_UCETSUMATYP
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_UCETSUMATYP" 
   (	"ID" CHAR(1 BYTE), 
	"S_ZKRATKA" VARCHAR2(10 BYTE), 
	"POCET_UCTU" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"C_SHOWINUNIF" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."KP_CIS_UCETSUMATYP"."C_SHOWINUNIF" IS 'pro front co ma ukazovat v GUI';


PROMPT Completed KP_CIS_UCETSUMATYP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_UCETUNIF.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_UCETUNIF.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_UCETUNIF
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_UCETUNIF" 
   (	"ID" NUMBER(*,0), 
	"S_UCET" VARCHAR2(15 BYTE), 
	"C_POCITATVAZBY" CHAR(1 BYTE), 
	"C_CLASS" CHAR(1 BYTE), 
	"C_SHARES" CHAR(1 BYTE) DEFAULT '0', 
	"C_MULTISEGMENT" CHAR(1 BYTE) DEFAULT '0', 
	"C_COUNTRY" CHAR(1 BYTE) DEFAULT '0', 
	"C_TYPECOUNTERPARTIES" CHAR(1 BYTE) DEFAULT '0', 
	"ND_LIMITCOUNTERPARTIESDETAL" NUMBER(15,2), 
	"C_MATURITY" CHAR(1 BYTE) DEFAULT '0'
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."KP_CIS_UCETUNIF"."C_POCITATVAZBY" IS 'urcuje zda se maji pocitat vazby z tohoto uctu nebo zda se pro vazby tento ucet ignoruje';
   COMMENT ON COLUMN "DB_JT"."KP_CIS_UCETUNIF"."C_CLASS" IS 'identifikuje o jaky ucet se jedna. ?- nezarazen jinak (A)ssets, (L)iabilities, (I)ncome, (E)xpense, (3) Off Assets, (4) Off Liabilities';


PROMPT Completed KP_CIS_UCETUNIF.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_UCETUNIFCLASS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_UCETUNIFCLASS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_UCETUNIFCLASS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_UCETUNIFCLASS" 
   (	"C_CLASS" CHAR(1 BYTE), 
	"S_POPIS" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_UCETUNIFCLASS.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_UCETUNIFLANG.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_UCETUNIFLANG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_UCETUNIFLANG
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_UCETUNIFLANG" 
   (	"ID_CISUCETUNIF" NUMBER(*,0), 
	"S_LOCALE" VARCHAR2(10 BYTE), 
	"S_POPIS" VARCHAR2(256 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_UCETUNIFLANG.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_UCETUNIF_BCK_IFRS9.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_UCETUNIF_BCK_IFRS9.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_UCETUNIF_BCK_IFRS9
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_UCETUNIF_BCK_IFRS9" 
   (	"ID" NUMBER(*,0), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"C_POCITATVAZBY" CHAR(1 BYTE), 
	"C_CLASS" CHAR(1 BYTE), 
	"C_SHARES" CHAR(1 BYTE), 
	"C_MULTISEGMENT" CHAR(1 BYTE), 
	"C_COUNTRY" CHAR(1 BYTE), 
	"C_TYPECOUNTERPARTIES" CHAR(1 BYTE), 
	"ND_LIMITCOUNTERPARTIESDETAL" NUMBER(15,2), 
	"C_MATURITY" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_UCETUNIF_BCK_IFRS9.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_UCETUNIF_IFRS9_V1.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_UCETUNIF_IFRS9_V1.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_UCETUNIF_IFRS9_V1
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_UCETUNIF_IFRS9_V1" 
   (	"ID" NUMBER(*,0), 
	"S_UCET" VARCHAR2(15 BYTE), 
	"C_POCITATVAZBY" CHAR(1 BYTE), 
	"C_CLASS" CHAR(1 BYTE), 
	"C_SHARES" CHAR(1 BYTE), 
	"C_MULTISEGMENT" CHAR(1 BYTE), 
	"C_COUNTRY" CHAR(1 BYTE), 
	"C_TYPECOUNTERPARTIES" CHAR(1 BYTE), 
	"ND_LIMITCOUNTERPARTIESDETAL" NUMBER(15,2), 
	"C_MATURITY" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_UCETUNIF_IFRS9_V1.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_UCETUNIF_IFRS9_V1_LNG.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_UCETUNIF_IFRS9_V1_LNG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_UCETUNIF_IFRS9_V1_LNG
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_UCETUNIF_IFRS9_V1_LNG" 
   (	"S_UCET" VARCHAR2(15 BYTE), 
	"S_POPIS_CZ" VARCHAR2(256 BYTE), 
	"S_POPIS_ENG" VARCHAR2(256 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_UCETUNIF_IFRS9_V1_LNG.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_UCETVAZBAUCETTYP.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_UCETVAZBAUCETTYP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_UCETVAZBAUCETTYP
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_UCETVAZBAUCETTYP" 
   (	"ID" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(256 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_UCETVAZBAUCETTYP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ZAMEK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_ZAMEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_ZAMEK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_ZAMEK" 
   (	"ID" NUMBER, 
	"S_ZKRATKA" VARCHAR2(15 BYTE), 
	"S_POPIS" VARCHAR2(1048 BYTE), 
	"C_UCETNIKONTROLA" CHAR(1 BYTE) DEFAULT '0', 
	"C_ZAMKNOUTROK" CHAR(1 BYTE) DEFAULT '0', 
	"NL_PORADI" NUMBER(*,0), 
	"ID_TYPZAMKU" NUMBER(*,0), 
	"S_SLOUPEC" VARCHAR2(30 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_ZAMEK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ZISKSRSKUPINA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_CIS_ZISKSRSKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_CIS_ZISKSRSKUPINA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_CIS_ZISKSRSKUPINA" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(30 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_CIS_ZISKSRSKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_AUDIT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_AUDIT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_AUDIT
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_AUDIT" 
   (	"ID_KTGUCETNISPOLECNOST" NUMBER, 
	"DT_DATUM" DATE, 
	"C_POVINNOST" CHAR(1 BYTE), 
	"S_AUDITOR" VARCHAR2(20 BYTE), 
	"ND_CENASTAT" NUMBER(18,2), 
	"S_MENASTAT" VARCHAR2(3 BYTE), 
	"S_AUDITBALIK" VARCHAR2(20 BYTE), 
	"ND_CENABALIK" NUMBER(18,2), 
	"S_MENABALIK" VARCHAR2(3 BYTE), 
	"ND_CENASTATBALIK" NUMBER(18,2), 
	"S_MENASTATBALIK" VARCHAR2(3 BYTE), 
	"DT_TERMINPRIZNANI" DATE, 
	"C_PODANOPRIZNANI" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_AUDIT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_BUDGET.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_BUDGET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_BUDGET
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_BUDGET" 
   (	"ID" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"ID_KTGPROJEKT" NUMBER(*,0), 
	"DT_SCHVALITDO" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_BUDGET.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_BUDGETPOLOZKA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_BUDGETPOLOZKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_BUDGETPOLOZKA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_BUDGETPOLOZKA" 
   (	"ID" NUMBER, 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRAN" NUMBER, 
	"ND_CASTKA" NUMBER(17,2) DEFAULT 0, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ID_ODBOROO" NUMBER, 
	"DT_SCHVALENOODBOR" DATE, 
	"ID_GESTOR" NUMBER, 
	"DT_SCHVALENOGESTOR" DATE, 
	"ID_UCSPOLOO" NUMBER, 
	"DT_SCHVALENOUCSPOL" DATE, 
	"ID_UCSPOLTOP" NUMBER, 
	"DT_SCHVALENOTOP" DATE, 
	"S_POZNAMKA" VARCHAR2(250 BYTE), 
	"ID_APPUSER" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_BUDGETPOLOZKA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_BUDGETZASTUP.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_BUDGETZASTUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_BUDGETZASTUP
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_BUDGETZASTUP" 
   (	"ID" NUMBER, 
	"ID_KOHO" NUMBER, 
	"ID_KDO" NUMBER, 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"C_FWDEMAIL" CHAR(1 BYTE) DEFAULT '1', 
	"ID_BUDGET" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_BUDGETZASTUP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DANE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DANE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DANE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DANE" 
   (	"ID_KTGUCETNISPOLECNOST" NUMBER, 
	"DT_DATUM" DATE, 
	"C_DANOVAZTRATA" CHAR(1 BYTE) DEFAULT 0, 
	"ND_CASTKADANZTRATA" NUMBER(15,2), 
	"ND_VYUZITIDANZTRATA" NUMBER(15,2), 
	"ND_ODHADHOSPVYSL" NUMBER(15,2), 
	"ND_ODHADZAKLADUDANE" NUMBER(15,2), 
	"C_PLATCEDPH" CHAR(1 BYTE) DEFAULT 0, 
	"ID_FREKVENCEDPH" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_DANE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DANOVESAZBY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DANOVESAZBY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DANOVESAZBY
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DANOVESAZBY" 
   (	"ID" NUMBER, 
	"S_STAT" VARCHAR2(3 BYTE), 
	"ND_PASMOOD" NUMBER(15,2) DEFAULT 0, 
	"ND_PASMODO" NUMBER(15,2) DEFAULT 9999999999999, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_SAZBADANE" NUMBER(5,2), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_DANOVESAZBY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DENNIAGREGACE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DENNIAGREGACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DENNIAGREGACE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DENNIAGREGACE" 
   (	"ID" NUMBER(*,0), 
	"DT_DATUM" DATE, 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"ID_KTGUCETNISPOLECNOSTPROTI" NUMBER(*,0), 
	"ID_KTGSPOLECNOSTPROTI" NUMBER(*,0), 
	"ID_CISRADEKTEXT" NUMBER(*,0), 
	"C_MENOVAPOZICE" CHAR(1 BYTE), 
	"C_UVEROVAPOZICE" CHAR(1 BYTE), 
	"ND_CASTKAMENA" NUMBER(18,2), 
	"ND_CASTKALOCAL" NUMBER(18,2), 
	"ND_CASTKACNB" NUMBER(18,2), 
	"C_LIST" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_DENNIAGREGACE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOCZASTUP.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOCZASTUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOCZASTUP
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOCZASTUP" 
   (	"ID" NUMBER, 
	"ID_KOHO" NUMBER, 
	"ID_KDO" NUMBER, 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"C_FWDEMAIL" CHAR(1 BYTE) DEFAULT '1'
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_DOCZASTUP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLAD.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLAD
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLAD" 
   (	"ID" NUMBER(*,0), 
	"NL_ERROR" NUMBER(*,0) DEFAULT 0, 
	"NL_KROK" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"ID_KTGDOKLAD" NUMBER(*,0), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"DT_DATUM" DATE, 
	"S_POPIS" VARCHAR2(256 BYTE), 
	"ID_PARENT" NUMBER(*,0), 
	"DT_VYTVORENO" DATE DEFAULT sysdate, 
	"S_UZIVATEL" VARCHAR2(30 BYTE) DEFAULT user, 
	"DT_PLATNOSTMUSTEK" DATE, 
	"S_UZIVATELMUSTEK" VARCHAR2(20 BYTE), 
	"NL_WARNING" NUMBER(*,0), 
	"DT_DATUMPOCSTAV" DATE, 
	"ID_SUBKONSOLIDACE" NUMBER(*,0), 
	"ID_KTGSUBKONSOLIDACEETAPA" NUMBER(*,0), 
	"NL_POCETTRANSAKCI" NUMBER DEFAULT 0, 
	"ND_ZJ" NUMBER(15,2) DEFAULT 0, 
	"ND_VJ" NUMBER(15,2) DEFAULT 0, 
	"DT_MAXTRANSAKCE" DATE, 
	"C_SUBSMER" CHAR(1 BYTE), 
	"DT_SUBDATUM" DATE, 
	"C_BASEDOKLAD" CHAR(1 BYTE) DEFAULT '0', 
	"NL_POCETTRANSAKCIPROJEKT" NUMBER(*,0) DEFAULT 0, 
	"NL_POCETTRANSAKCIODBOR" NUMBER(*,0) DEFAULT 0, 
	"NL_POCETTRANSAKCIPROJEKTPLUS" NUMBER(*,0), 
	"DT_DATUMRELATIVE" DATE, 
	"DT_DATUMEXPORTOLAP" DATE, 
	"NL_VYNOSY" NUMBER(*,0), 
	"NL_VYNOSYPLUS" NUMBER(*,0), 
	"NL_NAKLADY" NUMBER(*,0), 
	"NL_NAKLADYPLUS" NUMBER(*,0), 
	"C_VAZBY" CHAR(1 BYTE) DEFAULT '0', 
	"C_IFRSPRIMARNI" CHAR(1 BYTE) DEFAULT '0', 
	"ID_CISDATABAZE" NUMBER(*,0)
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS  LOGGING 
  STORAGE(
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "_$deleted$10$0" 
  PARTITION BY RANGE ("DT_DATUM") 
 (PARTITION "KP_DAT_DOKLAD_2004"  VALUES LESS THAN (TO_DATE(' 2005-01-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2005"  VALUES LESS THAN (TO_DATE(' 2006-01-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2006"  VALUES LESS THAN (TO_DATE(' 2007-01-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2007"  VALUES LESS THAN (TO_DATE(' 2008-01-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2008"  VALUES LESS THAN (TO_DATE(' 2009-01-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2009"  VALUES LESS THAN (TO_DATE(' 2010-01-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2010"  VALUES LESS THAN (TO_DATE(' 2011-01-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2011"  VALUES LESS THAN (TO_DATE(' 2012-01-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2012"  VALUES LESS THAN (TO_DATE(' 2013-01-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2013"  VALUES LESS THAN (TO_DATE(' 2014-01-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2014"  VALUES LESS THAN (TO_DATE(' 2015-01-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2015"  VALUES LESS THAN (TO_DATE(' 2016-01-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2016"  VALUES LESS THAN (TO_DATE(' 2017-01-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2017"  VALUES LESS THAN (TO_DATE(' 2018-01-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2018"  VALUES LESS THAN (TO_DATE(' 2019-01-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2019"  VALUES LESS THAN (TO_DATE(' 2020-01-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2020"  VALUES LESS THAN (TO_DATE(' 2021-01-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2021"  VALUES LESS THAN (TO_DATE(' 2022-01-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2022"  VALUES LESS THAN (MAXVALUE) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS )  ENABLE ROW MOVEMENT ;
  CREATE UNIQUE INDEX "DB_JT"."PK_KPDOKLAD" ON "DB_JT"."KP_DAT_DOKLAD" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "INDEXY" ;
ALTER TABLE "DB_JT"."KP_DAT_DOKLAD" ADD CONSTRAINT "PK_KPDOKLAD" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPDOKLAD"  ENABLE;

   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKLAD"."NL_KROK" IS 'urcuje ''charakter'' dokladu viz. <a href=''../../../Faq/index.html#krokyDokladu''>kroky dokladu</a>';
   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKLAD"."S_MENA" IS 'mmmmmmmmmmmmmmmm';
   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKLAD"."C_IFRSPRIMARNI" IS 'Urcuje zda byl IFRS doklad vygenerovan z primarnich ucetnich transakci 0 - pro hodnotu ''1'' ';
   COMMENT ON TABLE "DB_JT"."KP_DAT_DOKLAD"  IS 'Tabulka se vsemi vygenerovanymi doklady. ';


PROMPT Completed KP_DAT_DOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADBILANCEPOCSTAV.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADBILANCEPOCSTAV.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADBILANCEPOCSTAV
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADBILANCEPOCSTAV" 
   (	"ID_DOKLAD" NUMBER(*,0), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKAMENA" NUMBER(18,2), 
	"ND_CASTKALOCAL" NUMBER(18,2), 
	"ND_OPRAVNACASTKAMENA" NUMBER(18,2), 
	"ND_OPRAVNACASTKALOCAL" NUMBER(18,2), 
	"NL_PORADILIST" NUMBER(*,0), 
	"NL_RADEK" NUMBER(*,0), 
	"NL_SLOUPEC" NUMBER(*,0), 
	"ID_CISLIST" NUMBER(*,0), 
	"ID_CISRADEKTYP" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_DOKLADBILANCEPOCSTAV.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADFRONTA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADFRONTA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADFRONTA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADFRONTA" 
   (	"ID" NUMBER(*,0), 
	"DATUM" DATE DEFAULT sysdate, 
	"S_STAV" VARCHAR2(15 BYTE), 
	"AIDCISDOKLAD" NUMBER(*,0), 
	"AIDKROK" NUMBER(*,0), 
	"AIDKTGUCETNISPOLECNOST" NUMBER(*,0), 
	"ADATUM" DATE, 
	"ADATUMMUSTEK" DATE, 
	"AUZIVATELMUSTEK" VARCHAR2(30 BYTE), 
	"AUZIVATEL" VARCHAR2(30 BYTE), 
	"AJENOMPS" NUMBER(*,0), 
	"AID1" NUMBER(*,0), 
	"AID2" NUMBER(*,0), 
	"S_SQLERROR" VARCHAR2(2048 BYTE), 
	"L_POKUS" NUMBER(*,0) DEFAULT 3, 
	"DT_NEXT_POKUS" DATE DEFAULT sysdate, 
	"AIDSUBKONSOLIDACE" NUMBER(*,0), 
	"AUDSID" NUMBER, 
	"AGUIFLAG" CHAR(1 BYTE) DEFAULT '0', 
	"ADATUMDATAOD" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKLADFRONTA"."ADATUMDATAOD" IS 'Rika od jakeho datumu se maji data importovat (pouzivam ted pri generovani zlutych dokladu prestupujicich spolecnosti).';


PROMPT Completed KP_DAT_DOKLADFRONTA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADNASTROJ.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADNASTROJ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADNASTROJ
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADNASTROJ" 
   (	"ID" NUMBER(*,0), 
	"ID_KTGTYPNASTROJE" NUMBER(*,0), 
	"C_TYPPORTFOLIO" CHAR(1 BYTE), 
	"ID_KTGSPOLECNOSTPROTISTRANA" NUMBER(*,0), 
	"S_PRODUKTUCET" VARCHAR2(21 BYTE), 
	"ID_KTGTYPOPERACE" NUMBER(*,0), 
	"C_TYPVYKAZ" CHAR(1 BYTE), 
	"S_CASROZLISENIMENA" VARCHAR2(3 BYTE), 
	"C_DENOMINACE" CHAR(1 BYTE), 
	"C_RESTRUKTUALIZACEDLUHU" CHAR(1 BYTE), 
	"DT_DATUMSPLATNOST" DATE, 
	"C_TYPUROKSAZBA" CHAR(1 BYTE), 
	"ND_UROKPRISPLATNOSTI" NUMBER(8,5), 
	"C_KOMERCNIUCEL" CHAR(1 BYTE), 
	"C_ODVOLATELNEZAJISTENI" CHAR(1 BYTE), 
	"DT_DATUMFLOATNEXT" DATE, 
	"ID_PARENT" NUMBER(*,0), 
	"C_POZICEUCET" CHAR(1 BYTE), 
	"PC_ID" CHAR(20 BYTE), 
	"TMP_P1" VARCHAR2(21 BYTE), 
	"TMP_P2" VARCHAR2(21 BYTE), 
	"S_POPIS" VARCHAR2(10 BYTE), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"ID_DOKLAD" NUMBER(*,0), 
	"DT_DATUMDOKLAD" DATE, 
	"C_AKTIVNI" CHAR(1 BYTE), 
	"S_UZIVATEL" VARCHAR2(20 BYTE), 
	"DT_ZALOZENO" DATE DEFAULT sysdate, 
	"ID_KTGUCETNISPOLECNOSTVYKAZ" NUMBER(*,0), 
	"ID_KTGSUBKONSOLIDACE" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_DOKLADNASTROJ.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADNASTROJCP.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADNASTROJCP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADNASTROJCP
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADNASTROJCP" 
   (	"ID" NUMBER(*,0), 
	"ID_KTGTYPNASTROJE" NUMBER(*,0), 
	"ID_KTGSPOLECNOSTPROTISTRANA" NUMBER(*,0), 
	"ID_KTGTYPOPERACE" NUMBER(*,0), 
	"ID_KTGCENNYPAPIR" NUMBER(*,0), 
	"ID_KTGCENNYPAPIR2" NUMBER(*,0), 
	"C_TYPPORTFOLIO" CHAR(1 BYTE), 
	"C_POZICE" CHAR(1 BYTE), 
	"NL_POCETKUSUCP" NUMBER(*,0), 
	"DT_DATUMOBCHOD" DATE, 
	"DT_DATUMVYPORADANI" DATE, 
	"DT_SPLATNOST" DATE, 
	"DT_SPLATNOST_2" DATE, 
	"C_DENOMINACE" CHAR(1 BYTE) DEFAULT '0', 
	"C_RESTRUKTUALIZACEDLUHU" CHAR(1 BYTE) DEFAULT '0', 
	"C_SPLACENAPREMIE" CHAR(1 BYTE) DEFAULT '0', 
	"ND_PORIZOVACICENAKUSMENA" NUMBER(18,2), 
	"ND_PORIZOVACICENAKUSLOCAL" NUMBER(18,2), 
	"ND_NOMINALHODNOTAMENA" NUMBER(18,2), 
	"ND_REALNAHODNOTALOCAL" NUMBER(18,2), 
	"ND_TRZNIHODNOTAMENA" NUMBER(18,2), 
	"ND_TRZNIHODNOTALOCAL" NUMBER(18,2), 
	"ND_OBJEMZAVAZKULOCAL" NUMBER(18,2), 
	"ND_CELKEMREALNAHODNOTALOCAL" NUMBER(18,2), 
	"NL_POCETKUSUCPVYPORADANI" NUMBER(*,0), 
	"ND_CASTKACZK" NUMBER(18,2), 
	"ND_POPLATEKVYPORADANILOCAL" NUMBER(18,2), 
	"ND_CENAKUSSPLATNOST" NUMBER(18,2), 
	"ND_CENAKUSSPLATNOST_2" NUMBER(18,2), 
	"ND_STRIKEOPCE" NUMBER(18,2), 
	"ND_DELTAOPCE" NUMBER(18,2), 
	"ND_HODNOTAOPCE" NUMBER(18,2), 
	"ND_HODNOTAPREMIA" NUMBER(18,2), 
	"ND_UROKSPLATNOST" NUMBER(18,2), 
	"ND_GAMAOPCE" NUMBER(18,2), 
	"ND_VEGAOPCE" NUMBER(18,2), 
	"C_TYPVYKAZ" CHAR(1 BYTE), 
	"C_TYPVYKAZ_2" CHAR(1 BYTE), 
	"ID_KTGPODKLADNASTOJE" NUMBER(*,0), 
	"ID_KTGSPOLECNOSTEMITENT" NUMBER(*,0), 
	"C_VYPLACENIRKC" CHAR(1 BYTE) DEFAULT '1', 
	"C_POTVRZENIVL" CHAR(1 BYTE) DEFAULT '0', 
	"C_TYPUROKSAZBA" CHAR(1 BYTE), 
	"C_TYPUROKSAZBA_2" CHAR(1 BYTE), 
	"S_REFERENCNIUROKOVA" VARCHAR2(20 BYTE), 
	"ND_KOREKCEUROKOVESAZBY" NUMBER(8,5), 
	"DT_DATUMFLOATNEXT" DATE, 
	"DT_DATUMFLOATNEXT_2" DATE, 
	"ND_UROKOVASAZBA" NUMBER(8,5), 
	"ND_UROKOVASAZBA_2" NUMBER(8,5), 
	"ND_VOLATILITAPODKLADU" NUMBER(18,2), 
	"NL_POCETUROKOBDOBI" NUMBER(*,0), 
	"NL_POCETKONECUROKOBDOBI" NUMBER(*,0), 
	"ID_KTGTERMINSAZBY" NUMBER(*,0), 
	"S_PRODUKTUCET" VARCHAR2(21 BYTE), 
	"ID_PARENT" NUMBER(*,0), 
	"C_POZICEUCET" CHAR(1 BYTE), 
	"PC_ID" CHAR(20 BYTE), 
	"TMP_P1" VARCHAR2(21 BYTE), 
	"TMP_P2" VARCHAR2(21 BYTE), 
	"C_BURZAOBCHODOVATELNOST" CHAR(1 BYTE), 
	"S_POPIS" VARCHAR2(10 BYTE), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"ID_DOKLAD" NUMBER(*,0), 
	"DT_DATUMDOKLAD" DATE, 
	"C_AKTIVNI" CHAR(1 BYTE), 
	"S_UZIVATEL" VARCHAR2(20 BYTE), 
	"DT_ZALOZENO" DATE DEFAULT sysdate, 
	"ID_KTGUCETNISPOLECNOSTVYKAZ" NUMBER(*,0), 
	"ID_KTGSUBKONSOLIDACE" NUMBER(*,0), 
	"C_REGISTROVANY" CHAR(1 BYTE) DEFAULT '0'
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_DOKLADNASTROJCP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADNASTROJ_CASTKY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADNASTROJ_CASTKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADNASTROJ_CASTKY
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADNASTROJ_CASTKY" 
   (	"ID" NUMBER(*,0), 
	"ID_NASTROJ" NUMBER(*,0), 
	"ID_TYP" NUMBER(*,0), 
	"C_HLAVA" CHAR(1 BYTE), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"ND_CASTKAMENA" NUMBER(18,2), 
	"ND_CASTKALOCAL" NUMBER(18,2), 
	"NL_RADEK" NUMBER(*,0), 
	"ID_NASTROJ_CP" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_DOKLADNASTROJ_CASTKY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADNEZARAZENETRAN.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADNEZARAZENETRAN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADNEZARAZENETRAN
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADNEZARAZENETRAN" 
   (	"ID_DOKLAD" NUMBER(*,0), 
	"ID_ZDROJDAT" NUMBER(*,0), 
	"C_IGNOROVAT" CHAR(1 BYTE) DEFAULT '0', 
	 CONSTRAINT "PK_KPDOKLADNEZARAZENETRANSAKCE" PRIMARY KEY ("ID_DOKLAD", "ID_ZDROJDAT") ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  ORGANIZATION INDEX NOCOMPRESS PCTFREE 10 INITRANS 2 MAXTRANS 255 LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS 
 PCTTHRESHOLD 50;

   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKLADNEZARAZENETRAN"."C_IGNOROVAT" IS 'Rika zda se nezarazena transakce ma povazovat za chybu a ukazovat se v logu jako problem ''1''.  Nebo zda jde o nezarazenou transakci, kterou za chybu nepovazujeme ''0''.';


PROMPT Completed KP_DAT_DOKLADNEZARAZENETRAN.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADPOLOZKA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADPOLOZKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADPOLOZKA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADPOLOZKA" 
   (	"ID" NUMBER(*,0), 
	"ID_DOKLAD" NUMBER(*,0), 
	"ID_DEFLISTBUNKA" NUMBER(*,0), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKAMENA" NUMBER(18,2) DEFAULT 0, 
	"ND_CASTKALOCAL" NUMBER(18,2) DEFAULT 0, 
	"ND_CASTKAMENAPREPOCET" NUMBER(18,2) DEFAULT 0, 
	"ID_DEFDOKLAD" NUMBER(*,0), 
	"ID_CISLIST" NUMBER(*,0), 
	"ID_CISRADEKTYP" NUMBER(*,0), 
	"NL_PORADILIST" NUMBER(*,0), 
	"NL_RADEK" NUMBER(*,0), 
	"NL_SLOUPEC" NUMBER(*,0), 
	"C_VYPOCTENO" CHAR(1 BYTE) DEFAULT '0'
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 393216 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_DOKLADPOLOZKA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADPOLOZKADENIK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADPOLOZKADENIK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADPOLOZKADENIK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADPOLOZKADENIK" 
   (	"ID" NUMBER(*,0), 
	"ID_DOKLADPOLOZKA" NUMBER(*,0), 
	"C_AKCE" CHAR(1 BYTE), 
	"ND_OLD_VALUE" NUMBER(18,2), 
	"ND_NEW_VALUE" NUMBER(18,2), 
	"ND_ZMENA" NUMBER(18,2), 
	"S_POPIS" VARCHAR2(64 BYTE), 
	"ID_DOKLAD" NUMBER(*,0), 
	"ID_KTGSUBKONPRAVIDLODETAIL" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_DOKLADPOLOZKADENIK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADPROTOKOL.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADPROTOKOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADPROTOKOL
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADPROTOKOL" 
   (	"ID" NUMBER(*,0), 
	"DT_DATUM" DATE DEFAULT sysdate, 
	"ID_DOKLAD" NUMBER(*,0), 
	"C_KOD" CHAR(1 BYTE), 
	"S_HLASKA" VARCHAR2(512 BYTE), 
	"NL_VAZBYSKUPINA" NUMBER(*,0), 
	"ID_SUBDOKLAD" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_DOKLADPROTOKOL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADQUESTORPC.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADQUESTORPC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADQUESTORPC
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADQUESTORPC" 
   (	"ID_DOKLAD" NUMBER(*,0), 
	"PC_ID" VARCHAR2(20 BYTE), 
	"PROD_NUMBER" VARCHAR2(35 BYTE), 
	"SEQUENCE_NUMBER" NUMBER(4,0), 
	"PC_PROD_KIND" CHAR(3 BYTE), 
	"PC_PROD_TYPE" CHAR(3 BYTE), 
	"PC_STATUS" CHAR(2 BYTE), 
	"GL_SYNTETIC" VARCHAR2(35 BYTE), 
	"OPEN_DATE" DATE, 
	"END_DATE" DATE, 
	"DAY_TOTAL" NUMBER(6,0), 
	"DAY_TO_END" NUMBER(6,0), 
	"CURR_ISO_CODE" CHAR(3 BYTE), 
	"FC_BALANCE" NUMBER(15,2), 
	"LC_BALANCE" NUMBER(15,2), 
	"INTEREST" NUMBER(8,5), 
	"FREE_INFO" VARCHAR2(20 BYTE), 
	"AVAIL_KONTOKORENT" NUMBER(15,2), 
	"SCORINGREF_1" VARCHAR2(40 BYTE), 
	"KLASIFIKACE" VARCHAR2(40 BYTE), 
	"DOC_DESCRIPTION" VARCHAR2(250 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_DOKLADQUESTORPC.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADROZDILY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADROZDILY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADROZDILY
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADROZDILY" 
   (	"ID" NUMBER(*,0), 
	"ID_DOKLAD" NUMBER(*,0), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"ND_CASTKAMENA" NUMBER(18,2), 
	"S_MENA_IFRS" VARCHAR2(3 BYTE), 
	"S_UCET_IFRS" VARCHAR2(10 BYTE), 
	"ID_KTGSPOLECNOST_IFRS" NUMBER(*,0), 
	"ND_CASTKAMENA_IFRS" NUMBER(18,2)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_DOKLADROZDILY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADSUBKONLOGDOKLADY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADSUBKONLOGDOKLADY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADSUBKONLOGDOKLADY
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADSUBKONLOGDOKLADY" 
   (	"ID_DOKLAD" NUMBER(*,0), 
	"ID_KTGSUBKONSOLIDACE" NUMBER(*,0), 
	"DT_DATUM" DATE, 
	"ID_DOKLADCLEN" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOSTCLEN" NUMBER(*,0), 
	"ID_KTGSUBKONSOLIDACECLEN" NUMBER(*,0), 
	"NL_KROKDOKLADCLEN" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKLADSUBKONLOGDOKLADY"."ID_DOKLAD" IS 'Rika k jakemu dokladu je toto log. Slouzi hlavne k promazavani pres cizi klic';
   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKLADSUBKONLOGDOKLADY"."ID_KTGSUBKONSOLIDACE" IS 'Redundace z id_doklad, rika pro jakou subkonsolidaci se tento log vytvarel. Dohledavaji se podle tohoto sloupce a datumu podrizene uzly stromu.';
   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKLADSUBKONLOGDOKLADY"."DT_DATUM" IS 'Redundace z id_doklad, pro dohledavani podstromu.';
   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKLADSUBKONLOGDOKLADY"."ID_DOKLADCLEN" IS 'Rika jaky doklad byl pouzit pri generovani dokladu id_doklad';
   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKLADSUBKONLOGDOKLADY"."ID_KTGUCETNISPOLECNOSTCLEN" IS 'Redundacnce z id_dokladClen, je vyplneno pokud byl clenstky doklad list.';
   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKLADSUBKONLOGDOKLADY"."ID_KTGSUBKONSOLIDACECLEN" IS 'Redundacnce z id_dokladClen, je vyplneno pokud byl clenstky doklad dalsim uzlem stromu.';


PROMPT Completed KP_DAT_DOKLADSUBKONLOGDOKLADY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADSUBKONVAZBYDENIK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADSUBKONVAZBYDENIK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADSUBKONVAZBYDENIK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADSUBKONVAZBYDENIK" 
   (	"ID_DOKLAD" NUMBER(*,0), 
	"C_TYP" CHAR(1 BYTE), 
	"ID_KTGUCETNISPOLECNOSTFROM" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOSTTO" NUMBER(*,0), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKA" NUMBER(18,2), 
	"ND_KURZ" NUMBER(22,14), 
	"NL_PORADILIST" NUMBER(*,0), 
	"NL_RADEK" NUMBER(*,0), 
	"NL_PARPORADILIST" NUMBER(*,0), 
	"NL_PARRADEK" NUMBER(*,0), 
	"ID_DOKLADVAZBY" NUMBER(*,0), 
	"ID_DOKLADVAZBYPAR" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_DOKLADSUBKONVAZBYDENIK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADUCETUNIF2ORG_BCK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADUCETUNIF2ORG_BCK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADUCETUNIF2ORG_BCK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADUCETUNIF2ORG_BCK" 
   (	"ID_DOKLAD" NUMBER(*,0), 
	"S_UCETUNIF" VARCHAR2(10 BYTE), 
	"S_UCTYORIGINAL" VARCHAR2(128 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_DOKLADUCETUNIF2ORG_BCK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADUCETUNIF2ORIGINAL.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADUCETUNIF2ORIGINAL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADUCETUNIF2ORIGINAL
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADUCETUNIF2ORIGINAL" 
   (	"ID_DOKLAD" NUMBER(*,0), 
	"S_UCETUNIF" VARCHAR2(15 BYTE), 
	"S_UCTYORIGINAL" VARCHAR2(128 BYTE), 
	 CONSTRAINT "PK_KPDOKLADUCETUNIF2ORIGINAL" PRIMARY KEY ("ID_DOKLAD", "S_UCETUNIF") ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  ORGANIZATION INDEX NOCOMPRESS PCTFREE 10 INITRANS 2 MAXTRANS 255 LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS 
 PCTTHRESHOLD 50;


PROMPT Completed KP_DAT_DOKLADUCETUNIF2ORIGINAL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADVAZBY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADVAZBY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADVAZBY
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADVAZBY" 
   (	"ID" NUMBER(*,0), 
	"ID_DOKLAD" NUMBER(*,0), 
	"ID_KTGUCETNISKUPINA" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOSTFROM" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOSTTO" NUMBER(*,0), 
	"ID_CISRADEKTEXT" NUMBER(*,0), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UCET" VARCHAR2(15 BYTE), 
	"ND_CASTKAMENA" NUMBER(15,2), 
	"ND_CASTKALOCAL" NUMBER(15,2), 
	"ND_CASTKAVYPAROVAT" NUMBER(15,2), 
	"ID_PAR" NUMBER(*,0), 
	"NL_PORADILIST" NUMBER(*,0), 
	"NL_RADEK" NUMBER(*,0), 
	"ND_CASTKAMENAORIGINAL" NUMBER(15,2), 
	"ID_DOKLADPROTISTRANA" NUMBER(*,0), 
	"ND_CASTKALOCALORIGINAL" NUMBER(15,2), 
	"NL_USERINDEXVAZBA" NUMBER(*,0), 
	"C_PROPISUJVAZBY" CHAR(1 BYTE), 
	"ID_KTGSUBKONSOLIDACE" NUMBER(*,0), 
	"ID_CISUCETUNIF" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS  ENABLE ROW MOVEMENT ;


PROMPT Completed KP_DAT_DOKLADVAZBY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADVAZBYAKCEPT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADVAZBYAKCEPT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADVAZBYAKCEPT
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADVAZBYAKCEPT" 
   (	"ID_DOKLAD" NUMBER(*,0), 
	"ID_KTGUCETNISKUPINA" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOSTFROM" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOSTTO" NUMBER(*,0), 
	"ID_DOKLADPROTI" NUMBER(*,0), 
	"C_AKCEPTACE" CHAR(1 BYTE) DEFAULT '0', 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"DT_ZMENA" DATE DEFAULT sysdate, 
	"DT_AKCEPTACE" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS  ENABLE ROW MOVEMENT ;


PROMPT Completed KP_DAT_DOKLADVAZBYAKCEPT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADVAZBYPAROVANI.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADVAZBYPAROVANI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADVAZBYPAROVANI
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVANI" 
   (	"ID_KTGUCETNISPOLECNOSTFROM" NUMBER(*,0), 
	"DT_DATUMDOKLAD" DATE, 
	"ID_KTGDOKLAD" NUMBER(*,0), 
	"ID_KTGUCETNISKUPINA" NUMBER(*,0), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"NL_PORADILIST" NUMBER(*,0), 
	"NL_RADEK" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOSTTO" NUMBER(*,0), 
	"ND_CASTKAMENA" NUMBER(15,2), 
	"ID_DOKLADVAZBY" NUMBER(*,0), 
	"ID_DOKLAD" NUMBER(*,0), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"ND_CASTKALOCAL" NUMBER(15,2), 
	"C_TYP" CHAR(1 BYTE), 
	"NL_USERINDEXVAZBA" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_DOKLADVAZBYPAROVANI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADVAZBYPAROVOLD.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADVAZBYPAROVOLD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADVAZBYPAROVOLD
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVOLD" 
   (	"ID_KTGUCETNISPOLECNOSTFROM" NUMBER(*,0), 
	"DT_DATUMDOKLAD" DATE, 
	"ID_KTGDOKLAD" NUMBER(*,0), 
	"ID_KTGUCETNISKUPINA" NUMBER(*,0), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"NL_PORADILIST" NUMBER(*,0), 
	"NL_RADEK" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOSTTO" NUMBER(*,0), 
	"ND_CASTKAMENA" NUMBER(15,2), 
	"ID_DOKLADVAZBY" NUMBER(*,0), 
	"ID_DOKLAD" NUMBER(*,0), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"ND_CASTKALOCAL" NUMBER(15,2), 
	"C_TYP" CHAR(1 BYTE), 
	"NL_USERINDEXVAZBA" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_DOKLADVAZBYPAROVOLD.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADVAZBY_BCK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADVAZBY_BCK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADVAZBY_BCK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADVAZBY_BCK" 
   (	"ID" NUMBER(*,0), 
	"ID_DOKLAD" NUMBER(*,0), 
	"ID_KTGUCETNISKUPINA" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOSTFROM" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOSTTO" NUMBER(*,0), 
	"ID_CISRADEKTEXT" NUMBER(*,0), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"ND_CASTKAMENA" NUMBER(15,2), 
	"ND_CASTKALOCAL" NUMBER(15,2), 
	"ND_CASTKAVYPAROVAT" NUMBER(15,2), 
	"ID_PAR" NUMBER(*,0), 
	"NL_PORADILIST" NUMBER(*,0), 
	"NL_RADEK" NUMBER(*,0), 
	"ND_CASTKAMENAORIGINAL" NUMBER(15,2), 
	"ID_DOKLADPROTISTRANA" NUMBER(*,0), 
	"ND_CASTKALOCALORIGINAL" NUMBER(15,2), 
	"NL_USERINDEXVAZBA" NUMBER(*,0), 
	"C_PROPISUJVAZBY" CHAR(1 BYTE), 
	"ID_KTGSUBKONSOLIDACE" NUMBER(*,0), 
	"ID_CISUCETUNIF" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_DOKLADVAZBY_BCK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADZAMEK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADZAMEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADZAMEK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADZAMEK" 
   (	"NL_KROK" NUMBER, 
	"ID_DOKLAD" NUMBER, 
	"DT_TIMESTAMP" DATE DEFAULT SYSDATE, 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"ID_TYPEUSER" NUMBER DEFAULT 2
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_DOKLADZAMEK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADZDROJDAT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADZDROJDAT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADZDROJDAT
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADZDROJDAT" 
   (	"ID" NUMBER(*,0), 
	"ID_DOKLAD" NUMBER(*,0), 
	"ID_DOKLADPOLOZKA" NUMBER(*,0), 
	"ID_EXTSYSTEM" VARCHAR2(20 BYTE), 
	"ID_EXTSYSTEM2" VARCHAR2(35 BYTE), 
	"C_EXTSYSTEM" CHAR(1 BYTE), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"C_STRANA" CHAR(1 BYTE), 
	"S_UCET" VARCHAR2(15 BYTE), 
	"ND_CASTKAMENA" NUMBER(18,2), 
	"ND_CASTKALOCAL" NUMBER(18,2), 
	"S_EXTPROTISTRANA" VARCHAR2(30 BYTE), 
	"S_EXTPROTISTRANA_EO" VARCHAR2(30 BYTE), 
	"S_EXTPROTISTRANA_BANKA" VARCHAR2(30 BYTE), 
	"S_EXTPROTISTRANA_EMITENT" VARCHAR2(15 BYTE), 
	"S_EXTPROTISTRANAICO" VARCHAR2(20 BYTE), 
	"S_EXTPROTISTRANAICO_EO" VARCHAR2(20 BYTE), 
	"S_EXTPROTISTRANAICO_BANKA" VARCHAR2(20 BYTE), 
	"S_EXTPROTISTRANAICO_EMITENT" VARCHAR2(10 BYTE), 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"DATUM" DATE, 
	"C_KONTOKORENT" CHAR(1 BYTE) DEFAULT '0', 
	"KID" NUMBER(*,0), 
	"DOID" VARCHAR2(10 BYTE), 
	"PLATINST" VARCHAR2(10 BYTE), 
	"EMITENT_ID" NUMBER(*,0), 
	"BANKA_ID" NUMBER(*,0), 
	"FIRMA_ID" NUMBER(*,0), 
	"EO_ID" NUMBER(*,0), 
	"NUMBER0" VARCHAR2(20 BYTE), 
	"ID_PROTI_1" NUMBER(*,0), 
	"ID_PROTI_2" NUMBER(*,0), 
	"ID_PROTI_3" NUMBER(*,0), 
	"ID_PROTI_4" NUMBER(*,0), 
	"S_EVIDOVATPROTISTRANU" VARCHAR2(4 BYTE) DEFAULT '0000', 
	"C_MENOVAPOZICE" CHAR(1 BYTE), 
	"C_UVEROVAPOZICE" CHAR(1 BYTE), 
	"C_VYJIMKAPROTISTRANA" CHAR(1 BYTE), 
	"ID_KTGUCETNISPOLECNOSTUNIF" NUMBER(*,0), 
	"POCATECNISTAV" CHAR(1 BYTE), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"ID_KTGPROJEKT" NUMBER(*,0), 
	"ID_KTGODBOR" NUMBER(*,0), 
	"ID_TYPNASTROJE" NUMBER(*,0), 
	"XIDSL" NUMBER(*,0), 
	"C_TYPPORTFOLIO" CHAR(1 BYTE), 
	"ID_KTGCENNYPAPIR" NUMBER(*,0), 
	"S_FAKTURA" VARCHAR2(30 BYTE), 
	"PC_PROD_KIND" CHAR(3 BYTE), 
	"PC_PROD_TYPE" CHAR(3 BYTE), 
	"ID_EXTSYSTEM3" VARCHAR2(35 BYTE), 
	"S_UCETUNIF" VARCHAR2(15 BYTE), 
	"NL_REL" NUMBER(*,0) DEFAULT 0, 
	"C_TYPTRANSAKCE" CHAR(1 BYTE), 
	"ID_TYPTRANSAKCE" NUMBER(*,0), 
	"S_UCETORIGINAL" VARCHAR2(15 BYTE), 
	"ID_CISUCETUNIF" NUMBER(*,0), 
	"DT_DATUMSPLATNOST" DATE, 
	"UCTOVANODNE" DATE, 
	"X_ISIT_BUDGET_ID" VARCHAR2(20 BYTE), 
	 CONSTRAINT "FK_KPZDROJDAT_DOKLAD2" FOREIGN KEY ("ID_DOKLAD")
	  REFERENCES "DB_JT"."KP_DAT_DOKLAD" ("ID") ENABLE
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS  LOGGING 
  STORAGE(
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  PARTITION BY REFERENCE ("FK_KPZDROJDAT_DOKLAD2") 
 (PARTITION "KP_DAT_DOKLAD_2004" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2005" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2006" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2007" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2008" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2009" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2010" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2011" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2012" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2013" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2014" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2015" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2016" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2017" SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2018" SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2019" SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2020" SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2021" SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2022" SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS )  ENABLE ROW MOVEMENT ;
ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDAT" ADD CONSTRAINT "PK_KPZDROJDAT" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 262144 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "INDEXY"  ENABLE;


PROMPT Completed KP_DAT_DOKLADZDROJDAT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADZDROJDATAGREGACE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADZDROJDATAGREGACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADZDROJDATAGREGACE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADZDROJDATAGREGACE" 
   (	"ID" NUMBER(*,0), 
	"ID_DOKLAD" NUMBER(*,0), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UCET" VARCHAR2(15 BYTE), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"ID_CISRADEKTEXT" NUMBER(*,0), 
	"C_MENOVAPOZICE" CHAR(1 BYTE), 
	"C_UVEROVAPOZICE" CHAR(1 BYTE), 
	"ND_CASTKAMENA" NUMBER(18,2), 
	"ND_CASTKALOCAL" NUMBER(18,2), 
	"ND_CASTKACNB" NUMBER(18,2), 
	"C_LIST" CHAR(1 BYTE), 
	"S_EVIDOVATPROTISTRANU" VARCHAR2(4 BYTE), 
	"C_KONTOKORENT" CHAR(1 BYTE), 
	"ID_DOKLADPOLOZKA" NUMBER(*,0), 
	"S_UCETUNIF" VARCHAR2(15 BYTE), 
	"S_UCETORIGINAL" VARCHAR2(15 BYTE), 
	"ID_CISUCETUNIF" NUMBER(*,0), 
	"ID_MANUALTEXT" NUMBER(*,0), 
	"KATEGORIEKOEF" NUMBER(6,3), 
	"CUST_GROUP_CODE" VARCHAR2(5 BYTE), 
	"C_BANKA" CHAR(1 BYTE), 
	"ND_CISTAANGAZOVANOST" NUMBER(18,2), 
	"S_TYP_OBEZRETNOST_PORTFOLIA" VARCHAR2(3 BYTE), 
	"S_COUNTRY" VARCHAR2(3 BYTE), 
	"S_ESA" VARCHAR2(25 CHAR), 
	"S_NACE" VARCHAR2(25 CHAR), 
	"S_LEI" VARCHAR2(250 CHAR), 
	"S_SHADOW_BANK" VARCHAR2(1 BYTE), 
	"S_TYPE_OF_EXPOSURE" VARCHAR2(10 BYTE), 
	"S_COLL_REG_CODE" VARCHAR2(50 BYTE), 
	"C_DEFAULT_FLAG" CHAR(1 BYTE), 
	 CONSTRAINT "FK_KPZDROJDATAG_DOKLAD2" FOREIGN KEY ("ID_DOKLAD")
	  REFERENCES "DB_JT"."KP_DAT_DOKLAD" ("ID") ENABLE
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS  LOGGING 
  STORAGE(
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  PARTITION BY REFERENCE ("FK_KPZDROJDATAG_DOKLAD2") 
 (PARTITION "KP_DAT_DOKLAD_2004" SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2005" SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2006" SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2007" SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2008" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2009" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2010" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2011" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2012" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2013" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2014" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2015" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2016" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2017" SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2018" SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2019" SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2020" SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2021" SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2022" SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS )  ENABLE ROW MOVEMENT ;

   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKLADZDROJDATAGREGACE"."ID_MANUALTEXT" IS 'Sileny dodatek kvuli externe uctovanym spolecnostem, ktere doplnuji tuto tabulku o uverova a menova data. Pokud neni null tak je to radek takto nasilne importovan a odkazuje na text ktery ma byt zobrazen ve vystupni sestave u uverove/menove pozice. Je to nejaky text z radku bilance externiho ucetnictvi - neni to zadny text, ke kteremu bychom se dopracovali v KIS. Odkazuje do tabulky db_dsa.kp_s_manualText, ale cizi klic nedelam.';
   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKLADZDROJDATAGREGACE"."KATEGORIEKOEF" IS 'koeficient Rizikovost z ACTUATE nahrazuje koef v KTG_SPOLECNOST';
   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKLADZDROJDATAGREGACE"."CUST_GROUP_CODE" IS 'skupina protistrany';
   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKLADZDROJDATAGREGACE"."C_BANKA" IS 'banka / nebanka, A/N';
   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKLADZDROJDATAGREGACE"."ND_CISTAANGAZOVANOST" IS 'CISTA ANGAZOVANOST';
   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKLADZDROJDATAGREGACE"."S_SHADOW_BANK" IS 'atribut subjekt stinoveho bankovnictvi (Y/N)';
   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKLADZDROJDATAGREGACE"."S_TYPE_OF_EXPOSURE" IS 'atribut bude nabyvat hodnot Direct/Indirect';
   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKLADZDROJDATAGREGACE"."S_COLL_REG_CODE" IS 'atribut v DZA plneny z COLL_REP_CODE nebo COLL_REP_CAT_CODE, ktery bude nabyvat napr. hodnoty AKCIE, DLUHOPISY, FINANCNI UCTY';


PROMPT Completed KP_DAT_DOKLADZDROJDATAGREGACE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADZDROJDATAGRE_0728.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADZDROJDATAGRE_0728.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADZDROJDATAGRE_0728
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADZDROJDATAGRE_0728" 
   (	"ID" NUMBER(*,0), 
	"ID_DOKLAD" NUMBER(*,0), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UCET" VARCHAR2(15 BYTE), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"ID_CISRADEKTEXT" NUMBER(*,0), 
	"C_MENOVAPOZICE" CHAR(1 BYTE), 
	"C_UVEROVAPOZICE" CHAR(1 BYTE), 
	"ND_CASTKAMENA" NUMBER(18,2), 
	"ND_CASTKALOCAL" NUMBER(18,2), 
	"ND_CASTKACNB" NUMBER(18,2), 
	"C_LIST" CHAR(1 BYTE), 
	"S_EVIDOVATPROTISTRANU" VARCHAR2(4 BYTE), 
	"C_KONTOKORENT" CHAR(1 BYTE), 
	"ID_DOKLADPOLOZKA" NUMBER(*,0), 
	"S_UCETUNIF" VARCHAR2(15 BYTE), 
	"S_UCETORIGINAL" VARCHAR2(15 BYTE), 
	"ID_CISUCETUNIF" NUMBER(*,0), 
	"ID_MANUALTEXT" NUMBER(*,0), 
	"KATEGORIEKOEF" NUMBER(6,3), 
	"CUST_GROUP_CODE" VARCHAR2(5 BYTE), 
	"C_BANKA" CHAR(1 BYTE), 
	"ND_CISTAANGAZOVANOST" NUMBER(18,2)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_DOKLADZDROJDATAGRE_0728.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADZDROJDATAGR_BCK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADZDROJDATAGR_BCK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADZDROJDATAGR_BCK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADZDROJDATAGR_BCK" 
   (	"ID" NUMBER(*,0), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UCETUNIF" VARCHAR2(10 BYTE), 
	"S_UCETORIGINAL" VARCHAR2(10 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_DOKLADZDROJDATAGR_BCK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADZDROJDATAGR_VABA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADZDROJDATAGR_VABA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADZDROJDATAGR_VABA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADZDROJDATAGR_VABA" 
   (	"ID" NUMBER(*,0), 
	"ID_DOKLAD" NUMBER(*,0), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UCET" VARCHAR2(15 BYTE), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"ID_CISRADEKTEXT" NUMBER(*,0), 
	"C_MENOVAPOZICE" CHAR(1 BYTE), 
	"C_UVEROVAPOZICE" CHAR(1 BYTE), 
	"ND_CASTKAMENA" NUMBER(18,2), 
	"ND_CASTKALOCAL" NUMBER(18,2), 
	"ND_CASTKACNB" NUMBER(18,2), 
	"C_LIST" CHAR(1 BYTE), 
	"S_EVIDOVATPROTISTRANU" VARCHAR2(4 BYTE), 
	"C_KONTOKORENT" CHAR(1 BYTE), 
	"ID_DOKLADPOLOZKA" NUMBER(*,0), 
	"S_UCETUNIF" VARCHAR2(15 BYTE), 
	"S_UCETORIGINAL" VARCHAR2(15 BYTE), 
	"ID_CISUCETUNIF" NUMBER(*,0), 
	"ID_MANUALTEXT" NUMBER(*,0), 
	"KATEGORIEKOEF" NUMBER(6,3), 
	"CUST_GROUP_CODE" VARCHAR2(5 BYTE), 
	"C_BANKA" CHAR(1 BYTE), 
	"ND_CISTAANGAZOVANOST" NUMBER(18,2)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_DOKLADZDROJDATAGR_VABA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADZDROJDATMANUAL.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADZDROJDATMANUAL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADZDROJDATMANUAL
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADZDROJDATMANUAL" 
   (	"DOKLAD_DATUM" DATE, 
	"DOKLAD_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"ID_DOKLAD" NUMBER(*,0), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"ID_CISRADEKTEXT" NUMBER(*,0), 
	"C_MENOVAPOZICE" CHAR(1 BYTE), 
	"C_UVEROVAPOZICE" CHAR(1 BYTE), 
	"ND_CASTKAMENA" NUMBER(18,2), 
	"ND_CASTKALOCAL" NUMBER(18,2), 
	"ND_CASTKACNB" NUMBER(18,2), 
	"C_LIST" CHAR(1 BYTE), 
	"S_EVIDOVATPROTISTRANU" VARCHAR2(4 BYTE), 
	"C_KONTOKORENT" CHAR(1 BYTE), 
	"ID_DEFLISTBUNKA" NUMBER(*,0), 
	"ID_SUBKONSOLIDACE" NUMBER(*,0), 
	"ID_CISUCETUNIF" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_DOKLADZDROJDATMANUAL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADZDROJDAT_BCK_IFRS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADZDROJDAT_BCK_IFRS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADZDROJDAT_BCK_IFRS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADZDROJDAT_BCK_IFRS" 
   (	"ID" NUMBER(*,0), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UCETUNIF" VARCHAR2(10 BYTE), 
	"S_UCETORIGINAL" VARCHAR2(10 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_DOKLADZDROJDAT_BCK_IFRS.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADZDROJDAT_MEZANIN.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADZDROJDAT_MEZANIN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKLADZDROJDAT_MEZANIN
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKLADZDROJDAT_MEZANIN" 
   (	"ID" NUMBER(*,0), 
	"ID_DOKLAD" NUMBER(*,0), 
	"ID_DOKLADPOLOZKA" NUMBER(*,0), 
	"ID_EXTSYSTEM" VARCHAR2(20 BYTE), 
	"ID_EXTSYSTEM2" VARCHAR2(35 BYTE), 
	"C_EXTSYSTEM" CHAR(1 BYTE), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"C_STRANA" CHAR(1 BYTE), 
	"S_UCET" VARCHAR2(15 BYTE), 
	"ND_CASTKAMENA" NUMBER(18,2), 
	"ND_CASTKALOCAL" NUMBER(18,2), 
	"S_EXTPROTISTRANA" VARCHAR2(30 BYTE), 
	"S_EXTPROTISTRANA_EO" VARCHAR2(30 BYTE), 
	"S_EXTPROTISTRANA_BANKA" VARCHAR2(30 BYTE), 
	"S_EXTPROTISTRANA_EMITENT" VARCHAR2(15 BYTE), 
	"S_EXTPROTISTRANAICO" VARCHAR2(20 BYTE), 
	"S_EXTPROTISTRANAICO_EO" VARCHAR2(20 BYTE), 
	"S_EXTPROTISTRANAICO_BANKA" VARCHAR2(20 BYTE), 
	"S_EXTPROTISTRANAICO_EMITENT" VARCHAR2(10 BYTE), 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"DATUM" DATE, 
	"C_KONTOKORENT" CHAR(1 BYTE), 
	"KID" NUMBER(*,0), 
	"DOID" VARCHAR2(10 BYTE), 
	"PLATINST" VARCHAR2(10 BYTE), 
	"EMITENT_ID" NUMBER(*,0), 
	"BANKA_ID" NUMBER(*,0), 
	"FIRMA_ID" NUMBER(*,0), 
	"EO_ID" NUMBER(*,0), 
	"NUMBER0" VARCHAR2(20 BYTE), 
	"ID_PROTI_1" NUMBER(*,0), 
	"ID_PROTI_2" NUMBER(*,0), 
	"ID_PROTI_3" NUMBER(*,0), 
	"ID_PROTI_4" NUMBER(*,0), 
	"S_EVIDOVATPROTISTRANU" VARCHAR2(4 BYTE), 
	"C_MENOVAPOZICE" CHAR(1 BYTE), 
	"C_UVEROVAPOZICE" CHAR(1 BYTE), 
	"C_VYJIMKAPROTISTRANA" CHAR(1 BYTE), 
	"ID_KTGUCETNISPOLECNOSTUNIF" NUMBER(*,0), 
	"POCATECNISTAV" CHAR(1 BYTE), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"ID_KTGPROJEKT" NUMBER(*,0), 
	"ID_KTGODBOR" NUMBER(*,0), 
	"ID_TYPNASTROJE" NUMBER(*,0), 
	"XIDSL" NUMBER(*,0), 
	"C_TYPPORTFOLIO" CHAR(1 BYTE), 
	"ID_KTGCENNYPAPIR" NUMBER(*,0), 
	"S_FAKTURA" VARCHAR2(30 BYTE), 
	"PC_PROD_KIND" CHAR(3 BYTE), 
	"PC_PROD_TYPE" CHAR(3 BYTE), 
	"ID_EXTSYSTEM3" VARCHAR2(35 BYTE), 
	"S_UCETUNIF" VARCHAR2(15 BYTE), 
	"NL_REL" NUMBER(*,0), 
	"C_TYPTRANSAKCE" CHAR(1 BYTE), 
	"ID_TYPTRANSAKCE" NUMBER(*,0), 
	"S_UCETORIGINAL" VARCHAR2(15 BYTE), 
	"ID_CISUCETUNIF" NUMBER(*,0), 
	"DT_DATUMSPLATNOST" DATE, 
	"UCTOVANODNE" DATE, 
	"X_ISIT_BUDGET_ID" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_DOKLADZDROJDAT_MEZANIN.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TABLES/KP_DAT_DOKUMENT.sql: 'utf-8' codec can't decode byte 0xc8 in position 2430: invalid continuation byte


-- ============================================================================
-- Deploy: KP_DAT_DOKUMENTRADEK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKUMENTRADEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKUMENTRADEK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKUMENTRADEK" 
   (	"ID" NUMBER, 
	"ID_DOKUMENT" NUMBER, 
	"ID_ODBOR" NUMBER, 
	"ID_PROJEKT" NUMBER, 
	"ND_CASTKA" NUMBER(15,2), 
	"ID_ODBOROO" NUMBER, 
	"DT_SCHVALENOODBOR" DATE, 
	"ID_PROJEKTMAN" NUMBER, 
	"DT_SCHVALENOPROJEKT" DATE, 
	"ID_UCSPOLOO" NUMBER, 
	"DT_SCHVALENOUCSPOL" DATE, 
	"ID_UCSPOLTOP" NUMBER, 
	"DT_SCHVALENOTOP" DATE, 
	"S_KOMENTAR" VARCHAR2(100 BYTE), 
	"DT_DATUMPREFAKT" DATE, 
	"ID_PREFAKT" NUMBER, 
	"C_KPREFAKT" CHAR(1 BYTE), 
	"DT_DATUMZADANI" DATE DEFAULT sysdate, 
	"C_REMOVED" CHAR(1 BYTE) DEFAULT '0', 
	"C_ZOBJEDNAVKY" CHAR(1 BYTE) DEFAULT '0', 
	"ID_ZAMITNUTO" NUMBER, 
	"DT_ZAMITNUTO" DATE, 
	"S_ZAMITNUTO" VARCHAR2(100 BYTE), 
	"ID_DOKUMENTORIG" NUMBER, 
	"ID_ODBOROOREAL" NUMBER, 
	"ID_PROJEKTMANREAL" NUMBER, 
	"ID_UCSPOLOOREAL" NUMBER, 
	"ID_UCSPOLTOPREAL" NUMBER, 
	"ID_TYPTRANSAKCE" NUMBER(*,0), 
	"ND_OBJ_CASTKA_VOLNA" NUMBER(15,2), 
	"ID_OBJ_RADEK" NUMBER, 
	"ID_BANKAR" NUMBER, 
	"S_ISIT_BUDGET" VARCHAR2(20 BYTE), 
	"C_AKTIVACE_HNED" CHAR(1 BYTE), 
	"DT_AKTIVACE" DATE, 
	"S_SMLOUVA_CISLO" VARCHAR2(100 BYTE), 
	"ID_TYP_SW" NUMBER(8,2), 
	"ID_APLIKACE" NUMBER(8,2), 
	"ID_DRUH_NAKLADU" NUMBER(8,2)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKUMENTRADEK"."ID_BANKAR" IS 'Bankar na ktoreho pojde naklad';
   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKUMENTRADEK"."S_ISIT_BUDGET" IS 'id  podla excelu ISIT BUDGET';
   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKUMENTRADEK"."C_AKTIVACE_HNED" IS 'aktivace ihned v objednavke sposobi ze na FKT je datum aktivace = datum prijeti faktury';
   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKUMENTRADEK"."DT_AKTIVACE" IS 'datum aktivace smlouvy';
   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKUMENTRADEK"."ID_TYP_SW" IS 'novy,zhodnoceni, naklad...';
   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKUMENTRADEK"."ID_APLIKACE" IS 'odkaz na nazev aplikace v JTFG';
   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKUMENTRADEK"."ID_DRUH_NAKLADU" IS 'druh ISIT nakladu';


PROMPT Completed KP_DAT_DOKUMENTRADEK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKUMENTRADEK_10_2016.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKUMENTRADEK_10_2016.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKUMENTRADEK_10_2016
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKUMENTRADEK_10_2016" 
   (	"ID" NUMBER, 
	"ID_DOKUMENT" NUMBER, 
	"ID_ODBOR" NUMBER, 
	"ID_PROJEKT" NUMBER, 
	"ND_CASTKA" NUMBER(15,2), 
	"ID_ODBOROO" NUMBER, 
	"DT_SCHVALENOODBOR" DATE, 
	"ID_PROJEKTMAN" NUMBER, 
	"DT_SCHVALENOPROJEKT" DATE, 
	"ID_UCSPOLOO" NUMBER, 
	"DT_SCHVALENOUCSPOL" DATE, 
	"ID_UCSPOLTOP" NUMBER, 
	"DT_SCHVALENOTOP" DATE, 
	"S_KOMENTAR" VARCHAR2(100 BYTE), 
	"DT_DATUMPREFAKT" DATE, 
	"ID_PREFAKT" NUMBER, 
	"C_KPREFAKT" CHAR(1 BYTE), 
	"DT_DATUMZADANI" DATE, 
	"C_REMOVED" CHAR(1 BYTE), 
	"C_ZOBJEDNAVKY" CHAR(1 BYTE), 
	"ID_ZAMITNUTO" NUMBER, 
	"DT_ZAMITNUTO" DATE, 
	"S_ZAMITNUTO" VARCHAR2(100 BYTE), 
	"ID_DOKUMENTORIG" NUMBER, 
	"ID_ODBOROOREAL" NUMBER, 
	"ID_PROJEKTMANREAL" NUMBER, 
	"ID_UCSPOLOOREAL" NUMBER, 
	"ID_UCSPOLTOPREAL" NUMBER, 
	"ID_TYPTRANSAKCE" NUMBER(*,0), 
	"ND_OBJ_CASTKA_VOLNA" NUMBER(15,2), 
	"ID_OBJ_RADEK" NUMBER, 
	"ID_BANKAR" NUMBER, 
	"S_ISIT_BUDGET" VARCHAR2(20 BYTE), 
	"C_AKTIVACE_HNED" CHAR(1 BYTE), 
	"DT_AKTIVACE" DATE, 
	"S_SMLOUVA_CISLO" VARCHAR2(100 BYTE), 
	"ID_TYP_SW" NUMBER(8,2), 
	"ID_APLIKACE" NUMBER(8,2), 
	"ID_DRUH_NAKLADU" NUMBER(8,2)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_DOKUMENTRADEK_10_2016.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKUMENT_ODEMKNOUT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKUMENT_ODEMKNOUT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKUMENT_ODEMKNOUT
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKUMENT_ODEMKNOUT" 
   (	"ID_SL" NUMBER, 
	"USER_ID" NUMBER, 
	"USER_JT" VARCHAR2(100 BYTE), 
	"USER_NAME" VARCHAR2(100 BYTE), 
	"C_ODEMKNOUT" NUMBER DEFAULT (1), 
	"DT_DATUM_VLOZENI" DATE DEFAULT (sysdate), 
	"DT_DATUM_ZMENY" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKUMENT_ODEMKNOUT"."USER_ID" IS 'odkaz na KTG_APPUSERS..';
   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKUMENT_ODEMKNOUT"."C_ODEMKNOUT" IS '1=odomknute/nesynchronizovat  .  0 - moze synchronnizovat';
   COMMENT ON COLUMN "DB_JT"."KP_DAT_DOKUMENT_ODEMKNOUT"."DT_DATUM_VLOZENI" IS 'datum vlozenia do tejto tabublky';


PROMPT Completed KP_DAT_DOKUMENT_ODEMKNOUT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKUMENT_OLD_ASSET_1004.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKUMENT_OLD_ASSET_1004.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKUMENT_OLD_ASSET_1004
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKUMENT_OLD_ASSET_1004" 
   (	"ID" NUMBER, 
	"ID_CISDOKUMENT" NUMBER, 
	"ID_KTGUCETNISPOLECNOST" NUMBER, 
	"DT_DATUMZADANI" DATE, 
	"ID_ZADAVATEL" NUMBER, 
	"S_POPIS" VARCHAR2(500 BYTE), 
	"ID_TYPTRANSAKCE" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_PISEMNE" VARCHAR2(3 BYTE), 
	"C_TYPIZOVANATRAN" CHAR(1 BYTE), 
	"DT_TYPIZOVANAOD" DATE, 
	"DT_TYPIZOVANADO" DATE, 
	"DT_DATUMZAUCTOVANI" DATE, 
	"ID_SPOLECNOST" NUMBER, 
	"S_CISLODOKLADU" VARCHAR2(20 BYTE), 
	"DT_DATUMSPLATNOSTI" DATE, 
	"ID_APPUSER" NUMBER, 
	"ID_ZAUCT" NUMBER, 
	"S_PROTISTRANA" VARCHAR2(100 BYTE), 
	"ID_CISSTATUS" NUMBER, 
	"C_POKLADNITRANSAKCE" CHAR(1 BYTE), 
	"ID_GESTOR" NUMBER, 
	"DT_GESTORSCHVALENO" DATE, 
	"DT_POZADDATUMUHRADY" DATE, 
	"DT_REALDATUMUHRADY" DATE, 
	"DT_GESTORZAMITNUTO" DATE, 
	"S_GESTORZAMITNUTO" VARCHAR2(100 BYTE), 
	"DT_ZADAVATELZAMITNUTO" DATE, 
	"S_ZADAVATELZAMITNUTO" VARCHAR2(100 BYTE), 
	"ID_TYPIZLINK" NUMBER, 
	"S_DUVODZRUSENI" VARCHAR2(50 BYTE), 
	"ID_UCSPOLUHRADA" NUMBER, 
	"DT_ZAUCTUHRADA" DATE, 
	"ID_ZAUCTUHRADA" NUMBER, 
	"ID_TYPPRECENENI" NUMBER, 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UCET2" VARCHAR2(10 BYTE), 
	"C_DPH" CHAR(1 BYTE), 
	"ID_BUDGET" NUMBER(*,0), 
	"ID_TTDEVELOPER" NUMBER(*,0), 
	"ID_CISUHRADA" NUMBER(*,0), 
	"DT_UCETNIZAMITNUTO" DATE, 
	"S_UCETNIZAMITNUTO" VARCHAR2(100 BYTE), 
	"ID_KTGUCETNISPOLECNOST2" NUMBER(*,0), 
	"S_UCETB" VARCHAR2(10 BYTE), 
	"S_UCETB2" VARCHAR2(10 BYTE), 
	"CERPAT_REZERVU" VARCHAR2(1 BYTE), 
	"DT_NAVYSENI_SCHVALENO" DATE, 
	"DT_NAVYSENI_ZAMITNUTO" DATE, 
	"S_NAVYSENI_ZAMITNUTO" VARCHAR2(100 BYTE), 
	"ID_NAVYSENI_MB" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_DOKUMENT_OLD_ASSET_1004.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKUMENT_POKTRAN_2013.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_DOKUMENT_POKTRAN_2013.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_DOKUMENT_POKTRAN_2013
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_DOKUMENT_POKTRAN_2013" 
   (	"ID" NUMBER, 
	"ID_CISDOKUMENT" NUMBER, 
	"ID_KTGUCETNISPOLECNOST" NUMBER, 
	"DT_DATUMZADANI" DATE, 
	"ID_ZADAVATEL" NUMBER, 
	"S_POPIS" VARCHAR2(500 BYTE), 
	"ID_TYPTRANSAKCE" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_PISEMNE" VARCHAR2(3 BYTE), 
	"C_TYPIZOVANATRAN" CHAR(1 BYTE), 
	"DT_TYPIZOVANAOD" DATE, 
	"DT_TYPIZOVANADO" DATE, 
	"DT_DATUMZAUCTOVANI" DATE, 
	"ID_SPOLECNOST" NUMBER, 
	"S_CISLODOKLADU" VARCHAR2(20 BYTE), 
	"DT_DATUMSPLATNOSTI" DATE, 
	"ID_APPUSER" NUMBER, 
	"ID_ZAUCT" NUMBER, 
	"S_PROTISTRANA" VARCHAR2(100 BYTE), 
	"ID_CISSTATUS" NUMBER, 
	"C_POKLADNITRANSAKCE" CHAR(1 BYTE), 
	"ID_GESTOR" NUMBER, 
	"DT_GESTORSCHVALENO" DATE, 
	"DT_POZADDATUMUHRADY" DATE, 
	"DT_REALDATUMUHRADY" DATE, 
	"DT_GESTORZAMITNUTO" DATE, 
	"S_GESTORZAMITNUTO" VARCHAR2(100 BYTE), 
	"DT_ZADAVATELZAMITNUTO" DATE, 
	"S_ZADAVATELZAMITNUTO" VARCHAR2(100 BYTE), 
	"ID_TYPIZLINK" NUMBER, 
	"S_DUVODZRUSENI" VARCHAR2(50 BYTE), 
	"ID_UCSPOLUHRADA" NUMBER, 
	"DT_ZAUCTUHRADA" DATE, 
	"ID_ZAUCTUHRADA" NUMBER, 
	"ID_TYPPRECENENI" NUMBER, 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UCET2" VARCHAR2(10 BYTE), 
	"C_DPH" CHAR(1 BYTE), 
	"ID_BUDGET" NUMBER(*,0), 
	"ID_TTDEVELOPER" NUMBER(*,0), 
	"ID_CISUHRADA" NUMBER(*,0), 
	"DT_UCETNIZAMITNUTO" DATE, 
	"S_UCETNIZAMITNUTO" VARCHAR2(100 BYTE), 
	"ID_KTGUCETNISPOLECNOST2" NUMBER(*,0), 
	"S_UCETB" VARCHAR2(10 BYTE), 
	"S_UCETB2" VARCHAR2(10 BYTE), 
	"CERPAT_REZERVU" VARCHAR2(1 BYTE), 
	"DT_NAVYSENI_SCHVALENO" DATE, 
	"DT_NAVYSENI_ZAMITNUTO" DATE, 
	"S_NAVYSENI_ZAMITNUTO" VARCHAR2(100 BYTE), 
	"ID_NAVYSENI_MB" NUMBER, 
	"CISLOFA" VARCHAR2(20 BYTE), 
	"DATPRIJ" DATE, 
	"DATDPH" DATE, 
	"CASTKA" NUMBER(27,2), 
	"FEIS_PRENOS" CHAR(1 BYTE), 
	"DATODES" DATE, 
	"TYP_FKT" NUMBER(*,0), 
	"C_CAPEX_OPEX" VARCHAR2(1 BYTE), 
	"S_FEISTEXT" VARCHAR2(250 BYTE), 
	"DATVYSTAVENI" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_DOKUMENT_POKTRAN_2013.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_EVIADMINDODAVATEL.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_EVIADMINDODAVATEL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_EVIADMINDODAVATEL
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_EVIADMINDODAVATEL" 
   (	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"ND_CASTKANAKLADY" NUMBER(18,2), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"DT_DATUMZMENY" DATE DEFAULT sysdate, 
	"ID_EVIADMINSPOL" NUMBER(*,0), 
	"DT_DATUM" DATE DEFAULT trunc(sysdate,'Q'), 
	"ID_DOKUMENT" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_EVIADMINDODAVATEL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_EVIBANKY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_EVIBANKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_EVIBANKY
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_EVIBANKY" 
   (	"ID" NUMBER(*,0), 
	"IDBANKA" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"S_POZNAMKA" VARCHAR2(250 BYTE), 
	"ID_ADMINSPOLECNOST" NUMBER(*,0), 
	"C_NAVRH" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_EVIBANKY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_EVIDOIDENTIFIKACE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_EVIDOIDENTIFIKACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_EVIDOIDENTIFIKACE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_EVIDOIDENTIFIKACE" 
   (	"ID" NUMBER(*,0), 
	"ID_CISDOIDENTIFIKACE" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"S_POZNAMKA" VARCHAR2(250 BYTE), 
	"ID_ADMINSPOLECNOST" NUMBER(*,0), 
	"C_NAVRH" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_EVIDOIDENTIFIKACE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_EVIDOKUMENT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_EVIDOKUMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_EVIDOKUMENT
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_EVIDOKUMENT" 
   (	"ID" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"S_POZNAMKA" VARCHAR2(250 BYTE), 
	"ID_ADMINSPOLECNOST" NUMBER(*,0), 
	"C_NAVRH" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_EVIDOKUMENT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_EVIKOMISIONARSKESMLOUVY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_EVIKOMISIONARSKESMLOUVY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_EVIKOMISIONARSKESMLOUVY
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_EVIKOMISIONARSKESMLOUVY" 
   (	"ID" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"S_POZNAMKA" VARCHAR2(250 BYTE), 
	"ID_ADMINSPOLECNOST" NUMBER(*,0), 
	"C_NAVRH" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_EVIKOMISIONARSKESMLOUVY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_EVIKORESPONDENCE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_EVIKORESPONDENCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_EVIKORESPONDENCE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_EVIKORESPONDENCE" 
   (	"ID" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"S_POZNAMKA" VARCHAR2(250 BYTE), 
	"ID_ADMINSPOLECNOST" NUMBER(*,0), 
	"C_NAVRH" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_EVIKORESPONDENCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_EVIOBCHODNIREJSTRIK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_EVIOBCHODNIREJSTRIK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_EVIOBCHODNIREJSTRIK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_EVIOBCHODNIREJSTRIK" 
   (	"ID" NUMBER(*,0), 
	"ID_CISOBCHODNIREJSTRIK" NUMBER(*,0), 
	"DT_DATUM" DATE, 
	"ID_ADMINSPOLECNOST" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_EVIOBCHODNIREJSTRIK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_EVIZPLNOMOCNENI.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_EVIZPLNOMOCNENI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_EVIZPLNOMOCNENI
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_EVIZPLNOMOCNENI" 
   (	"ID" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"S_POZNAMKA" VARCHAR2(250 BYTE), 
	"ID_ADMINSPOLECNOST" NUMBER(*,0), 
	"C_NAVRH" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_EVIZPLNOMOCNENI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_GENEROVANICLOSED.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_GENEROVANICLOSED.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_GENEROVANICLOSED
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_GENEROVANICLOSED" 
   (	"ID" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(30 BYTE), 
	"DT_DATUM" DATE, 
	"S_ERRORMSG" VARCHAR2(1000 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_GENEROVANICLOSED.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_GENEROVANIZAMEK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_GENEROVANIZAMEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_GENEROVANIZAMEK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_GENEROVANIZAMEK" 
   (	"ID_CISDOKLAD" NUMBER, 
	"ID_KTGUCETNISPOLECNOST" NUMBER, 
	"DT_DATUM" DATE, 
	"ID_CISZAMEK" NUMBER, 
	"ID_KTGAPPUSER" NUMBER(*,0), 
	"DT_DATUMZMENY" DATE, 
	"C_ZAMCENO" CHAR(1 BYTE) DEFAULT '0', 
	"NL_KROK" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_GENEROVANIZAMEK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_GENZAMEKZAMITNUTI.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_GENZAMEKZAMITNUTI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_GENZAMEKZAMITNUTI
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_GENZAMEKZAMITNUTI" 
   (	"ID_CISDOKLAD" NUMBER, 
	"ID_KTGUCETNISPOLECNOST" NUMBER, 
	"DT_DATUM" DATE, 
	"ID_CISZAMEK" NUMBER, 
	"DT_TIMESTAMP" DATE DEFAULT sysdate, 
	"S_DUVOD" VARCHAR2(1000 BYTE), 
	"ID_KTGAPPUSER" NUMBER(*,0), 
	"NL_KROK" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_GENZAMEKZAMITNUTI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_GESTORVYJIMKY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_GESTORVYJIMKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_GESTORVYJIMKY
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_GESTORVYJIMKY" 
   (	"ID_KTGAPPUSER" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_GESTORVYJIMKY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_KAPITALSKUPINY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_KAPITALSKUPINY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_KAPITALSKUPINY
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_KAPITALSKUPINY" 
   (	"ID" NUMBER(*,0), 
	"ID_SKUPINAPOZICE" NUMBER(*,0), 
	"C_DYNAMICKY" CHAR(1 BYTE) DEFAULT '0', 
	"DT_PLATNOSTOD" DATE, 
	"ND_CASTKA" NUMBER(18,2)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_KAPITALSKUPINY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_KARTAPRAVIDLA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_KARTAPRAVIDLA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_KARTAPRAVIDLA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_KARTAPRAVIDLA" 
   (	"ID" NUMBER(*,0), 
	"ID_KARTATYP" NUMBER(*,0), 
	"S_TEXT" VARCHAR2(4000 BYTE), 
	"DT_PLATNOSTOD" DATE DEFAULT to_date('01.01.2004','DD.MM.YYYY'), 
	"DT_PLATNOSTDO" DATE DEFAULT to_date('01.01.2099','DD.MM.YYYY')
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_KARTAPRAVIDLA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_KARTASPOLZPRAVA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_KARTASPOLZPRAVA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_KARTASPOLZPRAVA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_KARTASPOLZPRAVA" 
   (	"ID" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"ID_KARTATYP" NUMBER(*,0), 
	"DT_DATUM" DATE, 
	"S_ZPRAVA" VARCHAR2(4000 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"DT_DATUMZMENY" DATE DEFAULT sysdate
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_KARTASPOLZPRAVA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_KARTATYP.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_KARTATYP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_KARTATYP
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_KARTATYP" 
   (	"ID" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(256 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_KARTATYP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_KARTAVYJIMKY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_KARTAVYJIMKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_KARTAVYJIMKY
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_KARTAVYJIMKY" 
   (	"ID" NUMBER(*,0), 
	"ID_KARTATYP" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"S_TEXT" VARCHAR2(4000 BYTE), 
	"DT_PLATNOSTOD" DATE DEFAULT to_date('01.01.2004','DD.MM.YYYY'), 
	"DT_PLATNOSTDO" DATE DEFAULT to_date('01.01.2099','DD.MM.YYYY')
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_KARTAVYJIMKY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_KONSOLIDACEFRONTA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_KONSOLIDACEFRONTA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_KONSOLIDACEFRONTA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_KONSOLIDACEFRONTA" 
   (	"ID" NUMBER(*,0), 
	"DATUM" DATE DEFAULT sysdate, 
	"S_STAV" VARCHAR2(15 BYTE), 
	"SESSION_ID" NUMBER(*,0), 
	"AIDKTGSUBKONSOLIDACE" NUMBER(*,0), 
	"ADATUM" DATE, 
	"AUZIVATEL" VARCHAR2(30 BYTE), 
	"S_SQLERROR" VARCHAR2(2048 BYTE), 
	"ID_KTGUCETNISKUPINA" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_KONSOLIDACEFRONTA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_MAJETKOVAUCAST.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_MAJETKOVAUCAST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_MAJETKOVAUCAST
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_MAJETKOVAUCAST" 
   (	"ID" NUMBER(*,0), 
	"ID_PARENT" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"ID_KTGFININVESTICEEMISE" NUMBER(*,0), 
	"S_UCET" VARCHAR2(12 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"ID_CISMUTYPTRANSAKCE" NUMBER(*,0), 
	"ID_CISMUZPUSOB" NUMBER(*,0), 
	"NL_POCETKUSU" NUMBER(17,4), 
	"S_MENATRANSAKCE" VARCHAR2(3 BYTE), 
	"ND_CENATRANSAKCEKUS" NUMBER(15,2), 
	"ND_OBJEMTRANSAKCE" NUMBER(15,2), 
	"ND_KURZ" NUMBER(10,6), 
	"S_MENAUCETNI" VARCHAR2(3 BYTE), 
	"ND_CENAUCETNIKUS" NUMBER(15,2), 
	"ND_OBJEMUCETNI" NUMBER(15,2), 
	"DT_ZMENA" DATE DEFAULT sysdate, 
	"S_UZIVATEL" VARCHAR2(20 BYTE), 
	"ID_KTGUCETNISPOLECNOSTKOUPENO" NUMBER(*,0), 
	"C_IGNOROVAT" CHAR(1 BYTE) DEFAULT '0'
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."KP_DAT_MAJETKOVAUCAST"."ID_KTGUCETNISPOLECNOSTKOUPENO" IS 'rika od koho se ta investice koupila.';


PROMPT Completed KP_DAT_MAJETKOVAUCAST.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_MANUALNIZDROJDAT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_MANUALNIZDROJDAT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_MANUALNIZDROJDAT
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_MANUALNIZDROJDAT" 
   (	"ID" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"ND_CASTKAMENA" NUMBER(18,2), 
	"ND_CASTKALOCAL" NUMBER(18,2), 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"DT_DATUM" DATE, 
	"ID_KTGUCETNISPOLECNOSTUNIF" NUMBER(*,0), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"ID_KTGPROJEKT" NUMBER(*,0), 
	"ID_KTGODBOR" NUMBER(*,0), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"C_SETNULL" CHAR(1 BYTE), 
	"C_TYP" CHAR(1 BYTE), 
	"ID_KTGPROJEKTOLD" NUMBER(*,0), 
	"ID_KTGODBOROLD" NUMBER(*,0), 
	"DT_DATUMPLATNOSTOD" DATE, 
	"DT_DATUMPLATNOSTDO" DATE, 
	"S_UCETORIGINAL" VARCHAR2(10 BYTE), 
	"ID_CISUCETUNIF" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_MANUALNIZDROJDAT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_MISTRANSAKCE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_MISTRANSAKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_MISTRANSAKCE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_MISTRANSAKCE" 
   (	"ID" NUMBER, 
	"ID_KTGUCETNISPOLECNOST" NUMBER, 
	"ND_CASTKAMENA" NUMBER(18,2), 
	"ND_CASTKALOCAL" NUMBER(18,2), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"C_STRANA" CHAR(1 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"DT_DATUM" DATE, 
	"ID_KTGSPOLECNOST" NUMBER, 
	"S_PROTISTRANA" VARCHAR2(100 BYTE), 
	"ID_KTGPROJEKT" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"ID_DOKUMENT" NUMBER, 
	"ID_DOKUMENTRADEK" NUMBER, 
	"ID_TYPTRANSAKCE" NUMBER(*,0), 
	"ID_CISUCETUNIF" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_MISTRANSAKCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_MNGSEGMENTBOSS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_MNGSEGMENTBOSS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_MNGSEGMENTBOSS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_MNGSEGMENTBOSS" 
   (	"ID" NUMBER(*,0), 
	"ID_MNGSEGMENT" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"ID_BOSS" NUMBER(*,0), 
	"ID_TOPMNG" NUMBER(*,0), 
	"ID_SPONZOR" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_MNGSEGMENTBOSS.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_MNGSEGMENTBOSS_BCK_SEG.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_MNGSEGMENTBOSS_BCK_SEG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_MNGSEGMENTBOSS_BCK_SEG
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_MNGSEGMENTBOSS_BCK_SEG" 
   (	"ID" NUMBER(*,0), 
	"ID_MNGSEGMENT" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"ID_BOSS" NUMBER(*,0), 
	"ID_TOPMNG" NUMBER(*,0), 
	"ID_SPONZOR" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_MNGSEGMENTBOSS_BCK_SEG.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_OPERACNIRIZIKO.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_OPERACNIRIZIKO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_OPERACNIRIZIKO
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_OPERACNIRIZIKO" 
   (	"ID" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"DT_DATUMOD" DATE, 
	"DT_DATUMDO" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_OPERACNIRIZIKO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_OPERACNIRIZIKODETAIL.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_OPERACNIRIZIKODETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_OPERACNIRIZIKODETAIL
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_OPERACNIRIZIKODETAIL" 
   (	"ID" NUMBER(*,0), 
	"ID_OPERACNIRIZIKO" NUMBER(*,0), 
	"ID_CISBUSINESSLINIE" NUMBER(*,0), 
	"ND_CASTKA" NUMBER(15,2), 
	"ND_CASTKADOKLAD" NUMBER(15,2)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_OPERACNIRIZIKODETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_PROJEKTCASHFLOW.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_PROJEKTCASHFLOW.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_PROJEKTCASHFLOW
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_PROJEKTCASHFLOW" 
   (	"ID" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"ID_TYP" NUMBER, 
	"DT_DATUM" DATE, 
	"ND_CASTKA" NUMBER(15,2), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_INOUT" VARCHAR2(3 BYTE), 
	"ID_INOUTTYP" NUMBER, 
	"S_POZNAMKA" VARCHAR2(150 BYTE), 
	"S_UZIVATEL" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_PROJEKTCASHFLOW.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_PROJEKTDOKLAD.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_PROJEKTDOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_PROJEKTDOKLAD
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_PROJEKTDOKLAD" 
   (	"ID" NUMBER(*,0), 
	"ID_KTGPROJEKT" NUMBER(*,0), 
	"DT_DATUM" DATE, 
	"DT_DATUMVYTVORENI" DATE DEFAULT sysdate, 
	"C_DENNI" CHAR(1 BYTE) DEFAULT '1'
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_PROJEKTDOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_PROJEKTDOKLADDENIK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_PROJEKTDOKLADDENIK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_PROJEKTDOKLADDENIK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_PROJEKTDOKLADDENIK" 
   (	"ID_PROJEKTDOKLAD" NUMBER(*,0), 
	"DT_DATUMZMENY" DATE DEFAULT sysdate, 
	"C_KOD" CHAR(1 BYTE), 
	"S_TEXT" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_PROJEKTDOKLADDENIK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_PROJEKTDOKLADPOLOZKA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_PROJEKTDOKLADPOLOZKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_PROJEKTDOKLADPOLOZKA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_PROJEKTDOKLADPOLOZKA" 
   (	"ID" NUMBER, 
	"ID_PROJEKTDOKLAD" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"ID_KTGUCETNISPOLECNOST" NUMBER, 
	"ID_DOKLAD" NUMBER(*,0), 
	"ID_DOKLADPOLOZKA" NUMBER(*,0), 
	"ND_CASTKA" NUMBER(18,2) DEFAULT 0, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"NL_PORADILIST" NUMBER, 
	"NL_SLOUPEC" NUMBER, 
	"NL_RADEK" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_PROJEKTDOKLADPOLOZKA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_PROJEKTMEMORANDUMZPRAVA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_PROJEKTMEMORANDUMZPRAVA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_PROJEKTMEMORANDUMZPRAVA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_PROJEKTMEMORANDUMZPRAVA" 
   (	"ID" NUMBER(*,0), 
	"ID_KTGPROJEKT" NUMBER, 
	"DT_DATUM" DATE, 
	"S_ZPRAVA" VARCHAR2(4000 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_PROJEKTMEMORANDUMZPRAVA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_PROJEKTNAKLADY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_PROJEKTNAKLADY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_PROJEKTNAKLADY
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_PROJEKTNAKLADY" 
   (	"ID" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"S_TYP" VARCHAR2(5 BYTE), 
	"ND_CASTKA" NUMBER(15,2), 
	"S_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_PROJEKTNAKLADY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_PROJEKTNAKLADYDETAIL.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_PROJEKTNAKLADYDETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_PROJEKTNAKLADYDETAIL
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_PROJEKTNAKLADYDETAIL" 
   (	"ID" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"S_TYP" VARCHAR2(5 BYTE), 
	"S_POPIS" VARCHAR2(256 BYTE), 
	"ND_CASTKA" NUMBER(15,2), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"DT_DATUM" DATE, 
	"S_SPOLECNOST" VARCHAR2(256 BYTE), 
	"S_DODAVATELE" VARCHAR2(256 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_PROJEKTNAKLADYDETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_SEGMENTZASTUP.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_SEGMENTZASTUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_SEGMENTZASTUP
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_SEGMENTZASTUP" 
   (	"ID" NUMBER(*,0), 
	"ID_KOHO" NUMBER(*,0), 
	"ID_KDO" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"NL_TYP" NUMBER(*,0), 
	"C_FWDEMAIL" CHAR(1 BYTE) DEFAULT '0'
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_SEGMENTZASTUP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_SPOLECNOSTLIST.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_SPOLECNOSTLIST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_SPOLECNOSTLIST
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_SPOLECNOSTLIST" 
   (	"ID" NUMBER(*,0), 
	"ID_APPUSER" NUMBER(*,0), 
	"S_NAZEV" VARCHAR2(50 BYTE), 
	"C_SDILENE" CHAR(1 BYTE) DEFAULT '1'
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_SPOLECNOSTLIST.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_SPOLECNOSTLISTDETAIL.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_SPOLECNOSTLISTDETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_SPOLECNOSTLISTDETAIL
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_SPOLECNOSTLISTDETAIL" 
   (	"ID" NUMBER(*,0), 
	"ID_SPOLECNOSTLIST" NUMBER(*,0), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE DEFAULT to_date('01.01.2004','DD.MM.YYYY'), 
	"DT_PLATNOSTDO" DATE DEFAULT to_date('01.01.2099','DD.MM.YYYY')
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_SPOLECNOSTLISTDETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_UVER.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_UVER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_UVER
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_UVER" 
   (	"ID" NUMBER(*,0), 
	"DATUM" DATE, 
	"ID_KTGPROJEKT" NUMBER(*,0), 
	"ID_KTGODBOR" NUMBER(*,0), 
	"ID_TYPKATEGORIE" NUMBER(*,0), 
	"TYPKATEGORIE" VARCHAR2(64 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"ND_CASTKAMENA" NUMBER(18,2), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKACZK" NUMBER(18,2), 
	"ND_UROK" NUMBER(18,2), 
	"ID_EXTSYSTEM" VARCHAR2(20 BYTE), 
	"ID_EXTSYSTEM2" VARCHAR2(35 BYTE), 
	"DT_OPENDATE" DATE, 
	"DT_ENDDATE" DATE, 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"ID_DOKLAD" NUMBER(*,0), 
	"ND_CASTKAMENA_CR" NUMBER(18,2), 
	"DT_PLATNOSTOD_CR" DATE, 
	"DT_PLATNOSTDO_CR" DATE, 
	"S_UCET_CR" VARCHAR2(20 BYTE), 
	"CLENJTFGKONS" CHAR(1 BYTE), 
	"S_NUMBER0" VARCHAR2(30 BYTE), 
	"KO" VARCHAR2(50 BYTE), 
	"SPRAVCE" VARCHAR2(50 BYTE), 
	"SCORINGREF_1" VARCHAR2(40 BYTE), 
	"KLASIFIKACE" VARCHAR2(40 BYTE), 
	"AVAIL_KONTOKORENT" NUMBER(18,2), 
	"DOC_DESCRIPTION" VARCHAR2(250 BYTE), 
	"ND_CASTKACZK_CR" NUMBER(18,2)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_UVER.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_UVERMANUAL.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_UVERMANUAL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_UVERMANUAL
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_UVERMANUAL" 
   (	"ID" NUMBER, 
	"ID_EXTSYSTEM" VARCHAR2(20 BYTE), 
	"ID_EXTSYSTEM2" VARCHAR2(35 BYTE), 
	"ID_TYPKATEGORIE" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_UVERMANUAL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_VAZBYZAMEK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_VAZBYZAMEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_VAZBYZAMEK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_VAZBYZAMEK" 
   (	"ID_CISDOKLAD" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOSTFROM" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOSTTO" NUMBER(*,0), 
	"ID_KTGUCETNISKUPINA" NUMBER(*,0), 
	"DT_DATUM" DATE, 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"DT_DATUMZMENY" DATE DEFAULT SYSDATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_VAZBYZAMEK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_VYJIMKYZAMYKANITOP.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DAT_VYJIMKYZAMYKANITOP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DAT_VYJIMKYZAMYKANITOP
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DAT_VYJIMKYZAMYKANITOP" 
   (	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"DT_DATUM" DATE, 
	"KVARTAL" DATE DEFAULT trunc(add_months(sysdate,-3),'q')
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DAT_VYJIMKYZAMYKANITOP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_ACC_JT2PPF.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DEF_ACC_JT2PPF.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DEF_ACC_JT2PPF
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DEF_ACC_JT2PPF" 
   (	"ID" NUMBER, 
	"JT_ACC" VARCHAR2(20 BYTE), 
	"JT_INFO" VARCHAR2(200 BYTE), 
	"PPF_ACC" NUMBER, 
	"PPF_INFO" VARCHAR2(200 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DEF_ACC_JT2PPF.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_ACC_JT2PPF_BCK2.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DEF_ACC_JT2PPF_BCK2.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DEF_ACC_JT2PPF_BCK2
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DEF_ACC_JT2PPF_BCK2" 
   (	"ID" NUMBER, 
	"JT_ACC" VARCHAR2(20 BYTE), 
	"JT_INFO" VARCHAR2(200 BYTE), 
	"PPF_ACC" NUMBER, 
	"PPF_INFO" VARCHAR2(200 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DEF_ACC_JT2PPF_BCK2.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_ACC_JT2PPF_BCK3.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DEF_ACC_JT2PPF_BCK3.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DEF_ACC_JT2PPF_BCK3
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DEF_ACC_JT2PPF_BCK3" 
   (	"ID" NUMBER, 
	"JT_ACC" VARCHAR2(20 BYTE), 
	"JT_INFO" VARCHAR2(200 BYTE), 
	"PPF_ACC" NUMBER, 
	"PPF_INFO" VARCHAR2(200 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DEF_ACC_JT2PPF_BCK3.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_ACC_JT2PPF_BCK4.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DEF_ACC_JT2PPF_BCK4.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DEF_ACC_JT2PPF_BCK4
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DEF_ACC_JT2PPF_BCK4" 
   (	"ID" NUMBER, 
	"JT_ACC" VARCHAR2(20 BYTE), 
	"JT_INFO" VARCHAR2(200 BYTE), 
	"PPF_ACC" NUMBER, 
	"PPF_INFO" VARCHAR2(200 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DEF_ACC_JT2PPF_BCK4.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_ACC_JT2PPF_BCK5.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DEF_ACC_JT2PPF_BCK5.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DEF_ACC_JT2PPF_BCK5
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DEF_ACC_JT2PPF_BCK5" 
   (	"ID" NUMBER, 
	"JT_ACC" VARCHAR2(20 BYTE), 
	"JT_INFO" VARCHAR2(200 BYTE), 
	"PPF_ACC" NUMBER, 
	"PPF_INFO" VARCHAR2(200 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DEF_ACC_JT2PPF_BCK5.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_BUDGETMUSTEK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DEF_BUDGETMUSTEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DEF_BUDGETMUSTEK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DEF_BUDGETMUSTEK" 
   (	"ID" NUMBER, 
	"ID_CISSUBJECT" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"S_UCET" VARCHAR2(10 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DEF_BUDGETMUSTEK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_BUNKAVYPOCET.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DEF_BUNKAVYPOCET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DEF_BUNKAVYPOCET
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DEF_BUNKAVYPOCET" 
   (	"ID_CISDOKLAD" NUMBER, 
	"NL_PORADILIST" NUMBER, 
	"NL_RADEK" NUMBER, 
	"NL_DILCIPORADILIST" NUMBER, 
	"NL_DILCIRADEK" NUMBER, 
	"S_AKCE" VARCHAR2(10 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DEF_BUNKAVYPOCET.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_DEVELOPERSPOLECNOST.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DEF_DEVELOPERSPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DEF_DEVELOPERSPOLECNOST
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DEF_DEVELOPERSPOLECNOST" 
   (	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DEF_DEVELOPERSPOLECNOST.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TABLES/KP_DEF_DOKLAD.sql: 'utf-8' codec can't decode byte 0xe1 in position 669: invalid continuation byte


-- ============================================================================
-- Deploy: KP_DEF_KAPITALOVKADUPLICITY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DEF_KAPITALOVKADUPLICITY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DEF_KAPITALOVKADUPLICITY
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DEF_KAPITALOVKADUPLICITY" 
   (	"ID" NUMBER(*,0), 
	"DT_DATUMDOKLAD" DATE, 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"ID_KTGTYPNASTROJE" NUMBER(*,0), 
	"S_PRODUKTUCET" VARCHAR2(21 BYTE), 
	"C_IGNOROVAT" CHAR(1 BYTE), 
	"S_POZNAMKA" VARCHAR2(255 BYTE), 
	"DT_ZALOZENO" DATE DEFAULT sysdate
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DEF_KAPITALOVKADUPLICITY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_KATEGORIE2TYP.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DEF_KATEGORIE2TYP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DEF_KATEGORIE2TYP
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DEF_KATEGORIE2TYP" 
   (	"ID_CISTYPSUBJECT" NUMBER(*,0), 
	"S_KODKATEGORIEPROTISTRANA" CHAR(3 BYTE), 
	 CONSTRAINT "PK_KPDEFKATEG2TYP" PRIMARY KEY ("ID_CISTYPSUBJECT", "S_KODKATEGORIEPROTISTRANA") ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  ORGANIZATION INDEX NOCOMPRESS PCTFREE 10 INITRANS 2 MAXTRANS 255 LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS 
 PCTTHRESHOLD 50;


PROMPT Completed KP_DEF_KATEGORIE2TYP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_KONTROLAMAJETKOVAUCAST.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DEF_KONTROLAMAJETKOVAUCAST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DEF_KONTROLAMAJETKOVAUCAST
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DEF_KONTROLAMAJETKOVAUCAST" 
   (	"ID" NUMBER(*,0), 
	"ID_CISSUBJECT" NUMBER(*,0), 
	"S_UCETMASKA" VARCHAR2(10 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"S_UZIVATEL" VARCHAR2(20 BYTE), 
	"DT_LAST_MODIFY" DATE DEFAULT sysdate
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DEF_KONTROLAMAJETKOVAUCAST.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_LISTBUNKA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DEF_LISTBUNKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DEF_LISTBUNKA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DEF_LISTBUNKA" 
   (	"ID" NUMBER(*,0), 
	"ID_CISLIST" NUMBER(*,0), 
	"ID_CISRADEKTYP" NUMBER(*,0), 
	"NL_RADEK" NUMBER(*,0), 
	"NL_SLOUPEC" NUMBER(*,0), 
	"C_TYP" CHAR(1 BYTE), 
	"S_ZKRATKA" VARCHAR2(10 BYTE), 
	"S_CARTESISCODEROW" VARCHAR2(15 BYTE), 
	"S_CARTESISCODECOLUMN" VARCHAR2(4 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 262144 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DEF_LISTBUNKA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_LISTBUNKANASTROJ.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DEF_LISTBUNKANASTROJ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DEF_LISTBUNKANASTROJ
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DEF_LISTBUNKANASTROJ" 
   (	"ID" NUMBER, 
	"ID_TYPNASTROJE" NUMBER, 
	"ID_DEFLISTBUNKA" NUMBER, 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"C_KONTROLABANKA" CHAR(1 BYTE), 
	"C_KONTROLAMIMOBANKU" CHAR(1 BYTE), 
	"ID_PRODUKTDRUH" VARCHAR2(30 BYTE), 
	"ID_PRODUKTTYP" VARCHAR2(30 BYTE), 
	"ID_KTGDOKLAD" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DEF_LISTBUNKANASTROJ.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_LISTBUNKASUM.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DEF_LISTBUNKASUM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DEF_LISTBUNKASUM
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DEF_LISTBUNKASUM" 
   (	"ID" NUMBER(*,0), 
	"ID_BUNKASUM" NUMBER(*,0), 
	"ID_BUNKA" NUMBER(*,0), 
	"C_TYP" CHAR(1 BYTE), 
	"NL_KOEFICIENT" NUMBER(1,0) DEFAULT 1
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DEF_LISTBUNKASUM.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_LISTBUNKASUM_TMP.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DEF_LISTBUNKASUM_TMP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DEF_LISTBUNKASUM_TMP
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DEF_LISTBUNKASUM_TMP" 
   (	"ID" NUMBER(*,0), 
	"ID_BUNKASUM" NUMBER(*,0), 
	"ID_BUNKA" NUMBER(*,0), 
	"C_TYP" CHAR(1 BYTE), 
	"NL_KOEFICIENT" NUMBER(1,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DEF_LISTBUNKASUM_TMP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_LISTBUNKASUM_TST89.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DEF_LISTBUNKASUM_TST89.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DEF_LISTBUNKASUM_TST89
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DEF_LISTBUNKASUM_TST89" 
   (	"ID" NUMBER(*,0), 
	"ID_BUNKASUM" NUMBER(*,0), 
	"ID_BUNKA" NUMBER(*,0), 
	"C_TYP" CHAR(1 BYTE), 
	"NL_KOEFICIENT" NUMBER(1,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DEF_LISTBUNKASUM_TST89.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_LISTBUNKAUCET.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DEF_LISTBUNKAUCET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DEF_LISTBUNKAUCET
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET" 
   (	"ID" NUMBER(*,0), 
	"ID_DEFLISTBUNKA" NUMBER(*,0), 
	"S_UCET" VARCHAR2(15 BYTE), 
	"S_UCET_MINUS" VARCHAR2(15 BYTE), 
	"C_UCETSUMA" CHAR(1 BYTE), 
	"ND_KOEFICIENT" NUMBER(10,6) DEFAULT 1, 
	"C_VALIDOVATMASKU" CHAR(1 BYTE) DEFAULT '1', 
	"ID_CISLIST" NUMBER(*,0), 
	"S_EVIDOVATPROTISTRANU" VARCHAR2(4 BYTE) DEFAULT '0000', 
	"C_MENOVAPOZICE" CHAR(1 BYTE), 
	"C_UVEROVAPOZICE" CHAR(1 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"S_UZIVATEL" VARCHAR2(20 BYTE), 
	"ID_PARENT" NUMBER(*,0), 
	"DT_LAST_MODIFY" DATE DEFAULT sysdate, 
	"ID_KTGDOKLAD" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 393216 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."KP_DEF_LISTBUNKAUCET"."ID_PARENT" IS 'kdyz se ukoncuje platnost tak si porad nese odkaz na prvni puvodni zaznam aby se podle toho dala selectovat historie zmen platnosti';


PROMPT Completed KP_DEF_LISTBUNKAUCET.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_LISTBUNKAUCET_BAK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DEF_LISTBUNKAUCET_BAK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DEF_LISTBUNKAUCET_BAK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET_BAK" 
   (	"ID" NUMBER(*,0), 
	"ID_DEFLISTBUNKA" NUMBER(*,0), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UCET_MINUS" VARCHAR2(10 BYTE), 
	"C_UCETSUMA" CHAR(1 BYTE), 
	"ND_KOEFICIENT" NUMBER(10,6), 
	"C_VALIDOVATMASKU" CHAR(1 BYTE), 
	"ID_CISLIST" NUMBER(*,0), 
	"S_EVIDOVATPROTISTRANU" VARCHAR2(4 BYTE), 
	"C_MENOVAPOZICE" CHAR(1 BYTE), 
	"C_UVEROVAPOZICE" CHAR(1 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"S_UZIVATEL" VARCHAR2(20 BYTE), 
	"ID_PARENT" NUMBER(*,0), 
	"DT_LAST_MODIFY" DATE, 
	"ID_KTGDOKLAD" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DEF_LISTBUNKAUCET_BAK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_LISTBUNKAUCET_BCK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DEF_LISTBUNKAUCET_BCK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DEF_LISTBUNKAUCET_BCK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET_BCK" 
   (	"ID" NUMBER(*,0), 
	"ID_DEFLISTBUNKA" NUMBER(*,0), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UCET_MINUS" VARCHAR2(10 BYTE), 
	"C_UCETSUMA" CHAR(1 BYTE), 
	"ND_KOEFICIENT" NUMBER(10,6), 
	"C_VALIDOVATMASKU" CHAR(1 BYTE), 
	"ID_CISLIST" NUMBER(*,0), 
	"S_EVIDOVATPROTISTRANU" VARCHAR2(4 BYTE), 
	"C_MENOVAPOZICE" CHAR(1 BYTE), 
	"C_UVEROVAPOZICE" CHAR(1 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"S_UZIVATEL" VARCHAR2(20 BYTE), 
	"ID_PARENT" NUMBER(*,0), 
	"DT_LAST_MODIFY" DATE, 
	"ID_KTGDOKLAD" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DEF_LISTBUNKAUCET_BCK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_NASTROJOPERACE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DEF_NASTROJOPERACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DEF_NASTROJOPERACE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DEF_NASTROJOPERACE" 
   (	"ID" NUMBER(*,0), 
	"ID_KTGTYPNASTROJE" NUMBER(*,0), 
	"ID_CISSUBJECT" NUMBER(*,0), 
	"ID_KTGTYPOPERACE" NUMBER(*,0), 
	"S_PCPRODKIND" CHAR(3 BYTE), 
	"S_PCPRODTYPE" CHAR(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DEF_NASTROJOPERACE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_QUESTORVAZBAPRODUCT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DEF_QUESTORVAZBAPRODUCT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DEF_QUESTORVAZBAPRODUCT
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DEF_QUESTORVAZBAPRODUCT" 
   (	"ID" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"S_PRODUCT_1" VARCHAR2(11 BYTE), 
	"S_PRODUCT_2" VARCHAR2(11 BYTE), 
	 CONSTRAINT "PK_KP_DEF_QUESTORVAZBAPRODUCT" PRIMARY KEY ("ID_KTGUCETNISPOLECNOST", "S_PRODUCT_1", "S_PRODUCT_2") ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  ORGANIZATION INDEX NOCOMPRESS PCTFREE 10 INITRANS 2 MAXTRANS 255 LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS 
 PCTTHRESHOLD 50;


PROMPT Completed KP_DEF_QUESTORVAZBAPRODUCT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_UCET2UCETUNIF.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DEF_UCET2UCETUNIF.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DEF_UCET2UCETUNIF
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DEF_UCET2UCETUNIF" 
   (	"ID" NUMBER(*,0), 
	"ID_CISUCETUNIF" NUMBER(*,0), 
	"S_UCETPRIMSYSTEM" VARCHAR2(10 BYTE), 
	"ID_CISSUBJECT" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"C_UCETSUMA" CHAR(1 BYTE), 
	"S_EVIDOVATPROTISTRANU" VARCHAR2(4 BYTE) DEFAULT '0000', 
	"C_TESTOVATMAJUCAST" CHAR(1 BYTE) DEFAULT '0'
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."KP_DEF_UCET2UCETUNIF"."C_TESTOVATMAJUCAST" IS 'ridi zda se bude provadet kontrola na existenci manualnich transakci, ktere maji byt nastaveny kvuli majetkovym ucastem.';
   COMMENT ON TABLE "DB_JT"."KP_DEF_UCET2UCETUNIF"  IS 'Prevodni tabulka, kde jsou definovana pravidla pro prevod uctu z primarniho systemu na ucet unifikovany';


PROMPT Completed KP_DEF_UCET2UCETUNIF.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_UCETBUSINESSLINIE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DEF_UCETBUSINESSLINIE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DEF_UCETBUSINESSLINIE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DEF_UCETBUSINESSLINIE" 
   (	"ID" NUMBER(*,0), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"ID_CISBUSINESSLINIE" NUMBER(*,0), 
	"ID_CISSUBJECT" NUMBER(*,0), 
	"C_TYPOSOBY" CHAR(1 BYTE) DEFAULT 'C'
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DEF_UCETBUSINESSLINIE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_UCETPORTFOLIO.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DEF_UCETPORTFOLIO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DEF_UCETPORTFOLIO
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DEF_UCETPORTFOLIO" 
   (	"ID" NUMBER, 
	"ID_KTGUCETNISPOLECNOST" NUMBER, 
	"S_UCET" VARCHAR2(10 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DEF_UCETPORTFOLIO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_UCETVAZBAUCET.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DEF_UCETVAZBAUCET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DEF_UCETVAZBAUCET
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DEF_UCETVAZBAUCET" 
   (	"ID" NUMBER(*,0), 
	"ID_KTGDOKLAD" NUMBER(*,0), 
	"S_UCET_1" VARCHAR2(10 BYTE), 
	"S_UCET_2" VARCHAR2(10 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"S_POPIS" VARCHAR2(256 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"DT_ZMENA" DATE DEFAULT sysdate, 
	"ID_TYP" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DEF_UCETVAZBAUCET.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_UNIFUCETBEZZARAZENI.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DEF_UNIFUCETBEZZARAZENI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DEF_UNIFUCETBEZZARAZENI
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DEF_UNIFUCETBEZZARAZENI" 
   (	"ID_KTGDOKLAD" NUMBER(*,0), 
	"ID_CISUCETUNIF" NUMBER(*,0), 
	 CONSTRAINT "PK_KPDEFUNIFUCETBEZZARAZENI" PRIMARY KEY ("ID_KTGDOKLAD", "ID_CISUCETUNIF") ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  ORGANIZATION INDEX NOCOMPRESS PCTFREE 10 INITRANS 2 MAXTRANS 255 LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS 
 PCTTHRESHOLD 50;


PROMPT Completed KP_DEF_UNIFUCETBEZZARAZENI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_VYJIMKAUCETPRODUKT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_DEF_VYJIMKAUCETPRODUKT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_DEF_VYJIMKAUCETPRODUKT
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_DEF_VYJIMKAUCETPRODUKT" 
   (	"ID_CISSUBJECT" NUMBER(*,0), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_POPIS" VARCHAR2(256 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_DEF_VYJIMKAUCETPRODUKT.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TABLES/KP_EMAIL_PARAM.sql: 'utf-8' codec can't decode byte 0xed in position 688: invalid continuation byte


-- ============================================================================
-- Deploy: KP_EMAIL_PARAM_06_2021.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_EMAIL_PARAM_06_2021.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_EMAIL_PARAM_06_2021
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_EMAIL_PARAM_06_2021" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(50 BYTE), 
	"C_POVOLENO" CHAR(1 BYTE), 
	"NL_POCETDNI" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_EMAIL_PARAM_06_2021.sql
PROMPT


-- ============================================================================
-- Deploy: KP_EMAIL_PARAM_BCK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_EMAIL_PARAM_BCK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_EMAIL_PARAM_BCK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_EMAIL_PARAM_BCK" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(50 BYTE), 
	"C_POVOLENO" CHAR(1 BYTE), 
	"NL_POCETDNI" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_EMAIL_PARAM_BCK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KALENDARAKCI.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KALENDARAKCI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KALENDARAKCI
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KALENDARAKCI" 
   (	"ID" NUMBER, 
	"S_DEN" VARCHAR2(15 BYTE), 
	"C_POSILATEMAILY" CHAR(1 BYTE) DEFAULT '0'
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KALENDARAKCI.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TABLES/KP_KTG_DOKLAD.sql: 'utf-8' codec can't decode byte 0xe1 in position 838: invalid continuation byte


-- ============================================================================
-- Deploy: KP_KTG_DOKLADMAJUCASTVYJIMKA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_DOKLADMAJUCASTVYJIMKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_DOKLADMAJUCASTVYJIMKA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_DOKLADMAJUCASTVYJIMKA" 
   (	"ID" NUMBER(*,0), 
	"ID_KTGDOKLAD" NUMBER(*,0), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_POPIS" VARCHAR2(256 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"DT_ZMENA" DATE DEFAULT sysdate
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_DOKLADMAJUCASTVYJIMKA.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TABLES/KP_KTG_EMAILZPRAVY.sql: 'utf-8' codec can't decode byte 0x9e in position 635: invalid start byte


-- ============================================================================
-- Deploy: KP_KTG_EMAILZPRAVY_BCK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_EMAILZPRAVY_BCK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_EMAILZPRAVY_BCK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_EMAILZPRAVY_BCK" 
   (	"ID_MSGTYPE" NUMBER, 
	"ID_KTGAPPUSER" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_EMAILZPRAVY_BCK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_EVIADMINSPOLECNOST.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_EVIADMINSPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_EVIADMINSPOLECNOST
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_EVIADMINSPOLECNOST" 
   (	"ID" NUMBER(*,0), 
	"S_NAZEV" VARCHAR2(128 BYTE), 
	"S_STAT" VARCHAR2(3 BYTE), 
	"ID_EXTERNIADMIN" NUMBER(*,0), 
	"ID_ADMINISTRATOR" NUMBER(*,0), 
	"ID_STATUS" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"S_ICO" VARCHAR2(20 BYTE), 
	"DT_DATUMZALOZENI" DATE, 
	"C_NAVRH" CHAR(1 BYTE), 
	"S_NAZEVNAVRH" VARCHAR2(128 BYTE), 
	"S_ICONAVRH" VARCHAR2(20 BYTE), 
	"ID_ADMINISTRATORNAVRH" NUMBER(*,0), 
	"ID_TYPSPOL" NUMBER(*,0) DEFAULT 1, 
	"S_ICODOKUMENTY" VARCHAR2(25 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_EVIADMINSPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_EVIEXTERNIADMIN.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_EVIEXTERNIADMIN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_EVIEXTERNIADMIN
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_EVIEXTERNIADMIN" 
   (	"ID" NUMBER(*,0), 
	"S_NAZEV" VARCHAR2(50 BYTE), 
	"S_STAT" VARCHAR2(3 BYTE), 
	"S_POZNAMKA" VARCHAR2(250 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_EVIEXTERNIADMIN.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_EVISIDLO.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_EVISIDLO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_EVISIDLO
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_EVISIDLO" 
   (	"ID" NUMBER(*,0), 
	"S_ULICE" VARCHAR2(100 BYTE), 
	"S_MESTO" VARCHAR2(50 BYTE), 
	"S_PSC" VARCHAR2(10 BYTE), 
	"S_STAT" VARCHAR2(3 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"ID_ADMINSPOLECNOST" NUMBER(*,0), 
	"C_NAVRH" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_EVISIDLO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_EVISTATUTARNIZASTUPCE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_EVISTATUTARNIZASTUPCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_EVISTATUTARNIZASTUPCE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_EVISTATUTARNIZASTUPCE" 
   (	"ID" NUMBER(*,0), 
	"ID_TYP" NUMBER(*,0), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"S_POZNAMKA" VARCHAR2(250 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"C_SPOJOVATVAZBY" CHAR(1 BYTE), 
	"ID_ADMINSPOLECNOST" NUMBER(*,0), 
	"C_NAVRH" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_EVISTATUTARNIZASTUPCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_EXTERNIRATING.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_EXTERNIRATING.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_EXTERNIRATING
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_EXTERNIRATING" 
   (	"ID" NUMBER(*,0), 
	"NL_KOD" NUMBER(*,0), 
	"S_NAZEV" VARCHAR2(255 BYTE), 
	"S_POPIS" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_EXTERNIRATING.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_FINANCNIINVESTICE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_FINANCNIINVESTICE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_FINANCNIINVESTICE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_FINANCNIINVESTICE" 
   (	"ID" NUMBER(*,0), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"DT_ZMENA" DATE DEFAULT sysdate, 
	"S_UZIVATEL" VARCHAR2(20 BYTE), 
	"S_ISIN" VARCHAR2(13 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_FINANCNIINVESTICE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_FININVESTICEEMISE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_FININVESTICEEMISE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_FININVESTICEEMISE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_FININVESTICEEMISE" 
   (	"ID" NUMBER(*,0), 
	"ID_KTGFINANCNIINVESTICE" NUMBER(*,0), 
	"ID_PARENT" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"NL_POCETKUSU" NUMBER(*,0), 
	"NL_NOMINAL" NUMBER(17,4), 
	"ND_ZAKLADNIJMENI" NUMBER(15,2), 
	"DT_ZMENA" DATE DEFAULT sysdate, 
	"S_UZIVATEL" VARCHAR2(20 BYTE), 
	"C_INVESTICE" CHAR(1 BYTE) DEFAULT 'F', 
	"C_NENULOVY" CHAR(1 BYTE) DEFAULT '1'
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_FININVESTICEEMISE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_IFRSPRAVIDLO.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_IFRSPRAVIDLO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_IFRSPRAVIDLO
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLO" 
   (	"ID" NUMBER(*,0), 
	"ID_PARENT" NUMBER(*,0), 
	"ID_PORADI" NUMBER(*,0), 
	"ID_CISIFRSTYPPRAVIDLO" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"S_POZNAMKA" VARCHAR2(128 BYTE), 
	"C_VALIDNI" CHAR(1 BYTE), 
	"S_ERRORHLASKA" VARCHAR2(128 BYTE), 
	"DT_ZMENADEFINICEDETAIL" DATE DEFAULT to_date ( '1.1.2000', 'dd.mm.yyyy' ), 
	"DT_KONTROLA" DATE DEFAULT to_date ( '1.1.2000', 'dd.mm.yyyy' ), 
	"S_VALIDACEUCET" VARCHAR2(10 BYTE), 
	"ND_VALIDACEHODNOTA" NUMBER(15,2), 
	"DT_ZMENA" DATE DEFAULT sysdate, 
	"S_UZIVATEL" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_IFRSPRAVIDLO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_IFRSPRAVIDLODETAIL.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_IFRSPRAVIDLODETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_IFRSPRAVIDLODETAIL
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLODETAIL" 
   (	"ID" NUMBER(*,0), 
	"ID_PORADI" NUMBER(*,0), 
	"ID_PORADIPODMINKA" NUMBER(*,0) DEFAULT 0, 
	"ID_KTGIFRSPRAVIDLO" NUMBER(*,0), 
	"ID_CISIFRSPRAVDETAILTYP" NUMBER(*,0), 
	"S_POZNAMKA" VARCHAR2(128 BYTE), 
	"S_UCETMD" VARCHAR2(10 BYTE), 
	"S_UCETD" VARCHAR2(10 BYTE), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKA" NUMBER(15,2), 
	"ND_CASTKALOCAL" NUMBER(15,2), 
	"S_UCETZBYTEK" VARCHAR2(10 BYTE), 
	"S_PODMINKA" VARCHAR2(128 BYTE), 
	"DT_ZMENA" DATE DEFAULT sysdate, 
	"S_UZIVATEL" VARCHAR2(20 BYTE), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"ID_PORADIKOREKCEFIX" NUMBER(*,0), 
	"ID_KTGSPOLECNOST" NUMBER, 
	"ID_KTGPROJEKT" NUMBER(*,0), 
	"ID_KTGODBOR" NUMBER(*,0), 
	"ID_UCETMD_UNIF" NUMBER(*,0), 
	"ID_UCETD_UNIF" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."KP_KTG_IFRSPRAVIDLODETAIL"."ID_UCETMD_UNIF" IS 'je treba zadavat jak originalni ucet v s_ucetMD tak i jeho unifikovany ekvivalent, abych to nemusel prevadet sam, protoze by tam nemusel byt primy prevod ale nejake CR, DT apod. vzorce';
   COMMENT ON COLUMN "DB_JT"."KP_KTG_IFRSPRAVIDLODETAIL"."ID_UCETD_UNIF" IS 'obdoba id_ucetMD_unif';


PROMPT Completed KP_KTG_IFRSPRAVIDLODETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_MAJETKOVEUCASTIVYJIMKY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_MAJETKOVEUCASTIVYJIMKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_MAJETKOVEUCASTIVYJIMKY
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_MAJETKOVEUCASTIVYJIMKY" 
   (	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_MAJETKOVEUCASTIVYJIMKY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_OBDOBI.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_OBDOBI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_OBDOBI
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_OBDOBI" 
   (	"ID" NUMBER(*,0), 
	"DT_DATUMOD" DATE, 
	"DT_DATUMDO" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_OBDOBI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_ODBOR.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_ODBOR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_ODBOR
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_ODBOR" 
   (	"ID" NUMBER, 
	"ID_KTGUCETNISPOLECNOST" NUMBER, 
	"S_NAZEV" VARCHAR2(50 BYTE), 
	"S_KOD" VARCHAR2(6 BYTE), 
	"ID_ODPOVEDNAOSOBA" NUMBER, 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"ID_USEK" NUMBER, 
	"ID_KAT" NUMBER, 
	"ID_TYPKAT" NUMBER, 
	"ND_DOCUROVEN1" NUMBER(15,2) DEFAULT 0, 
	"C_BUDGETING" CHAR(1 BYTE) DEFAULT '0', 
	"C_ARCHIVNI" CHAR(1 BYTE) DEFAULT '0', 
	"ID_SPONZOR" NUMBER, 
	"ID_IFRSSEGMENT" NUMBER(*,0), 
	"ID_IFRSSUBSEGMENT" NUMBER(*,0), 
	"ID_MNGSEGMENT" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_ODBOR.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_ODBOR_BCK_SEG.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_ODBOR_BCK_SEG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_ODBOR_BCK_SEG
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_ODBOR_BCK_SEG" 
   (	"ID" NUMBER, 
	"ID_KTGUCETNISPOLECNOST" NUMBER, 
	"S_NAZEV" VARCHAR2(50 BYTE), 
	"S_KOD" VARCHAR2(6 BYTE), 
	"ID_ODPOVEDNAOSOBA" NUMBER, 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"ID_USEK" NUMBER, 
	"ID_KAT" NUMBER, 
	"ID_TYPKAT" NUMBER, 
	"ND_DOCUROVEN1" NUMBER(15,2), 
	"C_BUDGETING" CHAR(1 BYTE), 
	"C_ARCHIVNI" CHAR(1 BYTE), 
	"ID_SPONZOR" NUMBER, 
	"ID_IFRSSEGMENT" NUMBER(*,0), 
	"ID_IFRSSUBSEGMENT" NUMBER(*,0), 
	"ID_MNGSEGMENT" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_ODBOR_BCK_SEG.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_PBKLIENT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_PBKLIENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_PBKLIENT
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_PBKLIENT" 
   (	"ID" NUMBER(*,0), 
	"C_AKTIVNI" CHAR(1 BYTE) DEFAULT '0', 
	"S_ICO" VARCHAR2(20 BYTE), 
	"S_NAZEV" VARCHAR2(100 BYTE), 
	"S_ULICE" VARCHAR2(80 BYTE), 
	"S_MESTO" VARCHAR2(80 BYTE), 
	"S_PSC" VARCHAR2(10 BYTE), 
	"S_STAT" VARCHAR2(5 BYTE), 
	"S_PRIVATNIBANKER" VARCHAR2(100 BYTE), 
	"C_PERSONCORP" CHAR(1 BYTE), 
	"ID_KONTAKT" NUMBER(*,0), 
	"ID_KATEGORIE" NUMBER(*,0), 
	"ID_STATUS" NUMBER(*,0), 
	"ID_SKUPINA" NUMBER(*,0), 
	"NUMBER0" VARCHAR2(20 BYTE), 
	"KID" NUMBER(*,0), 
	"ID_EPERSPEKTIVA" NUMBER(*,0), 
	"STREDISKO" VARCHAR2(20 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"DT_DATUMZMENY" DATE DEFAULT sysdate, 
	"SHORT_NAME" VARCHAR2(20 BYTE), 
	"NUMBER0_SK" VARCHAR2(20 BYTE), 
	"S_ICOBEZNUL" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_PBKLIENT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_PBSKUPINA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_PBSKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_PBSKUPINA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_PBSKUPINA" 
   (	"ID" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(30 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_PBSKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_PROJEKT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_PROJEKT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_PROJEKT
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_PROJEKT" 
   (	"ID" NUMBER, 
	"S_NAZEV" VARCHAR2(100 BYTE), 
	"S_CISLOOLD" VARCHAR2(6 BYTE), 
	"ID_STATUS" NUMBER, 
	"DT_DATUMSTATUSZMENA" DATE, 
	"ID_NAVRHUJE" NUMBER, 
	"ID_SPONZOR" NUMBER, 
	"ID_TOP" NUMBER, 
	"ID_PMANAGER" NUMBER, 
	"ID_KATEGORIE" NUMBER, 
	"ID_TYPKATEGORIE" NUMBER, 
	"ID_KTGUCETNISPOLECNOST" NUMBER, 
	"ND_NAKLADY" NUMBER(15,2), 
	"S_MENANAKLADY" VARCHAR2(3 BYTE), 
	"ND_INVESTICE" NUMBER(15,2), 
	"S_MENAINVESTICE" VARCHAR2(3 BYTE), 
	"ND_OCENENI" NUMBER(15,2), 
	"S_MENAOCENENI" VARCHAR2(3 BYTE), 
	"DT_STARTOCENENI" DATE, 
	"ID_FREKVENCE" NUMBER, 
	"DT_KONECOCENENI" DATE, 
	"S_POPIS" VARCHAR2(250 BYTE), 
	"S_UZIVATEL" VARCHAR2(20 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"ND_DOCUROVEN1" NUMBER(15,2) DEFAULT 0, 
	"ID_PROJEKTNAVRH" NUMBER, 
	"DT_MEMORANDUMDALSI" DATE, 
	"NL_MEMORANDUMMESICU" NUMBER(*,0), 
	"ID_IFRSSEGMENT" NUMBER(*,0), 
	"ID_IFRSSUBSEGMENT" NUMBER(*,0), 
	"ID_MNGSEGMENT" NUMBER(*,0), 
	"ID_TYPBILANCE" NUMBER(*,0), 
	"ID_TYPBUDGETU" NUMBER(*,0), 
	"C_SLEDUJEBUDGET" CHAR(1 BYTE) DEFAULT '0', 
	"ND_BUDGETNAVYSENI_PM" NUMBER(15,2) DEFAULT 0, 
	"ND_BUDGETNAVYSENI_TOP" NUMBER(15,2) DEFAULT 1000, 
	"ID_MNGSEGMENTBOSS" NUMBER(*,0), 
	"C_POUZITMNGSEGMENT" CHAR(1 BYTE) DEFAULT '0'
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_PROJEKT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_PROJEKTMEMORANDUM.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_PROJEKTMEMORANDUM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_PROJEKTMEMORANDUM
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_PROJEKTMEMORANDUM" 
   (	"ID_KTGPROJEKT" NUMBER, 
	"S_CIL" VARCHAR2(4000 BYTE), 
	"S_ZACLENENI" VARCHAR2(1000 BYTE), 
	"S_VSTUP" VARCHAR2(1000 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_PROJEKTMEMORANDUM.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_PROJEKTNAVRH.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_PROJEKTNAVRH.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_PROJEKTNAVRH
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_PROJEKTNAVRH" 
   (	"ID" NUMBER, 
	"S_NAZEV" VARCHAR2(150 BYTE), 
	"ID_NAVRHUJE" NUMBER, 
	"S_EMAIL" VARCHAR2(50 BYTE), 
	"ID_SPONZOR" NUMBER, 
	"ID_PMANAGER" NUMBER, 
	"S_POPIS" VARCHAR2(3000 BYTE), 
	"ND_VYNOS" NUMBER(15,2), 
	"S_MENAVYNOS" VARCHAR2(3 BYTE), 
	"ND_NAKLAD" NUMBER(15,2), 
	"S_MENANAKLAD" VARCHAR2(3 BYTE), 
	"DT_ZACATEK" DATE, 
	"DT_KONEC" DATE, 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"DT_VLOZENO" DATE DEFAULT sysdate
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_PROJEKTNAVRH.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_PROJEKT_MRO.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_PROJEKT_MRO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_PROJEKT_MRO
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_PROJEKT_MRO" 
   (	"ID" NUMBER, 
	"S_NAZEV" VARCHAR2(4000 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_PROJEKT_MRO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SPOLECNOST.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_SPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_SPOLECNOST
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_SPOLECNOST" 
   (	"ID" NUMBER(*,0), 
	"S_ICO" VARCHAR2(20 BYTE), 
	"S_NAZEV" VARCHAR2(256 BYTE), 
	"S_POM_ICO" VARCHAR2(20 BYTE), 
	"S_COUNTRY" VARCHAR2(3 BYTE), 
	"C_INDICATOR_PC" CHAR(1 BYTE), 
	"S_EKONOM_SEKTOR" VARCHAR2(10 BYTE), 
	"KATEGORIEKOEF" NUMBER(6,3), 
	"S_OKEC" VARCHAR2(50 BYTE), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"S_HLAVNIUCETNISKUPINA" VARCHAR2(5 BYTE), 
	"S_KODKATEGORIEPROTISTRANA" CHAR(3 BYTE), 
	"C_LICENCE" CHAR(1 BYTE) DEFAULT '0', 
	"C_LIKVIDACE" CHAR(1 BYTE) DEFAULT '0', 
	"C_SPOLECNERIZENY" CHAR(1 BYTE) DEFAULT '0', 
	"DT_DATUMZALOZENI" DATE, 
	"S_ULICE" VARCHAR2(40 BYTE), 
	"S_PSC" VARCHAR2(10 BYTE), 
	"S_MESTO" VARCHAR2(40 BYTE), 
	"S_DIC" VARCHAR2(15 BYTE), 
	"S_UCETSCP" VARCHAR2(12 BYTE), 
	"S_REGRMS" VARCHAR2(9 BYTE), 
	"DT_QUESTORUPDATE" DATE, 
	"ID_KTG_EXTERNIRATING" NUMBER(*,0), 
	"C_ZONA" CHAR(1 BYTE), 
	"ID_UCETNISYSTEM" NUMBER(*,0), 
	"S_ZVLASTNIVZTAHKJINEMUCLENURKC" VARCHAR2(5 BYTE), 
	"C_EVIEXTDODAVATEL" CHAR(1 BYTE) DEFAULT '0', 
	"C_SKUPINAIC" CHAR(1 BYTE) DEFAULT '0', 
	"C_VPRECHODU" CHAR(1 BYTE) DEFAULT '0', 
	"S_KODKATEGORIEPROTISTRANA_2" CHAR(3 BYTE), 
	"S_COUNTRY_PK" VARCHAR2(3 BYTE), 
	"S_UA_UNIF_COUNTRY" VARCHAR2(3 BYTE), 
	"S_UA_UNIF_ESA" VARCHAR2(25 CHAR), 
	"S_UA_UNIF_NACE" VARCHAR2(25 CHAR), 
	"S_UA_UNIF_LEI" VARCHAR2(250 CHAR), 
	"C_UA_UNIF_DEFAULT_FLAG" CHAR(1 BYTE), 
	"S_UA_UNIF_SHADOW_BANK" VARCHAR2(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 655360 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."KP_KTG_SPOLECNOST"."S_COUNTRY_PK" IS 'pomocny pro unikatni index - u nekterych statu ( CZ, SK ) chceme timto resit duplicitu IC/RC u subjektu, ktere jsou ruzne, ale maji stejne IC / RC';


PROMPT Completed KP_KTG_SPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SPOLECNOSTSPRAVCEKO.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_SPOLECNOSTSPRAVCEKO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_SPOLECNOSTSPRAVCEKO
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_SPOLECNOSTSPRAVCEKO" 
   (	"S_NUMBER0" VARCHAR2(20 BYTE), 
	"ID_SPOLECNOST" NUMBER(*,0), 
	"S_CODE" VARCHAR2(3 BYTE), 
	"S_SPRAVCE" VARCHAR2(100 BYTE), 
	"S_KO" VARCHAR2(100 BYTE), 
	"ID_DATABAZE" NUMBER(*,0), 
	"C_PRODUKT" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_SPOLECNOSTSPRAVCEKO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SPOLECNOSTVPRECHODU.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_SPOLECNOSTVPRECHODU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_SPOLECNOSTVPRECHODU
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_SPOLECNOSTVPRECHODU" 
   (	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"S_ICO" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_SPOLECNOSTVPRECHODU.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SPOLECNOST_BCK_AX.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_SPOLECNOST_BCK_AX.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_SPOLECNOST_BCK_AX
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_SPOLECNOST_BCK_AX" 
   (	"ID" NUMBER(*,0), 
	"S_ICO" VARCHAR2(20 BYTE), 
	"S_NAZEV" VARCHAR2(256 BYTE), 
	"S_POM_ICO" VARCHAR2(20 BYTE), 
	"S_COUNTRY" VARCHAR2(3 BYTE), 
	"C_INDICATOR_PC" CHAR(1 BYTE), 
	"S_EKONOM_SEKTOR" VARCHAR2(10 BYTE), 
	"KATEGORIEKOEF" NUMBER(6,3), 
	"S_OKEC" VARCHAR2(50 BYTE), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"S_HLAVNIUCETNISKUPINA" VARCHAR2(5 BYTE), 
	"S_KODKATEGORIEPROTISTRANA" CHAR(3 BYTE), 
	"C_LICENCE" CHAR(1 BYTE), 
	"C_LIKVIDACE" CHAR(1 BYTE), 
	"C_SPOLECNERIZENY" CHAR(1 BYTE), 
	"DT_DATUMZALOZENI" DATE, 
	"S_ULICE" VARCHAR2(40 BYTE), 
	"S_PSC" VARCHAR2(10 BYTE), 
	"S_MESTO" VARCHAR2(40 BYTE), 
	"S_DIC" VARCHAR2(15 BYTE), 
	"S_UCETSCP" VARCHAR2(12 BYTE), 
	"S_REGRMS" VARCHAR2(9 BYTE), 
	"DT_QUESTORUPDATE" DATE, 
	"ID_KTG_EXTERNIRATING" NUMBER(*,0), 
	"C_ZONA" CHAR(1 BYTE), 
	"ID_UCETNISYSTEM" NUMBER(*,0), 
	"S_ZVLASTNIVZTAHKJINEMUCLENURKC" VARCHAR2(5 BYTE), 
	"C_EVIEXTDODAVATEL" CHAR(1 BYTE), 
	"C_SKUPINAIC" CHAR(1 BYTE), 
	"C_VPRECHODU" CHAR(1 BYTE), 
	"S_KODKATEGORIEPROTISTRANA_2" CHAR(3 BYTE), 
	"S_COUNTRY_PK" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_SPOLECNOST_BCK_AX.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TABLES/KP_KTG_SPOLECNOST_GROUP.sql: 'utf-8' codec can't decode byte 0xe1 in position 380: invalid continuation byte


-- ============================================================================
-- Deploy: KP_KTG_SPOLECNOST_GROUP_BCK_AX.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_SPOLECNOST_GROUP_BCK_AX.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_SPOLECNOST_GROUP_BCK_AX
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_SPOLECNOST_GROUP_BCK_AX" 
   (	"ID_SPOLECNOST" NUMBER(*,0), 
	"CUST_GROUP_NAME" VARCHAR2(35 BYTE), 
	"CUST_GROUP_CODE" VARCHAR2(5 BYTE), 
	"CUST_STRUC_NAME" VARCHAR2(35 BYTE), 
	"CUST_STRUC_CODE" VARCHAR2(3 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"DT_DATUMZMENY" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_SPOLECNOST_GROUP_BCK_AX.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SPOLECNOST_GROUP_QCZ.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_SPOLECNOST_GROUP_QCZ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_SPOLECNOST_GROUP_QCZ
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_SPOLECNOST_GROUP_QCZ" 
   (	"ID_SPOLECNOST" NUMBER(*,0), 
	"CUST_GROUP_NAME" VARCHAR2(35 BYTE), 
	"CUST_GROUP_CODE" VARCHAR2(5 BYTE), 
	"CUST_STRUC_NAME" VARCHAR2(35 BYTE), 
	"CUST_STRUC_CODE" VARCHAR2(3 BYTE), 
	"DT_PLATNOSTOD" DATE DEFAULT to_date('01.01.2004','DD.MM.YYYY'), 
	"DT_PLATNOSTDO" DATE DEFAULT to_date('01.01.2099','DD.MM.YYYY'), 
	"DT_DATUMZMENY" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_SPOLECNOST_GROUP_QCZ.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SPOLECNOST_GROUP_QDL.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_SPOLECNOST_GROUP_QDL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_SPOLECNOST_GROUP_QDL
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_SPOLECNOST_GROUP_QDL" 
   (	"ID_SPOLECNOST" NUMBER(*,0), 
	"CUST_GROUP_NAME" VARCHAR2(35 BYTE), 
	"CUST_GROUP_CODE" VARCHAR2(5 BYTE), 
	"CUST_STRUC_NAME" VARCHAR2(35 BYTE), 
	"CUST_STRUC_CODE" VARCHAR2(3 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"DT_DATUMZMENY" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_SPOLECNOST_GROUP_QDL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SPOLECNOST_OKEC.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_SPOLECNOST_OKEC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_SPOLECNOST_OKEC
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_SPOLECNOST_OKEC" 
   (	"ID" NUMBER(*,0), 
	"S_ICO" VARCHAR2(20 BYTE), 
	"S_NAZEV" VARCHAR2(256 BYTE), 
	"S_POM_ICO" VARCHAR2(20 BYTE), 
	"S_COUNTRY" VARCHAR2(3 BYTE), 
	"C_INDICATOR_PC" CHAR(1 BYTE), 
	"S_EKONOM_SEKTOR" VARCHAR2(10 BYTE), 
	"KATEGORIEKOEF" NUMBER(6,3), 
	"S_OKEC" VARCHAR2(50 BYTE), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"S_HLAVNIUCETNISKUPINA" VARCHAR2(5 BYTE), 
	"S_KODKATEGORIEPROTISTRANA" CHAR(3 BYTE), 
	"C_LICENCE" CHAR(1 BYTE), 
	"C_LIKVIDACE" CHAR(1 BYTE), 
	"C_SPOLECNERIZENY" CHAR(1 BYTE), 
	"DT_DATUMZALOZENI" DATE, 
	"S_ULICE" VARCHAR2(40 BYTE), 
	"S_PSC" VARCHAR2(10 BYTE), 
	"S_MESTO" VARCHAR2(40 BYTE), 
	"S_DIC" VARCHAR2(15 BYTE), 
	"S_UCETSCP" VARCHAR2(12 BYTE), 
	"S_REGRMS" VARCHAR2(9 BYTE), 
	"DT_QUESTORUPDATE" DATE, 
	"ID_KTG_EXTERNIRATING" NUMBER(*,0), 
	"C_ZONA" CHAR(1 BYTE), 
	"ID_UCETNISYSTEM" NUMBER(*,0), 
	"S_ZVLASTNIVZTAHKJINEMUCLENURKC" VARCHAR2(5 BYTE), 
	"C_EVIEXTDODAVATEL" CHAR(1 BYTE), 
	"C_SKUPINAIC" CHAR(1 BYTE), 
	"C_VPRECHODU" CHAR(1 BYTE), 
	"S_KODKATEGORIEPROTISTRANA_2" CHAR(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_SPOLECNOST_OKEC.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SUBKONSOLIDACE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_SUBKONSOLIDACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_SUBKONSOLIDACE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACE" 
   (	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"NL_PORADI" NUMBER(*,0), 
	"ID_KTGUCETNISKUPINA" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"S_TYPKURSLISTEK" VARCHAR2(5 BYTE), 
	"ID_KTGUCETNISPOLECNOSTMATKA" NUMBER(*,0), 
	"C_KAMKURZOVYROZDIL" CHAR(1 BYTE) DEFAULT 'P', 
	"C_TYPVYKAZOVANI" CHAR(1 BYTE) DEFAULT 'K', 
	"NL_KROKDOKLADCLENU" NUMBER(*,0) DEFAULT 2, 
	"C_EXPORTFLAGCZK" CHAR(1 BYTE), 
	"ID_KTGUCETNISKUPINAVYJIMKA" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."KP_KTG_SUBKONSOLIDACE"."C_TYPVYKAZOVANI" IS 'urcuje pro Facility vykazy o jaky typ jde Kisife, Disife';
   COMMENT ON COLUMN "DB_JT"."KP_KTG_SUBKONSOLIDACE"."NL_KROKDOKLADCLENU" IS 'rika jake doklady mam brat pri sestavovani subkonsolidace zda normalni(1) nebo IFRS(2)';
   COMMENT ON COLUMN "DB_JT"."KP_KTG_SUBKONSOLIDACE"."ID_KTGUCETNISKUPINAVYJIMKA" IS 'Pro specialni skupinu 1000 je v tomto sloupci ulozeno z jake ucetni skupiny se maji brat vazby, protoze 1000 je fiktivni pro vsechny centraly/pobocky';


PROMPT Completed KP_KTG_SUBKONSOLIDACE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SUBKONSOLIDACEETAPA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_SUBKONSOLIDACEETAPA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_SUBKONSOLIDACEETAPA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACEETAPA" 
   (	"ID" NUMBER(*,0), 
	"ID_KTGSUBKONSOLIDACE" NUMBER(*,0), 
	"NL_PORADI" NUMBER(*,0), 
	"S_ZKRATKA" VARCHAR2(32 BYTE), 
	"S_POPIS" VARCHAR2(256 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_SUBKONSOLIDACEETAPA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SUBKONSOLIDACEPRAVIDLO.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_SUBKONSOLIDACEPRAVIDLO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_SUBKONSOLIDACEPRAVIDLO
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACEPRAVIDLO" 
   (	"ID" NUMBER(*,0), 
	"ID_PORADI" NUMBER(*,0), 
	"ID_CISIFRSTYPPRAVIDLO" NUMBER(*,0), 
	"ID_KTGSUBKONSOLIDACE" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"ID_KTGSUBKONSOLIDACEETAPA" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"S_POZNAMKA" VARCHAR2(128 BYTE), 
	"C_VALIDNI" CHAR(1 BYTE), 
	"S_ERRORHLASKA" VARCHAR2(128 BYTE), 
	"DT_ZMENADEFINICEDETAIL" DATE DEFAULT to_date ( '1.1.2000', 'dd.mm.yyyy' ), 
	"DT_KONTROLA" DATE DEFAULT to_date ( '1.1.2000', 'dd.mm.yyyy' ), 
	"NL_VALIDACERADEK" NUMBER(*,0), 
	"NL_VALIDACELIST" NUMBER(*,0), 
	"ND_VALIDACEHODNOTA" NUMBER(15,2), 
	"DT_ZMENA" DATE DEFAULT sysdate, 
	"S_UZIVATEL" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_SUBKONSOLIDACEPRAVIDLO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SUBKONSOLPRAVIDLODETAIL.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_SUBKONSOLPRAVIDLODETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_SUBKONSOLPRAVIDLODETAIL
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_SUBKONSOLPRAVIDLODETAIL" 
   (	"ID" NUMBER(*,0), 
	"ID_KTGSUBKONSOLIDACEPRAVIDLO" NUMBER(*,0), 
	"ID_PORADI" NUMBER(*,0), 
	"ID_PORADIPODMINKA" NUMBER(*,0) DEFAULT 0, 
	"ID_CISIFRSPRAVDETAILTYP" NUMBER(*,0), 
	"S_POZNAMKA" VARCHAR2(128 BYTE), 
	"NL_RADEK" NUMBER(*,0), 
	"NL_PORADILIST" NUMBER(*,0), 
	"ND_CASTKA" NUMBER(15,2), 
	"S_VZOREC" VARCHAR2(256 BYTE), 
	"S_UCETZBYTEK" VARCHAR2(10 BYTE), 
	"S_PODMINKA" VARCHAR2(128 BYTE), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"DT_ZMENA" DATE DEFAULT sysdate, 
	"S_UZIVATEL" VARCHAR2(20 BYTE), 
	"ID_KTGSUBKONSOLIDACE" NUMBER(*,0), 
	"ID_PROTISTRANA" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_SUBKONSOLPRAVIDLODETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_TYPNASTROJE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_TYPNASTROJE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_TYPNASTROJE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_TYPNASTROJE" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(50 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"S_KOD" VARCHAR2(6 BYTE), 
	"NL_KOD" NUMBER(*,0), 
	"C_URCITKODOPERACE" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_TYPNASTROJE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_TYPOPERACE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_TYPOPERACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_TYPOPERACE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_TYPOPERACE" 
   (	"ID" NUMBER, 
	"ID_TYPNASTROJE" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"S_KOD" VARCHAR2(6 BYTE), 
	"NL_KOD" NUMBER(*,0), 
	"C_IMPLICITNIBANKA" CHAR(1 BYTE), 
	"C_IMPLICITNIOSTATNI" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_TYPOPERACE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_TYPSUBETAPA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_TYPSUBETAPA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_TYPSUBETAPA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_TYPSUBETAPA" 
   (	"ID" NUMBER(*,0), 
	"ID_CISTYPETAPA" NUMBER(*,0), 
	"NL_PORADI" NUMBER(*,0), 
	"S_ZKRATKA" VARCHAR2(32 BYTE), 
	"S_POPIS" VARCHAR2(256 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_TYPSUBETAPA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_TYPSUBPRAVIDLO.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_TYPSUBPRAVIDLO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_TYPSUBPRAVIDLO
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_TYPSUBPRAVIDLO" 
   (	"ID" NUMBER(*,0), 
	"ID_PORADI" NUMBER(*,0), 
	"ID_CISIFRSTYPPRAVIDLO" NUMBER(*,0), 
	"ID_KTGTYPSUBETAPA" NUMBER(*,0), 
	"S_POZNAMKA" VARCHAR2(128 BYTE), 
	"ID_DATUMTYP" NUMBER(*,0) DEFAULT 0
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_TYPSUBPRAVIDLO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_TYPSUBPRAVIDLODETAIL.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_TYPSUBPRAVIDLODETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_TYPSUBPRAVIDLODETAIL
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_TYPSUBPRAVIDLODETAIL" 
   (	"ID" NUMBER(*,0), 
	"ID_KTGTYPSUBPRAVIDLO" NUMBER(*,0), 
	"ID_PORADI" NUMBER(*,0), 
	"ID_PORADIPODMINKA" NUMBER(*,0) DEFAULT 0, 
	"ID_CISIFRSPRAVDETAILTYP" NUMBER(*,0), 
	"S_POZNAMKA" VARCHAR2(128 BYTE), 
	"NL_RADEK" NUMBER(*,0), 
	"NL_PORADILIST" NUMBER(*,0), 
	"S_VZOREC" VARCHAR2(256 BYTE), 
	"S_UCETZBYTEK" VARCHAR2(10 BYTE), 
	"S_PODMINKA" VARCHAR2(128 BYTE), 
	"ID_PROTISTRANA" NUMBER(*,0), 
	"C_NULOVE" CHAR(1 BYTE) DEFAULT '0', 
	"C_MATKA" CHAR(1 BYTE) DEFAULT '0'
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_TYPSUBPRAVIDLODETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISKUPINA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_UCETNISKUPINA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_UCETNISKUPINA" 
   (	"ID" NUMBER(*,0), 
	"S_KOD" VARCHAR2(10 BYTE), 
	"S_POPIS" VARCHAR2(64 BYTE), 
	"S_TYPKURSLISTEK" VARCHAR2(5 BYTE), 
	"ID_CISBANKA" NUMBER, 
	"S_SKUPINALIKE" VARCHAR2(3 BYTE), 
	"C_POROVNAVAT" CHAR(1 BYTE) DEFAULT '0', 
	"C_EXPORTOLAP" CHAR(1 BYTE) DEFAULT '0', 
	"C_GENERUJSUBKONKAMIL" CHAR(1 BYTE) DEFAULT '0', 
	"C_TESTOVATVAZBY" CHAR(1 BYTE) DEFAULT '1', 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"C_ARCHIVNI" CHAR(1 BYTE) DEFAULT '0', 
	"C_VAZBYLOGLEVEL" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."KP_KTG_UCETNISKUPINA"."S_TYPKURSLISTEK" IS 'Defaultni hodnota pro subkonsolidacni uzly. Rika jaky kurzovni listek se ma pouzit. Kod generovani dokladu tuto hodnotu nepouziva. Slouzi pouze jako defaultni hodnota pri zakladani nove subkonsolidace v teto ucetni skupine.';
   COMMENT ON COLUMN "DB_JT"."KP_KTG_UCETNISKUPINA"."ID_CISBANKA" IS 'Nepouzito - melo by se pouzivat misto kurzovniho listku viz. tabulka cis_banka';


PROMPT Completed KP_KTG_UCETNISKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISPOLECNOST.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_UCETNISPOLECNOST
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" 
   (	"ID" NUMBER(*,0), 
	"ID_CISSUBJECT" NUMBER(*,0), 
	"S_ICO" VARCHAR2(20 BYTE), 
	"SPIN_ID" NUMBER(*,0), 
	"TOPAS_ID" VARCHAR2(30 BYTE), 
	"QUEST_ID" CHAR(20 BYTE), 
	"C_EXTSYSTEM" CHAR(1 BYTE), 
	"S_NAZEV" VARCHAR2(128 BYTE), 
	"C_POCITATROZVAHU" CHAR(1 BYTE) DEFAULT '1', 
	"S_SOUBORPREDPONA" VARCHAR2(20 BYTE), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_DBLINK" VARCHAR2(32 BYTE), 
	"C_AUTOMATICKEGENEROVANI" CHAR(1 BYTE) DEFAULT '1', 
	"ID_KATEGORIE" NUMBER(*,0), 
	"C_RKC" CHAR(1 BYTE), 
	"S_ZKRATKA" VARCHAR2(35 BYTE), 
	"DT_LASTCLOSEDATE" DATE, 
	"DT_DATUMARCHIVACE" DATE, 
	"C_OPCE" CHAR(1 BYTE) DEFAULT '0', 
	"ID_CISKATSPOL" NUMBER DEFAULT 0, 
	"ID_ZODPOVEDNAUCETNI" NUMBER, 
	"ID_ODPOVEDNAOSOBA" NUMBER, 
	"ID_ADMINISTRATOR" NUMBER, 
	"DT_RELATIVEDATE" DATE, 
	"ID_TOPMNG" NUMBER, 
	"S_POZNAMKA" VARCHAR2(10 BYTE), 
	"C_DANOVAZTRATA" CHAR(1 BYTE) DEFAULT '0', 
	"ID_CISOPCE" NUMBER DEFAULT 1, 
	"ND_DOCUROVEN2" NUMBER(15,2) DEFAULT 0, 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"C_DOCDISPLAY" CHAR(1 BYTE) DEFAULT '0', 
	"C_PREHLEDDISPLAY" CHAR(1 BYTE) DEFAULT '1', 
	"ID_CISNOMINEE" NUMBER DEFAULT 1, 
	"NL_ROKPOCSTAVIMPORTSYSTEM" NUMBER(*,0), 
	"ID_TYPPROJEKTU" NUMBER, 
	"ID_KTGODBOR" NUMBER(*,0), 
	"ID_KTGPROJEKT" NUMBER(*,0), 
	"DT_UCETNIOBDOBISTART" DATE, 
	"DT_UCETNIOBDOBIKONEC" DATE, 
	"C_ONLINE" CHAR(1 BYTE) DEFAULT '1', 
	"DT_ONLINEOD" DATE, 
	"C_NOCNIZPRACOVANI" CHAR(1 BYTE) DEFAULT '0', 
	"ID_CISNASTROJUCETNIVYJIMKY" NUMBER(*,0), 
	"ID_CISDATABAZE" NUMBER(*,0), 
	"S_SKUPINALIKE" VARCHAR2(3 BYTE), 
	"ND_BUDGETNAVYSENI_OO" NUMBER(15,2) DEFAULT 0, 
	"ND_BUDGETNAVYSENI_TOP" NUMBER(15,2) DEFAULT 1000, 
	"S_DUVODOFFLINE" VARCHAR2(100 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"ID_MNGSEGMENT" NUMBER(*,0), 
	"ID_SPRAVCEKONSOLIDACE" NUMBER(*,0), 
	"ID_MNGSEGMENTBOSS" NUMBER(*,0), 
	"ID_CENTRALA" NUMBER(*,0), 
	"C_UCETNICTVI_V_IFRS" CHAR(1 BYTE) DEFAULT '0', 
	"C_IFRSPRIMARNI" CHAR(1 BYTE) DEFAULT '0', 
	"DT_UNIFIKOVANEDOKLADY" DATE, 
	"C_FEIS_UCETTYP" CHAR(1 BYTE) DEFAULT '?', 
	"C_TESTOVATMAJUCAST" CHAR(1 BYTE) DEFAULT '0', 
	"C_POCITEJMUPOZICI" CHAR(1 BYTE) DEFAULT '1', 
	"C_MULTISEGMENT" CHAR(1 BYTE) DEFAULT '0', 
	"C_EXPORTJAKOPROTISTRANA" CHAR(1 BYTE) DEFAULT '0', 
	"ID_CISDATABAZE_PARTY" NUMBER(38,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."KP_KTG_UCETNISPOLECNOST"."C_UCETNICTVI_V_IFRS" IS '0 - budou mit vetsinou - znamena to, ze spolecnost uctuje normalne<br>1 - budou mit nektere zahranicni - znamena to, ze spolecnost uctuje rovnou v IFRS. Tedy nejde udelat normalni doklad, protoze uz v primarnim systemu je misto normalniho uctovani rovnou uctovani IFRS. Temto spolecnostem tedy nebude vznikat normalni doklad, ale pouze IFRS doklad a jeho vazby';
   COMMENT ON COLUMN "DB_JT"."KP_KTG_UCETNISPOLECNOST"."C_IFRSPRIMARNI" IS 'viz. kp_ktg_ucetniSpolecnost_dbLink c_IFRSPrimarni';
   COMMENT ON COLUMN "DB_JT"."KP_KTG_UCETNISPOLECNOST"."DT_UNIFIKOVANEDOKLADY" IS 'Urcuje zda se ma generovat doklad s vyuzitim prevodu do unifikovaneho uctu ci nikoliv. Od tohoto urceneho data se prevod na unifikovane ucty zacne uplatnovat';
   COMMENT ON COLUMN "DB_JT"."KP_KTG_UCETNISPOLECNOST"."C_FEIS_UCETTYP" IS 'rika na jake pismeno zacinaji ucty v ucetni osnove FEIS databazel';
   COMMENT ON COLUMN "DB_JT"."KP_KTG_UCETNISPOLECNOST"."C_TESTOVATMAJUCAST" IS 'ridi zda se bude provadet vypocet uverove a menove pozice podle prevodoveho mustku(1) nebo zda se toto nastaveni ignoruje (0).';
   COMMENT ON COLUMN "DB_JT"."KP_KTG_UCETNISPOLECNOST"."C_EXPORTJAKOPROTISTRANA" IS 'pro export do Cartesis, kdyz je 0 tak exportuje primarni klic, kdyz je 1 tak exportuje primarni klic z tabulky protistran tj. kp_ktg_spolecnost';


PROMPT Completed KP_KTG_UCETNISPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISPOLECNOST_EPH_07.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISPOLECNOST_EPH_07.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_UCETNISPOLECNOST_EPH_07
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_EPH_07" 
   (	"ID" NUMBER(*,0), 
	"ID_CISSUBJECT" NUMBER(*,0), 
	"S_ICO" VARCHAR2(20 BYTE), 
	"SPIN_ID" NUMBER(*,0), 
	"TOPAS_ID" VARCHAR2(30 BYTE), 
	"QUEST_ID" CHAR(20 BYTE), 
	"C_EXTSYSTEM" CHAR(1 BYTE), 
	"S_NAZEV" VARCHAR2(128 BYTE), 
	"C_POCITATROZVAHU" CHAR(1 BYTE), 
	"S_SOUBORPREDPONA" VARCHAR2(20 BYTE), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_DBLINK" VARCHAR2(32 BYTE), 
	"C_AUTOMATICKEGENEROVANI" CHAR(1 BYTE), 
	"ID_KATEGORIE" NUMBER(*,0), 
	"C_RKC" CHAR(1 BYTE), 
	"S_ZKRATKA" VARCHAR2(35 BYTE), 
	"DT_LASTCLOSEDATE" DATE, 
	"DT_DATUMARCHIVACE" DATE, 
	"C_OPCE" CHAR(1 BYTE), 
	"ID_CISKATSPOL" NUMBER, 
	"ID_ZODPOVEDNAUCETNI" NUMBER, 
	"ID_ODPOVEDNAOSOBA" NUMBER, 
	"ID_ADMINISTRATOR" NUMBER, 
	"DT_RELATIVEDATE" DATE, 
	"ID_TOPMNG" NUMBER, 
	"S_POZNAMKA" VARCHAR2(10 BYTE), 
	"C_DANOVAZTRATA" CHAR(1 BYTE), 
	"ID_CISOPCE" NUMBER, 
	"ND_DOCUROVEN2" NUMBER(15,2), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"C_DOCDISPLAY" CHAR(1 BYTE), 
	"C_PREHLEDDISPLAY" CHAR(1 BYTE), 
	"ID_CISNOMINEE" NUMBER, 
	"NL_ROKPOCSTAVIMPORTSYSTEM" NUMBER(*,0), 
	"ID_TYPPROJEKTU" NUMBER, 
	"ID_KTGODBOR" NUMBER(*,0), 
	"ID_KTGPROJEKT" NUMBER(*,0), 
	"DT_UCETNIOBDOBISTART" DATE, 
	"DT_UCETNIOBDOBIKONEC" DATE, 
	"C_ONLINE" CHAR(1 BYTE), 
	"DT_ONLINEOD" DATE, 
	"C_NOCNIZPRACOVANI" CHAR(1 BYTE), 
	"ID_CISNASTROJUCETNIVYJIMKY" NUMBER(*,0), 
	"ID_CISDATABAZE" NUMBER(*,0), 
	"S_SKUPINALIKE" VARCHAR2(3 BYTE), 
	"ND_BUDGETNAVYSENI_OO" NUMBER(15,2), 
	"ND_BUDGETNAVYSENI_TOP" NUMBER(15,2), 
	"S_DUVODOFFLINE" VARCHAR2(100 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"ID_MNGSEGMENT" NUMBER(*,0), 
	"ID_SPRAVCEKONSOLIDACE" NUMBER(*,0), 
	"ID_MNGSEGMENTBOSS" NUMBER(*,0), 
	"ID_CENTRALA" NUMBER(*,0), 
	"C_UCETNICTVI_V_IFRS" CHAR(1 BYTE), 
	"C_IFRSPRIMARNI" CHAR(1 BYTE), 
	"DT_UNIFIKOVANEDOKLADY" DATE, 
	"C_FEIS_UCETTYP" CHAR(1 BYTE), 
	"C_TESTOVATMAJUCAST" CHAR(1 BYTE), 
	"C_POCITEJMUPOZICI" CHAR(1 BYTE), 
	"C_MULTISEGMENT" CHAR(1 BYTE), 
	"C_EXPORTJAKOPROTISTRANA" CHAR(1 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_UCETNISPOLECNOST_EPH_07.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISPOLECNOST_GAS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISPOLECNOST_GAS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_UCETNISPOLECNOST_GAS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_GAS" 
   (	"ID" NUMBER(*,0), 
	"ID_CISSUBJECT" NUMBER(*,0), 
	"S_ICO" VARCHAR2(20 BYTE), 
	"SPIN_ID" NUMBER(*,0), 
	"TOPAS_ID" VARCHAR2(30 BYTE), 
	"QUEST_ID" CHAR(20 BYTE), 
	"C_EXTSYSTEM" CHAR(1 BYTE), 
	"S_NAZEV" VARCHAR2(128 BYTE), 
	"C_POCITATROZVAHU" CHAR(1 BYTE), 
	"S_SOUBORPREDPONA" VARCHAR2(20 BYTE), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_DBLINK" VARCHAR2(32 BYTE), 
	"C_AUTOMATICKEGENEROVANI" CHAR(1 BYTE), 
	"ID_KATEGORIE" NUMBER(*,0), 
	"C_RKC" CHAR(1 BYTE), 
	"S_ZKRATKA" VARCHAR2(35 BYTE), 
	"DT_LASTCLOSEDATE" DATE, 
	"DT_DATUMARCHIVACE" DATE, 
	"C_OPCE" CHAR(1 BYTE), 
	"ID_CISKATSPOL" NUMBER, 
	"ID_ZODPOVEDNAUCETNI" NUMBER, 
	"ID_ODPOVEDNAOSOBA" NUMBER, 
	"ID_ADMINISTRATOR" NUMBER, 
	"DT_RELATIVEDATE" DATE, 
	"ID_TOPMNG" NUMBER, 
	"S_POZNAMKA" VARCHAR2(10 BYTE), 
	"C_DANOVAZTRATA" CHAR(1 BYTE), 
	"ID_CISOPCE" NUMBER, 
	"ND_DOCUROVEN2" NUMBER(15,2), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"C_DOCDISPLAY" CHAR(1 BYTE), 
	"C_PREHLEDDISPLAY" CHAR(1 BYTE), 
	"ID_CISNOMINEE" NUMBER, 
	"NL_ROKPOCSTAVIMPORTSYSTEM" NUMBER(*,0), 
	"ID_TYPPROJEKTU" NUMBER, 
	"ID_KTGODBOR" NUMBER(*,0), 
	"ID_KTGPROJEKT" NUMBER(*,0), 
	"DT_UCETNIOBDOBISTART" DATE, 
	"DT_UCETNIOBDOBIKONEC" DATE, 
	"C_ONLINE" CHAR(1 BYTE), 
	"DT_ONLINEOD" DATE, 
	"C_NOCNIZPRACOVANI" CHAR(1 BYTE), 
	"ID_CISNASTROJUCETNIVYJIMKY" NUMBER(*,0), 
	"ID_CISDATABAZE" NUMBER(*,0), 
	"S_SKUPINALIKE" VARCHAR2(3 BYTE), 
	"ND_BUDGETNAVYSENI_OO" NUMBER(15,2), 
	"ND_BUDGETNAVYSENI_TOP" NUMBER(15,2), 
	"S_DUVODOFFLINE" VARCHAR2(100 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"ID_MNGSEGMENT" NUMBER(*,0), 
	"ID_SPRAVCEKONSOLIDACE" NUMBER(*,0), 
	"ID_MNGSEGMENTBOSS" NUMBER(*,0), 
	"ID_CENTRALA" NUMBER(*,0), 
	"C_UCETNICTVI_V_IFRS" CHAR(1 BYTE), 
	"C_IFRSPRIMARNI" CHAR(1 BYTE), 
	"DT_UNIFIKOVANEDOKLADY" DATE, 
	"C_FEIS_UCETTYP" CHAR(1 BYTE), 
	"C_TESTOVATMAJUCAST" CHAR(1 BYTE), 
	"C_POCITEJMUPOZICI" CHAR(1 BYTE), 
	"C_MULTISEGMENT" CHAR(1 BYTE), 
	"C_EXPORTJAKOPROTISTRANA" CHAR(1 BYTE), 
	"ID_CISDATABAZE_PARTY" NUMBER(38,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_UCETNISPOLECNOST_GAS.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISPOLECNOST_GAS2.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISPOLECNOST_GAS2.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_UCETNISPOLECNOST_GAS2
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_GAS2" 
   (	"ID" NUMBER(*,0), 
	"ID_CISSUBJECT" NUMBER(*,0), 
	"S_ICO" VARCHAR2(20 BYTE), 
	"SPIN_ID" NUMBER(*,0), 
	"TOPAS_ID" VARCHAR2(30 BYTE), 
	"QUEST_ID" CHAR(20 BYTE), 
	"C_EXTSYSTEM" CHAR(1 BYTE), 
	"S_NAZEV" VARCHAR2(128 BYTE), 
	"C_POCITATROZVAHU" CHAR(1 BYTE), 
	"S_SOUBORPREDPONA" VARCHAR2(20 BYTE), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_DBLINK" VARCHAR2(32 BYTE), 
	"C_AUTOMATICKEGENEROVANI" CHAR(1 BYTE), 
	"ID_KATEGORIE" NUMBER(*,0), 
	"C_RKC" CHAR(1 BYTE), 
	"S_ZKRATKA" VARCHAR2(35 BYTE), 
	"DT_LASTCLOSEDATE" DATE, 
	"DT_DATUMARCHIVACE" DATE, 
	"C_OPCE" CHAR(1 BYTE), 
	"ID_CISKATSPOL" NUMBER, 
	"ID_ZODPOVEDNAUCETNI" NUMBER, 
	"ID_ODPOVEDNAOSOBA" NUMBER, 
	"ID_ADMINISTRATOR" NUMBER, 
	"DT_RELATIVEDATE" DATE, 
	"ID_TOPMNG" NUMBER, 
	"S_POZNAMKA" VARCHAR2(10 BYTE), 
	"C_DANOVAZTRATA" CHAR(1 BYTE), 
	"ID_CISOPCE" NUMBER, 
	"ND_DOCUROVEN2" NUMBER(15,2), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"C_DOCDISPLAY" CHAR(1 BYTE), 
	"C_PREHLEDDISPLAY" CHAR(1 BYTE), 
	"ID_CISNOMINEE" NUMBER, 
	"NL_ROKPOCSTAVIMPORTSYSTEM" NUMBER(*,0), 
	"ID_TYPPROJEKTU" NUMBER, 
	"ID_KTGODBOR" NUMBER(*,0), 
	"ID_KTGPROJEKT" NUMBER(*,0), 
	"DT_UCETNIOBDOBISTART" DATE, 
	"DT_UCETNIOBDOBIKONEC" DATE, 
	"C_ONLINE" CHAR(1 BYTE), 
	"DT_ONLINEOD" DATE, 
	"C_NOCNIZPRACOVANI" CHAR(1 BYTE), 
	"ID_CISNASTROJUCETNIVYJIMKY" NUMBER(*,0), 
	"ID_CISDATABAZE" NUMBER(*,0), 
	"S_SKUPINALIKE" VARCHAR2(3 BYTE), 
	"ND_BUDGETNAVYSENI_OO" NUMBER(15,2), 
	"ND_BUDGETNAVYSENI_TOP" NUMBER(15,2), 
	"S_DUVODOFFLINE" VARCHAR2(100 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"ID_MNGSEGMENT" NUMBER(*,0), 
	"ID_SPRAVCEKONSOLIDACE" NUMBER(*,0), 
	"ID_MNGSEGMENTBOSS" NUMBER(*,0), 
	"ID_CENTRALA" NUMBER(*,0), 
	"C_UCETNICTVI_V_IFRS" CHAR(1 BYTE), 
	"C_IFRSPRIMARNI" CHAR(1 BYTE), 
	"DT_UNIFIKOVANEDOKLADY" DATE, 
	"C_FEIS_UCETTYP" CHAR(1 BYTE), 
	"C_TESTOVATMAJUCAST" CHAR(1 BYTE), 
	"C_POCITEJMUPOZICI" CHAR(1 BYTE), 
	"C_MULTISEGMENT" CHAR(1 BYTE), 
	"C_EXPORTJAKOPROTISTRANA" CHAR(1 BYTE), 
	"ID_CISDATABAZE_PARTY" NUMBER(38,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_UCETNISPOLECNOST_GAS2.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISPOLECNOST_LINK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISPOLECNOST_LINK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_UCETNISPOLECNOST_LINK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_LINK" 
   (	"ID" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"SPIN_ID" NUMBER(*,0), 
	"TOPAS_ID" VARCHAR2(30 BYTE), 
	"C_EXTSYSTEM" CHAR(1 BYTE), 
	"ID_CISDATABAZE" NUMBER(*,0), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"ID_CISSUBJECT" NUMBER(*,0), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"C_IFRSPRIMARNI" CHAR(1 BYTE) DEFAULT '0', 
	"DT_UNIFIKOVANEDOKLADY" DATE, 
	"C_FEIS_PRENOS" CHAR(1 BYTE), 
	"ID_CISDATABAZE_PARTY" NUMBER(38,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."KP_KTG_UCETNISPOLECNOST_LINK"."C_IFRSPRIMARNI" IS 'je-li nastaven na ''1'' tak spolecnost ma komplet IFRS ucetnictvi v primarnim systemu. Je-li ''0'' tak muze mit definovany IFRS upravy v KIS';
   COMMENT ON COLUMN "DB_JT"."KP_KTG_UCETNISPOLECNOST_LINK"."C_FEIS_PRENOS" IS 'prenos SL do FEIS 0/null-zadny, 1-automaticky, 2-manualni/ucetni';


PROMPT Completed KP_KTG_UCETNISPOLECNOST_LINK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISPOLECNOST_ZAMKY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISPOLECNOST_ZAMKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_UCETNISPOLECNOST_ZAMKY
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_ZAMKY" 
   (	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_UCETNISPOLECNOST_ZAMKY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISPOLECNOST_ZATKO.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISPOLECNOST_ZATKO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_UCETNISPOLECNOST_ZATKO
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_ZATKO" 
   (	"ID" NUMBER(*,0), 
	"ID_CISSUBJECT" NUMBER(*,0), 
	"S_ICO" VARCHAR2(20 BYTE), 
	"SPIN_ID" NUMBER(*,0), 
	"TOPAS_ID" VARCHAR2(30 BYTE), 
	"QUEST_ID" CHAR(20 BYTE), 
	"C_EXTSYSTEM" CHAR(1 BYTE), 
	"S_NAZEV" VARCHAR2(128 BYTE), 
	"C_POCITATROZVAHU" CHAR(1 BYTE), 
	"S_SOUBORPREDPONA" VARCHAR2(20 BYTE), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_DBLINK" VARCHAR2(32 BYTE), 
	"C_AUTOMATICKEGENEROVANI" CHAR(1 BYTE), 
	"ID_KATEGORIE" NUMBER(*,0), 
	"C_RKC" CHAR(1 BYTE), 
	"S_ZKRATKA" VARCHAR2(35 BYTE), 
	"DT_LASTCLOSEDATE" DATE, 
	"DT_DATUMARCHIVACE" DATE, 
	"C_OPCE" CHAR(1 BYTE), 
	"ID_CISKATSPOL" NUMBER, 
	"ID_ZODPOVEDNAUCETNI" NUMBER, 
	"ID_ODPOVEDNAOSOBA" NUMBER, 
	"ID_ADMINISTRATOR" NUMBER, 
	"DT_RELATIVEDATE" DATE, 
	"ID_TOPMNG" NUMBER, 
	"S_POZNAMKA" VARCHAR2(10 BYTE), 
	"C_DANOVAZTRATA" CHAR(1 BYTE), 
	"ID_CISOPCE" NUMBER, 
	"ND_DOCUROVEN2" NUMBER(15,2), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"C_DOCDISPLAY" CHAR(1 BYTE), 
	"C_PREHLEDDISPLAY" CHAR(1 BYTE), 
	"ID_CISNOMINEE" NUMBER, 
	"NL_ROKPOCSTAVIMPORTSYSTEM" NUMBER(*,0), 
	"ID_TYPPROJEKTU" NUMBER, 
	"ID_KTGODBOR" NUMBER(*,0), 
	"ID_KTGPROJEKT" NUMBER(*,0), 
	"DT_UCETNIOBDOBISTART" DATE, 
	"DT_UCETNIOBDOBIKONEC" DATE, 
	"C_ONLINE" CHAR(1 BYTE), 
	"DT_ONLINEOD" DATE, 
	"C_NOCNIZPRACOVANI" CHAR(1 BYTE), 
	"ID_CISNASTROJUCETNIVYJIMKY" NUMBER(*,0), 
	"ID_CISDATABAZE" NUMBER(*,0), 
	"S_SKUPINALIKE" VARCHAR2(3 BYTE), 
	"ND_BUDGETNAVYSENI_OO" NUMBER(15,2), 
	"ND_BUDGETNAVYSENI_TOP" NUMBER(15,2), 
	"S_DUVODOFFLINE" VARCHAR2(100 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"ID_MNGSEGMENT" NUMBER(*,0), 
	"ID_SPRAVCEKONSOLIDACE" NUMBER(*,0), 
	"ID_MNGSEGMENTBOSS" NUMBER(*,0), 
	"ID_CENTRALA" NUMBER(*,0), 
	"C_UCETNICTVI_V_IFRS" CHAR(1 BYTE), 
	"C_IFRSPRIMARNI" CHAR(1 BYTE), 
	"DT_UNIFIKOVANEDOKLADY" DATE, 
	"C_FEIS_UCETTYP" CHAR(1 BYTE), 
	"C_TESTOVATMAJUCAST" CHAR(1 BYTE), 
	"C_POCITEJMUPOZICI" CHAR(1 BYTE), 
	"C_MULTISEGMENT" CHAR(1 BYTE), 
	"C_EXPORTJAKOPROTISTRANA" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_UCETNISPOLECNOST_ZATKO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISPOL_CART_MENY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISPOL_CART_MENY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_UCETNISPOL_CART_MENY
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_UCETNISPOL_CART_MENY" 
   (	"ID" NUMBER(*,0), 
	"ID_CISSUBJECT" NUMBER(*,0), 
	"S_ICO" VARCHAR2(20 BYTE), 
	"SPIN_ID" NUMBER(*,0), 
	"TOPAS_ID" VARCHAR2(30 BYTE), 
	"QUEST_ID" CHAR(20 BYTE), 
	"C_EXTSYSTEM" CHAR(1 BYTE), 
	"S_NAZEV" VARCHAR2(128 BYTE), 
	"C_POCITATROZVAHU" CHAR(1 BYTE), 
	"S_SOUBORPREDPONA" VARCHAR2(20 BYTE), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_DBLINK" VARCHAR2(32 BYTE), 
	"C_AUTOMATICKEGENEROVANI" CHAR(1 BYTE), 
	"ID_KATEGORIE" NUMBER(*,0), 
	"C_RKC" CHAR(1 BYTE), 
	"S_ZKRATKA" VARCHAR2(35 BYTE), 
	"DT_LASTCLOSEDATE" DATE, 
	"DT_DATUMARCHIVACE" DATE, 
	"C_OPCE" CHAR(1 BYTE), 
	"ID_CISKATSPOL" NUMBER, 
	"ID_ZODPOVEDNAUCETNI" NUMBER, 
	"ID_ODPOVEDNAOSOBA" NUMBER, 
	"ID_ADMINISTRATOR" NUMBER, 
	"DT_RELATIVEDATE" DATE, 
	"ID_TOPMNG" NUMBER, 
	"S_POZNAMKA" VARCHAR2(10 BYTE), 
	"C_DANOVAZTRATA" CHAR(1 BYTE), 
	"ID_CISOPCE" NUMBER, 
	"ND_DOCUROVEN2" NUMBER(15,2), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"C_DOCDISPLAY" CHAR(1 BYTE), 
	"C_PREHLEDDISPLAY" CHAR(1 BYTE), 
	"ID_CISNOMINEE" NUMBER, 
	"NL_ROKPOCSTAVIMPORTSYSTEM" NUMBER(*,0), 
	"ID_TYPPROJEKTU" NUMBER, 
	"ID_KTGODBOR" NUMBER(*,0), 
	"ID_KTGPROJEKT" NUMBER(*,0), 
	"DT_UCETNIOBDOBISTART" DATE, 
	"DT_UCETNIOBDOBIKONEC" DATE, 
	"C_ONLINE" CHAR(1 BYTE), 
	"DT_ONLINEOD" DATE, 
	"C_NOCNIZPRACOVANI" CHAR(1 BYTE), 
	"ID_CISNASTROJUCETNIVYJIMKY" NUMBER(*,0), 
	"ID_CISDATABAZE" NUMBER(*,0), 
	"S_SKUPINALIKE" VARCHAR2(3 BYTE), 
	"ND_BUDGETNAVYSENI_OO" NUMBER(15,2), 
	"ND_BUDGETNAVYSENI_TOP" NUMBER(15,2), 
	"S_DUVODOFFLINE" VARCHAR2(100 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"ID_MNGSEGMENT" NUMBER(*,0), 
	"ID_SPRAVCEKONSOLIDACE" NUMBER(*,0), 
	"ID_MNGSEGMENTBOSS" NUMBER(*,0), 
	"ID_CENTRALA" NUMBER(*,0), 
	"C_UCETNICTVI_V_IFRS" CHAR(1 BYTE), 
	"C_IFRSPRIMARNI" CHAR(1 BYTE), 
	"DT_UNIFIKOVANEDOKLADY" DATE, 
	"C_FEIS_UCETTYP" CHAR(1 BYTE), 
	"C_TESTOVATMAJUCAST" CHAR(1 BYTE), 
	"C_POCITEJMUPOZICI" CHAR(1 BYTE), 
	"C_MULTISEGMENT" CHAR(1 BYTE), 
	"C_EXPORTJAKOPROTISTRANA" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_UCETNISPOL_CART_MENY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISPOL_EPH_02_2016.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISPOL_EPH_02_2016.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_UCETNISPOL_EPH_02_2016
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_UCETNISPOL_EPH_02_2016" 
   (	"ID" NUMBER(*,0), 
	"ID_CISSUBJECT" NUMBER(*,0), 
	"S_ICO" VARCHAR2(20 BYTE), 
	"SPIN_ID" NUMBER(*,0), 
	"TOPAS_ID" VARCHAR2(30 BYTE), 
	"QUEST_ID" CHAR(20 BYTE), 
	"C_EXTSYSTEM" CHAR(1 BYTE), 
	"S_NAZEV" VARCHAR2(128 BYTE), 
	"C_POCITATROZVAHU" CHAR(1 BYTE), 
	"S_SOUBORPREDPONA" VARCHAR2(20 BYTE), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_DBLINK" VARCHAR2(32 BYTE), 
	"C_AUTOMATICKEGENEROVANI" CHAR(1 BYTE), 
	"ID_KATEGORIE" NUMBER(*,0), 
	"C_RKC" CHAR(1 BYTE), 
	"S_ZKRATKA" VARCHAR2(35 BYTE), 
	"DT_LASTCLOSEDATE" DATE, 
	"DT_DATUMARCHIVACE" DATE, 
	"C_OPCE" CHAR(1 BYTE), 
	"ID_CISKATSPOL" NUMBER, 
	"ID_ZODPOVEDNAUCETNI" NUMBER, 
	"ID_ODPOVEDNAOSOBA" NUMBER, 
	"ID_ADMINISTRATOR" NUMBER, 
	"DT_RELATIVEDATE" DATE, 
	"ID_TOPMNG" NUMBER, 
	"S_POZNAMKA" VARCHAR2(10 BYTE), 
	"C_DANOVAZTRATA" CHAR(1 BYTE), 
	"ID_CISOPCE" NUMBER, 
	"ND_DOCUROVEN2" NUMBER(15,2), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"C_DOCDISPLAY" CHAR(1 BYTE), 
	"C_PREHLEDDISPLAY" CHAR(1 BYTE), 
	"ID_CISNOMINEE" NUMBER, 
	"NL_ROKPOCSTAVIMPORTSYSTEM" NUMBER(*,0), 
	"ID_TYPPROJEKTU" NUMBER, 
	"ID_KTGODBOR" NUMBER(*,0), 
	"ID_KTGPROJEKT" NUMBER(*,0), 
	"DT_UCETNIOBDOBISTART" DATE, 
	"DT_UCETNIOBDOBIKONEC" DATE, 
	"C_ONLINE" CHAR(1 BYTE), 
	"DT_ONLINEOD" DATE, 
	"C_NOCNIZPRACOVANI" CHAR(1 BYTE), 
	"ID_CISNASTROJUCETNIVYJIMKY" NUMBER(*,0), 
	"ID_CISDATABAZE" NUMBER(*,0), 
	"S_SKUPINALIKE" VARCHAR2(3 BYTE), 
	"ND_BUDGETNAVYSENI_OO" NUMBER(15,2), 
	"ND_BUDGETNAVYSENI_TOP" NUMBER(15,2), 
	"S_DUVODOFFLINE" VARCHAR2(100 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"ID_MNGSEGMENT" NUMBER(*,0), 
	"ID_SPRAVCEKONSOLIDACE" NUMBER(*,0), 
	"ID_MNGSEGMENTBOSS" NUMBER(*,0), 
	"ID_CENTRALA" NUMBER(*,0), 
	"C_UCETNICTVI_V_IFRS" CHAR(1 BYTE), 
	"C_IFRSPRIMARNI" CHAR(1 BYTE), 
	"DT_UNIFIKOVANEDOKLADY" DATE, 
	"C_FEIS_UCETTYP" CHAR(1 BYTE), 
	"C_TESTOVATMAJUCAST" CHAR(1 BYTE), 
	"C_POCITEJMUPOZICI" CHAR(1 BYTE), 
	"C_MULTISEGMENT" CHAR(1 BYTE), 
	"C_EXPORTJAKOPROTISTRANA" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_UCETNISPOL_EPH_02_2016.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISPOL_LNK_BCK_0312.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISPOL_LNK_BCK_0312.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_UCETNISPOL_LNK_BCK_0312
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_UCETNISPOL_LNK_BCK_0312" 
   (	"ID" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"SPIN_ID" NUMBER(*,0), 
	"TOPAS_ID" VARCHAR2(30 BYTE), 
	"C_EXTSYSTEM" CHAR(1 BYTE), 
	"ID_CISDATABAZE" NUMBER(*,0), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"ID_CISSUBJECT" NUMBER(*,0), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"C_IFRSPRIMARNI" CHAR(1 BYTE), 
	"DT_UNIFIKOVANEDOKLADY" DATE, 
	"C_FEIS_PRENOS" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_UCETNISPOL_LNK_BCK_0312.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISP_AUTOGENERUJ.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISP_AUTOGENERUJ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_UCETNISP_AUTOGENERUJ
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_UCETNISP_AUTOGENERUJ" 
   (	"ID" NUMBER(*,0), 
	"ID_CISSUBJECT" NUMBER(*,0), 
	"S_ICO" VARCHAR2(20 BYTE), 
	"SPIN_ID" NUMBER(*,0), 
	"TOPAS_ID" VARCHAR2(30 BYTE), 
	"QUEST_ID" CHAR(20 BYTE), 
	"C_EXTSYSTEM" CHAR(1 BYTE), 
	"S_NAZEV" VARCHAR2(128 BYTE), 
	"C_POCITATROZVAHU" CHAR(1 BYTE), 
	"S_SOUBORPREDPONA" VARCHAR2(20 BYTE), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_DBLINK" VARCHAR2(32 BYTE), 
	"C_AUTOMATICKEGENEROVANI" CHAR(1 BYTE), 
	"ID_KATEGORIE" NUMBER(*,0), 
	"C_RKC" CHAR(1 BYTE), 
	"S_ZKRATKA" VARCHAR2(35 BYTE), 
	"DT_LASTCLOSEDATE" DATE, 
	"DT_DATUMARCHIVACE" DATE, 
	"C_OPCE" CHAR(1 BYTE), 
	"ID_CISKATSPOL" NUMBER, 
	"ID_ZODPOVEDNAUCETNI" NUMBER, 
	"ID_ODPOVEDNAOSOBA" NUMBER, 
	"ID_ADMINISTRATOR" NUMBER, 
	"DT_RELATIVEDATE" DATE, 
	"ID_TOPMNG" NUMBER, 
	"S_POZNAMKA" VARCHAR2(10 BYTE), 
	"C_DANOVAZTRATA" CHAR(1 BYTE), 
	"ID_CISOPCE" NUMBER, 
	"ND_DOCUROVEN2" NUMBER(15,2), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"C_DOCDISPLAY" CHAR(1 BYTE), 
	"C_PREHLEDDISPLAY" CHAR(1 BYTE), 
	"ID_CISNOMINEE" NUMBER, 
	"NL_ROKPOCSTAVIMPORTSYSTEM" NUMBER(*,0), 
	"ID_TYPPROJEKTU" NUMBER, 
	"ID_KTGODBOR" NUMBER(*,0), 
	"ID_KTGPROJEKT" NUMBER(*,0), 
	"DT_UCETNIOBDOBISTART" DATE, 
	"DT_UCETNIOBDOBIKONEC" DATE, 
	"C_ONLINE" CHAR(1 BYTE), 
	"DT_ONLINEOD" DATE, 
	"C_NOCNIZPRACOVANI" CHAR(1 BYTE), 
	"ID_CISNASTROJUCETNIVYJIMKY" NUMBER(*,0), 
	"ID_CISDATABAZE" NUMBER(*,0), 
	"S_SKUPINALIKE" VARCHAR2(3 BYTE), 
	"ND_BUDGETNAVYSENI_OO" NUMBER(15,2), 
	"ND_BUDGETNAVYSENI_TOP" NUMBER(15,2), 
	"S_DUVODOFFLINE" VARCHAR2(100 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"ID_MNGSEGMENT" NUMBER(*,0), 
	"ID_SPRAVCEKONSOLIDACE" NUMBER(*,0), 
	"ID_MNGSEGMENTBOSS" NUMBER(*,0), 
	"ID_CENTRALA" NUMBER(*,0), 
	"C_UCETNICTVI_V_IFRS" CHAR(1 BYTE), 
	"C_IFRSPRIMARNI" CHAR(1 BYTE), 
	"DT_UNIFIKOVANEDOKLADY" DATE, 
	"C_FEIS_UCETTYP" CHAR(1 BYTE), 
	"C_TESTOVATMAJUCAST" CHAR(1 BYTE), 
	"C_POCITEJMUPOZICI" CHAR(1 BYTE), 
	"C_MULTISEGMENT" CHAR(1 BYTE), 
	"C_EXPORTJAKOPROTISTRANA" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_UCETNISP_AUTOGENERUJ.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISP_AUTOGENERUJ_03.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISP_AUTOGENERUJ_03.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_UCETNISP_AUTOGENERUJ_03
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_UCETNISP_AUTOGENERUJ_03" 
   (	"ID" NUMBER(*,0), 
	"ID_CISSUBJECT" NUMBER(*,0), 
	"S_ICO" VARCHAR2(20 BYTE), 
	"SPIN_ID" NUMBER(*,0), 
	"TOPAS_ID" VARCHAR2(30 BYTE), 
	"QUEST_ID" CHAR(20 BYTE), 
	"C_EXTSYSTEM" CHAR(1 BYTE), 
	"S_NAZEV" VARCHAR2(128 BYTE), 
	"C_POCITATROZVAHU" CHAR(1 BYTE), 
	"S_SOUBORPREDPONA" VARCHAR2(20 BYTE), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_DBLINK" VARCHAR2(32 BYTE), 
	"C_AUTOMATICKEGENEROVANI" CHAR(1 BYTE), 
	"ID_KATEGORIE" NUMBER(*,0), 
	"C_RKC" CHAR(1 BYTE), 
	"S_ZKRATKA" VARCHAR2(35 BYTE), 
	"DT_LASTCLOSEDATE" DATE, 
	"DT_DATUMARCHIVACE" DATE, 
	"C_OPCE" CHAR(1 BYTE), 
	"ID_CISKATSPOL" NUMBER, 
	"ID_ZODPOVEDNAUCETNI" NUMBER, 
	"ID_ODPOVEDNAOSOBA" NUMBER, 
	"ID_ADMINISTRATOR" NUMBER, 
	"DT_RELATIVEDATE" DATE, 
	"ID_TOPMNG" NUMBER, 
	"S_POZNAMKA" VARCHAR2(10 BYTE), 
	"C_DANOVAZTRATA" CHAR(1 BYTE), 
	"ID_CISOPCE" NUMBER, 
	"ND_DOCUROVEN2" NUMBER(15,2), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"C_DOCDISPLAY" CHAR(1 BYTE), 
	"C_PREHLEDDISPLAY" CHAR(1 BYTE), 
	"ID_CISNOMINEE" NUMBER, 
	"NL_ROKPOCSTAVIMPORTSYSTEM" NUMBER(*,0), 
	"ID_TYPPROJEKTU" NUMBER, 
	"ID_KTGODBOR" NUMBER(*,0), 
	"ID_KTGPROJEKT" NUMBER(*,0), 
	"DT_UCETNIOBDOBISTART" DATE, 
	"DT_UCETNIOBDOBIKONEC" DATE, 
	"C_ONLINE" CHAR(1 BYTE), 
	"DT_ONLINEOD" DATE, 
	"C_NOCNIZPRACOVANI" CHAR(1 BYTE), 
	"ID_CISNASTROJUCETNIVYJIMKY" NUMBER(*,0), 
	"ID_CISDATABAZE" NUMBER(*,0), 
	"S_SKUPINALIKE" VARCHAR2(3 BYTE), 
	"ND_BUDGETNAVYSENI_OO" NUMBER(15,2), 
	"ND_BUDGETNAVYSENI_TOP" NUMBER(15,2), 
	"S_DUVODOFFLINE" VARCHAR2(100 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"ID_MNGSEGMENT" NUMBER(*,0), 
	"ID_SPRAVCEKONSOLIDACE" NUMBER(*,0), 
	"ID_MNGSEGMENTBOSS" NUMBER(*,0), 
	"ID_CENTRALA" NUMBER(*,0), 
	"C_UCETNICTVI_V_IFRS" CHAR(1 BYTE), 
	"C_IFRSPRIMARNI" CHAR(1 BYTE), 
	"DT_UNIFIKOVANEDOKLADY" DATE, 
	"C_FEIS_UCETTYP" CHAR(1 BYTE), 
	"C_TESTOVATMAJUCAST" CHAR(1 BYTE), 
	"C_POCITEJMUPOZICI" CHAR(1 BYTE), 
	"C_MULTISEGMENT" CHAR(1 BYTE), 
	"C_EXPORTJAKOPROTISTRANA" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_UCETNISP_AUTOGENERUJ_03.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISP_AUTOGENERUJ_04.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISP_AUTOGENERUJ_04.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_UCETNISP_AUTOGENERUJ_04
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_UCETNISP_AUTOGENERUJ_04" 
   (	"ID" NUMBER(*,0), 
	"ID_CISSUBJECT" NUMBER(*,0), 
	"S_ICO" VARCHAR2(20 BYTE), 
	"SPIN_ID" NUMBER(*,0), 
	"TOPAS_ID" VARCHAR2(30 BYTE), 
	"QUEST_ID" CHAR(20 BYTE), 
	"C_EXTSYSTEM" CHAR(1 BYTE), 
	"S_NAZEV" VARCHAR2(128 BYTE), 
	"C_POCITATROZVAHU" CHAR(1 BYTE), 
	"S_SOUBORPREDPONA" VARCHAR2(20 BYTE), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_DBLINK" VARCHAR2(32 BYTE), 
	"C_AUTOMATICKEGENEROVANI" CHAR(1 BYTE), 
	"ID_KATEGORIE" NUMBER(*,0), 
	"C_RKC" CHAR(1 BYTE), 
	"S_ZKRATKA" VARCHAR2(35 BYTE), 
	"DT_LASTCLOSEDATE" DATE, 
	"DT_DATUMARCHIVACE" DATE, 
	"C_OPCE" CHAR(1 BYTE), 
	"ID_CISKATSPOL" NUMBER, 
	"ID_ZODPOVEDNAUCETNI" NUMBER, 
	"ID_ODPOVEDNAOSOBA" NUMBER, 
	"ID_ADMINISTRATOR" NUMBER, 
	"DT_RELATIVEDATE" DATE, 
	"ID_TOPMNG" NUMBER, 
	"S_POZNAMKA" VARCHAR2(10 BYTE), 
	"C_DANOVAZTRATA" CHAR(1 BYTE), 
	"ID_CISOPCE" NUMBER, 
	"ND_DOCUROVEN2" NUMBER(15,2), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"C_DOCDISPLAY" CHAR(1 BYTE), 
	"C_PREHLEDDISPLAY" CHAR(1 BYTE), 
	"ID_CISNOMINEE" NUMBER, 
	"NL_ROKPOCSTAVIMPORTSYSTEM" NUMBER(*,0), 
	"ID_TYPPROJEKTU" NUMBER, 
	"ID_KTGODBOR" NUMBER(*,0), 
	"ID_KTGPROJEKT" NUMBER(*,0), 
	"DT_UCETNIOBDOBISTART" DATE, 
	"DT_UCETNIOBDOBIKONEC" DATE, 
	"C_ONLINE" CHAR(1 BYTE), 
	"DT_ONLINEOD" DATE, 
	"C_NOCNIZPRACOVANI" CHAR(1 BYTE), 
	"ID_CISNASTROJUCETNIVYJIMKY" NUMBER(*,0), 
	"ID_CISDATABAZE" NUMBER(*,0), 
	"S_SKUPINALIKE" VARCHAR2(3 BYTE), 
	"ND_BUDGETNAVYSENI_OO" NUMBER(15,2), 
	"ND_BUDGETNAVYSENI_TOP" NUMBER(15,2), 
	"S_DUVODOFFLINE" VARCHAR2(100 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"ID_MNGSEGMENT" NUMBER(*,0), 
	"ID_SPRAVCEKONSOLIDACE" NUMBER(*,0), 
	"ID_MNGSEGMENTBOSS" NUMBER(*,0), 
	"ID_CENTRALA" NUMBER(*,0), 
	"C_UCETNICTVI_V_IFRS" CHAR(1 BYTE), 
	"C_IFRSPRIMARNI" CHAR(1 BYTE), 
	"DT_UNIFIKOVANEDOKLADY" DATE, 
	"C_FEIS_UCETTYP" CHAR(1 BYTE), 
	"C_TESTOVATMAJUCAST" CHAR(1 BYTE), 
	"C_POCITEJMUPOZICI" CHAR(1 BYTE), 
	"C_MULTISEGMENT" CHAR(1 BYTE), 
	"C_EXPORTJAKOPROTISTRANA" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_UCETNISP_AUTOGENERUJ_04.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISP_AUTOGENERUJ_06.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISP_AUTOGENERUJ_06.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_UCETNISP_AUTOGENERUJ_06
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_UCETNISP_AUTOGENERUJ_06" 
   (	"ID" NUMBER(*,0), 
	"ID_CISSUBJECT" NUMBER(*,0), 
	"S_ICO" VARCHAR2(20 BYTE), 
	"SPIN_ID" NUMBER(*,0), 
	"TOPAS_ID" VARCHAR2(30 BYTE), 
	"QUEST_ID" CHAR(20 BYTE), 
	"C_EXTSYSTEM" CHAR(1 BYTE), 
	"S_NAZEV" VARCHAR2(128 BYTE), 
	"C_POCITATROZVAHU" CHAR(1 BYTE), 
	"S_SOUBORPREDPONA" VARCHAR2(20 BYTE), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_DBLINK" VARCHAR2(32 BYTE), 
	"C_AUTOMATICKEGENEROVANI" CHAR(1 BYTE), 
	"ID_KATEGORIE" NUMBER(*,0), 
	"C_RKC" CHAR(1 BYTE), 
	"S_ZKRATKA" VARCHAR2(35 BYTE), 
	"DT_LASTCLOSEDATE" DATE, 
	"DT_DATUMARCHIVACE" DATE, 
	"C_OPCE" CHAR(1 BYTE), 
	"ID_CISKATSPOL" NUMBER, 
	"ID_ZODPOVEDNAUCETNI" NUMBER, 
	"ID_ODPOVEDNAOSOBA" NUMBER, 
	"ID_ADMINISTRATOR" NUMBER, 
	"DT_RELATIVEDATE" DATE, 
	"ID_TOPMNG" NUMBER, 
	"S_POZNAMKA" VARCHAR2(10 BYTE), 
	"C_DANOVAZTRATA" CHAR(1 BYTE), 
	"ID_CISOPCE" NUMBER, 
	"ND_DOCUROVEN2" NUMBER(15,2), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"C_DOCDISPLAY" CHAR(1 BYTE), 
	"C_PREHLEDDISPLAY" CHAR(1 BYTE), 
	"ID_CISNOMINEE" NUMBER, 
	"NL_ROKPOCSTAVIMPORTSYSTEM" NUMBER(*,0), 
	"ID_TYPPROJEKTU" NUMBER, 
	"ID_KTGODBOR" NUMBER(*,0), 
	"ID_KTGPROJEKT" NUMBER(*,0), 
	"DT_UCETNIOBDOBISTART" DATE, 
	"DT_UCETNIOBDOBIKONEC" DATE, 
	"C_ONLINE" CHAR(1 BYTE), 
	"DT_ONLINEOD" DATE, 
	"C_NOCNIZPRACOVANI" CHAR(1 BYTE), 
	"ID_CISNASTROJUCETNIVYJIMKY" NUMBER(*,0), 
	"ID_CISDATABAZE" NUMBER(*,0), 
	"S_SKUPINALIKE" VARCHAR2(3 BYTE), 
	"ND_BUDGETNAVYSENI_OO" NUMBER(15,2), 
	"ND_BUDGETNAVYSENI_TOP" NUMBER(15,2), 
	"S_DUVODOFFLINE" VARCHAR2(100 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"ID_MNGSEGMENT" NUMBER(*,0), 
	"ID_SPRAVCEKONSOLIDACE" NUMBER(*,0), 
	"ID_MNGSEGMENTBOSS" NUMBER(*,0), 
	"ID_CENTRALA" NUMBER(*,0), 
	"C_UCETNICTVI_V_IFRS" CHAR(1 BYTE), 
	"C_IFRSPRIMARNI" CHAR(1 BYTE), 
	"DT_UNIFIKOVANEDOKLADY" DATE, 
	"C_FEIS_UCETTYP" CHAR(1 BYTE), 
	"C_TESTOVATMAJUCAST" CHAR(1 BYTE), 
	"C_POCITEJMUPOZICI" CHAR(1 BYTE), 
	"C_MULTISEGMENT" CHAR(1 BYTE), 
	"C_EXPORTJAKOPROTISTRANA" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_UCETNISP_AUTOGENERUJ_06.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISP_AUTOGENERUJ_23.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISP_AUTOGENERUJ_23.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_UCETNISP_AUTOGENERUJ_23
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_UCETNISP_AUTOGENERUJ_23" 
   (	"ID" NUMBER(*,0), 
	"ID_CISSUBJECT" NUMBER(*,0), 
	"S_ICO" VARCHAR2(20 BYTE), 
	"SPIN_ID" NUMBER(*,0), 
	"TOPAS_ID" VARCHAR2(30 BYTE), 
	"QUEST_ID" CHAR(20 BYTE), 
	"C_EXTSYSTEM" CHAR(1 BYTE), 
	"S_NAZEV" VARCHAR2(128 BYTE), 
	"C_POCITATROZVAHU" CHAR(1 BYTE), 
	"S_SOUBORPREDPONA" VARCHAR2(20 BYTE), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_DBLINK" VARCHAR2(32 BYTE), 
	"C_AUTOMATICKEGENEROVANI" CHAR(1 BYTE), 
	"ID_KATEGORIE" NUMBER(*,0), 
	"C_RKC" CHAR(1 BYTE), 
	"S_ZKRATKA" VARCHAR2(35 BYTE), 
	"DT_LASTCLOSEDATE" DATE, 
	"DT_DATUMARCHIVACE" DATE, 
	"C_OPCE" CHAR(1 BYTE), 
	"ID_CISKATSPOL" NUMBER, 
	"ID_ZODPOVEDNAUCETNI" NUMBER, 
	"ID_ODPOVEDNAOSOBA" NUMBER, 
	"ID_ADMINISTRATOR" NUMBER, 
	"DT_RELATIVEDATE" DATE, 
	"ID_TOPMNG" NUMBER, 
	"S_POZNAMKA" VARCHAR2(10 BYTE), 
	"C_DANOVAZTRATA" CHAR(1 BYTE), 
	"ID_CISOPCE" NUMBER, 
	"ND_DOCUROVEN2" NUMBER(15,2), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"C_DOCDISPLAY" CHAR(1 BYTE), 
	"C_PREHLEDDISPLAY" CHAR(1 BYTE), 
	"ID_CISNOMINEE" NUMBER, 
	"NL_ROKPOCSTAVIMPORTSYSTEM" NUMBER(*,0), 
	"ID_TYPPROJEKTU" NUMBER, 
	"ID_KTGODBOR" NUMBER(*,0), 
	"ID_KTGPROJEKT" NUMBER(*,0), 
	"DT_UCETNIOBDOBISTART" DATE, 
	"DT_UCETNIOBDOBIKONEC" DATE, 
	"C_ONLINE" CHAR(1 BYTE), 
	"DT_ONLINEOD" DATE, 
	"C_NOCNIZPRACOVANI" CHAR(1 BYTE), 
	"ID_CISNASTROJUCETNIVYJIMKY" NUMBER(*,0), 
	"ID_CISDATABAZE" NUMBER(*,0), 
	"S_SKUPINALIKE" VARCHAR2(3 BYTE), 
	"ND_BUDGETNAVYSENI_OO" NUMBER(15,2), 
	"ND_BUDGETNAVYSENI_TOP" NUMBER(15,2), 
	"S_DUVODOFFLINE" VARCHAR2(100 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"ID_MNGSEGMENT" NUMBER(*,0), 
	"ID_SPRAVCEKONSOLIDACE" NUMBER(*,0), 
	"ID_MNGSEGMENTBOSS" NUMBER(*,0), 
	"ID_CENTRALA" NUMBER(*,0), 
	"C_UCETNICTVI_V_IFRS" CHAR(1 BYTE), 
	"C_IFRSPRIMARNI" CHAR(1 BYTE), 
	"DT_UNIFIKOVANEDOKLADY" DATE, 
	"C_FEIS_UCETTYP" CHAR(1 BYTE), 
	"C_TESTOVATMAJUCAST" CHAR(1 BYTE), 
	"C_POCITEJMUPOZICI" CHAR(1 BYTE), 
	"C_MULTISEGMENT" CHAR(1 BYTE), 
	"C_EXPORTJAKOPROTISTRANA" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_UCETNISP_AUTOGENERUJ_23.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCSPOLPREDAVANI.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_UCSPOLPREDAVANI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_UCSPOLPREDAVANI
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_UCSPOLPREDAVANI" 
   (	"ID_KTGUCETNISPOLECNOST" NUMBER, 
	"ID_CISPRENOSPRIORITA" NUMBER, 
	"S_ACCSTATUS" VARCHAR2(50 BYTE), 
	"S_UZAVRENEUCETNICTVI" VARCHAR2(50 BYTE), 
	"DT_DATUM" DATE, 
	"DT_ODSOUHLASENOJARKA" DATE, 
	"ID_ODSOUHLASENOJARKA" NUMBER, 
	"DT_ODSOUHLASENOJANKA" DATE, 
	"ID_ODSOUHLASENOJANKA" NUMBER, 
	"DT_ODSOUHLASENOTOP" DATE, 
	"ID_ODSOUHLASENOTOP" NUMBER, 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"DT_DATUMZMENY" DATE, 
	"ID_CISPRENOSKATEGORIE" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_UCSPOLPREDAVANI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCSPOL_AUTOGEN_07_09_15.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_UCSPOL_AUTOGEN_07_09_15.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_UCSPOL_AUTOGEN_07_09_15
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_UCSPOL_AUTOGEN_07_09_15" 
   (	"ID" NUMBER(*,0), 
	"ID_CISSUBJECT" NUMBER(*,0), 
	"S_ICO" VARCHAR2(20 BYTE), 
	"SPIN_ID" NUMBER(*,0), 
	"TOPAS_ID" VARCHAR2(30 BYTE), 
	"QUEST_ID" CHAR(20 BYTE), 
	"C_EXTSYSTEM" CHAR(1 BYTE), 
	"S_NAZEV" VARCHAR2(128 BYTE), 
	"C_POCITATROZVAHU" CHAR(1 BYTE), 
	"S_SOUBORPREDPONA" VARCHAR2(20 BYTE), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_DBLINK" VARCHAR2(32 BYTE), 
	"C_AUTOMATICKEGENEROVANI" CHAR(1 BYTE), 
	"ID_KATEGORIE" NUMBER(*,0), 
	"C_RKC" CHAR(1 BYTE), 
	"S_ZKRATKA" VARCHAR2(35 BYTE), 
	"DT_LASTCLOSEDATE" DATE, 
	"DT_DATUMARCHIVACE" DATE, 
	"C_OPCE" CHAR(1 BYTE), 
	"ID_CISKATSPOL" NUMBER, 
	"ID_ZODPOVEDNAUCETNI" NUMBER, 
	"ID_ODPOVEDNAOSOBA" NUMBER, 
	"ID_ADMINISTRATOR" NUMBER, 
	"DT_RELATIVEDATE" DATE, 
	"ID_TOPMNG" NUMBER, 
	"S_POZNAMKA" VARCHAR2(10 BYTE), 
	"C_DANOVAZTRATA" CHAR(1 BYTE), 
	"ID_CISOPCE" NUMBER, 
	"ND_DOCUROVEN2" NUMBER(15,2), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"C_DOCDISPLAY" CHAR(1 BYTE), 
	"C_PREHLEDDISPLAY" CHAR(1 BYTE), 
	"ID_CISNOMINEE" NUMBER, 
	"NL_ROKPOCSTAVIMPORTSYSTEM" NUMBER(*,0), 
	"ID_TYPPROJEKTU" NUMBER, 
	"ID_KTGODBOR" NUMBER(*,0), 
	"ID_KTGPROJEKT" NUMBER(*,0), 
	"DT_UCETNIOBDOBISTART" DATE, 
	"DT_UCETNIOBDOBIKONEC" DATE, 
	"C_ONLINE" CHAR(1 BYTE), 
	"DT_ONLINEOD" DATE, 
	"C_NOCNIZPRACOVANI" CHAR(1 BYTE), 
	"ID_CISNASTROJUCETNIVYJIMKY" NUMBER(*,0), 
	"ID_CISDATABAZE" NUMBER(*,0), 
	"S_SKUPINALIKE" VARCHAR2(3 BYTE), 
	"ND_BUDGETNAVYSENI_OO" NUMBER(15,2), 
	"ND_BUDGETNAVYSENI_TOP" NUMBER(15,2), 
	"S_DUVODOFFLINE" VARCHAR2(100 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"ID_MNGSEGMENT" NUMBER(*,0), 
	"ID_SPRAVCEKONSOLIDACE" NUMBER(*,0), 
	"ID_MNGSEGMENTBOSS" NUMBER(*,0), 
	"ID_CENTRALA" NUMBER(*,0), 
	"C_UCETNICTVI_V_IFRS" CHAR(1 BYTE), 
	"C_IFRSPRIMARNI" CHAR(1 BYTE), 
	"DT_UNIFIKOVANEDOKLADY" DATE, 
	"C_FEIS_UCETTYP" CHAR(1 BYTE), 
	"C_TESTOVATMAJUCAST" CHAR(1 BYTE), 
	"C_POCITEJMUPOZICI" CHAR(1 BYTE), 
	"C_MULTISEGMENT" CHAR(1 BYTE), 
	"C_EXPORTJAKOPROTISTRANA" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_UCSPOL_AUTOGEN_07_09_15.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_USEK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_USEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_USEK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_USEK" 
   (	"ID" NUMBER, 
	"ID_KTGUCETNISPOLECNOST" NUMBER, 
	"S_NAZEV" VARCHAR2(50 BYTE), 
	"ID_ODPOVEDNAOSOBA" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_USEK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_US_BCK_RKC_2017.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_US_BCK_RKC_2017.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_US_BCK_RKC_2017
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_US_BCK_RKC_2017" 
   (	"ID" NUMBER(*,0), 
	"ID_CISSUBJECT" NUMBER(*,0), 
	"S_ICO" VARCHAR2(20 BYTE), 
	"SPIN_ID" NUMBER(*,0), 
	"TOPAS_ID" VARCHAR2(30 BYTE), 
	"QUEST_ID" CHAR(20 BYTE), 
	"C_EXTSYSTEM" CHAR(1 BYTE), 
	"S_NAZEV" VARCHAR2(128 BYTE), 
	"C_POCITATROZVAHU" CHAR(1 BYTE), 
	"S_SOUBORPREDPONA" VARCHAR2(20 BYTE), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_DBLINK" VARCHAR2(32 BYTE), 
	"C_AUTOMATICKEGENEROVANI" CHAR(1 BYTE), 
	"ID_KATEGORIE" NUMBER(*,0), 
	"C_RKC" CHAR(1 BYTE), 
	"S_ZKRATKA" VARCHAR2(35 BYTE), 
	"DT_LASTCLOSEDATE" DATE, 
	"DT_DATUMARCHIVACE" DATE, 
	"C_OPCE" CHAR(1 BYTE), 
	"ID_CISKATSPOL" NUMBER, 
	"ID_ZODPOVEDNAUCETNI" NUMBER, 
	"ID_ODPOVEDNAOSOBA" NUMBER, 
	"ID_ADMINISTRATOR" NUMBER, 
	"DT_RELATIVEDATE" DATE, 
	"ID_TOPMNG" NUMBER, 
	"S_POZNAMKA" VARCHAR2(10 BYTE), 
	"C_DANOVAZTRATA" CHAR(1 BYTE), 
	"ID_CISOPCE" NUMBER, 
	"ND_DOCUROVEN2" NUMBER(15,2), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"C_DOCDISPLAY" CHAR(1 BYTE), 
	"C_PREHLEDDISPLAY" CHAR(1 BYTE), 
	"ID_CISNOMINEE" NUMBER, 
	"NL_ROKPOCSTAVIMPORTSYSTEM" NUMBER(*,0), 
	"ID_TYPPROJEKTU" NUMBER, 
	"ID_KTGODBOR" NUMBER(*,0), 
	"ID_KTGPROJEKT" NUMBER(*,0), 
	"DT_UCETNIOBDOBISTART" DATE, 
	"DT_UCETNIOBDOBIKONEC" DATE, 
	"C_ONLINE" CHAR(1 BYTE), 
	"DT_ONLINEOD" DATE, 
	"C_NOCNIZPRACOVANI" CHAR(1 BYTE), 
	"ID_CISNASTROJUCETNIVYJIMKY" NUMBER(*,0), 
	"ID_CISDATABAZE" NUMBER(*,0), 
	"S_SKUPINALIKE" VARCHAR2(3 BYTE), 
	"ND_BUDGETNAVYSENI_OO" NUMBER(15,2), 
	"ND_BUDGETNAVYSENI_TOP" NUMBER(15,2), 
	"S_DUVODOFFLINE" VARCHAR2(100 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"ID_MNGSEGMENT" NUMBER(*,0), 
	"ID_SPRAVCEKONSOLIDACE" NUMBER(*,0), 
	"ID_MNGSEGMENTBOSS" NUMBER(*,0), 
	"ID_CENTRALA" NUMBER(*,0), 
	"C_UCETNICTVI_V_IFRS" CHAR(1 BYTE), 
	"C_IFRSPRIMARNI" CHAR(1 BYTE), 
	"DT_UNIFIKOVANEDOKLADY" DATE, 
	"C_FEIS_UCETTYP" CHAR(1 BYTE), 
	"C_TESTOVATMAJUCAST" CHAR(1 BYTE), 
	"C_POCITEJMUPOZICI" CHAR(1 BYTE), 
	"C_MULTISEGMENT" CHAR(1 BYTE), 
	"C_EXPORTJAKOPROTISTRANA" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON TABLE "DB_JT"."KP_KTG_US_BCK_RKC_2017"  IS 'zaloha k 23.7.2017 koli C_RKC';


PROMPT Completed KP_KTG_US_BCK_RKC_2017.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_ZISKSR.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_KTG_ZISKSR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_KTG_ZISKSR
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_KTG_ZISKSR" 
   (	"ID" NUMBER, 
	"ID_SKUPINA" NUMBER, 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"C_KONTROLAVYUZITI" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_KTG_ZISKSR.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_APPUSERSPOLPROTOKOL.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_APPUSERSPOLPROTOKOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_APPUSERSPOLPROTOKOL
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_APPUSERSPOLPROTOKOL" 
   (	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"DT_DATUMZMENY" DATE DEFAULT sysdate, 
	"S_AKCE" VARCHAR2(500 BYTE), 
	"ID" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_APPUSERSPOLPROTOKOL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_BUDGETMUSTEK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_BUDGETMUSTEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_BUDGETMUSTEK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_BUDGETMUSTEK" 
   (	"S_AKCE" CHAR(1 BYTE), 
	"ID" NUMBER, 
	"ID_CISSUBJECT" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"DT_DATUMZMENY" DATE, 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_BUDGETMUSTEK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_BUDGETNAVYSENI.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_BUDGETNAVYSENI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_BUDGETNAVYSENI
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_BUDGETNAVYSENI" 
   (	"ID_BUDGETPOLOZKA" NUMBER(*,0), 
	"ND_NAVYSENI" NUMBER(15,2), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_NOVAUROVEN" NUMBER(15,2), 
	"ID_DOKUMENT" NUMBER, 
	"DT_DATUMZMENY" DATE DEFAULT sysdate
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_BUDGETNAVYSENI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_BUDGETPOLOZKA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_BUDGETPOLOZKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_BUDGETPOLOZKA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_BUDGETPOLOZKA" 
   (	"ID" NUMBER, 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRAN" NUMBER, 
	"ND_CASTKA" NUMBER(17,2), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ID_ODBOROO" NUMBER, 
	"DT_SCHVALENOODBOR" DATE, 
	"ID_GESTOR" NUMBER, 
	"DT_SCHVALENOGESTOR" DATE, 
	"ID_UCSPOLOO" NUMBER, 
	"DT_SCHVALENOUCSPOL" DATE, 
	"ID_UCSPOLTOP" NUMBER, 
	"DT_SCHVALENOTOP" DATE, 
	"S_POZNAMKA" VARCHAR2(250 BYTE), 
	"ID_APPUSER" NUMBER, 
	"DT_DATUMZMENY" DATE DEFAULT sysdate
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_BUDGETPOLOZKA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_CUSTOMER_GROUP.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_CUSTOMER_GROUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_CUSTOMER_GROUP
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_CUSTOMER_GROUP" 
   (	"CUST_GROUP_NAME" VARCHAR2(35 BYTE), 
	"CUST_GROUP_CODE" VARCHAR2(5 BYTE), 
	"CUST_STRUC_NAME" VARCHAR2(35 BYTE), 
	"CUST_STRUC_CODE" VARCHAR2(3 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"C_AKCE" CHAR(1 BYTE), 
	"S_UZIVATEL" VARCHAR2(100 BYTE), 
	"DT_ZMENA" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_CUSTOMER_GROUP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_CUSTOMER_GROUP_220420.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_CUSTOMER_GROUP_220420.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_CUSTOMER_GROUP_220420
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_CUSTOMER_GROUP_220420" 
   (	"CUST_GROUP_NAME" VARCHAR2(35 BYTE), 
	"CUST_GROUP_CODE" VARCHAR2(5 BYTE), 
	"CUST_STRUC_NAME" VARCHAR2(35 BYTE), 
	"CUST_STRUC_CODE" VARCHAR2(3 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"C_AKCE" CHAR(1 BYTE), 
	"S_UZIVATEL" VARCHAR2(100 BYTE), 
	"DT_ZMENA" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_CUSTOMER_GROUP_220420.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_DELGENEROVANIZAMEK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_DELGENEROVANIZAMEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_DELGENEROVANIZAMEK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_DELGENEROVANIZAMEK" 
   (	"ID_CISDOKLAD" NUMBER, 
	"ID_KTGUCETNISPOLECNOST" NUMBER, 
	"DT_DATUM" DATE, 
	"ID_CISZAMEK" NUMBER, 
	"DT_TIMESTAMP" DATE DEFAULT sysdate, 
	"S_UZIVATEL" VARCHAR2(100 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_DELGENEROVANIZAMEK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_DOKLADGENEROVANI.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_DOKLADGENEROVANI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_DOKLADGENEROVANI
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_DOKLADGENEROVANI" 
   (	"ID_DOKLAD" NUMBER, 
	"ID_FRONTA" NUMBER, 
	"ID_KTGUCETNISPOLECNOST" NUMBER, 
	"DT_DATUM" DATE, 
	"NL_KROK" NUMBER, 
	"ID_KTGDOKLAD" NUMBER, 
	"ID_SUBKONSOLIDACE" NUMBER, 
	"DT_DATUMSTART" DATE, 
	"DT_DATUMKONEC" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_DOKLADGENEROVANI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_DOKLADMAJUCASTVYJIMKA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_DOKLADMAJUCASTVYJIMKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_DOKLADMAJUCASTVYJIMKA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_DOKLADMAJUCASTVYJIMKA" 
   (	"S_AKCE" CHAR(1 BYTE), 
	"ID_KTGDOKLADMAJUCASTVYJIMKA" NUMBER(*,0), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_POPIS" VARCHAR2(256 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"DT_ZMENA" DATE DEFAULT sysdate
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_DOKLADMAJUCASTVYJIMKA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_DOKUMENT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_DOKUMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_DOKUMENT
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_DOKUMENT" 
   (	"C_AKCE" CHAR(1 BYTE), 
	"DT_ZMENA" DATE DEFAULT SYSDATE, 
	"ID" NUMBER, 
	"ID_CISDOKUMENT" NUMBER, 
	"ID_KTGUCETNISPOLECNOST" NUMBER, 
	"DT_DATUMZADANI" DATE DEFAULT sysdate, 
	"ID_ZADAVATEL" NUMBER, 
	"S_POPIS" VARCHAR2(500 BYTE), 
	"ID_TYPTRANSAKCE" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_PISEMNE" VARCHAR2(3 BYTE), 
	"C_TYPIZOVANATRAN" CHAR(1 BYTE), 
	"DT_TYPIZOVANAOD" DATE, 
	"DT_TYPIZOVANADO" DATE, 
	"DT_DATUMZAUCTOVANI" DATE, 
	"ID_SPOLECNOST" NUMBER, 
	"S_CISLODOKLADU" VARCHAR2(20 BYTE), 
	"DT_DATUMSPLATNOSTI" DATE, 
	"ID_APPUSER" NUMBER, 
	"ID_ZAUCT" NUMBER, 
	"S_PROTISTRANA" VARCHAR2(100 BYTE), 
	"ID_CISSTATUS" NUMBER DEFAULT 0, 
	"C_POKLADNITRANSAKCE" CHAR(1 BYTE) DEFAULT '0', 
	"ID_GESTOR" NUMBER, 
	"DT_GESTORSCHVALENO" DATE, 
	"DT_POZADDATUMUHRADY" DATE, 
	"DT_REALDATUMUHRADY" DATE, 
	"DT_GESTORZAMITNUTO" DATE, 
	"S_GESTORZAMITNUTO" VARCHAR2(100 BYTE), 
	"DT_ZADAVATELZAMITNUTO" DATE, 
	"S_ZADAVATELZAMITNUTO" VARCHAR2(100 BYTE), 
	"ID_TYPIZLINK" NUMBER, 
	"S_DUVODZRUSENI" VARCHAR2(50 BYTE), 
	"ID_UCSPOLUHRADA" NUMBER, 
	"DT_ZAUCTUHRADA" DATE, 
	"ID_ZAUCTUHRADA" NUMBER, 
	"ID_TYPPRECENENI" NUMBER, 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UCET2" VARCHAR2(10 BYTE), 
	"C_DPH" CHAR(1 BYTE) DEFAULT '0', 
	"ID_BUDGET" NUMBER(*,0), 
	"ID_TTDEVELOPER" NUMBER(*,0), 
	"ID_CISUHRADA" NUMBER(*,0), 
	"DT_UCETNIZAMITNUTO" DATE, 
	"S_UCETNIZAMITNUTO" VARCHAR2(100 BYTE), 
	"ID_KTGUCETNISPOLECNOST2" NUMBER(*,0), 
	"S_UCETB" VARCHAR2(10 BYTE), 
	"S_UCETB2" VARCHAR2(10 BYTE), 
	"CERPAT_REZERVU" VARCHAR2(1 BYTE), 
	"DT_NAVYSENI_SCHVALENO" DATE, 
	"DT_NAVYSENI_ZAMITNUTO" DATE, 
	"S_NAVYSENI_ZAMITNUTO" VARCHAR2(100 BYTE), 
	"ID_NAVYSENI_MB" NUMBER, 
	"CISLOFA" VARCHAR2(20 BYTE), 
	"DATPRIJ" DATE, 
	"DATDPH" DATE, 
	"CASTKA" NUMBER(27,2), 
	"FEIS_PRENOS" CHAR(1 BYTE), 
	"DATODES" DATE, 
	"TYP_FKT" NUMBER, 
	"C_CAPEX_OPEX" VARCHAR2(1 BYTE), 
	"S_FEISTEXT" VARCHAR2(250 BYTE), 
	"DATVYSTAVENI" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_DOKUMENT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_DOKUMENTRADEK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_DOKUMENTRADEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_DOKUMENTRADEK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_DOKUMENTRADEK" 
   (	"C_AKCE" CHAR(1 BYTE), 
	"DT_ZMENA" DATE DEFAULT SYSDATE, 
	"ID" NUMBER, 
	"ID_DOKUMENT" NUMBER, 
	"ID_ODBOR" NUMBER, 
	"ID_PROJEKT" NUMBER, 
	"ND_CASTKA" NUMBER(15,2), 
	"ID_ODBOROO" NUMBER, 
	"DT_SCHVALENOODBOR" DATE, 
	"ID_PROJEKTMAN" NUMBER, 
	"DT_SCHVALENOPROJEKT" DATE, 
	"ID_UCSPOLOO" NUMBER, 
	"DT_SCHVALENOUCSPOL" DATE, 
	"ID_UCSPOLTOP" NUMBER, 
	"DT_SCHVALENOTOP" DATE, 
	"S_KOMENTAR" VARCHAR2(100 BYTE), 
	"DT_DATUMPREFAKT" DATE, 
	"ID_PREFAKT" NUMBER, 
	"C_KPREFAKT" CHAR(1 BYTE), 
	"DT_DATUMZADANI" DATE DEFAULT sysdate, 
	"C_REMOVED" CHAR(1 BYTE) DEFAULT '0', 
	"C_ZOBJEDNAVKY" CHAR(1 BYTE) DEFAULT '0', 
	"ID_ZAMITNUTO" NUMBER, 
	"DT_ZAMITNUTO" DATE, 
	"S_ZAMITNUTO" VARCHAR2(100 BYTE), 
	"ID_DOKUMENTORIG" NUMBER, 
	"ID_ODBOROOREAL" NUMBER, 
	"ID_PROJEKTMANREAL" NUMBER, 
	"ID_UCSPOLOOREAL" NUMBER, 
	"ID_UCSPOLTOPREAL" NUMBER, 
	"ND_OBJ_CASTKA_VOLNA" NUMBER(15,2), 
	"ID_OBJ_RADEK" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_DOKUMENTRADEK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_EVIADMINSPOLECNOST.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_EVIADMINSPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_EVIADMINSPOLECNOST
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_EVIADMINSPOLECNOST" 
   (	"S_AKCE" CHAR(1 BYTE), 
	"ID" NUMBER, 
	"S_NAZEV" VARCHAR2(128 BYTE), 
	"S_STAT" VARCHAR2(3 BYTE), 
	"ID_EXTERNIADMIN" NUMBER, 
	"ID_ADMINISTRATOR" NUMBER, 
	"ID_STATUS" NUMBER, 
	"ID_KTGUCETNISPOLECNOST" NUMBER, 
	"S_ICO" VARCHAR2(20 BYTE), 
	"DT_DATUMZALOZENI" DATE, 
	"C_NAVRH" CHAR(1 BYTE), 
	"S_NAZEVNAVRH" VARCHAR2(128 BYTE), 
	"S_ICONAVRH" VARCHAR2(20 BYTE), 
	"ID_ADMINISTRATORNAVRH" NUMBER, 
	"ID_TYPSPOL" NUMBER DEFAULT 1, 
	"DT_DATUMZMENY" DATE DEFAULT SYSDATE, 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"S_ICODOKUMENTY" VARCHAR2(25 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_EVIADMINSPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_EVIOBCHODNIREJSTRIK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_EVIOBCHODNIREJSTRIK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_EVIOBCHODNIREJSTRIK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_EVIOBCHODNIREJSTRIK" 
   (	"ID" NUMBER(*,0), 
	"ID_CISOBCHODNIREJSTRIK" NUMBER(*,0), 
	"DT_DATUM" DATE, 
	"ID_ADMINSPOLECNOST" NUMBER(*,0), 
	"DT_DATUMZMENY" DATE DEFAULT sysdate
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_EVIOBCHODNIREJSTRIK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_FINANCNIINVESTICE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_FINANCNIINVESTICE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_FINANCNIINVESTICE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_FINANCNIINVESTICE" 
   (	"C_AKCE" CHAR(1 BYTE), 
	"ID" NUMBER, 
	"ID_KTGSPOLECNOST" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"DT_ZMENA" DATE DEFAULT sysdate, 
	"S_UZIVATEL" VARCHAR2(20 BYTE), 
	"S_ISIN" VARCHAR2(13 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_FINANCNIINVESTICE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_FININVESTICEEMISE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_FININVESTICEEMISE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_FININVESTICEEMISE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_FININVESTICEEMISE" 
   (	"S_AKCE" CHAR(1 BYTE), 
	"ID_KTGFINANCNIINVESTICE" NUMBER(*,0), 
	"ID_PARENT" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"NL_POCETKUSU" NUMBER(*,0), 
	"NL_NOMINAL" NUMBER(17,4), 
	"ND_ZAKLADNIJMENI" NUMBER(15,2), 
	"DT_ZMENA" DATE DEFAULT sysdate, 
	"S_UZIVATEL" VARCHAR2(20 BYTE), 
	"C_INVESTICE" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_FININVESTICEEMISE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_GENEROVANIZAMEK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_GENEROVANIZAMEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_GENEROVANIZAMEK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_GENEROVANIZAMEK" 
   (	"ID_CISDOKLAD" NUMBER, 
	"ID_KTGUCETNISPOLECNOST" NUMBER, 
	"DT_DATUM" DATE, 
	"ID_CISZAMEK" NUMBER, 
	"DT_TIMESTAMP" DATE DEFAULT sysdate, 
	"S_UZIVATEL" VARCHAR2(100 BYTE), 
	"ID_KTGAPPUSER" NUMBER(*,0), 
	"S_AKCE" CHAR(1 BYTE) DEFAULT 'I', 
	"NL_KROK" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_GENEROVANIZAMEK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_GENZAMEKZAMITNUTI.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_GENZAMEKZAMITNUTI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_GENZAMEKZAMITNUTI
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_GENZAMEKZAMITNUTI" 
   (	"S_AKCE" CHAR(1 BYTE), 
	"ID_CISDOKLAD" NUMBER, 
	"ID_KTGUCETNISPOLECNOST" NUMBER, 
	"DT_DATUM" DATE, 
	"ID_CISZAMEK" NUMBER, 
	"DT_TIMESTAMP" DATE DEFAULT sysdate, 
	"S_UZIVATEL" VARCHAR2(100 BYTE), 
	"S_DUVOD" VARCHAR2(1000 BYTE), 
	"ID_KTGAPPUSER" NUMBER(*,0), 
	"NL_KROK" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_GENZAMEKZAMITNUTI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_IFRSPRAVIDLO.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_IFRSPRAVIDLO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_IFRSPRAVIDLO
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_IFRSPRAVIDLO" 
   (	"S_AKCE" CHAR(1 BYTE), 
	"ID_KTGIFRSPRAVIDLO" NUMBER(*,0), 
	"ID_PARENT" NUMBER(*,0), 
	"ID_PORADI" NUMBER(*,0), 
	"ID_CISIFRSTYPPRAVIDLO" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"S_POZNAMKA" VARCHAR2(128 BYTE), 
	"C_VALIDNI" CHAR(1 BYTE), 
	"S_ERRORHLASKA" VARCHAR2(128 BYTE), 
	"DT_ZMENADEFINICEDETAIL" DATE, 
	"DT_KONTROLA" DATE, 
	"S_VALIDACEUCET" VARCHAR2(10 BYTE), 
	"ND_VALIDACEHODNOTA" NUMBER(15,2), 
	"DT_ZMENA" DATE DEFAULT sysdate, 
	"S_UZIVATEL" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_IFRSPRAVIDLO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_IFRSPRAVIDLODETAIL.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_IFRSPRAVIDLODETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_IFRSPRAVIDLODETAIL
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_IFRSPRAVIDLODETAIL" 
   (	"S_AKCE" CHAR(1 BYTE), 
	"ID_KTGIFRSPRAVIDLO" NUMBER(*,0), 
	"ID_PORADI" NUMBER(*,0), 
	"ID_PORADIPODMINKA" NUMBER(*,0), 
	"ID_CISIFRSPRAVDETAILTYP" NUMBER(*,0), 
	"S_POZNAMKA" VARCHAR2(128 BYTE), 
	"S_UCETMD" VARCHAR2(10 BYTE), 
	"S_UCETD" VARCHAR2(10 BYTE), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKA" NUMBER(15,2), 
	"ND_CASTKALOCAL" NUMBER(15,2), 
	"S_UCETZBYTEK" VARCHAR2(10 BYTE), 
	"S_PODMINKA" VARCHAR2(128 BYTE), 
	"DT_ZMENA" DATE DEFAULT sysdate, 
	"S_UZIVATEL" VARCHAR2(20 BYTE), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_IFRSPRAVIDLODETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_KONTROLAMAJETKOVAUCAST.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_KONTROLAMAJETKOVAUCAST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_KONTROLAMAJETKOVAUCAST
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_KONTROLAMAJETKOVAUCAST" 
   (	"S_AKCE" CHAR(1 BYTE), 
	"ID" NUMBER(*,0), 
	"ID_CISSUBJECT" NUMBER(*,0), 
	"S_UCETMASKA" VARCHAR2(10 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"S_UZIVATEL" VARCHAR2(20 BYTE), 
	"DT_LAST_MODIFY" DATE DEFAULT sysdate
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_KONTROLAMAJETKOVAUCAST.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_LISTBUNKANASTROJ.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_LISTBUNKANASTROJ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_LISTBUNKANASTROJ
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_LISTBUNKANASTROJ" 
   (	"S_AKCE" CHAR(1 BYTE), 
	"ID" NUMBER, 
	"ID_TYPNASTROJE" NUMBER, 
	"ID_DEFLISTBUNKA" NUMBER, 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"C_KONTROLABANKA" CHAR(1 BYTE), 
	"C_KONTROLAMIMOBANKU" CHAR(1 BYTE), 
	"ID_PRODUKTDRUH" VARCHAR2(30 BYTE), 
	"ID_PRODUKTTYP" VARCHAR2(30 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"DT_DATUMZMENY" DATE DEFAULT SYSDATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_LISTBUNKANASTROJ.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_LISTBUNKAUCET.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_LISTBUNKAUCET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_LISTBUNKAUCET
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_LISTBUNKAUCET" 
   (	"S_AKCE" CHAR(1 BYTE), 
	"S_UZIVATEL" VARCHAR2(20 BYTE), 
	"ID_DEFLISTBUNKA" NUMBER(*,0), 
	"S_UCET" VARCHAR2(15 BYTE), 
	"S_UCET_MINUS" VARCHAR2(15 BYTE), 
	"C_UCETSUMA" CHAR(1 BYTE), 
	"ND_KOEFICIENT" NUMBER(10,6), 
	"C_VALIDOVATMASKU" CHAR(1 BYTE), 
	"ID_CISLIST" NUMBER(*,0), 
	"S_EVIDOVATPROTISTRANU" VARCHAR2(4 BYTE) DEFAULT '0000', 
	"C_MENOVAPOZICE" CHAR(1 BYTE), 
	"C_UVEROVAPOZICE" CHAR(1 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"S_ZMENIL" VARCHAR2(20 BYTE), 
	"DT_LAST_MODIFY" DATE DEFAULT sysdate, 
	"ID_KTGDOKLAD" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_LISTBUNKAUCET.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_MAJETKOVAUCAST.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_MAJETKOVAUCAST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_MAJETKOVAUCAST
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_MAJETKOVAUCAST" 
   (	"S_AKCE" CHAR(1 BYTE), 
	"ID_MAJETKOVAUCAST" NUMBER(*,0), 
	"ID_PARENT" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"ID_KTGFININVESTICEEMISE" NUMBER(*,0), 
	"S_UCET" VARCHAR2(12 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"ID_CISMUTYPTRANSAKCE" NUMBER(*,0), 
	"ID_CISMUZPUSOB" NUMBER(*,0), 
	"NL_POCETKUSU" NUMBER(*,0), 
	"S_MENATRANSAKCE" VARCHAR2(3 BYTE), 
	"ND_CENATRANSAKCEKUS" NUMBER(15,2), 
	"ND_OBJEMTRANSAKCE" NUMBER(15,2), 
	"ND_KURZ" NUMBER(10,6), 
	"S_MENAUCETNI" VARCHAR2(3 BYTE), 
	"ND_CENAUCETNIKUS" NUMBER(15,2), 
	"ND_OBJEMUCETNI" NUMBER(15,2), 
	"DT_ZMENA" DATE, 
	"S_UZIVATEL" VARCHAR2(20 BYTE), 
	"ID_KTGUCETNISPOLECNOSTKOUPENO" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_MAJETKOVAUCAST.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_MANUALNIZDROJDAT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_MANUALNIZDROJDAT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_MANUALNIZDROJDAT
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_MANUALNIZDROJDAT" 
   (	"S_AKCE" CHAR(1 BYTE), 
	"ID_MANUALNIZDROJDAT" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"ND_CASTKAMENA" NUMBER(18,2), 
	"ND_CASTKALOCAL" NUMBER(18,2), 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"DT_DATUM" DATE, 
	"ID_KTGUCETNISPOLECNOSTUNIF" NUMBER(*,0), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"ID_KTGPROJEKT" NUMBER(*,0), 
	"ID_KTGODBOR" NUMBER(*,0), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"DT_ZMENA" DATE DEFAULT sysdate, 
	"C_TYP" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_MANUALNIZDROJDAT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_PROJEKT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_PROJEKT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_PROJEKT
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_PROJEKT" 
   (	"S_AKCE" CHAR(1 BYTE), 
	"ID" NUMBER, 
	"S_NAZEV" VARCHAR2(100 BYTE), 
	"S_CISLOOLD" VARCHAR2(6 BYTE), 
	"ID_STATUS" NUMBER, 
	"DT_DATUMSTATUSZMENA" DATE, 
	"ID_NAVRHUJE" NUMBER, 
	"ID_SPONZOR" NUMBER, 
	"ID_TOP" NUMBER, 
	"ID_PMANAGER" NUMBER, 
	"ID_KATEGORIE" NUMBER, 
	"ID_TYPKATEGORIE" NUMBER, 
	"ID_KTGUCETNISPOLECNOST" NUMBER, 
	"ND_NAKLADY" NUMBER(15,2), 
	"S_MENANAKLADY" VARCHAR2(3 BYTE), 
	"ND_INVESTICE" NUMBER(15,2), 
	"S_MENAINVESTICE" VARCHAR2(3 BYTE), 
	"ND_OCENENI" NUMBER(15,2), 
	"S_MENAOCENENI" VARCHAR2(3 BYTE), 
	"DT_STARTOCENENI" DATE, 
	"ID_FREKVENCE" NUMBER, 
	"DT_KONECOCENENI" DATE, 
	"S_POPIS" VARCHAR2(250 BYTE), 
	"S_UZIVATEL" VARCHAR2(20 BYTE), 
	"DT_ZMENY" DATE, 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"ID_PROJEKTNAVRH" NUMBER, 
	"DT_MEMORANDUMDALSI" DATE, 
	"NL_MEMORANDUMMESICU" NUMBER(*,0), 
	"ID_IFRSSEGMENT" NUMBER(*,0), 
	"ID_IFRSSUBSEGMENT" NUMBER(*,0), 
	"ID_MNGSEGMENT" NUMBER(*,0), 
	"ID_TYPBILANCE" NUMBER(*,0), 
	"ID_TYPBUDGETU" NUMBER(*,0), 
	"C_SLEDUJEBUDGET" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_PROJEKT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_PROJEKTMEMORANDUM.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_PROJEKTMEMORANDUM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_PROJEKTMEMORANDUM
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_PROJEKTMEMORANDUM" 
   (	"ID_KTGPROJEKT" NUMBER, 
	"S_CIL" VARCHAR2(4000 BYTE), 
	"S_ZACLENENI" VARCHAR2(1000 BYTE), 
	"S_VSTUP" VARCHAR2(1000 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"DT_DATUMZMENY" DATE DEFAULT sysdate
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_PROJEKTMEMORANDUM.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_PROJEKTMEMORANDUMZPRAVA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_PROJEKTMEMORANDUMZPRAVA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_PROJEKTMEMORANDUMZPRAVA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_PROJEKTMEMORANDUMZPRAVA" 
   (	"ID" NUMBER(*,0), 
	"ID_KTGPROJEKT" NUMBER, 
	"DT_DATUM" DATE, 
	"S_ZPRAVA" VARCHAR2(4000 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"DT_DATUMZMENY" DATE DEFAULT sysdate
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_PROJEKTMEMORANDUMZPRAVA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_SPOLECNOST_GROUP.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_SPOLECNOST_GROUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_SPOLECNOST_GROUP
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_SPOLECNOST_GROUP" 
   (	"ID_SPOLECNOST" NUMBER(38,0), 
	"CUST_GROUP_NAME" VARCHAR2(35 BYTE), 
	"CUST_GROUP_CODE" VARCHAR2(5 BYTE), 
	"CUST_STRUC_NAME" VARCHAR2(35 BYTE), 
	"CUST_STRUC_CODE" VARCHAR2(3 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"DT_DATUMZMENY" DATE, 
	"C_AKCE" CHAR(1 BYTE), 
	"S_UZIVATEL" VARCHAR2(100 BYTE), 
	"DT_ZMENA" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_SPOLECNOST_GROUP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_SPOLECNOST_GROUP_220420.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_SPOLECNOST_GROUP_220420.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_SPOLECNOST_GROUP_220420
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_SPOLECNOST_GROUP_220420" 
   (	"ID_SPOLECNOST" NUMBER(38,0), 
	"CUST_GROUP_NAME" VARCHAR2(35 BYTE), 
	"CUST_GROUP_CODE" VARCHAR2(5 BYTE), 
	"CUST_STRUC_NAME" VARCHAR2(35 BYTE), 
	"CUST_STRUC_CODE" VARCHAR2(3 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"DT_DATUMZMENY" DATE, 
	"C_AKCE" CHAR(1 BYTE), 
	"S_UZIVATEL" VARCHAR2(100 BYTE), 
	"DT_ZMENA" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_SPOLECNOST_GROUP_220420.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_SUBKONSOLIDACE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_SUBKONSOLIDACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_SUBKONSOLIDACE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_SUBKONSOLIDACE" 
   (	"S_AKCE" CHAR(1 BYTE), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"NL_PORADI" NUMBER(*,0), 
	"ID_KTGUCETNISKUPINA" NUMBER(*,0), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_NAZEV" VARCHAR2(128 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"DT_ZMENA" DATE DEFAULT sysdate, 
	"S_UZIVATEL" VARCHAR2(20 BYTE), 
	"ID_KTGUCETNISPOLECNOSTMATKA" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_SUBKONSOLIDACE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_SUBKONSOLIDACECLEN.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_SUBKONSOLIDACECLEN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_SUBKONSOLIDACECLEN
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_SUBKONSOLIDACECLEN" 
   (	"S_AKCE" CHAR(1 BYTE), 
	"ID_KTGSUBKONSOLIDACE" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"C_EQUITY" CHAR(1 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"DT_ZMENA" DATE DEFAULT sysdate, 
	"S_UZIVATEL" VARCHAR2(20 BYTE), 
	"C_CLEN" CHAR(1 BYTE), 
	"ID_CISSUBTYPCLENSTVI" NUMBER, 
	"ND_POMERUCASTI" NUMBER(5,2), 
	"DT_DOKLADVAZBYOD" DATE, 
	"DT_DOKLADVAZBYDO" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_SUBKONSOLIDACECLEN.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_SUBKONSOLIDACECLEN_RP.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_SUBKONSOLIDACECLEN_RP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_SUBKONSOLIDACECLEN_RP
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_SUBKONSOLIDACECLEN_RP" 
   (	"C_AKCE" CHAR(1 BYTE), 
	"ID_KTGSUBKONSOLIDACE" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"C_KDYPOUZIT" CHAR(1 BYTE), 
	"C_AKTIVAPASIVA" CHAR(1 BYTE), 
	"C_VYSLEDOVKA" CHAR(1 BYTE), 
	"C_DOKLADVAZBY" CHAR(1 BYTE), 
	"C_DOKLAD" CHAR(1 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"DT_DATUMZMENY" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_SUBKONSOLIDACECLEN_RP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_SUBKONSOLIDACEPRAVIDLO.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_SUBKONSOLIDACEPRAVIDLO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_SUBKONSOLIDACEPRAVIDLO
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_SUBKONSOLIDACEPRAVIDLO" 
   (	"S_AKCE" CHAR(1 BYTE), 
	"ID_KTGIFRSPRAVIDLO" NUMBER(*,0), 
	"ID_PORADI" NUMBER(*,0), 
	"ID_CISIFRSTYPPRAVIDLO" NUMBER(*,0), 
	"ID_KTGSUBKONSOLIDACE" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"ID_KTGSUBKONSOLIDACEETAPA" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"S_POZNAMKA" VARCHAR2(128 BYTE), 
	"C_VALIDNI" CHAR(1 BYTE), 
	"S_ERRORHLASKA" VARCHAR2(128 BYTE), 
	"DT_ZMENADEFINICEDETAIL" DATE, 
	"DT_KONTROLA" DATE, 
	"NL_VALIDACERADEK" NUMBER(*,0), 
	"NL_VALIDACELIST" NUMBER(*,0), 
	"ND_VALIDACEHODNOTA" NUMBER(15,2), 
	"DT_ZMENA" DATE DEFAULT sysdate, 
	"S_UZIVATEL" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_SUBKONSOLIDACEPRAVIDLO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_SUBKONSOLPRAVIDLODETAIL.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_SUBKONSOLPRAVIDLODETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_SUBKONSOLPRAVIDLODETAIL
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_SUBKONSOLPRAVIDLODETAIL" 
   (	"S_AKCE" CHAR(1 BYTE), 
	"ID_KTGSUBKONSOLIDACEPRAVIDLO" NUMBER(*,0), 
	"ID_PORADI" NUMBER(*,0), 
	"ID_PORADIPODMINKA" NUMBER(*,0), 
	"ID_CISIFRSPRAVDETAILTYP" NUMBER(*,0), 
	"S_POZNAMKA" VARCHAR2(128 BYTE), 
	"NL_RADEK" NUMBER(*,0), 
	"NL_PORADILIST" NUMBER(*,0), 
	"ND_CASTKA" NUMBER(15,2), 
	"S_VZOREC" VARCHAR2(256 BYTE), 
	"S_UCETZBYTEK" VARCHAR2(10 BYTE), 
	"S_PODMINKA" VARCHAR2(128 BYTE), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"DT_ZMENA" DATE DEFAULT sysdate, 
	"S_UZIVATEL" VARCHAR2(20 BYTE), 
	"ID_KTGSUBKONSOLIDACE" NUMBER(*,0), 
	"ID_PROTISTRANA" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_SUBKONSOLPRAVIDLODETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_TMPDOKLADVAZBY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_TMPDOKLADVAZBY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_TMPDOKLADVAZBY
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_TMPDOKLADVAZBY" 
   (	"ID_DOKLAD" NUMBER(*,0), 
	"ID_KTGUCETNISKUPINA" NUMBER(*,0), 
	"DT_DATUMZMENY" DATE DEFAULT SYSDATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_TMPDOKLADVAZBY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_UCET2UCETUNIF.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_UCET2UCETUNIF.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_UCET2UCETUNIF
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_UCET2UCETUNIF" 
   (	"S_AKCE" CHAR(1 BYTE), 
	"ID" NUMBER(*,0), 
	"ID_CISUCETUNIF" NUMBER(*,0), 
	"S_UCETPRIMSYSTEM" VARCHAR2(10 BYTE), 
	"ID_CISSUBJECT" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"DT_ZMENA" DATE DEFAULT sysdate, 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"ID_DEFLISTBUNKAUCET" NUMBER(*,0), 
	"C_UCETSUMA" CHAR(1 BYTE), 
	"S_EVIDOVATPROTISTRANU" VARCHAR2(4 BYTE), 
	"C_TESTOVATMAJUCAST" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_UCET2UCETUNIF.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_UCETNISKUPINA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_UCETNISKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_UCETNISKUPINA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_UCETNISKUPINA" 
   (	"C_AKCE" CHAR(1 BYTE), 
	"ID" NUMBER(*,0), 
	"S_KOD" VARCHAR2(10 BYTE), 
	"S_POPIS" VARCHAR2(64 BYTE), 
	"S_TYPKURSLISTEK" VARCHAR2(5 BYTE), 
	"ID_CISBANKA" NUMBER, 
	"S_SKUPINALIKE" VARCHAR2(3 BYTE), 
	"C_POROVNAVAT" CHAR(1 BYTE), 
	"C_EXPORTOLAP" CHAR(1 BYTE), 
	"C_GENERUJSUBKONKAMIL" CHAR(1 BYTE), 
	"C_TESTOVATVAZBY" CHAR(1 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"DT_DATUMZMENY" DATE DEFAULT SYSDATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_UCETNISKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_UCETNISKUPINACLEN.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_UCETNISKUPINACLEN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_UCETNISKUPINACLEN
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_UCETNISKUPINACLEN" 
   (	"S_AKCE" VARCHAR2(10 BYTE), 
	"ID_KTGUCETNISKUPINA" NUMBER, 
	"ID_KTGUCETNISPOLECNOST" NUMBER, 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"DT_DATUMZMENY" DATE DEFAULT SYSDATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_UCETNISKUPINACLEN.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_UCETNISPOLECNOST.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_UCETNISPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_UCETNISPOLECNOST
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_UCETNISPOLECNOST" 
   (	"S_AKCE" CHAR(1 BYTE), 
	"ID" NUMBER, 
	"ID_CISSUBJECT" NUMBER, 
	"S_ICO" VARCHAR2(20 BYTE), 
	"SPIN_ID" NUMBER, 
	"TOPAS_ID" VARCHAR2(30 BYTE), 
	"QUEST_ID" CHAR(20 BYTE), 
	"C_EXTSYSTEM" CHAR(1 BYTE), 
	"S_NAZEV" VARCHAR2(128 BYTE), 
	"C_POCITATROZVAHU" CHAR(1 BYTE) DEFAULT '1', 
	"S_SOUBORPREDPONA" VARCHAR2(20 BYTE), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_DBLINK" VARCHAR2(32 BYTE), 
	"C_AUTOMATICKEGENEROVANI" CHAR(1 BYTE), 
	"ID_KATEGORIE" NUMBER, 
	"C_RKC" CHAR(1 BYTE), 
	"S_ZKRATKA" VARCHAR2(35 BYTE), 
	"DT_LASTCLOSEDATE" DATE, 
	"DT_DATUMARCHIVACE" DATE, 
	"C_OPCE" CHAR(1 BYTE) DEFAULT '0', 
	"ID_CISKATSPOL" NUMBER DEFAULT 0, 
	"ID_ZODPOVEDNAUCETNI" NUMBER, 
	"ID_ODPOVEDNAOSOBA" NUMBER, 
	"ID_ADMINISTRATOR" NUMBER, 
	"DT_RELATIVEDATE" DATE, 
	"ID_TOPMNG" NUMBER, 
	"S_POZNAMKA" VARCHAR2(10 BYTE), 
	"C_DANOVAZTRATA" CHAR(1 BYTE) DEFAULT '0', 
	"ID_CISOPCE" NUMBER DEFAULT 1, 
	"ND_DOCUROVEN2" NUMBER(15,2) DEFAULT 0, 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"C_DOCDISPLAY" CHAR(1 BYTE) DEFAULT '0', 
	"C_PREHLEDDISPLAY" CHAR(1 BYTE) DEFAULT '1', 
	"ID_CISNOMINEE" NUMBER DEFAULT 1, 
	"NL_ROKPOCSTAVIMPORTSYSTEM" NUMBER, 
	"DT_DATUMZMENY" DATE DEFAULT SYSDATE, 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"ID_TYPPROJEKTU" NUMBER, 
	"DT_UCETNIOBDOBISTART" DATE, 
	"DT_UCETNIOBDOBIKONEC" DATE, 
	"C_ONLINE" CHAR(1 BYTE), 
	"DT_ONLINEOD" DATE, 
	"ID_CISDATABAZE" NUMBER(*,0), 
	"ID_KTGODBOR" NUMBER(*,0), 
	"ID_KTGPROJEKT" NUMBER(*,0), 
	"C_NOCNIZPRACOVANI" CHAR(1 BYTE), 
	"ID_CISNASTROJUCETNIVYJIMKY" NUMBER(*,0), 
	"S_SKUPINALIKE" VARCHAR2(3 BYTE), 
	"ND_BUDGETNAVYSENI_OO" NUMBER(15,2), 
	"ND_BUDGETNAVYSENI_TOP" NUMBER(15,2), 
	"S_DUVODOFFLINE" VARCHAR2(100 BYTE), 
	"ID_MNGSEGMENT" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_UCETNISPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_UCETNISPOLECNOST_LINK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_UCETNISPOLECNOST_LINK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_UCETNISPOLECNOST_LINK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_UCETNISPOLECNOST_LINK" 
   (	"S_AKCE" CHAR(1 BYTE), 
	"ID" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"SPIN_ID" NUMBER(*,0), 
	"TOPAS_ID" VARCHAR2(30 BYTE), 
	"C_EXTSYSTEM" CHAR(1 BYTE), 
	"ID_CISDATABAZE" NUMBER(*,0), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"DT_DATUMZMENY" DATE DEFAULT SYSDATE, 
	"ID_CISSUBJECT" NUMBER(*,0), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"C_IFRSPRIMARNI" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_UCETNISPOLECNOST_LINK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_UCETNISPOLECNOST_ONLINE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_UCETNISPOLECNOST_ONLINE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_UCETNISPOLECNOST_ONLINE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_UCETNISPOLECNOST_ONLINE" 
   (	"ID" NUMBER(*,0), 
	"C_ONLINE" CHAR(1 BYTE), 
	"DT_ONLINEOD" DATE, 
	"S_DUVODOFFLINE" VARCHAR2(100 BYTE), 
	"DT_DATUMZMENY" DATE DEFAULT sysdate, 
	"ID_APPUSER" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_UCETNISPOLECNOST_ONLINE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_UCETVAZBAUCET.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_UCETVAZBAUCET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_UCETVAZBAUCET
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_UCETVAZBAUCET" 
   (	"S_AKCE" CHAR(1 BYTE), 
	"ID_DEFUCETVAZBAUCET" NUMBER(*,0), 
	"ID_KTGDOKLAD" NUMBER(*,0), 
	"S_UCET_1" VARCHAR2(10 BYTE), 
	"S_UCET_2" VARCHAR2(10 BYTE), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"S_UCET" VARCHAR2(3 BYTE), 
	"S_POPIS" VARCHAR2(256 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"DT_ZMENA" DATE DEFAULT sysdate, 
	"ID_TYP" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_UCETVAZBAUCET.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_VAZBYZAMEK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_LOG_VAZBYZAMEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_LOG_VAZBYZAMEK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_LOG_VAZBYZAMEK" 
   (	"S_AKCE" CHAR(1 BYTE), 
	"ID_CISDOKLAD" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOSTFROM" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOSTTO" NUMBER(*,0), 
	"ID_KTGUCETNISKUPINA" NUMBER(*,0), 
	"DT_DATUM" DATE, 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"DT_DATUMZMENY" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_LOG_VAZBYZAMEK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_PARAMETRY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_PARAMETRY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_PARAMETRY
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_PARAMETRY" 
   (	"C_NG_POVOLENO" CHAR(1 BYTE), 
	"DT_NG_DATUM_DO" DATE, 
	"S_NG_HODINY" VARCHAR2(5 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"DT_ZMENA" DATE DEFAULT sysdate, 
	"DT_NG_DATUM_MUSTEK" DATE, 
	"ID_KTGUCETNISKUPINA" NUMBER(*,0), 
	"ID_KTGUCETNISKUPINA2" NUMBER, 
	"ND_KAPITAL" NUMBER, 
	"ND_TOLERANCEVAZBY" NUMBER(5,2), 
	"DT_GENEROVANI" DATE, 
	"ID_KTGUCETNISKUPINA3" NUMBER, 
	"ID_KTGUCETNISKUPINA4" NUMBER, 
	"NL_MAXXLS" NUMBER(*,0) DEFAULT 10000, 
	"ID_KTGUCETNISKUPINA6" NUMBER(*,0), 
	"ID_KTGUCETNISKUPINA7" NUMBER(*,0), 
	"C_RELOADPROTISTRAN" CHAR(1 BYTE) DEFAULT '1', 
	"DT_GENSUBKONSOLIDACI" DATE, 
	"C_RELOADOLAP" CHAR(1 BYTE) DEFAULT '0', 
	"APPSERVER_PASSWORD" VARCHAR2(20 BYTE), 
	"DT_UNIFIKOVANEDOKLADY" DATE, 
	"C_MENU_MU_BANKA" CHAR(1 BYTE) DEFAULT '1', 
	"ID_KTGUCETNISKUPINA8" NUMBER(*,0), 
	"EES_DB" CHAR(1 BYTE) DEFAULT 'Q'
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."KP_PARAMETRY"."DT_UNIFIKOVANEDOKLADY" IS 'Urcuje od jakeho datumu se vsem spolecnostem budou primarni ucty prevadet na unifikovane';
   COMMENT ON COLUMN "DB_JT"."KP_PARAMETRY"."EES_DB" IS 'z ktere databaze se berou definice ekonomicky spjatych skupin, Q je Questor, C je nove CRM';


PROMPT Completed KP_PARAMETRY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_ACC_JT2PPF.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_ACC_JT2PPF.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_ACC_JT2PPF
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_ACC_JT2PPF" 
   (	"ID" NUMBER, 
	"JT_ACC" VARCHAR2(20 BYTE), 
	"JT_INFO" VARCHAR2(200 BYTE), 
	"PPF_ACC_ID" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."KP_REL_ACC_JT2PPF"."JT_ACC" IS 'cislo uctu v JT No.';
   COMMENT ON COLUMN "DB_JT"."KP_REL_ACC_JT2PPF"."JT_INFO" IS 'popis uctu';
   COMMENT ON COLUMN "DB_JT"."KP_REL_ACC_JT2PPF"."PPF_ACC_ID" IS 'ID uctu v KP_CIS_ACC_PPF, Level_4_No';
   COMMENT ON TABLE "DB_JT"."KP_REL_ACC_JT2PPF"  IS 'mapovanie JT uctov  na ucty v PPF';


PROMPT Completed KP_REL_ACC_JT2PPF.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_ACC_JT2PPF_BCK1.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_ACC_JT2PPF_BCK1.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_ACC_JT2PPF_BCK1
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_ACC_JT2PPF_BCK1" 
   (	"ID" NUMBER, 
	"JT_ACC" VARCHAR2(20 BYTE), 
	"JT_INFO" VARCHAR2(200 BYTE), 
	"PPF_ACC_ID" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_ACC_JT2PPF_BCK1.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_ACC_JT2PPF_BCK2.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_ACC_JT2PPF_BCK2.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_ACC_JT2PPF_BCK2
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_ACC_JT2PPF_BCK2" 
   (	"ID" NUMBER, 
	"JT_ACC" VARCHAR2(20 BYTE), 
	"JT_INFO" VARCHAR2(200 BYTE), 
	"PPF_ACC_ID" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_ACC_JT2PPF_BCK2.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_ACC_JT2PPF_BCK3.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_ACC_JT2PPF_BCK3.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_ACC_JT2PPF_BCK3
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_ACC_JT2PPF_BCK3" 
   (	"ID" NUMBER, 
	"JT_ACC" VARCHAR2(20 BYTE), 
	"JT_INFO" VARCHAR2(200 BYTE), 
	"PPF_ACC_ID" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_ACC_JT2PPF_BCK3.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_ACC_JT2PPF_BCK4.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_ACC_JT2PPF_BCK4.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_ACC_JT2PPF_BCK4
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_ACC_JT2PPF_BCK4" 
   (	"ID" NUMBER, 
	"JT_ACC" VARCHAR2(20 BYTE), 
	"JT_INFO" VARCHAR2(200 BYTE), 
	"PPF_ACC_ID" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_ACC_JT2PPF_BCK4.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_ACC_JT2PPF_BCK5.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_ACC_JT2PPF_BCK5.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_ACC_JT2PPF_BCK5
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_ACC_JT2PPF_BCK5" 
   (	"ID" NUMBER, 
	"JT_ACC" VARCHAR2(20 BYTE), 
	"JT_INFO" VARCHAR2(200 BYTE), 
	"PPF_ACC_ID" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_ACC_JT2PPF_BCK5.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_APPUSERSKUPINA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_APPUSERSKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_APPUSERSKUPINA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_APPUSERSKUPINA" 
   (	"ID_UCETNISKUPINA" NUMBER(*,0), 
	"ID_KTGAPPUSER" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_APPUSERSKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_APPUSER_DOCUCSPOL.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_APPUSER_DOCUCSPOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_APPUSER_DOCUCSPOL
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_APPUSER_DOCUCSPOL" 
   (	"ID_APPUSER" NUMBER, 
	"ID_KTGUCETNISPOLECNOST" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_APPUSER_DOCUCSPOL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_APPUSER_PROJEKT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_APPUSER_PROJEKT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_APPUSER_PROJEKT
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_APPUSER_PROJEKT" 
   (	"ID_APPUSER" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"ID_TYPPRAVA" NUMBER DEFAULT 1
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_APPUSER_PROJEKT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_APPUSER_SPOLECNOSTPRAVO.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_APPUSER_SPOLECNOSTPRAVO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_APPUSER_SPOLECNOSTPRAVO
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_APPUSER_SPOLECNOSTPRAVO" 
   (	"ID_KTGCISSPOLECNOSTPRAVO" NUMBER(*,0), 
	"S_USERID" VARCHAR2(30 BYTE), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_APPUSER_SPOLECNOSTPRAVO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_APPUSER_SPOL__PRAVO_BCK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_APPUSER_SPOL__PRAVO_BCK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_APPUSER_SPOL__PRAVO_BCK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_APPUSER_SPOL__PRAVO_BCK" 
   (	"ID_KTGCISSPOLECNOSTPRAVO" NUMBER(*,0), 
	"S_USERID" VARCHAR2(30 BYTE), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_APPUSER_SPOL__PRAVO_BCK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_CENNYPAPIRINDEX.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_CENNYPAPIRINDEX.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_CENNYPAPIRINDEX
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_CENNYPAPIRINDEX" 
   (	"ID_CENNYPAPIR" NUMBER(*,0), 
	"ID_CPINDEX" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_CENNYPAPIRINDEX.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_DBLINKAPPUSER.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_DBLINKAPPUSER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_DBLINKAPPUSER
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_DBLINKAPPUSER" 
   (	"S_DBLINK" VARCHAR2(30 BYTE), 
	"ID_APPUSER" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_DBLINKAPPUSER.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_DOKLAD_ZDROJDAT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_DOKLAD_ZDROJDAT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_DOKLAD_ZDROJDAT
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_DOKLAD_ZDROJDAT" 
   (	"ID_DOKLADZDROJDAT" NUMBER(*,0), 
	"ID_DOKLAD" NUMBER(*,0), 
	"ID_DOKLADPOLOZKA" NUMBER(*,0), 
	 CONSTRAINT "FK_KPRELDOKLADZDROJ_ZDROJ2" FOREIGN KEY ("ID_DOKLADZDROJDAT")
	  REFERENCES "DB_JT"."KP_DAT_DOKLADZDROJDAT" ("ID") ON DELETE CASCADE ENABLE
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS  LOGGING 
  STORAGE(
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  PARTITION BY REFERENCE ("FK_KPRELDOKLADZDROJ_ZDROJ2") 
 (PARTITION "KP_DAT_DOKLAD_2004" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2005" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2006" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2007" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2008" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2009" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2010" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2011" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2012" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2013" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2014" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2015" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2016" SEGMENT CREATION IMMEDIATE 
  PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 COLUMN STORE COMPRESS FOR QUERY HIGH NO ROW LEVEL LOCKING NOLOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2017" SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2018" SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2019" SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2020" SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2021" SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS , 
 PARTITION "KP_DAT_DOKLAD_2022" SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS )  ENABLE ROW MOVEMENT ;


PROMPT Completed KP_REL_DOKLAD_ZDROJDAT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_GESTORTRANSAKCE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_GESTORTRANSAKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_GESTORTRANSAKCE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_GESTORTRANSAKCE" 
   (	"ID" NUMBER, 
	"ID_TYPTRANSAKCE" NUMBER, 
	"ID_MNGSEGMENT" NUMBER, 
	"ID_APPUSER" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_GESTORTRANSAKCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_GESTORTRANSAKCE_BCK_SEG.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_GESTORTRANSAKCE_BCK_SEG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_GESTORTRANSAKCE_BCK_SEG
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_GESTORTRANSAKCE_BCK_SEG" 
   (	"ID" NUMBER, 
	"ID_TYPTRANSAKCE" NUMBER, 
	"ID_MNGSEGMENT" NUMBER, 
	"ID_APPUSER" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_GESTORTRANSAKCE_BCK_SEG.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_GESTORTRANSAKCE_SPOL.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_GESTORTRANSAKCE_SPOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_GESTORTRANSAKCE_SPOL
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_GESTORTRANSAKCE_SPOL" 
   (	"ID" NUMBER, 
	"ID_TYPTRANSAKCE" NUMBER, 
	"ID_SPOL" NUMBER, 
	"ID_APPUSER" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_GESTORTRANSAKCE_SPOL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_MISUROVENSCHVALOVANI.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_MISUROVENSCHVALOVANI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_MISUROVENSCHVALOVANI
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_MISUROVENSCHVALOVANI" 
   (	"ID_CISTYPTRANSAKCE" NUMBER(*,0), 
	"NL_UROVEN" NUMBER(*,0), 
	"ND_UROVENSCHVALOVANI" NUMBER(18,2), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"ID_KTGPROJEKT" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_MISUROVENSCHVALOVANI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_ODBOR_TRANSAKCE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_ODBOR_TRANSAKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_ODBOR_TRANSAKCE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_ODBOR_TRANSAKCE" 
   (	"ID_KTGUCETNISPOLECNOST" NUMBER, 
	"ID_EXTSYSTEM" VARCHAR2(20 BYTE), 
	"ID_EXTSYSTEM2" VARCHAR2(35 BYTE), 
	"C_STRANA" CHAR(1 BYTE), 
	"ID_DOKLADZDROJDAT" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"S_ROK" VARCHAR2(4 BYTE) DEFAULT '2005'
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_ODBOR_TRANSAKCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_PROJEKTCFEXPORT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_PROJEKTCFEXPORT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_PROJEKTCFEXPORT
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_PROJEKTCFEXPORT" 
   (	"ID_PROJEKT" NUMBER, 
	"ID_TYP" NUMBER DEFAULT 0
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_PROJEKTCFEXPORT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_PROJEKTUCSPOL.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_PROJEKTUCSPOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_PROJEKTUCSPOL
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_PROJEKTUCSPOL" 
   (	"ID_KTGPROJEKT" NUMBER, 
	"ID_KTGUCETNISPOLECNOST" NUMBER, 
	"C_POUZITHV" CHAR(1 BYTE) DEFAULT '0', 
	"DT_MATKAOD" DATE, 
	"DT_MATKADO" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_PROJEKTUCSPOL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_PROJEKT_TRANSAKCE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_PROJEKT_TRANSAKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_PROJEKT_TRANSAKCE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_PROJEKT_TRANSAKCE" 
   (	"ID_KTGUCETNISPOLECNOST" NUMBER, 
	"ID_EXTSYSTEM" VARCHAR2(20 BYTE), 
	"ID_EXTSYSTEM2" VARCHAR2(35 BYTE), 
	"C_STRANA" CHAR(1 BYTE), 
	"ID_DOKLADZDROJDAT" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"S_ROK" VARCHAR2(4 BYTE) DEFAULT '2005'
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_PROJEKT_TRANSAKCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_PROJEKT_ZDROJDAT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_PROJEKT_ZDROJDAT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_PROJEKT_ZDROJDAT
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_PROJEKT_ZDROJDAT" 
   (	"ID_PROJEKTDOKLAD" NUMBER(*,0), 
	"ID_DOKLADZDROJDAT" NUMBER(*,0), 
	"C_NAKLADVYNOS2" CHAR(1 BYTE), 
	"ID_DOKLADPOLOZKA" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_PROJEKT_ZDROJDAT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_SPOLECNOSTEXTERNIRATING.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_SPOLECNOSTEXTERNIRATING.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_SPOLECNOSTEXTERNIRATING
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_SPOLECNOSTEXTERNIRATING" 
   (	"ID_EXTERNIRATING" NUMBER(*,0), 
	"ID_KTGSPOLECNOST" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_SPOLECNOSTEXTERNIRATING.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_SPOLECNOSTKARTATYP.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_SPOLECNOSTKARTATYP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_SPOLECNOSTKARTATYP
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_SPOLECNOSTKARTATYP" 
   (	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"ID_KARTATYP" NUMBER(*,0), 
	"DT_ZPRAVADALSI" DATE, 
	"NL_PERIODAMESICU" NUMBER(*,0) DEFAULT 3, 
	"DT_ZMENA" DATE, 
	"S_UZIVATEL" VARCHAR2(50 BYTE), 
	"DT_OLD_ZPRAVADALSI" DATE, 
	"OLD_NL_PERIODA" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_SPOLECNOSTKARTATYP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_SPOLECNOSTKARTATYP_EPH.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_SPOLECNOSTKARTATYP_EPH.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_SPOLECNOSTKARTATYP_EPH
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_SPOLECNOSTKARTATYP_EPH" 
   (	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"ID_KARTATYP" NUMBER(*,0), 
	"DT_ZPRAVADALSI" DATE, 
	"NL_PERIODAMESICU" NUMBER(*,0), 
	"DT_ZMENA" DATE, 
	"S_UZIVATEL" VARCHAR2(50 BYTE), 
	"DT_OLD_ZPRAVADALSI" DATE, 
	"OLD_NL_PERIODA" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON TABLE "DB_JT"."KP_REL_SPOLECNOSTKARTATYP_EPH"  IS '07/2017 -  zaloha pred zrusenim SPV kariet pre vsetky EPH spolocnosti';


PROMPT Completed KP_REL_SPOLECNOSTKARTATYP_EPH.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_SPOLECNOSTKARTATYP_ORIG.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_SPOLECNOSTKARTATYP_ORIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_SPOLECNOSTKARTATYP_ORIG
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_SPOLECNOSTKARTATYP_ORIG" 
   (	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"ID_KARTATYP" NUMBER(*,0), 
	"DT_ZPRAVADALSI" DATE, 
	"NL_PERIODAMESICU" NUMBER(*,0), 
	"DT_ZMENA" DATE, 
	"S_UZIVATEL" VARCHAR2(50 BYTE), 
	"DT_OLD_ZPRAVADALSI" DATE, 
	"OLD_NL_PERIODA" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_SPOLECNOSTKARTATYP_ORIG.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_SPOLECNOSTSKUPINAIC.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_SPOLECNOSTSKUPINAIC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_SPOLECNOSTSKUPINAIC
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_SPOLECNOSTSKUPINAIC" 
   (	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"ID_KTGSPOLECNOSTCLEN" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE DEFAULT to_date('01.01.2004','DD.MM.YYYY'), 
	"DT_PLATNOSTDO" DATE DEFAULT to_date('01.01.2099','DD.MM.YYYY')
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_SPOLECNOSTSKUPINAIC.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_SUBKONSOLIDACECLEN.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_SUBKONSOLIDACECLEN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_SUBKONSOLIDACECLEN
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN" 
   (	"ID_KTGUCETNISKUPINA" NUMBER(*,0), 
	"ID_KTGSUBKONSOLIDACE" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"C_EQUITY" CHAR(1 BYTE) DEFAULT '0', 
	"DT_CLENSTVIOD" DATE, 
	"DT_CLENSTVIDO" DATE, 
	"C_CLEN" CHAR(1 BYTE), 
	"ID_CISSUBTYPCLENSTVI" NUMBER, 
	"ND_POMERUCASTI" NUMBER(5,2), 
	"DT_DOKLADVAZBYOD" DATE, 
	"DT_DOKLADVAZBYDO" DATE, 
	"C_PROPISUJVAZBY" CHAR(1 BYTE), 
	"C_SMERCLENSTVIOD" CHAR(1 BYTE), 
	"C_SMERCLENSTVIDO" CHAR(1 BYTE), 
	"C_SMERDETAILCLENSTVIOD" CHAR(1 BYTE), 
	"C_SMERDETAILCLENSTVIDO" CHAR(1 BYTE), 
	 CONSTRAINT "PK_KPSUBKONSOLIDACECLEN" PRIMARY KEY ("ID_KTGUCETNISKUPINA", "ID_KTGSUBKONSOLIDACE", "ID_KTGUCETNISPOLECNOST", "DT_CLENSTVIOD") ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  ORGANIZATION INDEX NOCOMPRESS PCTFREE 10 INITRANS 2 MAXTRANS 255 LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS 
 PCTTHRESHOLD 50;


PROMPT Completed KP_REL_SUBKONSOLIDACECLEN.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_SUBKONSOLIDACECLEN_BAK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_SUBKONSOLIDACECLEN_BAK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_SUBKONSOLIDACECLEN_BAK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN_BAK" 
   (	"ID_KTGUCETNISKUPINA" NUMBER(*,0), 
	"ID_KTGSUBKONSOLIDACE" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"C_EQUITY" CHAR(1 BYTE), 
	"DT_CLENSTVIOD" DATE, 
	"DT_CLENSTVIDO" DATE, 
	"C_CLEN" CHAR(1 BYTE), 
	"ID_CISSUBTYPCLENSTVI" NUMBER, 
	"ND_POMERUCASTI" NUMBER(5,2), 
	"DT_DOKLADVAZBYOD" DATE, 
	"DT_DOKLADVAZBYDO" DATE, 
	"C_PROPISUJVAZBY" CHAR(1 BYTE), 
	"C_SMERCLENSTVIOD" CHAR(1 BYTE), 
	"C_SMERCLENSTVIDO" CHAR(1 BYTE), 
	"C_SMERDETAILCLENSTVIOD" CHAR(1 BYTE), 
	"C_SMERDETAILCLENSTVIDO" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_SUBKONSOLIDACECLEN_BAK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_SUBKONSOLIDACECLEN_RP.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_SUBKONSOLIDACECLEN_RP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_SUBKONSOLIDACECLEN_RP
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN_RP" 
   (	"ID_KTGSUBKONSOLIDACE" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"C_KDYPOUZIT" CHAR(1 BYTE), 
	"C_AKTIVAPASIVA" CHAR(1 BYTE), 
	"C_VYSLEDOVKA" CHAR(1 BYTE), 
	"C_DOKLADVAZBY" CHAR(1 BYTE), 
	"C_DOKLAD" CHAR(1 BYTE), 
	"DT_DATUMZMENY" DATE DEFAULT sysdate, 
	"S_UZIVATEL" VARCHAR2(30 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."KP_REL_SUBKONSOLIDACECLEN_RP"."ID_KTGSUBKONSOLIDACE" IS 'pro jakou subkonsolidaci tyto ridici informace definuji';
   COMMENT ON COLUMN "DB_JT"."KP_REL_SUBKONSOLIDACECLEN_RP"."ID_KTGUCETNISPOLECNOST" IS 'pro jakeho clena subkonsolidace tyto ridici informace definuji';
   COMMENT ON COLUMN "DB_JT"."KP_REL_SUBKONSOLIDACECLEN_RP"."C_KDYPOUZIT" IS 'kdy se toto pravidlo ma pouzit O: kdyz generuji ve stejny den jako je datum platnosti Od tedy Datum generovani = datum_Od,  D: plati pro Datum generovani = datum_Do';
   COMMENT ON COLUMN "DB_JT"."KP_REL_SUBKONSOLIDACECLEN_RP"."C_AKTIVAPASIVA" IS 'ridi zda se budou nebo nebudou brat transakce pro aktiva a pasiva 0: nebrat, 1: brat';
   COMMENT ON COLUMN "DB_JT"."KP_REL_SUBKONSOLIDACECLEN_RP"."C_VYSLEDOVKA" IS 'ridi zda se budou nebo nebudou brat transakce pro vysledovku 0: nebrat, 1: brat';
   COMMENT ON COLUMN "DB_JT"."KP_REL_SUBKONSOLIDACECLEN_RP"."C_DOKLADVAZBY" IS 'urcuje z jakeho dokladu se budou brat vazby N: normalni doklad, Z: zluty doklad';
   COMMENT ON COLUMN "DB_JT"."KP_REL_SUBKONSOLIDACECLEN_RP"."C_DOKLAD" IS 'urcuje z jakeho dokladu se budou brat transakce N: normalni doklad, Z: zluty doklad';
   COMMENT ON TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN_RP"  IS 'doplnujici ridici informace (RP) pro chovani algoritmu generovani subkonsolidacnich dokladu';


PROMPT Completed KP_REL_SUBKONSOLIDACECLEN_RP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_TYPSPOLEVIDINFO.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_TYPSPOLEVIDINFO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_TYPSPOLEVIDINFO
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_TYPSPOLEVIDINFO" 
   (	"ID_TYPSPOL" NUMBER(*,0), 
	"ID_EVIDINFO" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_TYPSPOLEVIDINFO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_UCETNISKUPINACLEN.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_UCETNISKUPINACLEN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_UCETNISKUPINACLEN
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_UCETNISKUPINACLEN" 
   (	"ID_KTGUCETNISKUPINA" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"C_EQUITY" CHAR(1 BYTE) DEFAULT '0'
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_UCETNISKUPINACLEN.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_UCETUNIFFLOW.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REL_UCETUNIFFLOW.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REL_UCETUNIFFLOW
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REL_UCETUNIFFLOW" 
   (	"ID_CISUCETUNIF" NUMBER(*,0), 
	"ID_CISFLOW" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REL_UCETUNIFFLOW.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REP_CARTESISPROTISTRANA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REP_CARTESISPROTISTRANA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REP_CARTESISPROTISTRANA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REP_CARTESISPROTISTRANA" 
   (	"DT_DATUM" DATE, 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"INFO" VARCHAR2(32 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REP_CARTESISPROTISTRANA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REP_CISSKUPINA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REP_CISSKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REP_CISSKUPINA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REP_CISSKUPINA" 
   (	"ID" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REP_CISSKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REP_DEFSKUPINA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REP_DEFSKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REP_DEFSKUPINA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REP_DEFSKUPINA" 
   (	"ID" NUMBER(*,0), 
	"ID_CISSKUPINA" NUMBER(*,0), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE DEFAULT to_date('01.01.2004','DD.MM.YYYY'), 
	"DT_PLATNOSTDO" DATE DEFAULT to_date('01.01.2099','DD.MM.YYYY')
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_REP_DEFSKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REP_SPOLECNOSTCARTESIS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_REP_SPOLECNOSTCARTESIS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_REP_SPOLECNOSTCARTESIS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_REP_SPOLECNOSTCARTESIS" 
   (	"DT_DATUM" DATE, 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"ID_IFRSSEGMENT" NUMBER(*,0), 
	"ID_MNGSEGMENT" NUMBER(*,0), 
	"IFRS_OD" DATE, 
	"IFRS_DO" DATE, 
	"C_AKTIVNI" CHAR(1 BYTE) DEFAULT 'N', 
	"C_SCOPE8" CHAR(1 BYTE) DEFAULT '0', 
	"DT_IN1_RKC" DATE, 
	"DT_OUT1_RKC" DATE, 
	"DT_IN2_JTFG" DATE, 
	"DT_OUT2_JTFG" DATE, 
	"DT_IN2_TECHNO" DATE, 
	"DT_OUT2_TECHNO" DATE, 
	"DT_IN4_MNG" DATE, 
	"DT_OUT4_MNG" DATE, 
	"ID_SUBTYPCLEN_1" NUMBER(*,0), 
	"ID_SUBTYPCLEN_2R" NUMBER(*,0), 
	"ID_SUBTYPCLEN_2T" NUMBER(*,0), 
	"ID_SUBTYPCLEN_4" NUMBER(*,0), 
	"S_SPOLECNOSTNAZEV" VARCHAR2(256 BYTE), 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_COUNTRY" VARCHAR2(3 BYTE), 
	"S_KODKATEGORIEPROTISTRANA" CHAR(3 BYTE), 
	"ID_ZODPOVEDNAUCETNI" NUMBER(*,0), 
	"ID_SPRAVCEKONSOLIDACE" NUMBER(*,0), 
	"ID_ODPOVEDNAOSOBA" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOSTMATKA" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."KP_REP_SPOLECNOSTCARTESIS"."C_AKTIVNI" IS 'N znamena nove zalozena protistrana. Y znamena ze je aktivni uz z drivejsiho obdobi';


PROMPT Completed KP_REP_SPOLECNOSTCARTESIS.sql
PROMPT


-- ============================================================================
-- Deploy: KP_TMP_APPUSERSPOL_VYJIMKY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_TMP_APPUSERSPOL_VYJIMKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_TMP_APPUSERSPOL_VYJIMKY
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_TMP_APPUSERSPOL_VYJIMKY" 
   (	"ID_APPUSER" NUMBER, 
	"C_VSECHNO" CHAR(1 BYTE) DEFAULT '1', 
	"S_KATEGORIEVIEW" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_TMP_APPUSERSPOL_VYJIMKY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_TMP_DOKLADPROJEKT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_TMP_DOKLADPROJEKT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_TMP_DOKLADPROJEKT
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_TMP_DOKLADPROJEKT" 
   (	"ID_DOKLAD" NUMBER(*,0), 
	"NL_LEVEL" NUMBER(*,0), 
	"ID_KTGPROJEKT" NUMBER(*,0), 
	"DT_DATUMZMENY" DATE DEFAULT sysdate
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_TMP_DOKLADPROJEKT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_TMP_DOKLADPROJEKTDOKLAD.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_TMP_DOKLADPROJEKTDOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_TMP_DOKLADPROJEKTDOKLAD
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_TMP_DOKLADPROJEKTDOKLAD" 
   (	"ID_DOKLAD" NUMBER(*,0), 
	"NL_LEVEL" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_TMP_DOKLADPROJEKTDOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: KP_TMP_DOKLADVAZBY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_TMP_DOKLADVAZBY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_TMP_DOKLADVAZBY
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_TMP_DOKLADVAZBY" 
   (	"ID_DOKLAD" NUMBER(*,0), 
	"ID_KTGUCETNISKUPINA" NUMBER(*,0), 
	"ID_CENTRALA" NUMBER(*,0), 
	"NL_PORADI" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_TMP_DOKLADVAZBY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_TMP_GUI.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_TMP_GUI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_TMP_GUI
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_TMP_GUI" 
   (	"ID_AKCE" NUMBER(*,0), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"ID_DOKLAD" NUMBER(*,0), 
	"DT_DATUM" DATE DEFAULT sysdate, 
	"ID_DOKLADEDITACE" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_TMP_GUI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_TMP_SUBVAZBYVYJIMKY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_TMP_SUBVAZBYVYJIMKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_TMP_SUBVAZBYVYJIMKY
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_TMP_SUBVAZBYVYJIMKY" 
   (	"ID_KTGSUBKONSOLIDACE" NUMBER(*,0), 
	"DT_DATUM" DATE, 
	"ID_KTGUCETNISPOLECNOST_1" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOST_2" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_TMP_SUBVAZBYVYJIMKY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_TMP_VAZBY_VYJIMKY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_TMP_VAZBY_VYJIMKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_TMP_VAZBY_VYJIMKY
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_TMP_VAZBY_VYJIMKY" 
   (	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"ID_KTGAPPUSER" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_TMP_VAZBY_VYJIMKY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_TMP_VYJIMKYPROTOKOLU.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KP_TMP_VYJIMKYPROTOKOLU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KP_TMP_VYJIMKYPROTOKOLU
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KP_TMP_VYJIMKYPROTOKOLU" 
   (	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"C_PERIODICITA" CHAR(1 BYTE), 
	"S_KEDNI" VARCHAR2(6 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KP_TMP_VYJIMKYPROTOKOLU.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TABLES/KTG_APPUSER.sql: 'utf-8' codec can't decode byte 0x9e in position 1310: invalid start byte


-- ============================================================================
-- Deploy: KTG_APPUSER_10_2016.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KTG_APPUSER_10_2016.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KTG_APPUSER_10_2016
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KTG_APPUSER_10_2016" 
   (	"ID" NUMBER, 
	"S_USERID" VARCHAR2(30 BYTE), 
	"S_USERNAME" VARCHAR2(100 BYTE), 
	"S_KRESTNI" VARCHAR2(50 BYTE), 
	"S_PRIJMENI" VARCHAR2(50 BYTE), 
	"S_TITULYPRED" VARCHAR2(50 BYTE), 
	"S_TITULYPO" VARCHAR2(50 BYTE), 
	"S_EMAIL" VARCHAR2(100 BYTE), 
	"C_INDIKATOR" VARCHAR2(5 BYTE), 
	"S_TELEFON" VARCHAR2(25 BYTE), 
	"ID_CISDOCUCSPOL" NUMBER, 
	"ID_DOCUCSPOL" NUMBER, 
	"ID_DOCCOUNTRY" VARCHAR2(2 BYTE), 
	"ID_NADRIZENAUCETNI" NUMBER(*,0), 
	"C_ARCHIVNI" CHAR(1 BYTE), 
	"C_OLAP" CHAR(1 BYTE), 
	"S_ACTUATEUSERNAME" VARCHAR2(20 BYTE), 
	"C_EXTERNI" CHAR(1 BYTE), 
	"OLD_USERID" VARCHAR2(30 BYTE), 
	"C_NADRIZENAUCETNI" CHAR(1 BYTE), 
	"S_POZNAMKA" VARCHAR2(4000 BYTE), 
	"DT_PRIHLASEN" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KTG_APPUSER_10_2016.sql
PROMPT


-- ============================================================================
-- Deploy: KTG_APPUSER_BCK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KTG_APPUSER_BCK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KTG_APPUSER_BCK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KTG_APPUSER_BCK" 
   (	"ID" NUMBER, 
	"S_USERID" VARCHAR2(30 BYTE), 
	"S_USERNAME" VARCHAR2(100 BYTE), 
	"S_KRESTNI" VARCHAR2(50 BYTE), 
	"S_PRIJMENI" VARCHAR2(50 BYTE), 
	"S_TITULYPRED" VARCHAR2(50 BYTE), 
	"S_TITULYPO" VARCHAR2(50 BYTE), 
	"S_EMAIL" VARCHAR2(100 BYTE), 
	"C_INDIKATOR" VARCHAR2(5 BYTE), 
	"S_TELEFON" VARCHAR2(25 BYTE), 
	"ID_CISDOCUCSPOL" NUMBER, 
	"ID_DOCUCSPOL" NUMBER, 
	"ID_DOCCOUNTRY" VARCHAR2(2 BYTE), 
	"ID_NADRIZENAUCETNI" NUMBER(*,0), 
	"C_ARCHIVNI" CHAR(1 BYTE), 
	"C_OLAP" CHAR(1 BYTE), 
	"S_ACTUATEUSERNAME" VARCHAR2(20 BYTE), 
	"C_EXTERNI" CHAR(1 BYTE), 
	"OLD_USERID" VARCHAR2(30 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KTG_APPUSER_BCK.sql
PROMPT


-- ============================================================================
-- Deploy: KTG_APPUSER_BCK_11.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KTG_APPUSER_BCK_11.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KTG_APPUSER_BCK_11
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KTG_APPUSER_BCK_11" 
   (	"ID" NUMBER, 
	"S_USERID" VARCHAR2(30 BYTE), 
	"S_USERNAME" VARCHAR2(100 BYTE), 
	"S_KRESTNI" VARCHAR2(50 BYTE), 
	"S_PRIJMENI" VARCHAR2(50 BYTE), 
	"S_TITULYPRED" VARCHAR2(50 BYTE), 
	"S_TITULYPO" VARCHAR2(50 BYTE), 
	"S_EMAIL" VARCHAR2(100 BYTE), 
	"C_INDIKATOR" VARCHAR2(5 BYTE), 
	"S_TELEFON" VARCHAR2(25 BYTE), 
	"ID_CISDOCUCSPOL" NUMBER, 
	"ID_DOCUCSPOL" NUMBER, 
	"ID_DOCCOUNTRY" VARCHAR2(2 BYTE), 
	"ID_NADRIZENAUCETNI" NUMBER(*,0), 
	"C_ARCHIVNI" CHAR(1 BYTE), 
	"C_OLAP" CHAR(1 BYTE), 
	"S_ACTUATEUSERNAME" VARCHAR2(20 BYTE), 
	"C_EXTERNI" CHAR(1 BYTE), 
	"OLD_USERID" VARCHAR2(30 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KTG_APPUSER_BCK_11.sql
PROMPT


-- ============================================================================
-- Deploy: KTG_CENNYPAPIR.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying KTG_CENNYPAPIR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table KTG_CENNYPAPIR
--------------------------------------------------------

  CREATE TABLE "DB_JT"."KTG_CENNYPAPIR" 
   (	"ID" NUMBER(*,0), 
	"S_ISIN" VARCHAR2(20 BYTE), 
	"ND_NOMINAL" NUMBER(15,2), 
	"S_DRUHCENNEHOPAPIRU" VARCHAR2(5 BYTE), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(35 BYTE), 
	"C_REGISTROVANY" CHAR(1 BYTE), 
	"DT_SPLATNOSTJISTINY" DATE, 
	"C_TYPFREKVENCEPERIODY" CHAR(1 BYTE), 
	"NL_KUPONFREKVENCE" NUMBER(1,0), 
	"DT_KUPONDATUM1" DATE, 
	"DT_KUPONDATUM2" DATE, 
	"DT_KUPONDATUM3" DATE, 
	"DT_KUPONDATUM4" DATE, 
	"DT_KUPONDATUM5" DATE, 
	"C_TYPUROKOVESAZBY" CHAR(1 BYTE), 
	"ND_KUPONPROCENTA" NUMBER(8,4), 
	"RELATIONNUMBER0" CHAR(20 BYTE), 
	"S_ICO" VARCHAR2(20 BYTE), 
	"S_INSTRUMENTID" CHAR(20 BYTE), 
	"DT_DATUMEMISE" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed KTG_CENNYPAPIR.sql
PROMPT


-- ============================================================================
-- Deploy: LOG_AKCE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying LOG_AKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table LOG_AKCE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."LOG_AKCE" 
   (	"ID" NUMBER(*,0), 
	"ID_LOGCISAKCE" NUMBER(*,0), 
	"ID_LOGCISSTATUS" NUMBER(*,0), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"DT_START" DATE DEFAULT sysdate, 
	"DT_KONEC" DATE, 
	"ID_LOGAKCERODIC" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed LOG_AKCE.sql
PROMPT


-- ============================================================================
-- Deploy: LOG_AKCE_DETAIL.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying LOG_AKCE_DETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table LOG_AKCE_DETAIL
--------------------------------------------------------

  CREATE TABLE "DB_JT"."LOG_AKCE_DETAIL" 
   (	"ID" NUMBER(*,0), 
	"ID_LOGAKCE" NUMBER(*,0), 
	"ID_LOGCISSTATUS" NUMBER(*,0), 
	"DT_CAS" DATE DEFAULT sysdate, 
	"S_POPIS" VARCHAR2(256 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 2097152 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed LOG_AKCE_DETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: LOG_CIS_AKCE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying LOG_CIS_AKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table LOG_CIS_AKCE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."LOG_CIS_AKCE" 
   (	"ID" NUMBER(*,0), 
	"S_NAZEV" VARCHAR2(32 BYTE), 
	"S_POPIS" VARCHAR2(512 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed LOG_CIS_AKCE.sql
PROMPT


-- ============================================================================
-- Deploy: LOG_CIS_SPOL_SKUPINA0.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying LOG_CIS_SPOL_SKUPINA0.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table LOG_CIS_SPOL_SKUPINA0
--------------------------------------------------------

  CREATE TABLE "DB_JT"."LOG_CIS_SPOL_SKUPINA0" 
   (	"ID" NUMBER, 
	"ID_CIS" NUMBER, 
	"S_KOD" VARCHAR2(20 BYTE), 
	"S_POPIS" VARCHAR2(50 BYTE), 
	"ID_USER" NUMBER, 
	"DATUM" DATE, 
	"C_AKCE" CHAR(1 BYTE), 
	"USER_FROM" VARCHAR2(250 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;


PROMPT Completed LOG_CIS_SPOL_SKUPINA0.sql
PROMPT


-- ============================================================================
-- Deploy: LOG_CIS_STATUS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying LOG_CIS_STATUS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table LOG_CIS_STATUS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."LOG_CIS_STATUS" 
   (	"ID" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(256 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed LOG_CIS_STATUS.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TABLES/LOG_DWH.sql: 'utf-8' codec can't decode byte 0xe9 in position 679: invalid continuation byte


-- ============================================================================
-- Deploy: LOG_KP_PARAMETRY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying LOG_KP_PARAMETRY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table LOG_KP_PARAMETRY
--------------------------------------------------------

  CREATE TABLE "DB_JT"."LOG_KP_PARAMETRY" 
   (	"C_NG_POVOLENO" CHAR(1 BYTE), 
	"DT_NG_DATUM_DO" DATE, 
	"S_NG_HODINY" VARCHAR2(5 BYTE), 
	"S_UZIVATEL" VARCHAR2(30 BYTE), 
	"DT_ZMENA" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed LOG_KP_PARAMETRY.sql
PROMPT


-- ============================================================================
-- Deploy: LOG_KTG_APPUSER.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying LOG_KTG_APPUSER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table LOG_KTG_APPUSER
--------------------------------------------------------

  CREATE TABLE "DB_JT"."LOG_KTG_APPUSER" 
   (	"ID" NUMBER, 
	"S_USERID" VARCHAR2(30 BYTE), 
	"S_USERNAME" VARCHAR2(500 BYTE), 
	"S_KRESTNI" VARCHAR2(50 BYTE), 
	"S_PRIJMENI" VARCHAR2(50 BYTE), 
	"S_TITULYPRED" VARCHAR2(50 BYTE), 
	"S_TITULYPO" VARCHAR2(50 BYTE), 
	"S_EMAIL" VARCHAR2(100 BYTE), 
	"C_INDIKATOR" VARCHAR2(5 BYTE), 
	"S_TELEFON" VARCHAR2(25 BYTE), 
	"ID_CISDOCUCSPOL" NUMBER, 
	"ID_DOCUCSPOL" NUMBER, 
	"ID_DOCCOUNTRY" VARCHAR2(2 BYTE), 
	"ID_NADRIZENAUCETNI" NUMBER(*,0), 
	"C_ARCHIVNI" CHAR(1 BYTE), 
	"C_OLAP" CHAR(1 BYTE), 
	"S_ACTUATEUSERNAME" VARCHAR2(20 BYTE), 
	"C_EXTERNI" CHAR(1 BYTE), 
	"OLD_USERID" VARCHAR2(30 BYTE), 
	"S_UZIVATEL" VARCHAR2(100 BYTE), 
	"C_AKCE" CHAR(1 BYTE), 
	"DT_DATUM_ZMENY" DATE, 
	"S_POZNAMKA" VARCHAR2(4000 BYTE), 
	"DT_PRIHLASEN" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed LOG_KTG_APPUSER.sql
PROMPT


-- ============================================================================
-- Deploy: MD_ADDITIONAL_PROPERTIES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_ADDITIONAL_PROPERTIES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_ADDITIONAL_PROPERTIES
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_ADDITIONAL_PROPERTIES" 
   (	"ID" NUMBER, 
	"CONNECTION_ID_FK" NUMBER, 
	"REF_ID_FK" NUMBER, 
	"REF_TYPE" VARCHAR2(4000 BYTE), 
	"PROPERTY_ORDER" NUMBER, 
	"PROP_KEY" VARCHAR2(4000 BYTE), 
	"VALUE" VARCHAR2(4000 BYTE), 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."MD_ADDITIONAL_PROPERTIES"."ID" IS 'Primary Key';
   COMMENT ON COLUMN "DB_JT"."MD_ADDITIONAL_PROPERTIES"."CONNECTION_ID_FK" IS 'Connection to which this belongs //PARENTFIELD';
   COMMENT ON COLUMN "DB_JT"."MD_ADDITIONAL_PROPERTIES"."REF_ID_FK" IS 'The object to which this property blongs';
   COMMENT ON COLUMN "DB_JT"."MD_ADDITIONAL_PROPERTIES"."REF_TYPE" IS 'Type of object that this property belongs to';
   COMMENT ON COLUMN "DB_JT"."MD_ADDITIONAL_PROPERTIES"."PROPERTY_ORDER" IS 'This is to handle a situation where multiple properties have a relevant order, or multiple properties have multiple values';
   COMMENT ON COLUMN "DB_JT"."MD_ADDITIONAL_PROPERTIES"."PROP_KEY" IS 'The keyname for this property';
   COMMENT ON COLUMN "DB_JT"."MD_ADDITIONAL_PROPERTIES"."VALUE" IS 'The value for this property';
   COMMENT ON TABLE "DB_JT"."MD_ADDITIONAL_PROPERTIES"  IS 'This table is used to store additional properties in key-value pairs.  It is designed to store "other information" that is not supported in the main database object table.';


PROMPT Completed MD_ADDITIONAL_PROPERTIES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_APPLICATIONFILES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_APPLICATIONFILES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_APPLICATIONFILES
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_APPLICATIONFILES" 
   (	"ID" NUMBER, 
	"APPLICATIONS_ID_FK" NUMBER, 
	"NAME" VARCHAR2(200 BYTE), 
	"URI" VARCHAR2(4000 BYTE), 
	"TYPE" VARCHAR2(100 BYTE), 
	"STATE" VARCHAR2(100 BYTE), 
	"LANGUAGE" VARCHAR2(100 BYTE), 
	"LOC" NUMBER, 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(4000 BYTE), 
	"UPDATED_ON" DATE, 
	"UPDATED_BY" VARCHAR2(4000 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."MD_APPLICATIONFILES"."NAME" IS 'file name  //OBJECTNAME';
   COMMENT ON COLUMN "DB_JT"."MD_APPLICATIONFILES"."URI" IS 'The uri is the part of the file url after the base dir has been removed.  See MD_APPLICATION for base dir';
   COMMENT ON COLUMN "DB_JT"."MD_APPLICATIONFILES"."TYPE" IS 'This will denote the type of file we have, including DIR, FILE (text), BINARY, IGNORE (where we choose to ignore files)';
   COMMENT ON COLUMN "DB_JT"."MD_APPLICATIONFILES"."STATE" IS 'State will be how this file is operated on.  For example. it will be OPEN, NEW, FIXED, IGNORED, REVIEWED, COMPLETE';
   COMMENT ON COLUMN "DB_JT"."MD_APPLICATIONFILES"."LANGUAGE" IS 'Language of the file that has been processed.';
   COMMENT ON COLUMN "DB_JT"."MD_APPLICATIONFILES"."SECURITY_GROUP_ID" IS 'APEX';
   COMMENT ON COLUMN "DB_JT"."MD_APPLICATIONFILES"."CREATED_ON" IS 'APEX';
   COMMENT ON COLUMN "DB_JT"."MD_APPLICATIONFILES"."CREATED_BY" IS 'APEX';
   COMMENT ON COLUMN "DB_JT"."MD_APPLICATIONFILES"."UPDATED_ON" IS 'APEX';
   COMMENT ON COLUMN "DB_JT"."MD_APPLICATIONFILES"."UPDATED_BY" IS 'APEX';
   COMMENT ON TABLE "DB_JT"."MD_APPLICATIONFILES"  IS 'Holds a tuple for each file that is being processed whether it is changed or not.';


PROMPT Completed MD_APPLICATIONFILES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_APPLICATIONS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_APPLICATIONS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_APPLICATIONS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_APPLICATIONS" 
   (	"ID" NUMBER, 
	"NAME" VARCHAR2(4000 BYTE), 
	"DESCRIPTION" VARCHAR2(4000 BYTE), 
	"BASE_DIR" VARCHAR2(4000 BYTE), 
	"OUTPUT_DIR" VARCHAR2(4000 BYTE), 
	"BACKUP_DIR" VARCHAR2(4000 BYTE), 
	"INPLACE" NUMBER, 
	"PROJECT_ID_FK" NUMBER, 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."MD_APPLICATIONS"."ID" IS 'Primary Key';
   COMMENT ON COLUMN "DB_JT"."MD_APPLICATIONS"."NAME" IS 'Name of the application suite  //OBJECTNAME';
   COMMENT ON COLUMN "DB_JT"."MD_APPLICATIONS"."DESCRIPTION" IS 'Overview of what the application does.';
   COMMENT ON COLUMN "DB_JT"."MD_APPLICATIONS"."BASE_DIR" IS 'This is the base src directory for the application.  It could be an svn checkout, a clearcase view or something similar';
   COMMENT ON COLUMN "DB_JT"."MD_APPLICATIONS"."OUTPUT_DIR" IS 'This is the output directory where the scanner will present the converted files, if there are converted or modified.';
   COMMENT ON COLUMN "DB_JT"."MD_APPLICATIONS"."BACKUP_DIR" IS 'This is the directory in which the application files are backed up if a backp is chosen';
   COMMENT ON COLUMN "DB_JT"."MD_APPLICATIONS"."INPLACE" IS 'Designates whether the changes have been made inplace, in the source directory or not';
   COMMENT ON COLUMN "DB_JT"."MD_APPLICATIONS"."PROJECT_ID_FK" IS 'project of the database(s) this application relates to';
   COMMENT ON TABLE "DB_JT"."MD_APPLICATIONS"  IS 'This is the base table for application projects.  It holds the base information for applications associated with a database';


PROMPT Completed MD_APPLICATIONS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_CATALOGS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_CATALOGS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_CATALOGS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_CATALOGS" 
   (	"ID" NUMBER, 
	"CONNECTION_ID_FK" NUMBER, 
	"CATALOG_NAME" VARCHAR2(4000 BYTE), 
	"DUMMY_FLAG" CHAR(1 BYTE) DEFAULT 'N', 
	"NATIVE_SQL" CLOB, 
	"NATIVE_KEY" VARCHAR2(4000 BYTE), 
	"COMMENTS" VARCHAR2(4000 BYTE), 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS 
 LOB ("NATIVE_SQL") STORE AS BASICFILE (
  TABLESPACE USERS ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  CACHE ) ;

   COMMENT ON COLUMN "DB_JT"."MD_CATALOGS"."CONNECTION_ID_FK" IS 'Foreign key into the connections table - Shows what connection this catalog belongs to //PARENTFIELD';
   COMMENT ON COLUMN "DB_JT"."MD_CATALOGS"."CATALOG_NAME" IS 'Name of the catalog //OBJECTNAME';
   COMMENT ON COLUMN "DB_JT"."MD_CATALOGS"."DUMMY_FLAG" IS 'Flag to show if this catalog is a "dummy" catalog which is used as a placeholder for those platforms that do not support catalogs.  ''N'' signifies that this is NOT a dummy catalog, while ''Y'' signifies that it is.';
   COMMENT ON COLUMN "DB_JT"."MD_CATALOGS"."NATIVE_SQL" IS 'THe SQL used to create this catalog';
   COMMENT ON COLUMN "DB_JT"."MD_CATALOGS"."NATIVE_KEY" IS 'A unique identifier used to identify the catalog at source.';
   COMMENT ON TABLE "DB_JT"."MD_CATALOGS"  IS 'Store catalogs in this table.';


PROMPT Completed MD_CATALOGS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_CODE_REGEX.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_CODE_REGEX.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_CODE_REGEX
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_CODE_REGEX" 
   (	"ID" NUMBER, 
	"REGEX" VARCHAR2(100 BYTE), 
	"DESCRIPTION" VARCHAR2(200 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."MD_CODE_REGEX"."ID" IS 'ID of regex for searching source code';
   COMMENT ON COLUMN "DB_JT"."MD_CODE_REGEX"."REGEX" IS 'Regex to use in reports of artifiacts in code.  This will be used for customers to analyze what is in their code.';


PROMPT Completed MD_CODE_REGEX.sql
PROMPT


-- ============================================================================
-- Deploy: MD_COLUMNS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_COLUMNS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_COLUMNS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_COLUMNS" 
   (	"ID" NUMBER, 
	"TABLE_ID_FK" NUMBER, 
	"COLUMN_NAME" VARCHAR2(4000 BYTE), 
	"COLUMN_ORDER" NUMBER, 
	"COLUMN_TYPE" VARCHAR2(4000 BYTE), 
	"PRECISION" NUMBER, 
	"SCALE" NUMBER, 
	"NULLABLE" CHAR(1 BYTE), 
	"DEFAULT_VALUE" VARCHAR2(4000 BYTE), 
	"NATIVE_SQL" CLOB, 
	"NATIVE_KEY" VARCHAR2(4000 BYTE), 
	"DATATYPE_TRANSFORMED_FLAG" CHAR(1 BYTE), 
	"COMMENTS" VARCHAR2(4000 BYTE), 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS 
 LOB ("NATIVE_SQL") STORE AS BASICFILE (
  TABLESPACE USERS ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  CACHE READS LOGGING ) ;

   COMMENT ON COLUMN "DB_JT"."MD_COLUMNS"."ID" IS 'Primary Key';
   COMMENT ON COLUMN "DB_JT"."MD_COLUMNS"."TABLE_ID_FK" IS 'The table that this column is part of //PARENTFIELD';
   COMMENT ON COLUMN "DB_JT"."MD_COLUMNS"."COLUMN_NAME" IS 'The name of the column //OBJECTNAME';
   COMMENT ON COLUMN "DB_JT"."MD_COLUMNS"."COLUMN_ORDER" IS 'The order this appears in the table';
   COMMENT ON COLUMN "DB_JT"."MD_COLUMNS"."COLUMN_TYPE" IS 'The type of the column';
   COMMENT ON COLUMN "DB_JT"."MD_COLUMNS"."PRECISION" IS 'The precision on the column';
   COMMENT ON COLUMN "DB_JT"."MD_COLUMNS"."SCALE" IS 'The scale of the column';
   COMMENT ON COLUMN "DB_JT"."MD_COLUMNS"."NULLABLE" IS 'Yes or No.  Null signifies NO';
   COMMENT ON COLUMN "DB_JT"."MD_COLUMNS"."DEFAULT_VALUE" IS 'Default value on the column';
   COMMENT ON COLUMN "DB_JT"."MD_COLUMNS"."NATIVE_SQL" IS 'The SQL used to create this column at source';
   COMMENT ON COLUMN "DB_JT"."MD_COLUMNS"."NATIVE_KEY" IS 'Unique identifier for this object at source';
   COMMENT ON COLUMN "DB_JT"."MD_COLUMNS"."DATATYPE_TRANSFORMED_FLAG" IS 'This is set to ''Y'' to show if the data type was transformed.  This is useful so we don''t apply more than 1 datatype transformation to a column';
   COMMENT ON TABLE "DB_JT"."MD_COLUMNS"  IS 'Column information is stored in this table.';


PROMPT Completed MD_COLUMNS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_CONNECTIONS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_CONNECTIONS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_CONNECTIONS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_CONNECTIONS" 
   (	"ID" NUMBER, 
	"PROJECT_ID_FK" NUMBER, 
	"TYPE" VARCHAR2(4000 BYTE), 
	"HOST" VARCHAR2(4000 BYTE), 
	"PORT" NUMBER, 
	"USERNAME" VARCHAR2(4000 BYTE), 
	"PASSWORD" VARCHAR2(4000 BYTE), 
	"DBURL" VARCHAR2(4000 BYTE), 
	"NAME" VARCHAR2(255 BYTE), 
	"NATIVE_SQL" CLOB, 
	"STATUS" VARCHAR2(30 BYTE), 
	"NUM_CATALOGS" NUMBER, 
	"NUM_COLUMNS" NUMBER, 
	"NUM_CONSTRAINTS" NUMBER, 
	"NUM_GROUPS" NUMBER, 
	"NUM_ROLES" NUMBER, 
	"NUM_INDEXES" NUMBER, 
	"NUM_OTHER_OBJECTS" NUMBER, 
	"NUM_PACKAGES" NUMBER, 
	"NUM_PRIVILEGES" NUMBER, 
	"NUM_SCHEMAS" NUMBER, 
	"NUM_SEQUENCES" NUMBER, 
	"NUM_STORED_PROGRAMS" NUMBER, 
	"NUM_SYNONYMS" NUMBER, 
	"NUM_TABLES" NUMBER, 
	"NUM_TABLESPACES" NUMBER, 
	"NUM_TRIGGERS" NUMBER, 
	"NUM_USER_DEFINED_DATA_TYPES" NUMBER, 
	"NUM_USERS" NUMBER, 
	"NUM_VIEWS" NUMBER, 
	"COMMENTS" VARCHAR2(4000 BYTE), 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS 
 LOB ("NATIVE_SQL") STORE AS BASICFILE (
  TABLESPACE USERS ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  CACHE READS LOGGING ) ;

   COMMENT ON COLUMN "DB_JT"."MD_CONNECTIONS"."ID" IS 'Primary key';
   COMMENT ON COLUMN "DB_JT"."MD_CONNECTIONS"."PROJECT_ID_FK" IS 'The project to which this connection belongs //PARENTFIELD';
   COMMENT ON COLUMN "DB_JT"."MD_CONNECTIONS"."TYPE" IS 'The type of the connection - For example it could be used to store "ORACLE" or "MYSQL"';
   COMMENT ON COLUMN "DB_JT"."MD_CONNECTIONS"."HOST" IS 'The host to which this connection connects.';
   COMMENT ON COLUMN "DB_JT"."MD_CONNECTIONS"."PORT" IS 'The port to which this connection connects';
   COMMENT ON COLUMN "DB_JT"."MD_CONNECTIONS"."USERNAME" IS 'The username used to make the connection';
   COMMENT ON COLUMN "DB_JT"."MD_CONNECTIONS"."PASSWORD" IS 'The password used to make this connection';
   COMMENT ON COLUMN "DB_JT"."MD_CONNECTIONS"."DBURL" IS 'The database url used to make this connection';
   COMMENT ON COLUMN "DB_JT"."MD_CONNECTIONS"."NAME" IS '//OBJECTNAME';
   COMMENT ON COLUMN "DB_JT"."MD_CONNECTIONS"."NATIVE_SQL" IS 'The native sql used to create this connection';
   COMMENT ON COLUMN "DB_JT"."MD_CONNECTIONS"."STATUS" IS 'Status of Migration, = captured,converted,generated,datamoved';
   COMMENT ON TABLE "DB_JT"."MD_CONNECTIONS"  IS 'This table is used to store connection information.  For example, in migrations, we could be carrying out a consolidation which occurs across many connections.';


PROMPT Completed MD_CONNECTIONS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_CONSTRAINTS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_CONSTRAINTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_CONSTRAINTS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_CONSTRAINTS" 
   (	"ID" NUMBER, 
	"DELETE_CLAUSE" VARCHAR2(4000 BYTE), 
	"NAME" VARCHAR2(4000 BYTE), 
	"CONSTRAINT_TYPE" VARCHAR2(4000 BYTE), 
	"TABLE_ID_FK" NUMBER, 
	"REFTABLE_ID_FK" NUMBER, 
	"CONSTRAINT_TEXT" CLOB, 
	"LANGUAGE" VARCHAR2(40 BYTE), 
	"COMMENTS" VARCHAR2(4000 BYTE), 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS 
 LOB ("CONSTRAINT_TEXT") STORE AS BASICFILE (
  TABLESPACE USERS ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  CACHE READS LOGGING ) ;

   COMMENT ON COLUMN "DB_JT"."MD_CONSTRAINTS"."ID" IS 'Primary Key';
   COMMENT ON COLUMN "DB_JT"."MD_CONSTRAINTS"."DELETE_CLAUSE" IS 'delete option , can be either CASCADE, RESTRICT or NULL';
   COMMENT ON COLUMN "DB_JT"."MD_CONSTRAINTS"."NAME" IS 'Name of the constraint //OBJECTNAME';
   COMMENT ON COLUMN "DB_JT"."MD_CONSTRAINTS"."CONSTRAINT_TYPE" IS 'Type of the constraint (e.g. CHECK)';
   COMMENT ON COLUMN "DB_JT"."MD_CONSTRAINTS"."TABLE_ID_FK" IS 'Table on which this constraint exists //PARENTFIELD';
   COMMENT ON COLUMN "DB_JT"."MD_CONSTRAINTS"."REFTABLE_ID_FK" IS 'Used in foreign keys - this gives the table that we refer to.';
   COMMENT ON COLUMN "DB_JT"."MD_CONSTRAINTS"."CONSTRAINT_TEXT" IS 'The text of the constraint';
   COMMENT ON COLUMN "DB_JT"."MD_CONSTRAINTS"."LANGUAGE" IS '//PUBLIC';
   COMMENT ON TABLE "DB_JT"."MD_CONSTRAINTS"  IS 'Table for storing information about a constraint';


PROMPT Completed MD_CONSTRAINTS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_CONSTRAINT_DETAILS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_CONSTRAINT_DETAILS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_CONSTRAINT_DETAILS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_CONSTRAINT_DETAILS" 
   (	"ID" NUMBER, 
	"REF_FLAG" CHAR(1 BYTE) DEFAULT 'N', 
	"CONSTRAINT_ID_FK" NUMBER, 
	"COLUMN_ID_FK" NUMBER, 
	"COLUMN_PORTION" NUMBER, 
	"CONSTRAINT_TEXT" CLOB, 
	"DETAIL_ORDER" NUMBER, 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS 
 LOB ("CONSTRAINT_TEXT") STORE AS BASICFILE (
  TABLESPACE USERS ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  CACHE READS LOGGING ) ;

   COMMENT ON COLUMN "DB_JT"."MD_CONSTRAINT_DETAILS"."ID" IS 'Primary Key';
   COMMENT ON COLUMN "DB_JT"."MD_CONSTRAINT_DETAILS"."REF_FLAG" IS '"N" or Null signify that this column is the colum that is used in the constraint.  A flag of Y signifies that the colum is a referenced column (i.e. part of a foreign key constraint)';
   COMMENT ON COLUMN "DB_JT"."MD_CONSTRAINT_DETAILS"."CONSTRAINT_ID_FK" IS 'Constraint that this detail belongs to //PARENTFIELD';
   COMMENT ON COLUMN "DB_JT"."MD_CONSTRAINT_DETAILS"."COLUMN_PORTION" IS 'The portion of a column this detail belongs (e.g. for constrints on substrings)';
   COMMENT ON COLUMN "DB_JT"."MD_CONSTRAINT_DETAILS"."CONSTRAINT_TEXT" IS 'The text of the constraint';
   COMMENT ON TABLE "DB_JT"."MD_CONSTRAINT_DETAILS"  IS 'Constraint details show what columns are "involved" in a constraint.';


PROMPT Completed MD_CONSTRAINT_DETAILS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_DERIVATIVES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_DERIVATIVES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_DERIVATIVES
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_DERIVATIVES" 
   (	"ID" NUMBER, 
	"SRC_ID" NUMBER, 
	"SRC_TYPE" VARCHAR2(4000 BYTE), 
	"DERIVED_ID" NUMBER, 
	"DERIVED_TYPE" VARCHAR2(4000 BYTE), 
	"DERIVED_CONNECTION_ID_FK" NUMBER, 
	"TRANSFORMED" CHAR(1 BYTE), 
	"ORIGINAL_IDENTIFIER" VARCHAR2(4000 BYTE), 
	"NEW_IDENTIFIER" VARCHAR2(4000 BYTE), 
	"DERIVED_OBJECT_NAMESPACE" VARCHAR2(40 BYTE), 
	"DERIVATIVE_REASON" VARCHAR2(10 BYTE), 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE), 
	"ENABLED" CHAR(1 BYTE) DEFAULT 'Y'
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."MD_DERIVATIVES"."TRANSFORMED" IS 'Set this field to ''Y'' if we carry out any sort of transformation on teh derived object.';
   COMMENT ON TABLE "DB_JT"."MD_DERIVATIVES"  IS 'This table is used to store objects that are derived from each other.  For example in a migration an auto-increment column in a source model could be mapped to a primary key, and a sequence, and a trigger.  The MD_DERIVATIVES table would store the fact that these 3 objects are derived from the auto-increment column.';


PROMPT Completed MD_DERIVATIVES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_FILE_ARTIFACTS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_FILE_ARTIFACTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_FILE_ARTIFACTS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_FILE_ARTIFACTS" 
   (	"ID" NUMBER, 
	"APPLICATIONFILES_ID" NUMBER, 
	"PATTERN" VARCHAR2(4000 BYTE), 
	"STRING_FOUND" VARCHAR2(4000 BYTE), 
	"STRING_REPLACED" VARCHAR2(4000 BYTE), 
	"TYPE" VARCHAR2(200 BYTE), 
	"STATUS" VARCHAR2(4000 BYTE), 
	"LINE" NUMBER, 
	"PATTERN_START" NUMBER, 
	"PATTERN_END" NUMBER, 
	"DUE_DATE" DATE, 
	"DB_TYPE" VARCHAR2(100 BYTE), 
	"CODE_TYPE" VARCHAR2(1000 BYTE), 
	"DESCRIPTION" VARCHAR2(4000 BYTE), 
	"PRIORITY" NUMBER(*,0), 
	"SECURITY_GROUP_ID" VARCHAR2(20 BYTE) DEFAULT '0', 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(4000 BYTE), 
	"LAST_UPDATED" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(4000 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."MD_FILE_ARTIFACTS"."PATTERN" IS 'Pattern used to search source file for interesting artifiacts';
   COMMENT ON COLUMN "DB_JT"."MD_FILE_ARTIFACTS"."STRING_FOUND" IS 'String found in source from the pattern supplied';
   COMMENT ON COLUMN "DB_JT"."MD_FILE_ARTIFACTS"."STRING_REPLACED" IS 'This is the string which replace the string found if it was replaced.';
   COMMENT ON COLUMN "DB_JT"."MD_FILE_ARTIFACTS"."TYPE" IS 'This is the type of the replacement.  It could be a straight replace from a replacement pattern, or we could have passed the string to a translator which would change the string depending on the database.';
   COMMENT ON COLUMN "DB_JT"."MD_FILE_ARTIFACTS"."STATUS" IS 'Pattern used to search source file for interesting artifiacts';
   COMMENT ON COLUMN "DB_JT"."MD_FILE_ARTIFACTS"."DUE_DATE" IS 'Due date is used by the TODO mechanism to manage the validation and work to complete this change';
   COMMENT ON COLUMN "DB_JT"."MD_FILE_ARTIFACTS"."DB_TYPE" IS 'Source database calls type';
   COMMENT ON COLUMN "DB_JT"."MD_FILE_ARTIFACTS"."CODE_TYPE" IS 'Source code db api, like dblib, jdbc';
   COMMENT ON COLUMN "DB_JT"."MD_FILE_ARTIFACTS"."DESCRIPTION" IS 'This is a description of the artifact which will have a default generated by the scanner and then can be modified by the user to be more appropriate for their use';
   COMMENT ON COLUMN "DB_JT"."MD_FILE_ARTIFACTS"."PRIORITY" IS 'The priority is set for the TODOs so they can be managed by the user';
   COMMENT ON TABLE "DB_JT"."MD_FILE_ARTIFACTS"  IS 'Holds a tuple for each interesting thing the scanner finds in a file';


PROMPT Completed MD_FILE_ARTIFACTS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_GROUPS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_GROUPS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_GROUPS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_GROUPS" 
   (	"ID" NUMBER, 
	"SCHEMA_ID_FK" NUMBER, 
	"GROUP_NAME" VARCHAR2(4000 BYTE), 
	"GROUP_FLAG" CHAR(1 BYTE), 
	"NATIVE_SQL" CLOB, 
	"NATIVE_KEY" VARCHAR2(4000 BYTE), 
	"COMMENTS" VARCHAR2(4000 BYTE), 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS 
 LOB ("NATIVE_SQL") STORE AS BASICFILE (
  TABLESPACE USERS ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  CACHE READS LOGGING ) ;

   COMMENT ON COLUMN "DB_JT"."MD_GROUPS"."ID" IS 'Primary Key';
   COMMENT ON COLUMN "DB_JT"."MD_GROUPS"."SCHEMA_ID_FK" IS 'Schema in which this object belongs //PARENTFIELD';
   COMMENT ON COLUMN "DB_JT"."MD_GROUPS"."GROUP_NAME" IS 'Name of the group //OBJECTNAME';
   COMMENT ON COLUMN "DB_JT"."MD_GROUPS"."GROUP_FLAG" IS 'This is a flag to signify a group or a role.  If this is ''R'' it means the group is known as a Role.  Any other value means it is known as a group.';
   COMMENT ON COLUMN "DB_JT"."MD_GROUPS"."NATIVE_SQL" IS 'SQL Used to generate this object at source';
   COMMENT ON COLUMN "DB_JT"."MD_GROUPS"."NATIVE_KEY" IS 'Unique id for this object at source';
   COMMENT ON TABLE "DB_JT"."MD_GROUPS"  IS 'Groups of users in a schema';


PROMPT Completed MD_GROUPS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_GROUP_MEMBERS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_GROUP_MEMBERS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_GROUP_MEMBERS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_GROUP_MEMBERS" 
   (	"ID" NUMBER, 
	"GROUP_ID_FK" NUMBER, 
	"USER_ID_FK" NUMBER, 
	"GROUP_MEMBER_ID_FK" NUMBER, 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."MD_GROUP_MEMBERS"."ID" IS 'Primary Key';
   COMMENT ON COLUMN "DB_JT"."MD_GROUP_MEMBERS"."USER_ID_FK" IS 'Id of member';
   COMMENT ON COLUMN "DB_JT"."MD_GROUP_MEMBERS"."GROUP_MEMBER_ID_FK" IS 'groups can be members of groups';
   COMMENT ON TABLE "DB_JT"."MD_GROUP_MEMBERS"  IS 'This table is used to store the members of a group.';


PROMPT Completed MD_GROUP_MEMBERS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_GROUP_PRIVILEGES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_GROUP_PRIVILEGES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_GROUP_PRIVILEGES
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_GROUP_PRIVILEGES" 
   (	"ID" NUMBER, 
	"GROUP_ID_FK" NUMBER, 
	"PRIVILEGE_ID_FK" NUMBER, 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;

   COMMENT ON TABLE "DB_JT"."MD_GROUP_PRIVILEGES"  IS 'This table stores the privileges granted to a group (or role)';


PROMPT Completed MD_GROUP_PRIVILEGES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_INDEXES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_INDEXES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_INDEXES
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_INDEXES" 
   (	"ID" NUMBER, 
	"INDEX_TYPE" VARCHAR2(4000 BYTE), 
	"TABLE_ID_FK" NUMBER, 
	"INDEX_NAME" VARCHAR2(4000 BYTE), 
	"NATIVE_SQL" CLOB, 
	"NATIVE_KEY" VARCHAR2(4000 BYTE), 
	"COMMENTS" VARCHAR2(4000 BYTE), 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(4000 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS 
 LOB ("NATIVE_SQL") STORE AS BASICFILE (
  TABLESPACE USERS ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  CACHE READS LOGGING ) ;

   COMMENT ON COLUMN "DB_JT"."MD_INDEXES"."ID" IS 'Primary Key';
   COMMENT ON COLUMN "DB_JT"."MD_INDEXES"."INDEX_TYPE" IS 'Type of the index e.g. PRIMARY';
   COMMENT ON COLUMN "DB_JT"."MD_INDEXES"."TABLE_ID_FK" IS 'Table that this index is on //PARENTFIELD';
   COMMENT ON COLUMN "DB_JT"."MD_INDEXES"."INDEX_NAME" IS 'Name of the index //OBJECTNAME';
   COMMENT ON COLUMN "DB_JT"."MD_INDEXES"."NATIVE_SQL" IS 'SQL used to create the index at source';
   COMMENT ON COLUMN "DB_JT"."MD_INDEXES"."NATIVE_KEY" IS 'A unique identifier for this object at the source';
   COMMENT ON TABLE "DB_JT"."MD_INDEXES"  IS 'This table is used to store information about the indexes in a schema';


PROMPT Completed MD_INDEXES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_INDEX_DETAILS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_INDEX_DETAILS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_INDEX_DETAILS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_INDEX_DETAILS" 
   (	"ID" NUMBER, 
	"INDEX_ID_FK" NUMBER, 
	"COLUMN_ID_FK" NUMBER, 
	"INDEX_PORTION" NUMBER, 
	"DETAIL_ORDER" NUMBER, 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."MD_INDEX_DETAILS"."INDEX_ID_FK" IS 'The index to which this detail belongs. //PARENTFIELD';
   COMMENT ON COLUMN "DB_JT"."MD_INDEX_DETAILS"."INDEX_PORTION" IS 'To support indexing on part of a field';
   COMMENT ON TABLE "DB_JT"."MD_INDEX_DETAILS"  IS 'This table stores the details of an index.  It shows what columns are "part" of the index.';


PROMPT Completed MD_INDEX_DETAILS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_MIGR_DEPENDENCY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_MIGR_DEPENDENCY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_MIGR_DEPENDENCY
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_MIGR_DEPENDENCY" 
   (	"ID" NUMBER, 
	"CONNECTION_ID_FK" NUMBER, 
	"PARENT_ID" NUMBER, 
	"CHILD_ID" NUMBER, 
	"PARENT_OBJECT_TYPE" VARCHAR2(4000 BYTE), 
	"CHILD_OBJECT_TYPE" VARCHAR2(4000 BYTE), 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."MD_MIGR_DEPENDENCY"."CONNECTION_ID_FK" IS 'The connection that this exists in //PARENTFIELD';


PROMPT Completed MD_MIGR_DEPENDENCY.sql
PROMPT


-- ============================================================================
-- Deploy: MD_MIGR_PARAMETER.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_MIGR_PARAMETER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_MIGR_PARAMETER
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_MIGR_PARAMETER" 
   (	"ID" NUMBER, 
	"CONNECTION_ID_FK" NUMBER, 
	"OBJECT_ID" NUMBER, 
	"OBJECT_TYPE" VARCHAR2(4000 BYTE), 
	"PARAM_EXISTING" NUMBER, 
	"PARAM_ORDER" NUMBER, 
	"PARAM_NAME" VARCHAR2(4000 BYTE), 
	"PARAM_TYPE" VARCHAR2(4000 BYTE), 
	"PARAM_DATA_TYPE" VARCHAR2(4000 BYTE), 
	"PERCISION" NUMBER, 
	"SCALE" NUMBER, 
	"NULLABLE" CHAR(1 BYTE), 
	"DEFAULT_VALUE" VARCHAR2(4000 BYTE), 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."MD_MIGR_PARAMETER"."CONNECTION_ID_FK" IS 'the connection in which this belongs //PARENTFIELD';
   COMMENT ON COLUMN "DB_JT"."MD_MIGR_PARAMETER"."PARAM_EXISTING" IS '1 represents a new parameter for PL/SQL that was not present in the origional. 0 represents a n existing parameter that was present in the origional';
   COMMENT ON COLUMN "DB_JT"."MD_MIGR_PARAMETER"."PARAM_ORDER" IS 'IF -1 THEN THIS PARAM IS A RETURN PARAMETER. 1 WILL BE THE FIRST PARAMETER IN THE PARAMETER LIST';


PROMPT Completed MD_MIGR_PARAMETER.sql
PROMPT


-- ============================================================================
-- Deploy: MD_MIGR_WEAKDEP.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_MIGR_WEAKDEP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_MIGR_WEAKDEP
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_MIGR_WEAKDEP" 
   (	"ID" NUMBER, 
	"CONNECTION_ID_FK" NUMBER, 
	"SCHEMA_ID_FK" NUMBER, 
	"PARENT_ID" NUMBER, 
	"CHILD_NAME" VARCHAR2(4000 BYTE), 
	"PARENT_TYPE" VARCHAR2(4000 BYTE), 
	"CHILD_TYPE" VARCHAR2(4000 BYTE), 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."MD_MIGR_WEAKDEP"."CHILD_NAME" IS 'name of the child,  as weak dependencies dont have reference to child id';
   COMMENT ON COLUMN "DB_JT"."MD_MIGR_WEAKDEP"."PARENT_TYPE" IS 'MD_<tablename>';
   COMMENT ON COLUMN "DB_JT"."MD_MIGR_WEAKDEP"."CHILD_TYPE" IS 'Generic Type (not MD_<tablename>)';


PROMPT Completed MD_MIGR_WEAKDEP.sql
PROMPT


-- ============================================================================
-- Deploy: MD_NUMROW_SOURCE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_NUMROW_SOURCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_NUMROW$SOURCE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_NUMROW$SOURCE" 
   (	"NUMROWS" NUMBER(10,0), 
	"NAME" VARCHAR2(4000 BYTE), 
	"OBJID" NUMBER(10,0)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;


PROMPT Completed MD_NUMROW_SOURCE.sql
PROMPT


-- ============================================================================
-- Deploy: MD_NUMROW_TARGET.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_NUMROW_TARGET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_NUMROW$TARGET
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_NUMROW$TARGET" 
   (	"NUMROWS" NUMBER(10,0), 
	"NAME" VARCHAR2(4000 BYTE), 
	"OBJID" NUMBER(10,0)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;


PROMPT Completed MD_NUMROW_TARGET.sql
PROMPT


-- ============================================================================
-- Deploy: MD_OTHER_OBJECTS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_OTHER_OBJECTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_OTHER_OBJECTS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_OTHER_OBJECTS" 
   (	"ID" NUMBER, 
	"SCHEMA_ID_FK" NUMBER, 
	"NAME" VARCHAR2(4000 BYTE), 
	"NATIVE_SQL" CLOB, 
	"NATIVE_KEY" VARCHAR2(4000 BYTE), 
	"COMMENTS" VARCHAR2(4000 BYTE), 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS 
 LOB ("NATIVE_SQL") STORE AS BASICFILE (
  TABLESPACE USERS ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  CACHE READS LOGGING ) ;

   COMMENT ON COLUMN "DB_JT"."MD_OTHER_OBJECTS"."ID" IS 'Primary Key';
   COMMENT ON COLUMN "DB_JT"."MD_OTHER_OBJECTS"."SCHEMA_ID_FK" IS 'Schema to which this object blongs. //PARENTFIELD';
   COMMENT ON COLUMN "DB_JT"."MD_OTHER_OBJECTS"."NAME" IS 'Name of this object //OBJECTNAME';
   COMMENT ON COLUMN "DB_JT"."MD_OTHER_OBJECTS"."NATIVE_SQL" IS 'The native SQL used to create this object';
   COMMENT ON COLUMN "DB_JT"."MD_OTHER_OBJECTS"."NATIVE_KEY" IS 'A key that identifies this object at source.';
   COMMENT ON TABLE "DB_JT"."MD_OTHER_OBJECTS"  IS 'For storing objects that don''''t belong anywhere else';


PROMPT Completed MD_OTHER_OBJECTS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_PACKAGES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_PACKAGES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_PACKAGES
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_PACKAGES" 
   (	"ID" NUMBER, 
	"SCHEMA_ID_FK" NUMBER, 
	"NAME" VARCHAR2(4000 BYTE), 
	"PACKAGE_HEADER" CLOB, 
	"NATIVE_SQL" CLOB, 
	"NATIVE_KEY" VARCHAR2(4000 BYTE), 
	"LANGUAGE" VARCHAR2(40 BYTE), 
	"COMMENTS" VARCHAR2(4000 BYTE), 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS 
 LOB ("PACKAGE_HEADER") STORE AS SECUREFILE (
  TABLESPACE USERS ENABLE STORAGE IN ROW CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES ) 
 LOB ("NATIVE_SQL") STORE AS BASICFILE (
  TABLESPACE USERS ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  CACHE READS LOGGING ) ;

   COMMENT ON COLUMN "DB_JT"."MD_PACKAGES"."ID" IS 'Primary Key';
   COMMENT ON COLUMN "DB_JT"."MD_PACKAGES"."SCHEMA_ID_FK" IS 'the schema in which this package resides //PARENTFIELD';
   COMMENT ON COLUMN "DB_JT"."MD_PACKAGES"."NAME" IS 'Name of this package //OBJECTNAME';
   COMMENT ON COLUMN "DB_JT"."MD_PACKAGES"."NATIVE_SQL" IS 'The SQL used to create this package at source';
   COMMENT ON COLUMN "DB_JT"."MD_PACKAGES"."NATIVE_KEY" IS 'A unique identifer for this object at source.';
   COMMENT ON COLUMN "DB_JT"."MD_PACKAGES"."LANGUAGE" IS '//PUBLIC';
   COMMENT ON TABLE "DB_JT"."MD_PACKAGES"  IS 'For storing packages';


PROMPT Completed MD_PACKAGES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_PARTITIONS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_PARTITIONS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_PARTITIONS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_PARTITIONS" 
   (	"ID" NUMBER, 
	"TABLE_ID_FK" NUMBER, 
	"NATIVE_SQL" CLOB, 
	"PARTITION_EXPRESSION" VARCHAR2(4000 BYTE), 
	"COMMENTS" VARCHAR2(4000 BYTE), 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS 
 LOB ("NATIVE_SQL") STORE AS BASICFILE (
  TABLESPACE USERS ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  CACHE READS LOGGING ) ;

   COMMENT ON COLUMN "DB_JT"."MD_PARTITIONS"."ID" IS 'Primary Key';
   COMMENT ON COLUMN "DB_JT"."MD_PARTITIONS"."TABLE_ID_FK" IS 'The table that this partition refers to //PARENTFIELD';
   COMMENT ON COLUMN "DB_JT"."MD_PARTITIONS"."NATIVE_SQL" IS 'The SQL used to create this partition at source';
   COMMENT ON COLUMN "DB_JT"."MD_PARTITIONS"."PARTITION_EXPRESSION" IS 'The partition expression';
   COMMENT ON TABLE "DB_JT"."MD_PARTITIONS"  IS 'Partition information is stored in this table.';


PROMPT Completed MD_PARTITIONS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_PRIVILEGES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_PRIVILEGES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_PRIVILEGES
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_PRIVILEGES" 
   (	"ID" NUMBER, 
	"SCHEMA_ID_FK" NUMBER, 
	"PRIVILEGE_NAME" VARCHAR2(4000 BYTE), 
	"PRIVELEGE_OBJECT_ID" NUMBER, 
	"PRIVELEGEOBJECTTYPE" VARCHAR2(4000 BYTE), 
	"PRIVELEGE_TYPE" VARCHAR2(4000 BYTE), 
	"ADMIN_OPTION" CHAR(1 BYTE), 
	"NATIVE_SQL" CLOB, 
	"NATIVE_KEY" VARCHAR2(4000 BYTE), 
	"COMMENTS" VARCHAR2(4000 BYTE), 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS 
 LOB ("NATIVE_SQL") STORE AS BASICFILE (
  TABLESPACE USERS ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  CACHE READS LOGGING ) ;

   COMMENT ON COLUMN "DB_JT"."MD_PRIVILEGES"."ID" IS 'Primary Key';
   COMMENT ON COLUMN "DB_JT"."MD_PRIVILEGES"."SCHEMA_ID_FK" IS 'The schema to which this object belongs //PARENTFIELD';
   COMMENT ON COLUMN "DB_JT"."MD_PRIVILEGES"."PRIVILEGE_NAME" IS 'The name of the privilege //OBJECTNAME';
   COMMENT ON COLUMN "DB_JT"."MD_PRIVILEGES"."PRIVELEGE_OBJECT_ID" IS 'This references the table, view, etc on which the privelege exists.  This can be NULL for things like system wide privileges';
   COMMENT ON COLUMN "DB_JT"."MD_PRIVILEGES"."PRIVELEGEOBJECTTYPE" IS 'The type the privelege is on (e.g. INDEX)';
   COMMENT ON COLUMN "DB_JT"."MD_PRIVILEGES"."PRIVELEGE_TYPE" IS 'e.g.select';
   COMMENT ON COLUMN "DB_JT"."MD_PRIVILEGES"."ADMIN_OPTION" IS 'Flag to show if this was granted with admin option.  ''Y'' means it was granted with admin option ''N'' means it was NOT granted with admin option.  NULL means not applicable (e.g. not known, not supported by source platform, etc.)';
   COMMENT ON COLUMN "DB_JT"."MD_PRIVILEGES"."NATIVE_SQL" IS 'The SQL used to create this privilege at source';
   COMMENT ON COLUMN "DB_JT"."MD_PRIVILEGES"."NATIVE_KEY" IS 'An identifier for this object at source.';
   COMMENT ON TABLE "DB_JT"."MD_PRIVILEGES"  IS 'This table stores privilege information';


PROMPT Completed MD_PRIVILEGES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_PROJECTS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_PROJECTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_PROJECTS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_PROJECTS" 
   (	"ID" NUMBER, 
	"PROJECT_NAME" VARCHAR2(4000 BYTE), 
	"COMMENTS" VARCHAR2(4000 BYTE), 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."MD_PROJECTS"."ID" IS 'Primary key';
   COMMENT ON COLUMN "DB_JT"."MD_PROJECTS"."PROJECT_NAME" IS 'Name of the project //OBJECTNAME';
   COMMENT ON TABLE "DB_JT"."MD_PROJECTS"  IS 'This is a top level container for a set of connections.';


PROMPT Completed MD_PROJECTS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_REGISTRY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_REGISTRY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_REGISTRY
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_REGISTRY" 
   (	"OBJECT_TYPE" VARCHAR2(30 BYTE), 
	"OBJECT_NAME" VARCHAR2(30 BYTE), 
	"DESC_OBJECT_NAME" VARCHAR2(30 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON TABLE "DB_JT"."MD_REGISTRY"  IS 'Table to store information on the MD_ repository.  This lists the objects to be dropped if you wish to remove the repository';


PROMPT Completed MD_REGISTRY.sql
PROMPT


-- ============================================================================
-- Deploy: MD_REPOVERSIONS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_REPOVERSIONS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_REPOVERSIONS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_REPOVERSIONS" 
   (	"REVISION" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;

   COMMENT ON TABLE "DB_JT"."MD_REPOVERSIONS"  IS 'This table is used to version this schema for future requirements.';


PROMPT Completed MD_REPOVERSIONS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_SCHEMAS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_SCHEMAS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_SCHEMAS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_SCHEMAS" 
   (	"ID" NUMBER, 
	"CATALOG_ID_FK" NUMBER, 
	"NAME" VARCHAR2(4000 BYTE), 
	"TYPE" CHAR(1 BYTE), 
	"CHARACTER_SET" VARCHAR2(4000 BYTE), 
	"VERSION_TAG" VARCHAR2(40 BYTE), 
	"NATIVE_SQL" CLOB, 
	"NATIVE_KEY" VARCHAR2(4000 BYTE), 
	"COMMENTS" VARCHAR2(4000 BYTE), 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS 
 LOB ("NATIVE_SQL") STORE AS BASICFILE (
  TABLESPACE USERS ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  CACHE READS LOGGING ) ;

   COMMENT ON COLUMN "DB_JT"."MD_SCHEMAS"."ID" IS 'Primary Key';
   COMMENT ON COLUMN "DB_JT"."MD_SCHEMAS"."CATALOG_ID_FK" IS 'Catalog to which this schema blongs //PARENTFIELD';
   COMMENT ON COLUMN "DB_JT"."MD_SCHEMAS"."NAME" IS 'Name of the schema //OBJECTNAME';
   COMMENT ON COLUMN "DB_JT"."MD_SCHEMAS"."TYPE" IS 'Type of this schema.  Eaxamples are ''CAPTURED'' OR ''CONVERTED''';
   COMMENT ON COLUMN "DB_JT"."MD_SCHEMAS"."CHARACTER_SET" IS 'The characterset of this schema';
   COMMENT ON COLUMN "DB_JT"."MD_SCHEMAS"."VERSION_TAG" IS 'A version string that can be used for tagging/baseling a schema';
   COMMENT ON COLUMN "DB_JT"."MD_SCHEMAS"."NATIVE_SQL" IS 'The native SQL used to create this schema';
   COMMENT ON COLUMN "DB_JT"."MD_SCHEMAS"."NATIVE_KEY" IS 'A unique identifier that this schema is known as in its source state.';
   COMMENT ON TABLE "DB_JT"."MD_SCHEMAS"  IS 'This is the holder for schemas';


PROMPT Completed MD_SCHEMAS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_SEQUENCES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_SEQUENCES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_SEQUENCES
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_SEQUENCES" 
   (	"ID" NUMBER, 
	"SCHEMA_ID_FK" NUMBER, 
	"NAME" VARCHAR2(4000 BYTE), 
	"SEQ_START" NUMBER, 
	"INCR" NUMBER DEFAULT 1, 
	"NATIVE_SQL" CLOB, 
	"NATIVE_KEY" VARCHAR2(4000 BYTE), 
	"COMMENTS" VARCHAR2(4000 BYTE), 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE) DEFAULT '0', 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS 
 LOB ("NATIVE_SQL") STORE AS BASICFILE (
  TABLESPACE USERS ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  CACHE READS LOGGING ) ;

   COMMENT ON COLUMN "DB_JT"."MD_SEQUENCES"."ID" IS 'Primary Key';
   COMMENT ON COLUMN "DB_JT"."MD_SEQUENCES"."SCHEMA_ID_FK" IS 'The schema to which this object belongs. //PARENTFIELD';
   COMMENT ON COLUMN "DB_JT"."MD_SEQUENCES"."NAME" IS 'Name of this sequence //OBJECTNAME';
   COMMENT ON COLUMN "DB_JT"."MD_SEQUENCES"."SEQ_START" IS 'Starting point of the sequence';
   COMMENT ON COLUMN "DB_JT"."MD_SEQUENCES"."INCR" IS 'Increment value of the sequence';
   COMMENT ON COLUMN "DB_JT"."MD_SEQUENCES"."NATIVE_SQL" IS 'SQL used to create this object at source';
   COMMENT ON COLUMN "DB_JT"."MD_SEQUENCES"."NATIVE_KEY" IS 'Identifier for this object at source.';
   COMMENT ON TABLE "DB_JT"."MD_SEQUENCES"  IS 'For storing information on sequences.';


PROMPT Completed MD_SEQUENCES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_STORED_PROGRAMS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_STORED_PROGRAMS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_STORED_PROGRAMS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_STORED_PROGRAMS" 
   (	"ID" NUMBER, 
	"SCHEMA_ID_FK" NUMBER, 
	"PROGRAMTYPE" VARCHAR2(20 BYTE), 
	"NAME" VARCHAR2(4000 BYTE), 
	"PACKAGE_ID_FK" NUMBER, 
	"NATIVE_SQL" CLOB, 
	"NATIVE_KEY" VARCHAR2(4000 BYTE), 
	"LANGUAGE" VARCHAR2(40 BYTE), 
	"COMMENTS" VARCHAR2(4000 BYTE), 
	"LINECOUNT" NUMBER, 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS 
 LOB ("NATIVE_SQL") STORE AS BASICFILE (
  TABLESPACE USERS ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  CACHE READS LOGGING ) ;

   COMMENT ON COLUMN "DB_JT"."MD_STORED_PROGRAMS"."ID" IS 'Primary Key';
   COMMENT ON COLUMN "DB_JT"."MD_STORED_PROGRAMS"."SCHEMA_ID_FK" IS 'Schema to which this object belongs.  Note that the PACKAGE_ID_FK (if present also leads us to the relevant schema), however a stored program may or may not belong in a package.  If it is in a package, then the SCHEMA_ID_FK and the SCHEME_ID_FK in the parent package should match //PARENTFIELD';
   COMMENT ON COLUMN "DB_JT"."MD_STORED_PROGRAMS"."PROGRAMTYPE" IS 'Java/TSQL/PLSQL, etc.';
   COMMENT ON COLUMN "DB_JT"."MD_STORED_PROGRAMS"."NAME" IS 'Name of the stored program //OBJECTNAME';
   COMMENT ON COLUMN "DB_JT"."MD_STORED_PROGRAMS"."PACKAGE_ID_FK" IS 'The package to which this object belongs';
   COMMENT ON COLUMN "DB_JT"."MD_STORED_PROGRAMS"."NATIVE_SQL" IS 'The SQL used to create this object at source';
   COMMENT ON COLUMN "DB_JT"."MD_STORED_PROGRAMS"."NATIVE_KEY" IS 'A unique indetifier for this object at source';
   COMMENT ON COLUMN "DB_JT"."MD_STORED_PROGRAMS"."LANGUAGE" IS '//PUBLIC';
   COMMENT ON TABLE "DB_JT"."MD_STORED_PROGRAMS"  IS 'Container for stored programs.';


PROMPT Completed MD_STORED_PROGRAMS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_SYNONYMS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_SYNONYMS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_SYNONYMS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_SYNONYMS" 
   (	"ID" NUMBER, 
	"SCHEMA_ID_FK" NUMBER, 
	"NAME" VARCHAR2(4000 BYTE), 
	"SYNONYM_FOR_ID" NUMBER, 
	"FOR_OBJECT_TYPE" VARCHAR2(4000 BYTE), 
	"PRIVATE_VISIBILITY" CHAR(1 BYTE), 
	"NATIVE_SQL" CLOB, 
	"NATIVE_KEY" VARCHAR2(4000 BYTE), 
	"COMMENTS" VARCHAR2(4000 BYTE), 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS 
 LOB ("NATIVE_SQL") STORE AS BASICFILE (
  TABLESPACE USERS ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  CACHE READS LOGGING ) ;

   COMMENT ON COLUMN "DB_JT"."MD_SYNONYMS"."ID" IS 'Primary Key';
   COMMENT ON COLUMN "DB_JT"."MD_SYNONYMS"."SCHEMA_ID_FK" IS 'The schema to which this object belongs //PARENTFIELD';
   COMMENT ON COLUMN "DB_JT"."MD_SYNONYMS"."NAME" IS 'Synonym name //OBJECTNAME';
   COMMENT ON COLUMN "DB_JT"."MD_SYNONYMS"."SYNONYM_FOR_ID" IS 'What object this is a synonym for';
   COMMENT ON COLUMN "DB_JT"."MD_SYNONYMS"."FOR_OBJECT_TYPE" IS 'The type this is a synonym for (e.g. INDEX)';
   COMMENT ON COLUMN "DB_JT"."MD_SYNONYMS"."PRIVATE_VISIBILITY" IS 'Visibility - Private or Public.  If Private_visibility = ''Y'' means this is a private synonym.  Anything else means it is a public synonym';
   COMMENT ON COLUMN "DB_JT"."MD_SYNONYMS"."NATIVE_SQL" IS 'The SQL used to create this object at source';
   COMMENT ON COLUMN "DB_JT"."MD_SYNONYMS"."NATIVE_KEY" IS 'An identifier for this object at source.';
   COMMENT ON TABLE "DB_JT"."MD_SYNONYMS"  IS 'For storing synonym information.';


PROMPT Completed MD_SYNONYMS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_TABLES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_TABLES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_TABLES
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_TABLES" 
   (	"ID" NUMBER, 
	"SCHEMA_ID_FK" NUMBER, 
	"TABLE_NAME" VARCHAR2(4000 BYTE), 
	"NATIVE_SQL" CLOB, 
	"NATIVE_KEY" VARCHAR2(4000 BYTE), 
	"QUALIFIED_NATIVE_NAME" VARCHAR2(4000 BYTE), 
	"COMMENTS" VARCHAR2(4000 BYTE), 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS 
 LOB ("NATIVE_SQL") STORE AS BASICFILE (
  TABLESPACE USERS ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  CACHE READS LOGGING ) ;

   COMMENT ON COLUMN "DB_JT"."MD_TABLES"."ID" IS 'Primary Key';
   COMMENT ON COLUMN "DB_JT"."MD_TABLES"."SCHEMA_ID_FK" IS 'Schema in which this table resides //PARENTFIELD';
   COMMENT ON COLUMN "DB_JT"."MD_TABLES"."TABLE_NAME" IS 'Name of the table //OBJECTNAME';
   COMMENT ON COLUMN "DB_JT"."MD_TABLES"."NATIVE_SQL" IS 'SQL Used to create this table at soruce';
   COMMENT ON COLUMN "DB_JT"."MD_TABLES"."NATIVE_KEY" IS 'Unique identifier for this table at source';
   COMMENT ON TABLE "DB_JT"."MD_TABLES"  IS 'Table used to store information about tables.';


PROMPT Completed MD_TABLES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_TABLESPACES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_TABLESPACES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_TABLESPACES
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_TABLESPACES" 
   (	"ID" NUMBER, 
	"SCHEMA_ID_FK" NUMBER, 
	"TABLESPACE_NAME" VARCHAR2(4000 BYTE), 
	"NATIVE_SQL" CLOB, 
	"NATIVE_KEY" VARCHAR2(4000 BYTE), 
	"COMMENTS" VARCHAR2(4000 BYTE), 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS 
 LOB ("NATIVE_SQL") STORE AS BASICFILE (
  TABLESPACE USERS ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  CACHE ) ;

   COMMENT ON COLUMN "DB_JT"."MD_TABLESPACES"."ID" IS 'Primary Key';
   COMMENT ON COLUMN "DB_JT"."MD_TABLESPACES"."SCHEMA_ID_FK" IS 'Schema to which this tablespace belongs //PARENTFIELD';
   COMMENT ON COLUMN "DB_JT"."MD_TABLESPACES"."TABLESPACE_NAME" IS 'Name of the table space //OBJECTNAME';
   COMMENT ON COLUMN "DB_JT"."MD_TABLESPACES"."NATIVE_SQL" IS 'The SQL used to create this tablespace';
   COMMENT ON COLUMN "DB_JT"."MD_TABLESPACES"."NATIVE_KEY" IS 'A unique identifier for this object at source';
   COMMENT ON TABLE "DB_JT"."MD_TABLESPACES"  IS 'For storing information about tablespaces.';


PROMPT Completed MD_TABLESPACES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_TARGET_ALL_ERRORS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_TARGET_ALL_ERRORS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_TARGET_ALL_ERRORS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_TARGET_ALL_ERRORS" 
   (	"OWNER" VARCHAR2(128 BYTE), 
	"NAME" VARCHAR2(128 BYTE), 
	"TYPE" VARCHAR2(12 BYTE), 
	"SEQUENCE" NUMBER, 
	"LINE" NUMBER, 
	"POSITION" NUMBER, 
	"TEXT" VARCHAR2(4000 BYTE), 
	"ATTRIBUTE" VARCHAR2(9 BYTE), 
	"MESSAGE_NUMBER" NUMBER
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;


PROMPT Completed MD_TARGET_ALL_ERRORS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_TARGET_ALL_OBJECTS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_TARGET_ALL_OBJECTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_TARGET_ALL_OBJECTS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_TARGET_ALL_OBJECTS" 
   (	"STATUS" VARCHAR2(7 BYTE), 
	"OBJECT_NAME" VARCHAR2(128 BYTE), 
	"OWNER" VARCHAR2(128 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;


PROMPT Completed MD_TARGET_ALL_OBJECTS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_TRIGGERS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_TRIGGERS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_TRIGGERS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_TRIGGERS" 
   (	"ID" NUMBER, 
	"TABLE_OR_VIEW_ID_FK" NUMBER, 
	"TRIGGER_ON_FLAG" CHAR(1 BYTE), 
	"TRIGGER_NAME" VARCHAR2(4000 BYTE), 
	"TRIGGER_TIMING" VARCHAR2(4000 BYTE), 
	"TRIGGER_OPERATION" VARCHAR2(4000 BYTE), 
	"TRIGGER_EVENT" VARCHAR2(4000 BYTE), 
	"NATIVE_SQL" CLOB, 
	"NATIVE_KEY" VARCHAR2(4000 BYTE), 
	"LANGUAGE" VARCHAR2(40 BYTE), 
	"COMMENTS" VARCHAR2(4000 BYTE), 
	"LINECOUNT" NUMBER, 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS 
 LOB ("NATIVE_SQL") STORE AS BASICFILE (
  TABLESPACE USERS ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  CACHE READS LOGGING ) ;

   COMMENT ON COLUMN "DB_JT"."MD_TRIGGERS"."ID" IS 'Primary Key';
   COMMENT ON COLUMN "DB_JT"."MD_TRIGGERS"."TABLE_OR_VIEW_ID_FK" IS 'Table on which this trigger fires';
   COMMENT ON COLUMN "DB_JT"."MD_TRIGGERS"."TRIGGER_ON_FLAG" IS 'Flag to show iif the trigger is on a table or a view.  If it is a table this should be ''T''. If it is on a view this should be ''V''';
   COMMENT ON COLUMN "DB_JT"."MD_TRIGGERS"."TRIGGER_NAME" IS 'Name of the trigger //OBJECTNAME';
   COMMENT ON COLUMN "DB_JT"."MD_TRIGGERS"."TRIGGER_TIMING" IS 'before, after ,etc.';
   COMMENT ON COLUMN "DB_JT"."MD_TRIGGERS"."TRIGGER_OPERATION" IS 'insert, delete, etc.';
   COMMENT ON COLUMN "DB_JT"."MD_TRIGGERS"."TRIGGER_EVENT" IS 'The actual trigger that gets fired ';
   COMMENT ON COLUMN "DB_JT"."MD_TRIGGERS"."NATIVE_SQL" IS 'The full definition ';
   COMMENT ON COLUMN "DB_JT"."MD_TRIGGERS"."NATIVE_KEY" IS 'UInique identifer for this object at source';
   COMMENT ON COLUMN "DB_JT"."MD_TRIGGERS"."LANGUAGE" IS '//PUBLIC';
   COMMENT ON TABLE "DB_JT"."MD_TRIGGERS"  IS 'For storing information about triggers.';


PROMPT Completed MD_TRIGGERS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_USERS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_USERS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_USERS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_USERS" 
   (	"ID" NUMBER, 
	"SCHEMA_ID_FK" NUMBER, 
	"USERNAME" VARCHAR2(4000 BYTE), 
	"PASSWORD" VARCHAR2(4000 BYTE), 
	"NATIVE_SQL" CLOB, 
	"NATIVE_KEY" VARCHAR2(4000 BYTE), 
	"COMMENTS" VARCHAR2(4000 BYTE), 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS 
 LOB ("NATIVE_SQL") STORE AS BASICFILE (
  TABLESPACE USERS ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  CACHE ) ;

   COMMENT ON COLUMN "DB_JT"."MD_USERS"."ID" IS 'Primary Key';
   COMMENT ON COLUMN "DB_JT"."MD_USERS"."SCHEMA_ID_FK" IS 'Shema in which this object belongs //PARENTFIELD';
   COMMENT ON COLUMN "DB_JT"."MD_USERS"."USERNAME" IS 'Username for login //OBJECTNAME';
   COMMENT ON COLUMN "DB_JT"."MD_USERS"."PASSWORD" IS 'Password for login';
   COMMENT ON COLUMN "DB_JT"."MD_USERS"."NATIVE_SQL" IS 'SQL Used to create this object at source';
   COMMENT ON COLUMN "DB_JT"."MD_USERS"."NATIVE_KEY" IS 'Unique identifier for this object at source.';
   COMMENT ON TABLE "DB_JT"."MD_USERS"  IS 'User information.';


PROMPT Completed MD_USERS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_USER_DEFINED_DATA_TYPES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_USER_DEFINED_DATA_TYPES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_USER_DEFINED_DATA_TYPES
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_USER_DEFINED_DATA_TYPES" 
   (	"ID" NUMBER, 
	"SCHEMA_ID_FK" NUMBER, 
	"DATA_TYPE_NAME" VARCHAR2(4000 BYTE), 
	"DEFINITION" VARCHAR2(4000 BYTE), 
	"NATIVE_SQL" CLOB, 
	"NATIVE_KEY" VARCHAR2(4000 BYTE), 
	"COMMENTS" VARCHAR2(4000 BYTE), 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS 
 LOB ("NATIVE_SQL") STORE AS BASICFILE (
  TABLESPACE USERS ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  CACHE READS LOGGING ) ;

   COMMENT ON COLUMN "DB_JT"."MD_USER_DEFINED_DATA_TYPES"."ID" IS 'Primary Key';
   COMMENT ON COLUMN "DB_JT"."MD_USER_DEFINED_DATA_TYPES"."SCHEMA_ID_FK" IS 'Schema to which this object blongs. //PARENTFIELD';
   COMMENT ON COLUMN "DB_JT"."MD_USER_DEFINED_DATA_TYPES"."DATA_TYPE_NAME" IS 'The name of the data type //OBJECTNAME';
   COMMENT ON COLUMN "DB_JT"."MD_USER_DEFINED_DATA_TYPES"."DEFINITION" IS 'The definition of the data type';
   COMMENT ON COLUMN "DB_JT"."MD_USER_DEFINED_DATA_TYPES"."NATIVE_SQL" IS 'The native SQL used to create this object';
   COMMENT ON COLUMN "DB_JT"."MD_USER_DEFINED_DATA_TYPES"."NATIVE_KEY" IS 'An unique identifier for this object at source.';
   COMMENT ON TABLE "DB_JT"."MD_USER_DEFINED_DATA_TYPES"  IS 'For storing information on user defined data types.';


PROMPT Completed MD_USER_DEFINED_DATA_TYPES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_USER_PRIVILEGES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_USER_PRIVILEGES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_USER_PRIVILEGES
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_USER_PRIVILEGES" 
   (	"ID" NUMBER, 
	"USER_ID_FK" NUMBER, 
	"PRIVILEGE_ID_FK" NUMBER, 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UDPATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."MD_USER_PRIVILEGES"."ID" IS 'Primary Key';
   COMMENT ON COLUMN "DB_JT"."MD_USER_PRIVILEGES"."USER_ID_FK" IS 'User';
   COMMENT ON COLUMN "DB_JT"."MD_USER_PRIVILEGES"."PRIVILEGE_ID_FK" IS 'Privilege';
   COMMENT ON TABLE "DB_JT"."MD_USER_PRIVILEGES"  IS 'This table stores privileges granted to individual users';


PROMPT Completed MD_USER_PRIVILEGES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_VIEWS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MD_VIEWS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MD_VIEWS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MD_VIEWS" 
   (	"ID" NUMBER, 
	"SCHEMA_ID_FK" NUMBER, 
	"VIEW_NAME" VARCHAR2(4000 BYTE), 
	"NATIVE_SQL" CLOB, 
	"NATIVE_KEY" VARCHAR2(4000 BYTE), 
	"LANGUAGE" VARCHAR2(40 BYTE), 
	"COMMENTS" VARCHAR2(4000 BYTE), 
	"LINECOUNT" NUMBER, 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS 
 LOB ("NATIVE_SQL") STORE AS BASICFILE (
  TABLESPACE USERS ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  CACHE READS LOGGING ) ;

   COMMENT ON COLUMN "DB_JT"."MD_VIEWS"."ID" IS 'Primary Key';
   COMMENT ON COLUMN "DB_JT"."MD_VIEWS"."SCHEMA_ID_FK" IS 'The schema to which this obect blongs. //PARENTFIELD';
   COMMENT ON COLUMN "DB_JT"."MD_VIEWS"."VIEW_NAME" IS 'The name of the view //OBJECTNAME';
   COMMENT ON COLUMN "DB_JT"."MD_VIEWS"."NATIVE_SQL" IS 'The SQL used to create this object at source';
   COMMENT ON COLUMN "DB_JT"."MD_VIEWS"."NATIVE_KEY" IS 'An identifier for this object at source.';
   COMMENT ON COLUMN "DB_JT"."MD_VIEWS"."LANGUAGE" IS '//PUBLIC';
   COMMENT ON TABLE "DB_JT"."MD_VIEWS"  IS 'For storing information on views.';


PROMPT Completed MD_VIEWS.sql
PROMPT


-- ============================================================================
-- Deploy: MIGRATION_RESERVED_WORDS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MIGRATION_RESERVED_WORDS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MIGRATION_RESERVED_WORDS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MIGRATION_RESERVED_WORDS" 
   (	"KEYWORD" VARCHAR2(40 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed MIGRATION_RESERVED_WORDS.sql
PROMPT


-- ============================================================================
-- Deploy: MIGRLOG.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MIGRLOG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MIGRLOG
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MIGRLOG" 
   (	"ID" NUMBER, 
	"PARENT_LOG_ID" NUMBER, 
	"LOG_DATE" TIMESTAMP (6), 
	"SEVERITY" NUMBER(4,0), 
	"LOGTEXT" VARCHAR2(4000 BYTE), 
	"PHASE" VARCHAR2(100 BYTE), 
	"REF_OBJECT_ID" NUMBER, 
	"REF_OBJECT_TYPE" VARCHAR2(4000 BYTE), 
	"CONNECTION_ID_FK" NUMBER
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;


PROMPT Completed MIGRLOG.sql
PROMPT


-- ============================================================================
-- Deploy: MIGR_DATATYPE_TRANSFORM_MAP.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MIGR_DATATYPE_TRANSFORM_MAP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MIGR_DATATYPE_TRANSFORM_MAP
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MIGR_DATATYPE_TRANSFORM_MAP" 
   (	"ID" NUMBER, 
	"PROJECT_ID_FK" NUMBER, 
	"MAP_NAME" VARCHAR2(4000 BYTE), 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."MIGR_DATATYPE_TRANSFORM_MAP"."ID" IS 'Primary Key';
   COMMENT ON COLUMN "DB_JT"."MIGR_DATATYPE_TRANSFORM_MAP"."PROJECT_ID_FK" IS '//PARENTFIELD';
   COMMENT ON COLUMN "DB_JT"."MIGR_DATATYPE_TRANSFORM_MAP"."MAP_NAME" IS 'A name for the map';
   COMMENT ON TABLE "DB_JT"."MIGR_DATATYPE_TRANSFORM_MAP"  IS 'Table for storing data type maps.  A map is simply a collection of rules';


PROMPT Completed MIGR_DATATYPE_TRANSFORM_MAP.sql
PROMPT


-- ============================================================================
-- Deploy: MIGR_DATATYPE_TRANSFORM_RULE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MIGR_DATATYPE_TRANSFORM_RULE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MIGR_DATATYPE_TRANSFORM_RULE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MIGR_DATATYPE_TRANSFORM_RULE" 
   (	"ID" NUMBER, 
	"MAP_ID_FK" NUMBER, 
	"SOURCE_DATA_TYPE_NAME" VARCHAR2(4000 BYTE), 
	"SOURCE_PRECISION" NUMBER, 
	"SOURCE_SCALE" NUMBER, 
	"TARGET_DATA_TYPE_NAME" VARCHAR2(4000 BYTE), 
	"TARGET_PRECISION" NUMBER, 
	"TARGET_SCALE" NUMBER, 
	"SECURITY_GROUP_ID" NUMBER DEFAULT 0, 
	"CREATED_ON" DATE DEFAULT sysdate, 
	"CREATED_BY" VARCHAR2(255 BYTE), 
	"LAST_UPDATED_ON" DATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."MIGR_DATATYPE_TRANSFORM_RULE"."ID" IS 'Primary Key';
   COMMENT ON COLUMN "DB_JT"."MIGR_DATATYPE_TRANSFORM_RULE"."MAP_ID_FK" IS 'The map to which this rule belongs //PARENTFIELD';
   COMMENT ON COLUMN "DB_JT"."MIGR_DATATYPE_TRANSFORM_RULE"."SOURCE_DATA_TYPE_NAME" IS 'Source data type';
   COMMENT ON COLUMN "DB_JT"."MIGR_DATATYPE_TRANSFORM_RULE"."SOURCE_PRECISION" IS 'Precison to match';
   COMMENT ON COLUMN "DB_JT"."MIGR_DATATYPE_TRANSFORM_RULE"."SOURCE_SCALE" IS 'scale to match';
   COMMENT ON COLUMN "DB_JT"."MIGR_DATATYPE_TRANSFORM_RULE"."TARGET_DATA_TYPE_NAME" IS 'data type name to transform to';
   COMMENT ON COLUMN "DB_JT"."MIGR_DATATYPE_TRANSFORM_RULE"."TARGET_PRECISION" IS 'precision to map to ';
   COMMENT ON COLUMN "DB_JT"."MIGR_DATATYPE_TRANSFORM_RULE"."TARGET_SCALE" IS 'scale to map to';


PROMPT Completed MIGR_DATATYPE_TRANSFORM_RULE.sql
PROMPT


-- ============================================================================
-- Deploy: MIGR_GENERATION_ORDER.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MIGR_GENERATION_ORDER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MIGR_GENERATION_ORDER
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MIGR_GENERATION_ORDER" 
   (	"ID" NUMBER, 
	"CONNECTION_ID_FK" NUMBER, 
	"OBJECT_ID" NUMBER, 
	"OBJECT_TYPE" VARCHAR2(4000 BYTE), 
	"GENERATION_ORDER" NUMBER
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;

   COMMENT ON COLUMN "DB_JT"."MIGR_GENERATION_ORDER"."CONNECTION_ID_FK" IS '//PARENTFIELD';


PROMPT Completed MIGR_GENERATION_ORDER.sql
PROMPT


-- ============================================================================
-- Deploy: MRO_KP_CIS_TYPTRANSAKCE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying MRO_KP_CIS_TYPTRANSAKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table MRO_KP_CIS_TYPTRANSAKCE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."MRO_KP_CIS_TYPTRANSAKCE" 
   (	"TT_CODE" VARCHAR2(4000 BYTE), 
	"TT_DESC" VARCHAR2(4000 BYTE), 
	"TT_GROUP_CODE" VARCHAR2(4000 BYTE), 
	"STATEMENT_ITEM_CODE" VARCHAR2(1 BYTE), 
	"BUS_DATE_FROM" DATE, 
	"ID" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed MRO_KP_CIS_TYPTRANSAKCE.sql
PROMPT


-- ============================================================================
-- Deploy: PERMISSION.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying PERMISSION.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table PERMISSION
--------------------------------------------------------

  CREATE TABLE "DB_JT"."PERMISSION" 
   (	"PERMISSION_ID" NVARCHAR2(50), 
	"DESCRIPTION" NCLOB
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS 
 LOB ("DESCRIPTION") STORE AS BASICFILE (
  TABLESPACE USERS ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  NOCACHE LOGGING 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) ;


PROMPT Completed PERMISSION.sql
PROMPT


-- ============================================================================
-- Deploy: PLAN_TABLE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying PLAN_TABLE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table PLAN_TABLE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."PLAN_TABLE" 
   (	"STATEMENT_ID" VARCHAR2(30 BYTE), 
	"TIMESTAMP" DATE, 
	"REMARKS" VARCHAR2(80 BYTE), 
	"OPERATION" VARCHAR2(30 BYTE), 
	"OPTIONS" VARCHAR2(255 BYTE), 
	"OBJECT_NODE" VARCHAR2(128 BYTE), 
	"OBJECT_OWNER" VARCHAR2(30 BYTE), 
	"OBJECT_NAME" VARCHAR2(30 BYTE), 
	"OBJECT_INSTANCE" NUMBER(*,0), 
	"OBJECT_TYPE" VARCHAR2(30 BYTE), 
	"OPTIMIZER" VARCHAR2(255 BYTE), 
	"SEARCH_COLUMNS" NUMBER(*,0), 
	"ID" NUMBER(*,0), 
	"PARENT_ID" NUMBER(*,0), 
	"POSITION" NUMBER(*,0), 
	"COST" NUMBER(*,0), 
	"CARDINALITY" NUMBER(*,0), 
	"BYTES" NUMBER(*,0), 
	"OTHER_TAG" VARCHAR2(255 BYTE), 
	"PARTITION_START" VARCHAR2(255 BYTE), 
	"PARTITION_STOP" VARCHAR2(255 BYTE), 
	"PARTITION_ID" NUMBER(*,0), 
	"OTHER" LONG, 
	"DISTRIBUTION" VARCHAR2(30 BYTE), 
	"CPU_COST" NUMBER(*,0), 
	"IO_COST" NUMBER(*,0), 
	"TEMP_SPACE" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS  ENABLE ROW MOVEMENT ;


PROMPT Completed PLAN_TABLE.sql
PROMPT


-- ============================================================================
-- Deploy: QVR_KP_DOKLADDETAIL_DSLR_CTRL.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying QVR_KP_DOKLADDETAIL_DSLR_CTRL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table QVR_KP_DOKLADDETAIL_DSLR_CTRL
--------------------------------------------------------

  CREATE TABLE "DB_JT"."QVR_KP_DOKLADDETAIL_DSLR_CTRL" 
   (	"LIST" NUMBER(*,0), 
	"ICO_SPOL" VARCHAR2(20 BYTE), 
	"ID_ODBOR" NUMBER(*,0), 
	"ID_PROJEKT" NUMBER(*,0), 
	"UCET_ORIGINAL" VARCHAR2(10 BYTE), 
	"UZAVREN" VARCHAR2(3 BYTE), 
	"ID_HOLDING_PROTISTRANA" NUMBER(*,0), 
	"ID" NUMBER(*,0), 
	"S_NAZEV" VARCHAR2(128 BYTE), 
	"NL_RADEK" NUMBER(*,0), 
	"TEXTRADEK" VARCHAR2(4000 BYTE), 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"S_MENAUCSPOL" VARCHAR2(3 BYTE), 
	"ND_CASTKACZK" NUMBER, 
	"ID_PROTISTRANA" NUMBER(*,0), 
	"PROTISTRANA" VARCHAR2(256 BYTE), 
	"DT_DATUM" DATE, 
	"ID_UCETNISPOLECNOST" NUMBER(*,0), 
	"DATUM" DATE, 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"ID_CISSUBJECT" NUMBER(*,0), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_FAKTURA" VARCHAR2(30 BYTE), 
	"TYPTRANSAKCE" VARCHAR2(4000 BYTE), 
	"XIDSL" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed QVR_KP_DOKLADDETAIL_DSLR_CTRL.sql
PROMPT


-- ============================================================================
-- Deploy: QV_CONTROLLING_DATA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying QV_CONTROLLING_DATA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table QV_CONTROLLING_DATA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."QV_CONTROLLING_DATA" 
   (	"PERIOD" DATE, 
	"ARCHIVE" NUMBER(1,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed QV_CONTROLLING_DATA.sql
PROMPT


-- ============================================================================
-- Deploy: ROLE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying ROLE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table ROLE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."ROLE" 
   (	"ROLE_ID" NUMBER, 
	"ROLE_NAME" NVARCHAR2(50), 
	"DESCRIPTION" NCLOB
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS 
 LOB ("DESCRIPTION") STORE AS BASICFILE (
  TABLESPACE USERS ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  NOCACHE LOGGING 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) ;


PROMPT Completed ROLE.sql
PROMPT


-- ============================================================================
-- Deploy: ROLE_PERMISSION.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying ROLE_PERMISSION.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table ROLE_PERMISSION
--------------------------------------------------------

  CREATE TABLE "DB_JT"."ROLE_PERMISSION" 
   (	"ROLE_ID" NUMBER, 
	"PERMISSION_ID" NVARCHAR2(50)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed ROLE_PERMISSION.sql
PROMPT


-- ============================================================================
-- Deploy: SPOLECNOSTI_CARTESIS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SPOLECNOSTI_CARTESIS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SPOLECNOSTI_CARTESIS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."SPOLECNOSTI_CARTESIS" 
   (	"ID" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed SPOLECNOSTI_CARTESIS.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_CHECK_CONSTRAINTS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SS2K5_CHECK_CONSTRAINTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SS2K5_CHECK_CONSTRAINTS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."SS2K5_CHECK_CONSTRAINTS" 
   (	"DB_ID" NUMBER(10,0), 
	"OBJECT_ID" NUMBER(10,0), 
	"PARENT_COLUMN_ID" NUMBER(10,0), 
	"DEFINITION" CLOB
   ) ON COMMIT PRESERVE ROWS 
 LOB ("DEFINITION") STORE AS BASICFILE (
  ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  NOCACHE ) ;


PROMPT Completed SS2K5_CHECK_CONSTRAINTS.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_COLUMNS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SS2K5_COLUMNS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SS2K5_COLUMNS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."SS2K5_COLUMNS" 
   (	"DB_ID" NUMBER(10,0), 
	"NAME" VARCHAR2(256 BYTE), 
	"RULE_OBJECT_ID" NUMBER(10,0), 
	"COLUMN_ID" NUMBER(10,0), 
	"MAX_LENGTH" NUMBER(5,0), 
	"PRECISION" NUMBER(5,0), 
	"SCALE" NUMBER(5,0), 
	"IS_NULLABLE" NUMBER(5,0), 
	"USER_TYPE_ID" NUMBER(10,0), 
	"SYSTEM_TYPE_ID" NUMBER(5,0), 
	"DEFAULT_OBJECT_ID" NUMBER(10,0), 
	"OBJECT_ID" NUMBER(10,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed SS2K5_COLUMNS.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_DATABASES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SS2K5_DATABASES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SS2K5_DATABASES
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."SS2K5_DATABASES" 
   (	"DB_ID" NUMBER(10,0), 
	"NAME" VARCHAR2(256 BYTE), 
	"DATABASE_ID" NUMBER(10,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed SS2K5_DATABASES.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_DATABASE_PRINCIPALS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SS2K5_DATABASE_PRINCIPALS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SS2K5_DATABASE_PRINCIPALS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."SS2K5_DATABASE_PRINCIPALS" 
   (	"DB_ID" NUMBER(10,0), 
	"DEFAULT_SCHEMA_NAME" VARCHAR2(256 BYTE), 
	"TYPE" CHAR(1 BYTE), 
	"PRINCIPAL_ID" NUMBER(10,0), 
	"OWNING_PRINCIPAL_ID" NUMBER(10,0), 
	"NAME" VARCHAR2(256 BYTE), 
	"SID" RAW(85)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed SS2K5_DATABASE_PRINCIPALS.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_DATABASE_ROLE_MEMBERS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SS2K5_DATABASE_ROLE_MEMBERS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SS2K5_DATABASE_ROLE_MEMBERS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."SS2K5_DATABASE_ROLE_MEMBERS" 
   (	"DB_ID" NUMBER(10,0), 
	"MEMBER_PRINCIPAL_ID" NUMBER(10,0), 
	"ROLE_PRINCIPAL_ID" NUMBER(10,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed SS2K5_DATABASE_ROLE_MEMBERS.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_DEFAULT_CONSTRAINTS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SS2K5_DEFAULT_CONSTRAINTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SS2K5_DEFAULT_CONSTRAINTS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."SS2K5_DEFAULT_CONSTRAINTS" 
   (	"DB_ID" NUMBER(10,0), 
	"DEFINITION" CLOB, 
	"OBJECT_ID" NUMBER(10,0)
   ) ON COMMIT PRESERVE ROWS 
 LOB ("DEFINITION") STORE AS BASICFILE (
  ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  NOCACHE ) ;


PROMPT Completed SS2K5_DEFAULT_CONSTRAINTS.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_FOREIGN_KEYS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SS2K5_FOREIGN_KEYS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SS2K5_FOREIGN_KEYS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."SS2K5_FOREIGN_KEYS" 
   (	"DB_ID" NUMBER(10,0), 
	"NAME" VARCHAR2(256 BYTE), 
	"OBJECT_ID" NUMBER(10,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed SS2K5_FOREIGN_KEYS.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_FOREIGN_KEY_COLUMNS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SS2K5_FOREIGN_KEY_COLUMNS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SS2K5_FOREIGN_KEY_COLUMNS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."SS2K5_FOREIGN_KEY_COLUMNS" 
   (	"DB_ID" NUMBER(10,0), 
	"CONSTRAINT_COLUMN_ID" NUMBER(10,0), 
	"CONSTRAINT_OBJECT_ID" NUMBER(10,0), 
	"PARENT_OBJECT_ID" NUMBER(10,0), 
	"PARENT_COLUMN_ID" NUMBER(10,0), 
	"REFERENCED_COLUMN_ID" NUMBER(10,0), 
	"REFERENCED_OBJECT_ID" NUMBER(10,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed SS2K5_FOREIGN_KEY_COLUMNS.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_IDENTITY_COLUMNS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SS2K5_IDENTITY_COLUMNS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SS2K5_IDENTITY_COLUMNS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."SS2K5_IDENTITY_COLUMNS" 
   (	"DB_ID" NUMBER(20,0), 
	"SEED_VALUE" NUMBER(20,0), 
	"INCREMENT_VALUE" NUMBER(20,0), 
	"LAST_VALUE" NUMBER(20,0), 
	"OBJECT_ID" NUMBER(20,0), 
	"COLUMN_ID" NUMBER(20,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed SS2K5_IDENTITY_COLUMNS.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_INDEXES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SS2K5_INDEXES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SS2K5_INDEXES
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."SS2K5_INDEXES" 
   (	"DB_ID" NUMBER(10,0), 
	"OBJECT_ID" NUMBER(10,0), 
	"INDEX_ID" NUMBER(10,0), 
	"NAME" VARCHAR2(256 BYTE), 
	"IS_UNIQUE" NUMBER(1,0), 
	"IS_PRIMARY_KEY" NUMBER(1,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed SS2K5_INDEXES.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_INDEX_COLUMNS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SS2K5_INDEX_COLUMNS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SS2K5_INDEX_COLUMNS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."SS2K5_INDEX_COLUMNS" 
   (	"DB_ID" NUMBER(10,0), 
	"INDEX_COLUMN_ID" NUMBER(10,0), 
	"OBJECT_ID" NUMBER(10,0), 
	"INDEX_ID" NUMBER(10,0), 
	"COLUMN_ID" NUMBER(10,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed SS2K5_INDEX_COLUMNS.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_OBJECTS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SS2K5_OBJECTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SS2K5_OBJECTS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."SS2K5_OBJECTS" 
   (	"DB_ID" NUMBER(10,0), 
	"SCHEMA_ID" NUMBER(10,0), 
	"OBJECT_ID" NUMBER(10,0), 
	"NAME" VARCHAR2(256 BYTE), 
	"TYPE" CHAR(2 BYTE), 
	"PARENT_OBJECT_ID" NUMBER(10,0), 
	"IS_MS_SHIPPED" NUMBER(1,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed SS2K5_OBJECTS.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_SCHEMAS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SS2K5_SCHEMAS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SS2K5_SCHEMAS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."SS2K5_SCHEMAS" 
   (	"DB_ID" NUMBER(10,0), 
	"SCHEMA_ID" NUMBER(10,0), 
	"NAME" VARCHAR2(256 BYTE)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed SS2K5_SCHEMAS.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_SCHEMATA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SS2K5_SCHEMATA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SS2K5_SCHEMATA
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."SS2K5_SCHEMATA" 
   (	"DB_ID" NUMBER(10,0), 
	"SCHEMA_OWNER" VARCHAR2(256 BYTE), 
	"SCHEMA_NAME" VARCHAR2(256 BYTE)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed SS2K5_SCHEMATA.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_SERVER_PRINCIPALS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SS2K5_SERVER_PRINCIPALS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SS2K5_SERVER_PRINCIPALS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."SS2K5_SERVER_PRINCIPALS" 
   (	"DB_ID" NUMBER(10,0), 
	"NAME" VARCHAR2(256 BYTE), 
	"SID" RAW(85), 
	"TYPE" CHAR(2 BYTE)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed SS2K5_SERVER_PRINCIPALS.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_SQL_MODULES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SS2K5_SQL_MODULES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SS2K5_SQL_MODULES
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."SS2K5_SQL_MODULES" 
   (	"DB_ID" NUMBER(10,0), 
	"DEFINITION" CLOB, 
	"OBJECT_ID" NUMBER(10,0)
   ) ON COMMIT PRESERVE ROWS 
 LOB ("DEFINITION") STORE AS BASICFILE (
  ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  NOCACHE ) ;


PROMPT Completed SS2K5_SQL_MODULES.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_SYSPROPERTIES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SS2K5_SYSPROPERTIES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SS2K5_SYSPROPERTIES
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."SS2K5_SYSPROPERTIES" 
   (	"DB_ID" NUMBER(5,0), 
	"MAJOR_ID" NUMBER(5,0), 
	"MINOR_ID" NUMBER(5,0), 
	"NAME" VARCHAR2(500 BYTE), 
	"VALUE" VARCHAR2(1000 BYTE)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed SS2K5_SYSPROPERTIES.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_TABLES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SS2K5_TABLES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SS2K5_TABLES
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."SS2K5_TABLES" 
   (	"DB_ID" NUMBER(10,0), 
	"NAME" VARCHAR2(256 BYTE), 
	"OBJECT_ID" NUMBER(10,0), 
	"SCHEMA_ID" NUMBER(10,0), 
	"TYPE" CHAR(2 BYTE)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed SS2K5_TABLES.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_TABLE_PRIVILEGES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SS2K5_TABLE_PRIVILEGES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SS2K5_TABLE_PRIVILEGES
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."SS2K5_TABLE_PRIVILEGES" 
   (	"DB_ID" NUMBER(10,0), 
	"GRANTOR" VARCHAR2(256 BYTE), 
	"TABLE_SCHEMA" VARCHAR2(256 BYTE), 
	"TABLE_NAME" VARCHAR2(256 BYTE), 
	"PRIVILEGE_TYPE" VARCHAR2(256 BYTE), 
	"IS_GRANTABLE" VARCHAR2(256 BYTE), 
	"GRANTEE" VARCHAR2(256 BYTE)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed SS2K5_TABLE_PRIVILEGES.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_TYPES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SS2K5_TYPES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SS2K5_TYPES
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."SS2K5_TYPES" 
   (	"DB_ID" NUMBER(10,0), 
	"NAME" VARCHAR2(256 BYTE), 
	"USER_TYPE_ID" NUMBER(10,0), 
	"SYSTEM_TYPE_ID" NUMBER(3,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed SS2K5_TYPES.sql
PROMPT


-- ============================================================================
-- Deploy: SSRS_UA_RKC.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SSRS_UA_RKC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SSRS_UA_RKC
--------------------------------------------------------

  CREATE TABLE "DB_JT"."SSRS_UA_RKC" 
   (	"PK_ID" NUMBER DEFAULT "DB_JT"."SQ_SSRS_UA_RKC"."NEXTVAL", 
	"DT_BUSINESS_DATE" DATE, 
	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"NAZEV_SPOLECNOST" VARCHAR2(4000 BYTE), 
	"S_UCETUNIF" VARCHAR2(15 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_CASTKACNB" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(60 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"ND_CISTAANGAZOVANOST" NUMBER, 
	"C_BANKA" VARCHAR2(4000 BYTE), 
	"S_UCET" VARCHAR2(15 BYTE), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"GROUP_CODE_ZDROJ" VARCHAR2(5 BYTE), 
	"S_TYP_OBEZRETNOST_PORTFOLIA" VARCHAR2(3 BYTE), 
	"S_COUNTRY" VARCHAR2(3 BYTE), 
	"S_ESA" VARCHAR2(25 CHAR), 
	"S_NACE" VARCHAR2(25 CHAR), 
	"S_LEI" VARCHAR2(250 CHAR), 
	"C_KONSO_DEFAULT_FLAG" CHAR(1 BYTE), 
	"S_SHADOW_BANK" VARCHAR2(1 BYTE), 
	"S_TYPE_OF_EXPOSURE" VARCHAR2(10 BYTE), 
	"S_COLL_REG_CODE" VARCHAR2(50 BYTE), 
	"C_INDIV_DEFAULT_FLAG" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed SSRS_UA_RKC.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_MIGRLOG.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_MIGRLOG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_MIGRLOG
--------------------------------------------------------

  CREATE TABLE "DB_JT"."STAGE_MIGRLOG" 
   (	"SVRID_FK" NUMBER, 
	"DBID_GEN_FK" NUMBER, 
	"ID" NUMBER, 
	"REF_OBJECT_ID" NUMBER, 
	"REF_OBJECT_TYPE" VARCHAR2(4000 BYTE), 
	"LOG_DATE" TIMESTAMP (6), 
	"SEVERITY" NUMBER(4,0), 
	"LOGTEXT" VARCHAR2(4000 BYTE), 
	"PHASE" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS ;


PROMPT Completed STAGE_MIGRLOG.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SERVERDETAIL.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SERVERDETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SERVERDETAIL
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SERVERDETAIL" 
   (	"SVRID" NUMBER, 
	"DBURL" VARCHAR2(4000 BYTE), 
	"DB_NAME" VARCHAR2(4000 BYTE), 
	"USERNAME" VARCHAR2(255 BYTE), 
	"PROJECT_ID" NUMBER, 
	"PROJECT_NAME" VARCHAR2(255 BYTE), 
	"COMMENTS" VARCHAR2(4000 BYTE)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_SERVERDETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_CHECK_CONSTRAINTS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_CHECK_CONSTRAINTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SS2K5_CHECK_CONSTRAINTS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SS2K5_CHECK_CONSTRAINTS" 
   (	"SVRID_FK" NUMBER(38,0), 
	"DBID_GEN_FK" NUMBER(38,0), 
	"OBJECT_ID_GEN" NUMBER(38,0), 
	"OBJECT_ID" NUMBER(38,0), 
	"PARENT_COLUMN_ID" NUMBER(38,0), 
	"DEFINITION" CLOB
   ) ON COMMIT PRESERVE ROWS 
 LOB ("DEFINITION") STORE AS BASICFILE (
  ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  NOCACHE ) ;


PROMPT Completed STAGE_SS2K5_CHECK_CONSTRAINTS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_COLUMNS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_COLUMNS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SS2K5_COLUMNS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SS2K5_COLUMNS" 
   (	"SVRID_FK" NUMBER(38,0), 
	"DBID_GEN_FK" NUMBER(38,0), 
	"ID_GEN_FK" NUMBER(38,0), 
	"COLID_GEN" NUMBER(38,0), 
	"NAME" VARCHAR2(256 CHAR), 
	"RULE_OBJECT_ID" NUMBER(38,0), 
	"COLUMN_ID" NUMBER(38,0), 
	"MAX_LENGTH" NUMBER(5,0), 
	"PRECISION" NUMBER(5,0), 
	"SCALE" NUMBER(5,0), 
	"IS_NULLABLE" NUMBER(5,0), 
	"USER_TYPE_ID" NUMBER(38,0), 
	"SYSTEM_TYPE_ID" NUMBER(5,0), 
	"DEFAULT_OBJECT_ID" NUMBER(38,0), 
	"OBJECT_ID" NUMBER(38,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_SS2K5_COLUMNS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_DATABASES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_DATABASES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SS2K5_DATABASES
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SS2K5_DATABASES" 
   (	"SVRID_FK" NUMBER(38,0), 
	"DBID_GEN" NUMBER(38,0), 
	"NAME" VARCHAR2(256 CHAR), 
	"DATABASE_ID" NUMBER(38,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_SS2K5_DATABASES.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_DB_PRINCIPALS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_DB_PRINCIPALS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SS2K5_DB_PRINCIPALS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SS2K5_DB_PRINCIPALS" 
   (	"SVRID_FK" NUMBER(38,0), 
	"DBID_GEN_FK" NUMBER(38,0), 
	"PRINID_GEN" NUMBER(38,0), 
	"DEFAULT_SCHEMA_NAME" VARCHAR2(256 CHAR), 
	"TYPE" CHAR(1 CHAR), 
	"PRINCIPAL_ID" NUMBER(38,0), 
	"OWNING_PRINCIPAL_ID" NUMBER(38,0), 
	"NAME" VARCHAR2(256 CHAR), 
	"SID" RAW(85)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_SS2K5_DB_PRINCIPALS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_DB_ROLE_MEMBERS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_DB_ROLE_MEMBERS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SS2K5_DB_ROLE_MEMBERS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SS2K5_DB_ROLE_MEMBERS" 
   (	"SVRID_FK" NUMBER(38,0), 
	"DBID_GEN_FK" NUMBER(38,0), 
	"MEMBER_PRINCIPAL_ID" NUMBER(38,0), 
	"ROLE_PRINCIPAL_ID" NUMBER(38,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_SS2K5_DB_ROLE_MEMBERS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_DT_CONSTRAINTS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_DT_CONSTRAINTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SS2K5_DT_CONSTRAINTS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SS2K5_DT_CONSTRAINTS" 
   (	"SVRID_FK" NUMBER(38,0), 
	"DBID_GEN_FK" NUMBER(38,0), 
	"OBJID_GEN" NUMBER(38,0), 
	"DEFINITION" CLOB, 
	"OBJECT_ID" NUMBER(38,0)
   ) ON COMMIT PRESERVE ROWS 
 LOB ("DEFINITION") STORE AS BASICFILE (
  ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  NOCACHE ) ;


PROMPT Completed STAGE_SS2K5_DT_CONSTRAINTS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_FN_KEYS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_FN_KEYS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SS2K5_FN_KEYS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SS2K5_FN_KEYS" 
   (	"SVRID_FK" NUMBER(38,0), 
	"DBID_GEN_FK" NUMBER(38,0), 
	"OBJECT_ID_GEN" NUMBER(38,0), 
	"NAME" VARCHAR2(256 CHAR), 
	"OBJECT_ID" NUMBER(38,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_SS2K5_FN_KEYS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_FN_KEY_COLUMNS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_FN_KEY_COLUMNS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SS2K5_FN_KEY_COLUMNS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SS2K5_FN_KEY_COLUMNS" 
   (	"SVRID_FK" NUMBER(38,0), 
	"DBID_GEN_FK" NUMBER(38,0), 
	"CONSTRAINT_COLUMN_ID" NUMBER(38,0), 
	"CONSTRAINT_OBJECT_ID" NUMBER(38,0), 
	"PARENT_OBJECT_ID" NUMBER(38,0), 
	"PARENT_COLUMN_ID" NUMBER(38,0), 
	"REFERENCED_COLUMN_ID" NUMBER(38,0), 
	"REFERENCED_OBJECT_ID" NUMBER(38,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_SS2K5_FN_KEY_COLUMNS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_IDENTITY_COLUMNS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_IDENTITY_COLUMNS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SS2K5_IDENTITY_COLUMNS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SS2K5_IDENTITY_COLUMNS" 
   (	"SVRID_FK" NUMBER(38,0), 
	"DBID_GEN_FK" NUMBER(38,0), 
	"OBJECT_ID_GEN" NUMBER(38,0), 
	"SEED_VALUE" NUMBER(38,0), 
	"INCREMENT_VALUE" NUMBER(38,0), 
	"LAST_VALUE" NUMBER(38,0), 
	"OBJECT_ID" NUMBER(38,0), 
	"COLUMN_ID" NUMBER(38,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_SS2K5_IDENTITY_COLUMNS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_INDEXES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_INDEXES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SS2K5_INDEXES
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SS2K5_INDEXES" 
   (	"SVRID_FK" NUMBER(38,0), 
	"DBID_GEN_FK" NUMBER(38,0), 
	"OBJECT_ID_GEN" NUMBER(38,0), 
	"OBJECT_ID" NUMBER(38,0), 
	"INDEX_ID" NUMBER(38,0), 
	"NAME" VARCHAR2(256 CHAR), 
	"IS_UNIQUE" NUMBER(1,0), 
	"IS_PRIMARY_KEY" NUMBER(1,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_SS2K5_INDEXES.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_INDEX_COLUMNS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_INDEX_COLUMNS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SS2K5_INDEX_COLUMNS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SS2K5_INDEX_COLUMNS" 
   (	"SVRID_FK" NUMBER(38,0), 
	"DBID_GEN_FK" NUMBER(38,0), 
	"OBJECT_ID_GEN" NUMBER(38,0), 
	"INDEX_COLUMN_ID" NUMBER(38,0), 
	"OBJECT_ID" NUMBER(38,0), 
	"INDEX_ID" NUMBER(38,0), 
	"COLUMN_ID" NUMBER(38,0), 
	"IS_DESCENDING_KEY" NUMBER(38,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_SS2K5_INDEX_COLUMNS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_OBJECTS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_OBJECTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SS2K5_OBJECTS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SS2K5_OBJECTS" 
   (	"SVRID_FK" NUMBER(38,0), 
	"DBID_GEN_FK" NUMBER(38,0), 
	"OBJID_GEN" NUMBER(38,0), 
	"SCHEMA_ID" NUMBER(38,0), 
	"OBJECT_ID" NUMBER(38,0), 
	"NAME" VARCHAR2(256 CHAR), 
	"TYPE" CHAR(2 CHAR), 
	"PARENT_OBJECT_ID" NUMBER(38,0), 
	"IS_MS_SHIPPED" NUMBER(1,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_SS2K5_OBJECTS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_SCHEMAS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_SCHEMAS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SS2K5_SCHEMAS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SS2K5_SCHEMAS" 
   (	"SVRID_FK" NUMBER(38,0), 
	"DBID_GEN_FK" NUMBER(38,0), 
	"SUID_GEN" NUMBER(38,0), 
	"SCHEMA_ID" NUMBER(38,0), 
	"NAME" VARCHAR2(256 CHAR)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_SS2K5_SCHEMAS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_SCHEMATA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_SCHEMATA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SS2K5_SCHEMATA
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SS2K5_SCHEMATA" 
   (	"SVRID_FK" NUMBER(38,0), 
	"DBID_GEN_FK" NUMBER(38,0), 
	"SUID_GEN" NUMBER(38,0), 
	"SCHEMA_OWNER" VARCHAR2(256 CHAR), 
	"SCHEMA_NAME" VARCHAR2(256 CHAR)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_SS2K5_SCHEMATA.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_SERVER_PRINCIPALS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_SERVER_PRINCIPALS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SS2K5_SERVER_PRINCIPALS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SS2K5_SERVER_PRINCIPALS" 
   (	"SVRID_FK" NUMBER(38,0), 
	"DBID_GEN_FK" NUMBER(38,0), 
	"DB_ID" NUMBER(38,0), 
	"NAME" VARCHAR2(256 CHAR), 
	"SID" RAW(85), 
	"TYPE" CHAR(2 CHAR)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_SS2K5_SERVER_PRINCIPALS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_SQL_MODULES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_SQL_MODULES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SS2K5_SQL_MODULES
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SS2K5_SQL_MODULES" 
   (	"SVRID_FK" NUMBER(38,0), 
	"DBID_GEN_FK" NUMBER(38,0), 
	"OBJID_GEN" NUMBER(38,0), 
	"DEFINITION" CLOB, 
	"OBJECT_ID" NUMBER(38,0)
   ) ON COMMIT PRESERVE ROWS 
 LOB ("DEFINITION") STORE AS BASICFILE (
  ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  NOCACHE ) ;


PROMPT Completed STAGE_SS2K5_SQL_MODULES.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_SYSPROPERTIES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_SYSPROPERTIES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SS2K5_SYSPROPERTIES
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SS2K5_SYSPROPERTIES" 
   (	"SVRID_FK" NUMBER(38,0), 
	"DBID_GEN_FK" NUMBER(38,0), 
	"CLASS" NUMBER(38,0), 
	"MAJOR_ID" NUMBER(38,0), 
	"MINOR_ID" NUMBER(38,0), 
	"NAME" VARCHAR2(500 CHAR), 
	"VALUE" VARCHAR2(1000 CHAR)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_SS2K5_SYSPROPERTIES.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_TABLES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_TABLES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SS2K5_TABLES
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SS2K5_TABLES" 
   (	"SVRID_FK" NUMBER(38,0), 
	"DBID_GEN_FK" NUMBER(38,0), 
	"OBJID_GEN" NUMBER(38,0), 
	"SCHEMA_ID_FK" NUMBER(38,0), 
	"NAME" VARCHAR2(256 BYTE), 
	"OBJECT_ID" NUMBER(38,0), 
	"SCHEMA_ID" NUMBER(38,0), 
	"TYPE" CHAR(2 CHAR)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_SS2K5_TABLES.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_TABLE_PRIVILEGES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_TABLE_PRIVILEGES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SS2K5_TABLE_PRIVILEGES
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SS2K5_TABLE_PRIVILEGES" 
   (	"SVRID_FK" NUMBER(38,0), 
	"DBID_GEN_FK" NUMBER(38,0), 
	"SUID_GEN_FK" NUMBER(38,0), 
	"GRANTOR" VARCHAR2(256 CHAR), 
	"TABLE_SCHEMA" VARCHAR2(256 CHAR), 
	"TABLE_NAME" VARCHAR2(256 CHAR), 
	"PRIVILEGE_TYPE" VARCHAR2(256 CHAR), 
	"IS_GRANTABLE" VARCHAR2(256 CHAR), 
	"GRANTEE" VARCHAR2(256 CHAR)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_SS2K5_TABLE_PRIVILEGES.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_TYPES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_TYPES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SS2K5_TYPES
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SS2K5_TYPES" 
   (	"SVRID_FK" NUMBER(38,0), 
	"DBID_GEN_FK" NUMBER(38,0), 
	"NAME" VARCHAR2(256 BYTE), 
	"USER_TYPE_ID" NUMBER(38,0), 
	"SYSTEM_TYPE_ID" NUMBER(3,0), 
	"SCHEMA_ID" NUMBER(38,0), 
	"MAX_LENGTH" NUMBER(38,0), 
	"PRECISION" NUMBER(38,0), 
	"SCALE" NUMBER(38,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_SS2K5_TYPES.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SYB12_SYSCOLUMNS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SYB12_SYSCOLUMNS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SYB12_SYSCOLUMNS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SYB12_SYSCOLUMNS" 
   (	"SVRID_FK" NUMBER, 
	"DBID_GEN_FK" NUMBER, 
	"ID_GEN_FK" NUMBER, 
	"COLID_GEN" NUMBER, 
	"ID" NUMBER, 
	"DB_NUMBER" NUMBER, 
	"COLID" NUMBER, 
	"STATUS" NUMBER, 
	"DB_TYPE" NUMBER, 
	"LENGTH" NUMBER, 
	"OFFSET" NUMBER, 
	"USERTYPE" NUMBER, 
	"CDEFAULT" NUMBER, 
	"DOMAIN" NUMBER, 
	"NAME" VARCHAR2(255 BYTE), 
	"PRINTFMT" VARCHAR2(255 BYTE), 
	"PREC" NUMBER, 
	"SCALE" NUMBER, 
	"REMOTE_TYPE" NUMBER, 
	"REMOTE_NAME" VARCHAR2(255 BYTE), 
	"XSTATUS" NUMBER, 
	"XTYPE" NUMBER, 
	"XDBID" NUMBER, 
	"ACESSRULE" NUMBER, 
	"STATUS2" NUMBER
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_SYB12_SYSCOLUMNS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SYB12_SYSCOMMENTS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SYB12_SYSCOMMENTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SYB12_SYSCOMMENTS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SYB12_SYSCOMMENTS" 
   (	"SVRID_FK" NUMBER, 
	"DBID_GEN_FK" NUMBER, 
	"ID_GEN_FK" NUMBER, 
	"ID" NUMBER, 
	"DB_NUMBER" NUMBER, 
	"COLID" NUMBER, 
	"TEXTTYPE" NUMBER, 
	"LANGUAGE" NUMBER, 
	"TEXT" VARCHAR2(255 CHAR), 
	"COLID2" NUMBER, 
	"STATUS" NUMBER
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_SYB12_SYSCOMMENTS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SYB12_SYSCONSTRAINTS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SYB12_SYSCONSTRAINTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SYB12_SYSCONSTRAINTS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SYB12_SYSCONSTRAINTS" 
   (	"SVRID_FK" NUMBER, 
	"DBID_GEN_FK" NUMBER, 
	"TABLE_ID_GEN_FK" NUMBER, 
	"CONSTRAINT_GEN" NUMBER, 
	"COLID" NUMBER, 
	"CONSTRID" NUMBER, 
	"TABLEID" NUMBER, 
	"ERROR" NUMBER, 
	"STATUS" NUMBER, 
	"SPARE2" NUMBER
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_SYB12_SYSCONSTRAINTS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SYB12_SYSDATABASES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SYB12_SYSDATABASES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SYB12_SYSDATABASES
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SYB12_SYSDATABASES" 
   (	"SVRID_FK" NUMBER, 
	"DBID_GEN" NUMBER, 
	"NAME" VARCHAR2(255 BYTE), 
	"DBID" NUMBER, 
	"DB_SUID" NUMBER, 
	"STATUS" NUMBER, 
	"VERSION" NUMBER, 
	"LOGPTR" NUMBER(12,0), 
	"CRDATE" VARCHAR2(255 BYTE), 
	"DUMPTRDATE" VARCHAR2(255 BYTE), 
	"STATUS2" NUMBER, 
	"AUDFLAGS" NUMBER, 
	"DEFTABAUD" NUMBER, 
	"DEFVWAUD" NUMBER, 
	"DEFPRAUD" NUMBER, 
	"DEF_REMOTE_TYPE" NUMBER, 
	"DEF_REMOTE_LOC" VARCHAR2(255 BYTE), 
	"STATUS3" NUMBER, 
	"STATUS4" NUMBER
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_SYB12_SYSDATABASES.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SYB12_SYSINDEXES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SYB12_SYSINDEXES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SYB12_SYSINDEXES
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SYB12_SYSINDEXES" 
   (	"SVRID_FK" NUMBER, 
	"DBID_GEN_FK" NUMBER, 
	"ID_GEN_FK" NUMBER, 
	"INDID_GEN" NUMBER, 
	"TABLE_ID" NUMBER, 
	"INDEX_NAME" VARCHAR2(256 BYTE), 
	"INDEX_DESC" VARCHAR2(1000 BYTE), 
	"INDEX_KEYS" VARCHAR2(1000 BYTE), 
	"KEYCNT" NUMBER(7,0), 
	"INDID" NUMBER(7,0), 
	"STATUS" NUMBER(7,0), 
	"STATUS2" NUMBER(7,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_SYB12_SYSINDEXES.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SYB12_SYSOBJECTS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SYB12_SYSOBJECTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SYB12_SYSOBJECTS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SYB12_SYSOBJECTS" 
   (	"SVRID_FK" NUMBER, 
	"DBID_GEN_FK" NUMBER, 
	"OBJID_GEN" NUMBER, 
	"SUID_GEN_FK" NUMBER, 
	"NAME" VARCHAR2(256 BYTE), 
	"ID" NUMBER, 
	"DB_UID" NUMBER, 
	"DB_TYPE" VARCHAR2(256 BYTE), 
	"USERSTAT" NUMBER, 
	"SYSSTAT" NUMBER, 
	"INDEXDEL" NUMBER, 
	"SCHEMATACNT" NUMBER, 
	"SYSSTAT2" NUMBER, 
	"CRDATE" VARCHAR2(255 BYTE), 
	"EXPDATE" VARCHAR2(255 BYTE), 
	"DELTRIG" NUMBER, 
	"INSTRIG" NUMBER, 
	"UPDTRIG" NUMBER, 
	"SELTRIG" NUMBER, 
	"CKFIRST" NUMBER, 
	"DB_CACHE" NUMBER, 
	"AUDFLAGS" NUMBER, 
	"OBJSPARE" NUMBER, 
	"VERSIONTS" RAW(255), 
	"LOGINNAME" VARCHAR2(255 BYTE)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_SYB12_SYSOBJECTS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SYB12_SYSREFERENCES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SYB12_SYSREFERENCES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SYB12_SYSREFERENCES
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SYB12_SYSREFERENCES" 
   (	"SVRID_FK" NUMBER, 
	"DBID_GEN_FK" NUMBER, 
	"CONSTRAINT_GEN_FK" NUMBER, 
	"TABLE_ID_GEN_FK" NUMBER, 
	"REF_TABLE_ID_GEN_FK" NUMBER, 
	"FRGN_DBID_GEN_FK" NUMBER, 
	"PMRY_DBID_GEN_FK" NUMBER, 
	"INDEXID" NUMBER, 
	"CONSTRID" NUMBER, 
	"TABLEID" NUMBER, 
	"REFTABID" NUMBER, 
	"KEYCNT" NUMBER, 
	"STATUS" NUMBER, 
	"FRGNDBID" NUMBER, 
	"PMRYDBID" NUMBER, 
	"SPARE2" NUMBER, 
	"FOKEY1" NUMBER, 
	"FOKEY2" NUMBER, 
	"FOKEY3" NUMBER, 
	"FOKEY4" NUMBER, 
	"FOKEY5" NUMBER, 
	"FOKEY6" NUMBER, 
	"FOKEY7" NUMBER, 
	"FOKEY8" NUMBER, 
	"FOKEY9" NUMBER, 
	"FOKEY10" NUMBER, 
	"FOKEY11" NUMBER, 
	"FOKEY12" NUMBER, 
	"FOKEY13" NUMBER, 
	"FOKEY14" NUMBER, 
	"FOKEY15" NUMBER, 
	"FOKEY16" NUMBER, 
	"REFKEY1" NUMBER, 
	"REFKEY2" NUMBER, 
	"REFKEY3" NUMBER, 
	"REFKEY4" NUMBER, 
	"REFKEY5" NUMBER, 
	"REFKEY6" NUMBER, 
	"REFKEY7" NUMBER, 
	"REFKEY8" NUMBER, 
	"REFKEY9" NUMBER, 
	"REFKEY10" NUMBER, 
	"REFKEY11" NUMBER, 
	"REFKEY12" NUMBER, 
	"REFKEY13" NUMBER, 
	"REFKEY14" NUMBER, 
	"REFKEY15" NUMBER, 
	"REFKEY16" NUMBER, 
	"FRGNDBNAME" VARCHAR2(30 BYTE), 
	"PMRYDBNAME" VARCHAR2(30 BYTE)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_SYB12_SYSREFERENCES.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SYB12_SYSTYPES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SYB12_SYSTYPES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SYB12_SYSTYPES
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SYB12_SYSTYPES" 
   (	"SVRID_FK" NUMBER, 
	"DBID_GEN_FK" NUMBER, 
	"DB_UID" NUMBER, 
	"USERTYPE" NUMBER, 
	"VARIABLE" NUMBER(1,0), 
	"ALLOWNULLS" NUMBER(1,0), 
	"DB_TYPE" NUMBER, 
	"LENGTH" NUMBER, 
	"TDEFAULT" NUMBER, 
	"DOMAIN" NUMBER, 
	"NAME" VARCHAR2(255 BYTE), 
	"PRINTFMT" VARCHAR2(255 BYTE), 
	"PREC" NUMBER, 
	"SCALE" NUMBER, 
	"IDENT" NUMBER, 
	"HEIRARCHY" NUMBER, 
	"ACCESSRULE" NUMBER(12,0), 
	"XTYPEID" NUMBER(12,0), 
	"VXDBID" NUMBER(12,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_SYB12_SYSTYPES.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SYB12_SYSUSERS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_SYB12_SYSUSERS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_SYB12_SYSUSERS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_SYB12_SYSUSERS" 
   (	"SVRID_FK" NUMBER, 
	"DBID_GEN_FK" NUMBER, 
	"SUID_GEN" NUMBER, 
	"GEN_ID_FK" NUMBER, 
	"SUID" NUMBER, 
	"DB_UID" NUMBER, 
	"GID" NUMBER, 
	"NAME" VARCHAR2(256 BYTE), 
	"ENVIRON" VARCHAR2(256 BYTE)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_SYB12_SYSUSERS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_TERADATA_ALL_RI_PARENTS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_TERADATA_ALL_RI_PARENTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_TERADATA_ALL_RI_PARENTS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_TERADATA_ALL_RI_PARENTS" 
   (	"INDEXNAME" VARCHAR2(128 CHAR), 
	"PARENTDB" VARCHAR2(128 CHAR), 
	"PARENTTABLE" VARCHAR2(128 CHAR), 
	"PARENTKEYCOLUMN" VARCHAR2(128 CHAR), 
	"CHILDDB" VARCHAR2(128 CHAR), 
	"CHILDTABLE" VARCHAR2(128 CHAR), 
	"CHILDKEYCOLUMN" VARCHAR2(128 CHAR), 
	"CREATORNAME" VARCHAR2(128 CHAR)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_TERADATA_ALL_RI_PARENTS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_TERADATA_COLUMNS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_TERADATA_COLUMNS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_TERADATA_COLUMNS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_TERADATA_COLUMNS" 
   (	"MDID" NUMBER, 
	"DATABASENAME" VARCHAR2(128 CHAR), 
	"TABLENAME" VARCHAR2(128 CHAR), 
	"COLUMNNAME" VARCHAR2(128 CHAR), 
	"COLUMNFORMAT" VARCHAR2(128 CHAR), 
	"COLUMNTITLE" VARCHAR2(256 CHAR), 
	"COLUMNTYPE" CHAR(2 CHAR), 
	"COLUMNUDTNAME" VARCHAR2(128 CHAR), 
	"COLUMNLENGTH" NUMBER(10,0), 
	"DEFAULTVALUE" CLOB, 
	"NULLABLE" CHAR(1 CHAR), 
	"COMMENTSTRING" VARCHAR2(255 CHAR), 
	"DECIMALTOTALDIGITS" NUMBER(10,0), 
	"DECIMALFRACTIONALDIGITS" NUMBER(10,0), 
	"COLUMNID" NUMBER, 
	"UPPERCASEFLAG" CHAR(1 CHAR), 
	"COLUMNCONSTRAINT" CLOB, 
	"CONSTRAINTCOUNT" NUMBER(10,0), 
	"CREATORNAME" VARCHAR2(128 CHAR), 
	"CHARTYPE" NUMBER(10,0), 
	"IDCOLTYPE" CHAR(2 CHAR)
   ) ON COMMIT PRESERVE ROWS 
 LOB ("DEFAULTVALUE") STORE AS BASICFILE (
  ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  NOCACHE ) 
 LOB ("COLUMNCONSTRAINT") STORE AS BASICFILE (
  ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  NOCACHE ) ;


PROMPT Completed STAGE_TERADATA_COLUMNS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_TERADATA_DATABASES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_TERADATA_DATABASES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_TERADATA_DATABASES
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_TERADATA_DATABASES" 
   (	"SVRID" NUMBER, 
	"MDID" NUMBER, 
	"DATABASENAME" VARCHAR2(128 CHAR), 
	"COMMENTSTRING" VARCHAR2(255 CHAR), 
	"OWNERNAME" VARCHAR2(128 CHAR)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_TERADATA_DATABASES.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_TERADATA_FKEYS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_TERADATA_FKEYS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_TERADATA_FKEYS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_TERADATA_FKEYS" 
   (	"MDID1" NUMBER, 
	"MDID2" NUMBER, 
	"TABLESCHEMA" VARCHAR2(128 CHAR), 
	"TABLENAME" VARCHAR2(128 CHAR), 
	"REFTABLESCHEMA" VARCHAR2(128 CHAR), 
	"REFTABLENAME" VARCHAR2(128 CHAR), 
	"CONSTRAINTNAME" VARCHAR2(128 CHAR), 
	"COLUMNNAME" VARCHAR2(128 CHAR), 
	"REFCOLUMNNAME" VARCHAR2(128 CHAR), 
	"REFKEYNAME" VARCHAR2(128 CHAR), 
	"COLUMNSEQ" NUMBER(10,0), 
	"REFERENCEIDX" NUMBER(10,0), 
	"FKEYID" NUMBER(10,0), 
	"PARENTKEYID" NUMBER(10,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_TERADATA_FKEYS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_TERADATA_IDXCONSTRAINTS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_TERADATA_IDXCONSTRAINTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_TERADATA_IDXCONSTRAINTS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_TERADATA_IDXCONSTRAINTS" 
   (	"MDID" NUMBER, 
	"DATABASENAME" VARCHAR2(128 CHAR), 
	"TABLENAME" VARCHAR2(128 CHAR), 
	"INDEXNAME" VARCHAR2(128 CHAR), 
	"INDEXNUMBER" NUMBER(10,0), 
	"CONSTRAINTTYPE" CHAR(1 BYTE), 
	"CONSTRAINTTEXT" CLOB
   ) ON COMMIT PRESERVE ROWS 
 LOB ("CONSTRAINTTEXT") STORE AS BASICFILE (
  ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  NOCACHE ) ;


PROMPT Completed STAGE_TERADATA_IDXCONSTRAINTS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_TERADATA_INDICES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_TERADATA_INDICES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_TERADATA_INDICES
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_TERADATA_INDICES" 
   (	"MDID" NUMBER, 
	"DATABASENAME" VARCHAR2(128 CHAR), 
	"TABLENAME" VARCHAR2(128 CHAR), 
	"INDEXNUMBER" NUMBER(10,0), 
	"INDEXTYPE" CHAR(1 CHAR), 
	"UNIQUEFLAG" CHAR(1 CHAR), 
	"INDEXNAME" VARCHAR2(128 CHAR), 
	"COLUMNNAME" VARCHAR2(128 CHAR), 
	"COLUMNPOSITION" NUMBER(10,0), 
	"CREATORNAME" VARCHAR2(128 CHAR), 
	"INDEXMODE" CHAR(1 CHAR)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_TERADATA_INDICES.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_TERADATA_JOININDICES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_TERADATA_JOININDICES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_TERADATA_JOININDICES
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_TERADATA_JOININDICES" 
   (	"DATABASENAME" VARCHAR2(128 CHAR), 
	"TABLENAME" VARCHAR2(128 CHAR), 
	"JOINIDXDATABASENAME" VARCHAR2(128 CHAR), 
	"JOINIDXXNAME" VARCHAR2(128 CHAR), 
	"INDEXTYPE" CHAR(1 CHAR)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_TERADATA_JOININDICES.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_TERADATA_LOG.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_TERADATA_LOG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_TERADATA_LOG
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_TERADATA_LOG" 
   (	"LINE" NUMBER, 
	"LOGSTRING" VARCHAR2(2000 CHAR)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_TERADATA_LOG.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_TERADATA_OFFLINE_CHECK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_TERADATA_OFFLINE_CHECK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_TERADATA_OFFLINE_CHECK
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_TERADATA_OFFLINE_CHECK" 
   (	"INDEX" NUMBER, 
	"DBNAME" VARCHAR2(256 BYTE), 
	"TABNAME" VARCHAR2(256 BYTE), 
	"CONSTRAINT_NAME" VARCHAR2(256 BYTE), 
	"SEARCH_CONDITION" VARCHAR2(4000 BYTE)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_TERADATA_OFFLINE_CHECK.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_TERADATA_OFFLINE_FKEYS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_TERADATA_OFFLINE_FKEYS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_TERADATA_OFFLINE_FKEYS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_TERADATA_OFFLINE_FKEYS" 
   (	"INDEX" NUMBER, 
	"DBNAME" VARCHAR2(256 BYTE), 
	"TABNAME" VARCHAR2(256 BYTE), 
	"REFTABSCHEMA" VARCHAR2(256 BYTE), 
	"REFTABNAME" VARCHAR2(256 BYTE), 
	"CONSTNAME" VARCHAR2(256 BYTE), 
	"COLNAME" VARCHAR2(256 BYTE), 
	"REFCOLNAME" VARCHAR2(256 BYTE), 
	"TYPE" CHAR(1 BYTE)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_TERADATA_OFFLINE_FKEYS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_TERADATA_OFFLINE_INDC.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_TERADATA_OFFLINE_INDC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_TERADATA_OFFLINE_INDC
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_TERADATA_OFFLINE_INDC" 
   (	"INDEX" NUMBER, 
	"NAME" VARCHAR2(256 BYTE), 
	"TABLENAME" VARCHAR2(256 BYTE), 
	"INDEXNAME" VARCHAR2(256 BYTE), 
	"INDEXNUMBER" NUMBER, 
	"CONSTRAINTTYPE" CHAR(1 BYTE), 
	"CONSTRAINTTEXT" CLOB
   ) ON COMMIT PRESERVE ROWS 
 LOB ("CONSTRAINTTEXT") STORE AS BASICFILE (
  ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  NOCACHE ) ;


PROMPT Completed STAGE_TERADATA_OFFLINE_INDC.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_TERADATA_OFFLINE_INDDET.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_TERADATA_OFFLINE_INDDET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_TERADATA_OFFLINE_INDDET
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_TERADATA_OFFLINE_INDDET" 
   (	"INDEX" NUMBER, 
	"DBNAME" VARCHAR2(256 BYTE), 
	"TABNAME" VARCHAR2(256 BYTE), 
	"INDNAME" VARCHAR2(256 BYTE), 
	"COLNAME" VARCHAR2(256 BYTE), 
	"COLSEQ" NUMBER
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_TERADATA_OFFLINE_INDDET.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_TERADATA_OFFLINE_INDEXES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_TERADATA_OFFLINE_INDEXES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_TERADATA_OFFLINE_INDEXES
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_TERADATA_OFFLINE_INDEXES" 
   (	"INDEX" NUMBER, 
	"ID" VARCHAR2(16 BYTE), 
	"DBNAME" VARCHAR2(256 BYTE), 
	"TABNAME" VARCHAR2(256 BYTE), 
	"INDNAME" VARCHAR2(256 BYTE), 
	"INDEXTYPE" CHAR(1 BYTE), 
	"UNIQUERULE" CHAR(1 BYTE), 
	"CREATEUSER" VARCHAR2(256 BYTE)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_TERADATA_OFFLINE_INDEXES.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_TERADATA_OFFLINE_PKEYS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_TERADATA_OFFLINE_PKEYS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_TERADATA_OFFLINE_PKEYS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_TERADATA_OFFLINE_PKEYS" 
   (	"INDEX" NUMBER, 
	"DBNAME" VARCHAR2(256 BYTE), 
	"TABNAME" VARCHAR2(256 BYTE), 
	"CONSTNAME" VARCHAR2(256 BYTE), 
	"TYPE" CHAR(1 BYTE), 
	"COLNAME" VARCHAR2(256 BYTE), 
	"COLSEQ" NUMBER, 
	"UNIQUEFLAG" CHAR(1 BYTE)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_TERADATA_OFFLINE_PKEYS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_TERADATA_OFFLINE_PROCS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_TERADATA_OFFLINE_PROCS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_TERADATA_OFFLINE_PROCS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_TERADATA_OFFLINE_PROCS" 
   (	"INDEX" NUMBER, 
	"DBNAME" VARCHAR2(256 BYTE), 
	"NAME" VARCHAR2(256 BYTE), 
	"ROUTINETYPE" CHAR(9 BYTE), 
	"CREATE_TIME" VARCHAR2(64 BYTE), 
	"REMARKS" VARCHAR2(510 BYTE), 
	"TEXT" CLOB
   ) ON COMMIT PRESERVE ROWS 
 LOB ("TEXT") STORE AS BASICFILE (
  ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  NOCACHE ) ;


PROMPT Completed STAGE_TERADATA_OFFLINE_PROCS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_TERADATA_OFFLINE_TABLES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_TERADATA_OFFLINE_TABLES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_TERADATA_OFFLINE_TABLES
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_TERADATA_OFFLINE_TABLES" 
   (	"INDEX" NUMBER, 
	"DBNAME" VARCHAR2(256 BYTE), 
	"TABNAME" VARCHAR2(256 BYTE), 
	"COLNAME" VARCHAR2(256 BYTE), 
	"TYPENAME" CHAR(2 BYTE), 
	"CHARTYPE" CHAR(1 BYTE), 
	"LENGTH" NUMBER, 
	"SCALE" NUMBER, 
	"DTOTDIGITS" NUMBER, 
	"DFRACDIGITS" NUMBER, 
	"NULLS" CHAR(1 BYTE), 
	"CHECK" VARCHAR2(4000 BYTE), 
	"COLUMNUDTNAME" VARCHAR2(256 BYTE), 
	"DEFAULTVAL" VARCHAR2(2048 BYTE)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_TERADATA_OFFLINE_TABLES.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_TERADATA_OFFLINE_TRIGS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_TERADATA_OFFLINE_TRIGS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_TERADATA_OFFLINE_TRIGS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_TERADATA_OFFLINE_TRIGS" 
   (	"INDEX" NUMBER, 
	"TABSCHEMA" VARCHAR2(256 BYTE), 
	"TABNAME" VARCHAR2(256 BYTE), 
	"OWNER" VARCHAR2(256 BYTE), 
	"TRIGNAME" VARCHAR2(256 BYTE), 
	"TRIGEVENT" CHAR(1 BYTE), 
	"VALID" CHAR(1 BYTE), 
	"REMARKS" VARCHAR2(4000 BYTE), 
	"TEXT" CLOB
   ) ON COMMIT PRESERVE ROWS 
 LOB ("TEXT") STORE AS BASICFILE (
  ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  NOCACHE ) ;


PROMPT Completed STAGE_TERADATA_OFFLINE_TRIGS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_TERADATA_OFFLINE_VDEFNS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_TERADATA_OFFLINE_VDEFNS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_TERADATA_OFFLINE_VDEFNS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_TERADATA_OFFLINE_VDEFNS" 
   (	"INDEX" NUMBER, 
	"DBNAME" VARCHAR2(256 BYTE), 
	"VIEWNAME" VARCHAR2(256 BYTE), 
	"TEXT" CLOB
   ) ON COMMIT PRESERVE ROWS 
 LOB ("TEXT") STORE AS BASICFILE (
  ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  NOCACHE ) ;


PROMPT Completed STAGE_TERADATA_OFFLINE_VDEFNS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_TERADATA_OFFLINE_VIEWS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_TERADATA_OFFLINE_VIEWS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_TERADATA_OFFLINE_VIEWS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_TERADATA_OFFLINE_VIEWS" 
   (	"INDEX" NUMBER, 
	"DBNAME" VARCHAR2(256 BYTE), 
	"VIEWNAME" VARCHAR2(256 BYTE), 
	"COLNAME" VARCHAR2(256 BYTE), 
	"TYPENAME" CHAR(2 BYTE), 
	"LENGTH" NUMBER, 
	"SCALE" NUMBER, 
	"NULLS" CHAR(1 BYTE), 
	"DEFAULTVAL" VARCHAR2(2048 BYTE)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_TERADATA_OFFLINE_VIEWS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_TERADATA_PROCEDURES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_TERADATA_PROCEDURES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_TERADATA_PROCEDURES
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_TERADATA_PROCEDURES" 
   (	"MDID" NUMBER, 
	"DATABASENAME" VARCHAR2(128 CHAR), 
	"PROCNAME" VARCHAR2(128 CHAR), 
	"PROCTYPE" CHAR(2 BYTE), 
	"REQUESTTEXT" CLOB, 
	"COMMENTSTRING" VARCHAR2(510 CHAR)
   ) ON COMMIT PRESERVE ROWS 
 LOB ("REQUESTTEXT") STORE AS BASICFILE (
  ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  NOCACHE ) ;


PROMPT Completed STAGE_TERADATA_PROCEDURES.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_TERADATA_SHOWTBLCHECKS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_TERADATA_SHOWTBLCHECKS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_TERADATA_SHOWTBLCHECKS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_TERADATA_SHOWTBLCHECKS" 
   (	"MDID" NUMBER, 
	"DATABASENAME" VARCHAR2(128 CHAR), 
	"TABLENAME" VARCHAR2(128 CHAR), 
	"CHECKNAME" VARCHAR2(128 CHAR), 
	"CHECKTYPE" CHAR(1 BYTE), 
	"TABLECHECK" CLOB, 
	"COLUMNNAME" VARCHAR2(128 CHAR), 
	"CREATORNAME" VARCHAR2(128 CHAR)
   ) ON COMMIT PRESERVE ROWS 
 LOB ("TABLECHECK") STORE AS BASICFILE (
  ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  NOCACHE ) ;


PROMPT Completed STAGE_TERADATA_SHOWTBLCHECKS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_TERADATA_TABLES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_TERADATA_TABLES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_TERADATA_TABLES
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_TERADATA_TABLES" 
   (	"MDID" NUMBER, 
	"DATABASENAME" VARCHAR2(128 CHAR), 
	"TABLENAME" VARCHAR2(128 CHAR), 
	"TABLEKIND" CHAR(1 CHAR), 
	"CREATORNAME" VARCHAR2(128 CHAR), 
	"REQUESTTEXT" CLOB, 
	"COMMENTSTRING" VARCHAR2(255 CHAR), 
	"COMMITOPT" CHAR(1 CHAR)
   ) ON COMMIT PRESERVE ROWS 
 LOB ("REQUESTTEXT") STORE AS BASICFILE (
  ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  NOCACHE ) ;


PROMPT Completed STAGE_TERADATA_TABLES.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_TERADATA_TABLETEXT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_TERADATA_TABLETEXT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_TERADATA_TABLETEXT
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_TERADATA_TABLETEXT" 
   (	"DATABASENAME" VARCHAR2(128 CHAR), 
	"TABLENAME" VARCHAR2(128 CHAR), 
	"TABLEKIND" CHAR(1 CHAR), 
	"REQUESTTEXT" CLOB
   ) ON COMMIT PRESERVE ROWS 
 LOB ("REQUESTTEXT") STORE AS BASICFILE (
  ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  NOCACHE ) ;


PROMPT Completed STAGE_TERADATA_TABLETEXT.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_TERADATA_TRIGGERS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_TERADATA_TRIGGERS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_TERADATA_TRIGGERS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_TERADATA_TRIGGERS" 
   (	"MDID" NUMBER, 
	"DATABASENAME" VARCHAR2(128 CHAR), 
	"SUBJECTTABLEDATABASENAME" VARCHAR2(128 CHAR), 
	"TABLENAME" VARCHAR2(128 CHAR), 
	"TRIGGERNAME" VARCHAR2(128 CHAR), 
	"ENABLEDFLAG" CHAR(1 CHAR), 
	"ACTIONTIME" CHAR(1 CHAR), 
	"EVENT" CHAR(1 CHAR), 
	"KIND" CHAR(1 CHAR), 
	"ORDERNUMBER" NUMBER(10,0), 
	"TRIGGERCOMMENT" VARCHAR2(255 CHAR), 
	"REQUESTTEXT" CLOB, 
	"CREATORNAME" VARCHAR2(128 CHAR)
   ) ON COMMIT PRESERVE ROWS 
 LOB ("REQUESTTEXT") STORE AS BASICFILE (
  ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  NOCACHE ) ;


PROMPT Completed STAGE_TERADATA_TRIGGERS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_TERADATA_UDTS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_TERADATA_UDTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_TERADATA_UDTS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_TERADATA_UDTS" 
   (	"MDID" NUMBER, 
	"TYPEKIND" CHAR(1 CHAR), 
	"TYPENAME" VARCHAR2(128 CHAR), 
	"FIELDNAME" VARCHAR2(128 CHAR), 
	"FIELDID" NUMBER(10,0), 
	"FIELDTYPE" CHAR(2 CHAR), 
	"UDTNAME" VARCHAR2(128 CHAR), 
	"CHARTYPE" NUMBER(10,0), 
	"MAXLENGTH" NUMBER(10,0), 
	"DECIMALTOTALDIGITS" NUMBER(10,0), 
	"DECIMALFRACTIONALDIGITS" NUMBER(10,0), 
	"INSTANTIABLE" CHAR(1 CHAR), 
	"FINAL" CHAR(1 CHAR)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed STAGE_TERADATA_UDTS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_TRANSLATEDSQL.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying STAGE_TRANSLATEDSQL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table STAGE_TRANSLATEDSQL
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."STAGE_TRANSLATEDSQL" 
   (	"SERVER_ID_FK" NUMBER, 
	"DB_ID_FK" NUMBER, 
	"SCHEMA_ID_FK" NUMBER, 
	"OBJ_ID_FK" NUMBER, 
	"NATIVE_SQL" CLOB, 
	"TRANS_SQL" CLOB
   ) ON COMMIT PRESERVE ROWS 
 LOB ("NATIVE_SQL") STORE AS BASICFILE (
  ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  NOCACHE ) 
 LOB ("TRANS_SQL") STORE AS BASICFILE (
  ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  NOCACHE ) ;


PROMPT Completed STAGE_TRANSLATEDSQL.sql
PROMPT


-- ============================================================================
-- Deploy: SYB12_SYSCOLUMNS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SYB12_SYSCOLUMNS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SYB12_SYSCOLUMNS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."SYB12_SYSCOLUMNS" 
   (	"DB_ID" NUMBER(10,0), 
	"ID" NUMBER(10,0), 
	"DB_NUMBER" NUMBER(10,0), 
	"COLID" NUMBER(10,0), 
	"STATUS" NUMBER(10,0), 
	"DB_TYPE" NUMBER(10,0), 
	"LENGTH" NUMBER(10,0), 
	"OFFSET" NUMBER(10,0), 
	"USERTYPE" NUMBER(10,0), 
	"CDEFAULT" NUMBER(10,0), 
	"DOMAIN" NUMBER(10,0), 
	"NAME" VARCHAR2(255 BYTE), 
	"PRINTFMT" VARCHAR2(255 BYTE), 
	"PREC" NUMBER(10,0), 
	"SCALE" NUMBER(10,0), 
	"REMOTE_TYPE" NUMBER(10,0), 
	"REMOTE_NAME" VARCHAR2(255 BYTE), 
	"XSTATUS" NUMBER(10,0), 
	"XTYPE" NUMBER(10,0), 
	"XDBID" NUMBER(10,0), 
	"ACESSRULE" NUMBER(10,0), 
	"STATUS2" NUMBER(10,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed SYB12_SYSCOLUMNS.sql
PROMPT


-- ============================================================================
-- Deploy: SYB12_SYSCOMMENTS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SYB12_SYSCOMMENTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SYB12_SYSCOMMENTS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."SYB12_SYSCOMMENTS" 
   (	"DB_ID" NUMBER(10,0), 
	"ID" NUMBER(10,0), 
	"DB_NUMBER" NUMBER(10,0), 
	"COLID" NUMBER(10,0), 
	"TEXTTYPE" NUMBER(10,0), 
	"LANGUAGE" NUMBER(10,0), 
	"TEXT" VARCHAR2(1000 CHAR), 
	"COLID2" NUMBER(10,0), 
	"STATUS" NUMBER(10,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed SYB12_SYSCOMMENTS.sql
PROMPT


-- ============================================================================
-- Deploy: SYB12_SYSCONSTRAINTS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SYB12_SYSCONSTRAINTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SYB12_SYSCONSTRAINTS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."SYB12_SYSCONSTRAINTS" 
   (	"DB_ID" NUMBER(10,0), 
	"TABLE_ID" NUMBER(10,0), 
	"CONSTRAINT_NAME" VARCHAR2(256 BYTE), 
	"DB_DEFINITION" VARCHAR2(1000 BYTE)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed SYB12_SYSCONSTRAINTS.sql
PROMPT


-- ============================================================================
-- Deploy: SYB12_SYSDATABASES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SYB12_SYSDATABASES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SYB12_SYSDATABASES
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."SYB12_SYSDATABASES" 
   (	"DB_ID" NUMBER(10,0), 
	"NAME" VARCHAR2(255 BYTE), 
	"DBID" NUMBER(10,0), 
	"DB_SUID" NUMBER(10,0), 
	"STATUS" NUMBER(10,0), 
	"VERSION" NUMBER(10,0), 
	"LOGPTR" NUMBER(12,0), 
	"CRDATE" VARCHAR2(255 BYTE), 
	"DUMPTRDATE" VARCHAR2(255 BYTE), 
	"STATUS2" NUMBER(10,0), 
	"AUDFLAGS" NUMBER(10,0), 
	"DEFTABAUD" NUMBER(10,0), 
	"DEFVWAUD" NUMBER(10,0), 
	"DEFPRAUD" NUMBER(10,0), 
	"DEF_REMOTE_TYPE" NUMBER(10,0), 
	"DEF_REMOTE_LOC" VARCHAR2(255 BYTE), 
	"STATUS3" NUMBER(10,0), 
	"STATUS4" NUMBER(10,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed SYB12_SYSDATABASES.sql
PROMPT


-- ============================================================================
-- Deploy: SYB12_SYSINDEXES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SYB12_SYSINDEXES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SYB12_SYSINDEXES
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."SYB12_SYSINDEXES" 
   (	"DB_ID" NUMBER(10,0), 
	"TABLE_ID" NUMBER(10,0), 
	"INDEX_NAME" VARCHAR2(256 BYTE), 
	"INDEX_DESC" VARCHAR2(1000 BYTE), 
	"INDEX_KEYS" VARCHAR2(1000 BYTE)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed SYB12_SYSINDEXES.sql
PROMPT


-- ============================================================================
-- Deploy: SYB12_SYSOBJECTS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SYB12_SYSOBJECTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SYB12_SYSOBJECTS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."SYB12_SYSOBJECTS" 
   (	"DB_ID" NUMBER(10,0), 
	"NAME" VARCHAR2(256 BYTE), 
	"ID" NUMBER(10,0), 
	"DB_UID" NUMBER(10,0), 
	"DB_TYPE" VARCHAR2(256 BYTE), 
	"USERSTAT" NUMBER(10,0), 
	"SYSSTAT" NUMBER(10,0), 
	"INDEXDEL" NUMBER(10,0), 
	"SCHEMATACNT" NUMBER(10,0), 
	"SYSSTAT2" NUMBER(10,0), 
	"CRDATE" VARCHAR2(255 BYTE), 
	"EXPDATE" VARCHAR2(255 BYTE), 
	"DELTRIG" NUMBER(10,0), 
	"INSTRIG" NUMBER(10,0), 
	"UPDTRIG" NUMBER(10,0), 
	"SELTRIG" NUMBER(10,0), 
	"CKFIRST" NUMBER(10,0), 
	"DB_CACHE" NUMBER(10,0), 
	"AUDFLAGS" NUMBER(10,0), 
	"OBJSPARE" NUMBER(10,0), 
	"VERSIONTS" RAW(255), 
	"LOGINNAME" VARCHAR2(255 BYTE)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed SYB12_SYSOBJECTS.sql
PROMPT


-- ============================================================================
-- Deploy: SYB12_SYSTYPES.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SYB12_SYSTYPES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SYB12_SYSTYPES
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."SYB12_SYSTYPES" 
   (	"DB_ID" NUMBER(10,0), 
	"DB_UID" NUMBER(10,0), 
	"USERTYPE" NUMBER(10,0), 
	"VARIABLE" NUMBER(1,0), 
	"ALLOWNULLS" NUMBER(1,0), 
	"DB_TYPE" NUMBER(10,0), 
	"LENGTH" NUMBER(10,0), 
	"TDEFAULT" NUMBER(10,0), 
	"DOMAIN" NUMBER(10,0), 
	"NAME" VARCHAR2(255 BYTE), 
	"PRINTFMT" VARCHAR2(255 BYTE), 
	"PREC" NUMBER(10,0), 
	"SCALE" NUMBER(10,0), 
	"IDENT" NUMBER(10,0), 
	"HEIRARCHY" NUMBER(10,0), 
	"ACCESSRULE" NUMBER(12,0), 
	"XTYPEID" NUMBER(12,0), 
	"VXDBID" NUMBER(12,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed SYB12_SYSTYPES.sql
PROMPT


-- ============================================================================
-- Deploy: SYB12_SYSUSERS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying SYB12_SYSUSERS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table SYB12_SYSUSERS
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."SYB12_SYSUSERS" 
   (	"DB_ID" NUMBER(10,0), 
	"SUID" NUMBER(10,0), 
	"DB_UID" NUMBER(10,0), 
	"GID" NUMBER(10,0), 
	"NAME" VARCHAR2(256 BYTE), 
	"ENVIRON" VARCHAR2(256 BYTE)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed SYB12_SYSUSERS.sql
PROMPT


-- ============================================================================
-- Deploy: TABLE1.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TABLE1.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TABLE1
--------------------------------------------------------

  CREATE TABLE "DB_JT"."TABLE1" 
   (	"SPOL" VARCHAR2(50 BYTE), 
	"PERIODA" NUMBER, 
	"SCHVAL" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed TABLE1.sql
PROMPT


-- ============================================================================
-- Deploy: TABLE2.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TABLE2.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TABLE2
--------------------------------------------------------

  CREATE TABLE "DB_JT"."TABLE2" 
   (	"SPOL" VARCHAR2(30 BYTE), 
	"ON_LINE" VARCHAR2(10 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed TABLE2.sql
PROMPT


-- ============================================================================
-- Deploy: TABLE3.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TABLE3.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TABLE3
--------------------------------------------------------

  CREATE TABLE "DB_JT"."TABLE3" 
   (	"PERIODA" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed TABLE3.sql
PROMPT


-- ============================================================================
-- Deploy: TB_EXT_DOKLADUVEROVAPOZICE_RKC.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TB_EXT_DOKLADUVEROVAPOZICE_RKC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TB_EXT_DOKLADUVEROVAPOZICE_RKC
--------------------------------------------------------

  CREATE TABLE "DB_JT"."TB_EXT_DOKLADUVEROVAPOZICE_RKC" 
   (	"S_UCET" VARCHAR2(10 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKACNB" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"ID_DOKLAD" NUMBER(*,0), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"S_UCETUNIF" VARCHAR2(10 BYTE), 
	"ID_UNIFPROTI" NUMBER(*,0), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"C_BANKA" VARCHAR2(4000 BYTE), 
	"ND_CISTAANGAZOVANOST" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed TB_EXT_DOKLADUVEROVAPOZICE_RKC.sql
PROMPT


-- ============================================================================
-- Deploy: TB_KP_DOKLADDETAIL_DSLR.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TB_KP_DOKLADDETAIL_DSLR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TB_KP_DOKLADDETAIL_DSLR
--------------------------------------------------------

  CREATE TABLE "DB_JT"."TB_KP_DOKLADDETAIL_DSLR" 
   (	"ID" NUMBER(*,0), 
	"S_NAZEV" VARCHAR2(128 BYTE), 
	"NL_RADEK" NUMBER(*,0), 
	"TEXTRADEK" VARCHAR2(4000 BYTE), 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"S_MENAUCSPOL" VARCHAR2(3 BYTE), 
	"ND_CASTKACZK" NUMBER, 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"PROTISTRANA" VARCHAR2(256 BYTE), 
	"DT_DATUM" DATE, 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"NL_PORADILIST" NUMBER(*,0), 
	"DATUM" DATE, 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"ID_CISSUBJECT" NUMBER(*,0), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"ID_KTGPROJEKT" NUMBER(*,0), 
	"ID_KTGODBOR" NUMBER(*,0), 
	"S_FAKTURA" VARCHAR2(30 BYTE), 
	"TYPTRANSAKCE" VARCHAR2(4000 BYTE), 
	"XIDSL" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed TB_KP_DOKLADDETAIL_DSLR.sql
PROMPT


-- ============================================================================
-- Deploy: TB_KP_DOKLADDETAIL_DSLR_CZ.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TB_KP_DOKLADDETAIL_DSLR_CZ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TB_KP_DOKLADDETAIL_DSLR_CZ
--------------------------------------------------------

  CREATE TABLE "DB_JT"."TB_KP_DOKLADDETAIL_DSLR_CZ" 
   (	"ID" NUMBER(*,0), 
	"S_NAZEV" VARCHAR2(128 BYTE), 
	"NL_RADEK" NUMBER(*,0), 
	"TEXTRADEK" VARCHAR2(4000 BYTE), 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"S_MENAUCSPOL" VARCHAR2(3 BYTE), 
	"ND_CASTKACZK" NUMBER, 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"PROTISTRANA" VARCHAR2(256 BYTE), 
	"DT_DATUM" DATE, 
	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"NL_PORADILIST" NUMBER(*,0), 
	"DATUM" DATE, 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"ID_CISSUBJECT" NUMBER(*,0), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"ID_KTGPROJEKT" NUMBER(*,0), 
	"ID_KTGODBOR" NUMBER(*,0), 
	"S_FAKTURA" VARCHAR2(30 BYTE), 
	"TYPTRANSAKCE" VARCHAR2(4000 BYTE), 
	"XIDSL" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed TB_KP_DOKLADDETAIL_DSLR_CZ.sql
PROMPT


-- ============================================================================
-- Deploy: TEST_OL_DOKLADUVEROVAPOZICE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TEST_OL_DOKLADUVEROVAPOZICE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TEST_OL_DOKLADUVEROVAPOZICE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."TEST_OL_DOKLADUVEROVAPOZICE" 
   (	"S_UCET" VARCHAR2(10 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKACNB" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"ID_DOKLAD" NUMBER(*,0), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"S_UCETUNIF" VARCHAR2(10 BYTE), 
	"ID_UNIFPROTI" NUMBER(*,0), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"C_BANKA" VARCHAR2(4000 BYTE), 
	"ND_CISTAANGAZOVANOST" NUMBER, 
	"GROUP_CODE_ZDROJ" VARCHAR2(5 BYTE), 
	"DIFFR" VARCHAR2(3 BYTE), 
	"NAZEV_SPOLECNOST" VARCHAR2(4000 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed TEST_OL_DOKLADUVEROVAPOZICE.sql
PROMPT


-- ============================================================================
-- Deploy: TEST_OL_UVEROVAPOZICE_T.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TEST_OL_UVEROVAPOZICE_T.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TEST_OL_UVEROVAPOZICE_T
--------------------------------------------------------

  CREATE TABLE "DB_JT"."TEST_OL_UVEROVAPOZICE_T" 
   (	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"NAZEV_SPOLECNOST" VARCHAR2(4000 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKACNB" NUMBER, 
	"C_BANKA" VARCHAR2(4000 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"ND_CISTAANGAZOVANOST" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed TEST_OL_UVEROVAPOZICE_T.sql
PROMPT


-- ============================================================================
-- Deploy: TEST_OL_VIEW_OPTIMALIZ.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TEST_OL_VIEW_OPTIMALIZ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TEST_OL_VIEW_OPTIMALIZ
--------------------------------------------------------

  CREATE TABLE "DB_JT"."TEST_OL_VIEW_OPTIMALIZ" 
   (	"S_UCET" VARCHAR2(10 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKACNB" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"ID_DOKLAD" NUMBER(*,0), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"S_UCETUNIF" VARCHAR2(10 BYTE), 
	"ID_UNIFPROTI" NUMBER(*,0), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"C_BANKA" VARCHAR2(4000 BYTE), 
	"ND_CISTAANGAZOVANOST" NUMBER, 
	"GROUP_CODE_ZDROJ" VARCHAR2(5 BYTE), 
	"DIFFR" VARCHAR2(3 BYTE), 
	"NAZEV_SPOLECNOST" VARCHAR2(4000 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed TEST_OL_VIEW_OPTIMALIZ.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_DOKLADAGREGTYPNASTROJ.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TMP_DOKLADAGREGTYPNASTROJ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TMP_DOKLADAGREGTYPNASTROJ
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."TMP_DOKLADAGREGTYPNASTROJ" 
   (	"ID" NUMBER(*,0), 
	"ID_KTGTYPNASTROJE" NUMBER(*,0), 
	"C_TYPPORTFOLIO" CHAR(1 BYTE), 
	"ID_KTGSPOLECNOSTPROTISTRANA" NUMBER(*,0), 
	"S_PRODUKTUCET" VARCHAR2(21 BYTE), 
	"ID_KTGTYPOPERACE" NUMBER(*,0), 
	"C_TYPVYKAZ" CHAR(1 BYTE), 
	"S_CASROZLISENIMENA" VARCHAR2(3 BYTE), 
	"C_DENOMINACE" CHAR(1 BYTE) DEFAULT '0', 
	"C_RESTRUKTUALIZACEDLUHU" CHAR(1 BYTE) DEFAULT '0', 
	"DT_DATUMSPLATNOST" DATE, 
	"C_TYPUROKSAZBA" CHAR(1 BYTE), 
	"ND_UROKPRISPLATNOSTI" NUMBER(8,5), 
	"C_KOMERCNIUCEL" CHAR(1 BYTE) DEFAULT '0', 
	"C_ODVOLATELNEZAJISTENI" CHAR(1 BYTE) DEFAULT '0', 
	"DT_DATUMFLOATNEXT" DATE, 
	"ID_PARENT" NUMBER(*,0), 
	"C_POZICEUCET" CHAR(1 BYTE), 
	"PC_ID" CHAR(20 BYTE), 
	"TMP_P1" VARCHAR2(11 BYTE), 
	"TMP_P2" VARCHAR2(10 BYTE), 
	"S_POPIS" VARCHAR2(10 BYTE)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed TMP_DOKLADAGREGTYPNASTROJ.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_DOKLADNASTROJ.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TMP_DOKLADNASTROJ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TMP_DOKLADNASTROJ
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."TMP_DOKLADNASTROJ" 
   (	"ID" NUMBER(*,0), 
	"ID_KTGTYPNASTROJE" NUMBER(*,0), 
	"C_TYPPORTFOLIO" CHAR(1 BYTE), 
	"ID_KTGSPOLECNOSTPROTISTRANA" NUMBER(*,0), 
	"S_PRODUKTUCET" VARCHAR2(21 BYTE), 
	"ID_KTGTYPOPERACE" NUMBER(*,0), 
	"C_TYPVYKAZ" CHAR(1 BYTE), 
	"S_CASROZLISENIMENA" VARCHAR2(3 BYTE), 
	"C_DENOMINACE" CHAR(1 BYTE) DEFAULT '0', 
	"C_RESTRUKTUALIZACEDLUHU" CHAR(1 BYTE) DEFAULT '0', 
	"DT_DATUMSPLATNOST" DATE, 
	"C_TYPUROKSAZBA" CHAR(1 BYTE), 
	"ND_UROKPRISPLATNOSTI" NUMBER(8,5), 
	"C_KOMERCNIUCEL" CHAR(1 BYTE) DEFAULT '0', 
	"C_ODVOLATELNEZAJISTENI" CHAR(1 BYTE) DEFAULT '0', 
	"DT_DATUMFLOATNEXT" DATE, 
	"ID_PARENT" NUMBER(*,0), 
	"C_POZICEUCET" CHAR(1 BYTE), 
	"PC_ID" CHAR(20 BYTE), 
	"TMP_P1" VARCHAR2(21 BYTE), 
	"TMP_P2" VARCHAR2(21 BYTE), 
	"S_POPIS" VARCHAR2(10 BYTE)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed TMP_DOKLADNASTROJ.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_DOKLADNASTROJCP.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TMP_DOKLADNASTROJCP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TMP_DOKLADNASTROJCP
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."TMP_DOKLADNASTROJCP" 
   (	"ID" NUMBER(*,0), 
	"ID_KTGTYPNASTROJE" NUMBER(*,0), 
	"ID_KTGSPOLECNOSTPROTISTRANA" NUMBER(*,0), 
	"ID_KTGTYPOPERACE" NUMBER(*,0), 
	"ID_KTGCENNYPAPIR" NUMBER(*,0), 
	"ID_KTGCENNYPAPIR2" NUMBER(*,0), 
	"C_TYPPORTFOLIO" CHAR(1 BYTE), 
	"C_POZICE" CHAR(1 BYTE), 
	"NL_POCETKUSUCP" NUMBER(*,0), 
	"DT_DATUMOBCHOD" DATE, 
	"DT_DATUMVYPORADANI" DATE, 
	"DT_SPLATNOST" DATE, 
	"DT_SPLATNOST_2" DATE, 
	"C_DENOMINACE" CHAR(1 BYTE) DEFAULT '0', 
	"C_RESTRUKTUALIZACEDLUHU" CHAR(1 BYTE) DEFAULT '0', 
	"C_SPLACENAPREMIE" CHAR(1 BYTE) DEFAULT '0', 
	"ND_PORIZOVACICENAKUSMENA" NUMBER(18,2), 
	"ND_PORIZOVACICENAKUSLOCAL" NUMBER(18,2), 
	"ND_NOMINALHODNOTAMENA" NUMBER(18,2), 
	"ND_REALNAHODNOTALOCAL" NUMBER(18,2), 
	"ND_TRZNIHODNOTAMENA" NUMBER(18,2), 
	"ND_TRZNIHODNOTALOCAL" NUMBER(18,2), 
	"ND_OBJEMZAVAZKULOCAL" NUMBER(18,2), 
	"ND_CELKEMREALNAHODNOTALOCAL" NUMBER(18,2), 
	"NL_POCETKUSUCPVYPORADANI" NUMBER(*,0), 
	"ND_CASTKACZK" NUMBER(18,2), 
	"ND_POPLATEKVYPORADANILOCAL" NUMBER(18,2), 
	"ND_CENAKUSSPLATNOST" NUMBER(18,2), 
	"ND_CENAKUSSPLATNOST_2" NUMBER(18,2), 
	"ND_STRIKEOPCE" NUMBER(18,2), 
	"ND_DELTAOPCE" NUMBER(18,2), 
	"ND_HODNOTAOPCE" NUMBER(18,2), 
	"ND_HODNOTAPREMIA" NUMBER(18,2), 
	"ND_UROKSPLATNOST" NUMBER(18,2), 
	"ND_GAMAOPCE" NUMBER(18,2), 
	"ND_VEGAOPCE" NUMBER(18,2), 
	"C_TYPVYKAZ" CHAR(1 BYTE), 
	"C_TYPVYKAZ_2" CHAR(1 BYTE), 
	"ID_KTGPODKLADNASTOJE" NUMBER(*,0), 
	"ID_KTGSPOLECNOSTEMITENT" NUMBER(*,0), 
	"C_VYPLACENIRKC" CHAR(1 BYTE) DEFAULT '1', 
	"C_POTVRZENIVL" CHAR(1 BYTE) DEFAULT '0', 
	"C_TYPUROKSAZBA" CHAR(1 BYTE), 
	"C_TYPUROKSAZBA_2" CHAR(1 BYTE), 
	"S_REFERENCNIUROKOVA" VARCHAR2(20 BYTE), 
	"ND_KOREKCEUROKOVESAZBY" NUMBER(8,5), 
	"DT_DATUMFLOATNEXT" DATE, 
	"DT_DATUMFLOATNEXT_2" DATE, 
	"ND_UROKOVASAZBA" NUMBER(8,5), 
	"ND_UROKOVASAZBA_2" NUMBER(8,5), 
	"ND_VOLATILITAPODKLADU" NUMBER(18,2), 
	"NL_POCETUROKOBDOBI" NUMBER(*,0), 
	"NL_POCETKONECUROKOBDOBI" NUMBER(*,0), 
	"ID_KTGTERMINSAZBY" NUMBER(*,0), 
	"S_PRODUKTUCET" VARCHAR2(21 BYTE), 
	"ID_PARENT" NUMBER(*,0), 
	"C_POZICEUCET" CHAR(1 BYTE), 
	"S_POPIS" VARCHAR2(10 BYTE), 
	"PC_ID" CHAR(20 BYTE), 
	"TMP_P1" VARCHAR2(21 BYTE), 
	"TMP_P2" VARCHAR2(21 BYTE), 
	"C_BURZAOBCHODOVATELNOST" CHAR(1 BYTE)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed TMP_DOKLADNASTROJCP.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_DOKLADNASTROJ_CASTKY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TMP_DOKLADNASTROJ_CASTKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TMP_DOKLADNASTROJ_CASTKY
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."TMP_DOKLADNASTROJ_CASTKY" 
   (	"ID" NUMBER(*,0), 
	"ID_NASTROJ" NUMBER(*,0), 
	"ID_TYP" NUMBER(*,0), 
	"C_NOHA" CHAR(1 BYTE), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"ND_CASTKAMENA" NUMBER(18,2), 
	"ND_CASTKALOCAL" NUMBER(18,2), 
	"NL_RADEK" NUMBER(*,0), 
	"ID_NASTROJCP" NUMBER(*,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed TMP_DOKLADNASTROJ_CASTKY.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_EBO_SPOL_PILOT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TMP_EBO_SPOL_PILOT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TMP_EBO_SPOL_PILOT
--------------------------------------------------------

  CREATE TABLE "DB_JT"."TMP_EBO_SPOL_PILOT" 
   (	"ID_KTGUCETNISPOLECNOST" NUMBER(38,0), 
	"ID_KTGSPOLECNOST" NUMBER(38,0), 
	"S_NAZEV" VARCHAR2(256 BYTE), 
	"S_POZNAMKA" VARCHAR2(2000 BYTE), 
	"DT_ZMENY" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed TMP_EBO_SPOL_PILOT.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_EXCEPTIONS.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TMP_EXCEPTIONS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TMP_EXCEPTIONS
--------------------------------------------------------

  CREATE TABLE "DB_JT"."TMP_EXCEPTIONS" 
   (	"ROW_ID" ROWID, 
	"OWNER" VARCHAR2(30 BYTE), 
	"TABLE_NAME" VARCHAR2(30 BYTE), 
	"CONSTRAINT" VARCHAR2(30 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed TMP_EXCEPTIONS.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_ID.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TMP_ID.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TMP_ID
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."TMP_ID" 
   (	"ID" NUMBER(*,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed TMP_ID.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_IFRSDOKLADPRAVIDLOCASTKA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TMP_IFRSDOKLADPRAVIDLOCASTKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TMP_IFRSDOKLADPRAVIDLOCASTKA
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."TMP_IFRSDOKLADPRAVIDLOCASTKA" 
   (	"ID_DOKLAD" NUMBER(*,0), 
	"ID_KTGIFRSPRAVIDLO" NUMBER(*,0), 
	"PORADIPRAVIDLO" NUMBER(*,0), 
	"PORADIPRAVIDLODETAIL" NUMBER(*,0), 
	"ND_CASTKA" NUMBER(15,2)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed TMP_IFRSDOKLADPRAVIDLOCASTKA.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_KP_DOKLADUVEROVAPOZICE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TMP_KP_DOKLADUVEROVAPOZICE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TMP_KP_DOKLADUVEROVAPOZICE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."TMP_KP_DOKLADUVEROVAPOZICE" 
   (	"S_UCET" VARCHAR2(15 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKACNB" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"ID_DOKLAD" NUMBER(*,0), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER, 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"S_UCETUNIF" VARCHAR2(15 BYTE), 
	"ID_UNIFPROTI" NUMBER(*,0), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"C_BANKA" CHAR(1 BYTE), 
	"ND_CISTAANGAZOVANOST" NUMBER(18,2)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed TMP_KP_DOKLADUVEROVAPOZICE.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_KP_DOKLADUVEROVAPOZICE_ESC.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TMP_KP_DOKLADUVEROVAPOZICE_ESC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TMP_KP_DOKLADUVEROVAPOZICE_ESC
--------------------------------------------------------

  CREATE TABLE "DB_JT"."TMP_KP_DOKLADUVEROVAPOZICE_ESC" 
   (	"S_UCET" VARCHAR2(15 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKACNB" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"ID_DOKLAD" NUMBER(*,0), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER, 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"S_UCETUNIF" VARCHAR2(15 BYTE), 
	"ID_UNIFPROTI" NUMBER(*,0), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"C_BANKA" CHAR(1 BYTE), 
	"ND_CISTAANGAZOVANOST" NUMBER(18,2)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed TMP_KP_DOKLADUVEROVAPOZICE_ESC.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_KURZLISTEK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TMP_KURZLISTEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TMP_KURZLISTEK
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."TMP_KURZLISTEK" 
   (	"DT_DATUM" DATE, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_KURZ" NUMBER(10,6)
   ) ON COMMIT DELETE ROWS ;


PROMPT Completed TMP_KURZLISTEK.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_KURZROZDIL.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TMP_KURZROZDIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TMP_KURZROZDIL
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."TMP_KURZROZDIL" 
   (	"ID_KTGUCETNISPOLECNOSTFROM" NUMBER(*,0), 
	"ID_KTGUCETNISPOLECNOSTTO" NUMBER(*,0), 
	"NL_LIST" NUMBER(*,0), 
	"NL_RADEK" NUMBER(*,0), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKA" NUMBER(15,2), 
	"ID_PAR" NUMBER(*,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed TMP_KURZROZDIL.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_NASTROJDATA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TMP_NASTROJDATA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TMP_NASTROJDATA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."TMP_NASTROJDATA" 
   (	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_SUMAMENA" NUMBER(18,2), 
	"ND_SUMALOCAL" NUMBER(18,2), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"C_TYPVYKAZ" CHAR(1 BYTE), 
	"ID_EXTSYSTEM2" VARCHAR2(21 BYTE), 
	"NL_SLOUPEC" NUMBER(*,0), 
	"C_POZICEUCET" CHAR(1 BYTE), 
	"ID_DOKLADAGREGTYPNASTROJ" NUMBER(*,0), 
	"ID_KTGCENNYPAPIR" NUMBER(*,0), 
	"ID_DOKLADPOLOZKA" NUMBER(*,0), 
	"ID_KTGTYPNASTROJE" NUMBER(*,0), 
	"C_POUZITO" CHAR(1 BYTE) DEFAULT '0', 
	"NL_PORADILIST" NUMBER(*,0), 
	"NL_RADEK" NUMBER(*,0), 
	"ID_KTGSUBKONSOLIDACE" NUMBER(*,0), 
	"DT_DATUMSPLATNOST" DATE, 
	"PC_ID" CHAR(20 BYTE), 
	"ID_EXTSYSTEM3" VARCHAR2(21 BYTE), 
	"C_KOMERCNIUCEL" CHAR(1 BYTE), 
	"ID_KTGTYPOPERACE" NUMBER(*,0), 
	"PC_PROD_KIND" CHAR(3 BYTE), 
	"PC_PROD_TYPE" CHAR(3 BYTE), 
	"C_TYPPORTFOLIO" CHAR(1 BYTE) DEFAULT 'B', 
	"DT_DATUMOBCHOD" DATE, 
	"ID" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 0 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed TMP_NASTROJDATA.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_NASTROJDATA_D.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TMP_NASTROJDATA_D.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TMP_NASTROJDATA_D
--------------------------------------------------------

  CREATE TABLE "DB_JT"."TMP_NASTROJDATA_D" 
   (	"ID" NUMBER(*,0), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_SUMAMENA" NUMBER(18,2), 
	"ND_SUMALOCAL" NUMBER(18,2), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"ID_EXTSYSTEM2" VARCHAR2(11 BYTE), 
	"ID_EXTSYSTEM3" VARCHAR2(11 BYTE), 
	"ID_KTGCENNYPAPIR" NUMBER(*,0), 
	"ID_DOKLADPOLOZKA" NUMBER(*,0), 
	"ID_KTGTYPNASTROJE" NUMBER(*,0), 
	"PC_ID" CHAR(20 BYTE), 
	"PC_PROD_KIND" CHAR(3 BYTE), 
	"PC_PROD_TYPE" CHAR(3 BYTE), 
	"C_POZICEUCET" CHAR(1 BYTE), 
	"PC_PROD_TYPE_ORIG" CHAR(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 0 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed TMP_NASTROJDATA_D.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_NASTROJZPRACOVANI.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TMP_NASTROJZPRACOVANI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TMP_NASTROJZPRACOVANI
--------------------------------------------------------

  CREATE TABLE "DB_JT"."TMP_NASTROJZPRACOVANI" 
   (	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_SUMAMENA" NUMBER(18,2), 
	"ND_SUMALOCAL" NUMBER(18,2), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"C_TYPVYKAZ" CHAR(1 BYTE), 
	"ID_EXTSYSTEM2" VARCHAR2(11 BYTE), 
	"NL_SLOUPEC" NUMBER(*,0), 
	"C_POZICEUCET" CHAR(1 BYTE), 
	"ID_DOKLADAGREGTYPNASTROJ" NUMBER(*,0), 
	"ID_KTGCENNYPAPIR" NUMBER(*,0), 
	"ID_DOKLADPOLOZKA" NUMBER(*,0), 
	"ID_KTGTYPNASTROJE" NUMBER(*,0), 
	"C_POUZITO" CHAR(1 BYTE) DEFAULT '0', 
	"NL_PORADILIST" NUMBER(*,0), 
	"NL_RADEK" NUMBER(*,0), 
	"ID_KTGSUBKONSOLIDACE" NUMBER(*,0), 
	"DT_DATUMSPLATNOST" DATE, 
	"PC_ID" CHAR(20 BYTE), 
	"ID_EXTSYSTEM3" VARCHAR2(11 BYTE), 
	"C_KOMERCNIUCEL" CHAR(1 BYTE), 
	"ID_KTGTYPOPERACE" NUMBER(*,0), 
	"PC_PROD_KIND" CHAR(3 BYTE), 
	"PC_PROD_TYPE" CHAR(3 BYTE), 
	"C_TYPPORTFOLIO" CHAR(1 BYTE) DEFAULT 'B', 
	"DT_DATUMOBCHOD" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed TMP_NASTROJZPRACOVANI.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_NASTROJZPRACOVANI_D.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TMP_NASTROJZPRACOVANI_D.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TMP_NASTROJZPRACOVANI_D
--------------------------------------------------------

  CREATE TABLE "DB_JT"."TMP_NASTROJZPRACOVANI_D" 
   (	"ID" NUMBER(*,0), 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_SUMAMENA" NUMBER(18,2), 
	"ND_SUMALOCAL" NUMBER(18,2), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"ID_EXTSYSTEM2" VARCHAR2(11 BYTE), 
	"ID_EXTSYSTEM3" VARCHAR2(11 BYTE), 
	"ID_KTGCENNYPAPIR" NUMBER(*,0), 
	"ID_DOKLADPOLOZKA" NUMBER(*,0), 
	"ID_KTGTYPNASTROJE" NUMBER(*,0), 
	"PC_ID" CHAR(20 BYTE), 
	"PC_PROD_KIND" CHAR(3 BYTE), 
	"PC_PROD_TYPE" CHAR(3 BYTE), 
	"C_POZICEUCET" CHAR(1 BYTE), 
	"PC_PROD_TYPE_ORIG" CHAR(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed TMP_NASTROJZPRACOVANI_D.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_OPERACNIRIZIKO.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TMP_OPERACNIRIZIKO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TMP_OPERACNIRIZIKO
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."TMP_OPERACNIRIZIKO" 
   (	"ID_DOKLAD" NUMBER(*,0), 
	"S_UCET" VARCHAR2(15 BYTE), 
	"ND_CASTKA" NUMBER(15,2), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"C_INDICATOR_PC" CHAR(1 BYTE), 
	"ID_BUSINESSLINIE" NUMBER(*,0), 
	"ID_BUSINESSLINIEORG" NUMBER(*,0), 
	"C_TYP" CHAR(1 BYTE) DEFAULT 'N' -- default N normalni, 'C' corporatni implicitni, kdyz nelze urcit id_businessLinie a pouziji implicitni 'C' c_indicator_pc

   ) ON COMMIT DELETE ROWS ;


PROMPT Completed TMP_OPERACNIRIZIKO.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_OPERACNIRIZIKODETAIL.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TMP_OPERACNIRIZIKODETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TMP_OPERACNIRIZIKODETAIL
--------------------------------------------------------

  CREATE TABLE "DB_JT"."TMP_OPERACNIRIZIKODETAIL" 
   (	"S_UCET" VARCHAR2(15 BYTE), 
	"ND_CASTKA" NUMBER(15,2), 
	"ID_KTGSPOLECNOST" NUMBER(*,0), 
	"C_INDICATOR_PC" CHAR(1 BYTE), 
	"ID_BUSINESSLINIE" NUMBER(*,0), 
	"ID_ZDROJDAT" NUMBER(*,0), 
	"ID_BUSINESSLINIEORG" NUMBER(*,0), 
	"C_TYP" CHAR(1 BYTE) DEFAULT 'N' -- default N normalni, 'C' corporatni implicitni, kdyz nelze urcit id_businessLinie a pouziji implicitni 'C' c_indicator_pc

   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed TMP_OPERACNIRIZIKODETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_Q_LOAN_CONTRACT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TMP_Q_LOAN_CONTRACT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TMP_Q_LOAN_CONTRACT
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."TMP_Q_LOAN_CONTRACT" 
   (	"FK_PRD_CONTRACT" CHAR(20 BYTE), 
	"INTERNAL_COMMENTS" CHAR(70 BYTE)
   ) ON COMMIT DELETE ROWS ;


PROMPT Completed TMP_Q_LOAN_CONTRACT.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_SKUPINAVAZBY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TMP_SKUPINAVAZBY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TMP_SKUPINAVAZBY
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."TMP_SKUPINAVAZBY" 
   (	"ID_KTGUCETNISPOLECNOST" NUMBER(*,0), 
	"DT_PLATNOSTOD" DATE, 
	"DT_PLATNOSTDO" DATE, 
	"ID_CISSUBTYPCLENSTVI" NUMBER(*,0), 
	"C_PROPISUJVAZBY" CHAR(1 BYTE), 
	"ID_KTGSUBKONSOLIDACE" NUMBER(*,0), 
	"C_SMERCLENSTVIOD" CHAR(1 BYTE), 
	"C_SMERDETAILCLENSTVIOD" CHAR(1 BYTE), 
	"C_SMERCLENSTVIDO" CHAR(1 BYTE), 
	"C_SMERDETAILCLENSTVIDO" CHAR(1 BYTE)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed TMP_SKUPINAVAZBY.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_SSRS_UVEROVKA_31_12_2017.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TMP_SSRS_UVEROVKA_31_12_2017.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TMP_SSRS_UVEROVKA_31_12_2017
--------------------------------------------------------

  CREATE TABLE "DB_JT"."TMP_SSRS_UVEROVKA_31_12_2017" 
   (	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"NAZEV_SPOLECNOST" VARCHAR2(4000 BYTE), 
	"S_UCETUNIF" VARCHAR2(15 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_CASTKACNB" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"ND_CISTAANGAZOVANOST" NUMBER, 
	"C_BANKA" VARCHAR2(4000 BYTE), 
	"S_UCET" VARCHAR2(15 BYTE), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"GROUP_CODE_ZDROJ" VARCHAR2(5 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed TMP_SSRS_UVEROVKA_31_12_2017.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_SUBVAZBY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TMP_SUBVAZBY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TMP_SUBVAZBY
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."TMP_SUBVAZBY" 
   (	"ID_1" NUMBER(*,0), 
	"ID_2" NUMBER(*,0)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed TMP_SUBVAZBY.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_TAB_SSRS_UVEROVKA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TMP_TAB_SSRS_UVEROVKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TMP_TAB_SSRS_UVEROVKA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."TMP_TAB_SSRS_UVEROVKA" 
   (	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"NAZEV_SPOLECNOST" VARCHAR2(4000 BYTE), 
	"S_UCETUNIF" VARCHAR2(15 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_CASTKACNB" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"ND_CISTAANGAZOVANOST" NUMBER, 
	"C_BANKA" VARCHAR2(4000 BYTE), 
	"S_UCET" VARCHAR2(15 BYTE), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"GROUP_CODE_ZDROJ" VARCHAR2(5 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed TMP_TAB_SSRS_UVEROVKA.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_UZIVATELIA_SPOLOCNOST.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TMP_UZIVATELIA_SPOLOCNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TMP_UZIVATELIA_SPOLOCNOST
--------------------------------------------------------

  CREATE TABLE "DB_JT"."TMP_UZIVATELIA_SPOLOCNOST" 
   (	"USERID" VARCHAR2(50 BYTE), 
	"KIS_JMENO" VARCHAR2(500 BYTE), 
	"INTRANET_JMENO" VARCHAR2(500 BYTE), 
	"INTRANET_SPOLOCNOST" VARCHAR2(500 BYTE), 
	"INTRANET_STAV" VARCHAR2(250 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed TMP_UZIVATELIA_SPOLOCNOST.sql
PROMPT


-- ============================================================================
-- Deploy: TT_ROLE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TT_ROLE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TT_ROLE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."TT_ROLE" 
   (	"ROLE_ID" NUMBER, 
	"ROLE_NAME" NVARCHAR2(50), 
	"DESCRIPTION" NCLOB
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS 
 LOB ("DESCRIPTION") STORE AS BASICFILE (
  TABLESPACE USERS ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  NOCACHE LOGGING 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) ;


PROMPT Completed TT_ROLE.sql
PROMPT


-- ============================================================================
-- Deploy: TT_SL_BASE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TT_SL_BASE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TT_SL_BASE
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."TT_SL_BASE" 
   (	"ID" NUMBER, 
	"SCHV_MNOU" NUMBER DEFAULT 0, 
	"SCHV_ZASTUP" NUMBER DEFAULT 0, 
	"SCHV_OSTATNI" NUMBER DEFAULT 0, 
	"SCHV_OOH_P" NUMBER DEFAULT 0, 
	"SCHV_TEXT" NVARCHAR2(2000), 
	"DOC_ID_SRC" NVARCHAR2(10)
   ) ON COMMIT DELETE ROWS ;


PROMPT Completed TT_SL_BASE.sql
PROMPT


-- ============================================================================
-- Deploy: TT_SL_DOCUMENT.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TT_SL_DOCUMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TT_SL_DOCUMENT
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."TT_SL_DOCUMENT" 
   (	"ID" NUMBER, 
	"ID_CISDOKUMENT" NUMBER, 
	"ID_KTGUCETNISPOLECNOST" NUMBER, 
	"SPOLECNOST" VARCHAR2(512 BYTE), 
	"ID_TYPTRANSAKCE" NUMBER, 
	"TYPTRAN" VARCHAR2(512 BYTE), 
	"ID_TTDEVELOPER" NUMBER(38,0), 
	"C_TYPIZOVANATRAN" CHAR(1 BYTE), 
	"DT_TYPIZOVANAOD" DATE, 
	"DT_TYPIZOVANADO" DATE, 
	"DT_DATUMZADANI" DATE, 
	"ID_ZADAVATEL" NUMBER, 
	"ZADAVATEL" VARCHAR2(512 BYTE), 
	"S_POPIS" VARCHAR2(512 BYTE), 
	"S_MENA" VARCHAR2(10 BYTE), 
	"S_PISEMNE" VARCHAR2(512 BYTE), 
	"DT_DATUMZAUCTOVANI" DATE, 
	"PROTISTRANA" VARCHAR2(512 BYTE), 
	"S_CISLODOKLADU" VARCHAR2(20 BYTE), 
	"DT_DATUMSPLATNOSTI" DATE, 
	"DT_POZADDATUMUHRADY" DATE, 
	"DT_REALDATUMUHRADY" DATE, 
	"SUMARADKU" NUMBER, 
	"ID_BUDGET" NUMBER(38,0), 
	"BUDGET_NAZEV" VARCHAR2(512 BYTE), 
	"CLASSNAME" VARCHAR2(20 BYTE), 
	"SCHV_MNOU" NUMBER(*,0), 
	"SCHV_ZASTUP" NUMBER(*,0), 
	"SCHV_OSTATNI" NUMBER(*,0), 
	"SCHV_OOH_P" NUMBER(*,0), 
	"SCHV_TEXT" NVARCHAR2(2000)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed TT_SL_DOCUMENT.sql
PROMPT


-- ============================================================================
-- Deploy: TT_SL_ID.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TT_SL_ID.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TT_SL_ID
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."TT_SL_ID" 
   (	"ID" NUMBER, 
	"FLAG" VARCHAR2(10 BYTE)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed TT_SL_ID.sql
PROMPT


-- ============================================================================
-- Deploy: TT_SL_ID_OSOBA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TT_SL_ID_OSOBA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TT_SL_ID_OSOBA
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."TT_SL_ID_OSOBA" 
   (	"DOC_ID" NUMBER, 
	"OSOBA_ID" NUMBER, 
	"FLAG" VARCHAR2(10 BYTE), 
	"DOC_ID_SRC" NVARCHAR2(10)
   ) ON COMMIT DELETE ROWS ;


PROMPT Completed TT_SL_ID_OSOBA.sql
PROMPT


-- ============================================================================
-- Deploy: TT_SL_OSOBA_DIST.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TT_SL_OSOBA_DIST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TT_SL_OSOBA_DIST
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."TT_SL_OSOBA_DIST" 
   (	"OSOBA_ID" NUMBER, 
	"MENO" VARCHAR2(255 BYTE), 
	"EMAIL" VARCHAR2(255 BYTE), 
	"USERID" VARCHAR2(25 BYTE), 
	"C_INDIKATOR" VARCHAR2(10 BYTE)
   ) ON COMMIT DELETE ROWS ;


PROMPT Completed TT_SL_OSOBA_DIST.sql
PROMPT


-- ============================================================================
-- Deploy: TT_USER_ROLE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying TT_USER_ROLE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table TT_USER_ROLE
--------------------------------------------------------

  CREATE GLOBAL TEMPORARY TABLE "DB_JT"."TT_USER_ROLE" 
   (	"APPLICATION_USER_ID" NUMBER, 
	"ROLE_ID" NUMBER, 
	"ROLE_NAME" NVARCHAR2(50), 
	"USERID" NVARCHAR2(50), 
	"X" NVARCHAR2(1)
   ) ON COMMIT PRESERVE ROWS ;


PROMPT Completed TT_USER_ROLE.sql
PROMPT


-- ============================================================================
-- Deploy: UA_SSSR_21_12_2021.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying UA_SSSR_21_12_2021.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table UA_SSSR_21_12_2021
--------------------------------------------------------

  CREATE TABLE "DB_JT"."UA_SSSR_21_12_2021" 
   (	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"NAZEV_SPOLECNOST" VARCHAR2(4000 BYTE), 
	"S_UCETUNIF" VARCHAR2(15 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_CASTKACNB" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"ND_CISTAANGAZOVANOST" NUMBER, 
	"C_BANKA" VARCHAR2(4000 BYTE), 
	"S_UCET" VARCHAR2(15 BYTE), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"GROUP_CODE_ZDROJ" VARCHAR2(5 BYTE), 
	"S_TYP_OBEZRETNOST_PORTFOLIA" VARCHAR2(3 BYTE), 
	"S_COUNTRY" VARCHAR2(3 BYTE), 
	"S_ESA" VARCHAR2(25 CHAR), 
	"S_NACE" VARCHAR2(25 CHAR), 
	"S_LEI" VARCHAR2(250 CHAR), 
	"S_SHADOW_BANK" VARCHAR2(1 BYTE), 
	"S_TYPE_OF_EXPOSURE" VARCHAR2(10 BYTE), 
	"S_COLL_REG_CODE" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed UA_SSSR_21_12_2021.sql
PROMPT


-- ============================================================================
-- Deploy: UA_SSSR_28_12_2021.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying UA_SSSR_28_12_2021.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table UA_SSSR_28_12_2021
--------------------------------------------------------

  CREATE TABLE "DB_JT"."UA_SSSR_28_12_2021" 
   (	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"NAZEV_SPOLECNOST" VARCHAR2(4000 BYTE), 
	"S_UCETUNIF" VARCHAR2(15 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_CASTKACNB" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"ND_CISTAANGAZOVANOST" NUMBER, 
	"C_BANKA" VARCHAR2(4000 BYTE), 
	"S_UCET" VARCHAR2(15 BYTE), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"GROUP_CODE_ZDROJ" VARCHAR2(5 BYTE), 
	"S_TYP_OBEZRETNOST_PORTFOLIA" VARCHAR2(3 BYTE), 
	"S_COUNTRY" VARCHAR2(3 BYTE), 
	"S_ESA" VARCHAR2(25 CHAR), 
	"S_NACE" VARCHAR2(25 CHAR), 
	"S_LEI" VARCHAR2(250 CHAR), 
	"S_SHADOW_BANK" VARCHAR2(1 BYTE), 
	"S_TYPE_OF_EXPOSURE" VARCHAR2(10 BYTE), 
	"S_COLL_REG_CODE" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed UA_SSSR_28_12_2021.sql
PROMPT


-- ============================================================================
-- Deploy: UA_SSSR_30_12_2021.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying UA_SSSR_30_12_2021.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table UA_SSSR_30_12_2021
--------------------------------------------------------

  CREATE TABLE "DB_JT"."UA_SSSR_30_12_2021" 
   (	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"NAZEV_SPOLECNOST" VARCHAR2(4000 BYTE), 
	"S_UCETUNIF" VARCHAR2(15 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_CASTKACNB" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"ND_CISTAANGAZOVANOST" NUMBER, 
	"C_BANKA" VARCHAR2(4000 BYTE), 
	"S_UCET" VARCHAR2(15 BYTE), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"GROUP_CODE_ZDROJ" VARCHAR2(5 BYTE), 
	"S_TYP_OBEZRETNOST_PORTFOLIA" VARCHAR2(3 BYTE), 
	"S_COUNTRY" VARCHAR2(3 BYTE), 
	"S_ESA" VARCHAR2(25 CHAR), 
	"S_NACE" VARCHAR2(25 CHAR), 
	"S_LEI" VARCHAR2(250 CHAR), 
	"S_SHADOW_BANK" VARCHAR2(1 BYTE), 
	"S_TYPE_OF_EXPOSURE" VARCHAR2(10 BYTE), 
	"S_COLL_REG_CODE" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed UA_SSSR_30_12_2021.sql
PROMPT


-- ============================================================================
-- Deploy: USER_ROLE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying USER_ROLE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table USER_ROLE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."USER_ROLE" 
   (	"APPLICATION_USER_ID" NUMBER, 
	"ROLE_ID" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed USER_ROLE.sql
PROMPT


-- ============================================================================
-- Deploy: VABA24ESS_VW_SSRS_UVEROVKA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VABA24ESS_VW_SSRS_UVEROVKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VABA24ESS_VW_SSRS_UVEROVKA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VABA24ESS_VW_SSRS_UVEROVKA" 
   (	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"NAZEV_SPOLECNOST" VARCHAR2(4000 BYTE), 
	"S_UCETUNIF" VARCHAR2(15 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_CASTKACNB" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"ND_CISTAANGAZOVANOST" NUMBER, 
	"C_BANKA" VARCHAR2(4000 BYTE), 
	"S_UCET" VARCHAR2(15 BYTE), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"GROUP_CODE_ZDROJ" VARCHAR2(5 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VABA24ESS_VW_SSRS_UVEROVKA.sql
PROMPT


-- ============================================================================
-- Deploy: VABA24_VW_SSRS_UVEROVKA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VABA24_VW_SSRS_UVEROVKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VABA24_VW_SSRS_UVEROVKA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VABA24_VW_SSRS_UVEROVKA" 
   (	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"NAZEV_SPOLECNOST" VARCHAR2(4000 BYTE), 
	"S_UCETUNIF" VARCHAR2(15 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_CASTKACNB" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"ND_CISTAANGAZOVANOST" NUMBER, 
	"C_BANKA" VARCHAR2(4000 BYTE), 
	"S_UCET" VARCHAR2(15 BYTE), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"GROUP_CODE_ZDROJ" VARCHAR2(5 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VABA24_VW_SSRS_UVEROVKA.sql
PROMPT


-- ============================================================================
-- Deploy: VABA2_VW_SSRS_UVEROVKA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VABA2_VW_SSRS_UVEROVKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VABA2_VW_SSRS_UVEROVKA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VABA2_VW_SSRS_UVEROVKA" 
   (	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"NAZEV_SPOLECNOST" VARCHAR2(4000 BYTE), 
	"S_UCETUNIF" VARCHAR2(15 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_CASTKACNB" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"ND_CISTAANGAZOVANOST" NUMBER, 
	"C_BANKA" VARCHAR2(4000 BYTE), 
	"S_UCET" VARCHAR2(15 BYTE), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"GROUP_CODE_ZDROJ" VARCHAR2(5 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VABA2_VW_SSRS_UVEROVKA.sql
PROMPT


-- ============================================================================
-- Deploy: VABA3_DOKLADUVEROVAPOZICE_P0.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VABA3_DOKLADUVEROVAPOZICE_P0.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VABA3_DOKLADUVEROVAPOZICE_P0
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VABA3_DOKLADUVEROVAPOZICE_P0" 
   (	"S_UCET" VARCHAR2(15 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKACNB" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"ID_DOKLAD" NUMBER(*,0), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"S_UCETORIGINAL" VARCHAR2(15 BYTE), 
	"ID_UNIFPROTI" NUMBER(*,0), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"C_BANKA" CHAR(1 BYTE), 
	"ND_CISTAANGAZOVANOST" NUMBER(18,2)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VABA3_DOKLADUVEROVAPOZICE_P0.sql
PROMPT


-- ============================================================================
-- Deploy: VABA3_DOKLADUVEROVAPOZICE_P1.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VABA3_DOKLADUVEROVAPOZICE_P1.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VABA3_DOKLADUVEROVAPOZICE_P1
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VABA3_DOKLADUVEROVAPOZICE_P1" 
   (	"S_UCET" VARCHAR2(15 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKACNB" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"ID_DOKLAD" NUMBER(*,0), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"S_UCETORIGINAL" VARCHAR2(15 BYTE), 
	"ID_UNIFPROTI" NUMBER(*,0), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"C_BANKA" CHAR(1 BYTE), 
	"ND_CISTAANGAZOVANOST" NUMBER(18,2)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VABA3_DOKLADUVEROVAPOZICE_P1.sql
PROMPT


-- ============================================================================
-- Deploy: VABA3_DOKLADUVEROVAPOZICE_P2.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VABA3_DOKLADUVEROVAPOZICE_P2.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VABA3_DOKLADUVEROVAPOZICE_P2
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VABA3_DOKLADUVEROVAPOZICE_P2" 
   (	"S_UCET" VARCHAR2(15 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKACNB" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"ID_DOKLAD" NUMBER(*,0), 
	"S_LISTGROUP" CHAR(1 BYTE), 
	"S_LISTGROUPCODE" CHAR(1 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"S_UCETORIGINAL" VARCHAR2(15 BYTE), 
	"ID_UNIFPROTI" NUMBER(*,0), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"C_BANKA" CHAR(1 BYTE), 
	"ND_CISTAANGAZOVANOST" NUMBER(18,2)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VABA3_DOKLADUVEROVAPOZICE_P2.sql
PROMPT


-- ============================================================================
-- Deploy: VABA3_VW_SSRS_UVEROVKA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VABA3_VW_SSRS_UVEROVKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VABA3_VW_SSRS_UVEROVKA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VABA3_VW_SSRS_UVEROVKA" 
   (	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"NAZEV_SPOLECNOST" VARCHAR2(4000 BYTE), 
	"S_UCETUNIF" VARCHAR2(15 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_CASTKACNB" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"ND_CISTAANGAZOVANOST" NUMBER, 
	"C_BANKA" VARCHAR2(4000 BYTE), 
	"S_UCET" VARCHAR2(15 BYTE), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"GROUP_CODE_ZDROJ" VARCHAR2(5 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VABA3_VW_SSRS_UVEROVKA.sql
PROMPT


-- ============================================================================
-- Deploy: VABA_DOKLADUVEROVAPOZICE_P0.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VABA_DOKLADUVEROVAPOZICE_P0.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VABA_DOKLADUVEROVAPOZICE_P0
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VABA_DOKLADUVEROVAPOZICE_P0" 
   (	"S_UCET" VARCHAR2(15 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKACNB" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"ID_DOKLAD" NUMBER(*,0), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"S_UCETORIGINAL" VARCHAR2(15 BYTE), 
	"ID_UNIFPROTI" NUMBER(*,0), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"C_BANKA" CHAR(1 BYTE), 
	"ND_CISTAANGAZOVANOST" NUMBER(18,2)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VABA_DOKLADUVEROVAPOZICE_P0.sql
PROMPT


-- ============================================================================
-- Deploy: VABA_DOKLADUVEROVAPOZICE_P1.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VABA_DOKLADUVEROVAPOZICE_P1.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VABA_DOKLADUVEROVAPOZICE_P1
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VABA_DOKLADUVEROVAPOZICE_P1" 
   (	"S_UCET" VARCHAR2(15 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKACNB" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"ID_DOKLAD" NUMBER(*,0), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"S_UCETORIGINAL" VARCHAR2(15 BYTE), 
	"ID_UNIFPROTI" NUMBER(*,0), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"C_BANKA" CHAR(1 BYTE), 
	"ND_CISTAANGAZOVANOST" NUMBER(18,2)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VABA_DOKLADUVEROVAPOZICE_P1.sql
PROMPT


-- ============================================================================
-- Deploy: VABA_DOKLADUVEROVAPOZICE_P2.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VABA_DOKLADUVEROVAPOZICE_P2.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VABA_DOKLADUVEROVAPOZICE_P2
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VABA_DOKLADUVEROVAPOZICE_P2" 
   (	"S_UCET" VARCHAR2(15 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKACNB" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"ID_DOKLAD" NUMBER(*,0), 
	"S_LISTGROUP" CHAR(1 BYTE), 
	"S_LISTGROUPCODE" CHAR(1 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"S_UCETORIGINAL" VARCHAR2(15 BYTE), 
	"ID_UNIFPROTI" NUMBER(*,0), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"C_BANKA" CHAR(1 BYTE), 
	"ND_CISTAANGAZOVANOST" NUMBER(18,2)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VABA_DOKLADUVEROVAPOZICE_P2.sql
PROMPT


-- ============================================================================
-- Deploy: VABA_VW_SSRS_UVEROVKA.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VABA_VW_SSRS_UVEROVKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VABA_VW_SSRS_UVEROVKA
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VABA_VW_SSRS_UVEROVKA" 
   (	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"NAZEV_SPOLECNOST" VARCHAR2(4000 BYTE), 
	"S_UCETUNIF" VARCHAR2(15 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_CASTKACNB" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"ND_CISTAANGAZOVANOST" NUMBER, 
	"C_BANKA" VARCHAR2(4000 BYTE), 
	"S_UCET" VARCHAR2(15 BYTE), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"GROUP_CODE_ZDROJ" VARCHAR2(5 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VABA_VW_SSRS_UVEROVKA.sql
PROMPT


-- ============================================================================
-- Deploy: VVV_PROBLEM.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VVV_PROBLEM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VVV_PROBLEM
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VVV_PROBLEM" 
   (	"ID_DOKLAD" NUMBER(*,0), 
	"ID_SKUPINA" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VVV_PROBLEM.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKTTRANSAKC_D.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKTTRANSAKC_D.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETPROJEKTTRANSAKC_D
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRANSAKC_D" 
   (	"ID" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER(*,0), 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER(*,0), 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETPROJEKTTRANSAKC_D.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKTTRANSAK_99.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKTTRANSAK_99.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETPROJEKTTRANSAK_99
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRANSAK_99" 
   (	"ID" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER(*,0), 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER(*,0), 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETPROJEKTTRANSAK_99.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKTTRANS_0606.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKTTRANS_0606.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETPROJEKTTRANS_0606
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRANS_0606" 
   (	"ID" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER(*,0), 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER(*,0), 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETPROJEKTTRANS_0606.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKTTRANS_0802.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKTTRANS_0802.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETPROJEKTTRANS_0802
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRANS_0802" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETPROJEKTTRANS_0802.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKTTRAN_0606.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKTTRAN_0606.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETPROJEKTTRAN_0606
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRAN_0606" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETPROJEKTTRAN_0606.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKTTRAN_0608.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKTTRAN_0608.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETPROJEKTTRAN_0608
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRAN_0608" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETPROJEKTTRAN_0608.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKTTRAN_0611.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKTTRAN_0611.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETPROJEKTTRAN_0611
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRAN_0611" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETPROJEKTTRAN_0611.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKTTRAN_0612.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKTTRAN_0612.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETPROJEKTTRAN_0612
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRAN_0612" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETPROJEKTTRAN_0612.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKTTRAN_0613.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKTTRAN_0613.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETPROJEKTTRAN_0613
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRAN_0613" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETPROJEKTTRAN_0613.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKTTRAN_0615.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKTTRAN_0615.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETPROJEKTTRAN_0615
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRAN_0615" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETPROJEKTTRAN_0615.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKTTRAN_0620.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKTTRAN_0620.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETPROJEKTTRAN_0620
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRAN_0620" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETPROJEKTTRAN_0620.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKTTRAN_0625.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKTTRAN_0625.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETPROJEKTTRAN_0625
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRAN_0625" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETPROJEKTTRAN_0625.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKTTRAN_0627.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKTTRAN_0627.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETPROJEKTTRAN_0627
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRAN_0627" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETPROJEKTTRAN_0627.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKTTRAN_0628.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKTTRAN_0628.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETPROJEKTTRAN_0628
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRAN_0628" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETPROJEKTTRAN_0628.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKTTRAN_0702.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKTTRAN_0702.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETPROJEKTTRAN_0702
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRAN_0702" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETPROJEKTTRAN_0702.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKTTRAN_0704.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKTTRAN_0704.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETPROJEKTTRAN_0704
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRAN_0704" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETPROJEKTTRAN_0704.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKTTRAN_0710.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKTTRAN_0710.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETPROJEKTTRAN_0710
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRAN_0710" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETPROJEKTTRAN_0710.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKTTRAN_0713.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKTTRAN_0713.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETPROJEKTTRAN_0713
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRAN_0713" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETPROJEKTTRAN_0713.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKTTRAN_0719.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKTTRAN_0719.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETPROJEKTTRAN_0719
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRAN_0719" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETPROJEKTTRAN_0719.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKTTRAN_0723.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKTTRAN_0723.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETPROJEKTTRAN_0723
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRAN_0723" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETPROJEKTTRAN_0723.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKTTRAN_0724.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKTTRAN_0724.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETPROJEKTTRAN_0724
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRAN_0724" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETPROJEKTTRAN_0724.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKTTRAN_0725.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKTTRAN_0725.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETPROJEKTTRAN_0725
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRAN_0725" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETPROJEKTTRAN_0725.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKTTRAN_0730.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKTTRAN_0730.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETPROJEKTTRAN_0730
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRAN_0730" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETPROJEKTTRAN_0730.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKTTRAN_0731.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKTTRAN_0731.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETPROJEKTTRAN_0731
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRAN_0731" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGODBOR" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETPROJEKTTRAN_0731.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCETEST.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCETEST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCETEST
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCETEST" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCETEST.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_B2011.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_B2011.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_B2011
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_B2011" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_B2011.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0523.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0523.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0523
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0523" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0523.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0525.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0525.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0525
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0525" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0525.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0528.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0528.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0528
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0528" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0528.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0529.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0529.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0529
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0529" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0529.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0530.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0530.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0530
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0530" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0530.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0531.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0531.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0531
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0531" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0531.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0601.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0601.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0601
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0601" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0601.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0604.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0604.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0604
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0604" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0604.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0605.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0605.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0605
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0605" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0605.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0606.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0606.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0606
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0606" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0606.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0607.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0607.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0607
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0607" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0607.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0608.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0608.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0608
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0608" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0608.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0611.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0611.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0611
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0611" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0611.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0612.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0612.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0612
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0612" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0612.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0613.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0613.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0613
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0613" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0613.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0614.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0614.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0614
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0614" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0614.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0615.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0615.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0615
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0615" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0615.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0620.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0620.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0620
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0620" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0620.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0625.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0625.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0625
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0625" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0625.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0627.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0627.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0627
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0627" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0627.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0628.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0628.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0628
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0628" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0628.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0702.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0702.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0702
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0702" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0702.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0704.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0704.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0704
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0704" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0704.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0710.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0710.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0710
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0710" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0710.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0713.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0713.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0713
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0713" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0713.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0719.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0719.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0719
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0719" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0719.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0723.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0723.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0723
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0723" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0723.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0724.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0724.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0724
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0724" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0724.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0725.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0725.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0725
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0725" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0725.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0730.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0730.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0730
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0730" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0730.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0731.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0731.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0731
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0731" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0731.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK0802.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK0802.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK0802
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK0802" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK0802.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK2011.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK2011.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK2011
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK2011" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK2011.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_BCK2012.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_BCK2012.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_BCK2012
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_BCK2012" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_BCK2012.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_QCZ.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_QCZ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_QCZ
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_QCZ" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_QCZ.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_T2011.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_T2011.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_T2011
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_T2011" 
   (	"ID" NUMBER, 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER, 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER, 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_T2011.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_TD.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_TD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_TD
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_TD" 
   (	"ID" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER(*,0), 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER(*,0), 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_TD.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_TD_1107.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_TD_1107.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_DAT_BUDGETTRANSAKCE_TD_1107
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_TD_1107" 
   (	"ID" NUMBER(*,0), 
	"S_POPIS" VARCHAR2(128 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"ND_CASTKALOCAL" NUMBER, 
	"UCSPOL_MENA" VARCHAR2(3 BYTE), 
	"DATUM" DATE, 
	"SPOLECNOST" VARCHAR2(128 BYTE), 
	"S_UCET" VARCHAR2(10 BYTE), 
	"S_UNIFSPOL" VARCHAR2(256 BYTE), 
	"ID_BUDGET" NUMBER, 
	"ID_CISTYPTRANSAKCE" NUMBER, 
	"ID_KTGPROJEKT" NUMBER(*,0), 
	"SPOL_DOC" CHAR(1 BYTE), 
	"XIDSL" NUMBER(*,0), 
	"BUDGET_MENA" VARCHAR2(3 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_TD_1107.sql
PROMPT


-- ============================================================================
-- Deploy: VW_EXT_DOKLADUVEROVAPOZICE_ACC.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_EXT_DOKLADUVEROVAPOZICE_ACC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_EXT_DOKLADUVEROVAPOZICE_ACC
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_EXT_DOKLADUVEROVAPOZICE_ACC" 
   (	"S_UCET" VARCHAR2(10 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKACNB" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"ID_DOKLAD" NUMBER(*,0), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"S_UCETUNIF" VARCHAR2(10 BYTE), 
	"ID_UNIFPROTI" NUMBER(*,0), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"C_BANKA" CHAR(1 BYTE), 
	"ND_CISTAANGAZOVANOST" NUMBER(18,2)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_EXT_DOKLADUVEROVAPOZICE_ACC.sql
PROMPT


-- ============================================================================
-- Deploy: VW_EXT_DOKLADUVEROVAPOZICE_BNK.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_EXT_DOKLADUVEROVAPOZICE_BNK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_EXT_DOKLADUVEROVAPOZICE_BNK
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_EXT_DOKLADUVEROVAPOZICE_BNK" 
   (	"S_UCET" VARCHAR2(10 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKACNB" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"ID_DOKLAD" NUMBER(*,0), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"S_UCETUNIF" VARCHAR2(10 BYTE), 
	"ID_UNIFPROTI" NUMBER(*,0), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"C_BANKA" VARCHAR2(4000 BYTE), 
	"ND_CISTAANGAZOVANOST" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_EXT_DOKLADUVEROVAPOZICE_BNK.sql
PROMPT


-- ============================================================================
-- Deploy: VW_EXT_DOKLADUVEROVAPOZICE_MAX.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_EXT_DOKLADUVEROVAPOZICE_MAX.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_EXT_DOKLADUVEROVAPOZICE_MAX
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_EXT_DOKLADUVEROVAPOZICE_MAX" 
   (	"S_UCET" VARCHAR2(10 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKACNB" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"ID_DOKLAD" NUMBER(*,0), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"S_UCETUNIF" VARCHAR2(10 BYTE), 
	"ID_UNIFPROTI" NUMBER(*,0), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"C_BANKA" CHAR(1 BYTE), 
	"ND_CISTAANGAZOVANOST" NUMBER(18,2)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_EXT_DOKLADUVEROVAPOZICE_MAX.sql
PROMPT


-- ============================================================================
-- Deploy: VW_EXT_UVEROVEPOZICE.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_EXT_UVEROVEPOZICE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_EXT_UVEROVEPOZICE
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_EXT_UVEROVEPOZICE" 
   (	"S_UCET" VARCHAR2(10 BYTE), 
	"ND_CASTKAMENA" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKACNB" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"ID_DOKLAD" NUMBER(*,0), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"S_LOCALE" VARCHAR2(6 BYTE), 
	"S_UCETUNIF" VARCHAR2(10 BYTE), 
	"ID_UNIFPROTI" NUMBER(*,0), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"C_BANKA" CHAR(1 BYTE), 
	"ND_CISTAANGAZOVANOST" NUMBER(18,2)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_EXT_UVEROVEPOZICE.sql
PROMPT


-- ============================================================================
-- Deploy: VW_SSRS_UVEROVKA_20180111.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_SSRS_UVEROVKA_20180111.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_SSRS_UVEROVKA_20180111
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_SSRS_UVEROVKA_20180111" 
   (	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"NAZEV_SPOLECNOST" VARCHAR2(4000 BYTE), 
	"S_UCETUNIF" VARCHAR2(15 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_CASTKACNB" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"ND_CISTAANGAZOVANOST" NUMBER, 
	"C_BANKA" VARCHAR2(4000 BYTE), 
	"S_UCET" VARCHAR2(15 BYTE), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"GROUP_CODE_ZDROJ" VARCHAR2(5 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_SSRS_UVEROVKA_20180111.sql
PROMPT


-- ============================================================================
-- Deploy: VW_SSRS_UVEROVKA_20180115.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_SSRS_UVEROVKA_20180115.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_SSRS_UVEROVKA_20180115
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_SSRS_UVEROVKA_20180115" 
   (	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"NAZEV_SPOLECNOST" VARCHAR2(4000 BYTE), 
	"S_UCETUNIF" VARCHAR2(15 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_CASTKACNB" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"ND_CISTAANGAZOVANOST" NUMBER, 
	"C_BANKA" VARCHAR2(4000 BYTE), 
	"S_UCET" VARCHAR2(15 BYTE), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"GROUP_CODE_ZDROJ" VARCHAR2(5 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_SSRS_UVEROVKA_20180115.sql
PROMPT


-- ============================================================================
-- Deploy: VW_SSRS_UVEROVKA_20180116.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_SSRS_UVEROVKA_20180116.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_SSRS_UVEROVKA_20180116
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_SSRS_UVEROVKA_20180116" 
   (	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"NAZEV_SPOLECNOST" VARCHAR2(4000 BYTE), 
	"S_UCETUNIF" VARCHAR2(15 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_CASTKACNB" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"ND_CISTAANGAZOVANOST" NUMBER, 
	"C_BANKA" VARCHAR2(4000 BYTE), 
	"S_UCET" VARCHAR2(15 BYTE), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"GROUP_CODE_ZDROJ" VARCHAR2(5 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_SSRS_UVEROVKA_20180116.sql
PROMPT


-- ============================================================================
-- Deploy: VW_SSRS_UVEROVKA_20180118.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying VW_SSRS_UVEROVKA_20180118.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table VW_SSRS_UVEROVKA_20180118
--------------------------------------------------------

  CREATE TABLE "DB_JT"."VW_SSRS_UVEROVKA_20180118" 
   (	"S_LISTGROUPCODE" VARCHAR2(5 BYTE), 
	"NAZEV_SPOLECNOST" VARCHAR2(4000 BYTE), 
	"S_UCETUNIF" VARCHAR2(15 BYTE), 
	"S_POPIS" VARCHAR2(4000 BYTE), 
	"ND_CASTKACNB" NUMBER, 
	"ND_CASTKALOCAL" NUMBER, 
	"ND_CASTKAMENA" NUMBER, 
	"S_MENA" VARCHAR2(3 BYTE), 
	"S_UNIFPROTI_ICO" VARCHAR2(20 BYTE), 
	"S_UNIFPROTI" VARCHAR2(256 BYTE), 
	"S_LISTGROUP" VARCHAR2(43 BYTE), 
	"ND_KATEGORIE_KOEF" NUMBER(6,3), 
	"ND_CISTAANGAZOVANOST" NUMBER, 
	"C_BANKA" VARCHAR2(4000 BYTE), 
	"S_UCET" VARCHAR2(15 BYTE), 
	"S_POPISORIGINAL" VARCHAR2(64 BYTE), 
	"GROUP_CODE_ZDROJ" VARCHAR2(5 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed VW_SSRS_UVEROVKA_20180118.sql
PROMPT


-- ============================================================================
-- Deploy: YYY.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying YYY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table YYY
--------------------------------------------------------

  CREATE TABLE "DB_JT"."YYY" 
   (	"SID" NUMBER(*,0), 
	"HLASKA" VARCHAR2(4000 BYTE), 
	"DATUM" DATE DEFAULT sysdate, 
	"ID" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed YYY.sql
PROMPT


-- ============================================================================
-- Deploy: YYY_PROTIS_BEZ_TOPSECUR_OLD.sql
-- Category: tables
-- ============================================================================

PROMPT Deploying YYY_PROTIS_BEZ_TOPSECUR_OLD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Table YYY_PROTIS_BEZ_TOPSECUR_OLD
--------------------------------------------------------

  CREATE TABLE "DB_JT"."YYY_PROTIS_BEZ_TOPSECUR_OLD" 
   (	"SID" NUMBER(*,0), 
	"HLASKA" VARCHAR2(4000 BYTE), 
	"DATUM" DATE, 
	"ID" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS ;


PROMPT Completed YYY_PROTIS_BEZ_TOPSECUR_OLD.sql
PROMPT


-- ============================================================================
-- PHASE: Deploy CONSTRAINTS (502 files)
-- ============================================================================

PROMPT
PROMPT ============================================================================
PROMPT Deploying CONSTRAINTS (502 files)
PROMPT ============================================================================
PROMPT


-- ============================================================================
-- Deploy: ADMIN_MY_SESSION.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying ADMIN_MY_SESSION.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table ADMIN_MY_SESSION
--------------------------------------------------------

  ALTER TABLE "DB_JT"."ADMIN_MY_SESSION" MODIFY ("ID" CONSTRAINT "NN_ADMMYSESSION_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."ADMIN_MY_SESSION" MODIFY ("S_NAME" CONSTRAINT "NN_ADMMYSESSION_NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."ADMIN_MY_SESSION" ADD CONSTRAINT "UN_ADMMYSESSION_NAME" UNIQUE ("S_NAME")
  USING INDEX "DB_JT"."UN_ADMMYSESSION_NAME"  ENABLE;
  ALTER TABLE "DB_JT"."ADMIN_MY_SESSION" ADD CONSTRAINT "PK_ADMINMYSESSION" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_ADMINMYSESSION"  ENABLE;
  ALTER TABLE "DB_JT"."ADMIN_MY_SESSION" ADD CONSTRAINT "CN_ADMMYSESSION_FREE" CHECK ( c_free is not null and c_free in ( '0', '1' ) ) ENABLE;


PROMPT Completed ADMIN_MY_SESSION.sql
PROMPT


-- ============================================================================
-- Deploy: AXXX.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying AXXX.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table AXXX
--------------------------------------------------------

  ALTER TABLE "DB_JT"."AXXX" MODIFY ("UDID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."AXXX" MODIFY ("UPID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."AXXX" MODIFY ("DATUM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."AXXX" MODIFY ("UCET" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."AXXX" MODIFY ("PROTIUCET" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."AXXX" MODIFY ("TEXT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."AXXX" MODIFY ("MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."AXXX" MODIFY ("JEDNOTKA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."AXXX" MODIFY ("PARZNAK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."AXXX" MODIFY ("EXPORTLOCK" NOT NULL ENABLE);


PROMPT Completed AXXX.sql
PROMPT


-- ============================================================================
-- Deploy: BAK_KP_REP_SPOLECNOSTCARTESIS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying BAK_KP_REP_SPOLECNOSTCARTESIS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table BAK_KP_REP_SPOLECNOSTCARTESIS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."BAK_KP_REP_SPOLECNOSTCARTESIS" MODIFY ("DT_DATUM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."BAK_KP_REP_SPOLECNOSTCARTESIS" MODIFY ("ID_KTGSPOLECNOST" NOT NULL ENABLE);


PROMPT Completed BAK_KP_REP_SPOLECNOSTCARTESIS.sql
PROMPT


-- ============================================================================
-- Deploy: BCK_DOKLAD_TAMARAMA_03_2019.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying BCK_DOKLAD_TAMARAMA_03_2019.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table BCK_DOKLAD_TAMARAMA_03_2019
--------------------------------------------------------

  ALTER TABLE "DB_JT"."BCK_DOKLAD_TAMARAMA_03_2019" MODIFY ("ID" NOT NULL ENABLE);


PROMPT Completed BCK_DOKLAD_TAMARAMA_03_2019.sql
PROMPT


-- ============================================================================
-- Deploy: BCK_SL_337868.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying BCK_SL_337868.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table BCK_SL_337868
--------------------------------------------------------

  ALTER TABLE "DB_JT"."BCK_SL_337868" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."BCK_SL_337868" MODIFY ("ID_DOKUMENT" NOT NULL ENABLE);


PROMPT Completed BCK_SL_337868.sql
PROMPT


-- ============================================================================
-- Deploy: BCK_SL_337868_DOC.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying BCK_SL_337868_DOC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table BCK_SL_337868_DOC
--------------------------------------------------------

  ALTER TABLE "DB_JT"."BCK_SL_337868_DOC" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."BCK_SL_337868_DOC" MODIFY ("ID_CISDOKUMENT" NOT NULL ENABLE);


PROMPT Completed BCK_SL_337868_DOC.sql
PROMPT


-- ============================================================================
-- Deploy: CISLA_VOUCHERU_JT.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying CISLA_VOUCHERU_JT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table CISLA_VOUCHERU_JT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."CISLA_VOUCHERU_JT" ADD UNIQUE ("CISLO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "INDEXY"  ENABLE;


PROMPT Completed CISLA_VOUCHERU_JT.sql
PROMPT


-- ============================================================================
-- Deploy: CIS_BANKA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying CIS_BANKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table CIS_BANKA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."CIS_BANKA" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."CIS_BANKA" MODIFY ("S_ZKRATKA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."CIS_BANKA" MODIFY ("ID_CISMENA" CONSTRAINT "NN_KPCISBANKA_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."CIS_BANKA" ADD CONSTRAINT "PK_CISBANKA" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISBANKA"  ENABLE;


PROMPT Completed CIS_BANKA.sql
PROMPT


-- ============================================================================
-- Deploy: CIS_LOCALE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying CIS_LOCALE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table CIS_LOCALE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."CIS_LOCALE" MODIFY ("S_LOCALE" CONSTRAINT "NN_CISLOCALE_LOCALE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."CIS_LOCALE" ADD CONSTRAINT "PK_CISLOCALE" PRIMARY KEY ("S_LOCALE")
  USING INDEX "DB_JT"."PK_CISLOCALE"  ENABLE;


PROMPT Completed CIS_LOCALE.sql
PROMPT


-- ============================================================================
-- Deploy: CREATE_JAVA_LOB_TABLE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying CREATE_JAVA_LOB_TABLE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table CREATE$JAVA$LOB$TABLE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."CREATE$JAVA$LOB$TABLE" ADD UNIQUE ("NAME")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 131072 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "INDEXY"  ENABLE;


PROMPT Completed CREATE_JAVA_LOB_TABLE.sql
PROMPT


-- ============================================================================
-- Deploy: DAT_KURZLIST.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying DAT_KURZLIST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table DAT_KURZLIST
--------------------------------------------------------

  ALTER TABLE "DB_JT"."DAT_KURZLIST" MODIFY ("DT_DATUM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."DAT_KURZLIST" MODIFY ("ID_CISBANKA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."DAT_KURZLIST" MODIFY ("ID_CISMENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."DAT_KURZLIST" ADD CONSTRAINT "PK_KURZLIST" PRIMARY KEY ("DT_DATUM", "ID_CISBANKA", "ID_CISMENA")
  USING INDEX "DB_JT"."PK_KURZLIST"  ENABLE;


PROMPT Completed DAT_KURZLIST.sql
PROMPT


-- ============================================================================
-- Deploy: DAT_KURZLISTAVG.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying DAT_KURZLISTAVG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table DAT_KURZLISTAVG
--------------------------------------------------------

  ALTER TABLE "DB_JT"."DAT_KURZLISTAVG" MODIFY ("DT_DATUM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."DAT_KURZLISTAVG" MODIFY ("ID_CISBANKA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."DAT_KURZLISTAVG" MODIFY ("ID_CISMENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."DAT_KURZLISTAVG" ADD CONSTRAINT "PK_KURZLISTAVG" PRIMARY KEY ("DT_DATUM", "ID_CISBANKA", "ID_CISMENA")
  USING INDEX "DB_JT"."PK_KURZLISTAVG"  ENABLE;


PROMPT Completed DAT_KURZLISTAVG.sql
PROMPT


-- ============================================================================
-- Deploy: DAT_KURZLIST_CZK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying DAT_KURZLIST_CZK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table DAT_KURZLIST_CZK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."DAT_KURZLIST_CZK" MODIFY ("DT_DATUM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."DAT_KURZLIST_CZK" MODIFY ("ID_CISBANKA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."DAT_KURZLIST_CZK" MODIFY ("ID_CISMENA" NOT NULL ENABLE);


PROMPT Completed DAT_KURZLIST_CZK.sql
PROMPT


-- ============================================================================
-- Deploy: DW_CIS_ISIT_APLIKACE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying DW_CIS_ISIT_APLIKACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table DW_CIS_ISIT_APLIKACE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."DW_CIS_ISIT_APLIKACE" ADD CONSTRAINT "PK_DW_CIS_ISIT_APLIKACE" PRIMARY KEY ("ISIT_APLIKACE_KEY", "ISIT_APLIKACE_DATA_KEY")
  USING INDEX "DB_JT"."PK_DW_CIS_ISIT_APLIKACE"  ENABLE;
  ALTER TABLE "DB_JT"."DW_CIS_ISIT_APLIKACE" MODIFY ("ISIT_APLIKACE_DATA_KEY" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."DW_CIS_ISIT_APLIKACE" MODIFY ("ISIT_APLIKACE_KEY" NOT NULL ENABLE);


PROMPT Completed DW_CIS_ISIT_APLIKACE.sql
PROMPT


-- ============================================================================
-- Deploy: DW_CIS_ISIT_BUDGET.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying DW_CIS_ISIT_BUDGET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table DW_CIS_ISIT_BUDGET
--------------------------------------------------------

  ALTER TABLE "DB_JT"."DW_CIS_ISIT_BUDGET" MODIFY ("INSERTED_BY_DATA_KEY" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."DW_CIS_ISIT_BUDGET" MODIFY ("INSERTED_BY_KEY" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."DW_CIS_ISIT_BUDGET" MODIFY ("VALID_TIME_TO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."DW_CIS_ISIT_BUDGET" MODIFY ("VALID_TIME_FROM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."DW_CIS_ISIT_BUDGET" MODIFY ("BUS_DATE_TO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."DW_CIS_ISIT_BUDGET" MODIFY ("BUS_DATE_FROM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."DW_CIS_ISIT_BUDGET" MODIFY ("S_KOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."DW_CIS_ISIT_BUDGET" MODIFY ("ISIT_BUDGET_DATA_KEY" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."DW_CIS_ISIT_BUDGET" MODIFY ("ISIT_BUDGET_KEY" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."DW_CIS_ISIT_BUDGET" ADD CONSTRAINT "PK_ISIT_BUDGET_DATA" PRIMARY KEY ("ISIT_BUDGET_KEY", "ISIT_BUDGET_DATA_KEY")
  USING INDEX "DB_JT"."PK_ISIT_BUDGET_DATA"  ENABLE;


PROMPT Completed DW_CIS_ISIT_BUDGET.sql
PROMPT


-- ============================================================================
-- Deploy: DW_CIS_ISIT_DRUH_NAKLADU.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying DW_CIS_ISIT_DRUH_NAKLADU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table DW_CIS_ISIT_DRUH_NAKLADU
--------------------------------------------------------

  ALTER TABLE "DB_JT"."DW_CIS_ISIT_DRUH_NAKLADU" MODIFY ("ISIT_DRUH_NAKLADU_DATA_KEY" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."DW_CIS_ISIT_DRUH_NAKLADU" MODIFY ("ISIT_DRUH_NAKLADU_KEY" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."DW_CIS_ISIT_DRUH_NAKLADU" ADD CONSTRAINT "PK_DW_CIS_ISIT_DRUH_NAKLADU" PRIMARY KEY ("ISIT_DRUH_NAKLADU_KEY", "ISIT_DRUH_NAKLADU_DATA_KEY")
  USING INDEX "DB_JT"."PK_DW_CIS_ISIT_DRUH_NAKLADU"  ENABLE;


PROMPT Completed DW_CIS_ISIT_DRUH_NAKLADU.sql
PROMPT


-- ============================================================================
-- Deploy: DW_CIS_ISIT_SEMAFOR_SYNC.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying DW_CIS_ISIT_SEMAFOR_SYNC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table DW_CIS_ISIT_SEMAFOR_SYNC
--------------------------------------------------------

  ALTER TABLE "DB_JT"."DW_CIS_ISIT_SEMAFOR_SYNC" MODIFY ("DATUM_ZMENY" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."DW_CIS_ISIT_SEMAFOR_SYNC" MODIFY ("ZMENENY_CISLENIK" NOT NULL ENABLE);


PROMPT Completed DW_CIS_ISIT_SEMAFOR_SYNC.sql
PROMPT


-- ============================================================================
-- Deploy: DW_CIS_ISIT_TYP_POLOZKY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying DW_CIS_ISIT_TYP_POLOZKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table DW_CIS_ISIT_TYP_POLOZKY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."DW_CIS_ISIT_TYP_POLOZKY" MODIFY ("ISIT_TYP_POLOZKY_DATA_KEY" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."DW_CIS_ISIT_TYP_POLOZKY" MODIFY ("ISIT_TYP_POLOZKY_KEY" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."DW_CIS_ISIT_TYP_POLOZKY" ADD CONSTRAINT "PK_DW_CIS_TYP_POLOZKY" PRIMARY KEY ("ISIT_TYP_POLOZKY_KEY", "ISIT_TYP_POLOZKY_DATA_KEY")
  USING INDEX "DB_JT"."PK_DW_CIS_TYP_POLOZKY"  ENABLE;


PROMPT Completed DW_CIS_ISIT_TYP_POLOZKY.sql
PROMPT


-- ============================================================================
-- Deploy: DW_CIS_ISIT_TYP_SW.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying DW_CIS_ISIT_TYP_SW.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table DW_CIS_ISIT_TYP_SW
--------------------------------------------------------

  ALTER TABLE "DB_JT"."DW_CIS_ISIT_TYP_SW" MODIFY ("ISIT_TYP_SW_DATA_KEY" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."DW_CIS_ISIT_TYP_SW" MODIFY ("ISIT_TYP_SW_KEY" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."DW_CIS_ISIT_TYP_SW" ADD CONSTRAINT "PK_DW_CIS_ISIT_TYP_SW" PRIMARY KEY ("ISIT_TYP_SW_KEY", "ISIT_TYP_SW_DATA_KEY")
  USING INDEX "DB_JT"."PK_DW_CIS_ISIT_TYP_SW"  ENABLE;


PROMPT Completed DW_CIS_ISIT_TYP_SW.sql
PROMPT


-- ============================================================================
-- Deploy: EXT_CRT_DWH_CT_ACCOUNT_RISK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying EXT_CRT_DWH_CT_ACCOUNT_RISK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table EXT_CRT_DWH_CT_ACCOUNT_RISK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."EXT_CRT_DWH_CT_ACCOUNT_RISK" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."EXT_CRT_DWH_CT_ACCOUNT_RISK" MODIFY ("OWNER_SITE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."EXT_CRT_DWH_CT_ACCOUNT_RISK" MODIFY ("NAME" NOT NULL ENABLE);


PROMPT Completed EXT_CRT_DWH_CT_ACCOUNT_RISK.sql
PROMPT


-- ============================================================================
-- Deploy: FC_CIS_UCETNISPOLECNOST.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying FC_CIS_UCETNISPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table FC_CIS_UCETNISPOLECNOST
--------------------------------------------------------

  ALTER TABLE "DB_JT"."FC_CIS_UCETNISPOLECNOST" MODIFY ("ID_KTGUCETNISPOLECNOST" CONSTRAINT "NN_FCCISUS_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."FC_CIS_UCETNISPOLECNOST" ADD CONSTRAINT "PK_FCCISUS" PRIMARY KEY ("ID_KTGUCETNISPOLECNOST")
  USING INDEX "DB_JT"."PK_FCCISUS"  ENABLE;


PROMPT Completed FC_CIS_UCETNISPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: FC_N2N_NASTROJCPZAJISTENINAST.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying FC_N2N_NASTROJCPZAJISTENINAST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table FC_N2N_NASTROJCPZAJISTENINAST
--------------------------------------------------------

  ALTER TABLE "DB_JT"."FC_N2N_NASTROJCPZAJISTENINAST" ADD CONSTRAINT "PK_FCN2NNASTROJCPZAJNAST" PRIMARY KEY ("ID_NASTROJ", "ID_ZAJISTENI")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS  ENABLE;


PROMPT Completed FC_N2N_NASTROJCPZAJISTENINAST.sql
PROMPT


-- ============================================================================
-- Deploy: FC_N2N_NASTROJCPZAJISTNASTCP.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying FC_N2N_NASTROJCPZAJISTNASTCP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table FC_N2N_NASTROJCPZAJISTNASTCP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."FC_N2N_NASTROJCPZAJISTNASTCP" ADD CONSTRAINT "PK_FCN2NNASTROJCPZAJNASTCP" PRIMARY KEY ("ID_NASTROJ", "ID_ZAJISTENI")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS  ENABLE;


PROMPT Completed FC_N2N_NASTROJCPZAJISTNASTCP.sql
PROMPT


-- ============================================================================
-- Deploy: FC_N2N_NASTROJOPRAVANASTROJ.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying FC_N2N_NASTROJOPRAVANASTROJ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table FC_N2N_NASTROJOPRAVANASTROJ
--------------------------------------------------------

  ALTER TABLE "DB_JT"."FC_N2N_NASTROJOPRAVANASTROJ" ADD CONSTRAINT "PK_FCN2NNASTROJOPRAVANASTROJ" PRIMARY KEY ("ID_NASTROJ", "ID_OPRAVKA")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS  ENABLE;


PROMPT Completed FC_N2N_NASTROJOPRAVANASTROJ.sql
PROMPT


-- ============================================================================
-- Deploy: FC_N2N_NASTROJOPRAVANASTROJCP.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying FC_N2N_NASTROJOPRAVANASTROJCP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table FC_N2N_NASTROJOPRAVANASTROJCP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."FC_N2N_NASTROJOPRAVANASTROJCP" ADD CONSTRAINT "PK_FCN2NNASTROJOPRAVANASTROJCP" PRIMARY KEY ("ID_NASTROJ", "ID_OPRAVKA")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS  ENABLE;


PROMPT Completed FC_N2N_NASTROJOPRAVANASTROJCP.sql
PROMPT


-- ============================================================================
-- Deploy: FC_N2N_NASTROJZAJISTENINAST.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying FC_N2N_NASTROJZAJISTENINAST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table FC_N2N_NASTROJZAJISTENINAST
--------------------------------------------------------

  ALTER TABLE "DB_JT"."FC_N2N_NASTROJZAJISTENINAST" ADD CONSTRAINT "PK_FCN2NNASTROJZAJNAST" PRIMARY KEY ("ID_NASTROJ", "ID_ZAJISTENI")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS  ENABLE;


PROMPT Completed FC_N2N_NASTROJZAJISTENINAST.sql
PROMPT


-- ============================================================================
-- Deploy: FC_N2N_NASTROJZAJISTENINASTCP.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying FC_N2N_NASTROJZAJISTENINASTCP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table FC_N2N_NASTROJZAJISTENINASTCP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."FC_N2N_NASTROJZAJISTENINASTCP" ADD CONSTRAINT "PK_FCN2NNASTROJZAJNASTCP" PRIMARY KEY ("ID_NASTROJ", "ID_ZAJISTENI")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS  ENABLE;


PROMPT Completed FC_N2N_NASTROJZAJISTENINASTCP.sql
PROMPT


-- ============================================================================
-- Deploy: IMPORT_POZICE_UA_RKC_ATRIBUTY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying IMPORT_POZICE_UA_RKC_ATRIBUTY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table IMPORT_POZICE_UA_RKC_ATRIBUTY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."IMPORT_POZICE_UA_RKC_ATRIBUTY" ADD CONSTRAINT "PK_ID_SPOLECNOST" PRIMARY KEY ("ID_SPOLECNOST")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS  ENABLE;


PROMPT Completed IMPORT_POZICE_UA_RKC_ATRIBUTY.sql
PROMPT


-- ============================================================================
-- Deploy: IMPORT_POZICE_UM.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying IMPORT_POZICE_UM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table IMPORT_POZICE_UM
--------------------------------------------------------

  ALTER TABLE "DB_JT"."IMPORT_POZICE_UM" MODIFY ("ID_KTGUCETNISPOLECNOST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."IMPORT_POZICE_UM" MODIFY ("IMPORT_TYP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."IMPORT_POZICE_UM" MODIFY ("ID_USER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."IMPORT_POZICE_UM" ADD CONSTRAINT "PK_IMPORT_POZICE_UM" PRIMARY KEY ("ID_IMP")
  USING INDEX "DB_JT"."PK_IMPORT_POZICE_UM"  ENABLE;
  ALTER TABLE "DB_JT"."IMPORT_POZICE_UM" ADD CONSTRAINT "CHECK_TYP_IMPORTU" CHECK ( IMPORT_TYP in ('U','M') ) ENABLE;
  ALTER TABLE "DB_JT"."IMPORT_POZICE_UM" MODIFY ("ID_LOAD_AX" NOT NULL ENABLE);


PROMPT Completed IMPORT_POZICE_UM.sql
PROMPT


-- ============================================================================
-- Deploy: IMPORT_POZICE_UM_BCK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying IMPORT_POZICE_UM_BCK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table IMPORT_POZICE_UM_BCK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."IMPORT_POZICE_UM_BCK" MODIFY ("ID_KTGUCETNISPOLECNOST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."IMPORT_POZICE_UM_BCK" MODIFY ("IMPORT_TYP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."IMPORT_POZICE_UM_BCK" MODIFY ("ID_USER" NOT NULL ENABLE);


PROMPT Completed IMPORT_POZICE_UM_BCK.sql
PROMPT


-- ============================================================================
-- Deploy: IMPORT_POZICE_UM_CIS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying IMPORT_POZICE_UM_CIS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table IMPORT_POZICE_UM_CIS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."IMPORT_POZICE_UM_CIS" MODIFY ("S_KOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."IMPORT_POZICE_UM_CIS" MODIFY ("ID_SPOLECNOST" NOT NULL ENABLE);


PROMPT Completed IMPORT_POZICE_UM_CIS.sql
PROMPT


-- ============================================================================
-- Deploy: IMPORT_POZICE_UM_DATA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying IMPORT_POZICE_UM_DATA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table IMPORT_POZICE_UM_DATA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."IMPORT_POZICE_UM_DATA" ADD CONSTRAINT "PK_IMPORT_POZICE_UM_DATA" PRIMARY KEY ("ID_PK")
  USING INDEX "DB_JT"."PK_IMPORT_POZICE_UM_DATA"  ENABLE;


PROMPT Completed IMPORT_POZICE_UM_DATA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ACC_PPF.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_ACC_PPF.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_ACC_PPF
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_ACC_PPF" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_ACC_PPF" MODIFY ("S_ACC_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_ACC_PPF" ADD CONSTRAINT "KP_CIS_ACC_PPF_UK1" UNIQUE ("S_ACC_ID")
  USING INDEX "DB_JT"."KP_CIS_ACC_PPF_UK1"  ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_ACC_PPF" ADD CONSTRAINT "KP_CIS_ACC_PPF_PK" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."KP_CIS_ACC_PPF_PK"  ENABLE;


PROMPT Completed KP_CIS_ACC_PPF.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ACC_PPF_BCK1.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_ACC_PPF_BCK1.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_ACC_PPF_BCK1
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_ACC_PPF_BCK1" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_ACC_PPF_BCK1" MODIFY ("S_ACC_ID" NOT NULL ENABLE);


PROMPT Completed KP_CIS_ACC_PPF_BCK1.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_BANKAR.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_BANKAR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_BANKAR
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_BANKAR" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_BANKAR" ADD CONSTRAINT "PK_CISBANKAR" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISBANKAR"  ENABLE;


PROMPT Completed KP_CIS_BANKAR.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_BUSINESSLINIE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_BUSINESSLINIE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_BUSINESSLINIE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_BUSINESSLINIE" MODIFY ("ID" CONSTRAINT "NN_CISBUSINESSLINIE_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_BUSINESSLINIE" MODIFY ("S_KOD" CONSTRAINT "NN_CISBUSINESSLINIE_KOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_BUSINESSLINIE" MODIFY ("ND_BETA" CONSTRAINT "NN_CISBUSINESSLINIE_BETA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_BUSINESSLINIE" ADD CONSTRAINT "PK_CISBUSINESSLINIE" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISBUSINESSLINIE"  ENABLE;


PROMPT Completed KP_CIS_BUSINESSLINIE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_CPINDEX.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_CPINDEX.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_CPINDEX
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_CPINDEX" MODIFY ("ID" CONSTRAINT "NN_KPCISCPINDEX_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_CPINDEX" MODIFY ("S_EXTID" CONSTRAINT "NN_KPCISCPINDEX_EXTID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_CPINDEX" MODIFY ("S_NAZEV" CONSTRAINT "NN_KPCISCPINDEX_NAZEV" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_CPINDEX" MODIFY ("ID_CISSTAT" CONSTRAINT "NN_KPCISCPINDEX_STAT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_CPINDEX" ADD CONSTRAINT "UN_KPCISCPINDEX_EXTID" UNIQUE ("S_EXTID")
  USING INDEX "DB_JT"."UN_KPCISCPINDEX_EXTID"  ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_CPINDEX" ADD CONSTRAINT "PK_KPCISCPINDEX" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPCISCPINDEX"  ENABLE;


PROMPT Completed KP_CIS_CPINDEX.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_CUSTOMER_GROUP.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_CUSTOMER_GROUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_CUSTOMER_GROUP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_CUSTOMER_GROUP" MODIFY ("CUST_GROUP_NAME" CONSTRAINT "NN_CISCUSTOMERGROUP_GN" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_CUSTOMER_GROUP" MODIFY ("CUST_GROUP_CODE" CONSTRAINT "NN_CISCUSTOMERGROUP_GC" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_CUSTOMER_GROUP" MODIFY ("CUST_STRUC_NAME" CONSTRAINT "NN_CISCUSTOMERGROUP_SN" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_CUSTOMER_GROUP" MODIFY ("CUST_STRUC_CODE" CONSTRAINT "NN_CISCUSTOMERGROUP_SC" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_CUSTOMER_GROUP" MODIFY ("DT_PLATNOSTOD" CONSTRAINT "NN_CISCUSTOMERGROUP_OD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_CUSTOMER_GROUP" MODIFY ("DT_PLATNOSTDO" CONSTRAINT "NN_CISCUSTOMERGROUP_DO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_CUSTOMER_GROUP" ADD CONSTRAINT "PK_CISCUSTOMERGROUP" PRIMARY KEY ("CUST_GROUP_NAME", "CUST_GROUP_CODE", "CUST_STRUC_NAME", "CUST_STRUC_CODE") DISABLE;


PROMPT Completed KP_CIS_CUSTOMER_GROUP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_CUSTOMER_GROUP200327U.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_CUSTOMER_GROUP200327U.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_CUSTOMER_GROUP200327U
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_CUSTOMER_GROUP200327U" MODIFY ("CUST_GROUP_NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_CUSTOMER_GROUP200327U" MODIFY ("CUST_GROUP_CODE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_CUSTOMER_GROUP200327U" MODIFY ("CUST_STRUC_NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_CUSTOMER_GROUP200327U" MODIFY ("CUST_STRUC_CODE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_CUSTOMER_GROUP200327U" MODIFY ("DT_PLATNOSTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_CUSTOMER_GROUP200327U" MODIFY ("DT_PLATNOSTDO" NOT NULL ENABLE);


PROMPT Completed KP_CIS_CUSTOMER_GROUP200327U.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_CUSTOMER_GROUP_QCZ.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_CUSTOMER_GROUP_QCZ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_CUSTOMER_GROUP_QCZ
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_CUSTOMER_GROUP_QCZ" MODIFY ("CUST_GROUP_NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_CUSTOMER_GROUP_QCZ" MODIFY ("CUST_GROUP_CODE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_CUSTOMER_GROUP_QCZ" MODIFY ("CUST_STRUC_NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_CUSTOMER_GROUP_QCZ" MODIFY ("CUST_STRUC_CODE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_CUSTOMER_GROUP_QCZ" MODIFY ("DT_PLATNOSTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_CUSTOMER_GROUP_QCZ" MODIFY ("DT_PLATNOSTDO" NOT NULL ENABLE);


PROMPT Completed KP_CIS_CUSTOMER_GROUP_QCZ.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_DATABAZE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_DATABAZE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_DATABAZE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_DATABAZE" MODIFY ("ID" CONSTRAINT "NN_KPCISDATABAZE_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_DATABAZE" MODIFY ("S_DBLINK" CONSTRAINT "NN_KPCISDATABAZE_DBLINK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_DATABAZE" ADD CONSTRAINT "CU_KPCISDATABAZE_DBLINK" UNIQUE ("S_DBLINK")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS  ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_DATABAZE" ADD CONSTRAINT "PK_KPCISDATABAZE" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPCISDATABAZE"  ENABLE;


PROMPT Completed KP_CIS_DATABAZE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_DOKLAD.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_DOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_DOKLAD
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_DOKLAD" MODIFY ("ID" CONSTRAINT "NN_KPCISDOKLAD_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_DOKLAD" MODIFY ("S_POPIS" CONSTRAINT "NN_KPCISDOKLAD_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_DOKLAD" MODIFY ("JAVA_FORMULAR_ID" CONSTRAINT "NN_CISDOKLAD_JAVAID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_DOKLAD" MODIFY ("ID_CISFORMULAR" CONSTRAINT "NN_KPCISDOKLAD_FORMULAR" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_DOKLAD" MODIFY ("DT_PLATNOSTOD" CONSTRAINT "NN_KPCISDOKLAD_PLATNOSTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_DOKLAD" MODIFY ("DT_PLATNOSTDO" CONSTRAINT "NN_KPCISDOKLAD_PLATNOSTDO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_DOKLAD" ADD CONSTRAINT "CN_KPCISDOKLAD_ZAMCENO" CHECK ( c_zamceno is not null and c_zamceno in ( '0', '1' ) ) ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_CIS_DOKLAD" ADD CONSTRAINT "NN_KPCISDOKLAD_PLATNOST" CHECK ( dt_platnostOd <= dt_platnostDo ) ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_CIS_DOKLAD" ADD CONSTRAINT "PK_KPCISDOKLAD" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPCISDOKLAD"  ENABLE;


PROMPT Completed KP_CIS_DOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_DOKUMENT.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_DOKUMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_DOKUMENT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_DOKUMENT" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_DOKUMENT" ADD CONSTRAINT "PK_CISDOKUMENT" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISDOKUMENT"  ENABLE;


PROMPT Completed KP_CIS_DOKUMENT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_DOKUMENTSPOLTYP.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_DOKUMENTSPOLTYP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_DOKUMENTSPOLTYP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_DOKUMENTSPOLTYP" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_DOKUMENTSPOLTYP" ADD CONSTRAINT "PK_CISDOCSPOLTYP" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISDOCSPOLTYP"  ENABLE;


PROMPT Completed KP_CIS_DOKUMENTSPOLTYP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_DOKUMENTSTATUS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_DOKUMENTSTATUS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_DOKUMENTSTATUS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_DOKUMENTSTATUS" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_DOKUMENTSTATUS" ADD CONSTRAINT "PK_CISDOKUMENTSTATUS" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISDOKUMENTSTATUS"  ENABLE;


PROMPT Completed KP_CIS_DOKUMENTSTATUS.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_DOKUMENTUHRADA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_DOKUMENTUHRADA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_DOKUMENTUHRADA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_DOKUMENTUHRADA" MODIFY ("ID" CONSTRAINT "NN_KPCISDOCUHRADA_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_DOKUMENTUHRADA" ADD CONSTRAINT "PK_KPCISDOCUHRADA" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPCISDOCUHRADA"  ENABLE;


PROMPT Completed KP_CIS_DOKUMENTUHRADA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_EMAILZPRAVY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_EMAILZPRAVY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_EMAILZPRAVY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_EMAILZPRAVY" MODIFY ("ID" CONSTRAINT "NN_CISEMAILID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_EMAILZPRAVY" ADD CONSTRAINT "PK_CISMAIL" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISMAIL"  ENABLE;


PROMPT Completed KP_CIS_EMAILZPRAVY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_EMAILZPRAVY_BCK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_EMAILZPRAVY_BCK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_EMAILZPRAVY_BCK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_EMAILZPRAVY_BCK" MODIFY ("ID" NOT NULL ENABLE);


PROMPT Completed KP_CIS_EMAILZPRAVY_BCK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_EVIDOIDENTIFIKACE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_EVIDOIDENTIFIKACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_EVIDOIDENTIFIKACE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_EVIDOIDENTIFIKACE" MODIFY ("ID" CONSTRAINT "NN_CISEVIDOIDENTIFIKACE_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_EVIDOIDENTIFIKACE" ADD CONSTRAINT "PK_CISEVIDOIDENTIFIKACE" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISEVIDOIDENTIFIKACE"  ENABLE;


PROMPT Completed KP_CIS_EVIDOIDENTIFIKACE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_EVIDOVANEINFORMACE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_EVIDOVANEINFORMACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_EVIDOVANEINFORMACE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_EVIDOVANEINFORMACE" MODIFY ("ID" CONSTRAINT "NN_CISEVIDOVANEINFO_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_EVIDOVANEINFORMACE" MODIFY ("S_POPIS" CONSTRAINT "NN_CISEVIDOVANEINFO_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_EVIDOVANEINFORMACE" ADD CONSTRAINT "PK_CISEVIDOVANEINFO" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISEVIDOVANEINFO"  ENABLE;


PROMPT Completed KP_CIS_EVIDOVANEINFORMACE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_EVIOBCHODNIREJSTRIK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_EVIOBCHODNIREJSTRIK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_EVIOBCHODNIREJSTRIK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_EVIOBCHODNIREJSTRIK" MODIFY ("ID" CONSTRAINT "NN_CISEVIOR_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_EVIOBCHODNIREJSTRIK" ADD CONSTRAINT "PK_CISEVIOR" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISEVIOR"  ENABLE;


PROMPT Completed KP_CIS_EVIOBCHODNIREJSTRIK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_EVISTATUS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_EVISTATUS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_EVISTATUS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_EVISTATUS" MODIFY ("ID" CONSTRAINT "NN_CISEVISTATUS_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_EVISTATUS" MODIFY ("S_POPIS" CONSTRAINT "NN_CISEVISTATUS_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_EVISTATUS" ADD CONSTRAINT "PK_CISEVISTATUS" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISEVISTATUS"  ENABLE;


PROMPT Completed KP_CIS_EVISTATUS.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_EVITYPSTATZASTUPCE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_EVITYPSTATZASTUPCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_EVITYPSTATZASTUPCE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_EVITYPSTATZASTUPCE" MODIFY ("ID" CONSTRAINT "NN_EVITYPSTATZASTUPCE_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_EVITYPSTATZASTUPCE" MODIFY ("S_NAZEV" CONSTRAINT "NN_EVITYPSTATZASTUPCE_NAZEV" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_EVITYPSTATZASTUPCE" ADD CONSTRAINT "PK_EVITYPSTATZASTUPCE" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_EVITYPSTATZASTUPCE"  ENABLE;


PROMPT Completed KP_CIS_EVITYPSTATZASTUPCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_EXTERNIRATING.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_EXTERNIRATING.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_EXTERNIRATING
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_EXTERNIRATING" MODIFY ("ID" CONSTRAINT "NN_KPCISEXTERNIRATING_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_EXTERNIRATING" MODIFY ("S_POPIS" CONSTRAINT "NN_KPCISEXTERNIRATING_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_EXTERNIRATING" MODIFY ("KATEGORIEKOEF" CONSTRAINT "NN_KPCISEXTERNIRATING_KATKOEF" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_EXTERNIRATING" ADD CONSTRAINT "PK_KPCISEXTERNIRATING" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPCISEXTERNIRATING"  ENABLE;


PROMPT Completed KP_CIS_EXTERNIRATING.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_FEIS_PRENOS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_FEIS_PRENOS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_FEIS_PRENOS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_FEIS_PRENOS" MODIFY ("ID" NOT NULL ENABLE);


PROMPT Completed KP_CIS_FEIS_PRENOS.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_FLOW.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_FLOW.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_FLOW
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_FLOW" MODIFY ("ID" CONSTRAINT "NN_KPCISFLOW_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_FLOW" MODIFY ("S_KOD" CONSTRAINT "NN_KPCISFLOW_KOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_FLOW" ADD CONSTRAINT "PK_KPCISFLOW" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPCISFLOW"  ENABLE;


PROMPT Completed KP_CIS_FLOW.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_FORMULAR.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_FORMULAR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_FORMULAR
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_FORMULAR" MODIFY ("ID" CONSTRAINT "NN_KPCISFORMULAR_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_FORMULAR" MODIFY ("S_ZKRATKA" CONSTRAINT "NN_CISFORMULAR_ZKRATKA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_FORMULAR" MODIFY ("S_POPIS" CONSTRAINT "NN_CISFORMULAR_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_FORMULAR" ADD CONSTRAINT "PK_KPCISFORMULAR" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPCISFORMULAR"  ENABLE;


PROMPT Completed KP_CIS_FORMULAR.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_FREKVENCEDPH.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_FREKVENCEDPH.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_FREKVENCEDPH
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_FREKVENCEDPH" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_FREKVENCEDPH" ADD CONSTRAINT "PK_FREKVENCEDPH" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_FREKVENCEDPH"  ENABLE;


PROMPT Completed KP_CIS_FREKVENCEDPH.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_IFRSSEGMENT.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_IFRSSEGMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_IFRSSEGMENT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_IFRSSEGMENT" MODIFY ("ID" CONSTRAINT "NN_KPCISIFRSSEGMENT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_IFRSSEGMENT" MODIFY ("S_POPIS" CONSTRAINT "NN_KPCISIFRSSEGMENT_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_IFRSSEGMENT" ADD CONSTRAINT "PK_KPCISIFRSSEGMENT" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPCISIFRSSEGMENT"  ENABLE;


PROMPT Completed KP_CIS_IFRSSEGMENT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_IFRSSUBSEGMENT.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_IFRSSUBSEGMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_IFRSSUBSEGMENT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_IFRSSUBSEGMENT" MODIFY ("ID" CONSTRAINT "NN_KPCISIFRSSUBSEGMENT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_IFRSSUBSEGMENT" MODIFY ("S_POPIS" CONSTRAINT "NN_KPCISIFRSSUBSEGMENT_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_IFRSSUBSEGMENT" MODIFY ("ID_IFRSSEGMENT" CONSTRAINT "NN_KPCISIFRSSUBSEGMENT_IDSEG" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_IFRSSUBSEGMENT" ADD CONSTRAINT "PK_KPCISIFRSSUBSEGMENT" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPCISIFRSSUBSEGMENT"  ENABLE;


PROMPT Completed KP_CIS_IFRSSUBSEGMENT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_IFRSTYPPRAVIDLO.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_IFRSTYPPRAVIDLO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_IFRSTYPPRAVIDLO
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_IFRSTYPPRAVIDLO" MODIFY ("ID" CONSTRAINT "NN_KPIFRSTYPPRAVIDLO_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_IFRSTYPPRAVIDLO" MODIFY ("S_ZKRATKA" CONSTRAINT "NN_KPIFRSTYPPRAVIDLO_ZKRATKA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_IFRSTYPPRAVIDLO" ADD CONSTRAINT "NN_KPIFRSTYPPRAVIDLO_TYP" CHECK ( c_typ is not null and c_typ in ( 'I', 'K' ) ) ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_IFRSTYPPRAVIDLO" ADD CONSTRAINT "NN_KPIFRSTYPPRAVIDLO_CHECK" CHECK ( b_check is not null and b_check in ( '0', '1', 'D')  ) ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_IFRSTYPPRAVIDLO" ADD CONSTRAINT "PK_KPIFRSTYPPRAVIDLO" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPIFRSTYPPRAVIDLO"  ENABLE;


PROMPT Completed KP_CIS_IFRSTYPPRAVIDLO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_IFRSTYPPRAVIDLODETAIL.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_IFRSTYPPRAVIDLODETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_IFRSTYPPRAVIDLODETAIL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_IFRSTYPPRAVIDLODETAIL" MODIFY ("ID" CONSTRAINT "NN_KPIFRSTYPPRAVD_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_IFRSTYPPRAVIDLODETAIL" MODIFY ("S_ZKRATKA" CONSTRAINT "NN_KPIFRSTYPPRAVD_ZKRATKA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_IFRSTYPPRAVIDLODETAIL" ADD CONSTRAINT "NN_KPIFRSTYPPRAVIDLODE_TYP" CHECK ( c_typ is not null and c_typ in ( 'I', 'K' ) ) ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_IFRSTYPPRAVIDLODETAIL" ADD CONSTRAINT "PK_KPIFRSTYPPRAVD" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPIFRSTYPPRAVD"  ENABLE;


PROMPT Completed KP_CIS_IFRSTYPPRAVIDLODETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_INDUSTRYTYPE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_INDUSTRYTYPE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_INDUSTRYTYPE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_INDUSTRYTYPE" MODIFY ("S_CODE" CONSTRAINT "NN_KPCISINDUSTRYTYPE_CODE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_INDUSTRYTYPE" MODIFY ("S_NAME" CONSTRAINT "NN_KPCISINDUSTRYTYPE_NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_INDUSTRYTYPE" MODIFY ("C_INVESTICE" CONSTRAINT "NN_KPCISINDUSTRYTYPE_INVESTICE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_INDUSTRYTYPE" ADD CONSTRAINT "PK_KPCISINDUSTRYTYPE" PRIMARY KEY ("S_CODE")
  USING INDEX "DB_JT"."PK_KPCISINDUSTRYTYPE"  ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_INDUSTRYTYPE" ADD CONSTRAINT "CN_KPCISINDUSTRYTYPE_INVESTICE" CHECK ( c_investice in ('F','N') ) ENABLE;


PROMPT Completed KP_CIS_INDUSTRYTYPE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ISIT_APLIKACE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_ISIT_APLIKACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_ISIT_APLIKACE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_ISIT_APLIKACE" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_ISIT_APLIKACE" ADD CONSTRAINT "PK_KP_CIS_ISIT_APLIKACE" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS  ENABLE;


PROMPT Completed KP_CIS_ISIT_APLIKACE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ISIT_BUDGET.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_ISIT_BUDGET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_ISIT_BUDGET
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_ISIT_BUDGET" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_ISIT_BUDGET" MODIFY ("S_KOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_ISIT_BUDGET" ADD CONSTRAINT "PK_CISISIT_BUDGET" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS  ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_ISIT_BUDGET" ADD CONSTRAINT "UN_CISISIT_BUDGET" UNIQUE ("S_KOD")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS  ENABLE;


PROMPT Completed KP_CIS_ISIT_BUDGET.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ISIT_BUDGET_DWH.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_ISIT_BUDGET_DWH.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_ISIT_BUDGET_DWH
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_ISIT_BUDGET_DWH" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_ISIT_BUDGET_DWH" MODIFY ("S_KOD" NOT NULL ENABLE);


PROMPT Completed KP_CIS_ISIT_BUDGET_DWH.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ISIT_BUDGET_IMP_01_2019.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_ISIT_BUDGET_IMP_01_2019.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_ISIT_BUDGET_IMP_01_2019
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_ISIT_BUDGET_IMP_01_2019" MODIFY ("S_KOD" NOT NULL ENABLE);


PROMPT Completed KP_CIS_ISIT_BUDGET_IMP_01_2019.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ISIT_BUDGET_IMP_02_2017.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_ISIT_BUDGET_IMP_02_2017.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_ISIT_BUDGET_IMP_02_2017
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_ISIT_BUDGET_IMP_02_2017" MODIFY ("S_KOD" NOT NULL ENABLE);


PROMPT Completed KP_CIS_ISIT_BUDGET_IMP_02_2017.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ISIT_BUDGET_IMP_02_2018.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_ISIT_BUDGET_IMP_02_2018.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_ISIT_BUDGET_IMP_02_2018
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_ISIT_BUDGET_IMP_02_2018" MODIFY ("S_KOD" NOT NULL ENABLE);


PROMPT Completed KP_CIS_ISIT_BUDGET_IMP_02_2018.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ISIT_DRUH_NAKLADU.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_ISIT_DRUH_NAKLADU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_ISIT_DRUH_NAKLADU
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_ISIT_DRUH_NAKLADU" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_ISIT_DRUH_NAKLADU" ADD CONSTRAINT "PK_KP_CIS_ISIT_DRUH_NAKLADU" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS  ENABLE;


PROMPT Completed KP_CIS_ISIT_DRUH_NAKLADU.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ISIT_TYP_POLOZKY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_ISIT_TYP_POLOZKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_ISIT_TYP_POLOZKY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_ISIT_TYP_POLOZKY" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_ISIT_TYP_POLOZKY" ADD CONSTRAINT "PK_KP_CIS_TYP_POLOZKY" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS  ENABLE;


PROMPT Completed KP_CIS_ISIT_TYP_POLOZKY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ISIT_TYP_SW.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_ISIT_TYP_SW.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_ISIT_TYP_SW
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_ISIT_TYP_SW" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_ISIT_TYP_SW" ADD CONSTRAINT "PK_KP_CIS_ISIT_TYP_SW" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS  ENABLE;


PROMPT Completed KP_CIS_ISIT_TYP_SW.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_KATEGORIEPROTISTRAN.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_KATEGORIEPROTISTRAN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_KATEGORIEPROTISTRAN
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_KATEGORIEPROTISTRAN" MODIFY ("ID" CONSTRAINT "NN_KPCISKATPROTISTRAN_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_KATEGORIEPROTISTRAN" MODIFY ("ID_SPOLECNOST" CONSTRAINT "NN_KPCISKATPROTISTRAN_IDSPOL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_KATEGORIEPROTISTRAN" MODIFY ("S_EXTID" CONSTRAINT "NN_KPCISKATPROTISTRAN_EXTID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_KATEGORIEPROTISTRAN" MODIFY ("S_NAZEV" CONSTRAINT "NN_KPCISKATPROTISTRAN_NAZEV" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_KATEGORIEPROTISTRAN" MODIFY ("C_LICENCE" CONSTRAINT "NN_KPCISKATPROTISTRAN_LICENCE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_KATEGORIEPROTISTRAN" ADD CONSTRAINT "UN_KPCISKATPROTISTRAN_EXTID" UNIQUE ("S_EXTID")
  USING INDEX "DB_JT"."UN_KPCISKATPROTISTRAN_EXTID"  ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_KATEGORIEPROTISTRAN" ADD CONSTRAINT "PK_KPCISKATPROTISTRAN" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPCISKATPROTISTRAN"  ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_KATEGORIEPROTISTRAN" ADD CONSTRAINT "CN_KPCISKATPROTISTRAN_LIKVIDA" CHECK ( c_likvida in ('0','1') ) ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_KATEGORIEPROTISTRAN" ADD CONSTRAINT "CN_KPCISKATPROTISTRAN_SPOLRIZ" CHECK ( c_spolecneRizeny in ('0','1') ) ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_KATEGORIEPROTISTRAN" ADD CONSTRAINT "CN_KPCISKATPROTISTRAN_LICENCE" CHECK ( c_licence in ('0','1') ) ENABLE;


PROMPT Completed KP_CIS_KATEGORIEPROTISTRAN.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_KATSPOL.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_KATSPOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_KATSPOL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_KATSPOL" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_KATSPOL" ADD PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "INDEXY"  ENABLE;


PROMPT Completed KP_CIS_KATSPOL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_LIST.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_LIST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_LIST
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_LIST" MODIFY ("ID" CONSTRAINT "NN_KPCISLIST_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_LIST" MODIFY ("S_ZKRATKA" CONSTRAINT "NN_KPCISLIST_ZKRATKA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_LIST" MODIFY ("NL_DEFAULTPORADILIST" CONSTRAINT "NN_KPCISLIST_PORADI" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_LIST" ADD CONSTRAINT "PK_KPCISLIST" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPCISLIST"  ENABLE;


PROMPT Completed KP_CIS_LIST.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_LOG_DWH.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_LOG_DWH.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_LOG_DWH
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_LOG_DWH" MODIFY ("CODE" NOT NULL ENABLE);


PROMPT Completed KP_CIS_LOG_DWH.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_MAJETKOVAUCASTTYPTRAN.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_MAJETKOVAUCASTTYPTRAN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_MAJETKOVAUCASTTYPTRAN
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_MAJETKOVAUCASTTYPTRAN" MODIFY ("ID" CONSTRAINT "NN_KPMAJUCASTTYPT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_MAJETKOVAUCASTTYPTRAN" MODIFY ("S_POPIS" CONSTRAINT "NN_KPMAJUCASTTYPT_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_MAJETKOVAUCASTTYPTRAN" ADD CONSTRAINT "PK_KPMAJETKOVAUCASTTYPT" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPMAJETKOVAUCASTTYPT"  ENABLE;


PROMPT Completed KP_CIS_MAJETKOVAUCASTTYPTRAN.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_MAJETKOVAUCASTZPUSOB.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_MAJETKOVAUCASTZPUSOB.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_MAJETKOVAUCASTZPUSOB
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_MAJETKOVAUCASTZPUSOB" MODIFY ("ID" CONSTRAINT "NN_KPMAJUCASTZPUSOB_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_MAJETKOVAUCASTZPUSOB" MODIFY ("S_POPIS" CONSTRAINT "NN_KPMAJUCASTZPUSOB_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_MAJETKOVAUCASTZPUSOB" ADD CONSTRAINT "PK_KPMAJETKOVAUCASTZPUSOB" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPMAJETKOVAUCASTZPUSOB"  ENABLE;


PROMPT Completed KP_CIS_MAJETKOVAUCASTZPUSOB.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_MENA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_MENA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_MENA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_MENA" MODIFY ("ID" CONSTRAINT "NN_KPCISMENA_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_MENA" ADD CONSTRAINT "PK_KPCISMENA" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPCISMENA"  ENABLE;


PROMPT Completed KP_CIS_MENA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_MENA_20_08_13.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_MENA_20_08_13.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_MENA_20_08_13
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_MENA_20_08_13" MODIFY ("ID" NOT NULL ENABLE);


PROMPT Completed KP_CIS_MENA_20_08_13.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_MISUCTYMDD.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_MISUCTYMDD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_MISUCTYMDD
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_MISUCTYMDD" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_MISUCTYMDD" ADD CONSTRAINT "PK_CISMISUCTYMDD" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISMISUCTYMDD"  ENABLE;


PROMPT Completed KP_CIS_MISUCTYMDD.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_MNGSEGMENT.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_MNGSEGMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_MNGSEGMENT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_MNGSEGMENT" MODIFY ("ID" CONSTRAINT "NN_KPCISMNGSEGMENT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_MNGSEGMENT" MODIFY ("S_POPIS" CONSTRAINT "NN_KPCISMNGSEGMENT_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_MNGSEGMENT" ADD CONSTRAINT "PK_KPCISMNGSEGMENT" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPCISMNGSEGMENT"  ENABLE;


PROMPT Completed KP_CIS_MNGSEGMENT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_MNGSEGMENT_BCK_SEG.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_MNGSEGMENT_BCK_SEG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_MNGSEGMENT_BCK_SEG
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_MNGSEGMENT_BCK_SEG" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_MNGSEGMENT_BCK_SEG" MODIFY ("S_POPIS" NOT NULL ENABLE);


PROMPT Completed KP_CIS_MNGSEGMENT_BCK_SEG.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_NOMINEE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_NOMINEE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_NOMINEE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_NOMINEE" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_NOMINEE" ADD CONSTRAINT "PK_CISNOMINEE" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISNOMINEE"  ENABLE;


PROMPT Completed KP_CIS_NOMINEE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ODBOR_SKUPINA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_ODBOR_SKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_ODBOR_SKUPINA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_ODBOR_SKUPINA" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_ODBOR_SKUPINA" MODIFY ("S_KOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_ODBOR_SKUPINA" MODIFY ("ID_USER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_ODBOR_SKUPINA" ADD CONSTRAINT "KP_CIS_ODBOR_SKUPINA_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed KP_CIS_ODBOR_SKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ODBOR_ZARADENIE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_ODBOR_ZARADENIE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_ODBOR_ZARADENIE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_ODBOR_ZARADENIE" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_ODBOR_ZARADENIE" MODIFY ("S_KOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_ODBOR_ZARADENIE" MODIFY ("ID_USER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_ODBOR_ZARADENIE" ADD CONSTRAINT "KP_CIS_ODBOR_ZARADENIE_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed KP_CIS_ODBOR_ZARADENIE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_OPCE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_OPCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_OPCE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_OPCE" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_OPCE" ADD CONSTRAINT "PK_CISOPCE" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISOPCE"  ENABLE;


PROMPT Completed KP_CIS_OPCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_PBKATEGORIEKLIENTA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_PBKATEGORIEKLIENTA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_PBKATEGORIEKLIENTA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_PBKATEGORIEKLIENTA" MODIFY ("ID" CONSTRAINT "NN_CISPBKATEGORIEKLIENTA_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_PBKATEGORIEKLIENTA" MODIFY ("S_POPIS" CONSTRAINT "NN_CISPBKATEGORIEKLIENTA_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_PBKATEGORIEKLIENTA" ADD CONSTRAINT "PK_CISPBKATEGORIEKLIENTA" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISPBKATEGORIEKLIENTA"  ENABLE;


PROMPT Completed KP_CIS_PBKATEGORIEKLIENTA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_PBSTATUSKLIENTA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_PBSTATUSKLIENTA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_PBSTATUSKLIENTA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_PBSTATUSKLIENTA" MODIFY ("ID" CONSTRAINT "NN_CISPBSTATUSKLIENTA_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_PBSTATUSKLIENTA" MODIFY ("S_POPIS" CONSTRAINT "NN_CISPBSTATUSKLIENTA_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_PBSTATUSKLIENTA" ADD CONSTRAINT "PK_CISPBSTATUSKLIENTA" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISPBSTATUSKLIENTA"  ENABLE;


PROMPT Completed KP_CIS_PBSTATUSKLIENTA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_PRENOSKATEGORIE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_PRENOSKATEGORIE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_PRENOSKATEGORIE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_PRENOSKATEGORIE" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_PRENOSKATEGORIE" MODIFY ("S_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_PRENOSKATEGORIE" ADD CONSTRAINT "PK_CISPRENOSKATEGORIE" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISPRENOSKATEGORIE"  ENABLE;


PROMPT Completed KP_CIS_PRENOSKATEGORIE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_PRENOSPRIORITA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_PRENOSPRIORITA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_PRENOSPRIORITA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_PRENOSPRIORITA" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_PRENOSPRIORITA" MODIFY ("S_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_PRENOSPRIORITA" ADD CONSTRAINT "PK_CISPRENOSPRIORITA" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISPRENOSPRIORITA"  ENABLE;


PROMPT Completed KP_CIS_PRENOSPRIORITA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_PROJEKTCASHFLOWTYP.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_PROJEKTCASHFLOWTYP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_PROJEKTCASHFLOWTYP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_PROJEKTCASHFLOWTYP" MODIFY ("ID" CONSTRAINT "NN_KPPROJCFTYP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_PROJEKTCASHFLOWTYP" ADD CONSTRAINT "PK_KPPROJCFTYP" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPPROJCFTYP"  ENABLE;


PROMPT Completed KP_CIS_PROJEKTCASHFLOWTYP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_PROJEKTFREKVENCE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_PROJEKTFREKVENCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_PROJEKTFREKVENCE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_PROJEKTFREKVENCE" MODIFY ("ID" CONSTRAINT "NN_KPCISPF_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_PROJEKTFREKVENCE" MODIFY ("S_POPIS" CONSTRAINT "NN_KPCISPF_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_PROJEKTFREKVENCE" MODIFY ("NL_FREKVENCE" CONSTRAINT "NN_KPCISPF_FREKVENCE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_PROJEKTFREKVENCE" ADD CONSTRAINT "PK_KPCISPF" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPCISPF"  ENABLE;


PROMPT Completed KP_CIS_PROJEKTFREKVENCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_PROJEKTINOUTTYP.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_PROJEKTINOUTTYP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_PROJEKTINOUTTYP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_PROJEKTINOUTTYP" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_PROJEKTINOUTTYP" ADD CONSTRAINT "PK_CISPROJCFTYP" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISPROJCFTYP"  ENABLE;


PROMPT Completed KP_CIS_PROJEKTINOUTTYP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_PROJEKTKATEGORIE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_PROJEKTKATEGORIE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_PROJEKTKATEGORIE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_PROJEKTKATEGORIE" MODIFY ("ID" CONSTRAINT "NN_KPCISPKAT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_PROJEKTKATEGORIE" MODIFY ("S_POPIS" CONSTRAINT "NN_KPCISPKAT_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_PROJEKTKATEGORIE" ADD CONSTRAINT "PK_KPCISPKAT" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPCISPKAT"  ENABLE;


PROMPT Completed KP_CIS_PROJEKTKATEGORIE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_PROJEKTSTATUS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_PROJEKTSTATUS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_PROJEKTSTATUS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_PROJEKTSTATUS" MODIFY ("ID" CONSTRAINT "NN_KPCISPS_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_PROJEKTSTATUS" MODIFY ("S_POPIS" CONSTRAINT "NN_KPCISPS_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_PROJEKTSTATUS" ADD CONSTRAINT "PK_KPCISPS" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPCISPS"  ENABLE;


PROMPT Completed KP_CIS_PROJEKTSTATUS.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_PROJEKTUVER.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_PROJEKTUVER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_PROJEKTUVER
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_PROJEKTUVER" MODIFY ("ID" CONSTRAINT "NN_KPCISPUVER_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_PROJEKTUVER" MODIFY ("S_POPIS" CONSTRAINT "NN_KPCISPUVER_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_PROJEKTUVER" ADD CONSTRAINT "PK_KPCISPUVER" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPCISPUVER"  ENABLE;


PROMPT Completed KP_CIS_PROJEKTUVER.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_PROJEKT_SKUPINA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_PROJEKT_SKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_PROJEKT_SKUPINA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_PROJEKT_SKUPINA" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_PROJEKT_SKUPINA" MODIFY ("S_KOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_PROJEKT_SKUPINA" MODIFY ("ID_USER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_PROJEKT_SKUPINA" ADD CONSTRAINT "KP_CIS_PROJ_SKUPINA_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed KP_CIS_PROJEKT_SKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_PROJEKT_TYPY_TRAN.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_PROJEKT_TYPY_TRAN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_PROJEKT_TYPY_TRAN
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_PROJEKT_TYPY_TRAN" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_PROJEKT_TYPY_TRAN" MODIFY ("S_KOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_PROJEKT_TYPY_TRAN" MODIFY ("ID_USER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_PROJEKT_TYPY_TRAN" ADD CONSTRAINT "KP_CIS_PROJEKT_TYPYTRAN_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed KP_CIS_PROJEKT_TYPY_TRAN.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_RADEKTEXT.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_RADEKTEXT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_RADEKTEXT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_RADEKTEXT" MODIFY ("ID" CONSTRAINT "NN_KPRADEKTEXT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_RADEKTEXT" ADD CONSTRAINT "PK_KPRADEKTEXT" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPRADEKTEXT"  ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_RADEKTEXT" ADD CONSTRAINT "CN_KPRADEKTEXT_TYP" CHECK ( c_typ is not null and c_typ in ( 'N', 'T') ) ENABLE NOVALIDATE;


PROMPT Completed KP_CIS_RADEKTEXT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_RADEKTEXTLANG.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_RADEKTEXTLANG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_RADEKTEXTLANG
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_RADEKTEXTLANG" MODIFY ("ID" CONSTRAINT "NN_KPRADEKTEXTLANG_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_RADEKTEXTLANG" MODIFY ("S_LOCALE" CONSTRAINT "NN_KPRADEKTEXTLANG_LOCALE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_RADEKTEXTLANG" ADD CONSTRAINT "PK_KPRADEKTEXTLANG" PRIMARY KEY ("ID", "S_LOCALE")
  USING INDEX "DB_JT"."PK_KPRADEKTEXTLANG"  ENABLE;


PROMPT Completed KP_CIS_RADEKTEXTLANG.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_SEGMENTZASTUPTYP.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_SEGMENTZASTUPTYP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_SEGMENTZASTUPTYP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_SEGMENTZASTUPTYP" ADD CONSTRAINT "PK_CISSEGMENTZASTUPTYP" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISSEGMENTZASTUPTYP"  ENABLE;


PROMPT Completed KP_CIS_SEGMENTZASTUPTYP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_SPOLECNOSTKATEGORIE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_SPOLECNOSTKATEGORIE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_SPOLECNOSTKATEGORIE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_SPOLECNOSTKATEGORIE" MODIFY ("ID" CONSTRAINT "NN_KPSPOLECNOSTKATEGORIE_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_SPOLECNOSTKATEGORIE" MODIFY ("S_ZKRATKA" CONSTRAINT "NN_KPSPOLECNOSTKATEGORIE_Z" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_SPOLECNOSTKATEGORIE" MODIFY ("S_LOCALE" CONSTRAINT "NN_KPCISSPOLKATEG" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_SPOLECNOSTKATEGORIE" ADD CONSTRAINT "PK_KPSPOLECNOSTKATEGORIE" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPSPOLECNOSTKATEGORIE"  ENABLE;


PROMPT Completed KP_CIS_SPOLECNOSTKATEGORIE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_SPOLECNOSTPRAVO.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_SPOLECNOSTPRAVO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_SPOLECNOSTPRAVO
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_SPOLECNOSTPRAVO" MODIFY ("ID" CONSTRAINT "NN_CISSPOLPRAVO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_SPOLECNOSTPRAVO" MODIFY ("S_ZKRATKA" CONSTRAINT "NN_CISSPOLPRAVOZKRATKA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_SPOLECNOSTPRAVO" MODIFY ("S_POPIS" CONSTRAINT "NN_CISSPOLPRAVOPOPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_SPOLECNOSTPRAVO" ADD CONSTRAINT "PK_CISSPOLPRAVO" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISSPOLPRAVO"  ENABLE;


PROMPT Completed KP_CIS_SPOLECNOSTPRAVO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_SPOL_SKUPINA0.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_SPOL_SKUPINA0.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_SPOL_SKUPINA0
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_SPOL_SKUPINA0" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_SPOL_SKUPINA0" MODIFY ("S_KOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_SPOL_SKUPINA0" MODIFY ("ID_USER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_SPOL_SKUPINA0" ADD CONSTRAINT "KP_CIS_SPOL_SKUPINA0_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed KP_CIS_SPOL_SKUPINA0.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_SPOL_SKUPINA1.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_SPOL_SKUPINA1.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_SPOL_SKUPINA1
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_SPOL_SKUPINA1" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_SPOL_SKUPINA1" MODIFY ("S_KOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_SPOL_SKUPINA1" MODIFY ("ID_USER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_SPOL_SKUPINA1" ADD CONSTRAINT "KP_CIS_SPOL_SKUPINA1_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed KP_CIS_SPOL_SKUPINA1.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_SPOL_SKUPINA2.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_SPOL_SKUPINA2.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_SPOL_SKUPINA2
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_SPOL_SKUPINA2" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_SPOL_SKUPINA2" MODIFY ("S_KOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_SPOL_SKUPINA2" MODIFY ("ID_USER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_SPOL_SKUPINA2" ADD CONSTRAINT "KP_CIS_SPOL_SKUPINA2_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed KP_CIS_SPOL_SKUPINA2.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_SPOL_SKUPINA3.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_SPOL_SKUPINA3.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_SPOL_SKUPINA3
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_SPOL_SKUPINA3" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_SPOL_SKUPINA3" MODIFY ("S_KOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_SPOL_SKUPINA3" MODIFY ("ID_USER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_SPOL_SKUPINA3" ADD CONSTRAINT "KP_CIS_SPOL_SKUPINA3_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed KP_CIS_SPOL_SKUPINA3.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_STAT.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_STAT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_STAT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_STAT" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_STAT" MODIFY ("C_ZONA" CONSTRAINT "NN_KPCISSTAT_ZONA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_STAT" ADD CONSTRAINT "PK_CISSTAT" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISSTAT"  ENABLE;


PROMPT Completed KP_CIS_STAT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_SUBJECT.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_SUBJECT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_SUBJECT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_SUBJECT" MODIFY ("ID" CONSTRAINT "NN_KPSUBJECT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_SUBJECT" ADD CONSTRAINT "PK_KPSUBJECT" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPSUBJECT"  ENABLE;


PROMPT Completed KP_CIS_SUBJECT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_SUBJEKTSKUPINA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_SUBJEKTSKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_SUBJEKTSKUPINA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_SUBJEKTSKUPINA" MODIFY ("ID_SKUPINA" CONSTRAINT "NN_KPCISSUBJEKTSKUPINA_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_SUBJEKTSKUPINA" MODIFY ("S_CUSTGROUPCODE" CONSTRAINT "NN_KPCISSUBJEKTSKUPINA_GRCODE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_SUBJEKTSKUPINA" ADD CONSTRAINT "PK_KPCISSUBJEKTSKUPINA" PRIMARY KEY ("ID_SKUPINA")
  USING INDEX "DB_JT"."PK_KPCISSUBJEKTSKUPINA"  ENABLE;


PROMPT Completed KP_CIS_SUBJEKTSKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_SUBTYPCLENSTVI.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_SUBTYPCLENSTVI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_SUBTYPCLENSTVI
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_SUBTYPCLENSTVI" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_SUBTYPCLENSTVI" MODIFY ("S_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_SUBTYPCLENSTVI" ADD CONSTRAINT "PK_CISSUBTYPCLENSTVI" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISSUBTYPCLENSTVI"  ENABLE;


PROMPT Completed KP_CIS_SUBTYPCLENSTVI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_TYPBUDGETUPROJEKTU.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_TYPBUDGETUPROJEKTU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_TYPBUDGETUPROJEKTU
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_TYPBUDGETUPROJEKTU" MODIFY ("ID" CONSTRAINT "NN_KPCISTYPPROJBUDGETU_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_TYPBUDGETUPROJEKTU" MODIFY ("S_POPIS" CONSTRAINT "NN_KPCISTYPPROJBUDGETU_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_TYPBUDGETUPROJEKTU" ADD CONSTRAINT "PK_KPCISTYPPROJBUDGETU" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPCISTYPPROJBUDGETU"  ENABLE;


PROMPT Completed KP_CIS_TYPBUDGETUPROJEKTU.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_TYPFAKTURY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_TYPFAKTURY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_TYPFAKTURY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_TYPFAKTURY" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_TYPFAKTURY" MODIFY ("TFID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_TYPFAKTURY" ADD CONSTRAINT "PK_TYPFKT" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_TYPFKT"  ENABLE;


PROMPT Completed KP_CIS_TYPFAKTURY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_TYPPROJEKTOVEBILANCE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_TYPPROJEKTOVEBILANCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_TYPPROJEKTOVEBILANCE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_TYPPROJEKTOVEBILANCE" MODIFY ("ID" CONSTRAINT "NN_KPCISTYPPROJBILANCE_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_TYPPROJEKTOVEBILANCE" MODIFY ("S_POPIS" CONSTRAINT "NN_KPCISTYPPROJBILANCE_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_TYPPROJEKTOVEBILANCE" ADD CONSTRAINT "PK_KPCISTYPPROJBILANCE" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPCISTYPPROJBILANCE"  ENABLE;


PROMPT Completed KP_CIS_TYPPROJEKTOVEBILANCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_TYPPROJEKTU.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_TYPPROJEKTU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_TYPPROJEKTU
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_TYPPROJEKTU" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_TYPPROJEKTU" MODIFY ("S_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_TYPPROJEKTU" ADD CONSTRAINT "PK_CISTYPPROJEKTU" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISTYPPROJEKTU"  ENABLE;


PROMPT Completed KP_CIS_TYPPROJEKTU.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_TYPSUBETAPA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_TYPSUBETAPA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_TYPSUBETAPA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_TYPSUBETAPA" MODIFY ("ID" CONSTRAINT "NN_CISTYPSUBETAPA_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_TYPSUBETAPA" ADD CONSTRAINT "PK_CISTYPSUBETAPA" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISTYPSUBETAPA"  ENABLE;


PROMPT Completed KP_CIS_TYPSUBETAPA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_TYPSUBJECT.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_TYPSUBJECT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_TYPSUBJECT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_TYPSUBJECT" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_TYPSUBJECT" MODIFY ("S_KOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_TYPSUBJECT" ADD CONSTRAINT "PK_CISTYPSUBJECTU" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISTYPSUBJECTU"  ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_TYPSUBJECT" ADD UNIQUE ("S_KOD")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "INDEXY"  ENABLE;


PROMPT Completed KP_CIS_TYPSUBJECT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_TYPTRANSAKCE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_TYPTRANSAKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_TYPTRANSAKCE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_TYPTRANSAKCE" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_TYPTRANSAKCE" MODIFY ("DT_PLATNOSTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_TYPTRANSAKCE" MODIFY ("DT_PLATNOSTDO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_TYPTRANSAKCE" MODIFY ("C_CAPEX_OPEX" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_TYPTRANSAKCE" ADD CONSTRAINT "PK_CISTYPTRANSAKCE" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISTYPTRANSAKCE"  ENABLE;


PROMPT Completed KP_CIS_TYPTRANSAKCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_TYPTRANSAKCEGROUP.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_TYPTRANSAKCEGROUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_TYPTRANSAKCEGROUP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_TYPTRANSAKCEGROUP" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_TYPTRANSAKCEGROUP" MODIFY ("S_KOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_TYPTRANSAKCEGROUP" MODIFY ("DT_PLATNOSTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_TYPTRANSAKCEGROUP" MODIFY ("DT_PLATNOSTDO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_TYPTRANSAKCEGROUP" ADD CONSTRAINT "UN_CISTYPTRANSAKCEGROUP_KOD" UNIQUE ("S_KOD")
  USING INDEX "DB_JT"."UN_CISTYPTRANSAKCEGROUP_KOD"  ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_TYPTRANSAKCEGROUP" ADD CONSTRAINT "PK_CISTYPTRANSAKCEGROUP" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISTYPTRANSAKCEGROUP"  ENABLE;


PROMPT Completed KP_CIS_TYPTRANSAKCEGROUP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_TYPZAJISTENI.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_TYPZAJISTENI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_TYPZAJISTENI
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_TYPZAJISTENI" MODIFY ("ID" CONSTRAINT "NN_KPCISTYPZAJISTENI_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_TYPZAJISTENI" MODIFY ("S_EXTID" CONSTRAINT "NN_KPCISTYPZAJISTENI_EXTID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_TYPZAJISTENI" MODIFY ("ID_TYPNASTROJE" CONSTRAINT "NN_KPCISTYPZAJISTENI_IDTYPNAS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_TYPZAJISTENI" ADD CONSTRAINT "UN_KPCISTYPZAJISTENI_EXTID" UNIQUE ("S_EXTID")
  USING INDEX "DB_JT"."UN_KPCISTYPZAJISTENI_EXTID"  ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_TYPZAJISTENI" ADD CONSTRAINT "PK_KPCISTYPZAJISTENI" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPCISTYPZAJISTENI"  ENABLE;


PROMPT Completed KP_CIS_TYPZAJISTENI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_TYP_TRAN_CAPEX_OPEX.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_TYP_TRAN_CAPEX_OPEX.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_TYP_TRAN_CAPEX_OPEX
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_TYP_TRAN_CAPEX_OPEX" MODIFY ("C_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_TYP_TRAN_CAPEX_OPEX" ADD CONSTRAINT "PK_CIS_TYP_TRAN_CAPEX_OPEX" PRIMARY KEY ("C_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS  ENABLE;


PROMPT Completed KP_CIS_TYP_TRAN_CAPEX_OPEX.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_UCELUVERU.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_UCELUVERU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_UCELUVERU
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_UCELUVERU" MODIFY ("ID" CONSTRAINT "NN_KPCISUCELUVERU_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_UCELUVERU" MODIFY ("S_EXTID" CONSTRAINT "NN_KPCISUCELUVERU_EXTID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_UCELUVERU" MODIFY ("C_KOMERCNI" CONSTRAINT "NN_KPCISUCELUVERU_KOMERCNI" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_UCELUVERU" ADD CONSTRAINT "UN_KPCISUCELUVERU_EXTID" UNIQUE ("S_EXTID")
  USING INDEX "DB_JT"."UN_KPCISUCELUVERU_EXTID"  ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_UCELUVERU" ADD CONSTRAINT "PK_KPCISUCELUVERU" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPCISUCELUVERU"  ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_UCELUVERU" ADD CONSTRAINT "CN_KPCISUCELUVERU_KOMERCNI" CHECK ( c_komercni in ('0','1') ) ENABLE;


PROMPT Completed KP_CIS_UCELUVERU.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_UCETPRIMARNI.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_UCETPRIMARNI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_UCETPRIMARNI
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_UCETPRIMARNI" MODIFY ("ID_CISDATABAZE" CONSTRAINT "NN_KPUCETPRIM_DB" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_UCETPRIMARNI" MODIFY ("C_TYP" CONSTRAINT "NN_KPUCETPRIM_TYP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_UCETPRIMARNI" MODIFY ("S_UCET" CONSTRAINT "NN_KPUCETPRIM_UCET" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_UCETPRIMARNI" ADD CONSTRAINT "PK_KPUCETPRIMARNI" PRIMARY KEY ("ID_CISDATABAZE", "C_TYP", "S_UCET")
  USING INDEX "DB_JT"."PK_KPUCETPRIMARNI"  ENABLE;


PROMPT Completed KP_CIS_UCETPRIMARNI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_UCETSUMATYP.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_UCETSUMATYP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_UCETSUMATYP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_UCETSUMATYP" MODIFY ("ID" CONSTRAINT "NN_KPCISUCETSUMATYP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_UCETSUMATYP" MODIFY ("S_ZKRATKA" CONSTRAINT "NN_KPCISUCETSUMATYP_ZK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_UCETSUMATYP" MODIFY ("POCET_UCTU" CONSTRAINT "NN_KPCISUCETSUMATYP_PU" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_UCETSUMATYP" MODIFY ("C_SHOWINUNIF" CONSTRAINT "NN_CISUCETSUMATYP_SHOWUNIF" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_UCETSUMATYP" ADD CONSTRAINT "PK_KPCISUCETSUMATYP" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPCISUCETSUMATYP"  ENABLE;


PROMPT Completed KP_CIS_UCETSUMATYP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_UCETUNIF.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_UCETUNIF.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_UCETUNIF
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_UCETUNIF" MODIFY ("ID" CONSTRAINT "NN_KPUCETUNIF_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_UCETUNIF" MODIFY ("S_UCET" CONSTRAINT "NN_KPUCETUNIF_UCET" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_UCETUNIF" ADD CONSTRAINT "PK_KPUCETUNIF" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPUCETUNIF"  ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_UCETUNIF" ADD CONSTRAINT "CN_CISUCETUNIF_TYPECOUNTRY" CHECK ( C_typeCounterParties  is not null and C_typeCounterParties in ('0','1') ) ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_UCETUNIF" ADD CONSTRAINT "CN_KPCISUCETUNIF_CLASS" CHECK ( c_class is not null and c_class in ( 'A', 'L', 'I', 'E', '?', '3', '4' ) ) ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_UCETUNIF" ADD CONSTRAINT "CN_CISUCETUNIF_VAZBY" CHECK ( c_pocitatVazby  is not null and c_pocitatVazby in ('0','1') ) ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_UCETUNIF" ADD CONSTRAINT "CN_CISUCETUNIF_MATURITY" CHECK (C_Maturity  is not null and C_Maturity in ('0','1')) ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_UCETUNIF" ADD CONSTRAINT "CN_CISUCETUNIF_COUNTRY" CHECK ( c_country  is not null and c_country in ('0','1') ) ENABLE;


PROMPT Completed KP_CIS_UCETUNIF.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_UCETUNIFCLASS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_UCETUNIFCLASS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_UCETUNIFCLASS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_UCETUNIFCLASS" ADD CONSTRAINT "PK_KPUCETUNIFCLASS" PRIMARY KEY ("C_CLASS")
  USING INDEX "DB_JT"."PK_KPUCETUNIFCLASS"  ENABLE;


PROMPT Completed KP_CIS_UCETUNIFCLASS.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_UCETUNIFLANG.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_UCETUNIFLANG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_UCETUNIFLANG
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_UCETUNIFLANG" MODIFY ("ID_CISUCETUNIF" CONSTRAINT "NN_KPUCETUNIFLANG_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_UCETUNIFLANG" MODIFY ("S_LOCALE" CONSTRAINT "NN_KPUCETUNIFLANG_LOCALE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_UCETUNIFLANG" ADD CONSTRAINT "PK_KPUCETUNIFLANG" PRIMARY KEY ("ID_CISUCETUNIF", "S_LOCALE")
  USING INDEX "DB_JT"."PK_KPUCETUNIFLANG"  ENABLE;


PROMPT Completed KP_CIS_UCETUNIFLANG.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_UCETUNIF_BCK_IFRS9.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_UCETUNIF_BCK_IFRS9.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_UCETUNIF_BCK_IFRS9
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_UCETUNIF_BCK_IFRS9" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_UCETUNIF_BCK_IFRS9" MODIFY ("S_UCET" NOT NULL ENABLE);


PROMPT Completed KP_CIS_UCETUNIF_BCK_IFRS9.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_UCETUNIF_IFRS9_V1.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_UCETUNIF_IFRS9_V1.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_UCETUNIF_IFRS9_V1
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_UCETUNIF_IFRS9_V1" MODIFY ("ID" NOT NULL DISABLE);
  ALTER TABLE "DB_JT"."KP_CIS_UCETUNIF_IFRS9_V1" MODIFY ("S_UCET" NOT NULL ENABLE);


PROMPT Completed KP_CIS_UCETUNIF_IFRS9_V1.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_UCETUNIF_IFRS9_V1_LNG.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_UCETUNIF_IFRS9_V1_LNG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_UCETUNIF_IFRS9_V1_LNG
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_UCETUNIF_IFRS9_V1_LNG" MODIFY ("S_UCET" NOT NULL ENABLE);


PROMPT Completed KP_CIS_UCETUNIF_IFRS9_V1_LNG.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_UCETVAZBAUCETTYP.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_UCETVAZBAUCETTYP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_UCETVAZBAUCETTYP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_UCETVAZBAUCETTYP" ADD CONSTRAINT "PK_CISUCETVAZBAUCETTYP" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISUCETVAZBAUCETTYP"  ENABLE;


PROMPT Completed KP_CIS_UCETVAZBAUCETTYP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ZAMEK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_ZAMEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_ZAMEK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_ZAMEK" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_ZAMEK" ADD CONSTRAINT "PK_CISZAMEK" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISZAMEK"  ENABLE;


PROMPT Completed KP_CIS_ZAMEK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ZISKSRSKUPINA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_CIS_ZISKSRSKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_CIS_ZISKSRSKUPINA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_ZISKSRSKUPINA" MODIFY ("ID" CONSTRAINT "NN_KPCISZISKSRSKUPINA_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_ZISKSRSKUPINA" MODIFY ("S_POPIS" CONSTRAINT "NN_KPCISZISKSRSKUPINA_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_CIS_ZISKSRSKUPINA" ADD CONSTRAINT "PK_KPCISZISKSRSKUPINA" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPCISZISKSRSKUPINA"  ENABLE;


PROMPT Completed KP_CIS_ZISKSRSKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_AUDIT.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_AUDIT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_AUDIT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_AUDIT" MODIFY ("ID_KTGUCETNISPOLECNOST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_AUDIT" MODIFY ("DT_DATUM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_AUDIT" ADD CONSTRAINT "PK_DATAUDIT" PRIMARY KEY ("ID_KTGUCETNISPOLECNOST", "DT_DATUM")
  USING INDEX "DB_JT"."PK_DATAUDIT"  ENABLE;


PROMPT Completed KP_DAT_AUDIT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_BUDGET.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_BUDGET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_BUDGET
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_BUDGET" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_BUDGET" MODIFY ("DT_PLATNOSTOD" CONSTRAINT "NN_DATBUDGET_PLATNOSTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_BUDGET" MODIFY ("DT_PLATNOSTDO" CONSTRAINT "NN_DATBUDGET_PLATNOSTDO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_BUDGET" ADD CONSTRAINT "CH_BUDGET_ODBORPROJEKT" CHECK ((id_ktgOdbor is null or id_ktgProjekt is null) and (id_ktgOdbor is not null or id_ktgProjekt is not null)) ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_BUDGET" ADD CONSTRAINT "PK_DATBUDGET" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_DATBUDGET"  ENABLE;


PROMPT Completed KP_DAT_BUDGET.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_BUDGETPOLOZKA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_BUDGETPOLOZKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_BUDGETPOLOZKA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_BUDGETPOLOZKA" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_BUDGETPOLOZKA" MODIFY ("ID_BUDGET" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_BUDGETPOLOZKA" MODIFY ("ID_CISTYPTRAN" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_BUDGETPOLOZKA" ADD CONSTRAINT "PK_DATBUDGETPOLOZKA" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_DATBUDGETPOLOZKA"  ENABLE;


PROMPT Completed KP_DAT_BUDGETPOLOZKA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_BUDGETZASTUP.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_BUDGETZASTUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_BUDGETZASTUP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_BUDGETZASTUP" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_BUDGETZASTUP" ADD CONSTRAINT "PK_KPBUDGETZASTUP" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPBUDGETZASTUP"  ENABLE;


PROMPT Completed KP_DAT_BUDGETZASTUP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DANE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DANE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DANE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DANE" MODIFY ("ID_KTGUCETNISPOLECNOST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DANE" MODIFY ("DT_DATUM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DANE" ADD CONSTRAINT "PK_DATDANE" PRIMARY KEY ("ID_KTGUCETNISPOLECNOST", "DT_DATUM")
  USING INDEX "DB_JT"."PK_DATDANE"  ENABLE;


PROMPT Completed KP_DAT_DANE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DANOVESAZBY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DANOVESAZBY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DANOVESAZBY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DANOVESAZBY" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DANOVESAZBY" MODIFY ("S_STAT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DANOVESAZBY" MODIFY ("ND_PASMOOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DANOVESAZBY" MODIFY ("ND_PASMODO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DANOVESAZBY" MODIFY ("S_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DANOVESAZBY" MODIFY ("ND_SAZBADANE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DANOVESAZBY" ADD CONSTRAINT "PK_DANOVESAZBY" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_DANOVESAZBY"  ENABLE;


PROMPT Completed KP_DAT_DANOVESAZBY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DENNIAGREGACE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DENNIAGREGACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DENNIAGREGACE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DENNIAGREGACE" MODIFY ("ID" CONSTRAINT "NN_KPDENNIAG_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DENNIAGREGACE" ADD CONSTRAINT "PK_KPDENNIAGAG" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPDENNIAGAG"  ENABLE;


PROMPT Completed KP_DAT_DENNIAGREGACE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOCZASTUP.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOCZASTUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOCZASTUP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOCZASTUP" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOCZASTUP" ADD CONSTRAINT "PK_KPDOCZASTUP" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPDOCZASTUP"  ENABLE;


PROMPT Completed KP_DAT_DOCZASTUP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLAD.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLAD
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLAD" ADD CONSTRAINT "CN_KPDOKLAD_KROK" CHECK ( nl_krok is not null ) ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLAD" ADD CONSTRAINT "CN_KPDOKLAD_VAZBY" CHECK ( c_vazby  is not null and c_vazby in ('0','1') ) ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLAD" ADD CONSTRAINT "CN_KPDATDOKLAD_SUBSMER" CHECK ( c_subSmer in ( 'I', 'O' ) ) ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLAD" MODIFY ("ID_SUBKONSOLIDACE" CONSTRAINT "NN_KPDATDOKLAD_SUBKON" NOT NULL ENABLE NOVALIDATE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLAD" MODIFY ("DT_DATUM" CONSTRAINT "NN_KPDOKLAD_DATUM" NOT NULL ENABLE NOVALIDATE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLAD" MODIFY ("DT_PLATNOSTMUSTEK" CONSTRAINT "NN_KPDOKLAD_DATUMMUSTEK" NOT NULL ENABLE NOVALIDATE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLAD" MODIFY ("NL_ERROR" CONSTRAINT "NN_KPDOKLAD_ERROR" NOT NULL ENABLE NOVALIDATE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLAD" MODIFY ("NL_WARNING" CONSTRAINT "NN_KPDOKLAD_WARNING" NOT NULL ENABLE NOVALIDATE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLAD" MODIFY ("S_UZIVATELMUSTEK" CONSTRAINT "NN_KPDOKLAD_UZIVATELMUSTEK" NOT NULL ENABLE NOVALIDATE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLAD" MODIFY ("ID_PARENT" CONSTRAINT "NN_KPDOKLAD_PARENT" NOT NULL ENABLE NOVALIDATE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLAD" MODIFY ("S_MENA" CONSTRAINT "NN_KPDOKLAD_MENA" NOT NULL ENABLE NOVALIDATE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLAD" MODIFY ("ID" CONSTRAINT "NN_KPDOKLAD_ID" NOT NULL ENABLE NOVALIDATE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLAD" ADD CONSTRAINT "PK_KPDOKLAD" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPDOKLAD"  ENABLE;


PROMPT Completed KP_DAT_DOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADBILANCEPOCSTAV.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADBILANCEPOCSTAV.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADBILANCEPOCSTAV
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADBILANCEPOCSTAV" MODIFY ("ID_DOKLAD" CONSTRAINT "NN_KPDOKLADBPOCST_DOKLAD" NOT NULL ENABLE);


PROMPT Completed KP_DAT_DOKLADBILANCEPOCSTAV.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/CONSTRAINTS/KP_DAT_DOKLADFRONTA.sql: 'utf-8' codec can't decode byte 0xc8 in position 403: invalid continuation byte


-- ============================================================================
-- Deploy: KP_DAT_DOKLADFRONTA2014.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADFRONTA2014.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADFRONTA2014
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADFRONTA2014" MODIFY ("ID" NOT NULL ENABLE);


PROMPT Completed KP_DAT_DOKLADFRONTA2014.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADFRONTA_TEMP.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADFRONTA_TEMP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADFRONTA_TEMP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADFRONTA_TEMP" MODIFY ("ID" NOT NULL ENABLE);


PROMPT Completed KP_DAT_DOKLADFRONTA_TEMP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADNASTROJ.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADNASTROJ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADNASTROJ
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJ" MODIFY ("ID" CONSTRAINT "NN_KPDOKLADNAST_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJ" ADD CONSTRAINT "PK_KPDOKLADNAST" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPDOKLADNASTROJ"  ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJ" ADD CONSTRAINT "CN_KPDOKLADNAST_UROKSAZ" CHECK ( c_typUrokSazba in ( 'F', 'V' ) ) ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJ" ADD CONSTRAINT "CN_KPDOKLADNAST_TYPVYKAZ" CHECK ( c_typVykaz is not null and c_typVykaz between '1' and '6' ) ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJ" ADD CONSTRAINT "CN_KPDOKLADNAST_TYPPF" CHECK ( c_typPortfolio is not null and c_typPortfolio in ( 'B', 'T' ) ) ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJ" ADD CONSTRAINT "CN_KPDOKLADNAST_RESDLUH" CHECK ( c_restruktualizaceDluhu in ( '0', '1' ) ) ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJ" ADD CONSTRAINT "CN_KPDOKLADNAST_ODVOLZ" CHECK ( c_odvolatelneZajisteni is not null and c_odvolatelneZajisteni in ( '0', '1' ) ) ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJ" ADD CONSTRAINT "CN_KPDOKLADNAST_KOMUCEL" CHECK ( c_komercniUcel is not null and c_komercniUcel in ( '0', '1', '?' ) ) ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJ" ADD CONSTRAINT "CN_KPDOKLADNAST_DENOM" CHECK ( c_denominace in ( '0', '1' ) ) ENABLE;


PROMPT Completed KP_DAT_DOKLADNASTROJ.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADNASTROJCP.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADNASTROJCP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADNASTROJCP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJCP" MODIFY ("ID" CONSTRAINT "NN_KPDOKLADNASTCP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJCP" ADD CONSTRAINT "PK_KPDOKLADNASTCP" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPDOKLADNASTROJCP"  ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJCP" ADD CONSTRAINT "CN_KPDOKLADNASTCP_UROKSAZ" CHECK ( c_typUrokSazba in ( 'F', 'V' ) ) ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJCP" ADD CONSTRAINT "CN_KPDOKLADNASTCP_TYPVYKAZ" CHECK ( c_typVykaz is not null and c_typVykaz between '1' and '6' ) ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJCP" ADD CONSTRAINT "CN_KPDOKLADNASTCP_TYPPF" CHECK ( c_typPortfolio is not null and c_typPortfolio in ( 'B', 'T' ) ) ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJCP" ADD CONSTRAINT "CN_KPDOKLADNASTCP_RESDLUH" CHECK ( c_restruktualizaceDluhu in ( '0', '1' ) ) ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJCP" ADD CONSTRAINT "CN_KPDOKLADNASTCP_DENOM" CHECK ( c_denominace in ( '0', '1' ) ) ENABLE;


PROMPT Completed KP_DAT_DOKLADNASTROJCP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADNASTROJ_CASTKY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADNASTROJ_CASTKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADNASTROJ_CASTKY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJ_CASTKY" MODIFY ("ID" CONSTRAINT "NN_KPDOKLADNASTROJ_CASTKY_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJ_CASTKY" ADD CONSTRAINT "PK_KPDOKLADNASTROJ_CASTKY" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPDOKLADNASTROJ_CASTKY"  ENABLE;


PROMPT Completed KP_DAT_DOKLADNASTROJ_CASTKY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADNEZARAZENETRAN.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADNEZARAZENETRAN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADNEZARAZENETRAN
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNEZARAZENETRAN" ADD CONSTRAINT "PK_KPDOKLADNEZARAZENETRANSAKCE" PRIMARY KEY ("ID_DOKLAD", "ID_ZDROJDAT")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS  ENABLE;


PROMPT Completed KP_DAT_DOKLADNEZARAZENETRAN.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADPOLOZKA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADPOLOZKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADPOLOZKA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADPOLOZKA" MODIFY ("ID" CONSTRAINT "NN_KPDOKLADPOLOZKA_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADPOLOZKA" MODIFY ("ID_DOKLAD" CONSTRAINT "NN_KPDOKLADPOLOZKA_DOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADPOLOZKA" MODIFY ("ID_DEFLISTBUNKA" CONSTRAINT "NN_KPDOKLADPOLOZKA_DEFLIST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADPOLOZKA" MODIFY ("S_MENA" CONSTRAINT "NN_KPDOKLADPOLOZKA_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADPOLOZKA" MODIFY ("ID_DEFDOKLAD" CONSTRAINT "NN_XXKPDOKLADPOL_DEFDOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADPOLOZKA" MODIFY ("ID_CISLIST" CONSTRAINT "NN_XXKPDOKLADPOL_LISTTYP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADPOLOZKA" MODIFY ("ID_CISRADEKTYP" CONSTRAINT "NN_XXKPDOKLADPOL_RADEKTYP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADPOLOZKA" ADD CONSTRAINT "PK_KPDOKLADPOLOZKA" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPDOKLADPOLOZKA"  ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADPOLOZKA" ADD CONSTRAINT "CN_KPDOKLADPOLOZKA_VYP" CHECK ( c_vypocteno is not null and c_vypocteno in ( '0', '1' ) ) DISABLE;


PROMPT Completed KP_DAT_DOKLADPOLOZKA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADPOLOZKADENIK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADPOLOZKADENIK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADPOLOZKADENIK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADPOLOZKADENIK" MODIFY ("ID" CONSTRAINT "NN_KPDOKPOLDEN_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADPOLOZKADENIK" MODIFY ("ID_DOKLADPOLOZKA" CONSTRAINT "NN_KPDOKPOLDEN_DEFLIST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADPOLOZKADENIK" ADD CONSTRAINT "PK_KPDOKPOLDEN" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPDOKPOLDEN"  ENABLE;


PROMPT Completed KP_DAT_DOKLADPOLOZKADENIK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADPROTOKOL.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADPROTOKOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADPROTOKOL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADPROTOKOL" MODIFY ("ID" CONSTRAINT "NN_KPDOKLADPROTOKOL_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADPROTOKOL" MODIFY ("ID_DOKLAD" CONSTRAINT "NN_KPDOKLADPROTOKOL_DOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADPROTOKOL" MODIFY ("C_KOD" CONSTRAINT "NN_KPDOKLADPROTOKOL_KOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADPROTOKOL" ADD CONSTRAINT "PK_KPDOKLADPROTOKOLDAT" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPDOKLADPROTOKOLDAT"  ENABLE;


PROMPT Completed KP_DAT_DOKLADPROTOKOL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADQUESTORPC.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADQUESTORPC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADQUESTORPC
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADQUESTORPC" MODIFY ("ID_DOKLAD" CONSTRAINT "NN_KPDATDOKLADQUESTORPC_DOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADQUESTORPC" MODIFY ("PC_ID" CONSTRAINT "NN_KPDATDOKLADQUESTORPC_PCID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADQUESTORPC" ADD CONSTRAINT "PK_KPDATDOKLADQUESTORPC" PRIMARY KEY ("ID_DOKLAD", "PC_ID")
  USING INDEX "DB_JT"."PK_KPDATDOKLADQUESTORPC"  ENABLE;


PROMPT Completed KP_DAT_DOKLADQUESTORPC.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADROZDILY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADROZDILY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADROZDILY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADROZDILY" MODIFY ("ID" CONSTRAINT "NN_KPDOKLADROZDILY_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADROZDILY" MODIFY ("ID_DOKLAD" CONSTRAINT "NN_KPDOKLADROZDILY_DOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADROZDILY" ADD CONSTRAINT "PK_KPDOKLADROZDILY" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPDATDOKLADROZDILY"  ENABLE;


PROMPT Completed KP_DAT_DOKLADROZDILY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADSUBKONLOGDOKLADY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADSUBKONLOGDOKLADY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADSUBKONLOGDOKLADY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADSUBKONLOGDOKLADY" MODIFY ("ID_DOKLAD" CONSTRAINT "NN_KPDOKLADSUBKONLOGD_DOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADSUBKONLOGDOKLADY" MODIFY ("ID_DOKLADCLEN" CONSTRAINT "NN_KPDOKLADSUBKONLOGD_DOKCL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADSUBKONLOGDOKLADY" ADD CONSTRAINT "PK_KPDATDOKLADSUBKONLOGDOKLADY" PRIMARY KEY ("ID_DOKLAD", "ID_DOKLADCLEN")
  USING INDEX "DB_JT"."PK_KPDATDOKLADSUBKONLOGDOKLADY"  ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADSUBKONLOGDOKLADY" ADD CONSTRAINT "CN_KPDOKLADSUBKONLOG_CLEN" CHECK (
				  ( id_ktgUcetniSpolecnostClen is null and id_ktgSubkonsolidaceClen is not null ) or
				  ( id_ktgUcetniSpolecnostClen is not null and id_ktgSubkonsolidaceClen is null )
   ) ENABLE;


PROMPT Completed KP_DAT_DOKLADSUBKONLOGDOKLADY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADSUBKONVAZBYDENIK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADSUBKONVAZBYDENIK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADSUBKONVAZBYDENIK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADSUBKONVAZBYDENIK" MODIFY ("ID_DOKLAD" CONSTRAINT "NN_KPDOKSVAZDEN_DOKLAD" NOT NULL ENABLE);


PROMPT Completed KP_DAT_DOKLADSUBKONVAZBYDENIK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADUCETUNIF2ORG_BCK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADUCETUNIF2ORG_BCK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADUCETUNIF2ORG_BCK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADUCETUNIF2ORG_BCK" MODIFY ("ID_DOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADUCETUNIF2ORG_BCK" MODIFY ("S_UCETUNIF" NOT NULL ENABLE);


PROMPT Completed KP_DAT_DOKLADUCETUNIF2ORG_BCK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADUCETUNIF2ORIGINAL.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADUCETUNIF2ORIGINAL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADUCETUNIF2ORIGINAL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADUCETUNIF2ORIGINAL" MODIFY ("ID_DOKLAD" CONSTRAINT "NN_KPDOKLADUCUN2OR_DOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADUCETUNIF2ORIGINAL" MODIFY ("S_UCETUNIF" CONSTRAINT "NN_KPDOKLADUCUN2OR_UCETUNIF" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADUCETUNIF2ORIGINAL" ADD CONSTRAINT "PK_KPDOKLADUCETUNIF2ORIGINAL" PRIMARY KEY ("ID_DOKLAD", "S_UCETUNIF")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS  ENABLE;


PROMPT Completed KP_DAT_DOKLADUCETUNIF2ORIGINAL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADVAZBY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADVAZBY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADVAZBY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBY" MODIFY ("ID" CONSTRAINT "NN_KPDOKLADVAZBY_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBY" MODIFY ("ID_DOKLAD" CONSTRAINT "NN_KPDOKLADVAZBY_DOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBY" MODIFY ("ID_KTGUCETNISKUPINA" CONSTRAINT "NN_KPDOKLADVAZBY_SKUPINA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBY" ADD CONSTRAINT "CN_KPDOKLADVAZBY_PROPIS" CHECK ( c_propisujVazby is not null and c_propisujVazby in ( '0', '1' ) ) ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBY" ADD CONSTRAINT "PK_KPDOKLADVAZBY" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPDOKLADVAZBY"  ENABLE;


PROMPT Completed KP_DAT_DOKLADVAZBY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADVAZBYAKCEPT.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADVAZBYAKCEPT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADVAZBYAKCEPT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYAKCEPT" MODIFY ("ID_DOKLAD" CONSTRAINT "NN_KPDOKVAZBYAKC_DOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYAKCEPT" MODIFY ("ID_KTGUCETNISKUPINA" CONSTRAINT "NN_KPDOKVAZBYAKC_SKUPINA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYAKCEPT" MODIFY ("ID_KTGUCETNISPOLECNOSTFROM" CONSTRAINT "NN_KPDOKVAZBYAKC_FROM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYAKCEPT" MODIFY ("ID_KTGUCETNISPOLECNOSTTO" CONSTRAINT "NN_KPDOKVAZBYAKC_TO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYAKCEPT" MODIFY ("S_UZIVATEL" CONSTRAINT "NN_KPDOKVAZBYAKC_UZIV" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYAKCEPT" ADD CONSTRAINT "NN_KPDOKVAZBYAKC_AKC" CHECK ( c_akceptace is not null and c_akceptace in ( '0', '1' ) ) ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYAKCEPT" ADD CONSTRAINT "PK_KPDATDOKLADVAZBYAKCEPT" PRIMARY KEY ("ID_DOKLAD", "ID_KTGUCETNISKUPINA", "ID_KTGUCETNISPOLECNOSTFROM", "ID_KTGUCETNISPOLECNOSTTO")
  USING INDEX "DB_JT"."PK_KPDATDOKLADVAZBYAKCEPT"  ENABLE;


PROMPT Completed KP_DAT_DOKLADVAZBYAKCEPT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADVAZBYPAROVANI.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADVAZBYPAROVANI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADVAZBYPAROVANI
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVANI" MODIFY ("ID_KTGUCETNISPOLECNOSTFROM" CONSTRAINT "NN_KPDOKLADVAZBYPAR_SPOLFROM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVANI" MODIFY ("DT_DATUMDOKLAD" CONSTRAINT "NN_KPDOKLADVAZBYPAR_DATUM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVANI" MODIFY ("ID_KTGDOKLAD" CONSTRAINT "NN_KPDOKLADVAZBYPAR_DOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVANI" MODIFY ("ID_KTGUCETNISKUPINA" CONSTRAINT "NN_KPDOKLADVAZBYPAR_SKUPINA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVANI" MODIFY ("S_UCET" CONSTRAINT "NN_KPDOKLADVAZBYPAR_UCET" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVANI" MODIFY ("S_MENA" CONSTRAINT "NN_KPDOKLADVAZBYPAR_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVANI" MODIFY ("NL_PORADILIST" CONSTRAINT "NN_KPDOKLADVAZBYPAR_LIST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVANI" MODIFY ("NL_RADEK" CONSTRAINT "NN_KPDOKLADVAZBYPAR_RADEK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVANI" MODIFY ("ND_CASTKAMENA" CONSTRAINT "NN_KPDOKLADVAZBYPAR_CAMENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVANI" MODIFY ("S_UZIVATEL" CONSTRAINT "NN_KPDOKLADVAZBYPAR_UZIVATEL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVANI" MODIFY ("ND_CASTKALOCAL" CONSTRAINT "NN_KPDOKLADVAZBYPAR_CLOCAL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVANI" ADD CONSTRAINT "PK_KPDOKLADVAZBYPAROVANI" PRIMARY KEY ("ID_KTGUCETNISPOLECNOSTFROM", "DT_DATUMDOKLAD", "ID_KTGDOKLAD", "ID_KTGUCETNISKUPINA", "S_UCET", "S_MENA", "NL_PORADILIST", "NL_RADEK", "ID_KTGUCETNISPOLECNOSTTO", "C_TYP")
  USING INDEX "DB_JT"."PK_KPDOKLADVAZBYPAROVANI"  ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVANI" ADD CONSTRAINT "NN_KPDOKLADVAZBYPAR_TYP" CHECK ( c_typ is not null and c_typ in ( 'S', 'U') ) ENABLE;


PROMPT Completed KP_DAT_DOKLADVAZBYPAROVANI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADVAZBYPAROVOLD.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADVAZBYPAROVOLD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADVAZBYPAROVOLD
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVOLD" MODIFY ("ID_KTGUCETNISPOLECNOSTFROM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVOLD" MODIFY ("DT_DATUMDOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVOLD" MODIFY ("ID_KTGDOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVOLD" MODIFY ("ID_KTGUCETNISKUPINA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVOLD" MODIFY ("S_UCET" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVOLD" MODIFY ("S_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVOLD" MODIFY ("NL_PORADILIST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVOLD" MODIFY ("NL_RADEK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVOLD" MODIFY ("ID_KTGUCETNISPOLECNOSTTO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVOLD" MODIFY ("ND_CASTKAMENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVOLD" MODIFY ("S_UZIVATEL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVOLD" MODIFY ("ND_CASTKALOCAL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVOLD" MODIFY ("C_TYP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVOLD" ADD CONSTRAINT "PK_KP_DAT_DOKLADVAZBYPAROVOLD" PRIMARY KEY ("ID_KTGUCETNISPOLECNOSTFROM", "DT_DATUMDOKLAD", "ID_KTGDOKLAD", "ID_KTGUCETNISKUPINA", "S_UCET", "S_MENA", "NL_PORADILIST", "NL_RADEK", "ID_KTGUCETNISPOLECNOSTTO", "C_TYP")
  USING INDEX "DB_JT"."PK_KP_DAT_DOKLADVAZBYPAROVOLD"  ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVOLD" ADD CHECK ( c_typ is not null and c_typ in ( 'S', 'U') ) ENABLE;


PROMPT Completed KP_DAT_DOKLADVAZBYPAROVOLD.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADVAZBY_BCK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADVAZBY_BCK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADVAZBY_BCK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBY_BCK" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBY_BCK" MODIFY ("ID_DOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBY_BCK" MODIFY ("ID_KTGUCETNISKUPINA" NOT NULL ENABLE);


PROMPT Completed KP_DAT_DOKLADVAZBY_BCK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADZAMEK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADZAMEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADZAMEK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZAMEK" MODIFY ("NL_KROK" CONSTRAINT "NN_DATZAMEKTYP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZAMEK" MODIFY ("ID_DOKLAD" CONSTRAINT "NN_DATZAMEKDOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZAMEK" MODIFY ("DT_TIMESTAMP" CONSTRAINT "NN_DATZAMEKDATUM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZAMEK" MODIFY ("ID_TYPEUSER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZAMEK" ADD CONSTRAINT "PK_DATZAMEK" PRIMARY KEY ("ID_DOKLAD", "NL_KROK", "ID_TYPEUSER")
  USING INDEX "DB_JT"."PK_DATZAMEK"  ENABLE;


PROMPT Completed KP_DAT_DOKLADZAMEK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADZDROJDAT.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADZDROJDAT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADZDROJDAT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDAT" MODIFY ("ID_DOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDAT" MODIFY ("S_UCET" CONSTRAINT "NN_KP_ZDROJDAT_UCET" NOT NULL ENABLE NOVALIDATE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDAT" MODIFY ("S_MENA" CONSTRAINT "NN_KP_ZDROJDAT_MENA" NOT NULL ENABLE NOVALIDATE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDAT" MODIFY ("ID_EXTSYSTEM" CONSTRAINT "NN_KP_ZDROJDAT_IDEXT" NOT NULL ENABLE NOVALIDATE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDAT" MODIFY ("ND_CASTKAMENA" CONSTRAINT "NN_KP_ZDROJDAT_CMENA" NOT NULL ENABLE NOVALIDATE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDAT" MODIFY ("ND_CASTKALOCAL" CONSTRAINT "NN_KP_ZDROJDAT_CLOCAL" NOT NULL ENABLE NOVALIDATE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDAT" MODIFY ("ID" CONSTRAINT "NN_KPZDROJDAT_ID" NOT NULL ENABLE NOVALIDATE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDAT" ADD CONSTRAINT "CN_KP_ZDROJDAT_STRANA" CHECK ( c_strana is not null and c_strana in ( 'M', 'D' ) ) ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDAT" ADD CONSTRAINT "CN_KPSPOLECNOST_KNTK" CHECK ( c_kontokorent is not null and c_kontokorent in ( '0', '1' ) ) ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDAT" ADD CONSTRAINT "CN_KPZD_TYPPF" CHECK ( c_typPortfolio in ( 'B', 'T' ) ) ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDAT" ADD CONSTRAINT "CN_KP_ZDROJDAT_EXTSYSTEM" CHECK ( c_extSystem is not null and c_extSystem in ( 'Q', 'S', 'T', 'I', 'M', 'G' ) ) ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDAT" ADD CONSTRAINT "PK_KPZDROJDAT" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 262144 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "INDEXY"  ENABLE;


PROMPT Completed KP_DAT_DOKLADZDROJDAT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADZDROJDATAGREGACE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADZDROJDATAGREGACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADZDROJDATAGREGACE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDATAGREGACE" MODIFY ("ID_DOKLAD" CONSTRAINT "NN_KPZDROJDATAG_DOKLAD2" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDATAGREGACE" MODIFY ("ID" CONSTRAINT "NN_KPZDROJDATAG_ID" NOT NULL ENABLE NOVALIDATE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDATAGREGACE" ADD CONSTRAINT "PK_KPZDROJDATAG" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPZDROJDATAG"  ENABLE;


PROMPT Completed KP_DAT_DOKLADZDROJDATAGREGACE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADZDROJDATAGRE_0728.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADZDROJDATAGRE_0728.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADZDROJDATAGRE_0728
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDATAGRE_0728" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDATAGRE_0728" MODIFY ("ID_DOKLAD" NOT NULL ENABLE);


PROMPT Completed KP_DAT_DOKLADZDROJDATAGRE_0728.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADZDROJDATAGR_BCK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADZDROJDATAGR_BCK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADZDROJDATAGR_BCK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDATAGR_BCK" MODIFY ("ID" NOT NULL ENABLE);


PROMPT Completed KP_DAT_DOKLADZDROJDATAGR_BCK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADZDROJDATAGR_VABA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADZDROJDATAGR_VABA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADZDROJDATAGR_VABA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDATAGR_VABA" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDATAGR_VABA" MODIFY ("ID_DOKLAD" NOT NULL ENABLE);


PROMPT Completed KP_DAT_DOKLADZDROJDATAGR_VABA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADZDROJDATMANUAL.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADZDROJDATMANUAL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADZDROJDATMANUAL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDATMANUAL" MODIFY ("ID_DEFLISTBUNKA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDATMANUAL" MODIFY ("ID_SUBKONSOLIDACE" CONSTRAINT "NN_KPDATDOKLADZDMAN_SUBKON" NOT NULL ENABLE);


PROMPT Completed KP_DAT_DOKLADZDROJDATMANUAL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADZDROJDAT_BCK_IFRS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADZDROJDAT_BCK_IFRS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADZDROJDAT_BCK_IFRS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDAT_BCK_IFRS" MODIFY ("ID" NOT NULL ENABLE);


PROMPT Completed KP_DAT_DOKLADZDROJDAT_BCK_IFRS.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADZDROJDAT_MEZANIN.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADZDROJDAT_MEZANIN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKLADZDROJDAT_MEZANIN
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDAT_MEZANIN" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDAT_MEZANIN" MODIFY ("ID_DOKLAD" NOT NULL ENABLE);


PROMPT Completed KP_DAT_DOKLADZDROJDAT_MEZANIN.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKUMENT.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKUMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKUMENT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKUMENT" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKUMENT" MODIFY ("ID_CISDOKUMENT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKUMENT" ADD CONSTRAINT "PK_DATDOKUMENT" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_DATDOKUMENT"  ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKUMENT" ADD CONSTRAINT "CH_KP_DAT_DOCUMENT_CERPAR_R" CHECK (cerpat_rezervu in ('T', 'F') and cerpat_rezervu is not null) ENABLE;


PROMPT Completed KP_DAT_DOKUMENT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKUMENTRADEK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKUMENTRADEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKUMENTRADEK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKUMENTRADEK" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKUMENTRADEK" MODIFY ("ID_DOKUMENT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKUMENTRADEK" ADD CONSTRAINT "PK_DATDOKUMENTRADEK" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_DATDOKUMENTRADEK"  ENABLE;


PROMPT Completed KP_DAT_DOKUMENTRADEK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKUMENT_ODEMKNOUT.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKUMENT_ODEMKNOUT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKUMENT_ODEMKNOUT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKUMENT_ODEMKNOUT" MODIFY ("ID_SL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKUMENT_ODEMKNOUT" ADD CONSTRAINT "CH_KP_DAT_DOKUMENT_ODEMKNOUT" CHECK (C_ODEMKNOUT in (0, 1) and C_ODEMKNOUT is not null) ENABLE;


PROMPT Completed KP_DAT_DOKUMENT_ODEMKNOUT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKUMENT_OLD_ASSET_1004.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKUMENT_OLD_ASSET_1004.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKUMENT_OLD_ASSET_1004
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKUMENT_OLD_ASSET_1004" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKUMENT_OLD_ASSET_1004" MODIFY ("ID_CISDOKUMENT" NOT NULL ENABLE);


PROMPT Completed KP_DAT_DOKUMENT_OLD_ASSET_1004.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKUMENT_POKTRAN_2013.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_DOKUMENT_POKTRAN_2013.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_DOKUMENT_POKTRAN_2013
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKUMENT_POKTRAN_2013" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_DOKUMENT_POKTRAN_2013" MODIFY ("ID_CISDOKUMENT" NOT NULL ENABLE);


PROMPT Completed KP_DAT_DOKUMENT_POKTRAN_2013.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_EVIADMINDODAVATEL.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_EVIADMINDODAVATEL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_EVIADMINDODAVATEL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_EVIADMINDODAVATEL" MODIFY ("ID_KTGSPOLECNOST" CONSTRAINT "NN_EVIADMINDODAVATEL_IDSPOL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_EVIADMINDODAVATEL" MODIFY ("ID_EVIADMINSPOL" CONSTRAINT "NN_EVIADMINSPOL_SPOL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_EVIADMINDODAVATEL" ADD CONSTRAINT "PK_EVIADMINDODAVATEL" PRIMARY KEY ("ID_KTGSPOLECNOST", "ID_EVIADMINSPOL", "DT_DATUM")
  USING INDEX "DB_JT"."PK_EVIADMINDODAVATEL"  ENABLE;


PROMPT Completed KP_DAT_EVIADMINDODAVATEL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_EVIBANKY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_EVIBANKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_EVIBANKY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_EVIBANKY" MODIFY ("ID" CONSTRAINT "NN_EVIBANKY_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_EVIBANKY" ADD CONSTRAINT "PK_EVIBANKY" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_EVIBANKY"  ENABLE;


PROMPT Completed KP_DAT_EVIBANKY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_EVIDOIDENTIFIKACE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_EVIDOIDENTIFIKACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_EVIDOIDENTIFIKACE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_EVIDOIDENTIFIKACE" MODIFY ("ID" CONSTRAINT "NN_EVIDOIDENTIFIKACE_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_EVIDOIDENTIFIKACE" ADD CONSTRAINT "PK_EVIDOIDENTIFIKACE" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_EVIDOIDENTIFIKACE"  ENABLE;


PROMPT Completed KP_DAT_EVIDOIDENTIFIKACE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_EVIDOKUMENT.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_EVIDOKUMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_EVIDOKUMENT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_EVIDOKUMENT" MODIFY ("ID" CONSTRAINT "NN_EVIDOKUMENT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_EVIDOKUMENT" ADD CONSTRAINT "PK_EVIDOKUMENT" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_EVIDOKUMENT"  ENABLE;


PROMPT Completed KP_DAT_EVIDOKUMENT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_EVIKOMISIONARSKESMLOUVY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_EVIKOMISIONARSKESMLOUVY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_EVIKOMISIONARSKESMLOUVY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_EVIKOMISIONARSKESMLOUVY" MODIFY ("ID" CONSTRAINT "NN_EVIKOMISSMLOUVY_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_EVIKOMISIONARSKESMLOUVY" ADD CONSTRAINT "PK_EVIKOMISSMLOUVY" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_EVIKOMISSMLOUVY"  ENABLE;


PROMPT Completed KP_DAT_EVIKOMISIONARSKESMLOUVY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_EVIKORESPONDENCE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_EVIKORESPONDENCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_EVIKORESPONDENCE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_EVIKORESPONDENCE" MODIFY ("ID" CONSTRAINT "NN_EVIKORESPONDENCE_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_EVIKORESPONDENCE" ADD CONSTRAINT "PK_EVIKORESPONDENCE" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_EVIKORESPONDENCE"  ENABLE;


PROMPT Completed KP_DAT_EVIKORESPONDENCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_EVIOBCHODNIREJSTRIK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_EVIOBCHODNIREJSTRIK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_EVIOBCHODNIREJSTRIK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_EVIOBCHODNIREJSTRIK" MODIFY ("ID" CONSTRAINT "NN_EVIOR_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_EVIOBCHODNIREJSTRIK" ADD CONSTRAINT "PK_EVIOR" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_EVIOR"  ENABLE;


PROMPT Completed KP_DAT_EVIOBCHODNIREJSTRIK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_EVIZPLNOMOCNENI.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_EVIZPLNOMOCNENI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_EVIZPLNOMOCNENI
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_EVIZPLNOMOCNENI" MODIFY ("ID" CONSTRAINT "NN_EVIZPLNOMOCNENI_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_EVIZPLNOMOCNENI" ADD CONSTRAINT "PK_EVIZPLNOMOCNENI" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_EVIZPLNOMOCNENI"  ENABLE;


PROMPT Completed KP_DAT_EVIZPLNOMOCNENI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_GENEROVANICLOSED.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_GENEROVANICLOSED.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_GENEROVANICLOSED
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_GENEROVANICLOSED" MODIFY ("DT_DATUM" CONSTRAINT "NN_GENEROVANICLOSED_DATE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_GENEROVANICLOSED" MODIFY ("S_ERRORMSG" CONSTRAINT "NN_GENEROVANICLOSED_MSG" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_GENEROVANICLOSED" ADD CONSTRAINT "PK_GENEROVANICLOSED" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_GENEROVANICLOSED"  ENABLE;


PROMPT Completed KP_DAT_GENEROVANICLOSED.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_GENEROVANIZAMEK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_GENEROVANIZAMEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_GENEROVANIZAMEK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_GENEROVANIZAMEK" MODIFY ("ID_CISDOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_GENEROVANIZAMEK" MODIFY ("ID_KTGUCETNISPOLECNOST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_GENEROVANIZAMEK" MODIFY ("DT_DATUM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_GENEROVANIZAMEK" MODIFY ("ID_CISZAMEK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_GENEROVANIZAMEK" MODIFY ("C_ZAMCENO" NOT NULL ENABLE);


PROMPT Completed KP_DAT_GENEROVANIZAMEK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_GENZAMEKZAMITNUTI.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_GENZAMEKZAMITNUTI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_GENZAMEKZAMITNUTI
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_GENZAMEKZAMITNUTI" MODIFY ("ID_CISDOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_GENZAMEKZAMITNUTI" MODIFY ("ID_KTGUCETNISPOLECNOST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_GENZAMEKZAMITNUTI" MODIFY ("DT_DATUM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_GENZAMEKZAMITNUTI" MODIFY ("ID_CISZAMEK" NOT NULL ENABLE);


PROMPT Completed KP_DAT_GENZAMEKZAMITNUTI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_GESTORVYJIMKY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_GESTORVYJIMKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_GESTORVYJIMKY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_GESTORVYJIMKY" ADD CONSTRAINT "PK_GESTORVYJIMKY" PRIMARY KEY ("ID_KTGAPPUSER", "ID_KTGUCETNISPOLECNOST")
  USING INDEX "DB_JT"."PK_GESTORVYJIMKY"  ENABLE;


PROMPT Completed KP_DAT_GESTORVYJIMKY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_KAPITALSKUPINY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_KAPITALSKUPINY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_KAPITALSKUPINY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_KAPITALSKUPINY" MODIFY ("ID" CONSTRAINT "NN_KPKAPITALSKUPINY_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_KAPITALSKUPINY" MODIFY ("ID_SKUPINAPOZICE" CONSTRAINT "NN_KPKAPITALSKUPINY_SKUP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_KAPITALSKUPINY" MODIFY ("DT_PLATNOSTOD" CONSTRAINT "NN_KPKAPITALSKUPINY_DTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_KAPITALSKUPINY" MODIFY ("ND_CASTKA" CONSTRAINT "NN_KPKAPITALSKUPINY_CASTKA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_KAPITALSKUPINY" ADD CONSTRAINT "PK_KPKAPITALSKUPINY" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPKAPITALSKUPINY"  ENABLE;


PROMPT Completed KP_DAT_KAPITALSKUPINY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_KARTAPRAVIDLA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_KARTAPRAVIDLA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_KARTAPRAVIDLA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_KARTAPRAVIDLA" MODIFY ("ID" CONSTRAINT "NN_KPKARTAPRAVIDLA_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_KARTAPRAVIDLA" MODIFY ("ID_KARTATYP" CONSTRAINT "NN_KPKARTAPRAVIDLA_IDKARTATYP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_KARTAPRAVIDLA" MODIFY ("DT_PLATNOSTOD" CONSTRAINT "NN_KPKARTAPRAVIDLA_DTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_KARTAPRAVIDLA" MODIFY ("DT_PLATNOSTDO" CONSTRAINT "NN_KPKARTAPRAVIDLA_DTDO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_KARTAPRAVIDLA" ADD CONSTRAINT "PK_KPKARTAPRAVIDLA" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPKARTAPRAVIDLA"  ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_KARTAPRAVIDLA" ADD CONSTRAINT "CH_KPKARTAPRAVIDLA_DATUM" CHECK (dt_platnostOd <= dt_platnostDo) ENABLE;


PROMPT Completed KP_DAT_KARTAPRAVIDLA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_KARTASPOLZPRAVA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_KARTASPOLZPRAVA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_KARTASPOLZPRAVA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_KARTASPOLZPRAVA" MODIFY ("ID" CONSTRAINT "NN_KPKARTAZPRAVA_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_KARTASPOLZPRAVA" MODIFY ("ID_KTGUCETNISPOLECNOST" CONSTRAINT "NN_KPKARTAZPRAVA_IDSPOL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_KARTASPOLZPRAVA" MODIFY ("ID_KARTATYP" CONSTRAINT "NN_KPKARTAZPRAVA_IDKARTATYP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_KARTASPOLZPRAVA" MODIFY ("DT_DATUM" CONSTRAINT "NN_KPKARTAZPRAVA_DATUM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_KARTASPOLZPRAVA" ADD CONSTRAINT "PK_KPKARTAZPRAVA" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPKARTAZPRAVA"  ENABLE;


PROMPT Completed KP_DAT_KARTASPOLZPRAVA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_KARTATYP.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_KARTATYP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_KARTATYP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_KARTATYP" MODIFY ("ID" CONSTRAINT "NN_KPKARTATYP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_KARTATYP" ADD CONSTRAINT "PK_KPKARTATYP" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPKARTATYP"  ENABLE;


PROMPT Completed KP_DAT_KARTATYP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_KARTAVYJIMKY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_KARTAVYJIMKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_KARTAVYJIMKY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_KARTAVYJIMKY" MODIFY ("ID" CONSTRAINT "NN_KPKARTAVYJIMKY_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_KARTAVYJIMKY" MODIFY ("ID_KARTATYP" CONSTRAINT "NN_KPKARTAVYJIMKY_IDKARTATYP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_KARTAVYJIMKY" MODIFY ("ID_KTGUCETNISPOLECNOST" CONSTRAINT "NN_KPKARTAVYJIMKY_IDKTGSPOL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_KARTAVYJIMKY" MODIFY ("DT_PLATNOSTOD" CONSTRAINT "NN_KPKARTAVYJIMKY_DTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_KARTAVYJIMKY" MODIFY ("DT_PLATNOSTDO" CONSTRAINT "NN_KPKARTAVYJIMKY_DTDO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_KARTAVYJIMKY" ADD CONSTRAINT "PK_KPKARTAVYJIMKY" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPKARTAVYJIMKY"  ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_KARTAVYJIMKY" ADD CONSTRAINT "CH_KPKARTAVYJIMKY_DATUM" CHECK (dt_platnostOd <= dt_platnostDo) ENABLE;


PROMPT Completed KP_DAT_KARTAVYJIMKY.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/CONSTRAINTS/KP_DAT_KONSOLIDACEFRONTA.sql: 'utf-8' codec can't decode byte 0xc8 in position 590: invalid continuation byte


-- ============================================================================
-- Deploy: KP_DAT_MAJETKOVAUCAST.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_MAJETKOVAUCAST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_MAJETKOVAUCAST
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_MAJETKOVAUCAST" MODIFY ("ID" CONSTRAINT "NN_KPMAJUCAST_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MAJETKOVAUCAST" MODIFY ("ID_PARENT" CONSTRAINT "NN_KPMAJUCAST_PARENT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MAJETKOVAUCAST" MODIFY ("ID_KTGUCETNISPOLECNOST" CONSTRAINT "NN_KPMAJUCAST_IDUCSPOL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MAJETKOVAUCAST" MODIFY ("ID_KTGFININVESTICEEMISE" CONSTRAINT "NN_KPMAJUCAST_IDFIEMISE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MAJETKOVAUCAST" MODIFY ("S_UCET" CONSTRAINT "NN_KPMAJUCAST_UCET" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MAJETKOVAUCAST" MODIFY ("DT_PLATNOSTOD" CONSTRAINT "NN_KPMAJUCAST_PLATNOSTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MAJETKOVAUCAST" MODIFY ("DT_PLATNOSTDO" CONSTRAINT "NN_KPMAJUCAST_PLATNOSTDO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MAJETKOVAUCAST" MODIFY ("S_MENAUCETNI" CONSTRAINT "NN_KPMAJUCAST_MENAU" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MAJETKOVAUCAST" MODIFY ("ND_OBJEMUCETNI" CONSTRAINT "NN_KPMAJUCAST_OBJEMU" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MAJETKOVAUCAST" MODIFY ("DT_ZMENA" CONSTRAINT "NN_KPMAJUCAST_ZMENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MAJETKOVAUCAST" MODIFY ("S_UZIVATEL" CONSTRAINT "NN_KPMAJUCAST_UZIVATEL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MAJETKOVAUCAST" ADD CONSTRAINT "PK_KPMAJETKOVAUCAST" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPMAJETKOVAUCAST"  ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_MAJETKOVAUCAST" ADD CONSTRAINT "NN_KPMAJUCAST_PLATNOST" CHECK ( dt_platnostOd <= dt_platnostDo ) ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_DAT_MAJETKOVAUCAST" ADD CONSTRAINT "CN_MAJETKOVAUCAST_IGNOROVAT" CHECK ( c_ignorovat is not null and c_ignorovat in ( '0', '1' ) ) ENABLE;


PROMPT Completed KP_DAT_MAJETKOVAUCAST.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_MANUALNIZDROJDAT.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_MANUALNIZDROJDAT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_MANUALNIZDROJDAT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_MANUALNIZDROJDAT" MODIFY ("ID" CONSTRAINT "NN_KPMANZDROJDAT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MANUALNIZDROJDAT" MODIFY ("S_MENA" CONSTRAINT "NN_KP_MANZDROJDAT_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MANUALNIZDROJDAT" MODIFY ("S_UCET" CONSTRAINT "NN_KP_MANZDROJDAT_UCET" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MANUALNIZDROJDAT" MODIFY ("ND_CASTKAMENA" CONSTRAINT "NN_KP_MANZDROJDAT_CMENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MANUALNIZDROJDAT" MODIFY ("ND_CASTKALOCAL" CONSTRAINT "NN_KP_MANZDROJDAT_CLOCAL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MANUALNIZDROJDAT" MODIFY ("S_UZIVATEL" CONSTRAINT "NN_KP_MANZDROJDAT_USER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MANUALNIZDROJDAT" MODIFY ("C_SETNULL" CONSTRAINT "NN_KP_MANZDROJDAT_SETNULL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MANUALNIZDROJDAT" ADD CONSTRAINT "PK_KPMANZDROJDAT" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPMANZDROJDAT"  ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_MANUALNIZDROJDAT" ADD CONSTRAINT "CN_KP_MANZDROJDAT_TYP" CHECK ( c_typ is not null and c_typ in ( 'S', 's', 'O' ) ) ENABLE;


PROMPT Completed KP_DAT_MANUALNIZDROJDAT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_MISTRANSAKCE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_MISTRANSAKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_MISTRANSAKCE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_MISTRANSAKCE" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MISTRANSAKCE" MODIFY ("ID_KTGUCETNISPOLECNOST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MISTRANSAKCE" MODIFY ("ND_CASTKAMENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MISTRANSAKCE" MODIFY ("ND_CASTKALOCAL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MISTRANSAKCE" MODIFY ("S_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MISTRANSAKCE" MODIFY ("C_STRANA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MISTRANSAKCE" MODIFY ("S_UCET" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MISTRANSAKCE" MODIFY ("DT_DATUM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MISTRANSAKCE" MODIFY ("ID_DOKUMENT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MISTRANSAKCE" MODIFY ("ID_DOKUMENTRADEK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MISTRANSAKCE" ADD CONSTRAINT "PK_KPMISTRAN" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPMISTRAN"  ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_MISTRANSAKCE" ADD CONSTRAINT "CN_KPMISTRAN_STRANA" CHECK ( c_strana is not null and c_strana in ( 'M', 'D' ) ) ENABLE;


PROMPT Completed KP_DAT_MISTRANSAKCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_MNGSEGMENTBOSS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_MNGSEGMENTBOSS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_MNGSEGMENTBOSS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_MNGSEGMENTBOSS" MODIFY ("ID" CONSTRAINT "NN_MNGSEGMENTBOSS_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MNGSEGMENTBOSS" MODIFY ("ID_MNGSEGMENT" CONSTRAINT "NN_MNGSEGMENTBOSS_MNGSEG" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MNGSEGMENTBOSS" MODIFY ("DT_PLATNOSTOD" CONSTRAINT "NN_MNGSEGMENTBOSS_DTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MNGSEGMENTBOSS" MODIFY ("DT_PLATNOSTDO" CONSTRAINT "NN_MNGSEGMENTBOSS_DTDO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MNGSEGMENTBOSS" MODIFY ("ID_BOSS" CONSTRAINT "NN_MNGSEGMENTBOSS_BOSS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MNGSEGMENTBOSS" ADD CONSTRAINT "PK_MNGSEGMENTBOSS" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_MNGSEGMENTBOSS"  ENABLE;


PROMPT Completed KP_DAT_MNGSEGMENTBOSS.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_MNGSEGMENTBOSS_BCK_SEG.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_MNGSEGMENTBOSS_BCK_SEG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_MNGSEGMENTBOSS_BCK_SEG
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_MNGSEGMENTBOSS_BCK_SEG" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MNGSEGMENTBOSS_BCK_SEG" MODIFY ("ID_MNGSEGMENT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MNGSEGMENTBOSS_BCK_SEG" MODIFY ("DT_PLATNOSTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MNGSEGMENTBOSS_BCK_SEG" MODIFY ("DT_PLATNOSTDO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_MNGSEGMENTBOSS_BCK_SEG" MODIFY ("ID_BOSS" NOT NULL ENABLE);


PROMPT Completed KP_DAT_MNGSEGMENTBOSS_BCK_SEG.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_OPERACNIRIZIKO.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_OPERACNIRIZIKO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_OPERACNIRIZIKO
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_OPERACNIRIZIKO" MODIFY ("ID" CONSTRAINT "NN_KPOPERACNIRIZIKO_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_OPERACNIRIZIKO" MODIFY ("DT_DATUMOD" CONSTRAINT "NN_KPOPERACNIRIZIKO_DATUMOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_OPERACNIRIZIKO" MODIFY ("DT_DATUMDO" CONSTRAINT "NN_KPOPERACNIRIZIKO_DATUMDO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_OPERACNIRIZIKO" ADD CONSTRAINT "PK_KPOPERACNIRIZIKO" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPOPERACNIRIZIKO"  ENABLE;


PROMPT Completed KP_DAT_OPERACNIRIZIKO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_OPERACNIRIZIKODETAIL.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_OPERACNIRIZIKODETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_OPERACNIRIZIKODETAIL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_OPERACNIRIZIKODETAIL" MODIFY ("ID" CONSTRAINT "NN_KPOPERRIZIKOD_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_OPERACNIRIZIKODETAIL" ADD CONSTRAINT "PK_KPOPERRIZIKOD" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPOPERRIZIKOD"  ENABLE;


PROMPT Completed KP_DAT_OPERACNIRIZIKODETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_PROJEKTCASHFLOW.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_PROJEKTCASHFLOW.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_PROJEKTCASHFLOW
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTCASHFLOW" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTCASHFLOW" MODIFY ("ID_KTGPROJEKT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTCASHFLOW" MODIFY ("ID_TYP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTCASHFLOW" MODIFY ("DT_DATUM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTCASHFLOW" MODIFY ("S_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTCASHFLOW" MODIFY ("S_INOUT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTCASHFLOW" MODIFY ("ID_INOUTTYP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTCASHFLOW" ADD CONSTRAINT "PK_KPPROJCF" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPPROJCF"  ENABLE;


PROMPT Completed KP_DAT_PROJEKTCASHFLOW.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_PROJEKTDOKLAD.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_PROJEKTDOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_PROJEKTDOKLAD
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTDOKLAD" MODIFY ("ID" CONSTRAINT "NN_PROJEKTDOKLAD_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTDOKLAD" MODIFY ("ID_KTGPROJEKT" CONSTRAINT "NN_PROJEKTDOKLAD_PROJEKT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTDOKLAD" MODIFY ("DT_DATUM" CONSTRAINT "NN_PROJEKTDOKLAD_DATUM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTDOKLAD" ADD CONSTRAINT "PK_PROJEKTDOKLAD" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_PROJEKTDOKLAD"  ENABLE;


PROMPT Completed KP_DAT_PROJEKTDOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_PROJEKTDOKLADDENIK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_PROJEKTDOKLADDENIK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_PROJEKTDOKLADDENIK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTDOKLADDENIK" MODIFY ("ID_PROJEKTDOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTDOKLADDENIK" MODIFY ("C_KOD" NOT NULL ENABLE);


PROMPT Completed KP_DAT_PROJEKTDOKLADDENIK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_PROJEKTDOKLADPOLOZKA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_PROJEKTDOKLADPOLOZKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_PROJEKTDOKLADPOLOZKA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTDOKLADPOLOZKA" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTDOKLADPOLOZKA" MODIFY ("ID_PROJEKTDOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTDOKLADPOLOZKA" MODIFY ("ID_KTGPROJEKT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTDOKLADPOLOZKA" ADD CONSTRAINT "PK_KPPROJEKTDOKLADPOLOZKA" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPPROJEKTDOKLADPOLOZKA"  ENABLE;


PROMPT Completed KP_DAT_PROJEKTDOKLADPOLOZKA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_PROJEKTMEMORANDUMZPRAVA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_PROJEKTMEMORANDUMZPRAVA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_PROJEKTMEMORANDUMZPRAVA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTMEMORANDUMZPRAVA" MODIFY ("ID" CONSTRAINT "NN_PROJEKTMEMZPRAVA_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTMEMORANDUMZPRAVA" MODIFY ("ID_KTGPROJEKT" CONSTRAINT "NN_PROJEKTMEMZPRAVA_IDPROJEKT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTMEMORANDUMZPRAVA" MODIFY ("DT_DATUM" CONSTRAINT "NN_PROJEKTMEMZPRAVA_DATUM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTMEMORANDUMZPRAVA" ADD CONSTRAINT "PK_PROJEKTMEMZPRAVA" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_PROJEKTMEMZPRAVA"  ENABLE;


PROMPT Completed KP_DAT_PROJEKTMEMORANDUMZPRAVA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_PROJEKTNAKLADY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_PROJEKTNAKLADY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_PROJEKTNAKLADY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTNAKLADY" MODIFY ("ID" CONSTRAINT "NN_KPPROJNAKL_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTNAKLADY" MODIFY ("ID_KTGPROJEKT" CONSTRAINT "NN_KPPROJNAKL_IDPROJEKT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTNAKLADY" MODIFY ("S_TYP" CONSTRAINT "NN_KPPROJNAKL_TYP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTNAKLADY" ADD CONSTRAINT "PK_KPPROJNAKL" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPPROJNAKL"  ENABLE;


PROMPT Completed KP_DAT_PROJEKTNAKLADY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_PROJEKTNAKLADYDETAIL.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_PROJEKTNAKLADYDETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_PROJEKTNAKLADYDETAIL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTNAKLADYDETAIL" MODIFY ("ID" CONSTRAINT "NN_KPPROJNAKLDETAIL_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTNAKLADYDETAIL" MODIFY ("ID_KTGPROJEKT" CONSTRAINT "NN_KPPROJNAKLDETAIL_IDPROJEKT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTNAKLADYDETAIL" MODIFY ("S_TYP" CONSTRAINT "NN_KPPROJNAKLDETAIL_TYP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTNAKLADYDETAIL" ADD CONSTRAINT "PK_KPPROJNAKLDETAIL" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPPROJNAKLDETAIL"  ENABLE;


PROMPT Completed KP_DAT_PROJEKTNAKLADYDETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_SEGMENTZASTUP.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_SEGMENTZASTUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_SEGMENTZASTUP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_SEGMENTZASTUP" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_SEGMENTZASTUP" ADD CONSTRAINT "PK_KPSEGMENTZASTUP" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPSEGMENTZASTUP"  ENABLE;


PROMPT Completed KP_DAT_SEGMENTZASTUP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_SPOLECNOSTLIST.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_SPOLECNOSTLIST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_SPOLECNOSTLIST
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_SPOLECNOSTLIST" MODIFY ("ID_APPUSER" CONSTRAINT "NN_SPOLECNOSTLIST_USER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_SPOLECNOSTLIST" MODIFY ("S_NAZEV" CONSTRAINT "NN_SPOLECNOSTLIST_NAZEV" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_SPOLECNOSTLIST" ADD CONSTRAINT "PK_SPOLECNOSTLIST" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_SPOLECNOSTLIST"  ENABLE;


PROMPT Completed KP_DAT_SPOLECNOSTLIST.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_SPOLECNOSTLISTDETAIL.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_SPOLECNOSTLISTDETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_SPOLECNOSTLISTDETAIL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_SPOLECNOSTLISTDETAIL" MODIFY ("ID_SPOLECNOSTLIST" CONSTRAINT "NN_SPOLECNOSTLISTDET_SLIST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_SPOLECNOSTLISTDETAIL" MODIFY ("ID_KTGSPOLECNOST" CONSTRAINT "NN_SPOLECNOSTLISTDET_SPOL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_SPOLECNOSTLISTDETAIL" ADD CONSTRAINT "PK_SPOLECNOSTLISTDET" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_SPOLECNOSTLISTDET"  ENABLE;


PROMPT Completed KP_DAT_SPOLECNOSTLISTDETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_UVER.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_UVER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_UVER
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_UVER" ADD CONSTRAINT "PK_KPUVER" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPUVER"  ENABLE;


PROMPT Completed KP_DAT_UVER.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_UVERMANUAL.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_UVERMANUAL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_UVERMANUAL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_UVERMANUAL" MODIFY ("ID_EXTSYSTEM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_UVERMANUAL" ADD PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "INDEXY"  ENABLE;


PROMPT Completed KP_DAT_UVERMANUAL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_VAZBYZAMEK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_VAZBYZAMEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_VAZBYZAMEK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_VAZBYZAMEK" MODIFY ("ID_CISDOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_VAZBYZAMEK" MODIFY ("ID_KTGUCETNISPOLECNOSTFROM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_VAZBYZAMEK" MODIFY ("ID_KTGUCETNISPOLECNOSTTO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_VAZBYZAMEK" MODIFY ("ID_KTGUCETNISKUPINA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_VAZBYZAMEK" MODIFY ("DT_DATUM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_VAZBYZAMEK" MODIFY ("S_UZIVATEL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_VAZBYZAMEK" MODIFY ("DT_DATUMZMENY" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DAT_VAZBYZAMEK" ADD CONSTRAINT "PK_VAZBYZAMEK" PRIMARY KEY ("ID_CISDOKLAD", "ID_KTGUCETNISPOLECNOSTFROM", "ID_KTGUCETNISPOLECNOSTTO", "ID_KTGUCETNISKUPINA", "DT_DATUM")
  USING INDEX "DB_JT"."PK_VAZBYZAMEK"  ENABLE;


PROMPT Completed KP_DAT_VAZBYZAMEK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_VYJIMKYZAMYKANITOP.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DAT_VYJIMKYZAMYKANITOP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DAT_VYJIMKYZAMYKANITOP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_VYJIMKYZAMYKANITOP" ADD CONSTRAINT "PK_KPVYJIMKYZAMYKANI" PRIMARY KEY ("ID_KTGUCETNISPOLECNOST", "KVARTAL")
  USING INDEX "DB_JT"."PK_KPVYJIMKYZAMYKANI"  ENABLE;


PROMPT Completed KP_DAT_VYJIMKYZAMYKANITOP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_ACC_JT2PPF.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DEF_ACC_JT2PPF.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DEF_ACC_JT2PPF
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_ACC_JT2PPF" MODIFY ("JT_ACC" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_ACC_JT2PPF" MODIFY ("PPF_ACC" NOT NULL ENABLE);


PROMPT Completed KP_DEF_ACC_JT2PPF.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_ACC_JT2PPF_BCK2.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DEF_ACC_JT2PPF_BCK2.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DEF_ACC_JT2PPF_BCK2
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_ACC_JT2PPF_BCK2" MODIFY ("JT_ACC" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_ACC_JT2PPF_BCK2" MODIFY ("PPF_ACC" NOT NULL ENABLE);


PROMPT Completed KP_DEF_ACC_JT2PPF_BCK2.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_ACC_JT2PPF_BCK3.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DEF_ACC_JT2PPF_BCK3.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DEF_ACC_JT2PPF_BCK3
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_ACC_JT2PPF_BCK3" MODIFY ("JT_ACC" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_ACC_JT2PPF_BCK3" MODIFY ("PPF_ACC" NOT NULL ENABLE);


PROMPT Completed KP_DEF_ACC_JT2PPF_BCK3.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_ACC_JT2PPF_BCK4.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DEF_ACC_JT2PPF_BCK4.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DEF_ACC_JT2PPF_BCK4
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_ACC_JT2PPF_BCK4" MODIFY ("JT_ACC" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_ACC_JT2PPF_BCK4" MODIFY ("PPF_ACC" NOT NULL ENABLE);


PROMPT Completed KP_DEF_ACC_JT2PPF_BCK4.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_ACC_JT2PPF_BCK5.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DEF_ACC_JT2PPF_BCK5.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DEF_ACC_JT2PPF_BCK5
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_ACC_JT2PPF_BCK5" MODIFY ("JT_ACC" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_ACC_JT2PPF_BCK5" MODIFY ("PPF_ACC" NOT NULL ENABLE);


PROMPT Completed KP_DEF_ACC_JT2PPF_BCK5.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_BUDGETMUSTEK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DEF_BUDGETMUSTEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DEF_BUDGETMUSTEK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_BUDGETMUSTEK" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_BUDGETMUSTEK" MODIFY ("ID_CISSUBJECT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_BUDGETMUSTEK" MODIFY ("ID_CISTYPTRANSAKCE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_BUDGETMUSTEK" MODIFY ("S_UCET" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_BUDGETMUSTEK" ADD CONSTRAINT "PK_DEFBUDGETMUSTEK" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_DEFBUDGETMUSTEK"  ENABLE;


PROMPT Completed KP_DEF_BUDGETMUSTEK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_BUNKAVYPOCET.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DEF_BUNKAVYPOCET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DEF_BUNKAVYPOCET
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_BUNKAVYPOCET" MODIFY ("ID_CISDOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_BUNKAVYPOCET" MODIFY ("NL_PORADILIST" CONSTRAINT "NN_KPDEFBUNKAVYP_PORLIST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_BUNKAVYPOCET" MODIFY ("NL_RADEK" CONSTRAINT "NN_KPDEFBUNKAVYP_RADEK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_BUNKAVYPOCET" MODIFY ("NL_DILCIPORADILIST" CONSTRAINT "NN_KPDEFBUNKAVYP_DPORLIST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_BUNKAVYPOCET" MODIFY ("NL_DILCIRADEK" CONSTRAINT "NN_KPDEFBUNKAVYP_DRADEK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_BUNKAVYPOCET" MODIFY ("S_AKCE" CONSTRAINT "NN_KPDEFBUNKAVYP_AKCE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_BUNKAVYPOCET" ADD CONSTRAINT "PK_KPDEFBUNKAVYPOCET" PRIMARY KEY ("ID_CISDOKLAD", "NL_DILCIPORADILIST", "NL_DILCIRADEK")
  USING INDEX "DB_JT"."PK_KPDEFBUNKAVYPOCET"  ENABLE;


PROMPT Completed KP_DEF_BUNKAVYPOCET.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_DEVELOPERSPOLECNOST.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DEF_DEVELOPERSPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DEF_DEVELOPERSPOLECNOST
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_DEVELOPERSPOLECNOST" MODIFY ("ID_KTGUCETNISPOLECNOST" CONSTRAINT "NN_DEF_DEVELOPER_IDSPOL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_DEVELOPERSPOLECNOST" ADD CONSTRAINT "PK_DEF_DEVELOPER" PRIMARY KEY ("ID_KTGUCETNISPOLECNOST")
  USING INDEX "DB_JT"."PK_DEF_DEVELOPER"  ENABLE;


PROMPT Completed KP_DEF_DEVELOPERSPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_DOKLAD.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DEF_DOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DEF_DOKLAD
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_DOKLAD" MODIFY ("ID" CONSTRAINT "NN_KPDEFDOKLAD_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_DOKLAD" MODIFY ("ID_CISLIST" CONSTRAINT "NN_KPDEFDOKLAD_LIST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_DOKLAD" MODIFY ("NL_PORADI" CONSTRAINT "NN_KPDEFDOKLAD_PORADI" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_DOKLAD" MODIFY ("ID_CISDOKLAD" CONSTRAINT "NN_KPDEFDOKLAD_CISDOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_DOKLAD" ADD CONSTRAINT "PK_KPDEFDOKLAD" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPDEFDOKLAD"  ENABLE;


PROMPT Completed KP_DEF_DOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_KAPITALOVKADUPLICITY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DEF_KAPITALOVKADUPLICITY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DEF_KAPITALOVKADUPLICITY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_KAPITALOVKADUPLICITY" MODIFY ("ID" CONSTRAINT "NN_KPKAPDUPLICITY_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_KAPITALOVKADUPLICITY" ADD CONSTRAINT "CN_KPKAPDUPLICITY_IGNOROVAT" CHECK ( C_IGNOROVAT in ( '0', '1' ) ) ENABLE;


PROMPT Completed KP_DEF_KAPITALOVKADUPLICITY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_KATEGORIE2TYP.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DEF_KATEGORIE2TYP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DEF_KATEGORIE2TYP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_KATEGORIE2TYP" MODIFY ("ID_CISTYPSUBJECT" CONSTRAINT "NN_KPDEFKATEG2TYP_SUBJECT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_KATEGORIE2TYP" MODIFY ("S_KODKATEGORIEPROTISTRANA" CONSTRAINT "NN_KPDEFKATEG2TYP_KOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_KATEGORIE2TYP" ADD CONSTRAINT "PK_KPDEFKATEG2TYP" PRIMARY KEY ("ID_CISTYPSUBJECT", "S_KODKATEGORIEPROTISTRANA")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS  ENABLE;


PROMPT Completed KP_DEF_KATEGORIE2TYP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_KONTROLAMAJETKOVAUCAST.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DEF_KONTROLAMAJETKOVAUCAST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DEF_KONTROLAMAJETKOVAUCAST
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_KONTROLAMAJETKOVAUCAST" MODIFY ("ID" CONSTRAINT "NN_KPDEFKONTROLAMU_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_KONTROLAMAJETKOVAUCAST" MODIFY ("ID_CISSUBJECT" CONSTRAINT "NN_KPDEFKONTROLAMU_SUBJECT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_KONTROLAMAJETKOVAUCAST" MODIFY ("DT_PLATNOSTOD" CONSTRAINT "NN_KPDEFKONTROLAMU_PLATNOSTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_KONTROLAMAJETKOVAUCAST" MODIFY ("DT_PLATNOSTDO" CONSTRAINT "NN_KPDEFKONTROLAMU_PLATNOSTDO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_KONTROLAMAJETKOVAUCAST" MODIFY ("S_UZIVATEL" CONSTRAINT "NN_KPDEFKONTROLAMU_USER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_KONTROLAMAJETKOVAUCAST" ADD CONSTRAINT "PK_KPDEFKONTROLAMU" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPDEFKONTROLAMU"  ENABLE;
  ALTER TABLE "DB_JT"."KP_DEF_KONTROLAMAJETKOVAUCAST" ADD CONSTRAINT "C_KPDEFKONTROLAMU_KRIZENI_ODDO" CHECK ( dt_platnostOd <= dt_platnostDo ) ENABLE;


PROMPT Completed KP_DEF_KONTROLAMAJETKOVAUCAST.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_LISTBUNKA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DEF_LISTBUNKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DEF_LISTBUNKA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKA" MODIFY ("ID" CONSTRAINT "NN_KPDEFLISTBUNKA_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKA" MODIFY ("ID_CISLIST" CONSTRAINT "NN_KPDEFLISTBUNKA_LISTTYP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKA" MODIFY ("ID_CISRADEKTYP" CONSTRAINT "NN_KPDEFLISTBUNKA_RADEKTYP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKA" MODIFY ("NL_RADEK" CONSTRAINT "NN_KPDEFLISTBUNKA_RADEK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKA" MODIFY ("NL_SLOUPEC" CONSTRAINT "NN_KPDEFLISTBUNKA_SLOUPEC" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKA" ADD CONSTRAINT "PK_KPDEFLISTBUNKA" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPDEFLISTBUNKA"  ENABLE;
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKA" ADD CONSTRAINT "CN_KPDEFLISTBUNKA_TYP" CHECK ( c_typ is not null and c_typ in ( 'V', 'R', '0', 'I') ) ENABLE NOVALIDATE;


PROMPT Completed KP_DEF_LISTBUNKA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_LISTBUNKANASTROJ.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DEF_LISTBUNKANASTROJ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DEF_LISTBUNKANASTROJ
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKANASTROJ" MODIFY ("ID" CONSTRAINT "NN_KPLISTBUNKANASTR_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKANASTROJ" MODIFY ("ID_TYPNASTROJE" CONSTRAINT "NN_KPLISTBUNKANASTR_IDTYPNASTR" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKANASTROJ" MODIFY ("ID_DEFLISTBUNKA" CONSTRAINT "NN_KPLISTBUNKANASTR_IDLISTBUNK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKANASTROJ" MODIFY ("DT_PLATNOSTOD" CONSTRAINT "NN_KPLISTBUNKANASTR_OD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKANASTROJ" MODIFY ("DT_PLATNOSTDO" CONSTRAINT "NN_KPLISTBUNKANASTR_DO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKANASTROJ" MODIFY ("C_KONTROLABANKA" CONSTRAINT "NN_KPLISTBUNKANASTR_KONTRBANKA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKANASTROJ" MODIFY ("C_KONTROLAMIMOBANKU" CONSTRAINT "NN_KPLISTBUNKANASTR_KONTRMIMO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKANASTROJ" MODIFY ("ID_KTGDOKLAD" CONSTRAINT "NN_KPDEFLISTBNASTROJ_KTGDOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKANASTROJ" ADD CONSTRAINT "PK_KPLISTBUNKANASTR" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPLISTBUNKANASTR"  ENABLE;
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKANASTROJ" ADD CONSTRAINT "CN_KPLISTBUNKANASTR_KONTRMIMO" CHECK ( c_kontrolaMimoBanku in ('0','1') ) ENABLE;
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKANASTROJ" ADD CONSTRAINT "CN_KPLISTBUNKANASTR_KONTRBANKA" CHECK ( c_kontrolaBanka in ('0','1') ) ENABLE;
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKANASTROJ" ADD CONSTRAINT "CN_KPLISTBUNKANASTR_PLATNOST" CHECK ( dt_platnostOd <= dt_platnostDo ) ENABLE;


PROMPT Completed KP_DEF_LISTBUNKANASTROJ.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_LISTBUNKASUM.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DEF_LISTBUNKASUM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DEF_LISTBUNKASUM
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKASUM" MODIFY ("ID_BUNKASUM" CONSTRAINT "PK_KPDEFLISTBUNKASUM_BUNKASUM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKASUM" MODIFY ("ID_BUNKA" CONSTRAINT "PK_KPDEFLISTBUNKASUM_BUNKA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKASUM" MODIFY ("NL_KOEFICIENT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKASUM" ADD CONSTRAINT "PK_KPDEFLISTBUNKASUM" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPDEFLISTBUNKASUM"  ENABLE;
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKASUM" ADD CONSTRAINT "CN_KPDEFBUNKASUM_TYP" CHECK ( c_typ is not null and c_typ in ( 'R', 'S' ) ) ENABLE;


PROMPT Completed KP_DEF_LISTBUNKASUM.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_LISTBUNKASUM_TMP.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DEF_LISTBUNKASUM_TMP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DEF_LISTBUNKASUM_TMP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKASUM_TMP" MODIFY ("ID_BUNKASUM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKASUM_TMP" MODIFY ("ID_BUNKA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKASUM_TMP" MODIFY ("NL_KOEFICIENT" NOT NULL ENABLE);


PROMPT Completed KP_DEF_LISTBUNKASUM_TMP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_LISTBUNKASUM_TST89.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DEF_LISTBUNKASUM_TST89.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DEF_LISTBUNKASUM_TST89
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKASUM_TST89" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKASUM_TST89" MODIFY ("ID_BUNKASUM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKASUM_TST89" MODIFY ("ID_BUNKA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKASUM_TST89" MODIFY ("NL_KOEFICIENT" NOT NULL ENABLE);


PROMPT Completed KP_DEF_LISTBUNKASUM_TST89.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_LISTBUNKAUCET.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DEF_LISTBUNKAUCET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DEF_LISTBUNKAUCET
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET" MODIFY ("ID" CONSTRAINT "NN_KPDEFLISTBUNKAUCET_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET" MODIFY ("ID_DEFLISTBUNKA" CONSTRAINT "NN_KPDEFLISTBUNKAUCET_LIST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET" MODIFY ("S_UCET" CONSTRAINT "NN_KPDEFLISTBUNKAUCET_UCET" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET" MODIFY ("C_UCETSUMA" CONSTRAINT "NN_KPDEFLISTBUNKAUCET_SUMA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET" MODIFY ("ND_KOEFICIENT" CONSTRAINT "NN_KPDEFLISTBUNKAUCET_KOEF" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET" MODIFY ("DT_PLATNOSTOD" CONSTRAINT "NN_KPDEFLISTBUCET_PLATNOSTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET" MODIFY ("DT_PLATNOSTDO" CONSTRAINT "NN_KPDEFLISTBUCET_PLATNOSTDO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET" MODIFY ("S_UZIVATEL" CONSTRAINT "NN_KPDEFLISTBUCET_USER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET" MODIFY ("ID_PARENT" CONSTRAINT "NN_KPDEFLISTBUCET_PARENT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET" MODIFY ("ID_KTGDOKLAD" CONSTRAINT "NN_KPDEFLISTBUCET_KTGDOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET" ADD CONSTRAINT "PK_KPDEFLISTBUNKAUCET" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPDEFLISTBUNKAUCET"  ENABLE;
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET" ADD CONSTRAINT "C_KPDEFLISTBUCET_KRIZENI_ODDO" CHECK ( dt_platnostOd <= dt_platnostDo ) ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET" ADD CONSTRAINT "CN_KPDEFLISTBUCET_UVEROVA" CHECK ( c_uverovaPozice is not null and c_uverovaPozice in ( '0', '1' ) ) ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET" ADD CONSTRAINT "CN_KPDEFLISTBUCET_MENOVA" CHECK ( c_menovaPozice is not null and c_menovaPozice in ( '0', '1' ) ) ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET" ADD CONSTRAINT "CN_KPDEFLISTBUNKAUCET_VALID" CHECK ( c_validovatMasku is not null and c_validovatMasku in ( '0', '1' ) ) ENABLE NOVALIDATE;


PROMPT Completed KP_DEF_LISTBUNKAUCET.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_LISTBUNKAUCET_BAK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DEF_LISTBUNKAUCET_BAK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DEF_LISTBUNKAUCET_BAK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET_BAK" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET_BAK" MODIFY ("ID_DEFLISTBUNKA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET_BAK" MODIFY ("S_UCET" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET_BAK" MODIFY ("C_UCETSUMA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET_BAK" MODIFY ("ND_KOEFICIENT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET_BAK" MODIFY ("DT_PLATNOSTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET_BAK" MODIFY ("DT_PLATNOSTDO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET_BAK" MODIFY ("S_UZIVATEL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET_BAK" MODIFY ("ID_PARENT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET_BAK" MODIFY ("ID_KTGDOKLAD" NOT NULL ENABLE);


PROMPT Completed KP_DEF_LISTBUNKAUCET_BAK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_LISTBUNKAUCET_BCK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DEF_LISTBUNKAUCET_BCK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DEF_LISTBUNKAUCET_BCK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET_BCK" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET_BCK" MODIFY ("ID_DEFLISTBUNKA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET_BCK" MODIFY ("S_UCET" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET_BCK" MODIFY ("C_UCETSUMA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET_BCK" MODIFY ("ND_KOEFICIENT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET_BCK" MODIFY ("DT_PLATNOSTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET_BCK" MODIFY ("DT_PLATNOSTDO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET_BCK" MODIFY ("S_UZIVATEL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET_BCK" MODIFY ("ID_PARENT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET_BCK" MODIFY ("ID_KTGDOKLAD" NOT NULL ENABLE);


PROMPT Completed KP_DEF_LISTBUNKAUCET_BCK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_NASTROJOPERACE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DEF_NASTROJOPERACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DEF_NASTROJOPERACE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_NASTROJOPERACE" MODIFY ("ID" CONSTRAINT "NN_KPDEFNASTROJOPERACE_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_NASTROJOPERACE" ADD CONSTRAINT "PK_KPDEFNASTROJOPERACE" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPDEFNASTROJOPERACE"  ENABLE;


PROMPT Completed KP_DEF_NASTROJOPERACE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_QUESTORVAZBAPRODUCT.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DEF_QUESTORVAZBAPRODUCT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DEF_QUESTORVAZBAPRODUCT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_QUESTORVAZBAPRODUCT" MODIFY ("ID" CONSTRAINT "NN_KPDEFQUESVAZBAPROD_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_QUESTORVAZBAPRODUCT" MODIFY ("ID_KTGUCETNISPOLECNOST" CONSTRAINT "NN_KPDEFQUESVAZBAPROD_US" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_QUESTORVAZBAPRODUCT" MODIFY ("S_PRODUCT_1" CONSTRAINT "NN_KPDEFQUESVAZBAPROD_P1" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_QUESTORVAZBAPRODUCT" MODIFY ("S_PRODUCT_2" CONSTRAINT "NN_KPDEFQUESVAZBAPROD_P2" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_QUESTORVAZBAPRODUCT" ADD CONSTRAINT "PK_KP_DEF_QUESTORVAZBAPRODUCT" PRIMARY KEY ("ID_KTGUCETNISPOLECNOST", "S_PRODUCT_1", "S_PRODUCT_2")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS  ENABLE;
  ALTER TABLE "DB_JT"."KP_DEF_QUESTORVAZBAPRODUCT" ADD CONSTRAINT "UI_KPDEFQUESVAZBAPROD" UNIQUE ("ID")
  USING INDEX "DB_JT"."UI_KPDEFQUESVAZBAPROD"  ENABLE;


PROMPT Completed KP_DEF_QUESTORVAZBAPRODUCT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_UCET2UCETUNIF.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DEF_UCET2UCETUNIF.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DEF_UCET2UCETUNIF
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_UCET2UCETUNIF" MODIFY ("ID" CONSTRAINT "NN_UCET2UCETUNIF_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_UCET2UCETUNIF" MODIFY ("ID_CISUCETUNIF" CONSTRAINT "NN_UCET2UCETUNIF_IDUU" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_UCET2UCETUNIF" MODIFY ("S_UCETPRIMSYSTEM" CONSTRAINT "NN_UCET2UCETUNIF_UCET" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_UCET2UCETUNIF" MODIFY ("ID_CISSUBJECT" CONSTRAINT "NN_UCET2UCETUNIF_SUBJ" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_UCET2UCETUNIF" MODIFY ("C_UCETSUMA" CONSTRAINT "NN_KPDEFUCET2UCET_SUMA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_UCET2UCETUNIF" ADD CONSTRAINT "PK_UCET2UCETUNIF" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_UCET2UCETUNIF"  ENABLE;
  ALTER TABLE "DB_JT"."KP_DEF_UCET2UCETUNIF" ADD CONSTRAINT "CN_KPDEFUCET2UCETUNIF_TESTMU" CHECK ( c_testovatMajUcast is not null and  c_testovatMajUcast in ( '0', '1' )) ENABLE;


PROMPT Completed KP_DEF_UCET2UCETUNIF.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_UCETBUSINESSLINIE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DEF_UCETBUSINESSLINIE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DEF_UCETBUSINESSLINIE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_UCETBUSINESSLINIE" MODIFY ("ID" CONSTRAINT "NN_DEFUCETBUSINESSLINIE_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_UCETBUSINESSLINIE" MODIFY ("S_UCET" CONSTRAINT "NN_DEFUCETBUSINESSLINIE_UCET" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_UCETBUSINESSLINIE" MODIFY ("ID_CISBUSINESSLINIE" CONSTRAINT "NN_DEFUCETBUSINESSLINIE_BL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_UCETBUSINESSLINIE" ADD CONSTRAINT "CH_DEFUCETBUSINESSLINIE_TO" CHECK (c_typOsoby is not null and c_typOsoby in ('C','P','-')) ENABLE;
  ALTER TABLE "DB_JT"."KP_DEF_UCETBUSINESSLINIE" ADD CONSTRAINT "PK_DEFUCETBUSINESSLINIE" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_DEFUCETBUSINESSLINIE"  ENABLE;


PROMPT Completed KP_DEF_UCETBUSINESSLINIE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_UCETPORTFOLIO.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DEF_UCETPORTFOLIO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DEF_UCETPORTFOLIO
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_UCETPORTFOLIO" MODIFY ("ID" CONSTRAINT "NN_KPUCETPORTFOLIO_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_UCETPORTFOLIO" MODIFY ("ID_KTGUCETNISPOLECNOST" CONSTRAINT "NN_KPUCETPORTFOLIO_UCSPOL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_UCETPORTFOLIO" MODIFY ("S_UCET" CONSTRAINT "NN_KPUCETPORTFOLIO_UCET" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_UCETPORTFOLIO" MODIFY ("DT_PLATNOSTOD" CONSTRAINT "NN_KPUCETPORTFOLIO_OD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_UCETPORTFOLIO" MODIFY ("DT_PLATNOSTDO" CONSTRAINT "NN_KPUCETPORTFOLIO_DO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_UCETPORTFOLIO" ADD CONSTRAINT "PK_KPUCETPORTFOLIO" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPUCETPORTFOLIO"  ENABLE;
  ALTER TABLE "DB_JT"."KP_DEF_UCETPORTFOLIO" ADD CONSTRAINT "CN_KPUCETPORTFOLIO_PLATNOST" CHECK ( dt_platnostOd <= dt_platnostDo ) ENABLE;


PROMPT Completed KP_DEF_UCETPORTFOLIO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_UCETVAZBAUCET.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DEF_UCETVAZBAUCET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DEF_UCETVAZBAUCET
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_UCETVAZBAUCET" MODIFY ("ID" CONSTRAINT "NN_KPDEFUCETVAZBAUCET_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_UCETVAZBAUCET" MODIFY ("ID_KTGDOKLAD" CONSTRAINT "NN_KPDEFUCETVAZBAUCET_DOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_UCETVAZBAUCET" MODIFY ("S_UCET_1" CONSTRAINT "NN_KPDEFUCETVAZBAUCET_UCET" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_UCETVAZBAUCET" MODIFY ("S_UCET_2" CONSTRAINT "NN_KPDEFUCETVAZBAUCET_UCET2" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_UCETVAZBAUCET" MODIFY ("DT_PLATNOSTOD" CONSTRAINT "NN_KPDEFUCETVAZBAUCET_PLATOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_UCETVAZBAUCET" MODIFY ("DT_PLATNOSTDO" CONSTRAINT "NN_KPDEFUCETVAZBAUCET_PLATDO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_UCETVAZBAUCET" MODIFY ("S_UZIVATEL" CONSTRAINT "NN_KPDEFUCETVAZBAUCET_UZIV" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_UCETVAZBAUCET" ADD CONSTRAINT "CN_KPDEFUCETVAZBAUCET_UCET12" CHECK ( ( s_ucet_1 != s_ucet_2 ) or id_typ = 99) ENABLE;
  ALTER TABLE "DB_JT"."KP_DEF_UCETVAZBAUCET" ADD CONSTRAINT "PK_KPDEFUCETVAZBAUCET" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPDEFUCETVAZBAUCET"  ENABLE;
  ALTER TABLE "DB_JT"."KP_DEF_UCETVAZBAUCET" ADD CONSTRAINT "C_KPDEFUCETVAZU_KRIZENI_ODDO" CHECK ( dt_platnostOd <= dt_platnostDo ) ENABLE;


PROMPT Completed KP_DEF_UCETVAZBAUCET.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_UNIFUCETBEZZARAZENI.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DEF_UNIFUCETBEZZARAZENI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DEF_UNIFUCETBEZZARAZENI
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_UNIFUCETBEZZARAZENI" ADD CONSTRAINT "PK_KPDEFUNIFUCETBEZZARAZENI" PRIMARY KEY ("ID_KTGDOKLAD", "ID_CISUCETUNIF")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS  ENABLE;


PROMPT Completed KP_DEF_UNIFUCETBEZZARAZENI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_VYJIMKAUCETPRODUKT.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_DEF_VYJIMKAUCETPRODUKT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_DEF_VYJIMKAUCETPRODUKT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_VYJIMKAUCETPRODUKT" MODIFY ("ID_CISSUBJECT" CONSTRAINT "NN_DEFVYJUCETPRODUKT_SUBJECT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_VYJIMKAUCETPRODUKT" MODIFY ("S_UCET" CONSTRAINT "NN_DEFVYJUCETPRODUKT_UCET" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_DEF_VYJIMKAUCETPRODUKT" ADD CONSTRAINT "PK_DEFVYJUCETPRODUKT" PRIMARY KEY ("ID_CISSUBJECT", "S_UCET")
  USING INDEX "DB_JT"."PK_DEFVYJUCETPRODUKT"  ENABLE;


PROMPT Completed KP_DEF_VYJIMKAUCETPRODUKT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_EMAIL_PARAM.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_EMAIL_PARAM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_EMAIL_PARAM
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_EMAIL_PARAM" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_EMAIL_PARAM" MODIFY ("C_POVOLENO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_EMAIL_PARAM" ADD CONSTRAINT "PK_KPEMAILPARAM" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPEMAILPARAM"  ENABLE;


PROMPT Completed KP_EMAIL_PARAM.sql
PROMPT


-- ============================================================================
-- Deploy: KP_EMAIL_PARAM_06_2021.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_EMAIL_PARAM_06_2021.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_EMAIL_PARAM_06_2021
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_EMAIL_PARAM_06_2021" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_EMAIL_PARAM_06_2021" MODIFY ("C_POVOLENO" NOT NULL ENABLE);


PROMPT Completed KP_EMAIL_PARAM_06_2021.sql
PROMPT


-- ============================================================================
-- Deploy: KP_EMAIL_PARAM_BCK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_EMAIL_PARAM_BCK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_EMAIL_PARAM_BCK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_EMAIL_PARAM_BCK" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_EMAIL_PARAM_BCK" MODIFY ("C_POVOLENO" NOT NULL ENABLE);


PROMPT Completed KP_EMAIL_PARAM_BCK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KALENDARAKCI.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KALENDARAKCI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KALENDARAKCI
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KALENDARAKCI" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KALENDARAKCI" MODIFY ("S_DEN" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KALENDARAKCI" MODIFY ("C_POSILATEMAILY" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KALENDARAKCI" ADD CONSTRAINT "PK_KALENDARAKCI" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KALENDARAKCI"  ENABLE;


PROMPT Completed KP_KALENDARAKCI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_DOKLAD.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_DOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_DOKLAD
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_DOKLAD" MODIFY ("ID" CONSTRAINT "NN_KPKTGDOKLAD_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_DOKLAD" MODIFY ("ID_CISDOKLAD" CONSTRAINT "NN_KPCDOKLAD_DOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_DOKLAD" MODIFY ("S_UCETNAKLADY" CONSTRAINT "NN_KPCDOKLAD_NAKLADY" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_DOKLAD" MODIFY ("S_UCETVYNOSY" CONSTRAINT "NN_KPCDOKLAD_VYNOSY" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_DOKLAD" ADD CONSTRAINT "PK_KPKTGDOKLAD" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPKTGDOKLAD"  ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_DOKLAD" ADD CONSTRAINT "CN_KTGDOKLAD_KONTROLA" CHECK ( C_NEDELATKONTROLUZARAZENIUCTU  in ('3','V') ) ENABLE;


PROMPT Completed KP_KTG_DOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_DOKLADMAJUCASTVYJIMKA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_DOKLADMAJUCASTVYJIMKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_DOKLADMAJUCASTVYJIMKA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_DOKLADMAJUCASTVYJIMKA" MODIFY ("ID" CONSTRAINT "NN_KPKTGDOKLADMUVYJ_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_DOKLADMAJUCASTVYJIMKA" MODIFY ("ID_KTGDOKLAD" CONSTRAINT "NN_KPDEFDOKLADMUVYJ_DOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_DOKLADMAJUCASTVYJIMKA" MODIFY ("S_UCET" CONSTRAINT "NN_KPDEFDOKLADMUVYJ_UCET" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_DOKLADMAJUCASTVYJIMKA" MODIFY ("S_UZIVATEL" CONSTRAINT "NN_KPDEFDOKLADMUVYJ_UZIV" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_DOKLADMAJUCASTVYJIMKA" ADD CONSTRAINT "PK_KPKTGDOKLADMUVYJ" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPKTGDOKLADMUVYJ"  ENABLE;


PROMPT Completed KP_KTG_DOKLADMAJUCASTVYJIMKA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_EMAILZPRAVY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_EMAILZPRAVY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_EMAILZPRAVY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_EMAILZPRAVY" MODIFY ("ID_MSGTYPE" CONSTRAINT "NN_KTGEMAILTYPE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_EMAILZPRAVY" MODIFY ("ID_KTGAPPUSER" CONSTRAINT "NN_KTGEMAILUSER" NOT NULL ENABLE);


PROMPT Completed KP_KTG_EMAILZPRAVY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_EMAILZPRAVY_BCK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_EMAILZPRAVY_BCK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_EMAILZPRAVY_BCK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_EMAILZPRAVY_BCK" MODIFY ("ID_MSGTYPE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_EMAILZPRAVY_BCK" MODIFY ("ID_KTGAPPUSER" NOT NULL ENABLE);


PROMPT Completed KP_KTG_EMAILZPRAVY_BCK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_EVIADMINSPOLECNOST.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_EVIADMINSPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_EVIADMINSPOLECNOST
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_EVIADMINSPOLECNOST" MODIFY ("ID" CONSTRAINT "NN_KTGEVIADMINSPOL_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_EVIADMINSPOLECNOST" MODIFY ("S_NAZEV" CONSTRAINT "NN_KTGEVIADMINSPOL_NAZEV" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_EVIADMINSPOLECNOST" MODIFY ("ID_STATUS" CONSTRAINT "NN_KTGEVIADMINSPOL_STATUS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_EVIADMINSPOLECNOST" ADD CONSTRAINT "PK_KTGEVIADMINSPOL" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KTGEVIADMINSPOL"  ENABLE;


PROMPT Completed KP_KTG_EVIADMINSPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_EVIEXTERNIADMIN.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_EVIEXTERNIADMIN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_EVIEXTERNIADMIN
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_EVIEXTERNIADMIN" MODIFY ("ID" CONSTRAINT "NN_KTGEVIEXTERNIADMIN_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_EVIEXTERNIADMIN" MODIFY ("S_NAZEV" CONSTRAINT "NN_KTGEVIEXTERNIADMIN_NAZEV" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_EVIEXTERNIADMIN" ADD CONSTRAINT "PK_EVIEXTERNIADMIN" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_EVIEXTERNIADMIN"  ENABLE;


PROMPT Completed KP_KTG_EVIEXTERNIADMIN.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_EVISIDLO.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_EVISIDLO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_EVISIDLO
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_EVISIDLO" MODIFY ("ID" CONSTRAINT "NN_KTGEVISIDLO_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_EVISIDLO" ADD CONSTRAINT "PK_KTGEVISIDLO" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KTGEVISIDLO"  ENABLE;


PROMPT Completed KP_KTG_EVISIDLO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_EVISTATUTARNIZASTUPCE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_EVISTATUTARNIZASTUPCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_EVISTATUTARNIZASTUPCE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_EVISTATUTARNIZASTUPCE" MODIFY ("ID" CONSTRAINT "NN_KTGEVISTATZASTUPCE_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_EVISTATUTARNIZASTUPCE" ADD CONSTRAINT "PK_KTGEVISTATZASTUPCE" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KTGEVISTATZASTUPCE"  ENABLE;


PROMPT Completed KP_KTG_EVISTATUTARNIZASTUPCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_EXTERNIRATING.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_EXTERNIRATING.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_EXTERNIRATING
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_EXTERNIRATING" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_EXTERNIRATING" MODIFY ("NL_KOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_EXTERNIRATING" MODIFY ("S_NAZEV" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_EXTERNIRATING" MODIFY ("S_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_EXTERNIRATING" ADD CONSTRAINT "PK_KPKTGEXTRATING" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPKTGEXTRATING"  ENABLE;


PROMPT Completed KP_KTG_EXTERNIRATING.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_FINANCNIINVESTICE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_FINANCNIINVESTICE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_FINANCNIINVESTICE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_FINANCNIINVESTICE" MODIFY ("ID" CONSTRAINT "NN_KPKTGFININV_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_FINANCNIINVESTICE" MODIFY ("ID_KTGSPOLECNOST" CONSTRAINT "NN_KPKTGFININV_SPOLECNOST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_FINANCNIINVESTICE" MODIFY ("S_MENA" CONSTRAINT "NN_KPKTGFININV_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_FINANCNIINVESTICE" MODIFY ("DT_ZMENA" CONSTRAINT "NN_KPKTGFININV_ZMENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_FINANCNIINVESTICE" MODIFY ("S_UZIVATEL" CONSTRAINT "NN_KPKTGFININV_UZIVATEL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_FINANCNIINVESTICE" ADD CONSTRAINT "PK_KPKTGFININV" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPKTGFININV"  ENABLE;


PROMPT Completed KP_KTG_FINANCNIINVESTICE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_FININVESTICEEMISE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_FININVESTICEEMISE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_FININVESTICEEMISE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_FININVESTICEEMISE" MODIFY ("ID" CONSTRAINT "NN_KPFININVEMISE_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_FININVESTICEEMISE" MODIFY ("ID_KTGFINANCNIINVESTICE" CONSTRAINT "NN_KPFININVEMISE_IDFI" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_FININVESTICEEMISE" MODIFY ("ID_PARENT" CONSTRAINT "NN_KPKTGFININVEMISE_PARENT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_FININVESTICEEMISE" MODIFY ("DT_PLATNOSTOD" CONSTRAINT "NN_KPKTGFININVEMISE_PLATNOSTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_FININVESTICEEMISE" MODIFY ("DT_PLATNOSTDO" CONSTRAINT "NN_KPKTGFININVEMISE_PLATNOSTDO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_FININVESTICEEMISE" MODIFY ("NL_POCETKUSU" CONSTRAINT "NN_KPKTGFININVEMISE_KUSU" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_FININVESTICEEMISE" MODIFY ("NL_NOMINAL" CONSTRAINT "NN_KPKTGFININVEMISE_NOMINAL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_FININVESTICEEMISE" MODIFY ("ND_ZAKLADNIJMENI" CONSTRAINT "NN_KPKTGFININVEMISE_ZAKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_FININVESTICEEMISE" MODIFY ("DT_ZMENA" CONSTRAINT "NN_KPKTGFININVEMISE_ZMENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_FININVESTICEEMISE" MODIFY ("S_UZIVATEL" CONSTRAINT "NN_KPKTGFININVEMISE_UZIVATEL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_FININVESTICEEMISE" MODIFY ("C_INVESTICE" CONSTRAINT "NN_KPKTGFININVEMISE_INVESTICE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_FININVESTICEEMISE" ADD CONSTRAINT "PK_KPFININVEMISE" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPFININVEMISE"  ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_FININVESTICEEMISE" ADD CONSTRAINT "NN_KPKTGFININVEMISE_PLATNOST" CHECK ( dt_platnostOd <= dt_platnostDo ) ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_KTG_FININVESTICEEMISE" ADD CONSTRAINT "CN_KPKTGFININVEMISE_NENULOVY" CHECK ( c_nenulovy in ('0','1') ) ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_FININVESTICEEMISE" ADD CONSTRAINT "CN_KPKTGFININVEMISE_INVESTICE" CHECK ( c_investice in ('F','N') ) ENABLE;


PROMPT Completed KP_KTG_FININVESTICEEMISE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_IFRSPRAVIDLO.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_IFRSPRAVIDLO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_IFRSPRAVIDLO
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLO" MODIFY ("ID" CONSTRAINT "NN_KPIFRSPRAVIDLO_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLO" MODIFY ("ID_PARENT" CONSTRAINT "NN_KPIFRSPRAVIDLODETAIL_PAR" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLO" MODIFY ("ID_PORADI" CONSTRAINT "NN_KPIFRSPRAVIDLO_PORADI" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLO" MODIFY ("ID_CISIFRSTYPPRAVIDLO" CONSTRAINT "NN_KPIFRSPRAVIDLO_TYP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLO" MODIFY ("ID_KTGUCETNISPOLECNOST" CONSTRAINT "NN_KPIFRSPRAVIDLO_SPOLECNOST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLO" MODIFY ("DT_PLATNOSTOD" CONSTRAINT "NN_KPIFRSPRAVIDLO_PLATNOSTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLO" MODIFY ("DT_PLATNOSTDO" CONSTRAINT "NN_KPIFRSPRAVIDLO_PLATNOSTDO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLO" MODIFY ("DT_ZMENADEFINICEDETAIL" CONSTRAINT "NN_KPIFRSPRAVIDLO_DETAIL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLO" MODIFY ("DT_KONTROLA" CONSTRAINT "NN_KPIFRSPRAVIDLO_KONTROLA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLO" MODIFY ("DT_ZMENA" CONSTRAINT "NN_KPIFRSPRAVIDLO_ZMENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLO" MODIFY ("S_UZIVATEL" CONSTRAINT "NN_KPIFRSPRAVIDLO_UZIVATEL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLO" ADD CONSTRAINT "PK_KPIFRSPRAVIDLO" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPIFRSPRAVIDLO"  ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLO" ADD CONSTRAINT "CN_KPIFRSPRAVIDLO_VALIDNI" CHECK ( c_validni is not null and c_validni in ( '0', '1')) ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLO" ADD CONSTRAINT "NN_KPIFRSPRAVIDLO_PLATNOST" CHECK ( dt_platnostOd <= dt_platnostDo ) ENABLE NOVALIDATE;


PROMPT Completed KP_KTG_IFRSPRAVIDLO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_IFRSPRAVIDLODETAIL.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_IFRSPRAVIDLODETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_IFRSPRAVIDLODETAIL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLODETAIL" MODIFY ("ID" CONSTRAINT "NN_KPIFRSPRAVIDLODETAIL_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLODETAIL" MODIFY ("ID_PORADI" CONSTRAINT "NN_KPIFRSPRAVIDLODETAIL_PORADI" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLODETAIL" MODIFY ("ID_PORADIPODMINKA" CONSTRAINT "NN_KPIFRSPRAVDET_PORADIPOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLODETAIL" MODIFY ("ID_KTGIFRSPRAVIDLO" CONSTRAINT "NN_KPIFRSPRAVDETAIL_PRAVIDLO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLODETAIL" MODIFY ("ID_CISIFRSPRAVDETAILTYP" CONSTRAINT "NN_KPIFRSPRAVDETAIL_TYP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLODETAIL" MODIFY ("S_MENA" CONSTRAINT "NN_KPIFRSPRAVDETAIL_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLODETAIL" MODIFY ("DT_ZMENA" CONSTRAINT "NN_KPIFRSPRAVDETAIL_ZMENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLODETAIL" MODIFY ("S_UZIVATEL" CONSTRAINT "NN_KPIFRSPRAVDETAIL_UZIVATEL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLODETAIL" ADD CONSTRAINT "PK_KPIFRSPRAVIDLODETAIL" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPIFRSPRAVIDLODETAIL"  ENABLE;


PROMPT Completed KP_KTG_IFRSPRAVIDLODETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_MAJETKOVEUCASTIVYJIMKY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_MAJETKOVEUCASTIVYJIMKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_MAJETKOVEUCASTIVYJIMKY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_MAJETKOVEUCASTIVYJIMKY" MODIFY ("ID_KTGUCETNISPOLECNOST" CONSTRAINT "NN_MAJETKOVEUCASTIVYJIMKY" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_MAJETKOVEUCASTIVYJIMKY" ADD CONSTRAINT "PK_MAJETKOVEUCASTIVYJIMKY" PRIMARY KEY ("ID_KTGUCETNISPOLECNOST")
  USING INDEX "DB_JT"."PK_MAJETKOVEUCASTIVYJIMKY"  ENABLE;


PROMPT Completed KP_KTG_MAJETKOVEUCASTIVYJIMKY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_OBDOBI.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_OBDOBI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_OBDOBI
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_OBDOBI" MODIFY ("ID" CONSTRAINT "NN_KPOBDOBI_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_OBDOBI" ADD CONSTRAINT "PK_KPOOBDOBI" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPOOBDOBI"  ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_OBDOBI" ADD CONSTRAINT "CN_KPOOBDOBI_DATUM" CHECK ( dt_datumOd is not null and ( dt_datumOd <= dt_datumDo or dt_datumDo is null ) ) ENABLE NOVALIDATE;


PROMPT Completed KP_KTG_OBDOBI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_ODBOR.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_ODBOR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_ODBOR
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_ODBOR" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_ODBOR" ADD CONSTRAINT "PK_KTGODBOR" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KTGODBOR"  ENABLE;


PROMPT Completed KP_KTG_ODBOR.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_ODBOR_BCK_SEG.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_ODBOR_BCK_SEG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_ODBOR_BCK_SEG
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_ODBOR_BCK_SEG" MODIFY ("ID" NOT NULL ENABLE);


PROMPT Completed KP_KTG_ODBOR_BCK_SEG.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_PBKLIENT.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_PBKLIENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_PBKLIENT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_PBKLIENT" MODIFY ("ID" CONSTRAINT "NN_KTGPBKIENT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_PBKLIENT" MODIFY ("C_AKTIVNI" CONSTRAINT "NN_KTGPBKIENT_AKTIVNI" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_PBKLIENT" MODIFY ("S_ICO" CONSTRAINT "NN_KTGPBKIENT_ICO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_PBKLIENT" ADD CONSTRAINT "PK_KTGPBKIENT" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KTGPBKIENT"  ENABLE;


PROMPT Completed KP_KTG_PBKLIENT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_PBSKUPINA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_PBSKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_PBSKUPINA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_PBSKUPINA" MODIFY ("ID" CONSTRAINT "NN_CISPBSKUPINA_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_PBSKUPINA" MODIFY ("S_POPIS" CONSTRAINT "NN_CISPBSKUPINA_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_PBSKUPINA" ADD CONSTRAINT "PK_CISPBSKUPINA" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_CISPBSKUPINA"  ENABLE;


PROMPT Completed KP_KTG_PBSKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_PROJEKT.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_PROJEKT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_PROJEKT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_PROJEKT" MODIFY ("ID" CONSTRAINT "NN_KPKTGPROJEKT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_PROJEKT" MODIFY ("S_NAZEV" CONSTRAINT "NN_KPKTGPROJEKT_NAZEV" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_PROJEKT" MODIFY ("DT_PLATNOSTOD" CONSTRAINT "NN_KPKTGPROJEKT_PLATNOSTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_PROJEKT" MODIFY ("DT_PLATNOSTDO" CONSTRAINT "NN_KPKTGPROJEKT_PLATNOSTDO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_PROJEKT" ADD CONSTRAINT "PK_KPPROJEKT" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPPROJEKT"  ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_PROJEKT" ADD CONSTRAINT "CH_KPKTGPROJEKT_PMS" CHECK (c_pouzitMngSegment in ('0','1')) ENABLE;


PROMPT Completed KP_KTG_PROJEKT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_PROJEKTMEMORANDUM.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_PROJEKTMEMORANDUM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_PROJEKTMEMORANDUM
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_PROJEKTMEMORANDUM" MODIFY ("ID_KTGPROJEKT" CONSTRAINT "NN_KTGPROJEKTMEM_IDPROJEKT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_PROJEKTMEMORANDUM" ADD CONSTRAINT "PK_KTGPROJEKTMEM" PRIMARY KEY ("ID_KTGPROJEKT")
  USING INDEX "DB_JT"."PK_KTGPROJEKTMEM"  ENABLE;


PROMPT Completed KP_KTG_PROJEKTMEMORANDUM.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_PROJEKTNAVRH.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_PROJEKTNAVRH.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_PROJEKTNAVRH
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_PROJEKTNAVRH" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_PROJEKTNAVRH" MODIFY ("S_NAZEV" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_PROJEKTNAVRH" ADD CONSTRAINT "PK_KTGPROJEKTNAVRH" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KTGPROJEKTNAVRH"  ENABLE;


PROMPT Completed KP_KTG_PROJEKTNAVRH.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_PROJEKT_BCK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_PROJEKT_BCK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_PROJEKT_BCK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_PROJEKT_BCK" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_PROJEKT_BCK" MODIFY ("S_NAZEV" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_PROJEKT_BCK" MODIFY ("DT_PLATNOSTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_PROJEKT_BCK" MODIFY ("DT_PLATNOSTDO" NOT NULL ENABLE);


PROMPT Completed KP_KTG_PROJEKT_BCK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_PROJEKT_BCK_09252013.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_PROJEKT_BCK_09252013.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_PROJEKT_BCK_09252013
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_PROJEKT_BCK_09252013" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_PROJEKT_BCK_09252013" MODIFY ("S_NAZEV" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_PROJEKT_BCK_09252013" MODIFY ("DT_PLATNOSTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_PROJEKT_BCK_09252013" MODIFY ("DT_PLATNOSTDO" NOT NULL ENABLE);


PROMPT Completed KP_KTG_PROJEKT_BCK_09252013.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SPOLECNOST.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_SPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_SPOLECNOST
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST" MODIFY ("ID" CONSTRAINT "NN_KPKTGSPOLECNOST_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST" MODIFY ("S_ICO" CONSTRAINT "NN_KTGSPOLECNOST_ICO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST" MODIFY ("S_NAZEV" CONSTRAINT "NN_KTGSPOLECNOST_NAZEV" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST" ADD CONSTRAINT "CN_KTGSPOLECNOST_RIZENY" CHECK ( c_spolecneRizeny  is not null and c_spolecneRizeny in ('0','1') ) ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST" ADD CONSTRAINT "CN_KTGSPOLECNOST_LIKVIDACE" CHECK ( c_likvidace  is not null and c_likvidace in ('0','1') ) ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST" ADD CONSTRAINT "CN_KTGSPOLECNOST_LICENCE" CHECK ( c_licence  is not null and c_licence in ('0','1') ) ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST" ADD CONSTRAINT "UN_KTGSPOLECNOST_ICO" UNIQUE ("S_ICO")
  USING INDEX "DB_JT"."UN_KTGSPOLECNOST_ICO"  ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST" ADD CONSTRAINT "PK_KPKTGSPOLECNOST" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPKTGSPOLECNOST"  ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST" ADD CONSTRAINT "CH_KTGSPOLECNOST_VPRECHODU" CHECK (c_vPrechodu in ('0','1')) ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST" ADD CONSTRAINT "CH_KTGSPOLECNOST_SKUPIC" CHECK (c_skupinaIc in ('0','1')) ENABLE;


PROMPT Completed KP_KTG_SPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SPOLECNOSTSPRAVCEKO.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_SPOLECNOSTSPRAVCEKO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_SPOLECNOSTSPRAVCEKO
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOSTSPRAVCEKO" MODIFY ("S_NUMBER0" CONSTRAINT "NN_SPOLSPRAVCEKO_NUMBER0" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOSTSPRAVCEKO" MODIFY ("ID_SPOLECNOST" CONSTRAINT "NN_SPOLSPRAVCEKO_IDSPOLECNOST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOSTSPRAVCEKO" MODIFY ("ID_DATABAZE" CONSTRAINT "NN_SPOLSPRAVCEKO_DATABAZE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOSTSPRAVCEKO" ADD CONSTRAINT "PK_SPOLSPRAVCEKO" PRIMARY KEY ("ID_DATABAZE", "ID_SPOLECNOST", "S_NUMBER0", "S_SPRAVCE")
  USING INDEX "DB_JT"."PK_SPOLSPRAVCEKO"  ENABLE;


PROMPT Completed KP_KTG_SPOLECNOSTSPRAVCEKO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SPOLECNOSTVPRECHODU.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_SPOLECNOSTVPRECHODU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_SPOLECNOSTVPRECHODU
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOSTVPRECHODU" MODIFY ("ID_KTGSPOLECNOST" CONSTRAINT "NN_KTGSPOLVPRECHODU_SPOL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOSTVPRECHODU" MODIFY ("S_ICO" CONSTRAINT "NN_KTGSPOLVPRECHODU_ICO" NOT NULL ENABLE);


PROMPT Completed KP_KTG_SPOLECNOSTVPRECHODU.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SPOLECNOST_BCK_AX.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_SPOLECNOST_BCK_AX.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_SPOLECNOST_BCK_AX
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST_BCK_AX" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST_BCK_AX" MODIFY ("S_ICO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST_BCK_AX" MODIFY ("S_NAZEV" NOT NULL ENABLE);


PROMPT Completed KP_KTG_SPOLECNOST_BCK_AX.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SPOLECNOST_GROUP.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_SPOLECNOST_GROUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_SPOLECNOST_GROUP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST_GROUP" MODIFY ("ID_SPOLECNOST" CONSTRAINT "NN_KPSPOLGROUP_SPOL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST_GROUP" MODIFY ("DT_PLATNOSTOD" CONSTRAINT "NN_KPSPOLGROUP_DATUMOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST_GROUP" MODIFY ("DT_PLATNOSTDO" CONSTRAINT "NN_KPSPOLGROUP_DATUMDO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST_GROUP" ADD CONSTRAINT "CH_KPSPOLGROUP_DATUMODDO" CHECK (dt_platnostOd <= dt_platnostDo) ENABLE;


PROMPT Completed KP_KTG_SPOLECNOST_GROUP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SPOLECNOST_GROUP12_2016.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_SPOLECNOST_GROUP12_2016.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_SPOLECNOST_GROUP12_2016
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST_GROUP12_2016" MODIFY ("ID_SPOLECNOST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST_GROUP12_2016" MODIFY ("DT_PLATNOSTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST_GROUP12_2016" MODIFY ("DT_PLATNOSTDO" NOT NULL ENABLE);


PROMPT Completed KP_KTG_SPOLECNOST_GROUP12_2016.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SPOLECNOST_GROUP200327U.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_SPOLECNOST_GROUP200327U.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_SPOLECNOST_GROUP200327U
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST_GROUP200327U" MODIFY ("ID_SPOLECNOST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST_GROUP200327U" MODIFY ("DT_PLATNOSTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST_GROUP200327U" MODIFY ("DT_PLATNOSTDO" NOT NULL ENABLE);


PROMPT Completed KP_KTG_SPOLECNOST_GROUP200327U.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SPOLECNOST_GROUP_QCZ.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_SPOLECNOST_GROUP_QCZ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_SPOLECNOST_GROUP_QCZ
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST_GROUP_QCZ" MODIFY ("ID_SPOLECNOST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST_GROUP_QCZ" MODIFY ("DT_PLATNOSTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST_GROUP_QCZ" MODIFY ("DT_PLATNOSTDO" NOT NULL ENABLE);


PROMPT Completed KP_KTG_SPOLECNOST_GROUP_QCZ.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SPOLECNOST_GROUP_QDL.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_SPOLECNOST_GROUP_QDL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_SPOLECNOST_GROUP_QDL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST_GROUP_QDL" MODIFY ("ID_SPOLECNOST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST_GROUP_QDL" MODIFY ("DT_PLATNOSTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST_GROUP_QDL" MODIFY ("DT_PLATNOSTDO" NOT NULL ENABLE);


PROMPT Completed KP_KTG_SPOLECNOST_GROUP_QDL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SPOLECNOST_GRP_11_2018.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_SPOLECNOST_GRP_11_2018.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_SPOLECNOST_GRP_11_2018
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST_GRP_11_2018" MODIFY ("ID_SPOLECNOST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST_GRP_11_2018" MODIFY ("DT_PLATNOSTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST_GRP_11_2018" MODIFY ("DT_PLATNOSTDO" NOT NULL ENABLE);


PROMPT Completed KP_KTG_SPOLECNOST_GRP_11_2018.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SPOLECNOST_OKEC.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_SPOLECNOST_OKEC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_SPOLECNOST_OKEC
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST_OKEC" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST_OKEC" MODIFY ("S_ICO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST_OKEC" MODIFY ("S_NAZEV" NOT NULL ENABLE);


PROMPT Completed KP_KTG_SPOLECNOST_OKEC.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SPOL_GRP_20_05_18.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_SPOL_GRP_20_05_18.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_SPOL_GRP_20_05_18
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_SPOL_GRP_20_05_18" MODIFY ("ID_SPOLECNOST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SPOL_GRP_20_05_18" MODIFY ("DT_PLATNOSTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SPOL_GRP_20_05_18" MODIFY ("DT_PLATNOSTDO" NOT NULL ENABLE);


PROMPT Completed KP_KTG_SPOL_GRP_20_05_18.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/CONSTRAINTS/KP_KTG_SUBKONSOLIDACE.sql: 'utf-8' codec can't decode byte 0xc8 in position 933: invalid continuation byte


-- ============================================================================
-- Deploy: KP_KTG_SUBKONSOLIDACEETAPA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_SUBKONSOLIDACEETAPA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_SUBKONSOLIDACEETAPA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACEETAPA" MODIFY ("ID" CONSTRAINT "NN_KPSUBKONSOLIDACEETAPA_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACEETAPA" MODIFY ("ID_KTGSUBKONSOLIDACE" CONSTRAINT "NN_KPSUBKONSETAPA_SPOL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACEETAPA" MODIFY ("NL_PORADI" CONSTRAINT "NN_KPSUBKONSETAPA_PORADI" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACEETAPA" MODIFY ("S_ZKRATKA" CONSTRAINT "NN_KPSUBKONSETAPA_ZKRATKA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACEETAPA" ADD CONSTRAINT "PK_KPSUBKONSOLIDACEETAPA" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPSUBKONSOLIDACEETAPA"  ENABLE;


PROMPT Completed KP_KTG_SUBKONSOLIDACEETAPA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SUBKONSOLIDACEPRAVIDLO.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_SUBKONSOLIDACEPRAVIDLO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_SUBKONSOLIDACEPRAVIDLO
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACEPRAVIDLO" MODIFY ("ID" CONSTRAINT "NN_KPSUBKONPRAVIDLO_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACEPRAVIDLO" MODIFY ("ID_PORADI" CONSTRAINT "NN_KPSUBKONPRAVIDLO_PORADI" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACEPRAVIDLO" MODIFY ("ID_CISIFRSTYPPRAVIDLO" CONSTRAINT "NN_KPSUBKONPRAVIDLO_TYP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACEPRAVIDLO" MODIFY ("ID_KTGSUBKONSOLIDACE" CONSTRAINT "NN_KPSUBKONPRAVIDLO_SUB" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACEPRAVIDLO" MODIFY ("ID_KTGUCETNISPOLECNOST" CONSTRAINT "NN_KPSUBKONPRAVIDLO_SPOLECNOST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACEPRAVIDLO" MODIFY ("ID_KTGSUBKONSOLIDACEETAPA" CONSTRAINT "NN_KPSUBKONPRAVIDLO_ETAPA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACEPRAVIDLO" MODIFY ("DT_PLATNOSTOD" CONSTRAINT "NN_KPSUBKONPRAVIDLO_PLATNOSTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACEPRAVIDLO" MODIFY ("DT_PLATNOSTDO" CONSTRAINT "NN_KPSUBKONPRAVIDLO_PLATNOSTDO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACEPRAVIDLO" MODIFY ("DT_ZMENADEFINICEDETAIL" CONSTRAINT "NN_KPSUBKONPRAVIDLO_DETAIL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACEPRAVIDLO" MODIFY ("DT_KONTROLA" CONSTRAINT "NN_KPSUBKONPRAVIDLO_KONTROLA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACEPRAVIDLO" MODIFY ("DT_ZMENA" CONSTRAINT "NN_KPSUBKONPRAVIDLO_ZMENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACEPRAVIDLO" MODIFY ("S_UZIVATEL" CONSTRAINT "NN_KPSUBKONPRAVIDLO_UZIVATEL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACEPRAVIDLO" ADD CONSTRAINT "PK_KPSUBKONPRAVIDLO" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPSUBKONPRAVIDLO"  ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACEPRAVIDLO" ADD CONSTRAINT "CN_KPSUBKONPRAVIDLO_LIST" CHECK ( nl_validaceList is not null and nl_validaceList in ( -1, 1, 2, 5 )) ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACEPRAVIDLO" ADD CONSTRAINT "NN_KPSUBKONPRAVIDLO_PLATNOST" CHECK ( dt_platnostOd <= dt_platnostDo ) ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACEPRAVIDLO" ADD CONSTRAINT "CN_KPSUBKONPRAVIDLO_VALIDNI" CHECK ( c_validni is not null and c_validni in ( '0', '1')) ENABLE;


PROMPT Completed KP_KTG_SUBKONSOLIDACEPRAVIDLO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SUBKONSOLPRAVIDLODETAIL.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_SUBKONSOLPRAVIDLODETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_SUBKONSOLPRAVIDLODETAIL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLPRAVIDLODETAIL" MODIFY ("ID" CONSTRAINT "NN_KPSUBKONPRAVDETAIL_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLPRAVIDLODETAIL" MODIFY ("ID_KTGSUBKONSOLIDACEPRAVIDLO" CONSTRAINT "NN_KPSUBKONPRAVDETAIL_PRAVIDLO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLPRAVIDLODETAIL" MODIFY ("ID_PORADI" CONSTRAINT "NN_KPSUBKONPRAVDETAIL_PORADI" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLPRAVIDLODETAIL" MODIFY ("ID_PORADIPODMINKA" CONSTRAINT "NN_KPSKONPRAVDETAIL_PORADIPOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLPRAVIDLODETAIL" MODIFY ("ID_CISIFRSPRAVDETAILTYP" CONSTRAINT "NN_KPSUBKONPRAVDETAIL_TYP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLPRAVIDLODETAIL" MODIFY ("NL_RADEK" CONSTRAINT "NN_KPSUBKONPRAVDETAIL_RADEK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLPRAVIDLODETAIL" MODIFY ("S_UZIVATEL" CONSTRAINT "NN_KPSUBKONPRAVDETAIL_UZIVATEL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLPRAVIDLODETAIL" ADD CONSTRAINT "PK_KPSUBKONPRAVDETAIL" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPSUBKONPRAVDETAIL"  ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLPRAVIDLODETAIL" ADD CONSTRAINT "CN_KPSUBKONPRAVDETAIL_VZOREC" CHECK (
			( nd_castka is null and s_vzorec is not null ) or
			( nd_castka is not null and s_vzorec is null )
		) ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLPRAVIDLODETAIL" ADD CONSTRAINT "CN_KPSUBKONPRAVDETAIL_LIST" CHECK ( nl_poradiList is not null and nl_poradiList in ( -1, 1, 2, 5 )) ENABLE;


PROMPT Completed KP_KTG_SUBKONSOLPRAVIDLODETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_TYPNASTROJE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_TYPNASTROJE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_TYPNASTROJE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_TYPNASTROJE" MODIFY ("ID" CONSTRAINT "NN_KPKTGTYPNASTROJE_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_TYPNASTROJE" MODIFY ("S_POPIS" CONSTRAINT "NN_KPKTGTYPNASTROJE_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_TYPNASTROJE" MODIFY ("DT_PLATNOSTOD" CONSTRAINT "NN_KPKTGTYPNASTROJE_OD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_TYPNASTROJE" MODIFY ("DT_PLATNOSTDO" CONSTRAINT "NN_KPKTGTYPNASTROJE_DO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_TYPNASTROJE" MODIFY ("S_KOD" CONSTRAINT "NN_KPKTGTYPNASTROJE_SKOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_TYPNASTROJE" MODIFY ("NL_KOD" CONSTRAINT "NN_KPKTGTYPNASTROJE_CKOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_TYPNASTROJE" ADD CONSTRAINT "CN_KTGTYPNASTROJE_URCIKODOPER" CHECK ( c_urcitKodOperace is not null and c_urcitKodOperace in ( '0', '1' ) ) ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_TYPNASTROJE" ADD CONSTRAINT "PK_KPKTGTYPNASTROJE" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPKTGTYPNASTROJE"  ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_TYPNASTROJE" ADD CONSTRAINT "CN_KPKTGTYPNASTROJE_PLATNOST" CHECK ( dt_platnostOd <= dt_platnostDo ) ENABLE;


PROMPT Completed KP_KTG_TYPNASTROJE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_TYPOPERACE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_TYPOPERACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_TYPOPERACE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_TYPOPERACE" MODIFY ("ID" CONSTRAINT "NN_KPKTGTYPOPERACE_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_TYPOPERACE" MODIFY ("ID_TYPNASTROJE" CONSTRAINT "NN_KPKTGTYPOPERACE_IDTYPNASTR" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_TYPOPERACE" MODIFY ("S_POPIS" CONSTRAINT "NN_KPKTGTYPOPERACE_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_TYPOPERACE" MODIFY ("DT_PLATNOSTOD" CONSTRAINT "NN_KPKTGTYPOPERACE_OD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_TYPOPERACE" MODIFY ("DT_PLATNOSTDO" CONSTRAINT "NN_KPKTGTYPOPERACE_DO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_TYPOPERACE" MODIFY ("S_KOD" CONSTRAINT "NN_KPKTGTYPOPER_SKOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_TYPOPERACE" MODIFY ("NL_KOD" CONSTRAINT "NN_KPKTGTYPOPER_CKOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_TYPOPERACE" ADD CONSTRAINT "NN_KPKTGTYPOPERACE_IMPLOST" CHECK ( c_implicitniOstatni in ('0','1') and c_implicitniOstatni is not null ) ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_TYPOPERACE" ADD CONSTRAINT "NN_KPKTGTYPOPERACE_IMPLBAN" CHECK ( c_implicitniBanka in ('0','1') and c_implicitniBanka is not null ) ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_TYPOPERACE" ADD CONSTRAINT "PK_KPKTGTYPOPERACE" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPKTGTYPOPERACE"  ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_TYPOPERACE" ADD CONSTRAINT "CN_KPKTGTYPOPERACE_PLATNOST" CHECK ( dt_platnostOd <= dt_platnostDo ) ENABLE;


PROMPT Completed KP_KTG_TYPOPERACE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_TYPSUBETAPA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_TYPSUBETAPA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_TYPSUBETAPA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_TYPSUBETAPA" MODIFY ("ID" CONSTRAINT "NN_TYPSUBETAPA_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_TYPSUBETAPA" MODIFY ("ID_CISTYPETAPA" CONSTRAINT "NN_TYPSUBETAPA_TYP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_TYPSUBETAPA" MODIFY ("NL_PORADI" CONSTRAINT "NN_TYPSUBETAPA_PORADI" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_TYPSUBETAPA" MODIFY ("S_ZKRATKA" CONSTRAINT "NN_TYPSUBETAPA_ZKRATKA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_TYPSUBETAPA" ADD CONSTRAINT "PK_TYPSUBETAPA" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_TYPSUBETAPA"  ENABLE;


PROMPT Completed KP_KTG_TYPSUBETAPA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_TYPSUBPRAVIDLO.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_TYPSUBPRAVIDLO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_TYPSUBPRAVIDLO
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_TYPSUBPRAVIDLO" MODIFY ("ID" CONSTRAINT "NN_TYPSUBPRAVIDLO_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_TYPSUBPRAVIDLO" MODIFY ("ID_PORADI" CONSTRAINT "NN_TYPSUBPRAVIDLO_PORADI" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_TYPSUBPRAVIDLO" MODIFY ("ID_CISIFRSTYPPRAVIDLO" CONSTRAINT "NN_TYPSUBPRAVIDLO_TYP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_TYPSUBPRAVIDLO" MODIFY ("ID_KTGTYPSUBETAPA" CONSTRAINT "NN_TYPSUBPRAVIDLO_ETAPA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_TYPSUBPRAVIDLO" MODIFY ("ID_DATUMTYP" CONSTRAINT "NN_TYPSUBPRAVIDLO_DTTYP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_TYPSUBPRAVIDLO" ADD CONSTRAINT "PK_TYPSUBPRAVIDLO" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_TYPSUBPRAVIDLO"  ENABLE;


PROMPT Completed KP_KTG_TYPSUBPRAVIDLO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_TYPSUBPRAVIDLODETAIL.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_TYPSUBPRAVIDLODETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_TYPSUBPRAVIDLODETAIL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_TYPSUBPRAVIDLODETAIL" MODIFY ("ID" CONSTRAINT "NN_TYPSUBPRAVDETAIL_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_TYPSUBPRAVIDLODETAIL" MODIFY ("ID_KTGTYPSUBPRAVIDLO" CONSTRAINT "NN_TYPSUBPRAVDETAIL_PRAVIDLO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_TYPSUBPRAVIDLODETAIL" MODIFY ("ID_PORADI" CONSTRAINT "NN_TYPSUBPRAVDETAIL_PORADI" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_TYPSUBPRAVIDLODETAIL" MODIFY ("ID_PORADIPODMINKA" CONSTRAINT "NN_TYPSUBPRAVDETAIL_PORADIPOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_TYPSUBPRAVIDLODETAIL" MODIFY ("ID_CISIFRSPRAVDETAILTYP" CONSTRAINT "NN_TYPSUBPRAVDETAIL_TYP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_TYPSUBPRAVIDLODETAIL" MODIFY ("NL_RADEK" CONSTRAINT "NN_TYPSUBPRAVDETAIL_RADEK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_TYPSUBPRAVIDLODETAIL" ADD CONSTRAINT "PK_TYPSUBPRAVDETAIL" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_TYPSUBPRAVDETAIL"  ENABLE;


PROMPT Completed KP_KTG_TYPSUBPRAVIDLODETAIL.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/CONSTRAINTS/KP_KTG_UCETNISKUPINA.sql: 'utf-8' codec can't decode byte 0xc8 in position 883: invalid continuation byte


-- ============================================================================
-- Deploy: KP_KTG_UCETNISPOLECNOST.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_UCETNISPOLECNOST
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" MODIFY ("ID" CONSTRAINT "NN_KPUCSPOLECNOST_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" MODIFY ("ID_CISSUBJECT" CONSTRAINT "NN_KPUCSPOLECNOST_SUBJECT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" MODIFY ("S_ICO" CONSTRAINT "NN_KPUCSPOLECNOST_ICO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" MODIFY ("S_SOUBORPREDPONA" CONSTRAINT "NN_KPUCSPOLECNOST_SOUBOR" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" MODIFY ("S_MENA" CONSTRAINT "NN_KPUCSPOLECNOST_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" MODIFY ("S_DBLINK" CONSTRAINT "NN_KPUCSPOLECNOST_DBLINK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" MODIFY ("ID_KATEGORIE" CONSTRAINT "NN_KPUCSPOLECNOST_KATEG" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" MODIFY ("S_LOCALE" CONSTRAINT "NN_KPKTGUCTSPOLLOCALE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" MODIFY ("DT_UCETNIOBDOBISTART" CONSTRAINT "NN_KPUCSPOLECNOST_UCOBDSTART" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" MODIFY ("DT_UCETNIOBDOBIKONEC" CONSTRAINT "NN_KPUCSPOLECNOST_UCOBDKONEC" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" MODIFY ("ID_CISDATABAZE" CONSTRAINT "NN_KPUCSPOLECNOST_DB" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" MODIFY ("C_FEIS_UCETTYP" CONSTRAINT "NN_KPKTGUCSPOL_FEISTYP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" ADD CONSTRAINT "CN_KPUCSPOLECNOST_AUTGENER" CHECK ( c_automatickeGenerovani is not null and c_automatickeGenerovani in ( '0', '1', 'm' ) ) ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" ADD CONSTRAINT "CN_KPUCSPOLECNOST_NOCNI" CHECK ( c_nocniZpracovani is not null and c_nocniZpracovani in ( '0', '1' ) ) ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" ADD CONSTRAINT "UN_KPUCSPOLECNOST_QUESTID" UNIQUE ("QUEST_ID")
  USING INDEX "DB_JT"."UN_KPUCSPOLECNOST_QUESTID"  ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" ADD CONSTRAINT "UN_KPUCSPOLECNOST_TOPASID" UNIQUE ("TOPAS_ID")
  USING INDEX "DB_JT"."UN_KPUCSPOLECNOST_TOPASID"  ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" ADD CONSTRAINT "UN_KPUCSPOLECNOST_SPINID" UNIQUE ("SPIN_ID")
  USING INDEX "DB_JT"."UN_KPUCSPOLECNOST_SPINID"  ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" ADD CONSTRAINT "UN_KPUCSPOLECNOST_ICO" UNIQUE ("S_ICO")
  USING INDEX "DB_JT"."UN_KPUCSPOLECNOST_ICO"  ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" ADD CONSTRAINT "PK_KPUCSPOLECNOST" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPUCSPOLECNOST"  ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" ADD CONSTRAINT "CN_KPUCSPOLECNOST_RKC" CHECK ( c_rkc is not null and c_rkc in ( '0', '1' ) ) ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" ADD CONSTRAINT "CN_KPUCSPOLECNOST_ROZVAHA" CHECK ( c_pocitatRozvahu is not null and c_pocitatRozvahu in ( '0', '1' ) ) ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" ADD CONSTRAINT "CN_KPKTGUCETSPOL_TESTMU" CHECK ( c_testovatMajUcast is not null and  c_testovatMajUcast in ( '0', '1' )) ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" ADD CONSTRAINT "CN_KPKTGUCETSPOL_UCIFRS" CHECK ( c_ucetnictvi_v_IFRS is not null and  c_ucetnictvi_v_IFRS in ( '0', '1' )) ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" ADD CONSTRAINT "CN_KPKTGUCETSPOL_POCITEJMU" CHECK ( c_pocitejMUPozici is not null and  c_pocitejMUPozici in ( '0', '1' )) ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" ADD CONSTRAINT "CN_KPUCSPOLECNOST_EXTSYSTEM" CHECK (c_extSystem is not null and c_extSystem in ( 'Q', 'S', 'T', 'M', 'K', 'I', 'A' )) ENABLE;


PROMPT Completed KP_KTG_UCETNISPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISPOLECNOST_200305.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISPOLECNOST_200305.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_UCETNISPOLECNOST_200305
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_200305" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_200305" MODIFY ("ID_CISSUBJECT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_200305" MODIFY ("S_ICO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_200305" MODIFY ("S_SOUBORPREDPONA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_200305" MODIFY ("S_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_200305" MODIFY ("S_DBLINK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_200305" MODIFY ("ID_KATEGORIE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_200305" MODIFY ("S_LOCALE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_200305" MODIFY ("DT_UCETNIOBDOBISTART" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_200305" MODIFY ("DT_UCETNIOBDOBIKONEC" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_200305" MODIFY ("ID_CISDATABAZE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_200305" MODIFY ("C_FEIS_UCETTYP" NOT NULL ENABLE);


PROMPT Completed KP_KTG_UCETNISPOLECNOST_200305.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISPOLECNOST_2014.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISPOLECNOST_2014.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_UCETNISPOLECNOST_2014
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_2014" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_2014" MODIFY ("ID_CISSUBJECT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_2014" MODIFY ("S_ICO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_2014" MODIFY ("S_SOUBORPREDPONA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_2014" MODIFY ("S_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_2014" MODIFY ("S_DBLINK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_2014" MODIFY ("ID_KATEGORIE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_2014" MODIFY ("S_LOCALE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_2014" MODIFY ("DT_UCETNIOBDOBISTART" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_2014" MODIFY ("DT_UCETNIOBDOBIKONEC" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_2014" MODIFY ("ID_CISDATABAZE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_2014" MODIFY ("C_FEIS_UCETTYP" NOT NULL ENABLE);


PROMPT Completed KP_KTG_UCETNISPOLECNOST_2014.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISPOLECNOST_BCK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISPOLECNOST_BCK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_UCETNISPOLECNOST_BCK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_BCK" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_BCK" MODIFY ("ID_CISSUBJECT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_BCK" MODIFY ("S_ICO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_BCK" MODIFY ("S_SOUBORPREDPONA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_BCK" MODIFY ("S_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_BCK" MODIFY ("S_DBLINK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_BCK" MODIFY ("ID_KATEGORIE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_BCK" MODIFY ("S_LOCALE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_BCK" MODIFY ("DT_UCETNIOBDOBISTART" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_BCK" MODIFY ("DT_UCETNIOBDOBIKONEC" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_BCK" MODIFY ("ID_CISDATABAZE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_BCK" MODIFY ("C_FEIS_UCETTYP" NOT NULL ENABLE);


PROMPT Completed KP_KTG_UCETNISPOLECNOST_BCK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISPOLECNOST_EPH_07.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISPOLECNOST_EPH_07.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_UCETNISPOLECNOST_EPH_07
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_EPH_07" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_EPH_07" MODIFY ("ID_CISSUBJECT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_EPH_07" MODIFY ("S_ICO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_EPH_07" MODIFY ("S_SOUBORPREDPONA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_EPH_07" MODIFY ("S_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_EPH_07" MODIFY ("S_DBLINK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_EPH_07" MODIFY ("ID_KATEGORIE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_EPH_07" MODIFY ("S_LOCALE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_EPH_07" MODIFY ("DT_UCETNIOBDOBISTART" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_EPH_07" MODIFY ("DT_UCETNIOBDOBIKONEC" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_EPH_07" MODIFY ("ID_CISDATABAZE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_EPH_07" MODIFY ("C_FEIS_UCETTYP" NOT NULL ENABLE);


PROMPT Completed KP_KTG_UCETNISPOLECNOST_EPH_07.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISPOLECNOST_GAS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISPOLECNOST_GAS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_UCETNISPOLECNOST_GAS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_GAS" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_GAS" MODIFY ("ID_CISSUBJECT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_GAS" MODIFY ("S_ICO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_GAS" MODIFY ("S_SOUBORPREDPONA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_GAS" MODIFY ("S_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_GAS" MODIFY ("S_DBLINK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_GAS" MODIFY ("ID_KATEGORIE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_GAS" MODIFY ("S_LOCALE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_GAS" MODIFY ("DT_UCETNIOBDOBISTART" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_GAS" MODIFY ("DT_UCETNIOBDOBIKONEC" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_GAS" MODIFY ("ID_CISDATABAZE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_GAS" MODIFY ("C_FEIS_UCETTYP" NOT NULL ENABLE);


PROMPT Completed KP_KTG_UCETNISPOLECNOST_GAS.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISPOLECNOST_GAS2.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISPOLECNOST_GAS2.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_UCETNISPOLECNOST_GAS2
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_GAS2" MODIFY ("C_FEIS_UCETTYP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_GAS2" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_GAS2" MODIFY ("ID_CISSUBJECT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_GAS2" MODIFY ("S_ICO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_GAS2" MODIFY ("S_SOUBORPREDPONA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_GAS2" MODIFY ("S_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_GAS2" MODIFY ("S_DBLINK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_GAS2" MODIFY ("ID_KATEGORIE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_GAS2" MODIFY ("S_LOCALE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_GAS2" MODIFY ("DT_UCETNIOBDOBISTART" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_GAS2" MODIFY ("DT_UCETNIOBDOBIKONEC" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_GAS2" MODIFY ("ID_CISDATABAZE" NOT NULL ENABLE);


PROMPT Completed KP_KTG_UCETNISPOLECNOST_GAS2.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISPOLECNOST_LINK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISPOLECNOST_LINK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_UCETNISPOLECNOST_LINK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_LINK" MODIFY ("ID" CONSTRAINT "NN_KPUCSPOLL_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_LINK" MODIFY ("DT_PLATNOSTOD" CONSTRAINT "CN_KPUCSPOLL_OD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_LINK" MODIFY ("DT_PLATNOSTDO" CONSTRAINT "CN_KPUCSPOLL_DO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_LINK" MODIFY ("ID_CISDATABAZE" CONSTRAINT "NN_KPUCSPOLL_DB" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_LINK" MODIFY ("ID_CISSUBJECT" CONSTRAINT "NN_KPUCSPOLL_SUBJECT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_LINK" ADD CONSTRAINT "PK_KPUCSPOLL" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPUCSPOLL"  ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_LINK" ADD CONSTRAINT "CN_KPUCSPOLL_DATUM" CHECK ( dt_platnostOd <= dt_platnostDo ) ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_LINK" ADD CONSTRAINT "CN_KPUCSPOLL_EXTSYSTEM" CHECK (c_extSystem is not null and c_extSystem in ( 'Q', 'S', 'T', 'M', 'I' , 'A')) ENABLE;


PROMPT Completed KP_KTG_UCETNISPOLECNOST_LINK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISPOLECNOST_ZAMKY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISPOLECNOST_ZAMKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_UCETNISPOLECNOST_ZAMKY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_ZAMKY" MODIFY ("ID_KTGUCETNISPOLECNOST" CONSTRAINT "NN_KPKTGUCSPOLZAMKY_UCSPOL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_ZAMKY" MODIFY ("DT_PLATNOSTOD" CONSTRAINT "NN_KPKTGUCSPOLZAMKY_DTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_ZAMKY" MODIFY ("DT_PLATNOSTDO" CONSTRAINT "NN_KPKTGUCSPOLZAMKY_DTDO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_ZAMKY" ADD CONSTRAINT "PK_KPKTGUCSPOLZAMKY" PRIMARY KEY ("ID_KTGUCETNISPOLECNOST", "DT_PLATNOSTOD", "DT_PLATNOSTDO")
  USING INDEX "DB_JT"."PK_KPKTGUCSPOLZAMKY"  ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_ZAMKY" ADD CONSTRAINT "CH_KPKTGUCSPOLZAMKY_DATUM" CHECK (dt_platnostOd < dt_platnostDo) ENABLE;


PROMPT Completed KP_KTG_UCETNISPOLECNOST_ZAMKY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISPOLECNOST_ZATKO.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISPOLECNOST_ZATKO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_UCETNISPOLECNOST_ZATKO
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_ZATKO" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_ZATKO" MODIFY ("ID_CISSUBJECT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_ZATKO" MODIFY ("S_ICO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_ZATKO" MODIFY ("S_SOUBORPREDPONA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_ZATKO" MODIFY ("S_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_ZATKO" MODIFY ("S_DBLINK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_ZATKO" MODIFY ("ID_KATEGORIE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_ZATKO" MODIFY ("S_LOCALE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_ZATKO" MODIFY ("DT_UCETNIOBDOBISTART" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_ZATKO" MODIFY ("DT_UCETNIOBDOBIKONEC" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_ZATKO" MODIFY ("ID_CISDATABAZE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_ZATKO" MODIFY ("C_FEIS_UCETTYP" NOT NULL ENABLE);


PROMPT Completed KP_KTG_UCETNISPOLECNOST_ZATKO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISPOL_CART_MENY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISPOL_CART_MENY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_UCETNISPOL_CART_MENY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_CART_MENY" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_CART_MENY" MODIFY ("ID_CISSUBJECT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_CART_MENY" MODIFY ("S_ICO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_CART_MENY" MODIFY ("S_SOUBORPREDPONA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_CART_MENY" MODIFY ("S_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_CART_MENY" MODIFY ("S_DBLINK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_CART_MENY" MODIFY ("ID_KATEGORIE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_CART_MENY" MODIFY ("S_LOCALE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_CART_MENY" MODIFY ("DT_UCETNIOBDOBISTART" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_CART_MENY" MODIFY ("DT_UCETNIOBDOBIKONEC" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_CART_MENY" MODIFY ("ID_CISDATABAZE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_CART_MENY" MODIFY ("C_FEIS_UCETTYP" NOT NULL ENABLE);


PROMPT Completed KP_KTG_UCETNISPOL_CART_MENY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISPOL_EPH_02_2016.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISPOL_EPH_02_2016.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_UCETNISPOL_EPH_02_2016
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_EPH_02_2016" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_EPH_02_2016" MODIFY ("ID_CISSUBJECT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_EPH_02_2016" MODIFY ("S_ICO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_EPH_02_2016" MODIFY ("S_SOUBORPREDPONA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_EPH_02_2016" MODIFY ("S_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_EPH_02_2016" MODIFY ("S_DBLINK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_EPH_02_2016" MODIFY ("ID_KATEGORIE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_EPH_02_2016" MODIFY ("S_LOCALE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_EPH_02_2016" MODIFY ("DT_UCETNIOBDOBISTART" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_EPH_02_2016" MODIFY ("DT_UCETNIOBDOBIKONEC" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_EPH_02_2016" MODIFY ("ID_CISDATABAZE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_EPH_02_2016" MODIFY ("C_FEIS_UCETTYP" NOT NULL ENABLE);


PROMPT Completed KP_KTG_UCETNISPOL_EPH_02_2016.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISPOL_LNK_BCK_0312.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISPOL_LNK_BCK_0312.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_UCETNISPOL_LNK_BCK_0312
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_LNK_BCK_0312" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_LNK_BCK_0312" MODIFY ("DT_PLATNOSTOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_LNK_BCK_0312" MODIFY ("DT_PLATNOSTDO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_LNK_BCK_0312" MODIFY ("ID_CISDATABAZE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOL_LNK_BCK_0312" MODIFY ("ID_CISSUBJECT" NOT NULL ENABLE);


PROMPT Completed KP_KTG_UCETNISPOL_LNK_BCK_0312.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISP_AUTOGENERUJ.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISP_AUTOGENERUJ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_UCETNISP_AUTOGENERUJ
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_UCETNISP_AUTOGENERUJ" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISP_AUTOGENERUJ" MODIFY ("ID_CISSUBJECT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISP_AUTOGENERUJ" MODIFY ("S_ICO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISP_AUTOGENERUJ" MODIFY ("S_SOUBORPREDPONA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISP_AUTOGENERUJ" MODIFY ("S_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISP_AUTOGENERUJ" MODIFY ("S_DBLINK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISP_AUTOGENERUJ" MODIFY ("ID_KATEGORIE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISP_AUTOGENERUJ" MODIFY ("S_LOCALE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISP_AUTOGENERUJ" MODIFY ("DT_UCETNIOBDOBISTART" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISP_AUTOGENERUJ" MODIFY ("DT_UCETNIOBDOBIKONEC" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISP_AUTOGENERUJ" MODIFY ("ID_CISDATABAZE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISP_AUTOGENERUJ" MODIFY ("C_FEIS_UCETTYP" NOT NULL ENABLE);


PROMPT Completed KP_KTG_UCETNISP_AUTOGENERUJ.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCSPOLPREDAVANI.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_UCSPOLPREDAVANI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_UCSPOLPREDAVANI
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_UCSPOLPREDAVANI" MODIFY ("ID_KTGUCETNISPOLECNOST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCSPOLPREDAVANI" ADD CONSTRAINT "PK_KTGUCSPOLPREDAVANI" PRIMARY KEY ("ID_KTGUCETNISPOLECNOST")
  USING INDEX "DB_JT"."PK_KTGUCSPOLPREDAVANI"  ENABLE;


PROMPT Completed KP_KTG_UCSPOLPREDAVANI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCSPOL_AUTOGEN_07_09_15.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_UCSPOL_AUTOGEN_07_09_15.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_UCSPOL_AUTOGEN_07_09_15
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_UCSPOL_AUTOGEN_07_09_15" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCSPOL_AUTOGEN_07_09_15" MODIFY ("ID_CISSUBJECT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCSPOL_AUTOGEN_07_09_15" MODIFY ("S_ICO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCSPOL_AUTOGEN_07_09_15" MODIFY ("S_SOUBORPREDPONA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCSPOL_AUTOGEN_07_09_15" MODIFY ("S_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCSPOL_AUTOGEN_07_09_15" MODIFY ("S_DBLINK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCSPOL_AUTOGEN_07_09_15" MODIFY ("ID_KATEGORIE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCSPOL_AUTOGEN_07_09_15" MODIFY ("S_LOCALE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCSPOL_AUTOGEN_07_09_15" MODIFY ("DT_UCETNIOBDOBISTART" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCSPOL_AUTOGEN_07_09_15" MODIFY ("DT_UCETNIOBDOBIKONEC" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCSPOL_AUTOGEN_07_09_15" MODIFY ("ID_CISDATABAZE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_UCSPOL_AUTOGEN_07_09_15" MODIFY ("C_FEIS_UCETTYP" NOT NULL ENABLE);


PROMPT Completed KP_KTG_UCSPOL_AUTOGEN_07_09_15.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_USEK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_USEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_USEK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_USEK" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_USEK" ADD CONSTRAINT "PK_KTGUSEK" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KTGUSEK"  ENABLE;


PROMPT Completed KP_KTG_USEK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_US_BCK_RKC_2017.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_US_BCK_RKC_2017.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_US_BCK_RKC_2017
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_US_BCK_RKC_2017" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_US_BCK_RKC_2017" MODIFY ("ID_CISSUBJECT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_US_BCK_RKC_2017" MODIFY ("S_ICO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_US_BCK_RKC_2017" MODIFY ("S_SOUBORPREDPONA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_US_BCK_RKC_2017" MODIFY ("S_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_US_BCK_RKC_2017" MODIFY ("S_DBLINK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_US_BCK_RKC_2017" MODIFY ("ID_KATEGORIE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_US_BCK_RKC_2017" MODIFY ("S_LOCALE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_US_BCK_RKC_2017" MODIFY ("DT_UCETNIOBDOBISTART" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_US_BCK_RKC_2017" MODIFY ("DT_UCETNIOBDOBIKONEC" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_US_BCK_RKC_2017" MODIFY ("ID_CISDATABAZE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_US_BCK_RKC_2017" MODIFY ("C_FEIS_UCETTYP" NOT NULL ENABLE);


PROMPT Completed KP_KTG_US_BCK_RKC_2017.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_ZISKSR.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_KTG_ZISKSR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_KTG_ZISKSR
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_ZISKSR" MODIFY ("ID" CONSTRAINT "NN_KPKTGZISKSR_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_ZISKSR" MODIFY ("ID_SKUPINA" CONSTRAINT "NN_KPKTGZISKSR_SKUPINA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_ZISKSR" MODIFY ("DT_PLATNOSTOD" CONSTRAINT "NN_KPKTGZISKSR_OD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_ZISKSR" MODIFY ("DT_PLATNOSTDO" CONSTRAINT "NN_KPKTGZISKSR_DO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_ZISKSR" MODIFY ("C_KONTROLAVYUZITI" CONSTRAINT "NN_KPKTGZISKSR_KONTRVYUZ" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_KTG_ZISKSR" ADD CONSTRAINT "PK_KPKTGZISKSR" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPKTGZISKSR"  ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_ZISKSR" ADD CONSTRAINT "CN_KPKTGZISKSR_PLATNOST" CHECK ( dt_platnostOd <= dt_platnostDo ) ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_ZISKSR" ADD CONSTRAINT "CN_KPKTGZISKSR_KONTRVYUZ" CHECK ( c_kontrolaVyuziti in ('0','1') ) ENABLE;


PROMPT Completed KP_KTG_ZISKSR.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_DELGENEROVANIZAMEK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_LOG_DELGENEROVANIZAMEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_LOG_DELGENEROVANIZAMEK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_LOG_DELGENEROVANIZAMEK" MODIFY ("ID_CISDOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_LOG_DELGENEROVANIZAMEK" MODIFY ("ID_KTGUCETNISPOLECNOST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_LOG_DELGENEROVANIZAMEK" MODIFY ("DT_DATUM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_LOG_DELGENEROVANIZAMEK" MODIFY ("ID_CISZAMEK" NOT NULL ENABLE);


PROMPT Completed KP_LOG_DELGENEROVANIZAMEK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_GENEROVANIZAMEK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_LOG_GENEROVANIZAMEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_LOG_GENEROVANIZAMEK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_LOG_GENEROVANIZAMEK" MODIFY ("ID_CISDOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_LOG_GENEROVANIZAMEK" MODIFY ("ID_KTGUCETNISPOLECNOST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_LOG_GENEROVANIZAMEK" MODIFY ("DT_DATUM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_LOG_GENEROVANIZAMEK" MODIFY ("ID_CISZAMEK" NOT NULL ENABLE);


PROMPT Completed KP_LOG_GENEROVANIZAMEK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_GENZAMEKZAMITNUTI.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_LOG_GENZAMEKZAMITNUTI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_LOG_GENZAMEKZAMITNUTI
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_LOG_GENZAMEKZAMITNUTI" MODIFY ("S_AKCE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_LOG_GENZAMEKZAMITNUTI" MODIFY ("ID_CISDOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_LOG_GENZAMEKZAMITNUTI" MODIFY ("ID_KTGUCETNISPOLECNOST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_LOG_GENZAMEKZAMITNUTI" MODIFY ("DT_DATUM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_LOG_GENZAMEKZAMITNUTI" MODIFY ("ID_CISZAMEK" NOT NULL ENABLE);


PROMPT Completed KP_LOG_GENZAMEKZAMITNUTI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_PARAMETRY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_PARAMETRY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_PARAMETRY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_PARAMETRY" MODIFY ("C_NG_POVOLENO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_PARAMETRY" MODIFY ("DT_NG_DATUM_DO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_PARAMETRY" ADD CHECK ( c_NG_povoleno in ( '0', '1' ) ) ENABLE;


PROMPT Completed KP_PARAMETRY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_ACC_JT2PPF.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_ACC_JT2PPF.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_ACC_JT2PPF
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_ACC_JT2PPF" MODIFY ("JT_ACC" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_ACC_JT2PPF" MODIFY ("PPF_ACC_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_ACC_JT2PPF" ADD CONSTRAINT "KP_REL_ACC_JT2PPF_UK1" UNIQUE ("JT_ACC")
  USING INDEX "DB_JT"."KP_REL_ACC_JT2PPF_UK1"  ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_ACC_JT2PPF" ADD CONSTRAINT "PK_KPRELACCJT2PPF" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KPRELACCJT2PPF"  ENABLE;


PROMPT Completed KP_REL_ACC_JT2PPF.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_ACC_JT2PPF_BCK1.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_ACC_JT2PPF_BCK1.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_ACC_JT2PPF_BCK1
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_ACC_JT2PPF_BCK1" MODIFY ("JT_ACC" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_ACC_JT2PPF_BCK1" MODIFY ("PPF_ACC_ID" NOT NULL ENABLE);


PROMPT Completed KP_REL_ACC_JT2PPF_BCK1.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_ACC_JT2PPF_BCK2.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_ACC_JT2PPF_BCK2.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_ACC_JT2PPF_BCK2
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_ACC_JT2PPF_BCK2" MODIFY ("JT_ACC" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_ACC_JT2PPF_BCK2" MODIFY ("PPF_ACC_ID" NOT NULL ENABLE);


PROMPT Completed KP_REL_ACC_JT2PPF_BCK2.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_ACC_JT2PPF_BCK3.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_ACC_JT2PPF_BCK3.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_ACC_JT2PPF_BCK3
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_ACC_JT2PPF_BCK3" MODIFY ("JT_ACC" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_ACC_JT2PPF_BCK3" MODIFY ("PPF_ACC_ID" NOT NULL ENABLE);


PROMPT Completed KP_REL_ACC_JT2PPF_BCK3.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_ACC_JT2PPF_BCK4.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_ACC_JT2PPF_BCK4.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_ACC_JT2PPF_BCK4
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_ACC_JT2PPF_BCK4" MODIFY ("JT_ACC" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_ACC_JT2PPF_BCK4" MODIFY ("PPF_ACC_ID" NOT NULL ENABLE);


PROMPT Completed KP_REL_ACC_JT2PPF_BCK4.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_ACC_JT2PPF_BCK5.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_ACC_JT2PPF_BCK5.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_ACC_JT2PPF_BCK5
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_ACC_JT2PPF_BCK5" MODIFY ("JT_ACC" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_ACC_JT2PPF_BCK5" MODIFY ("PPF_ACC_ID" NOT NULL ENABLE);


PROMPT Completed KP_REL_ACC_JT2PPF_BCK5.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_APPUSERSKUPINA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_APPUSERSKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_APPUSERSKUPINA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_APPUSERSKUPINA" ADD CONSTRAINT "PK_RELAPPUSERSKUPINA" PRIMARY KEY ("ID_UCETNISKUPINA", "ID_KTGAPPUSER")
  USING INDEX "DB_JT"."PK_RELAPPUSERSKUPINA"  ENABLE;


PROMPT Completed KP_REL_APPUSERSKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_APPUSER_DOCUCSPOL.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_APPUSER_DOCUCSPOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_APPUSER_DOCUCSPOL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_APPUSER_DOCUCSPOL" MODIFY ("ID_APPUSER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_APPUSER_DOCUCSPOL" MODIFY ("ID_KTGUCETNISPOLECNOST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_APPUSER_DOCUCSPOL" ADD CONSTRAINT "PK_RELUSERDOCSPOL" PRIMARY KEY ("ID_APPUSER", "ID_KTGUCETNISPOLECNOST")
  USING INDEX "DB_JT"."PK_RELUSERDOCSPOL"  ENABLE;


PROMPT Completed KP_REL_APPUSER_DOCUCSPOL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_APPUSER_PROJEKT.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_APPUSER_PROJEKT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_APPUSER_PROJEKT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_APPUSER_PROJEKT" MODIFY ("ID_APPUSER" CONSTRAINT "NN_RELUSERPROJEKTUSER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_APPUSER_PROJEKT" MODIFY ("ID_KTGPROJEKT" CONSTRAINT "NN_RELUSERPROJEKTPROJEKT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_APPUSER_PROJEKT" ADD CONSTRAINT "PK_RELUSERPROJEKT" PRIMARY KEY ("ID_APPUSER", "ID_KTGPROJEKT", "ID_TYPPRAVA")
  USING INDEX "DB_JT"."PK_RELUSERPROJEKT"  ENABLE;


PROMPT Completed KP_REL_APPUSER_PROJEKT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_APPUSER_SPOLECNOSTPRAVO.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_APPUSER_SPOLECNOSTPRAVO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_APPUSER_SPOLECNOSTPRAVO
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_APPUSER_SPOLECNOSTPRAVO" MODIFY ("ID_KTGCISSPOLECNOSTPRAVO" CONSTRAINT "NN_RELSPOLPRAVO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_APPUSER_SPOLECNOSTPRAVO" MODIFY ("S_USERID" CONSTRAINT "NN_RELUSERSPOLPRAVO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_APPUSER_SPOLECNOSTPRAVO" MODIFY ("ID_KTGUCETNISPOLECNOST" CONSTRAINT "NN_RELUSERSPOLPRAVOSPOL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_APPUSER_SPOLECNOSTPRAVO" ADD CONSTRAINT "PK_RELAPPUSERSPOLECNOSTPRAVO" PRIMARY KEY ("S_USERID", "ID_KTGUCETNISPOLECNOST", "ID_KTGCISSPOLECNOSTPRAVO")
  USING INDEX "DB_JT"."PK_RELAPPUSERSPOLECNOSTPRAVO"  ENABLE;


PROMPT Completed KP_REL_APPUSER_SPOLECNOSTPRAVO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_APPUSER_SPOLPR0218_2021.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_APPUSER_SPOLPR0218_2021.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_APPUSER_SPOLPR0218_2021
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_APPUSER_SPOLPR0218_2021" MODIFY ("ID_KTGCISSPOLECNOSTPRAVO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_APPUSER_SPOLPR0218_2021" MODIFY ("S_USERID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_APPUSER_SPOLPR0218_2021" MODIFY ("ID_KTGUCETNISPOLECNOST" NOT NULL ENABLE);


PROMPT Completed KP_REL_APPUSER_SPOLPR0218_2021.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_APPUSER_SPOL_PRAVO_27072023.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_APPUSER_SPOL_PRAVO_27072023.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_APPUSER_SPOL_PRAVO_27072023
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_APPUSER_SPOL_PRAVO_27072023" MODIFY ("ID_KTGCISSPOLECNOSTPRAVO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_APPUSER_SPOL_PRAVO_27072023" MODIFY ("S_USERID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_APPUSER_SPOL_PRAVO_27072023" MODIFY ("ID_KTGUCETNISPOLECNOST" NOT NULL ENABLE);


PROMPT Completed KP_REL_APPUSER_SPOL_PRAVO_27072023.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_APPUSER_SPOL__PRAVO_BCK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_APPUSER_SPOL__PRAVO_BCK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_APPUSER_SPOL__PRAVO_BCK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_APPUSER_SPOL__PRAVO_BCK" MODIFY ("ID_KTGCISSPOLECNOSTPRAVO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_APPUSER_SPOL__PRAVO_BCK" MODIFY ("S_USERID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_APPUSER_SPOL__PRAVO_BCK" MODIFY ("ID_KTGUCETNISPOLECNOST" NOT NULL ENABLE);


PROMPT Completed KP_REL_APPUSER_SPOL__PRAVO_BCK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_CENNYPAPIRINDEX.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_CENNYPAPIRINDEX.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_CENNYPAPIRINDEX
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_CENNYPAPIRINDEX" MODIFY ("ID_CENNYPAPIR" CONSTRAINT "NN_RELCENNYPAPIRINDEX_CP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_CENNYPAPIRINDEX" MODIFY ("ID_CPINDEX" CONSTRAINT "NN_RELCENNYPAPIRINDEX_INDEX" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_CENNYPAPIRINDEX" ADD CONSTRAINT "PK_RELCENNYPAPIRINDEX" PRIMARY KEY ("ID_CENNYPAPIR")
  USING INDEX "DB_JT"."PK_RELCENNYPAPIRINDEX"  ENABLE;


PROMPT Completed KP_REL_CENNYPAPIRINDEX.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_DBLINKAPPUSER.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_DBLINKAPPUSER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_DBLINKAPPUSER
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_DBLINKAPPUSER" ADD CONSTRAINT "PK_RELDBLINKAPPUSER" PRIMARY KEY ("S_DBLINK", "ID_APPUSER")
  USING INDEX "DB_JT"."PK_RELDBLINKAPPUSER"  ENABLE;


PROMPT Completed KP_REL_DBLINKAPPUSER.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_DOKLAD_ZDROJDAT.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_DOKLAD_ZDROJDAT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_DOKLAD_ZDROJDAT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_DOKLAD_ZDROJDAT" MODIFY ("ID_DOKLADZDROJDAT" NOT NULL ENABLE);


PROMPT Completed KP_REL_DOKLAD_ZDROJDAT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_GESTORTRANSAKCE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_GESTORTRANSAKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_GESTORTRANSAKCE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_GESTORTRANSAKCE" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_GESTORTRANSAKCE" MODIFY ("ID_TYPTRANSAKCE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_GESTORTRANSAKCE" MODIFY ("ID_MNGSEGMENT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_GESTORTRANSAKCE" MODIFY ("ID_APPUSER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_GESTORTRANSAKCE" ADD CONSTRAINT "KP_REL_GESTORTRANSAKCE_PK" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."KP_REL_GESTORTRANSAKCE_PK"  ENABLE;


PROMPT Completed KP_REL_GESTORTRANSAKCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_GESTORTRANSAKCE_BCK_SEG.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_GESTORTRANSAKCE_BCK_SEG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_GESTORTRANSAKCE_BCK_SEG
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_GESTORTRANSAKCE_BCK_SEG" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_GESTORTRANSAKCE_BCK_SEG" MODIFY ("ID_TYPTRANSAKCE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_GESTORTRANSAKCE_BCK_SEG" MODIFY ("ID_MNGSEGMENT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_GESTORTRANSAKCE_BCK_SEG" MODIFY ("ID_APPUSER" NOT NULL ENABLE);


PROMPT Completed KP_REL_GESTORTRANSAKCE_BCK_SEG.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_GESTORTRANSAKCE_SPOL.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_GESTORTRANSAKCE_SPOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_GESTORTRANSAKCE_SPOL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_GESTORTRANSAKCE_SPOL" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_GESTORTRANSAKCE_SPOL" MODIFY ("ID_TYPTRANSAKCE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_GESTORTRANSAKCE_SPOL" MODIFY ("ID_SPOL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_GESTORTRANSAKCE_SPOL" MODIFY ("ID_APPUSER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_GESTORTRANSAKCE_SPOL" ADD CONSTRAINT "REL_GESTORTRANSAKCE_PK" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."REL_GESTORTRANSAKCE_PK"  ENABLE;


PROMPT Completed KP_REL_GESTORTRANSAKCE_SPOL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_MISUROVENSCHVALOVANI.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_MISUROVENSCHVALOVANI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_MISUROVENSCHVALOVANI
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_MISUROVENSCHVALOVANI" MODIFY ("ID_CISTYPTRANSAKCE" CONSTRAINT "NN_KPRELMISUROVEN_TT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_MISUROVENSCHVALOVANI" MODIFY ("NL_UROVEN" CONSTRAINT "NN_KPRELMISUROVEN_UROVEN" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_MISUROVENSCHVALOVANI" MODIFY ("ND_UROVENSCHVALOVANI" CONSTRAINT "NN_KPRELMISUROVEN_UROVENSCHVAL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_MISUROVENSCHVALOVANI" ADD CONSTRAINT "CH_KPRELMISUROVEN_DATA" CHECK (nl_uroven in (2,3) and id_ktgUcetniSpolecnost is not null and id_ktgProjekt is null 
	         or 
			 nl_uroven = 1 and id_ktgUcetniSpolecnost is null and id_ktgProjekt is not null) ENABLE;


PROMPT Completed KP_REL_MISUROVENSCHVALOVANI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_ODBOR_TRANSAKCE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_ODBOR_TRANSAKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_ODBOR_TRANSAKCE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_ODBOR_TRANSAKCE" MODIFY ("ID_DOKLADZDROJDAT" CONSTRAINT "NN_KPRELODBORTRAN_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_ODBOR_TRANSAKCE" ADD CONSTRAINT "PK_KPRELODBORTRAN" PRIMARY KEY ("ID_DOKLADZDROJDAT")
  USING INDEX "DB_JT"."PK_KPRELODBORTRAN"  ENABLE;


PROMPT Completed KP_REL_ODBOR_TRANSAKCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_PROJEKTCFEXPORT.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_PROJEKTCFEXPORT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_PROJEKTCFEXPORT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_PROJEKTCFEXPORT" MODIFY ("ID_PROJEKT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_PROJEKTCFEXPORT" ADD CONSTRAINT "PK_RELPROJCFEXPID" PRIMARY KEY ("ID_PROJEKT")
  USING INDEX "DB_JT"."PK_RELPROJCFEXPID"  ENABLE;


PROMPT Completed KP_REL_PROJEKTCFEXPORT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_PROJEKTUCSPOL.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_PROJEKTUCSPOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_PROJEKTUCSPOL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_PROJEKTUCSPOL" MODIFY ("ID_KTGPROJEKT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_PROJEKTUCSPOL" MODIFY ("ID_KTGUCETNISPOLECNOST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_PROJEKTUCSPOL" ADD CONSTRAINT "PK_PROJEKTUCSPOL" PRIMARY KEY ("ID_KTGPROJEKT", "ID_KTGUCETNISPOLECNOST")
  USING INDEX "DB_JT"."PK_PROJEKTUCSPOL"  ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_PROJEKTUCSPOL" ADD CONSTRAINT "CH_PROJEKTUCSPOL_MATKA" CHECK (dt_matkaOd is null OR dt_matkaDo is null OR dt_matkaOd<=dt_matkaDo) ENABLE;


PROMPT Completed KP_REL_PROJEKTUCSPOL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_PROJEKT_TRANSAKCE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_PROJEKT_TRANSAKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_PROJEKT_TRANSAKCE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_PROJEKT_TRANSAKCE" MODIFY ("ID_DOKLADZDROJDAT" CONSTRAINT "NN_KPRELPROJEKTTRAN_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_PROJEKT_TRANSAKCE" ADD CONSTRAINT "PK_KPRELPROJEKTTRAN" PRIMARY KEY ("ID_DOKLADZDROJDAT")
  USING INDEX "DB_JT"."PK_KPRELPROJEKTTRAN"  ENABLE;


PROMPT Completed KP_REL_PROJEKT_TRANSAKCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_PROJEKT_ZDROJDAT.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_PROJEKT_ZDROJDAT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_PROJEKT_ZDROJDAT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_PROJEKT_ZDROJDAT" MODIFY ("ID_PROJEKTDOKLAD" CONSTRAINT "NN_RELPROJEKTZDROJDAT_DOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_PROJEKT_ZDROJDAT" MODIFY ("ID_DOKLADZDROJDAT" CONSTRAINT "NN_RELPROJEKTZDROJDAT_ZD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_PROJEKT_ZDROJDAT" ADD CONSTRAINT "PK_RELPROJEKTZDROJDAT" PRIMARY KEY ("ID_PROJEKTDOKLAD", "ID_DOKLADZDROJDAT")
  USING INDEX "DB_JT"."PK_RELPROJEKTZDROJDAT"  ENABLE;


PROMPT Completed KP_REL_PROJEKT_ZDROJDAT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_SPOLECNOSTEXTERNIRATING.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_SPOLECNOSTEXTERNIRATING.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_SPOLECNOSTEXTERNIRATING
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_SPOLECNOSTEXTERNIRATING" MODIFY ("ID_EXTERNIRATING" CONSTRAINT "NN_KPRELSPOLEXTERNIRATING_IDER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_SPOLECNOSTEXTERNIRATING" MODIFY ("ID_KTGSPOLECNOST" CONSTRAINT "NN_KPRELSPOLEXTERNIRATING_SPOL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_SPOLECNOSTEXTERNIRATING" ADD CONSTRAINT "PK_KPRELSPOLEXTERNIRATING" PRIMARY KEY ("ID_KTGSPOLECNOST")
  USING INDEX "DB_JT"."PK_KPRELSPOLEXTERNIRATING"  ENABLE;


PROMPT Completed KP_REL_SPOLECNOSTEXTERNIRATING.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_SPOLECNOSTKARTATYP.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_SPOLECNOSTKARTATYP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_SPOLECNOSTKARTATYP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_SPOLECNOSTKARTATYP" MODIFY ("ID_KTGUCETNISPOLECNOST" CONSTRAINT "NN_KPRELSPOLKARTATYP_IDKTGSPOL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_SPOLECNOSTKARTATYP" MODIFY ("ID_KARTATYP" CONSTRAINT "NN_KPRELSPOLKARTATYP_IDKARTAT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_SPOLECNOSTKARTATYP" ADD CONSTRAINT "PK_KPRELSPOLKARTATYP" PRIMARY KEY ("ID_KTGUCETNISPOLECNOST", "ID_KARTATYP")
  USING INDEX "DB_JT"."PK_KPRELSPOLKARTATYP"  ENABLE;


PROMPT Completed KP_REL_SPOLECNOSTKARTATYP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_SPOLECNOSTKARTATYP_EPH.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_SPOLECNOSTKARTATYP_EPH.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_SPOLECNOSTKARTATYP_EPH
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_SPOLECNOSTKARTATYP_EPH" MODIFY ("ID_KTGUCETNISPOLECNOST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_SPOLECNOSTKARTATYP_EPH" MODIFY ("ID_KARTATYP" NOT NULL ENABLE);


PROMPT Completed KP_REL_SPOLECNOSTKARTATYP_EPH.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_SPOLECNOSTKARTATYP_ORIG.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_SPOLECNOSTKARTATYP_ORIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_SPOLECNOSTKARTATYP_ORIG
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_SPOLECNOSTKARTATYP_ORIG" MODIFY ("ID_KTGUCETNISPOLECNOST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_SPOLECNOSTKARTATYP_ORIG" MODIFY ("ID_KARTATYP" NOT NULL ENABLE);


PROMPT Completed KP_REL_SPOLECNOSTKARTATYP_ORIG.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_SPOLECNOSTSKUPINAIC.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_SPOLECNOSTSKUPINAIC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_SPOLECNOSTSKUPINAIC
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_SPOLECNOSTSKUPINAIC" MODIFY ("ID_KTGSPOLECNOST" CONSTRAINT "NN_RELSPOLSKUPINAIC_SPOL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_SPOLECNOSTSKUPINAIC" MODIFY ("ID_KTGSPOLECNOSTCLEN" CONSTRAINT "NN_RELSPOLSKUPINAIC_CLEN" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_SPOLECNOSTSKUPINAIC" MODIFY ("DT_PLATNOSTOD" CONSTRAINT "NN_RELSPOLSKUPINAIC_OD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_SPOLECNOSTSKUPINAIC" MODIFY ("DT_PLATNOSTDO" CONSTRAINT "NN_RELSPOLSKUPINAIC_DO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_SPOLECNOSTSKUPINAIC" ADD CONSTRAINT "CH_RELSPOLSKUPINAIC_DATUM" CHECK (dt_platnostOd <= dt_platnostDo) ENABLE;


PROMPT Completed KP_REL_SPOLECNOSTSKUPINAIC.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_SUBKONSOLIDACECLEN.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_SUBKONSOLIDACECLEN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_SUBKONSOLIDACECLEN
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN" MODIFY ("ID_KTGUCETNISKUPINA" CONSTRAINT "NN_KPRELSUBKONSOLIDACE_SKUP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN" MODIFY ("ID_KTGSUBKONSOLIDACE" CONSTRAINT "NN_KPRELSUBKONSOLIDACE_SUBK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN" MODIFY ("DT_CLENSTVIOD" CONSTRAINT "NN_KPRELSUBKONSOLIDACE_DATOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN" MODIFY ("DT_CLENSTVIDO" CONSTRAINT "NN_KPRELSUBKONSOLIDACE_DATDO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN" ADD CONSTRAINT "PK_KPSUBKONSOLIDACECLEN" PRIMARY KEY ("ID_KTGUCETNISKUPINA", "ID_KTGSUBKONSOLIDACE", "ID_KTGUCETNISPOLECNOST", "DT_CLENSTVIOD")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS  ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN" ADD CONSTRAINT "C_KPRELSUBKONCLEN_EQUITY" CHECK ( c_clen in ( '0', '1') and c_clen is not null ) ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN" ADD CONSTRAINT "C_KPRELSUBKONCLEN_CLEN" CHECK ( c_equity in ( '0', '1') and c_equity is not null ) ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN" ADD CONSTRAINT "CN_KPRELSUBKONCLEN_PROPIS" CHECK ( c_propisujVazby is not null and c_propisujVazby in ( '0', '1' ) ) ENABLE;


PROMPT Completed KP_REL_SUBKONSOLIDACECLEN.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_SUBKONSOLIDACECLEN_BAK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_SUBKONSOLIDACECLEN_BAK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_SUBKONSOLIDACECLEN_BAK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN_BAK" MODIFY ("ID_KTGUCETNISKUPINA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN_BAK" MODIFY ("ID_KTGSUBKONSOLIDACE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN_BAK" MODIFY ("DT_CLENSTVIOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN_BAK" MODIFY ("DT_CLENSTVIDO" NOT NULL ENABLE);


PROMPT Completed KP_REL_SUBKONSOLIDACECLEN_BAK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_SUBKONSOLIDACECLEN_RP.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_SUBKONSOLIDACECLEN_RP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_SUBKONSOLIDACECLEN_RP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN_RP" MODIFY ("ID_KTGSUBKONSOLIDACE" CONSTRAINT "NN_KPRELSUBKONCLENRP_SUBK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN_RP" MODIFY ("ID_KTGUCETNISPOLECNOST" CONSTRAINT "NN_KPRELSUBKONCLENRP_SPOL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN_RP" MODIFY ("C_KDYPOUZIT" CONSTRAINT "NN_KPRELSUBKONCLENRP_KDY" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN_RP" ADD CONSTRAINT "PK_KPRELSUBKONSOLIDACECLEN_RP" PRIMARY KEY ("ID_KTGSUBKONSOLIDACE", "ID_KTGUCETNISPOLECNOST", "C_KDYPOUZIT")
  USING INDEX "DB_JT"."PK_KPRELSUBKONSOLIDACECLEN_RP"  ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN_RP" ADD CONSTRAINT "C_KPRELSUBKONCLENRP_DOKLAD" CHECK ( c_doklad in ( 'N', 'Z') and c_doklad is not null ) ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN_RP" ADD CONSTRAINT "C_KPRELSUBKONCLENRP_VAZBY" CHECK ( c_dokladVazby in ( 'N', 'Z') and c_dokladVazby is not null ) ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN_RP" ADD CONSTRAINT "C_KPRELSUBKONCLENRP_VYS" CHECK ( c_vysledovka in ( '0', '1') and c_vysledovka is not null ) ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN_RP" ADD CONSTRAINT "C_KPRELSUBKONCLENRP_AP" CHECK ( c_aktivaPasiva in ( '0', '1') and c_aktivaPasiva is not null ) ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN_RP" ADD CONSTRAINT "C_KPRELSUBKONCLENRP_KDY" CHECK ( c_kdyPouzit in ( 'O', 'D') and c_aktivaPasiva is not null ) ENABLE;


PROMPT Completed KP_REL_SUBKONSOLIDACECLEN_RP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_TYPSPOLEVIDINFO.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_TYPSPOLEVIDINFO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_TYPSPOLEVIDINFO
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_TYPSPOLEVIDINFO" MODIFY ("ID_TYPSPOL" CONSTRAINT "NN_RELTYPSPOLEVIDINFO_TYPSPOL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_TYPSPOLEVIDINFO" MODIFY ("ID_EVIDINFO" CONSTRAINT "NN_RELTYPSPOLEVIDINFO_EVIDINFO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_TYPSPOLEVIDINFO" ADD CONSTRAINT "PK_RELTYPSPOLEVIDINFO" PRIMARY KEY ("ID_TYPSPOL", "ID_EVIDINFO")
  USING INDEX "DB_JT"."PK_RELTYPSPOLEVIDINFO"  ENABLE;


PROMPT Completed KP_REL_TYPSPOLEVIDINFO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_UCETNISKUPINACLEN.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_UCETNISKUPINACLEN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_UCETNISKUPINACLEN
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_UCETNISKUPINACLEN" ADD CONSTRAINT "C_KPUCETNISKUPINACLEN_EQUITY" CHECK ( C_EQUITY IN ( '0', '1')  ) ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_UCETNISKUPINACLEN" ADD CONSTRAINT "PK_KPUCETNISKUPINACLEN" PRIMARY KEY ("ID_KTGUCETNISKUPINA", "ID_KTGUCETNISPOLECNOST")
  USING INDEX "DB_JT"."PK_KPUCETNISKUPINACLEN"  ENABLE;


PROMPT Completed KP_REL_UCETNISKUPINACLEN.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_UCETUNIFFLOW.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REL_UCETUNIFFLOW.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REL_UCETUNIFFLOW
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_UCETUNIFFLOW" MODIFY ("ID_CISUCETUNIF" CONSTRAINT "NN_KPRELUUFLOW_UU" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_UCETUNIFFLOW" MODIFY ("ID_CISFLOW" CONSTRAINT "NN_KPRELUUFLOW_FLOW" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REL_UCETUNIFFLOW" ADD CONSTRAINT "PK_KPRELUUFLOW" PRIMARY KEY ("ID_CISUCETUNIF", "ID_CISFLOW")
  USING INDEX "DB_JT"."PK_KPRELUUFLOW"  ENABLE;


PROMPT Completed KP_REL_UCETUNIFFLOW.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REP_CARTESISPROTISTRANA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REP_CARTESISPROTISTRANA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REP_CARTESISPROTISTRANA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REP_CARTESISPROTISTRANA" ADD CONSTRAINT "KP_REPCARPROTI_IDSPOL" CHECK ("ID_KTGSPOLECNOST" IS NOT NULL) ENABLE;
  ALTER TABLE "DB_JT"."KP_REP_CARTESISPROTISTRANA" ADD CONSTRAINT "KP_REPCARPROTI_DATUM" CHECK ("DT_DATUM" IS NOT NULL) ENABLE;
  ALTER TABLE "DB_JT"."KP_REP_CARTESISPROTISTRANA" ADD CONSTRAINT "PK_KPRELSPOLPROTICARTESIS" PRIMARY KEY ("DT_DATUM", "ID_KTGSPOLECNOST")
  USING INDEX "DB_JT"."PK_KPRELSPOLPROTICARTESIS"  ENABLE;


PROMPT Completed KP_REP_CARTESISPROTISTRANA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REP_CISSKUPINA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REP_CISSKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REP_CISSKUPINA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REP_CISSKUPINA" MODIFY ("ID" CONSTRAINT "NN_REPCISSKUPINA_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REP_CISSKUPINA" ADD CONSTRAINT "PK_REPCISSKUPINA" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_REPCISSKUPINA"  ENABLE;


PROMPT Completed KP_REP_CISSKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REP_DEFSKUPINA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REP_DEFSKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REP_DEFSKUPINA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REP_DEFSKUPINA" MODIFY ("ID" CONSTRAINT "NN_REPDEFSKUPINA_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REP_DEFSKUPINA" MODIFY ("ID_CISSKUPINA" CONSTRAINT "NN_REPDEFSKUPINA_CIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REP_DEFSKUPINA" MODIFY ("ID_KTGSPOLECNOST" CONSTRAINT "NN_REPDEFSKUPINA_SPOL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REP_DEFSKUPINA" ADD CONSTRAINT "PK_REPDEFSKUPINA" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_REPDEFSKUPINA"  ENABLE;
  ALTER TABLE "DB_JT"."KP_REP_DEFSKUPINA" ADD CONSTRAINT "CH_REPDEFSKUPINA_PLATNOST" CHECK (dt_platnostOd is not null and dt_platnostDo is not null and dt_platnostOd <= dt_platnostDo) ENABLE;


PROMPT Completed KP_REP_DEFSKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REP_SPOLECNOSTCARTESIS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_REP_SPOLECNOSTCARTESIS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_REP_SPOLECNOSTCARTESIS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REP_SPOLECNOSTCARTESIS" MODIFY ("DT_DATUM" CONSTRAINT "KP_REPSPOL_DATUM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REP_SPOLECNOSTCARTESIS" MODIFY ("ID_KTGSPOLECNOST" CONSTRAINT "KP_REPSPOL_IDSPOL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_REP_SPOLECNOSTCARTESIS" ADD CONSTRAINT "PK_KPRELSPOLCARTESIS" PRIMARY KEY ("DT_DATUM", "ID_KTGSPOLECNOST")
  USING INDEX "DB_JT"."PK_KPRELSPOLCARTESIS"  ENABLE;
  ALTER TABLE "DB_JT"."KP_REP_SPOLECNOSTCARTESIS" ADD CONSTRAINT "CH_REPSPOL_SCOPE8" CHECK (c_scope8 in ('0','1')) ENABLE;
  ALTER TABLE "DB_JT"."KP_REP_SPOLECNOSTCARTESIS" ADD CONSTRAINT "CH_REPSPOL_AKTIVNI" CHECK (c_aktivni in ('Y','N', 'U')) ENABLE;


PROMPT Completed KP_REP_SPOLECNOSTCARTESIS.sql
PROMPT


-- ============================================================================
-- Deploy: KP_TMP_APPUSERSPOL_VYJIMKY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_TMP_APPUSERSPOL_VYJIMKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_TMP_APPUSERSPOL_VYJIMKY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_TMP_APPUSERSPOL_VYJIMKY" ADD PRIMARY KEY ("ID_APPUSER")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "INDEXY"  ENABLE;


PROMPT Completed KP_TMP_APPUSERSPOL_VYJIMKY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_TMP_DOKLADPROJEKT.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_TMP_DOKLADPROJEKT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_TMP_DOKLADPROJEKT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_TMP_DOKLADPROJEKT" MODIFY ("ID_DOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_TMP_DOKLADPROJEKT" MODIFY ("NL_LEVEL" NOT NULL ENABLE);


PROMPT Completed KP_TMP_DOKLADPROJEKT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_TMP_GUI.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_TMP_GUI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_TMP_GUI
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_TMP_GUI" MODIFY ("ID_AKCE" CONSTRAINT "NN_KPTMPGUI_IDAKCE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_TMP_GUI" MODIFY ("S_UZIVATEL" CONSTRAINT "NN_KPTMPGUI_UZIVATEL" NOT NULL ENABLE);


PROMPT Completed KP_TMP_GUI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_TMP_SUBVAZBYVYJIMKY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_TMP_SUBVAZBYVYJIMKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_TMP_SUBVAZBYVYJIMKY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_TMP_SUBVAZBYVYJIMKY" MODIFY ("ID_KTGSUBKONSOLIDACE" CONSTRAINT "NN_KPSUBVAZBYVYJIMKY_SUBKON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_TMP_SUBVAZBYVYJIMKY" MODIFY ("DT_DATUM" CONSTRAINT "NN_KPSUBVAZBYVYJIMKY_DATUM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_TMP_SUBVAZBYVYJIMKY" MODIFY ("ID_KTGUCETNISPOLECNOST_1" CONSTRAINT "NN_KPSUBVAZBYVYJIMKY_SPOL1" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_TMP_SUBVAZBYVYJIMKY" MODIFY ("ID_KTGUCETNISPOLECNOST_2" CONSTRAINT "NN_KPSUBVAZBYVYJIMKY_SPOL2" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_TMP_SUBVAZBYVYJIMKY" ADD CONSTRAINT "PK_KPTMPSUBVAZBYVYJIMKY" PRIMARY KEY ("ID_KTGSUBKONSOLIDACE", "DT_DATUM", "ID_KTGUCETNISPOLECNOST_1", "ID_KTGUCETNISPOLECNOST_2")
  USING INDEX "DB_JT"."PK_KPTMPSUBVAZBYVYJIMKY"  ENABLE;


PROMPT Completed KP_TMP_SUBVAZBYVYJIMKY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_TMP_VAZBY_VYJIMKY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_TMP_VAZBY_VYJIMKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_TMP_VAZBY_VYJIMKY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_TMP_VAZBY_VYJIMKY" MODIFY ("ID_KTGUCETNISPOLECNOST" CONSTRAINT "NN_KPTMPVAZBYVYJIMKY_UCSPOL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_TMP_VAZBY_VYJIMKY" MODIFY ("ID_KTGAPPUSER" CONSTRAINT "NN_KPTMPVAZBYVYJIMKY_USER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_TMP_VAZBY_VYJIMKY" ADD CONSTRAINT "PK_KPTMPVAZBYVYJIMKY" PRIMARY KEY ("ID_KTGUCETNISPOLECNOST", "ID_KTGAPPUSER")
  USING INDEX "DB_JT"."PK_KPTMPVAZBYVYJIMKY"  ENABLE;


PROMPT Completed KP_TMP_VAZBY_VYJIMKY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_TMP_VYJIMKYPROTOKOLU.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KP_TMP_VYJIMKYPROTOKOLU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KP_TMP_VYJIMKYPROTOKOLU
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_TMP_VYJIMKYPROTOKOLU" MODIFY ("S_KEDNI" CONSTRAINT "NN_TMPVYJIMKYPROTOKOLU_KEDNI" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KP_TMP_VYJIMKYPROTOKOLU" ADD CONSTRAINT "CN_TMPVYJIMKYPROTOKOLU_PERIOD" CHECK ( c_periodicita is not null and c_periodicita in ('S', 'M', 'Q', 'Y', 'V') ) ENABLE;
  ALTER TABLE "DB_JT"."KP_TMP_VYJIMKYPROTOKOLU" ADD CONSTRAINT "PK_TMPVYJIMKYPROTOKOLU" PRIMARY KEY ("ID_KTGUCETNISPOLECNOST")
  USING INDEX "DB_JT"."PK_TMPVYJIMKYPROTOKOLU"  ENABLE;


PROMPT Completed KP_TMP_VYJIMKYPROTOKOLU.sql
PROMPT


-- ============================================================================
-- Deploy: KTG_APPUSER.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KTG_APPUSER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KTG_APPUSER
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KTG_APPUSER" MODIFY ("ID" CONSTRAINT "NN_KTGAPPUSER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KTG_APPUSER" ADD CONSTRAINT "PK_KTGAPPUSER" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KTGAPPUSER"  ENABLE;


PROMPT Completed KTG_APPUSER.sql
PROMPT


-- ============================================================================
-- Deploy: KTG_APPUSER_10_2016.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KTG_APPUSER_10_2016.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KTG_APPUSER_10_2016
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KTG_APPUSER_10_2016" MODIFY ("ID" NOT NULL ENABLE);


PROMPT Completed KTG_APPUSER_10_2016.sql
PROMPT


-- ============================================================================
-- Deploy: KTG_APPUSER_BCK.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KTG_APPUSER_BCK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KTG_APPUSER_BCK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KTG_APPUSER_BCK" MODIFY ("ID" NOT NULL ENABLE);


PROMPT Completed KTG_APPUSER_BCK.sql
PROMPT


-- ============================================================================
-- Deploy: KTG_APPUSER_BCK_11.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KTG_APPUSER_BCK_11.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KTG_APPUSER_BCK_11
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KTG_APPUSER_BCK_11" MODIFY ("ID" NOT NULL ENABLE);


PROMPT Completed KTG_APPUSER_BCK_11.sql
PROMPT


-- ============================================================================
-- Deploy: KTG_CENNYPAPIR.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying KTG_CENNYPAPIR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table KTG_CENNYPAPIR
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KTG_CENNYPAPIR" MODIFY ("ID" CONSTRAINT "NN_KTGCENNYPAPIR_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KTG_CENNYPAPIR" MODIFY ("ID_KTGSPOLECNOST" CONSTRAINT "NN_KTGCENNYPAPIR_SPOL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KTG_CENNYPAPIR" MODIFY ("S_POPIS" CONSTRAINT "NN_KTGCENNYPAPIR_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KTG_CENNYPAPIR" MODIFY ("C_REGISTROVANY" CONSTRAINT "NN_KTGCENNYPAPIR_REGISTROVANY" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."KTG_CENNYPAPIR" ADD CONSTRAINT "PK_KTGCENNYPAPIR" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_KTGCENNYPAPIR"  ENABLE;
  ALTER TABLE "DB_JT"."KTG_CENNYPAPIR" ADD CONSTRAINT "CN_KTGCENNYPAPIR_SAZBA" CHECK ( c_typUrokoveSazby is not null and c_typUrokoveSazby in ( 'F', 'V' ) ) ENABLE;


PROMPT Completed KTG_CENNYPAPIR.sql
PROMPT


-- ============================================================================
-- Deploy: LOG_AKCE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying LOG_AKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table LOG_AKCE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."LOG_AKCE" MODIFY ("ID" CONSTRAINT "NN_LOGAKCE_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."LOG_AKCE" MODIFY ("ID_LOGCISAKCE" CONSTRAINT "NN_LOGAKCE_CISAKCE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."LOG_AKCE" MODIFY ("ID_LOGCISSTATUS" CONSTRAINT "NN_LOGAKCE_CISSTATUS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."LOG_AKCE" MODIFY ("S_UZIVATEL" CONSTRAINT "NN_LOGAKCE_UZIVATEL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."LOG_AKCE" MODIFY ("DT_START" CONSTRAINT "NN_LOGAKCE_START" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."LOG_AKCE" ADD CONSTRAINT "PK_LOGAKCE" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_LOGAKCE"  ENABLE;


PROMPT Completed LOG_AKCE.sql
PROMPT


-- ============================================================================
-- Deploy: LOG_AKCE_DETAIL.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying LOG_AKCE_DETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table LOG_AKCE_DETAIL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."LOG_AKCE_DETAIL" MODIFY ("ID" CONSTRAINT "NN_LOGAKCEDETAIL_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."LOG_AKCE_DETAIL" MODIFY ("ID_LOGAKCE" CONSTRAINT "NN_LOGAKCEDETAIL_AKCE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."LOG_AKCE_DETAIL" MODIFY ("ID_LOGCISSTATUS" CONSTRAINT "NN_LOGAKCEDETAIL_CISSTATUS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."LOG_AKCE_DETAIL" MODIFY ("S_POPIS" CONSTRAINT "NN_LOGAKCEDETAIL_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."LOG_AKCE_DETAIL" ADD CONSTRAINT "PK_LOGAKCEDETAIL" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_LOGAKCEDETAIL"  ENABLE;


PROMPT Completed LOG_AKCE_DETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: LOG_CIS_AKCE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying LOG_CIS_AKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table LOG_CIS_AKCE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."LOG_CIS_AKCE" MODIFY ("ID" CONSTRAINT "NN_LOGCISAKCE_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."LOG_CIS_AKCE" MODIFY ("S_NAZEV" CONSTRAINT "NN_LOGCISAKCE_NAZEV" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."LOG_CIS_AKCE" ADD CONSTRAINT "PK_LOGCISAKCE" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_LOGCISAKCE"  ENABLE;


PROMPT Completed LOG_CIS_AKCE.sql
PROMPT


-- ============================================================================
-- Deploy: LOG_CIS_SPOL_SKUPINA0.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying LOG_CIS_SPOL_SKUPINA0.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table LOG_CIS_SPOL_SKUPINA0
--------------------------------------------------------

  ALTER TABLE "DB_JT"."LOG_CIS_SPOL_SKUPINA0" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."LOG_CIS_SPOL_SKUPINA0" MODIFY ("ID_CIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."LOG_CIS_SPOL_SKUPINA0" MODIFY ("S_KOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."LOG_CIS_SPOL_SKUPINA0" MODIFY ("ID_USER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."LOG_CIS_SPOL_SKUPINA0" ADD CONSTRAINT "LOG_CIS_SPOL_SKUPINA0_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed LOG_CIS_SPOL_SKUPINA0.sql
PROMPT


-- ============================================================================
-- Deploy: LOG_CIS_STATUS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying LOG_CIS_STATUS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table LOG_CIS_STATUS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."LOG_CIS_STATUS" MODIFY ("ID" CONSTRAINT "NN_LOGCISSTATUS_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."LOG_CIS_STATUS" MODIFY ("S_POPIS" CONSTRAINT "NN_LOGCISSTATUS_POPIS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."LOG_CIS_STATUS" ADD CONSTRAINT "PK_LOGCISSTATUS" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_LOGCISSTATUS"  ENABLE;


PROMPT Completed LOG_CIS_STATUS.sql
PROMPT


-- ============================================================================
-- Deploy: LOG_DWH.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying LOG_DWH.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table LOG_DWH
--------------------------------------------------------

  ALTER TABLE "DB_JT"."LOG_DWH" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."LOG_DWH" MODIFY ("LOAD_DATE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."LOG_DWH" ADD CONSTRAINT "LOG_DWH_PK" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."LOG_DWH_PK"  ENABLE;


PROMPT Completed LOG_DWH.sql
PROMPT


-- ============================================================================
-- Deploy: LOG_KTG_APPUSER.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying LOG_KTG_APPUSER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table LOG_KTG_APPUSER
--------------------------------------------------------

  ALTER TABLE "DB_JT"."LOG_KTG_APPUSER" MODIFY ("ID" NOT NULL ENABLE);


PROMPT Completed LOG_KTG_APPUSER.sql
PROMPT


-- ============================================================================
-- Deploy: MD_ADDITIONAL_PROPERTIES.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_ADDITIONAL_PROPERTIES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_ADDITIONAL_PROPERTIES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_ADDITIONAL_PROPERTIES" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_ADDITIONAL_PROPERTIES" MODIFY ("CONNECTION_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_ADDITIONAL_PROPERTIES" MODIFY ("REF_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_ADDITIONAL_PROPERTIES" MODIFY ("REF_TYPE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_ADDITIONAL_PROPERTIES" MODIFY ("PROP_KEY" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_ADDITIONAL_PROPERTIES" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_ADDITIONAL_PROPERTIES" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_ADDITIONAL_PROPERTIES" ADD CONSTRAINT "MD_ADDITIONAL_PROPERTIES_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_ADDITIONAL_PROPERTIES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_APPLICATIONFILES.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_APPLICATIONFILES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_APPLICATIONFILES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_APPLICATIONFILES" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_APPLICATIONFILES" MODIFY ("APPLICATIONS_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_APPLICATIONFILES" MODIFY ("NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_APPLICATIONFILES" MODIFY ("URI" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_APPLICATIONFILES" MODIFY ("TYPE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_APPLICATIONFILES" MODIFY ("STATE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_APPLICATIONFILES" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_APPLICATIONFILES" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_APPLICATIONFILES" ADD CONSTRAINT "MD_APPLICATIONFILES_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_APPLICATIONFILES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_APPLICATIONS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_APPLICATIONS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_APPLICATIONS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_APPLICATIONS" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_APPLICATIONS" MODIFY ("PROJECT_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_APPLICATIONS" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_APPLICATIONS" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_APPLICATIONS" ADD CONSTRAINT "MD_APPLICATIONS_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_APPLICATIONS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_CATALOGS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_CATALOGS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_CATALOGS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_CATALOGS" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_CATALOGS" MODIFY ("CONNECTION_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_CATALOGS" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_CATALOGS" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_CATALOGS" ADD CONSTRAINT "MD_CATALOGS_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_CATALOGS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_CODE_REGEX.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_CODE_REGEX.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_CODE_REGEX
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_CODE_REGEX" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_CODE_REGEX" MODIFY ("REGEX" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_CODE_REGEX" MODIFY ("DESCRIPTION" NOT NULL ENABLE);


PROMPT Completed MD_CODE_REGEX.sql
PROMPT


-- ============================================================================
-- Deploy: MD_COLUMNS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_COLUMNS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_COLUMNS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_COLUMNS" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_COLUMNS" MODIFY ("TABLE_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_COLUMNS" MODIFY ("COLUMN_NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_COLUMNS" MODIFY ("COLUMN_ORDER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_COLUMNS" MODIFY ("NULLABLE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_COLUMNS" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_COLUMNS" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_COLUMNS" ADD CONSTRAINT "MD_COLUMNS_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;
  ALTER TABLE "DB_JT"."MD_COLUMNS" ADD CONSTRAINT "MD_COLUMNS_NULLABLE_Y_N" CHECK ((UPPER(NULLABLE) IN ('Y','N'))) ENABLE;


PROMPT Completed MD_COLUMNS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_CONNECTIONS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_CONNECTIONS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_CONNECTIONS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_CONNECTIONS" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_CONNECTIONS" MODIFY ("PROJECT_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_CONNECTIONS" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_CONNECTIONS" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_CONNECTIONS" ADD CONSTRAINT "MD_CONNECTIONS_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_CONNECTIONS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_CONSTRAINTS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_CONSTRAINTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_CONSTRAINTS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_CONSTRAINTS" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_CONSTRAINTS" MODIFY ("TABLE_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_CONSTRAINTS" MODIFY ("LANGUAGE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_CONSTRAINTS" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_CONSTRAINTS" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_CONSTRAINTS" ADD CONSTRAINT "MD_CONSTRAINTS_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_CONSTRAINTS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_CONSTRAINT_DETAILS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_CONSTRAINT_DETAILS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_CONSTRAINT_DETAILS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_CONSTRAINT_DETAILS" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_CONSTRAINT_DETAILS" MODIFY ("CONSTRAINT_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_CONSTRAINT_DETAILS" MODIFY ("DETAIL_ORDER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_CONSTRAINT_DETAILS" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_CONSTRAINT_DETAILS" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_CONSTRAINT_DETAILS" ADD CONSTRAINT "MD_CONSTRAINT_DETAILS_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_CONSTRAINT_DETAILS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_DERIVATIVES.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_DERIVATIVES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_DERIVATIVES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_DERIVATIVES" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_DERIVATIVES" MODIFY ("SRC_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_DERIVATIVES" MODIFY ("DERIVED_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_DERIVATIVES" MODIFY ("DERIVED_CONNECTION_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_DERIVATIVES" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_DERIVATIVES" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_DERIVATIVES" ADD CONSTRAINT "MIGRDER_CHK" CHECK (ENABLED = 'Y' OR ENABLED = 'y' OR ENABLED = 'N' OR  ENABLED = 'n') ENABLE;
  ALTER TABLE "DB_JT"."MD_DERIVATIVES" ADD CONSTRAINT "MIGRDREIVATIVES_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_DERIVATIVES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_FILE_ARTIFACTS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_FILE_ARTIFACTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_FILE_ARTIFACTS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_FILE_ARTIFACTS" MODIFY ("ID" CONSTRAINT "MD_APP_FILE_ART_NONULL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_FILE_ARTIFACTS" MODIFY ("APPLICATIONFILES_ID" CONSTRAINT "MD_APPL_FILE_FK_NONULL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_FILE_ARTIFACTS" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_FILE_ARTIFACTS" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_FILE_ARTIFACTS" ADD CONSTRAINT "MD_FILE_ARTIFACTS_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_FILE_ARTIFACTS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_GROUPS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_GROUPS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_GROUPS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_GROUPS" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_GROUPS" MODIFY ("SCHEMA_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_GROUPS" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_GROUPS" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_GROUPS" ADD CONSTRAINT "MD_GROUPS_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_GROUPS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_GROUP_MEMBERS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_GROUP_MEMBERS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_GROUP_MEMBERS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_GROUP_MEMBERS" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_GROUP_MEMBERS" MODIFY ("GROUP_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_GROUP_MEMBERS" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_GROUP_MEMBERS" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_GROUP_MEMBERS" ADD CONSTRAINT "MD_GROUP_MEMBERS_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_GROUP_MEMBERS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_GROUP_PRIVILEGES.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_GROUP_PRIVILEGES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_GROUP_PRIVILEGES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_GROUP_PRIVILEGES" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_GROUP_PRIVILEGES" MODIFY ("GROUP_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_GROUP_PRIVILEGES" MODIFY ("PRIVILEGE_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_GROUP_PRIVILEGES" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_GROUP_PRIVILEGES" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_GROUP_PRIVILEGES" ADD CONSTRAINT "MD_GROUP_PRIVILEGES_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_GROUP_PRIVILEGES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_INDEXES.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_INDEXES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_INDEXES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_INDEXES" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_INDEXES" MODIFY ("TABLE_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_INDEXES" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_INDEXES" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_INDEXES" ADD CONSTRAINT "MD_INDEXES_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_INDEXES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_INDEX_DETAILS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_INDEX_DETAILS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_INDEX_DETAILS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_INDEX_DETAILS" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_INDEX_DETAILS" MODIFY ("INDEX_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_INDEX_DETAILS" MODIFY ("COLUMN_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_INDEX_DETAILS" MODIFY ("DETAIL_ORDER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_INDEX_DETAILS" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_INDEX_DETAILS" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_INDEX_DETAILS" ADD CONSTRAINT "MD_INDEX_DETAILS_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_INDEX_DETAILS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_MIGR_DEPENDENCY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_MIGR_DEPENDENCY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_MIGR_DEPENDENCY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_MIGR_DEPENDENCY" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_DEPENDENCY" MODIFY ("CONNECTION_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_DEPENDENCY" MODIFY ("PARENT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_DEPENDENCY" MODIFY ("CHILD_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_DEPENDENCY" MODIFY ("PARENT_OBJECT_TYPE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_DEPENDENCY" MODIFY ("CHILD_OBJECT_TYPE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_DEPENDENCY" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_DEPENDENCY" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_DEPENDENCY" ADD CONSTRAINT "MIGR_DEPENDENCY_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_MIGR_DEPENDENCY.sql
PROMPT


-- ============================================================================
-- Deploy: MD_MIGR_PARAMETER.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_MIGR_PARAMETER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_MIGR_PARAMETER
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_MIGR_PARAMETER" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_PARAMETER" MODIFY ("CONNECTION_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_PARAMETER" MODIFY ("OBJECT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_PARAMETER" MODIFY ("OBJECT_TYPE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_PARAMETER" MODIFY ("PARAM_EXISTING" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_PARAMETER" MODIFY ("PARAM_ORDER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_PARAMETER" MODIFY ("PARAM_NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_PARAMETER" MODIFY ("PARAM_TYPE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_PARAMETER" MODIFY ("PARAM_DATA_TYPE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_PARAMETER" MODIFY ("NULLABLE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_PARAMETER" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_PARAMETER" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_PARAMETER" ADD CONSTRAINT "MIGR_PARAMETER_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_MIGR_PARAMETER.sql
PROMPT


-- ============================================================================
-- Deploy: MD_MIGR_WEAKDEP.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_MIGR_WEAKDEP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_MIGR_WEAKDEP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_MIGR_WEAKDEP" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_WEAKDEP" MODIFY ("CONNECTION_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_WEAKDEP" MODIFY ("SCHEMA_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_WEAKDEP" MODIFY ("PARENT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_WEAKDEP" MODIFY ("CHILD_NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_WEAKDEP" MODIFY ("PARENT_TYPE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_WEAKDEP" MODIFY ("CHILD_TYPE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_WEAKDEP" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_WEAKDEP" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_MIGR_WEAKDEP" ADD CONSTRAINT "MIGR_WEAKDEP_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_MIGR_WEAKDEP.sql
PROMPT


-- ============================================================================
-- Deploy: MD_OTHER_OBJECTS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_OTHER_OBJECTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_OTHER_OBJECTS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_OTHER_OBJECTS" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_OTHER_OBJECTS" MODIFY ("SCHEMA_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_OTHER_OBJECTS" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_OTHER_OBJECTS" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_OTHER_OBJECTS" ADD CONSTRAINT "MD_OTHER_OBJECTS_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_OTHER_OBJECTS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_PACKAGES.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_PACKAGES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_PACKAGES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_PACKAGES" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_PACKAGES" MODIFY ("SCHEMA_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_PACKAGES" MODIFY ("NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_PACKAGES" MODIFY ("LANGUAGE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_PACKAGES" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_PACKAGES" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_PACKAGES" ADD CONSTRAINT "MD_PACKAGES_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_PACKAGES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_PARTITIONS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_PARTITIONS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_PARTITIONS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_PARTITIONS" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_PARTITIONS" MODIFY ("TABLE_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_PARTITIONS" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_PARTITIONS" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_PARTITIONS" ADD CONSTRAINT "MD_PARTITIONS_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_PARTITIONS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_PRIVILEGES.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_PRIVILEGES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_PRIVILEGES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_PRIVILEGES" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_PRIVILEGES" MODIFY ("SCHEMA_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_PRIVILEGES" MODIFY ("PRIVILEGE_NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_PRIVILEGES" MODIFY ("PRIVELEGEOBJECTTYPE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_PRIVILEGES" MODIFY ("PRIVELEGE_TYPE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_PRIVILEGES" MODIFY ("NATIVE_SQL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_PRIVILEGES" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_PRIVILEGES" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_PRIVILEGES" ADD CONSTRAINT "MD_PRIVILEGES_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_PRIVILEGES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_PROJECTS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_PROJECTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_PROJECTS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_PROJECTS" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_PROJECTS" MODIFY ("PROJECT_NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_PROJECTS" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_PROJECTS" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_PROJECTS" ADD CONSTRAINT "MD_PROJECTS_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_PROJECTS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_REGISTRY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_REGISTRY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_REGISTRY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_REGISTRY" MODIFY ("OBJECT_TYPE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_REGISTRY" MODIFY ("OBJECT_NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_REGISTRY" ADD CONSTRAINT "MD_REGISTRY_PK" PRIMARY KEY ("OBJECT_TYPE", "OBJECT_NAME")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_REGISTRY.sql
PROMPT


-- ============================================================================
-- Deploy: MD_REPOVERSIONS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_REPOVERSIONS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_REPOVERSIONS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_REPOVERSIONS" MODIFY ("REVISION" NOT NULL ENABLE);


PROMPT Completed MD_REPOVERSIONS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_SCHEMAS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_SCHEMAS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_SCHEMAS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_SCHEMAS" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_SCHEMAS" MODIFY ("CATALOG_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_SCHEMAS" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_SCHEMAS" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_SCHEMAS" ADD CONSTRAINT "MD_SCHEMAS_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_SCHEMAS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_SEQUENCES.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_SEQUENCES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_SEQUENCES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_SEQUENCES" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_SEQUENCES" MODIFY ("SCHEMA_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_SEQUENCES" MODIFY ("NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_SEQUENCES" MODIFY ("SEQ_START" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_SEQUENCES" MODIFY ("INCR" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_SEQUENCES" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_SEQUENCES" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_SEQUENCES" MODIFY ("CREATED_BY" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_SEQUENCES" ADD CONSTRAINT "MD_SEQUENCES_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_SEQUENCES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_STORED_PROGRAMS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_STORED_PROGRAMS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_STORED_PROGRAMS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_STORED_PROGRAMS" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_STORED_PROGRAMS" MODIFY ("SCHEMA_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_STORED_PROGRAMS" MODIFY ("LANGUAGE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_STORED_PROGRAMS" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_STORED_PROGRAMS" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_STORED_PROGRAMS" ADD CONSTRAINT "MD_STORED_PROGRAMS_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_STORED_PROGRAMS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_SYNONYMS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_SYNONYMS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_SYNONYMS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_SYNONYMS" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_SYNONYMS" MODIFY ("SCHEMA_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_SYNONYMS" MODIFY ("NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_SYNONYMS" MODIFY ("SYNONYM_FOR_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_SYNONYMS" MODIFY ("FOR_OBJECT_TYPE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_SYNONYMS" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_SYNONYMS" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_SYNONYMS" ADD CONSTRAINT "MD_SYNONYMS_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_SYNONYMS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_TABLES.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_TABLES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_TABLES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_TABLES" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_TABLES" MODIFY ("SCHEMA_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_TABLES" MODIFY ("TABLE_NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_TABLES" MODIFY ("QUALIFIED_NATIVE_NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_TABLES" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_TABLES" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_TABLES" ADD CONSTRAINT "MD_TABLES_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_TABLES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_TABLESPACES.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_TABLESPACES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_TABLESPACES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_TABLESPACES" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_TABLESPACES" MODIFY ("SCHEMA_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_TABLESPACES" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_TABLESPACES" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_TABLESPACES" ADD CONSTRAINT "MD_TABLESPACES_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_TABLESPACES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_TARGET_ALL_ERRORS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_TARGET_ALL_ERRORS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_TARGET_ALL_ERRORS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_TARGET_ALL_ERRORS" MODIFY ("OWNER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_TARGET_ALL_ERRORS" MODIFY ("NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_TARGET_ALL_ERRORS" MODIFY ("SEQUENCE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_TARGET_ALL_ERRORS" MODIFY ("LINE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_TARGET_ALL_ERRORS" MODIFY ("POSITION" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_TARGET_ALL_ERRORS" MODIFY ("TEXT" NOT NULL ENABLE);


PROMPT Completed MD_TARGET_ALL_ERRORS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_TARGET_ALL_OBJECTS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_TARGET_ALL_OBJECTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_TARGET_ALL_OBJECTS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_TARGET_ALL_OBJECTS" MODIFY ("OBJECT_NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_TARGET_ALL_OBJECTS" MODIFY ("OWNER" NOT NULL ENABLE);


PROMPT Completed MD_TARGET_ALL_OBJECTS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_TRIGGERS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_TRIGGERS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_TRIGGERS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_TRIGGERS" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_TRIGGERS" MODIFY ("TABLE_OR_VIEW_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_TRIGGERS" MODIFY ("TRIGGER_ON_FLAG" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_TRIGGERS" MODIFY ("LANGUAGE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_TRIGGERS" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_TRIGGERS" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_TRIGGERS" ADD CONSTRAINT "MD_TRIGGERS_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_TRIGGERS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_USERS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_USERS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_USERS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_USERS" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_USERS" MODIFY ("SCHEMA_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_USERS" MODIFY ("USERNAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_USERS" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_USERS" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_USERS" ADD CONSTRAINT "MD_USERS_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_USERS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_USER_DEFINED_DATA_TYPES.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_USER_DEFINED_DATA_TYPES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_USER_DEFINED_DATA_TYPES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_USER_DEFINED_DATA_TYPES" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_USER_DEFINED_DATA_TYPES" MODIFY ("SCHEMA_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_USER_DEFINED_DATA_TYPES" MODIFY ("DATA_TYPE_NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_USER_DEFINED_DATA_TYPES" MODIFY ("DEFINITION" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_USER_DEFINED_DATA_TYPES" MODIFY ("NATIVE_SQL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_USER_DEFINED_DATA_TYPES" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_USER_DEFINED_DATA_TYPES" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_USER_DEFINED_DATA_TYPES" ADD CONSTRAINT "MD_USER_DEFINED_DATA_TYPES_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_USER_DEFINED_DATA_TYPES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_USER_PRIVILEGES.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_USER_PRIVILEGES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_USER_PRIVILEGES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_USER_PRIVILEGES" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_USER_PRIVILEGES" MODIFY ("USER_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_USER_PRIVILEGES" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_USER_PRIVILEGES" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_USER_PRIVILEGES" ADD CONSTRAINT "MD_USER_PRIVILEGES_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_USER_PRIVILEGES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_VIEWS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MD_VIEWS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MD_VIEWS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_VIEWS" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_VIEWS" MODIFY ("SCHEMA_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_VIEWS" MODIFY ("LANGUAGE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_VIEWS" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_VIEWS" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MD_VIEWS" ADD CONSTRAINT "MD_VIEWS_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MD_VIEWS.sql
PROMPT


-- ============================================================================
-- Deploy: MIGRATION_RESERVED_WORDS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MIGRATION_RESERVED_WORDS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MIGRATION_RESERVED_WORDS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MIGRATION_RESERVED_WORDS" MODIFY ("KEYWORD" NOT NULL ENABLE);


PROMPT Completed MIGRATION_RESERVED_WORDS.sql
PROMPT


-- ============================================================================
-- Deploy: MIGRLOG.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MIGRLOG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MIGRLOG
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MIGRLOG" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MIGRLOG" MODIFY ("LOG_DATE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MIGRLOG" MODIFY ("SEVERITY" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MIGRLOG" ADD CONSTRAINT "MIGRLOG_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MIGRLOG.sql
PROMPT


-- ============================================================================
-- Deploy: MIGR_DATATYPE_TRANSFORM_MAP.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MIGR_DATATYPE_TRANSFORM_MAP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MIGR_DATATYPE_TRANSFORM_MAP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MIGR_DATATYPE_TRANSFORM_MAP" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MIGR_DATATYPE_TRANSFORM_MAP" MODIFY ("PROJECT_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MIGR_DATATYPE_TRANSFORM_MAP" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MIGR_DATATYPE_TRANSFORM_MAP" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MIGR_DATATYPE_TRANSFORM_MAP" ADD CONSTRAINT "MIGR_DATATYPE_TRANSFORM_M_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MIGR_DATATYPE_TRANSFORM_MAP.sql
PROMPT


-- ============================================================================
-- Deploy: MIGR_DATATYPE_TRANSFORM_RULE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MIGR_DATATYPE_TRANSFORM_RULE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MIGR_DATATYPE_TRANSFORM_RULE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MIGR_DATATYPE_TRANSFORM_RULE" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MIGR_DATATYPE_TRANSFORM_RULE" MODIFY ("MAP_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MIGR_DATATYPE_TRANSFORM_RULE" MODIFY ("SOURCE_DATA_TYPE_NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MIGR_DATATYPE_TRANSFORM_RULE" MODIFY ("TARGET_DATA_TYPE_NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MIGR_DATATYPE_TRANSFORM_RULE" MODIFY ("SECURITY_GROUP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MIGR_DATATYPE_TRANSFORM_RULE" MODIFY ("CREATED_ON" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MIGR_DATATYPE_TRANSFORM_RULE" ADD CONSTRAINT "MIGR_DATATYPE_TRANSFORM_R_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MIGR_DATATYPE_TRANSFORM_RULE.sql
PROMPT


-- ============================================================================
-- Deploy: MIGR_GENERATION_ORDER.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying MIGR_GENERATION_ORDER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table MIGR_GENERATION_ORDER
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MIGR_GENERATION_ORDER" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MIGR_GENERATION_ORDER" MODIFY ("CONNECTION_ID_FK" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MIGR_GENERATION_ORDER" MODIFY ("OBJECT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MIGR_GENERATION_ORDER" MODIFY ("OBJECT_TYPE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MIGR_GENERATION_ORDER" MODIFY ("GENERATION_ORDER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."MIGR_GENERATION_ORDER" ADD CONSTRAINT "MIGR_GENERATION_ORDER_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;
  ALTER TABLE "DB_JT"."MIGR_GENERATION_ORDER" ADD CONSTRAINT "MIGR_GENERATION_ORDER_UK" UNIQUE ("OBJECT_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed MIGR_GENERATION_ORDER.sql
PROMPT


-- ============================================================================
-- Deploy: PERMISSION.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying PERMISSION.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table PERMISSION
--------------------------------------------------------

  ALTER TABLE "DB_JT"."PERMISSION" MODIFY ("PERMISSION_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."PERMISSION" ADD CONSTRAINT "PK_PERMISSION" PRIMARY KEY ("PERMISSION_ID")
  USING INDEX "DB_JT"."PK_PERMISSION"  ENABLE;


PROMPT Completed PERMISSION.sql
PROMPT


-- ============================================================================
-- Deploy: QVR_KP_DOKLADDETAIL_DSLR_CTRL.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying QVR_KP_DOKLADDETAIL_DSLR_CTRL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table QVR_KP_DOKLADDETAIL_DSLR_CTRL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."QVR_KP_DOKLADDETAIL_DSLR_CTRL" MODIFY ("ICO_SPOL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."QVR_KP_DOKLADDETAIL_DSLR_CTRL" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."QVR_KP_DOKLADDETAIL_DSLR_CTRL" MODIFY ("S_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."QVR_KP_DOKLADDETAIL_DSLR_CTRL" MODIFY ("S_MENAUCSPOL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."QVR_KP_DOKLADDETAIL_DSLR_CTRL" MODIFY ("DT_DATUM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."QVR_KP_DOKLADDETAIL_DSLR_CTRL" MODIFY ("ID_UCETNISPOLECNOST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."QVR_KP_DOKLADDETAIL_DSLR_CTRL" MODIFY ("S_LOCALE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."QVR_KP_DOKLADDETAIL_DSLR_CTRL" MODIFY ("ID_CISSUBJECT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."QVR_KP_DOKLADDETAIL_DSLR_CTRL" MODIFY ("S_UCET" NOT NULL ENABLE);


PROMPT Completed QVR_KP_DOKLADDETAIL_DSLR_CTRL.sql
PROMPT


-- ============================================================================
-- Deploy: QV_CONTROLLING_DATA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying QV_CONTROLLING_DATA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table QV_CONTROLLING_DATA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."QV_CONTROLLING_DATA" MODIFY ("PERIOD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."QV_CONTROLLING_DATA" MODIFY ("ARCHIVE" NOT NULL ENABLE);


PROMPT Completed QV_CONTROLLING_DATA.sql
PROMPT


-- ============================================================================
-- Deploy: ROLE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying ROLE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table ROLE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."ROLE" MODIFY ("ROLE_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."ROLE" MODIFY ("ROLE_NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."ROLE" ADD CONSTRAINT "PK_ROLE" PRIMARY KEY ("ROLE_ID")
  USING INDEX "DB_JT"."PK_ROLE"  ENABLE;


PROMPT Completed ROLE.sql
PROMPT


-- ============================================================================
-- Deploy: ROLE_PERMISSION.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying ROLE_PERMISSION.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table ROLE_PERMISSION
--------------------------------------------------------

  ALTER TABLE "DB_JT"."ROLE_PERMISSION" MODIFY ("ROLE_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."ROLE_PERMISSION" MODIFY ("PERMISSION_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."ROLE_PERMISSION" ADD CONSTRAINT "PK_ROLE_PERMISSION" PRIMARY KEY ("ROLE_ID", "PERMISSION_ID")
  USING INDEX "DB_JT"."PK_ROLE_PERMISSION"  ENABLE;


PROMPT Completed ROLE_PERMISSION.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_CHECK_CONSTRAINTS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying SS2K5_CHECK_CONSTRAINTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table SS2K5_CHECK_CONSTRAINTS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."SS2K5_CHECK_CONSTRAINTS" MODIFY ("OBJECT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_CHECK_CONSTRAINTS" MODIFY ("PARENT_COLUMN_ID" NOT NULL ENABLE);


PROMPT Completed SS2K5_CHECK_CONSTRAINTS.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_COLUMNS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying SS2K5_COLUMNS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table SS2K5_COLUMNS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."SS2K5_COLUMNS" MODIFY ("RULE_OBJECT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_COLUMNS" MODIFY ("COLUMN_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_COLUMNS" MODIFY ("MAX_LENGTH" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_COLUMNS" MODIFY ("PRECISION" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_COLUMNS" MODIFY ("SCALE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_COLUMNS" MODIFY ("USER_TYPE_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_COLUMNS" MODIFY ("SYSTEM_TYPE_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_COLUMNS" MODIFY ("DEFAULT_OBJECT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_COLUMNS" MODIFY ("OBJECT_ID" NOT NULL ENABLE);


PROMPT Completed SS2K5_COLUMNS.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_DATABASES.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying SS2K5_DATABASES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table SS2K5_DATABASES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."SS2K5_DATABASES" MODIFY ("NAME" NOT NULL ENABLE);


PROMPT Completed SS2K5_DATABASES.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_DATABASE_PRINCIPALS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying SS2K5_DATABASE_PRINCIPALS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table SS2K5_DATABASE_PRINCIPALS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."SS2K5_DATABASE_PRINCIPALS" MODIFY ("TYPE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_DATABASE_PRINCIPALS" MODIFY ("PRINCIPAL_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_DATABASE_PRINCIPALS" MODIFY ("NAME" NOT NULL ENABLE);


PROMPT Completed SS2K5_DATABASE_PRINCIPALS.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_DATABASE_ROLE_MEMBERS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying SS2K5_DATABASE_ROLE_MEMBERS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table SS2K5_DATABASE_ROLE_MEMBERS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."SS2K5_DATABASE_ROLE_MEMBERS" MODIFY ("MEMBER_PRINCIPAL_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_DATABASE_ROLE_MEMBERS" MODIFY ("ROLE_PRINCIPAL_ID" NOT NULL ENABLE);


PROMPT Completed SS2K5_DATABASE_ROLE_MEMBERS.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_DEFAULT_CONSTRAINTS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying SS2K5_DEFAULT_CONSTRAINTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table SS2K5_DEFAULT_CONSTRAINTS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."SS2K5_DEFAULT_CONSTRAINTS" MODIFY ("OBJECT_ID" NOT NULL ENABLE);


PROMPT Completed SS2K5_DEFAULT_CONSTRAINTS.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_FOREIGN_KEYS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying SS2K5_FOREIGN_KEYS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table SS2K5_FOREIGN_KEYS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."SS2K5_FOREIGN_KEYS" MODIFY ("NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_FOREIGN_KEYS" MODIFY ("OBJECT_ID" NOT NULL ENABLE);


PROMPT Completed SS2K5_FOREIGN_KEYS.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_FOREIGN_KEY_COLUMNS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying SS2K5_FOREIGN_KEY_COLUMNS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table SS2K5_FOREIGN_KEY_COLUMNS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."SS2K5_FOREIGN_KEY_COLUMNS" MODIFY ("CONSTRAINT_COLUMN_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_FOREIGN_KEY_COLUMNS" MODIFY ("CONSTRAINT_OBJECT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_FOREIGN_KEY_COLUMNS" MODIFY ("PARENT_OBJECT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_FOREIGN_KEY_COLUMNS" MODIFY ("PARENT_COLUMN_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_FOREIGN_KEY_COLUMNS" MODIFY ("REFERENCED_COLUMN_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_FOREIGN_KEY_COLUMNS" MODIFY ("REFERENCED_OBJECT_ID" NOT NULL ENABLE);


PROMPT Completed SS2K5_FOREIGN_KEY_COLUMNS.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_IDENTITY_COLUMNS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying SS2K5_IDENTITY_COLUMNS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table SS2K5_IDENTITY_COLUMNS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."SS2K5_IDENTITY_COLUMNS" MODIFY ("OBJECT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_IDENTITY_COLUMNS" MODIFY ("COLUMN_ID" NOT NULL ENABLE);


PROMPT Completed SS2K5_IDENTITY_COLUMNS.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_INDEXES.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying SS2K5_INDEXES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table SS2K5_INDEXES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."SS2K5_INDEXES" MODIFY ("OBJECT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_INDEXES" MODIFY ("INDEX_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_INDEXES" MODIFY ("NAME" NOT NULL ENABLE);


PROMPT Completed SS2K5_INDEXES.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_INDEX_COLUMNS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying SS2K5_INDEX_COLUMNS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table SS2K5_INDEX_COLUMNS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."SS2K5_INDEX_COLUMNS" MODIFY ("INDEX_COLUMN_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_INDEX_COLUMNS" MODIFY ("OBJECT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_INDEX_COLUMNS" MODIFY ("INDEX_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_INDEX_COLUMNS" MODIFY ("COLUMN_ID" NOT NULL ENABLE);


PROMPT Completed SS2K5_INDEX_COLUMNS.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_OBJECTS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying SS2K5_OBJECTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table SS2K5_OBJECTS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."SS2K5_OBJECTS" MODIFY ("SCHEMA_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_OBJECTS" MODIFY ("OBJECT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_OBJECTS" MODIFY ("NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_OBJECTS" MODIFY ("TYPE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_OBJECTS" MODIFY ("PARENT_OBJECT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_OBJECTS" MODIFY ("IS_MS_SHIPPED" NOT NULL ENABLE);


PROMPT Completed SS2K5_OBJECTS.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_SCHEMAS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying SS2K5_SCHEMAS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table SS2K5_SCHEMAS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."SS2K5_SCHEMAS" MODIFY ("SCHEMA_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_SCHEMAS" MODIFY ("NAME" NOT NULL ENABLE);


PROMPT Completed SS2K5_SCHEMAS.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_SCHEMATA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying SS2K5_SCHEMATA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table SS2K5_SCHEMATA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."SS2K5_SCHEMATA" MODIFY ("SCHEMA_OWNER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_SCHEMATA" MODIFY ("SCHEMA_NAME" NOT NULL ENABLE);


PROMPT Completed SS2K5_SCHEMATA.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_SERVER_PRINCIPALS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying SS2K5_SERVER_PRINCIPALS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table SS2K5_SERVER_PRINCIPALS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."SS2K5_SERVER_PRINCIPALS" MODIFY ("NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_SERVER_PRINCIPALS" MODIFY ("TYPE" NOT NULL ENABLE);


PROMPT Completed SS2K5_SERVER_PRINCIPALS.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_SQL_MODULES.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying SS2K5_SQL_MODULES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table SS2K5_SQL_MODULES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."SS2K5_SQL_MODULES" MODIFY ("OBJECT_ID" NOT NULL ENABLE);


PROMPT Completed SS2K5_SQL_MODULES.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_SYSPROPERTIES.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying SS2K5_SYSPROPERTIES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table SS2K5_SYSPROPERTIES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."SS2K5_SYSPROPERTIES" MODIFY ("MAJOR_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_SYSPROPERTIES" MODIFY ("MINOR_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_SYSPROPERTIES" MODIFY ("NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_SYSPROPERTIES" MODIFY ("VALUE" NOT NULL ENABLE);


PROMPT Completed SS2K5_SYSPROPERTIES.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_TABLES.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying SS2K5_TABLES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table SS2K5_TABLES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."SS2K5_TABLES" MODIFY ("NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_TABLES" MODIFY ("OBJECT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_TABLES" MODIFY ("SCHEMA_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_TABLES" MODIFY ("TYPE" NOT NULL ENABLE);


PROMPT Completed SS2K5_TABLES.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_TABLE_PRIVILEGES.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying SS2K5_TABLE_PRIVILEGES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table SS2K5_TABLE_PRIVILEGES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."SS2K5_TABLE_PRIVILEGES" MODIFY ("TABLE_NAME" NOT NULL ENABLE);


PROMPT Completed SS2K5_TABLE_PRIVILEGES.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5_TYPES.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying SS2K5_TYPES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table SS2K5_TYPES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."SS2K5_TYPES" MODIFY ("NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_TYPES" MODIFY ("USER_TYPE_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."SS2K5_TYPES" MODIFY ("SYSTEM_TYPE_ID" NOT NULL ENABLE);


PROMPT Completed SS2K5_TYPES.sql
PROMPT


-- ============================================================================
-- Deploy: SSRS_UA_RKC.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying SSRS_UA_RKC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table SSRS_UA_RKC
--------------------------------------------------------

  ALTER TABLE "DB_JT"."SSRS_UA_RKC" ADD CONSTRAINT "PK_SSRS_UA_RKC" PRIMARY KEY ("PK_ID", "DT_BUSINESS_DATE")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS  ENABLE;


PROMPT Completed SSRS_UA_RKC.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_MIGRLOG.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying STAGE_MIGRLOG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table STAGE_MIGRLOG
--------------------------------------------------------

  ALTER TABLE "DB_JT"."STAGE_MIGRLOG" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_MIGRLOG" MODIFY ("LOG_DATE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_MIGRLOG" MODIFY ("SEVERITY" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_MIGRLOG" ADD CONSTRAINT "STAGE_MIGRLOG_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE USERS  ENABLE;


PROMPT Completed STAGE_MIGRLOG.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_CHECK_CONSTRAINTS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_CHECK_CONSTRAINTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table STAGE_SS2K5_CHECK_CONSTRAINTS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."STAGE_SS2K5_CHECK_CONSTRAINTS" MODIFY ("OBJECT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_CHECK_CONSTRAINTS" MODIFY ("PARENT_COLUMN_ID" NOT NULL ENABLE);


PROMPT Completed STAGE_SS2K5_CHECK_CONSTRAINTS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_COLUMNS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_COLUMNS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table STAGE_SS2K5_COLUMNS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."STAGE_SS2K5_COLUMNS" MODIFY ("RULE_OBJECT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_COLUMNS" MODIFY ("COLUMN_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_COLUMNS" MODIFY ("MAX_LENGTH" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_COLUMNS" MODIFY ("PRECISION" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_COLUMNS" MODIFY ("SCALE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_COLUMNS" MODIFY ("USER_TYPE_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_COLUMNS" MODIFY ("SYSTEM_TYPE_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_COLUMNS" MODIFY ("DEFAULT_OBJECT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_COLUMNS" MODIFY ("OBJECT_ID" NOT NULL ENABLE);


PROMPT Completed STAGE_SS2K5_COLUMNS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_DATABASES.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_DATABASES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table STAGE_SS2K5_DATABASES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."STAGE_SS2K5_DATABASES" MODIFY ("NAME" NOT NULL ENABLE);


PROMPT Completed STAGE_SS2K5_DATABASES.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_DB_PRINCIPALS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_DB_PRINCIPALS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table STAGE_SS2K5_DB_PRINCIPALS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."STAGE_SS2K5_DB_PRINCIPALS" MODIFY ("TYPE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_DB_PRINCIPALS" MODIFY ("PRINCIPAL_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_DB_PRINCIPALS" MODIFY ("NAME" NOT NULL ENABLE);


PROMPT Completed STAGE_SS2K5_DB_PRINCIPALS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_DB_ROLE_MEMBERS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_DB_ROLE_MEMBERS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table STAGE_SS2K5_DB_ROLE_MEMBERS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."STAGE_SS2K5_DB_ROLE_MEMBERS" MODIFY ("MEMBER_PRINCIPAL_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_DB_ROLE_MEMBERS" MODIFY ("ROLE_PRINCIPAL_ID" NOT NULL ENABLE);


PROMPT Completed STAGE_SS2K5_DB_ROLE_MEMBERS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_DT_CONSTRAINTS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_DT_CONSTRAINTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table STAGE_SS2K5_DT_CONSTRAINTS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."STAGE_SS2K5_DT_CONSTRAINTS" MODIFY ("OBJECT_ID" NOT NULL ENABLE);


PROMPT Completed STAGE_SS2K5_DT_CONSTRAINTS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_FN_KEYS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_FN_KEYS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table STAGE_SS2K5_FN_KEYS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."STAGE_SS2K5_FN_KEYS" MODIFY ("NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_FN_KEYS" MODIFY ("OBJECT_ID" NOT NULL ENABLE);


PROMPT Completed STAGE_SS2K5_FN_KEYS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_FN_KEY_COLUMNS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_FN_KEY_COLUMNS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table STAGE_SS2K5_FN_KEY_COLUMNS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."STAGE_SS2K5_FN_KEY_COLUMNS" MODIFY ("CONSTRAINT_COLUMN_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_FN_KEY_COLUMNS" MODIFY ("CONSTRAINT_OBJECT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_FN_KEY_COLUMNS" MODIFY ("PARENT_OBJECT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_FN_KEY_COLUMNS" MODIFY ("PARENT_COLUMN_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_FN_KEY_COLUMNS" MODIFY ("REFERENCED_COLUMN_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_FN_KEY_COLUMNS" MODIFY ("REFERENCED_OBJECT_ID" NOT NULL ENABLE);


PROMPT Completed STAGE_SS2K5_FN_KEY_COLUMNS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_IDENTITY_COLUMNS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_IDENTITY_COLUMNS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table STAGE_SS2K5_IDENTITY_COLUMNS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."STAGE_SS2K5_IDENTITY_COLUMNS" MODIFY ("OBJECT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_IDENTITY_COLUMNS" MODIFY ("COLUMN_ID" NOT NULL ENABLE);


PROMPT Completed STAGE_SS2K5_IDENTITY_COLUMNS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_INDEXES.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_INDEXES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table STAGE_SS2K5_INDEXES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."STAGE_SS2K5_INDEXES" MODIFY ("OBJECT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_INDEXES" MODIFY ("INDEX_ID" NOT NULL ENABLE);


PROMPT Completed STAGE_SS2K5_INDEXES.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_INDEX_COLUMNS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_INDEX_COLUMNS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table STAGE_SS2K5_INDEX_COLUMNS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."STAGE_SS2K5_INDEX_COLUMNS" MODIFY ("INDEX_COLUMN_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_INDEX_COLUMNS" MODIFY ("OBJECT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_INDEX_COLUMNS" MODIFY ("INDEX_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_INDEX_COLUMNS" MODIFY ("COLUMN_ID" NOT NULL ENABLE);


PROMPT Completed STAGE_SS2K5_INDEX_COLUMNS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_OBJECTS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_OBJECTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table STAGE_SS2K5_OBJECTS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."STAGE_SS2K5_OBJECTS" MODIFY ("SCHEMA_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_OBJECTS" MODIFY ("OBJECT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_OBJECTS" MODIFY ("NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_OBJECTS" MODIFY ("TYPE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_OBJECTS" MODIFY ("PARENT_OBJECT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_OBJECTS" MODIFY ("IS_MS_SHIPPED" NOT NULL ENABLE);


PROMPT Completed STAGE_SS2K5_OBJECTS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_SCHEMAS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_SCHEMAS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table STAGE_SS2K5_SCHEMAS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."STAGE_SS2K5_SCHEMAS" MODIFY ("SCHEMA_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_SCHEMAS" MODIFY ("NAME" NOT NULL ENABLE);


PROMPT Completed STAGE_SS2K5_SCHEMAS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_SCHEMATA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_SCHEMATA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table STAGE_SS2K5_SCHEMATA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."STAGE_SS2K5_SCHEMATA" MODIFY ("SCHEMA_OWNER" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_SCHEMATA" MODIFY ("SCHEMA_NAME" NOT NULL ENABLE);


PROMPT Completed STAGE_SS2K5_SCHEMATA.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_SERVER_PRINCIPALS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_SERVER_PRINCIPALS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table STAGE_SS2K5_SERVER_PRINCIPALS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."STAGE_SS2K5_SERVER_PRINCIPALS" MODIFY ("NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_SERVER_PRINCIPALS" MODIFY ("TYPE" NOT NULL ENABLE);


PROMPT Completed STAGE_SS2K5_SERVER_PRINCIPALS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_SQL_MODULES.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_SQL_MODULES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table STAGE_SS2K5_SQL_MODULES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."STAGE_SS2K5_SQL_MODULES" MODIFY ("OBJECT_ID" NOT NULL ENABLE);


PROMPT Completed STAGE_SS2K5_SQL_MODULES.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_SYSPROPERTIES.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_SYSPROPERTIES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table STAGE_SS2K5_SYSPROPERTIES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."STAGE_SS2K5_SYSPROPERTIES" MODIFY ("CLASS" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_SYSPROPERTIES" MODIFY ("MAJOR_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_SYSPROPERTIES" MODIFY ("MINOR_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_SYSPROPERTIES" MODIFY ("NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_SYSPROPERTIES" MODIFY ("VALUE" NOT NULL ENABLE);


PROMPT Completed STAGE_SS2K5_SYSPROPERTIES.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_TABLES.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_TABLES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table STAGE_SS2K5_TABLES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."STAGE_SS2K5_TABLES" MODIFY ("NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_TABLES" MODIFY ("OBJECT_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_TABLES" MODIFY ("SCHEMA_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_TABLES" MODIFY ("TYPE" NOT NULL ENABLE);


PROMPT Completed STAGE_SS2K5_TABLES.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_TABLE_PRIVILEGES.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_TABLE_PRIVILEGES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table STAGE_SS2K5_TABLE_PRIVILEGES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."STAGE_SS2K5_TABLE_PRIVILEGES" MODIFY ("TABLE_NAME" NOT NULL ENABLE);


PROMPT Completed STAGE_SS2K5_TABLE_PRIVILEGES.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SS2K5_TYPES.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying STAGE_SS2K5_TYPES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table STAGE_SS2K5_TYPES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."STAGE_SS2K5_TYPES" MODIFY ("NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_TYPES" MODIFY ("USER_TYPE_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."STAGE_SS2K5_TYPES" MODIFY ("SYSTEM_TYPE_ID" NOT NULL ENABLE);


PROMPT Completed STAGE_SS2K5_TYPES.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SYB12_SYSINDEXES.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying STAGE_SYB12_SYSINDEXES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table STAGE_SYB12_SYSINDEXES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."STAGE_SYB12_SYSINDEXES" MODIFY ("INDEX_NAME" NOT NULL ENABLE);


PROMPT Completed STAGE_SYB12_SYSINDEXES.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SYB12_SYSOBJECTS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying STAGE_SYB12_SYSOBJECTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table STAGE_SYB12_SYSOBJECTS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."STAGE_SYB12_SYSOBJECTS" MODIFY ("ID" NOT NULL ENABLE);


PROMPT Completed STAGE_SYB12_SYSOBJECTS.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_SYB12_SYSUSERS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying STAGE_SYB12_SYSUSERS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table STAGE_SYB12_SYSUSERS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."STAGE_SYB12_SYSUSERS" MODIFY ("DB_UID" NOT NULL ENABLE);


PROMPT Completed STAGE_SYB12_SYSUSERS.sql
PROMPT


-- ============================================================================
-- Deploy: SYB12_SYSCONSTRAINTS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying SYB12_SYSCONSTRAINTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table SYB12_SYSCONSTRAINTS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."SYB12_SYSCONSTRAINTS" MODIFY ("CONSTRAINT_NAME" NOT NULL ENABLE);


PROMPT Completed SYB12_SYSCONSTRAINTS.sql
PROMPT


-- ============================================================================
-- Deploy: SYB12_SYSINDEXES.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying SYB12_SYSINDEXES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table SYB12_SYSINDEXES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."SYB12_SYSINDEXES" MODIFY ("INDEX_NAME" NOT NULL ENABLE);


PROMPT Completed SYB12_SYSINDEXES.sql
PROMPT


-- ============================================================================
-- Deploy: SYB12_SYSOBJECTS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying SYB12_SYSOBJECTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table SYB12_SYSOBJECTS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."SYB12_SYSOBJECTS" MODIFY ("ID" NOT NULL ENABLE);


PROMPT Completed SYB12_SYSOBJECTS.sql
PROMPT


-- ============================================================================
-- Deploy: SYB12_SYSUSERS.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying SYB12_SYSUSERS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table SYB12_SYSUSERS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."SYB12_SYSUSERS" MODIFY ("DB_UID" NOT NULL ENABLE);


PROMPT Completed SYB12_SYSUSERS.sql
PROMPT


-- ============================================================================
-- Deploy: TB_KP_DOKLADDETAIL_DSLR.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying TB_KP_DOKLADDETAIL_DSLR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table TB_KP_DOKLADDETAIL_DSLR
--------------------------------------------------------

  ALTER TABLE "DB_JT"."TB_KP_DOKLADDETAIL_DSLR" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."TB_KP_DOKLADDETAIL_DSLR" MODIFY ("S_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."TB_KP_DOKLADDETAIL_DSLR" MODIFY ("S_MENAUCSPOL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."TB_KP_DOKLADDETAIL_DSLR" MODIFY ("DT_DATUM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."TB_KP_DOKLADDETAIL_DSLR" MODIFY ("ID_KTGUCETNISPOLECNOST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."TB_KP_DOKLADDETAIL_DSLR" MODIFY ("S_LOCALE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."TB_KP_DOKLADDETAIL_DSLR" MODIFY ("ID_CISSUBJECT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."TB_KP_DOKLADDETAIL_DSLR" MODIFY ("S_UCET" NOT NULL ENABLE);


PROMPT Completed TB_KP_DOKLADDETAIL_DSLR.sql
PROMPT


-- ============================================================================
-- Deploy: TB_KP_DOKLADDETAIL_DSLR_CZ.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying TB_KP_DOKLADDETAIL_DSLR_CZ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table TB_KP_DOKLADDETAIL_DSLR_CZ
--------------------------------------------------------

  ALTER TABLE "DB_JT"."TB_KP_DOKLADDETAIL_DSLR_CZ" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."TB_KP_DOKLADDETAIL_DSLR_CZ" MODIFY ("S_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."TB_KP_DOKLADDETAIL_DSLR_CZ" MODIFY ("S_MENAUCSPOL" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."TB_KP_DOKLADDETAIL_DSLR_CZ" MODIFY ("DT_DATUM" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."TB_KP_DOKLADDETAIL_DSLR_CZ" MODIFY ("ID_KTGUCETNISPOLECNOST" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."TB_KP_DOKLADDETAIL_DSLR_CZ" MODIFY ("S_LOCALE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."TB_KP_DOKLADDETAIL_DSLR_CZ" MODIFY ("ID_CISSUBJECT" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."TB_KP_DOKLADDETAIL_DSLR_CZ" MODIFY ("S_UCET" NOT NULL ENABLE);


PROMPT Completed TB_KP_DOKLADDETAIL_DSLR_CZ.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_DOKLADAGREGTYPNASTROJ.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying TMP_DOKLADAGREGTYPNASTROJ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table TMP_DOKLADAGREGTYPNASTROJ
--------------------------------------------------------

  ALTER TABLE "DB_JT"."TMP_DOKLADAGREGTYPNASTROJ" MODIFY ("ID" CONSTRAINT "NN_TMPDOKLADAGRTYPNAST_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."TMP_DOKLADAGREGTYPNASTROJ" ADD CONSTRAINT "PK_TMPGRTYPNAST" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_TMPDOKLADAGRTYPNASTROJ"  ENABLE;
  ALTER TABLE "DB_JT"."TMP_DOKLADAGREGTYPNASTROJ" ADD CONSTRAINT "CN_TMPAGRTYPNAST_UROKSAZ" CHECK ( c_typUrokSazba in ( 'F', 'V' ) ) ENABLE;
  ALTER TABLE "DB_JT"."TMP_DOKLADAGREGTYPNASTROJ" ADD CONSTRAINT "CN_TMPAGRTYPNAST_TYPVYKAZ" CHECK ( c_typVykaz is not null and c_typVykaz between '1' and '6' ) ENABLE;
  ALTER TABLE "DB_JT"."TMP_DOKLADAGREGTYPNASTROJ" ADD CONSTRAINT "CN_TMPAGRTYPNAST_TYPPF" CHECK ( c_typPortfolio is not null and c_typPortfolio in ( 'B', 'T' ) ) ENABLE;
  ALTER TABLE "DB_JT"."TMP_DOKLADAGREGTYPNASTROJ" ADD CONSTRAINT "CN_TMPAGRTYPNAST_RESDLUH" CHECK ( c_restruktualizaceDluhu in ( '0', '1' ) ) ENABLE;
  ALTER TABLE "DB_JT"."TMP_DOKLADAGREGTYPNASTROJ" ADD CONSTRAINT "CN_TMPAGRTYPNAST_ODVOLZ" CHECK ( c_odvolatelneZajisteni is not null and c_odvolatelneZajisteni in ( '0', '1' ) ) ENABLE;
  ALTER TABLE "DB_JT"."TMP_DOKLADAGREGTYPNASTROJ" ADD CONSTRAINT "CN_TMPAGRTYPNAST_KOMUCEL" CHECK ( c_komercniUcel is not null and c_komercniUcel in ( '0', '1', '?' ) ) ENABLE;
  ALTER TABLE "DB_JT"."TMP_DOKLADAGREGTYPNASTROJ" ADD CONSTRAINT "CN_TMPAGRTYPNAST_DENOM" CHECK ( c_denominace in ( '0', '1' ) ) ENABLE;


PROMPT Completed TMP_DOKLADAGREGTYPNASTROJ.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_DOKLADNASTROJ.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying TMP_DOKLADNASTROJ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table TMP_DOKLADNASTROJ
--------------------------------------------------------

  ALTER TABLE "DB_JT"."TMP_DOKLADNASTROJ" MODIFY ("ID" CONSTRAINT "NN_TMPDOKLADNAST_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."TMP_DOKLADNASTROJ" ADD CONSTRAINT "PK_TMPDOKLADNASTROJ" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_TMPDOKLADNASTROJ"  ENABLE;
  ALTER TABLE "DB_JT"."TMP_DOKLADNASTROJ" ADD CONSTRAINT "CN_TMPNAST_UROKSAZ" CHECK ( c_typUrokSazba in ( 'F', 'V' ) ) ENABLE;
  ALTER TABLE "DB_JT"."TMP_DOKLADNASTROJ" ADD CONSTRAINT "CN_TMPNAST_TYPVYKAZ" CHECK ( c_typVykaz is not null and c_typVykaz between '1' and '6' ) ENABLE;
  ALTER TABLE "DB_JT"."TMP_DOKLADNASTROJ" ADD CONSTRAINT "CN_TMPNAST_TYPPF" CHECK ( c_typPortfolio is not null and c_typPortfolio in ( 'B', 'T' ) ) ENABLE;
  ALTER TABLE "DB_JT"."TMP_DOKLADNASTROJ" ADD CONSTRAINT "CN_TMPNAST_RESDLUH" CHECK ( c_restruktualizaceDluhu in ( '0', '1' ) ) ENABLE;
  ALTER TABLE "DB_JT"."TMP_DOKLADNASTROJ" ADD CONSTRAINT "CN_TMPNAST_ODVOLZ" CHECK ( c_odvolatelneZajisteni is not null and c_odvolatelneZajisteni in ( '0', '1' ) ) ENABLE;
  ALTER TABLE "DB_JT"."TMP_DOKLADNASTROJ" ADD CONSTRAINT "CN_TMPNAST_KOMUCEL" CHECK ( c_komercniUcel is not null and c_komercniUcel in ( '0', '1', '?' ) ) ENABLE;
  ALTER TABLE "DB_JT"."TMP_DOKLADNASTROJ" ADD CONSTRAINT "CN_TMPNAST_DENOM" CHECK ( c_denominace in ( '0', '1' ) ) ENABLE;


PROMPT Completed TMP_DOKLADNASTROJ.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_DOKLADNASTROJCP.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying TMP_DOKLADNASTROJCP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table TMP_DOKLADNASTROJCP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."TMP_DOKLADNASTROJCP" MODIFY ("ID" CONSTRAINT "NN_TMPDOKLADNASTCP_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."TMP_DOKLADNASTROJCP" ADD CONSTRAINT "PK_TMPDOKLADNASTCP" PRIMARY KEY ("ID")
  USING INDEX "DB_JT"."PK_TMPDOKLADNASTCP"  ENABLE;
  ALTER TABLE "DB_JT"."TMP_DOKLADNASTROJCP" ADD CONSTRAINT "CN_TMPDOKLADNASTROJCP_VYPLRKC" CHECK ( c_vyplaceniRKC in ( '0', '1' ) ) ENABLE;
  ALTER TABLE "DB_JT"."TMP_DOKLADNASTROJCP" ADD CONSTRAINT "CN_TMPDOKLADNASTROJCP_UROKSAZ2" CHECK ( c_typUrokSazba_2 in ( 'F', 'V' ) ) ENABLE;
  ALTER TABLE "DB_JT"."TMP_DOKLADNASTROJCP" ADD CONSTRAINT "CN_TMPDOKLADNASTROJCP_UROKSAZ1" CHECK ( c_typUrokSazba in ( 'F', 'V' ) ) ENABLE;
  ALTER TABLE "DB_JT"."TMP_DOKLADNASTROJCP" ADD CONSTRAINT "CN_TMPDOKLADNASTROJCP_TYPVYK2" CHECK ( c_typVykaz_2 between '1' and '6' ) ENABLE;
  ALTER TABLE "DB_JT"."TMP_DOKLADNASTROJCP" ADD CONSTRAINT "CN_TMPDOKLADNASTROJCP_TYPVYKAZ" CHECK ( c_typVykaz is not null and c_typVykaz between '1' and '6' ) ENABLE;
  ALTER TABLE "DB_JT"."TMP_DOKLADNASTROJCP" ADD CONSTRAINT "CN_TMPDOKLADNASTROJCP_TYPPF" CHECK ( c_typPortfolio is not null and c_typPortfolio in ( 'B', 'T' ) ) ENABLE;
  ALTER TABLE "DB_JT"."TMP_DOKLADNASTROJCP" ADD CONSTRAINT "CN_TMPDOKLADNASTROJCP_RESDLUH" CHECK ( c_restruktualizaceDluhu in ( '0', '1' ) ) ENABLE;
  ALTER TABLE "DB_JT"."TMP_DOKLADNASTROJCP" ADD CONSTRAINT "CN_TMPDOKLADNASTROJCP_PREMIE" CHECK ( c_splacenaPremie in ( '0', '1' ) ) ENABLE;
  ALTER TABLE "DB_JT"."TMP_DOKLADNASTROJCP" ADD CONSTRAINT "CN_TMPDOKLADNASTROJCP_POZICE" CHECK ( c_pozice in ( 'N', 'P' ) ) ENABLE;
  ALTER TABLE "DB_JT"."TMP_DOKLADNASTROJCP" ADD CONSTRAINT "CN_TMPDOKLADNASTROJCP_POTVRZVL" CHECK ( c_potvrzeniVL in ( '0', '1' ) ) ENABLE;
  ALTER TABLE "DB_JT"."TMP_DOKLADNASTROJCP" ADD CONSTRAINT "CN_TMPDOKLADNASTROJCP_DENOM" CHECK ( c_denominace in ( '0', '1' ) ) ENABLE;
  ALTER TABLE "DB_JT"."TMP_DOKLADNASTROJCP" ADD CONSTRAINT "CN_TMPDOKLADNASTROJCP_BURCHOD" CHECK ( c_burzaObchodovatelnost in ( '0', '1' ) ) ENABLE;


PROMPT Completed TMP_DOKLADNASTROJCP.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_DOKLADNASTROJ_CASTKY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying TMP_DOKLADNASTROJ_CASTKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table TMP_DOKLADNASTROJ_CASTKY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."TMP_DOKLADNASTROJ_CASTKY" MODIFY ("ID_TYP" CONSTRAINT "NN_TMPDOKLADNASTCAST_TYP" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."TMP_DOKLADNASTROJ_CASTKY" MODIFY ("C_NOHA" CONSTRAINT "NN_TMPDOKLADNASTCAST_NOHA" NOT NULL ENABLE);


PROMPT Completed TMP_DOKLADNASTROJ_CASTKY.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_ID.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying TMP_ID.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table TMP_ID
--------------------------------------------------------

  ALTER TABLE "DB_JT"."TMP_ID" ADD PRIMARY KEY ("ID") ENABLE;


PROMPT Completed TMP_ID.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_Q_LOAN_CONTRACT.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying TMP_Q_LOAN_CONTRACT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table TMP_Q_LOAN_CONTRACT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."TMP_Q_LOAN_CONTRACT" MODIFY ("FK_PRD_CONTRACT" CONSTRAINT "NN_TMPQLOANCONTRACT_PROD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."TMP_Q_LOAN_CONTRACT" ADD CONSTRAINT "PK_TMP_Q_LOAN_CONTRACT" PRIMARY KEY ("FK_PRD_CONTRACT")
  USING INDEX "DB_JT"."PK_TMP_Q_LOAN_CONTRACT"  ENABLE;


PROMPT Completed TMP_Q_LOAN_CONTRACT.sql
PROMPT


-- ============================================================================
-- Deploy: TMP_SKUPINAVAZBY.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying TMP_SKUPINAVAZBY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table TMP_SKUPINAVAZBY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."TMP_SKUPINAVAZBY" ADD PRIMARY KEY ("ID_KTGUCETNISPOLECNOST") ENABLE;


PROMPT Completed TMP_SKUPINAVAZBY.sql
PROMPT


-- ============================================================================
-- Deploy: TT_ROLE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying TT_ROLE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table TT_ROLE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."TT_ROLE" MODIFY ("ROLE_NAME" NOT NULL ENABLE);


PROMPT Completed TT_ROLE.sql
PROMPT


-- ============================================================================
-- Deploy: TT_SL_BASE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying TT_SL_BASE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table TT_SL_BASE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."TT_SL_BASE" MODIFY ("ID" NOT NULL ENABLE);


PROMPT Completed TT_SL_BASE.sql
PROMPT


-- ============================================================================
-- Deploy: TT_SL_ID.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying TT_SL_ID.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table TT_SL_ID
--------------------------------------------------------

  ALTER TABLE "DB_JT"."TT_SL_ID" MODIFY ("ID" NOT NULL ENABLE);


PROMPT Completed TT_SL_ID.sql
PROMPT


-- ============================================================================
-- Deploy: TT_SL_ID_OSOBA.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying TT_SL_ID_OSOBA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table TT_SL_ID_OSOBA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."TT_SL_ID_OSOBA" MODIFY ("DOC_ID" NOT NULL ENABLE);


PROMPT Completed TT_SL_ID_OSOBA.sql
PROMPT


-- ============================================================================
-- Deploy: TT_USER_ROLE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying TT_USER_ROLE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table TT_USER_ROLE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."TT_USER_ROLE" MODIFY ("ROLE_NAME" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."TT_USER_ROLE" MODIFY ("USERID" NOT NULL ENABLE);


PROMPT Completed TT_USER_ROLE.sql
PROMPT


-- ============================================================================
-- Deploy: USER_ROLE.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying USER_ROLE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table USER_ROLE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."USER_ROLE" MODIFY ("APPLICATION_USER_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."USER_ROLE" MODIFY ("ROLE_ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."USER_ROLE" ADD CONSTRAINT "PK_USER_ROLE" PRIMARY KEY ("APPLICATION_USER_ID", "ROLE_ID")
  USING INDEX "DB_JT"."PK_USER_ROLE"  ENABLE;


PROMPT Completed USER_ROLE.sql
PROMPT


-- ============================================================================
-- Deploy: VABA3_DOKLADUVEROVAPOZICE_P0.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying VABA3_DOKLADUVEROVAPOZICE_P0.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table VABA3_DOKLADUVEROVAPOZICE_P0
--------------------------------------------------------

  ALTER TABLE "DB_JT"."VABA3_DOKLADUVEROVAPOZICE_P0" MODIFY ("S_UNIFPROTI_ICO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VABA3_DOKLADUVEROVAPOZICE_P0" MODIFY ("S_UNIFPROTI" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VABA3_DOKLADUVEROVAPOZICE_P0" MODIFY ("ID_DOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VABA3_DOKLADUVEROVAPOZICE_P0" MODIFY ("S_LOCALE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VABA3_DOKLADUVEROVAPOZICE_P0" MODIFY ("ID_UNIFPROTI" NOT NULL ENABLE);


PROMPT Completed VABA3_DOKLADUVEROVAPOZICE_P0.sql
PROMPT


-- ============================================================================
-- Deploy: VABA3_DOKLADUVEROVAPOZICE_P1.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying VABA3_DOKLADUVEROVAPOZICE_P1.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table VABA3_DOKLADUVEROVAPOZICE_P1
--------------------------------------------------------

  ALTER TABLE "DB_JT"."VABA3_DOKLADUVEROVAPOZICE_P1" MODIFY ("S_UNIFPROTI_ICO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VABA3_DOKLADUVEROVAPOZICE_P1" MODIFY ("S_UNIFPROTI" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VABA3_DOKLADUVEROVAPOZICE_P1" MODIFY ("ID_DOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VABA3_DOKLADUVEROVAPOZICE_P1" MODIFY ("S_LOCALE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VABA3_DOKLADUVEROVAPOZICE_P1" MODIFY ("ID_UNIFPROTI" NOT NULL ENABLE);


PROMPT Completed VABA3_DOKLADUVEROVAPOZICE_P1.sql
PROMPT


-- ============================================================================
-- Deploy: VABA3_DOKLADUVEROVAPOZICE_P2.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying VABA3_DOKLADUVEROVAPOZICE_P2.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table VABA3_DOKLADUVEROVAPOZICE_P2
--------------------------------------------------------

  ALTER TABLE "DB_JT"."VABA3_DOKLADUVEROVAPOZICE_P2" MODIFY ("ID_DOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VABA3_DOKLADUVEROVAPOZICE_P2" MODIFY ("S_LOCALE" NOT NULL ENABLE);


PROMPT Completed VABA3_DOKLADUVEROVAPOZICE_P2.sql
PROMPT


-- ============================================================================
-- Deploy: VABA_DOKLADUVEROVAPOZICE_P0.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying VABA_DOKLADUVEROVAPOZICE_P0.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table VABA_DOKLADUVEROVAPOZICE_P0
--------------------------------------------------------

  ALTER TABLE "DB_JT"."VABA_DOKLADUVEROVAPOZICE_P0" MODIFY ("S_UNIFPROTI_ICO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VABA_DOKLADUVEROVAPOZICE_P0" MODIFY ("S_UNIFPROTI" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VABA_DOKLADUVEROVAPOZICE_P0" MODIFY ("ID_DOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VABA_DOKLADUVEROVAPOZICE_P0" MODIFY ("S_LOCALE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VABA_DOKLADUVEROVAPOZICE_P0" MODIFY ("ID_UNIFPROTI" NOT NULL ENABLE);


PROMPT Completed VABA_DOKLADUVEROVAPOZICE_P0.sql
PROMPT


-- ============================================================================
-- Deploy: VABA_DOKLADUVEROVAPOZICE_P1.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying VABA_DOKLADUVEROVAPOZICE_P1.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table VABA_DOKLADUVEROVAPOZICE_P1
--------------------------------------------------------

  ALTER TABLE "DB_JT"."VABA_DOKLADUVEROVAPOZICE_P1" MODIFY ("S_UNIFPROTI_ICO" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VABA_DOKLADUVEROVAPOZICE_P1" MODIFY ("S_UNIFPROTI" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VABA_DOKLADUVEROVAPOZICE_P1" MODIFY ("ID_DOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VABA_DOKLADUVEROVAPOZICE_P1" MODIFY ("S_LOCALE" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VABA_DOKLADUVEROVAPOZICE_P1" MODIFY ("ID_UNIFPROTI" NOT NULL ENABLE);


PROMPT Completed VABA_DOKLADUVEROVAPOZICE_P1.sql
PROMPT


-- ============================================================================
-- Deploy: VABA_DOKLADUVEROVAPOZICE_P2.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying VABA_DOKLADUVEROVAPOZICE_P2.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table VABA_DOKLADUVEROVAPOZICE_P2
--------------------------------------------------------

  ALTER TABLE "DB_JT"."VABA_DOKLADUVEROVAPOZICE_P2" MODIFY ("ID_DOKLAD" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VABA_DOKLADUVEROVAPOZICE_P2" MODIFY ("S_LOCALE" NOT NULL ENABLE);


PROMPT Completed VABA_DOKLADUVEROVAPOZICE_P2.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKTTRANSAKC_D.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKTTRANSAKC_D.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table VW_DAT_BUDGETPROJEKTTRANSAKC_D
--------------------------------------------------------

  ALTER TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRANSAKC_D" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRANSAKC_D" MODIFY ("S_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRANSAKC_D" MODIFY ("UCSPOL_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRANSAKC_D" MODIFY ("ID_BUDGET" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRANSAKC_D" MODIFY ("ID_CISTYPTRANSAKCE" NOT NULL ENABLE);


PROMPT Completed VW_DAT_BUDGETPROJEKTTRANSAKC_D.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKTTRANSAK_99.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKTTRANSAK_99.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table VW_DAT_BUDGETPROJEKTTRANSAK_99
--------------------------------------------------------

  ALTER TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRANSAK_99" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRANSAK_99" MODIFY ("S_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRANSAK_99" MODIFY ("UCSPOL_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRANSAK_99" MODIFY ("ID_BUDGET" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRANSAK_99" MODIFY ("ID_CISTYPTRANSAKCE" NOT NULL ENABLE);


PROMPT Completed VW_DAT_BUDGETPROJEKTTRANSAK_99.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKTTRANS_0606.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKTTRANS_0606.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table VW_DAT_BUDGETPROJEKTTRANS_0606
--------------------------------------------------------

  ALTER TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRANS_0606" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRANS_0606" MODIFY ("S_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRANS_0606" MODIFY ("UCSPOL_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRANS_0606" MODIFY ("ID_BUDGET" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VW_DAT_BUDGETPROJEKTTRANS_0606" MODIFY ("ID_CISTYPTRANSAKCE" NOT NULL ENABLE);


PROMPT Completed VW_DAT_BUDGETPROJEKTTRANS_0606.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCETEST.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCETEST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table VW_DAT_BUDGETTRANSAKCETEST
--------------------------------------------------------

  ALTER TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCETEST" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCETEST" MODIFY ("S_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCETEST" MODIFY ("UCSPOL_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCETEST" MODIFY ("S_UCET" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCETEST" MODIFY ("ID_BUDGET" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCETEST" MODIFY ("ID_CISTYPTRANSAKCE" NOT NULL ENABLE);


PROMPT Completed VW_DAT_BUDGETTRANSAKCETEST.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_TD.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_TD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table VW_DAT_BUDGETTRANSAKCE_TD
--------------------------------------------------------

  ALTER TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_TD" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_TD" MODIFY ("S_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_TD" MODIFY ("UCSPOL_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_TD" MODIFY ("ID_BUDGET" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_TD" MODIFY ("ID_CISTYPTRANSAKCE" NOT NULL ENABLE);


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_TD.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_TD_1107.sql
-- Category: constraints
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_TD_1107.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Constraints for Table VW_DAT_BUDGETTRANSAKCE_TD_1107
--------------------------------------------------------

  ALTER TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_TD_1107" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_TD_1107" MODIFY ("S_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_TD_1107" MODIFY ("UCSPOL_MENA" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_TD_1107" MODIFY ("ID_BUDGET" NOT NULL ENABLE);
  ALTER TABLE "DB_JT"."VW_DAT_BUDGETTRANSAKCE_TD_1107" MODIFY ("ID_CISTYPTRANSAKCE" NOT NULL ENABLE);


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_TD_1107.sql
PROMPT


-- ============================================================================
-- PHASE: Deploy FOREIGN KEYS (214 files)
-- ============================================================================

PROMPT
PROMPT ============================================================================
PROMPT Deploying FOREIGN KEYS (214 files)
PROMPT ============================================================================
PROMPT


-- ============================================================================
-- Deploy: CIS_BANKA.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying CIS_BANKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table CIS_BANKA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."CIS_BANKA" ADD CONSTRAINT "FK_KPCISBANKA_MENA" FOREIGN KEY ("ID_CISMENA")
	  REFERENCES "DB_JT"."KP_CIS_MENA" ("ID") ENABLE;


PROMPT Completed CIS_BANKA.sql
PROMPT


-- ============================================================================
-- Deploy: DAT_KURZLIST.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying DAT_KURZLIST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table DAT_KURZLIST
--------------------------------------------------------

  ALTER TABLE "DB_JT"."DAT_KURZLIST" ADD CONSTRAINT "FK_KURZLISTA_CISBANKA" FOREIGN KEY ("ID_CISBANKA")
	  REFERENCES "DB_JT"."CIS_BANKA" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."DAT_KURZLIST" ADD CONSTRAINT "FK_KURZLIST_CISMENA" FOREIGN KEY ("ID_CISMENA")
	  REFERENCES "DB_JT"."KP_CIS_MENA" ("ID") ENABLE;


PROMPT Completed DAT_KURZLIST.sql
PROMPT


-- ============================================================================
-- Deploy: DAT_KURZLISTAVG.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying DAT_KURZLISTAVG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table DAT_KURZLISTAVG
--------------------------------------------------------

  ALTER TABLE "DB_JT"."DAT_KURZLISTAVG" ADD CONSTRAINT "FK_KURZLISTAVG_CISBANKA" FOREIGN KEY ("ID_CISBANKA")
	  REFERENCES "DB_JT"."CIS_BANKA" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."DAT_KURZLISTAVG" ADD CONSTRAINT "FK_KURZLISTAVG_CISMENA" FOREIGN KEY ("ID_CISMENA")
	  REFERENCES "DB_JT"."KP_CIS_MENA" ("ID") ENABLE;


PROMPT Completed DAT_KURZLISTAVG.sql
PROMPT


-- ============================================================================
-- Deploy: DW_CIS_ISIT_BUDGET.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying DW_CIS_ISIT_BUDGET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table DW_CIS_ISIT_BUDGET
--------------------------------------------------------

  ALTER TABLE "DB_JT"."DW_CIS_ISIT_BUDGET" ADD CONSTRAINT "FK_BUDGET_ODBOR" FOREIGN KEY ("KIS_ODBOR_ID")
	  REFERENCES "DB_JT"."KP_KTG_ODBOR" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."DW_CIS_ISIT_BUDGET" ADD CONSTRAINT "FK_BUDGET_PROJEKT" FOREIGN KEY ("KIS_PROJEKT_ID")
	  REFERENCES "DB_JT"."KP_KTG_PROJEKT" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."DW_CIS_ISIT_BUDGET" ADD CONSTRAINT "FK_BUDGET_TYP_TRAN_CAPE" FOREIGN KEY ("KIS_TYP_TRAN_CAPEX_OPEX")
	  REFERENCES "DB_JT"."KP_CIS_TYP_TRAN_CAPEX_OPEX" ("C_ID") ENABLE;


PROMPT Completed DW_CIS_ISIT_BUDGET.sql
PROMPT


-- ============================================================================
-- Deploy: FC_CIS_UCETNISPOLECNOST.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying FC_CIS_UCETNISPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table FC_CIS_UCETNISPOLECNOST
--------------------------------------------------------

  ALTER TABLE "DB_JT"."FC_CIS_UCETNISPOLECNOST" ADD CONSTRAINT "FK_NN_FCCISUS_ID" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;


PROMPT Completed FC_CIS_UCETNISPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: FC_N2N_NASTROJCPZAJISTENINAST.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying FC_N2N_NASTROJCPZAJISTENINAST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table FC_N2N_NASTROJCPZAJISTENINAST
--------------------------------------------------------

  ALTER TABLE "DB_JT"."FC_N2N_NASTROJCPZAJISTENINAST" ADD CONSTRAINT "FK_KPN2NNASTROJCPZAJNAST_NAS" FOREIGN KEY ("ID_NASTROJ")
	  REFERENCES "DB_JT"."KP_DAT_DOKLADNASTROJCP" ("ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "DB_JT"."FC_N2N_NASTROJCPZAJISTENINAST" ADD CONSTRAINT "FK_KPN2NNASTROJCPZAJNAST_ZAJ" FOREIGN KEY ("ID_ZAJISTENI")
	  REFERENCES "DB_JT"."KP_DAT_DOKLADNASTROJ" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed FC_N2N_NASTROJCPZAJISTENINAST.sql
PROMPT


-- ============================================================================
-- Deploy: FC_N2N_NASTROJCPZAJISTNASTCP.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying FC_N2N_NASTROJCPZAJISTNASTCP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table FC_N2N_NASTROJCPZAJISTNASTCP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."FC_N2N_NASTROJCPZAJISTNASTCP" ADD CONSTRAINT "FK_KPN2NNASTROJCPZAJNASTCP_NAS" FOREIGN KEY ("ID_NASTROJ")
	  REFERENCES "DB_JT"."KP_DAT_DOKLADNASTROJCP" ("ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "DB_JT"."FC_N2N_NASTROJCPZAJISTNASTCP" ADD CONSTRAINT "FK_KPN2NNASTROJCPZAJNASTCP_ZAJ" FOREIGN KEY ("ID_ZAJISTENI")
	  REFERENCES "DB_JT"."KP_DAT_DOKLADNASTROJCP" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed FC_N2N_NASTROJCPZAJISTNASTCP.sql
PROMPT


-- ============================================================================
-- Deploy: FC_N2N_NASTROJOPRAVANASTROJ.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying FC_N2N_NASTROJOPRAVANASTROJ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table FC_N2N_NASTROJOPRAVANASTROJ
--------------------------------------------------------

  ALTER TABLE "DB_JT"."FC_N2N_NASTROJOPRAVANASTROJ" ADD CONSTRAINT "FK_KPN2NNASTROJOPRNASTROJ_NAS" FOREIGN KEY ("ID_NASTROJ")
	  REFERENCES "DB_JT"."KP_DAT_DOKLADNASTROJ" ("ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "DB_JT"."FC_N2N_NASTROJOPRAVANASTROJ" ADD CONSTRAINT "FK_KPN2NNASTROJOPRNASTROJ_OPR" FOREIGN KEY ("ID_OPRAVKA")
	  REFERENCES "DB_JT"."KP_DAT_DOKLADNASTROJ" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed FC_N2N_NASTROJOPRAVANASTROJ.sql
PROMPT


-- ============================================================================
-- Deploy: FC_N2N_NASTROJOPRAVANASTROJCP.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying FC_N2N_NASTROJOPRAVANASTROJCP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table FC_N2N_NASTROJOPRAVANASTROJCP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."FC_N2N_NASTROJOPRAVANASTROJCP" ADD CONSTRAINT "FK_KPN2NNASTROJOPRNASTCP_NAS" FOREIGN KEY ("ID_NASTROJ")
	  REFERENCES "DB_JT"."KP_DAT_DOKLADNASTROJ" ("ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "DB_JT"."FC_N2N_NASTROJOPRAVANASTROJCP" ADD CONSTRAINT "FK_KPN2NNASTROJOPRNASTCP_OPR" FOREIGN KEY ("ID_OPRAVKA")
	  REFERENCES "DB_JT"."KP_DAT_DOKLADNASTROJCP" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed FC_N2N_NASTROJOPRAVANASTROJCP.sql
PROMPT


-- ============================================================================
-- Deploy: FC_N2N_NASTROJZAJISTENINAST.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying FC_N2N_NASTROJZAJISTENINAST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table FC_N2N_NASTROJZAJISTENINAST
--------------------------------------------------------

  ALTER TABLE "DB_JT"."FC_N2N_NASTROJZAJISTENINAST" ADD CONSTRAINT "FK_KPN2NNASTROJZAJNAST_NAS" FOREIGN KEY ("ID_NASTROJ")
	  REFERENCES "DB_JT"."KP_DAT_DOKLADNASTROJ" ("ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "DB_JT"."FC_N2N_NASTROJZAJISTENINAST" ADD CONSTRAINT "FK_KPN2NNASTROJZAJNAST_ZAJ" FOREIGN KEY ("ID_ZAJISTENI")
	  REFERENCES "DB_JT"."KP_DAT_DOKLADNASTROJ" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed FC_N2N_NASTROJZAJISTENINAST.sql
PROMPT


-- ============================================================================
-- Deploy: FC_N2N_NASTROJZAJISTENINASTCP.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying FC_N2N_NASTROJZAJISTENINASTCP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table FC_N2N_NASTROJZAJISTENINASTCP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."FC_N2N_NASTROJZAJISTENINASTCP" ADD CONSTRAINT "FK_KPN2NNASTROJZAJNASTCP_NAS" FOREIGN KEY ("ID_NASTROJ")
	  REFERENCES "DB_JT"."KP_DAT_DOKLADNASTROJ" ("ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "DB_JT"."FC_N2N_NASTROJZAJISTENINASTCP" ADD CONSTRAINT "FK_KPN2NNASTROJZAJNASTCP_ZAJ" FOREIGN KEY ("ID_ZAJISTENI")
	  REFERENCES "DB_JT"."KP_DAT_DOKLADNASTROJCP" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed FC_N2N_NASTROJZAJISTENINASTCP.sql
PROMPT


-- ============================================================================
-- Deploy: IMPORT_POZICE_UM.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying IMPORT_POZICE_UM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table IMPORT_POZICE_UM
--------------------------------------------------------

  ALTER TABLE "DB_JT"."IMPORT_POZICE_UM" ADD CONSTRAINT "FK_CREATED_BY" FOREIGN KEY ("ID_USER")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."IMPORT_POZICE_UM" ADD CONSTRAINT "FK_KP_KTG_UCETNISPOLECNOST" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;


PROMPT Completed IMPORT_POZICE_UM.sql
PROMPT


-- ============================================================================
-- Deploy: IMPORT_POZICE_UM_DATA.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying IMPORT_POZICE_UM_DATA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table IMPORT_POZICE_UM_DATA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."IMPORT_POZICE_UM_DATA" ADD CONSTRAINT "FK_SUPPLIER" FOREIGN KEY ("ID_IMPORT")
	  REFERENCES "DB_JT"."IMPORT_POZICE_UM" ("ID_IMP") ENABLE;


PROMPT Completed IMPORT_POZICE_UM_DATA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_BANKAR.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_CIS_BANKAR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_CIS_BANKAR
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_BANKAR" ADD CONSTRAINT "FK_KTG_ODBOR" FOREIGN KEY ("ID_ODBOR")
	  REFERENCES "DB_JT"."KP_KTG_ODBOR" ("ID") ENABLE;


PROMPT Completed KP_CIS_BANKAR.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_CPINDEX.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_CIS_CPINDEX.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_CIS_CPINDEX
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_CPINDEX" ADD CONSTRAINT "FK_KPCISCPINDEX_STAT" FOREIGN KEY ("ID_CISSTAT")
	  REFERENCES "DB_JT"."KP_CIS_STAT" ("ID") ENABLE;


PROMPT Completed KP_CIS_CPINDEX.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_IFRSSUBSEGMENT.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_CIS_IFRSSUBSEGMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_CIS_IFRSSUBSEGMENT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_IFRSSUBSEGMENT" ADD CONSTRAINT "FK_KPCISIFRSSUBSEGMENT_SUBKON" FOREIGN KEY ("ID_KTGSUBKONSOLIDACE")
	  REFERENCES "DB_JT"."KP_KTG_SUBKONSOLIDACE" ("ID_KTGUCETNISPOLECNOST") ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_IFRSSUBSEGMENT" ADD CONSTRAINT "FK_KPCISIFRSSUBSEGMENT_IDSEG" FOREIGN KEY ("ID_IFRSSEGMENT")
	  REFERENCES "DB_JT"."KP_CIS_IFRSSEGMENT" ("ID") DISABLE;


PROMPT Completed KP_CIS_IFRSSUBSEGMENT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ISIT_BUDGET.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_CIS_ISIT_BUDGET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_CIS_ISIT_BUDGET
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_ISIT_BUDGET" ADD CONSTRAINT "FK_IT_BUDGET_ISIT_TYP_POLOZKY" FOREIGN KEY ("ID_TYP_POLOZKY")
	  REFERENCES "DB_JT"."KP_CIS_ISIT_TYP_POLOZKY" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_ISIT_BUDGET" ADD CONSTRAINT "FK_IT_BUDGET_ISIT_DRUH_TRANS" FOREIGN KEY ("ID_DRUH_TRANSAKCE")
	  REFERENCES "DB_JT"."KP_CIS_TYP_TRAN_CAPEX_OPEX" ("C_ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_ISIT_BUDGET" ADD CONSTRAINT "FK_IT_BUDGET_KTG_PROJEKT" FOREIGN KEY ("ID_KTG_PROJEKT")
	  REFERENCES "DB_JT"."KP_KTG_PROJEKT" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_ISIT_BUDGET" ADD CONSTRAINT "FK_IT_BUDGET_KTG_ODBOR" FOREIGN KEY ("ID_KTG_ODBOR")
	  REFERENCES "DB_JT"."KP_KTG_ODBOR" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_ISIT_BUDGET" ADD CONSTRAINT "FK_IT_BUDGET_ISIT_APLIKACE" FOREIGN KEY ("ID_ISIT_APLIKACE")
	  REFERENCES "DB_JT"."KP_CIS_ISIT_APLIKACE" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_ISIT_BUDGET" ADD CONSTRAINT "FK_IT_BUDGET_ISIT_DRUH_NAKLADU" FOREIGN KEY ("ID_ISIT_DRUH_NAKLADU")
	  REFERENCES "DB_JT"."KP_CIS_ISIT_DRUH_NAKLADU" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_ISIT_BUDGET" ADD CONSTRAINT "FK_IT_BUDGET_UCETNI_SPOL" FOREIGN KEY ("ID_KTG_UCETNISPOL")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_CIS_ISIT_BUDGET.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_KATEGORIEPROTISTRAN.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_CIS_KATEGORIEPROTISTRAN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_CIS_KATEGORIEPROTISTRAN
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_KATEGORIEPROTISTRAN" ADD CONSTRAINT "FK_KPCISKATPROTISTRAN_IDSPOL" FOREIGN KEY ("ID_SPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_SPOLECNOST" ("ID") ENABLE NOVALIDATE;


PROMPT Completed KP_CIS_KATEGORIEPROTISTRAN.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_MISUCTYMDD.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_CIS_MISUCTYMDD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_CIS_MISUCTYMDD
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_MISUCTYMDD" ADD CONSTRAINT "FK_MISUCTYMDD_TT" FOREIGN KEY ("ID_TYPTRANSAKCE")
	  REFERENCES "DB_JT"."KP_CIS_TYPTRANSAKCE" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_MISUCTYMDD" ADD CONSTRAINT "FK_MISUCTYMDD_SUBJECT" FOREIGN KEY ("ID_CISSUBJECT")
	  REFERENCES "DB_JT"."KP_CIS_SUBJECT" ("ID") ENABLE;


PROMPT Completed KP_CIS_MISUCTYMDD.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ODBOR_SKUPINA.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_CIS_ODBOR_SKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_CIS_ODBOR_SKUPINA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_ODBOR_SKUPINA" ADD CONSTRAINT "FK_ODBOR_SKUPINA_USER" FOREIGN KEY ("ID_USER")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;


PROMPT Completed KP_CIS_ODBOR_SKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_ODBOR_ZARADENIE.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_CIS_ODBOR_ZARADENIE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_CIS_ODBOR_ZARADENIE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_ODBOR_ZARADENIE" ADD CONSTRAINT "FK_ODBOR_ZARADENIE_USER" FOREIGN KEY ("ID_USER")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;


PROMPT Completed KP_CIS_ODBOR_ZARADENIE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_PROJEKT_SKUPINA.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_CIS_PROJEKT_SKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_CIS_PROJEKT_SKUPINA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_PROJEKT_SKUPINA" ADD CONSTRAINT "FK_PROJEKT_SKUPINA_USER" FOREIGN KEY ("ID_USER")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;


PROMPT Completed KP_CIS_PROJEKT_SKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_PROJEKT_TYPY_TRAN.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_CIS_PROJEKT_TYPY_TRAN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_CIS_PROJEKT_TYPY_TRAN
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_PROJEKT_TYPY_TRAN" ADD CONSTRAINT "FK_PROJEKT_TT_USER" FOREIGN KEY ("ID_USER")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;


PROMPT Completed KP_CIS_PROJEKT_TYPY_TRAN.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_RADEKTEXTLANG.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_CIS_RADEKTEXTLANG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_CIS_RADEKTEXTLANG
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_RADEKTEXTLANG" ADD CONSTRAINT "FK_KPRADEKTEXTLANG_LOCALE" FOREIGN KEY ("S_LOCALE")
	  REFERENCES "DB_JT"."CIS_LOCALE" ("S_LOCALE") ENABLE;


PROMPT Completed KP_CIS_RADEKTEXTLANG.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_SPOLECNOSTKATEGORIE.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_CIS_SPOLECNOSTKATEGORIE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_CIS_SPOLECNOSTKATEGORIE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_SPOLECNOSTKATEGORIE" ADD CONSTRAINT "FK_KPCISSPOLKATEG_LOCALE" FOREIGN KEY ("S_LOCALE")
	  REFERENCES "DB_JT"."CIS_LOCALE" ("S_LOCALE") ENABLE;


PROMPT Completed KP_CIS_SPOLECNOSTKATEGORIE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_SPOL_SKUPINA0.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_CIS_SPOL_SKUPINA0.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_CIS_SPOL_SKUPINA0
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_SPOL_SKUPINA0" ADD CONSTRAINT "FK_SPOL_SKUPINA0_USER" FOREIGN KEY ("ID_USER")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;


PROMPT Completed KP_CIS_SPOL_SKUPINA0.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_SPOL_SKUPINA1.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_CIS_SPOL_SKUPINA1.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_CIS_SPOL_SKUPINA1
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_SPOL_SKUPINA1" ADD CONSTRAINT "FK_SPOL_SKUPINA1_USER" FOREIGN KEY ("ID_USER")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;


PROMPT Completed KP_CIS_SPOL_SKUPINA1.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_SPOL_SKUPINA2.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_CIS_SPOL_SKUPINA2.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_CIS_SPOL_SKUPINA2
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_SPOL_SKUPINA2" ADD CONSTRAINT "FK_SPOL_SKUPINA2_USER" FOREIGN KEY ("ID_USER")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;


PROMPT Completed KP_CIS_SPOL_SKUPINA2.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_SPOL_SKUPINA3.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_CIS_SPOL_SKUPINA3.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_CIS_SPOL_SKUPINA3
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_SPOL_SKUPINA3" ADD CONSTRAINT "FK_SPOL_SKUPINA3_USER" FOREIGN KEY ("ID_USER")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;


PROMPT Completed KP_CIS_SPOL_SKUPINA3.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_SUBJEKTSKUPINA.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_CIS_SUBJEKTSKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_CIS_SUBJEKTSKUPINA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_SUBJEKTSKUPINA" ADD CONSTRAINT "FK_KPCISSUBJEKTSKUPINA_ID" FOREIGN KEY ("ID_SKUPINA")
	  REFERENCES "DB_JT"."KP_CIS_ZISKSRSKUPINA" ("ID") ENABLE;


PROMPT Completed KP_CIS_SUBJEKTSKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_TYPTRANSAKCE.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_CIS_TYPTRANSAKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_CIS_TYPTRANSAKCE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_TYPTRANSAKCE" ADD CONSTRAINT "FK_CISTYPTRANSAKCE_TTGROUP" FOREIGN KEY ("ID_TYPTRANSAKCEGROUP")
	  REFERENCES "DB_JT"."KP_CIS_TYPTRANSAKCEGROUP" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_TYPTRANSAKCE" ADD CONSTRAINT "FK_TYPTRANSAKCE_MENAUP" FOREIGN KEY ("S_MENAUP")
	  REFERENCES "DB_JT"."KP_CIS_MENA" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_TYPTRANSAKCE" ADD CONSTRAINT "FK_TYPTRANSAKCE_MENAUS" FOREIGN KEY ("S_MENAUS")
	  REFERENCES "DB_JT"."KP_CIS_MENA" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_TYPTRANSAKCE" ADD CONSTRAINT "FK_TYPTRANSAKCE_MENAUT" FOREIGN KEY ("S_MENAUT")
	  REFERENCES "DB_JT"."KP_CIS_MENA" ("ID") ENABLE;


PROMPT Completed KP_CIS_TYPTRANSAKCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_TYPZAJISTENI.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_CIS_TYPZAJISTENI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_CIS_TYPZAJISTENI
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_TYPZAJISTENI" ADD CONSTRAINT "FK_KPKTGTYPZAJISTENI_TYPNASTR" FOREIGN KEY ("ID_TYPNASTROJE")
	  REFERENCES "DB_JT"."KP_KTG_TYPNASTROJE" ("ID") ENABLE;


PROMPT Completed KP_CIS_TYPZAJISTENI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_UCETPRIMARNI.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_CIS_UCETPRIMARNI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_CIS_UCETPRIMARNI
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_UCETPRIMARNI" ADD CONSTRAINT "FK_KPUCETPRIM_DB" FOREIGN KEY ("ID_CISDATABAZE")
	  REFERENCES "DB_JT"."KP_CIS_DATABAZE" ("ID") ENABLE;


PROMPT Completed KP_CIS_UCETPRIMARNI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_UCETUNIFLANG.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_CIS_UCETUNIFLANG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_CIS_UCETUNIFLANG
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_CIS_UCETUNIFLANG" ADD CONSTRAINT "FK_KPUCETUNIFLANG_LOCALE" FOREIGN KEY ("S_LOCALE")
	  REFERENCES "DB_JT"."CIS_LOCALE" ("S_LOCALE") ENABLE;
  ALTER TABLE "DB_JT"."KP_CIS_UCETUNIFLANG" ADD CONSTRAINT "FK_KPUCETUNIFLANG_UU" FOREIGN KEY ("ID_CISUCETUNIF")
	  REFERENCES "DB_JT"."KP_CIS_UCETUNIF" ("ID") ENABLE;


PROMPT Completed KP_CIS_UCETUNIFLANG.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_BUDGET.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_BUDGET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_BUDGET
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_BUDGET" ADD CONSTRAINT "FK_DATBUDGET_ODBOR" FOREIGN KEY ("ID_KTGODBOR")
	  REFERENCES "DB_JT"."KP_KTG_ODBOR" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_BUDGET" ADD CONSTRAINT "FK_DATBUDGET_PROJEKT" FOREIGN KEY ("ID_KTGPROJEKT")
	  REFERENCES "DB_JT"."KP_KTG_PROJEKT" ("ID") ENABLE;


PROMPT Completed KP_DAT_BUDGET.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_BUDGETPOLOZKA.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_BUDGETPOLOZKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_BUDGETPOLOZKA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_BUDGETPOLOZKA" ADD CONSTRAINT "FK_DATBUDGETPOLOZKA_BUDGET" FOREIGN KEY ("ID_BUDGET")
	  REFERENCES "DB_JT"."KP_DAT_BUDGET" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_BUDGETPOLOZKA" ADD CONSTRAINT "FK_DATBUDGETPOLOZKA_TT" FOREIGN KEY ("ID_CISTYPTRAN")
	  REFERENCES "DB_JT"."KP_CIS_TYPTRANSAKCE" ("ID") ENABLE;


PROMPT Completed KP_DAT_BUDGETPOLOZKA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_BUDGETZASTUP.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_BUDGETZASTUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_BUDGETZASTUP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_BUDGETZASTUP" ADD CONSTRAINT "FK_KPDTBDGTZSTP_KDO" FOREIGN KEY ("ID_KDO")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_BUDGETZASTUP" ADD CONSTRAINT "FK_KPDTBDGTZSTP_KOHO" FOREIGN KEY ("ID_KOHO")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_BUDGETZASTUP" ADD CONSTRAINT "FK_KPBUDGETZASTUP" FOREIGN KEY ("ID_BUDGET")
	  REFERENCES "DB_JT"."KP_DAT_BUDGET" ("ID") ENABLE;


PROMPT Completed KP_DAT_BUDGETZASTUP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DANE.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_DANE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_DANE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DANE" ADD CONSTRAINT "FK_KPDATDANE_SPOL" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_DAT_DANE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DANOVESAZBY.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_DANOVESAZBY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_DANOVESAZBY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DANOVESAZBY" ADD CONSTRAINT "FK_DANOVESAZBY_MENY" FOREIGN KEY ("S_MENA")
	  REFERENCES "DB_JT"."KP_CIS_MENA" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DANOVESAZBY" ADD CONSTRAINT "FK_DANOVESAZBY_STAT" FOREIGN KEY ("S_STAT")
	  REFERENCES "DB_JT"."KP_CIS_STAT" ("ID") ENABLE;


PROMPT Completed KP_DAT_DANOVESAZBY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DENNIAGREGACE.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_DENNIAGREGACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_DENNIAGREGACE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DENNIAGREGACE" ADD CONSTRAINT "FK_KPDENNIAG_RADEKTYP" FOREIGN KEY ("ID_CISRADEKTEXT")
	  REFERENCES "DB_JT"."KP_CIS_RADEKTEXT" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DENNIAGREGACE" ADD CONSTRAINT "FK_KPDENNIAG_SPOLECNOST" FOREIGN KEY ("ID_KTGSPOLECNOSTPROTI")
	  REFERENCES "DB_JT"."KP_KTG_SPOLECNOST" ("ID") ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_DAT_DENNIAGREGACE" ADD CONSTRAINT "FK_KPDENNIAG_UCSPOLEC" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DENNIAGREGACE" ADD CONSTRAINT "FK_KPDENNIAG_UCSPOLECNOST" FOREIGN KEY ("ID_KTGUCETNISPOLECNOSTPROTI")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_DAT_DENNIAGREGACE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOCZASTUP.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_DOCZASTUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_DOCZASTUP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOCZASTUP" ADD CONSTRAINT "FK_KPDTDCZSTP_KDO" FOREIGN KEY ("ID_KDO")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOCZASTUP" ADD CONSTRAINT "FK_KPDTDCZSTP_KOHO" FOREIGN KEY ("ID_KOHO")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;


PROMPT Completed KP_DAT_DOCZASTUP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLAD.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_DOKLAD
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLAD" ADD CONSTRAINT "FK_KPDOKLAD_DOKLAD" FOREIGN KEY ("ID_KTGDOKLAD")
	  REFERENCES "DB_JT"."KP_KTG_DOKLAD" ("ID") ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLAD" ADD CONSTRAINT "FK_KPDOKLAD_ETAPA" FOREIGN KEY ("ID_KTGSUBKONSOLIDACEETAPA")
	  REFERENCES "DB_JT"."KP_KTG_SUBKONSOLIDACEETAPA" ("ID") ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLAD" ADD CONSTRAINT "FK_KPDOKLAD_SPOLECNOST" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLAD" ADD CONSTRAINT "FK_KPDATDOKLAD_SUBKON" FOREIGN KEY ("ID_SUBKONSOLIDACE")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE NOVALIDATE;


PROMPT Completed KP_DAT_DOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADBILANCEPOCSTAV.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADBILANCEPOCSTAV.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_DOKLADBILANCEPOCSTAV
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADBILANCEPOCSTAV" ADD CONSTRAINT "FK_XXKPDOKLADBPOCST_LISTTYP" FOREIGN KEY ("ID_CISLIST")
	  REFERENCES "DB_JT"."KP_CIS_LIST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADBILANCEPOCSTAV" ADD CONSTRAINT "FK_XXKPDOKLADBPOCST_RADEKTYP" FOREIGN KEY ("ID_CISRADEKTYP")
	  REFERENCES "DB_JT"."KP_CIS_RADEKTEXT" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADBILANCEPOCSTAV" ADD CONSTRAINT "FK_KPDOKLADBPOCST_DOKLAD" FOREIGN KEY ("ID_DOKLAD")
	  REFERENCES "DB_JT"."KP_DAT_DOKLAD" ("ID") ENABLE NOVALIDATE;


PROMPT Completed KP_DAT_DOKLADBILANCEPOCSTAV.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADNASTROJ.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADNASTROJ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_DOKLADNASTROJ
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJ" ADD CONSTRAINT "FK_KPDOKNAST_VYKAZ" FOREIGN KEY ("ID_KTGUCETNISPOLECNOSTVYKAZ")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJ" ADD CONSTRAINT "FK_KPDOKNAST_KTGPROTI" FOREIGN KEY ("ID_KTGSPOLECNOSTPROTISTRANA")
	  REFERENCES "DB_JT"."KP_KTG_SPOLECNOST" ("ID") ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJ" ADD CONSTRAINT "FK_KPDOKNAST_KTGSPOL" FOREIGN KEY ("ID_KTGSPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_SPOLECNOST" ("ID") ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJ" ADD CONSTRAINT "FK_KPDOKNAST_SUBKON" FOREIGN KEY ("ID_KTGSUBKONSOLIDACE")
	  REFERENCES "DB_JT"."KP_KTG_SUBKONSOLIDACE" ("ID_KTGUCETNISPOLECNOST") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJ" ADD CONSTRAINT "FK_KPDOKNAST_TYPNAST" FOREIGN KEY ("ID_KTGTYPNASTROJE")
	  REFERENCES "DB_JT"."KP_KTG_TYPNASTROJE" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJ" ADD CONSTRAINT "FK_KPDOKNAST_TYPOPER" FOREIGN KEY ("ID_KTGTYPOPERACE")
	  REFERENCES "DB_JT"."KP_KTG_TYPOPERACE" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJ" ADD CONSTRAINT "FK_KPDOKNAST_DOKLAD" FOREIGN KEY ("ID_DOKLAD")
	  REFERENCES "DB_JT"."KP_DAT_DOKLAD" ("ID") DISABLE;


PROMPT Completed KP_DAT_DOKLADNASTROJ.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADNASTROJCP.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADNASTROJCP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_DOKLADNASTROJCP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJCP" ADD CONSTRAINT "FK_KPDOKNASTCP_KTGPROTI" FOREIGN KEY ("ID_KTGSPOLECNOSTPROTISTRANA")
	  REFERENCES "DB_JT"."KP_KTG_SPOLECNOST" ("ID") ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJCP" ADD CONSTRAINT "FK_KPDOKNASTCP_KTGSPOL" FOREIGN KEY ("ID_KTGSPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_SPOLECNOST" ("ID") ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJCP" ADD CONSTRAINT "FK_KPDOKNASTCP_TYPNAST" FOREIGN KEY ("ID_KTGTYPNASTROJE")
	  REFERENCES "DB_JT"."KP_KTG_TYPNASTROJE" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJCP" ADD CONSTRAINT "FK_KPDOKNASTCP_TYPOPER" FOREIGN KEY ("ID_KTGTYPOPERACE")
	  REFERENCES "DB_JT"."KP_KTG_TYPOPERACE" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJCP" ADD CONSTRAINT "FK_KPDOKNASTCP_VYKAZ" FOREIGN KEY ("ID_KTGUCETNISPOLECNOSTVYKAZ")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJCP" ADD CONSTRAINT "FK_KPDOKNASTCP_DOKLAD" FOREIGN KEY ("ID_DOKLAD")
	  REFERENCES "DB_JT"."KP_DAT_DOKLAD" ("ID") ENABLE NOVALIDATE;


PROMPT Completed KP_DAT_DOKLADNASTROJCP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADNASTROJ_CASTKY.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADNASTROJ_CASTKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_DOKLADNASTROJ_CASTKY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJ_CASTKY" ADD CONSTRAINT "FK_NASTROJ_CASTKY" FOREIGN KEY ("ID_NASTROJ")
	  REFERENCES "DB_JT"."KP_DAT_DOKLADNASTROJ" ("ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNASTROJ_CASTKY" ADD CONSTRAINT "FK_NASTROJCP_CASTKY" FOREIGN KEY ("ID_NASTROJ_CP")
	  REFERENCES "DB_JT"."KP_DAT_DOKLADNASTROJCP" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed KP_DAT_DOKLADNASTROJ_CASTKY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADNEZARAZENETRAN.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADNEZARAZENETRAN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_DOKLADNEZARAZENETRAN
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADNEZARAZENETRAN" ADD CONSTRAINT "FK_KPDOKLADNEZTRAN_DOKLAD" FOREIGN KEY ("ID_DOKLAD")
	  REFERENCES "DB_JT"."KP_DAT_DOKLAD" ("ID") ON DELETE CASCADE ENABLE NOVALIDATE;


PROMPT Completed KP_DAT_DOKLADNEZARAZENETRAN.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADPOLOZKA.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADPOLOZKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_DOKLADPOLOZKA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADPOLOZKA" ADD CONSTRAINT "FK_KPDOKLADPOLOZKA_DEFLIST" FOREIGN KEY ("ID_DEFLISTBUNKA")
	  REFERENCES "DB_JT"."KP_DEF_LISTBUNKA" ("ID") DISABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADPOLOZKA" ADD CONSTRAINT "FK_XXKPDOKLADPOL_DEFDOKLAD" FOREIGN KEY ("ID_DEFDOKLAD")
	  REFERENCES "DB_JT"."KP_DEF_DOKLAD" ("ID") DISABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADPOLOZKA" ADD CONSTRAINT "FK_XXKPDOKLADPOL_LISTTYP" FOREIGN KEY ("ID_CISLIST")
	  REFERENCES "DB_JT"."KP_CIS_LIST" ("ID") DISABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADPOLOZKA" ADD CONSTRAINT "FK_XXKPDOKLADPOL_RADEKTYP" FOREIGN KEY ("ID_CISRADEKTYP")
	  REFERENCES "DB_JT"."KP_CIS_RADEKTEXT" ("ID") DISABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADPOLOZKA" ADD CONSTRAINT "FK_KPDOKLADPOLOZKA_DOKLAD" FOREIGN KEY ("ID_DOKLAD")
	  REFERENCES "DB_JT"."KP_DAT_DOKLAD" ("ID") ENABLE NOVALIDATE;


PROMPT Completed KP_DAT_DOKLADPOLOZKA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADPOLOZKADENIK.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADPOLOZKADENIK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_DOKLADPOLOZKADENIK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADPOLOZKADENIK" ADD CONSTRAINT "FK_KPDOKPOLDEN_BUNKA" FOREIGN KEY ("ID_DOKLADPOLOZKA")
	  REFERENCES "DB_JT"."KP_DAT_DOKLADPOLOZKA" ("ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADPOLOZKADENIK" ADD CONSTRAINT "FK_KPDOKPOLDEN_PRAVIDLO" FOREIGN KEY ("ID_KTGSUBKONPRAVIDLODETAIL")
	  REFERENCES "DB_JT"."KP_KTG_SUBKONSOLPRAVIDLODETAIL" ("ID") ON DELETE SET NULL ENABLE;


PROMPT Completed KP_DAT_DOKLADPOLOZKADENIK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADPROTOKOL.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADPROTOKOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_DOKLADPROTOKOL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADPROTOKOL" ADD CONSTRAINT "FK_DOKLADPROTOKOL_DOKLAD" FOREIGN KEY ("ID_DOKLAD")
	  REFERENCES "DB_JT"."KP_DAT_DOKLAD" ("ID") ENABLE NOVALIDATE;


PROMPT Completed KP_DAT_DOKLADPROTOKOL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADQUESTORPC.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADQUESTORPC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_DOKLADQUESTORPC
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADQUESTORPC" ADD CONSTRAINT "FK_KPDATDOKLADQUESTORPC_DOKLAD" FOREIGN KEY ("ID_DOKLAD")
	  REFERENCES "DB_JT"."KP_DAT_DOKLAD" ("ID") ON DELETE CASCADE ENABLE NOVALIDATE;


PROMPT Completed KP_DAT_DOKLADQUESTORPC.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADROZDILY.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADROZDILY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_DOKLADROZDILY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADROZDILY" ADD CONSTRAINT "FK_KPDOKLADROZDILY_DOKLAD" FOREIGN KEY ("ID_DOKLAD")
	  REFERENCES "DB_JT"."KP_DAT_DOKLAD" ("ID") ON DELETE CASCADE ENABLE NOVALIDATE;


PROMPT Completed KP_DAT_DOKLADROZDILY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADSUBKONLOGDOKLADY.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADSUBKONLOGDOKLADY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_DOKLADSUBKONLOGDOKLADY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADSUBKONLOGDOKLADY" ADD CONSTRAINT "FK_KPDOKLADSUBKONLOGD_DOKCL" FOREIGN KEY ("ID_DOKLADCLEN")
	  REFERENCES "DB_JT"."KP_DAT_DOKLAD" ("ID") ON DELETE CASCADE ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADSUBKONLOGDOKLADY" ADD CONSTRAINT "FK_KPDOKLADSUBKONLOGD_DOK" FOREIGN KEY ("ID_DOKLAD")
	  REFERENCES "DB_JT"."KP_DAT_DOKLAD" ("ID") ON DELETE CASCADE ENABLE NOVALIDATE;


PROMPT Completed KP_DAT_DOKLADSUBKONLOGDOKLADY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADSUBKONVAZBYDENIK.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADSUBKONVAZBYDENIK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_DOKLADSUBKONVAZBYDENIK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADSUBKONVAZBYDENIK" ADD CONSTRAINT "FK_KPDOKSVAZDEN_DOKLAD" FOREIGN KEY ("ID_DOKLAD")
	  REFERENCES "DB_JT"."KP_DAT_DOKLAD" ("ID") ON DELETE CASCADE ENABLE NOVALIDATE;


PROMPT Completed KP_DAT_DOKLADSUBKONVAZBYDENIK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADUCETUNIF2ORIGINAL.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADUCETUNIF2ORIGINAL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_DOKLADUCETUNIF2ORIGINAL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADUCETUNIF2ORIGINAL" ADD CONSTRAINT "FK_KPDOKLADUCUN2OR_DOKLAD" FOREIGN KEY ("ID_DOKLAD")
	  REFERENCES "DB_JT"."KP_DAT_DOKLAD" ("ID") ON DELETE CASCADE ENABLE NOVALIDATE;


PROMPT Completed KP_DAT_DOKLADUCETUNIF2ORIGINAL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADVAZBY.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADVAZBY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_DOKLADVAZBY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBY" ADD CONSTRAINT "FK_DOKLADVAZBY_SUBKON" FOREIGN KEY ("ID_KTGSUBKONSOLIDACE")
	  REFERENCES "DB_JT"."KP_KTG_SUBKONSOLIDACE" ("ID_KTGUCETNISPOLECNOST") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBY" ADD CONSTRAINT "FK_DOKLADVAZBY_DOKLAD" FOREIGN KEY ("ID_DOKLAD")
	  REFERENCES "DB_JT"."KP_DAT_DOKLAD" ("ID") ENABLE NOVALIDATE;


PROMPT Completed KP_DAT_DOKLADVAZBY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADVAZBYAKCEPT.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADVAZBYAKCEPT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_DOKLADVAZBYAKCEPT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYAKCEPT" ADD CONSTRAINT "FK_KPDOKVAZBYAKC_DOKLADPROTI" FOREIGN KEY ("ID_DOKLADPROTI")
	  REFERENCES "DB_JT"."KP_DAT_DOKLAD" ("ID") ON DELETE SET NULL ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYAKCEPT" ADD CONSTRAINT "FK_KPDOKVAZBYAKC_DOKLAD" FOREIGN KEY ("ID_DOKLAD")
	  REFERENCES "DB_JT"."KP_DAT_DOKLAD" ("ID") ENABLE NOVALIDATE;


PROMPT Completed KP_DAT_DOKLADVAZBYAKCEPT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADVAZBYPAROVANI.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADVAZBYPAROVANI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_DOKLADVAZBYPAROVANI
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADVAZBYPAROVANI" ADD CONSTRAINT "FK_DOKLADVAZBYPAR_DOKLAD" FOREIGN KEY ("ID_DOKLAD")
	  REFERENCES "DB_JT"."KP_DAT_DOKLAD" ("ID") ON DELETE SET NULL ENABLE NOVALIDATE;


PROMPT Completed KP_DAT_DOKLADVAZBYPAROVANI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADZAMEK.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADZAMEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_DOKLADZAMEK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZAMEK" ADD CONSTRAINT "FK_DATZAMEKDOKLAD" FOREIGN KEY ("ID_DOKLAD")
	  REFERENCES "DB_JT"."KP_DAT_DOKLAD" ("ID") ENABLE NOVALIDATE;


PROMPT Completed KP_DAT_DOKLADZAMEK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADZDROJDAT.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADZDROJDAT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_DOKLADZDROJDAT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDAT" ADD CONSTRAINT "FK_KPZDROJDAT_DOKLAD2" FOREIGN KEY ("ID_DOKLAD")
	  REFERENCES "DB_JT"."KP_DAT_DOKLAD" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDAT" ADD CONSTRAINT "FK_KPZD_PROJEKT" FOREIGN KEY ("ID_KTGPROJEKT")
	  REFERENCES "DB_JT"."KP_KTG_PROJEKT" ("ID") ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDAT" ADD CONSTRAINT "FK_KPZD_ODBOR" FOREIGN KEY ("ID_KTGODBOR")
	  REFERENCES "DB_JT"."KP_KTG_ODBOR" ("ID") ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDAT" ADD CONSTRAINT "FK_KPZD_KTGSPOLECNOST" FOREIGN KEY ("ID_KTGSPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_SPOLECNOST" ("ID") ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDAT" ADD CONSTRAINT "FK_KPZDROJDAT_CP" FOREIGN KEY ("ID_KTGCENNYPAPIR")
	  REFERENCES "DB_JT"."KTG_CENNYPAPIR" ("ID") DISABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDAT" ADD CONSTRAINT "FK_KPZDROJDAT_BUNKA" FOREIGN KEY ("ID_DOKLADPOLOZKA")
	  REFERENCES "DB_JT"."KP_DAT_DOKLADPOLOZKA" ("ID") ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDAT" ADD CONSTRAINT "FK_KPDOKLADZDROJDAT_TYPNASTR" FOREIGN KEY ("ID_TYPNASTROJE")
	  REFERENCES "DB_JT"."KP_KTG_TYPNASTROJE" ("ID") DISABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDAT" ADD CONSTRAINT "FK_KPZD_SPOLECNOST" FOREIGN KEY ("ID_KTGUCETNISPOLECNOSTUNIF")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE NOVALIDATE;


PROMPT Completed KP_DAT_DOKLADZDROJDAT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADZDROJDATAGREGACE.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADZDROJDATAGREGACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_DOKLADZDROJDATAGREGACE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDATAGREGACE" ADD CONSTRAINT "FK_KPZDROJDATAG_DOKLAD2" FOREIGN KEY ("ID_DOKLAD")
	  REFERENCES "DB_JT"."KP_DAT_DOKLAD" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDATAGREGACE" ADD CONSTRAINT "FK_KPZDROJDATAG_UCSPOLECNOST" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDATAGREGACE" ADD CONSTRAINT "FK_KPZDROJDATAG_RADEKTYP" FOREIGN KEY ("ID_CISRADEKTEXT")
	  REFERENCES "DB_JT"."KP_CIS_RADEKTEXT" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDATAGREGACE" ADD CONSTRAINT "FK_KPZDROJDATAG_SPOLECNOST" FOREIGN KEY ("ID_KTGSPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_SPOLECNOST" ("ID") ENABLE NOVALIDATE;


PROMPT Completed KP_DAT_DOKLADZDROJDATAGREGACE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKLADZDROJDATMANUAL.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_DOKLADZDROJDATMANUAL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_DOKLADZDROJDATMANUAL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKLADZDROJDATMANUAL" ADD CONSTRAINT "FK_KPDATDOKLADZDMAN_SUBKON" FOREIGN KEY ("ID_SUBKONSOLIDACE")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_DAT_DOKLADZDROJDATMANUAL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKUMENT.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_DOKUMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_DOKUMENT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKUMENT" ADD CONSTRAINT "FK_DOKUMENTAPPUSER" FOREIGN KEY ("ID_ZADAVATEL")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKUMENT" ADD CONSTRAINT "FK_DOKUMENTCIS" FOREIGN KEY ("ID_CISDOKUMENT")
	  REFERENCES "DB_JT"."KP_CIS_DOKUMENT" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKUMENT" ADD CONSTRAINT "FK_DOKUMENTTYPTRAN" FOREIGN KEY ("ID_TYPTRANSAKCE")
	  REFERENCES "DB_JT"."KP_CIS_TYPTRANSAKCE" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKUMENT" ADD CONSTRAINT "FK_DOKUMENT_TTDEVELOPER" FOREIGN KEY ("ID_TTDEVELOPER")
	  REFERENCES "DB_JT"."KP_CIS_TYPTRANSAKCE" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKUMENT" ADD CONSTRAINT "FK_DOKUMENT_TYPLINK" FOREIGN KEY ("ID_TYPIZLINK")
	  REFERENCES "DB_JT"."KP_DAT_DOKUMENT" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKUMENT" ADD CONSTRAINT "FK_DOKUMENT_TYPPRECENENI" FOREIGN KEY ("ID_TYPPRECENENI")
	  REFERENCES "DB_JT"."KP_CIS_PROJEKTCASHFLOWTYP" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKUMENT" ADD CONSTRAINT "FK_DOKUMENT_UCSPOLUHRADA" FOREIGN KEY ("ID_UCSPOLUHRADA")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_DAT_DOKUMENT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKUMENTRADEK.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_DOKUMENTRADEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_DOKUMENTRADEK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_DOKUMENTRADEK" ADD CONSTRAINT "FK_DOKRADEKDOKUMENT" FOREIGN KEY ("ID_DOKUMENT")
	  REFERENCES "DB_JT"."KP_DAT_DOKUMENT" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKUMENTRADEK" ADD CONSTRAINT "FK_ISIT_BUDGET" FOREIGN KEY ("S_ISIT_BUDGET")
	  REFERENCES "DB_JT"."KP_CIS_ISIT_BUDGET" ("S_KOD") DEFERRABLE INITIALLY DEFERRED ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKUMENTRADEK" ADD CONSTRAINT "FK_DOKU_RADEK_IS_DRUH_NAKL" FOREIGN KEY ("ID_DRUH_NAKLADU")
	  REFERENCES "DB_JT"."KP_CIS_ISIT_DRUH_NAKLADU" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKUMENTRADEK" ADD CONSTRAINT "FK_DOKU_RADEK_ISIT_TYP_SW" FOREIGN KEY ("ID_TYP_SW")
	  REFERENCES "DB_JT"."KP_CIS_ISIT_TYP_SW" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_DOKUMENTRADEK" ADD CONSTRAINT "FK_DOKU_RADEK_ISIT_APLIKACE" FOREIGN KEY ("ID_APLIKACE")
	  REFERENCES "DB_JT"."KP_CIS_ISIT_APLIKACE" ("ID") ENABLE;


PROMPT Completed KP_DAT_DOKUMENTRADEK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_EVIADMINDODAVATEL.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_EVIADMINDODAVATEL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_EVIADMINDODAVATEL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_EVIADMINDODAVATEL" ADD CONSTRAINT "FK_EVIADMINDODAVATEL_MENA" FOREIGN KEY ("S_MENA")
	  REFERENCES "DB_JT"."KP_CIS_MENA" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_EVIADMINDODAVATEL" ADD CONSTRAINT "FK_EVIADMINDODAVATEL_IDSPOL" FOREIGN KEY ("ID_KTGSPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_SPOLECNOST" ("ID") ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_DAT_EVIADMINDODAVATEL" ADD CONSTRAINT "FK_EVIADMINSPOL_SPOL" FOREIGN KEY ("ID_EVIADMINSPOL")
	  REFERENCES "DB_JT"."KP_KTG_EVIADMINSPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_EVIADMINDODAVATEL" ADD CONSTRAINT "FK_EVIADMINDODAVATEL_IDDOC" FOREIGN KEY ("ID_DOKUMENT")
	  REFERENCES "DB_JT"."KP_DAT_DOKUMENT" ("ID") ENABLE;


PROMPT Completed KP_DAT_EVIADMINDODAVATEL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_EVIBANKY.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_EVIBANKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_EVIBANKY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_EVIBANKY" ADD CONSTRAINT "FK_EVIBANKY_ADMINSPOL" FOREIGN KEY ("ID_ADMINSPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_EVIADMINSPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_DAT_EVIBANKY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_EVIDOIDENTIFIKACE.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_EVIDOIDENTIFIKACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_EVIDOIDENTIFIKACE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_EVIDOIDENTIFIKACE" ADD CONSTRAINT "FK_EVIDOIDENTIFIKACE_ADMINSPOL" FOREIGN KEY ("ID_ADMINSPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_EVIADMINSPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_EVIDOIDENTIFIKACE" ADD CONSTRAINT "FK_EVIDOIDENTIFIKACE_IDDO" FOREIGN KEY ("ID_CISDOIDENTIFIKACE")
	  REFERENCES "DB_JT"."KP_CIS_EVIDOIDENTIFIKACE" ("ID") ENABLE;


PROMPT Completed KP_DAT_EVIDOIDENTIFIKACE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_EVIDOKUMENT.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_EVIDOKUMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_EVIDOKUMENT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_EVIDOKUMENT" ADD CONSTRAINT "FK_EVIDOKUMENT_ADMINSPOL" FOREIGN KEY ("ID_ADMINSPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_EVIADMINSPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_DAT_EVIDOKUMENT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_EVIKOMISIONARSKESMLOUVY.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_EVIKOMISIONARSKESMLOUVY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_EVIKOMISIONARSKESMLOUVY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_EVIKOMISIONARSKESMLOUVY" ADD CONSTRAINT "FK_EVIKOMISSMLOUVY_ADMINSPOL" FOREIGN KEY ("ID_ADMINSPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_EVIADMINSPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_DAT_EVIKOMISIONARSKESMLOUVY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_EVIKORESPONDENCE.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_EVIKORESPONDENCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_EVIKORESPONDENCE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_EVIKORESPONDENCE" ADD CONSTRAINT "FK_EVIKORESPONDENCE_ADMINSPOL" FOREIGN KEY ("ID_ADMINSPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_EVIADMINSPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_DAT_EVIKORESPONDENCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_EVIOBCHODNIREJSTRIK.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_EVIOBCHODNIREJSTRIK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_EVIOBCHODNIREJSTRIK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_EVIOBCHODNIREJSTRIK" ADD CONSTRAINT "FK_EVIOR_ADMINSPOL" FOREIGN KEY ("ID_ADMINSPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_EVIADMINSPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_EVIOBCHODNIREJSTRIK" ADD CONSTRAINT "FK_EVIOR_IDCISOR" FOREIGN KEY ("ID_CISOBCHODNIREJSTRIK")
	  REFERENCES "DB_JT"."KP_CIS_EVIOBCHODNIREJSTRIK" ("ID") ENABLE;


PROMPT Completed KP_DAT_EVIOBCHODNIREJSTRIK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_EVIZPLNOMOCNENI.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_EVIZPLNOMOCNENI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_EVIZPLNOMOCNENI
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_EVIZPLNOMOCNENI" ADD CONSTRAINT "FK_EVIZPLNOMOCNENI_ADMINSPOL" FOREIGN KEY ("ID_ADMINSPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_EVIADMINSPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_DAT_EVIZPLNOMOCNENI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_GENEROVANIZAMEK.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_GENEROVANIZAMEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_GENEROVANIZAMEK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_GENEROVANIZAMEK" ADD CONSTRAINT "FK_GZ_CISDOKLAD" FOREIGN KEY ("ID_CISDOKLAD")
	  REFERENCES "DB_JT"."KP_CIS_DOKLAD" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_GENEROVANIZAMEK" ADD CONSTRAINT "FK_GZ_CISZAMEK" FOREIGN KEY ("ID_CISZAMEK")
	  REFERENCES "DB_JT"."KP_CIS_ZAMEK" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_GENEROVANIZAMEK" ADD CONSTRAINT "FK_GZ_UCSLOP" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_GENEROVANIZAMEK" ADD CONSTRAINT "FK_GENERZAMEK_APPUSER" FOREIGN KEY ("ID_KTGAPPUSER")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;


PROMPT Completed KP_DAT_GENEROVANIZAMEK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_GENZAMEKZAMITNUTI.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_GENZAMEKZAMITNUTI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_GENZAMEKZAMITNUTI
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_GENZAMEKZAMITNUTI" ADD CONSTRAINT "FK_KPGENZAMEKZAMIT_CISDOKLAD" FOREIGN KEY ("ID_CISDOKLAD")
	  REFERENCES "DB_JT"."KP_CIS_DOKLAD" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_GENZAMEKZAMITNUTI" ADD CONSTRAINT "FK_KPGENZAMEKZAMIT_CISZAMEK" FOREIGN KEY ("ID_CISZAMEK")
	  REFERENCES "DB_JT"."KP_CIS_ZAMEK" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_GENZAMEKZAMITNUTI" ADD CONSTRAINT "FK_KPGENZAMEKZAMIT_UCSPOL" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_GENZAMEKZAMITNUTI" ADD CONSTRAINT "FK_KPGENZAMEKZAMIT_APPUSER" FOREIGN KEY ("ID_KTGAPPUSER")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;


PROMPT Completed KP_DAT_GENZAMEKZAMITNUTI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_KARTAPRAVIDLA.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_KARTAPRAVIDLA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_KARTAPRAVIDLA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_KARTAPRAVIDLA" ADD CONSTRAINT "FK_KPKARTAPRAVIDLA_IDKARTATYP" FOREIGN KEY ("ID_KARTATYP")
	  REFERENCES "DB_JT"."KP_DAT_KARTATYP" ("ID") ENABLE;


PROMPT Completed KP_DAT_KARTAPRAVIDLA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_KARTASPOLZPRAVA.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_KARTASPOLZPRAVA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_KARTASPOLZPRAVA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_KARTASPOLZPRAVA" ADD CONSTRAINT "FK_KPKARTAZPRAVA_IDSPOL" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_KARTASPOLZPRAVA" ADD CONSTRAINT "FK_KPKARTAZPRAVA_IDKARTATYP" FOREIGN KEY ("ID_KARTATYP")
	  REFERENCES "DB_JT"."KP_DAT_KARTATYP" ("ID") ENABLE;


PROMPT Completed KP_DAT_KARTASPOLZPRAVA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_KARTAVYJIMKY.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_KARTAVYJIMKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_KARTAVYJIMKY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_KARTAVYJIMKY" ADD CONSTRAINT "FK_KPKARTAVYJIMKY_IDKARTATYP" FOREIGN KEY ("ID_KARTATYP")
	  REFERENCES "DB_JT"."KP_DAT_KARTATYP" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_KARTAVYJIMKY" ADD CONSTRAINT "FK_KPKARTAVYJIMKY_IDKTGSPOL" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_DAT_KARTAVYJIMKY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_MAJETKOVAUCAST.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_MAJETKOVAUCAST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_MAJETKOVAUCAST
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_MAJETKOVAUCAST" ADD CONSTRAINT "FK_KPMAJUCAST_IDFIIEMISE" FOREIGN KEY ("ID_KTGFININVESTICEEMISE")
	  REFERENCES "DB_JT"."KP_KTG_FININVESTICEEMISE" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_MAJETKOVAUCAST" ADD CONSTRAINT "FK_KPMAJUCAST_IDUCSPOL" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_MAJETKOVAUCAST" ADD CONSTRAINT "FK_KPMAJUCAST_MENAT" FOREIGN KEY ("S_MENATRANSAKCE")
	  REFERENCES "DB_JT"."KP_CIS_MENA" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_MAJETKOVAUCAST" ADD CONSTRAINT "FK_KPMAJUCAST_MENAU" FOREIGN KEY ("S_MENAUCETNI")
	  REFERENCES "DB_JT"."KP_CIS_MENA" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_MAJETKOVAUCAST" ADD CONSTRAINT "FK_KPMAJUCAST_TRANSAKCE" FOREIGN KEY ("ID_CISMUTYPTRANSAKCE")
	  REFERENCES "DB_JT"."KP_CIS_MAJETKOVAUCASTTYPTRAN" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_MAJETKOVAUCAST" ADD CONSTRAINT "FK_KPMAJUCAST_ZPUSOB" FOREIGN KEY ("ID_CISMUZPUSOB")
	  REFERENCES "DB_JT"."KP_CIS_MAJETKOVAUCASTZPUSOB" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_MAJETKOVAUCAST" ADD CONSTRAINT "FK_KPMAJUCAST_IDUCSPOLKOUP" FOREIGN KEY ("ID_KTGUCETNISPOLECNOSTKOUPENO")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_DAT_MAJETKOVAUCAST.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_MANUALNIZDROJDAT.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_MANUALNIZDROJDAT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_MANUALNIZDROJDAT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_MANUALNIZDROJDAT" ADD CONSTRAINT "FK_KPMANZD_KTGSPOLECNOST" FOREIGN KEY ("ID_KTGSPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_SPOLECNOST" ("ID") ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_DAT_MANUALNIZDROJDAT" ADD CONSTRAINT "FK_KPMANZD_ODBOR" FOREIGN KEY ("ID_KTGODBOR")
	  REFERENCES "DB_JT"."KP_KTG_ODBOR" ("ID") DISABLE;
  ALTER TABLE "DB_JT"."KP_DAT_MANUALNIZDROJDAT" ADD CONSTRAINT "FK_KPMANZD_PROJEKT" FOREIGN KEY ("ID_KTGPROJEKT")
	  REFERENCES "DB_JT"."KP_KTG_PROJEKT" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_MANUALNIZDROJDAT" ADD CONSTRAINT "FK_KPMANZD_PROJEKTOLD" FOREIGN KEY ("ID_KTGPROJEKTOLD")
	  REFERENCES "DB_JT"."KP_KTG_PROJEKT" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_MANUALNIZDROJDAT" ADD CONSTRAINT "FK_KPMANZD_SPOLECNOST" FOREIGN KEY ("ID_KTGUCETNISPOLECNOSTUNIF")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_MANUALNIZDROJDAT" ADD CONSTRAINT "FK_MANUALZDROJ_UU" FOREIGN KEY ("ID_CISUCETUNIF")
	  REFERENCES "DB_JT"."KP_CIS_UCETUNIF" ("ID") ENABLE;


PROMPT Completed KP_DAT_MANUALNIZDROJDAT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_MISTRANSAKCE.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_MISTRANSAKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_MISTRANSAKCE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_MISTRANSAKCE" ADD CONSTRAINT "FK_KPMISTRAN_DOKRADEK" FOREIGN KEY ("ID_DOKUMENTRADEK")
	  REFERENCES "DB_JT"."KP_DAT_DOKUMENTRADEK" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_MISTRANSAKCE" ADD CONSTRAINT "FK_KPMISTRAN_DOKUMENT" FOREIGN KEY ("ID_DOKUMENT")
	  REFERENCES "DB_JT"."KP_DAT_DOKUMENT" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_MISTRANSAKCE" ADD CONSTRAINT "FK_KPMISTRAN_PROTI" FOREIGN KEY ("ID_KTGSPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_SPOLECNOST" ("ID") ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_DAT_MISTRANSAKCE" ADD CONSTRAINT "FK_KPMISTRAN_UCSPOL" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_MISTRANSAKCE" ADD CONSTRAINT "FK_MISTRAN_TT" FOREIGN KEY ("ID_TYPTRANSAKCE")
	  REFERENCES "DB_JT"."KP_CIS_TYPTRANSAKCE" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_MISTRANSAKCE" ADD CONSTRAINT "FK_KPMISTRANSAKCE_IDUNIF" FOREIGN KEY ("ID_CISUCETUNIF")
	  REFERENCES "DB_JT"."KP_CIS_UCETUNIF" ("ID") ENABLE;


PROMPT Completed KP_DAT_MISTRANSAKCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_MNGSEGMENTBOSS.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_MNGSEGMENTBOSS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_MNGSEGMENTBOSS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_MNGSEGMENTBOSS" ADD CONSTRAINT "FK_MNGSEGMENTBOSS_BOSS" FOREIGN KEY ("ID_BOSS")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_MNGSEGMENTBOSS" ADD CONSTRAINT "FK_MNGSEGMENTBOSS_MNGSEG" FOREIGN KEY ("ID_MNGSEGMENT")
	  REFERENCES "DB_JT"."KP_CIS_MNGSEGMENT" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_MNGSEGMENTBOSS" ADD CONSTRAINT "FK_MNGSEGMENTBOSS_TOP" FOREIGN KEY ("ID_TOPMNG")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_MNGSEGMENTBOSS" ADD CONSTRAINT "FK_MNGSEGMENTBOSS_SPONZOR" FOREIGN KEY ("ID_SPONZOR")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;


PROMPT Completed KP_DAT_MNGSEGMENTBOSS.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_OPERACNIRIZIKO.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_OPERACNIRIZIKO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_OPERACNIRIZIKO
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_OPERACNIRIZIKO" ADD CONSTRAINT "FK_KPOPERACNIRIZIKO_SPOLECNOST" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_DAT_OPERACNIRIZIKO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_OPERACNIRIZIKODETAIL.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_OPERACNIRIZIKODETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_OPERACNIRIZIKODETAIL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_OPERACNIRIZIKODETAIL" ADD CONSTRAINT "FK_KPOPERACNIRIZIKOD_BUSLINE" FOREIGN KEY ("ID_CISBUSINESSLINIE")
	  REFERENCES "DB_JT"."KP_CIS_BUSINESSLINIE" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_OPERACNIRIZIKODETAIL" ADD CONSTRAINT "FK_KPOPERACNIRIZIKOD_RIZIKO" FOREIGN KEY ("ID_OPERACNIRIZIKO")
	  REFERENCES "DB_JT"."KP_DAT_OPERACNIRIZIKO" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed KP_DAT_OPERACNIRIZIKODETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_PROJEKTCASHFLOW.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_PROJEKTCASHFLOW.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_PROJEKTCASHFLOW
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTCASHFLOW" ADD CONSTRAINT "FK_KPPROJCF_IDPROJEKT" FOREIGN KEY ("ID_KTGPROJEKT")
	  REFERENCES "DB_JT"."KP_KTG_PROJEKT" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTCASHFLOW" ADD CONSTRAINT "FK_KPPROJCF_IDTYP" FOREIGN KEY ("ID_TYP")
	  REFERENCES "DB_JT"."KP_CIS_PROJEKTCASHFLOWTYP" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTCASHFLOW" ADD CONSTRAINT "FK_KPPROJINOUT_IDTYP" FOREIGN KEY ("ID_INOUTTYP")
	  REFERENCES "DB_JT"."KP_CIS_PROJEKTINOUTTYP" ("ID") ENABLE;


PROMPT Completed KP_DAT_PROJEKTCASHFLOW.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_PROJEKTDOKLADPOLOZKA.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_PROJEKTDOKLADPOLOZKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_PROJEKTDOKLADPOLOZKA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTDOKLADPOLOZKA" ADD CONSTRAINT "FK_KPPDP_DOKLADPOLOZKA" FOREIGN KEY ("ID_DOKLADPOLOZKA")
	  REFERENCES "DB_JT"."KP_DAT_DOKLADPOLOZKA" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTDOKLADPOLOZKA" ADD CONSTRAINT "FK_KPPDP_KTGPROJEKT" FOREIGN KEY ("ID_KTGPROJEKT")
	  REFERENCES "DB_JT"."KP_KTG_PROJEKT" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTDOKLADPOLOZKA" ADD CONSTRAINT "FK_KPPDP_PROJEKTDOKLAD" FOREIGN KEY ("ID_PROJEKTDOKLAD")
	  REFERENCES "DB_JT"."KP_DAT_PROJEKTDOKLAD" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTDOKLADPOLOZKA" ADD CONSTRAINT "FK_KPPDP_UCETNISPOLECNOST" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTDOKLADPOLOZKA" ADD CONSTRAINT "FK_KPPDP_DOKLAD" FOREIGN KEY ("ID_DOKLAD")
	  REFERENCES "DB_JT"."KP_DAT_DOKLAD" ("ID") ENABLE NOVALIDATE;


PROMPT Completed KP_DAT_PROJEKTDOKLADPOLOZKA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_PROJEKTMEMORANDUMZPRAVA.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_PROJEKTMEMORANDUMZPRAVA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_PROJEKTMEMORANDUMZPRAVA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTMEMORANDUMZPRAVA" ADD CONSTRAINT "FK_PROJEKTMEMZPRAVA_IDPROJEKT" FOREIGN KEY ("ID_KTGPROJEKT")
	  REFERENCES "DB_JT"."KP_KTG_PROJEKT" ("ID") ENABLE;


PROMPT Completed KP_DAT_PROJEKTMEMORANDUMZPRAVA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_PROJEKTNAKLADY.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_PROJEKTNAKLADY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_PROJEKTNAKLADY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTNAKLADY" ADD CONSTRAINT "FK_KPPROJNAKL_PROJEKT" FOREIGN KEY ("ID_KTGPROJEKT")
	  REFERENCES "DB_JT"."KP_KTG_PROJEKT" ("ID") ENABLE;


PROMPT Completed KP_DAT_PROJEKTNAKLADY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_PROJEKTNAKLADYDETAIL.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_PROJEKTNAKLADYDETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_PROJEKTNAKLADYDETAIL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_PROJEKTNAKLADYDETAIL" ADD CONSTRAINT "FK_KPPROJNAKLDETAIL_PROJEKT" FOREIGN KEY ("ID_KTGPROJEKT")
	  REFERENCES "DB_JT"."KP_KTG_PROJEKT" ("ID") ENABLE;


PROMPT Completed KP_DAT_PROJEKTNAKLADYDETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_SEGMENTZASTUP.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_SEGMENTZASTUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_SEGMENTZASTUP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_SEGMENTZASTUP" ADD CONSTRAINT "FK_SEGMENTZASTUP_TYP" FOREIGN KEY ("NL_TYP")
	  REFERENCES "DB_JT"."KP_CIS_SEGMENTZASTUPTYP" ("ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_SEGMENTZASTUP" ADD CONSTRAINT "FK_KPDTSGMNTZSTP_KDO" FOREIGN KEY ("ID_KDO")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_SEGMENTZASTUP" ADD CONSTRAINT "FK_KPDTSGMNTZSTP_KOHO" FOREIGN KEY ("ID_KOHO")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;


PROMPT Completed KP_DAT_SEGMENTZASTUP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_SPOLECNOSTLIST.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_SPOLECNOSTLIST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_SPOLECNOSTLIST
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_SPOLECNOSTLIST" ADD CONSTRAINT "FK_SPOLECNOSTLIST_USER" FOREIGN KEY ("ID_APPUSER")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed KP_DAT_SPOLECNOSTLIST.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_SPOLECNOSTLISTDETAIL.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_SPOLECNOSTLISTDETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_SPOLECNOSTLISTDETAIL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_SPOLECNOSTLISTDETAIL" ADD CONSTRAINT "FK_SPOLECNOSTLISTDET_SLIST" FOREIGN KEY ("ID_SPOLECNOSTLIST")
	  REFERENCES "DB_JT"."KP_DAT_SPOLECNOSTLIST" ("ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_SPOLECNOSTLISTDETAIL" ADD CONSTRAINT "FK_SPOLECNOSTLISTDET_SPOL" FOREIGN KEY ("ID_KTGSPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_SPOLECNOST" ("ID") ENABLE NOVALIDATE;


PROMPT Completed KP_DAT_SPOLECNOSTLISTDETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_UVERMANUAL.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_UVERMANUAL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_UVERMANUAL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_UVERMANUAL" ADD CONSTRAINT "FK_UVERMANUAL_TYPKAT" FOREIGN KEY ("ID_TYPKATEGORIE")
	  REFERENCES "DB_JT"."KP_CIS_PROJEKTUVER" ("ID") ENABLE;


PROMPT Completed KP_DAT_UVERMANUAL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_VAZBYZAMEK.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_VAZBYZAMEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_VAZBYZAMEK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_VAZBYZAMEK" ADD CONSTRAINT "FK_VZ_CISDOKLAD" FOREIGN KEY ("ID_CISDOKLAD")
	  REFERENCES "DB_JT"."KP_CIS_DOKLAD" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_VAZBYZAMEK" ADD CONSTRAINT "FK_VZ_UCSPOLFROM" FOREIGN KEY ("ID_KTGUCETNISPOLECNOSTFROM")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_VAZBYZAMEK" ADD CONSTRAINT "FK_VZ_UCSPOLTO" FOREIGN KEY ("ID_KTGUCETNISPOLECNOSTTO")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DAT_VAZBYZAMEK" ADD CONSTRAINT "FK_VZ_UCSKUP" FOREIGN KEY ("ID_KTGUCETNISKUPINA")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISKUPINA" ("ID") ENABLE;


PROMPT Completed KP_DAT_VAZBYZAMEK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_VYJIMKYZAMYKANITOP.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DAT_VYJIMKYZAMYKANITOP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DAT_VYJIMKYZAMYKANITOP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DAT_VYJIMKYZAMYKANITOP" ADD CONSTRAINT "FK_KPVYJIMKYZAMYKANI_UCSPOL" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_DAT_VYJIMKYZAMYKANITOP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_BUDGETMUSTEK.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DEF_BUDGETMUSTEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DEF_BUDGETMUSTEK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_BUDGETMUSTEK" ADD CONSTRAINT "FK_DEFBUDGETMUSTEK_SUBJECT" FOREIGN KEY ("ID_CISSUBJECT")
	  REFERENCES "DB_JT"."KP_CIS_SUBJECT" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DEF_BUDGETMUSTEK" ADD CONSTRAINT "FK_DEFBUDGETMUSTEK_TYPTRAN" FOREIGN KEY ("ID_CISTYPTRANSAKCE")
	  REFERENCES "DB_JT"."KP_CIS_TYPTRANSAKCE" ("ID") ENABLE;


PROMPT Completed KP_DEF_BUDGETMUSTEK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_BUNKAVYPOCET.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DEF_BUNKAVYPOCET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DEF_BUNKAVYPOCET
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_BUNKAVYPOCET" ADD CONSTRAINT "FK_KPDEFBUNKAVYP_CISDOK" FOREIGN KEY ("ID_CISDOKLAD")
	  REFERENCES "DB_JT"."KP_CIS_DOKLAD" ("ID") ENABLE;


PROMPT Completed KP_DEF_BUNKAVYPOCET.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_DEVELOPERSPOLECNOST.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DEF_DEVELOPERSPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DEF_DEVELOPERSPOLECNOST
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_DEVELOPERSPOLECNOST" ADD CONSTRAINT "FK_DEF_DEVELOPER_IDSPOL" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_DEF_DEVELOPERSPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_DOKLAD.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DEF_DOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DEF_DOKLAD
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_DOKLAD" ADD CONSTRAINT "FK_KPDEFDOKLAD_LIST" FOREIGN KEY ("ID_CISLIST")
	  REFERENCES "DB_JT"."KP_CIS_LIST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DEF_DOKLAD" ADD CONSTRAINT "FK_KPDEFDOKLAD_CISDOKLAD" FOREIGN KEY ("ID_CISDOKLAD")
	  REFERENCES "DB_JT"."KP_CIS_DOKLAD" ("ID") ENABLE;


PROMPT Completed KP_DEF_DOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_KATEGORIE2TYP.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DEF_KATEGORIE2TYP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DEF_KATEGORIE2TYP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_KATEGORIE2TYP" ADD CONSTRAINT "FK_KPDEFKATEG2TYP_SUBJECT" FOREIGN KEY ("ID_CISTYPSUBJECT")
	  REFERENCES "DB_JT"."KP_CIS_TYPSUBJECT" ("ID") ENABLE;


PROMPT Completed KP_DEF_KATEGORIE2TYP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_KONTROLAMAJETKOVAUCAST.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DEF_KONTROLAMAJETKOVAUCAST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DEF_KONTROLAMAJETKOVAUCAST
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_KONTROLAMAJETKOVAUCAST" ADD CONSTRAINT "FK_KPDEFKONTROLAMU_SUBJECT" FOREIGN KEY ("ID_CISSUBJECT")
	  REFERENCES "DB_JT"."KP_CIS_SUBJECT" ("ID") ENABLE;


PROMPT Completed KP_DEF_KONTROLAMAJETKOVAUCAST.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_LISTBUNKA.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DEF_LISTBUNKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DEF_LISTBUNKA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKA" ADD CONSTRAINT "FK_KPDEFLISTBUNKA_LISTTYP" FOREIGN KEY ("ID_CISLIST")
	  REFERENCES "DB_JT"."KP_CIS_LIST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKA" ADD CONSTRAINT "FK_KPDEFLISTBUNKA_RADEKTYP" FOREIGN KEY ("ID_CISRADEKTYP")
	  REFERENCES "DB_JT"."KP_CIS_RADEKTEXT" ("ID") ENABLE;


PROMPT Completed KP_DEF_LISTBUNKA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_LISTBUNKANASTROJ.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DEF_LISTBUNKANASTROJ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DEF_LISTBUNKANASTROJ
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKANASTROJ" ADD CONSTRAINT "FK_KPLISTBUNKANASTR_LISTBUNKA" FOREIGN KEY ("ID_DEFLISTBUNKA")
	  REFERENCES "DB_JT"."KP_DEF_LISTBUNKA" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKANASTROJ" ADD CONSTRAINT "FK_KPLISTBUNKANASTR_TYPNASTR" FOREIGN KEY ("ID_TYPNASTROJE")
	  REFERENCES "DB_JT"."KP_KTG_TYPNASTROJE" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKANASTROJ" ADD CONSTRAINT "FK_KPDEFLISTBNASTROJ_KTGDKLD" FOREIGN KEY ("ID_KTGDOKLAD")
	  REFERENCES "DB_JT"."KP_KTG_DOKLAD" ("ID") ENABLE;


PROMPT Completed KP_DEF_LISTBUNKANASTROJ.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_LISTBUNKASUM.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DEF_LISTBUNKASUM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DEF_LISTBUNKASUM
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKASUM" ADD CONSTRAINT "FK_KPDEFLISTBUNKASUM_BUNKA" FOREIGN KEY ("ID_BUNKA")
	  REFERENCES "DB_JT"."KP_DEF_LISTBUNKA" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKASUM" ADD CONSTRAINT "FK_KPDEFLISTBUNKASUM_BUNKASUM" FOREIGN KEY ("ID_BUNKASUM")
	  REFERENCES "DB_JT"."KP_DEF_LISTBUNKA" ("ID") ENABLE;


PROMPT Completed KP_DEF_LISTBUNKASUM.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_LISTBUNKAUCET.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DEF_LISTBUNKAUCET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DEF_LISTBUNKAUCET
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET" ADD CONSTRAINT "FK_KPDEFLISTBUNKAUCET_LIST" FOREIGN KEY ("ID_DEFLISTBUNKA")
	  REFERENCES "DB_JT"."KP_DEF_LISTBUNKA" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET" ADD CONSTRAINT "FK_KPDEFLISTBUNKAUCET_SUMA" FOREIGN KEY ("C_UCETSUMA")
	  REFERENCES "DB_JT"."KP_CIS_UCETSUMATYP" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DEF_LISTBUNKAUCET" ADD CONSTRAINT "FK_KPDEFLISTBUNKAUCET_KTGDKLD" FOREIGN KEY ("ID_KTGDOKLAD")
	  REFERENCES "DB_JT"."KP_KTG_DOKLAD" ("ID") ENABLE;


PROMPT Completed KP_DEF_LISTBUNKAUCET.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_NASTROJOPERACE.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DEF_NASTROJOPERACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DEF_NASTROJOPERACE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_NASTROJOPERACE" ADD CONSTRAINT "FK_KPDEFNASTOPER_SUBJECT" FOREIGN KEY ("ID_CISSUBJECT")
	  REFERENCES "DB_JT"."KP_CIS_SUBJECT" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DEF_NASTROJOPERACE" ADD CONSTRAINT "FK_KPDEFNASTOPER_TYPNAST" FOREIGN KEY ("ID_KTGTYPNASTROJE")
	  REFERENCES "DB_JT"."KP_KTG_TYPNASTROJE" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DEF_NASTROJOPERACE" ADD CONSTRAINT "FK_KPDEFNASTOPER_TYPOPER" FOREIGN KEY ("ID_KTGTYPOPERACE")
	  REFERENCES "DB_JT"."KP_KTG_TYPOPERACE" ("ID") ENABLE;


PROMPT Completed KP_DEF_NASTROJOPERACE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_UCET2UCETUNIF.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DEF_UCET2UCETUNIF.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DEF_UCET2UCETUNIF
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_UCET2UCETUNIF" ADD CONSTRAINT "FK_UCET2UCETUNIF_SUBJ" FOREIGN KEY ("ID_CISSUBJECT")
	  REFERENCES "DB_JT"."KP_CIS_SUBJECT" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DEF_UCET2UCETUNIF" ADD CONSTRAINT "FK_UCET2UCETUNIF_UU" FOREIGN KEY ("ID_CISUCETUNIF")
	  REFERENCES "DB_JT"."KP_CIS_UCETUNIF" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DEF_UCET2UCETUNIF" ADD CONSTRAINT "FK_KPDEFUCET2UCETUNIF_SUMA" FOREIGN KEY ("C_UCETSUMA")
	  REFERENCES "DB_JT"."KP_CIS_UCETSUMATYP" ("ID") ENABLE;


PROMPT Completed KP_DEF_UCET2UCETUNIF.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_UCETBUSINESSLINIE.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DEF_UCETBUSINESSLINIE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DEF_UCETBUSINESSLINIE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_UCETBUSINESSLINIE" ADD CONSTRAINT "FK_DEFUCETBUSINESSLINIE_BL" FOREIGN KEY ("ID_CISBUSINESSLINIE")
	  REFERENCES "DB_JT"."KP_CIS_BUSINESSLINIE" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DEF_UCETBUSINESSLINIE" ADD CONSTRAINT "FK__DEFUCETBUSINESSLINIE_SUBJ" FOREIGN KEY ("ID_CISSUBJECT")
	  REFERENCES "DB_JT"."KP_CIS_SUBJECT" ("ID") ENABLE;


PROMPT Completed KP_DEF_UCETBUSINESSLINIE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_UCETPORTFOLIO.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DEF_UCETPORTFOLIO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DEF_UCETPORTFOLIO
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_UCETPORTFOLIO" ADD CONSTRAINT "FK_KPUCETPORTFOLIO_UCSPOL" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_DEF_UCETPORTFOLIO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_UCETVAZBAUCET.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DEF_UCETVAZBAUCET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DEF_UCETVAZBAUCET
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_UCETVAZBAUCET" ADD CONSTRAINT "FK_KPDEFUCETVAZBAUCET" FOREIGN KEY ("ID_TYP")
	  REFERENCES "DB_JT"."KP_CIS_UCETVAZBAUCETTYP" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DEF_UCETVAZBAUCET" ADD CONSTRAINT "FK_KPDEFUCETVAZBAUCET_DOKLAD" FOREIGN KEY ("ID_KTGDOKLAD")
	  REFERENCES "DB_JT"."KP_KTG_DOKLAD" ("ID") ENABLE;


PROMPT Completed KP_DEF_UCETVAZBAUCET.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_UNIFUCETBEZZARAZENI.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DEF_UNIFUCETBEZZARAZENI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DEF_UNIFUCETBEZZARAZENI
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_UNIFUCETBEZZARAZENI" ADD CONSTRAINT "FK_KPUNIFZARAZENI_KTGDOKLAD" FOREIGN KEY ("ID_KTGDOKLAD")
	  REFERENCES "DB_JT"."KP_KTG_DOKLAD" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_DEF_UNIFUCETBEZZARAZENI" ADD CONSTRAINT "FK_KPUNIFZARAZENI_UNIFUCET" FOREIGN KEY ("ID_CISUCETUNIF")
	  REFERENCES "DB_JT"."KP_CIS_UCETUNIF" ("ID") ENABLE;


PROMPT Completed KP_DEF_UNIFUCETBEZZARAZENI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DEF_VYJIMKAUCETPRODUKT.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_DEF_VYJIMKAUCETPRODUKT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_DEF_VYJIMKAUCETPRODUKT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_DEF_VYJIMKAUCETPRODUKT" ADD CONSTRAINT "FK_DEFVYJUCETPRODUKT_SUBJECT" FOREIGN KEY ("ID_CISSUBJECT")
	  REFERENCES "DB_JT"."KP_CIS_SUBJECT" ("ID") ENABLE;


PROMPT Completed KP_DEF_VYJIMKAUCETPRODUKT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_DOKLAD.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_DOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_DOKLAD
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_DOKLAD" ADD CONSTRAINT "FK_KPKTGDOKLAD_DOKLAD" FOREIGN KEY ("ID_CISDOKLAD")
	  REFERENCES "DB_JT"."KP_CIS_DOKLAD" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_DOKLAD" ADD CONSTRAINT "FK_KPKTGDOKLAD_SUBJECT" FOREIGN KEY ("ID_CISSUBJECT")
	  REFERENCES "DB_JT"."KP_CIS_SUBJECT" ("ID") ENABLE;


PROMPT Completed KP_KTG_DOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_DOKLADMAJUCASTVYJIMKA.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_DOKLADMAJUCASTVYJIMKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_DOKLADMAJUCASTVYJIMKA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_DOKLADMAJUCASTVYJIMKA" ADD CONSTRAINT "FK_KPDEFDOKLADMUVYJ_DOKLAD" FOREIGN KEY ("ID_KTGDOKLAD")
	  REFERENCES "DB_JT"."KP_KTG_DOKLAD" ("ID") ENABLE;


PROMPT Completed KP_KTG_DOKLADMAJUCASTVYJIMKA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_EMAILZPRAVY.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_EMAILZPRAVY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_EMAILZPRAVY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_EMAILZPRAVY" ADD CONSTRAINT "FK_KTGEMAILTYPE" FOREIGN KEY ("ID_MSGTYPE")
	  REFERENCES "DB_JT"."KP_CIS_EMAILZPRAVY" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_EMAILZPRAVY" ADD CONSTRAINT "FK_KTGEMAILUSER" FOREIGN KEY ("ID_KTGAPPUSER")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;


PROMPT Completed KP_KTG_EMAILZPRAVY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_EVIADMINSPOLECNOST.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_EVIADMINSPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_EVIADMINSPOLECNOST
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_EVIADMINSPOLECNOST" ADD CONSTRAINT "FK_KTGEVIADMINSPOL_EXTADMIN" FOREIGN KEY ("ID_EXTERNIADMIN")
	  REFERENCES "DB_JT"."KP_KTG_EVIEXTERNIADMIN" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_EVIADMINSPOLECNOST" ADD CONSTRAINT "FK_KTGEVIADMINSPOL_STAT" FOREIGN KEY ("S_STAT")
	  REFERENCES "DB_JT"."KP_CIS_STAT" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_EVIADMINSPOLECNOST" ADD CONSTRAINT "FK_KTGEVIADMINSPOL_STATUS" FOREIGN KEY ("ID_STATUS")
	  REFERENCES "DB_JT"."KP_CIS_EVISTATUS" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_EVIADMINSPOLECNOST" ADD CONSTRAINT "FK_KTGEVIADMINSPOL_UCSPOL" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_KTG_EVIADMINSPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_EVIEXTERNIADMIN.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_EVIEXTERNIADMIN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_EVIEXTERNIADMIN
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_EVIEXTERNIADMIN" ADD CONSTRAINT "FK_EVIEXTERNIADMIN_STAT" FOREIGN KEY ("S_STAT")
	  REFERENCES "DB_JT"."KP_CIS_STAT" ("ID") ENABLE;


PROMPT Completed KP_KTG_EVIEXTERNIADMIN.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_EVISIDLO.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_EVISIDLO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_EVISIDLO
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_EVISIDLO" ADD CONSTRAINT "FK_KTGEVISIDLO_ADMINSPOL" FOREIGN KEY ("ID_ADMINSPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_EVIADMINSPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_EVISIDLO" ADD CONSTRAINT "FK_KTGEVISIDLO_STAT" FOREIGN KEY ("S_STAT")
	  REFERENCES "DB_JT"."KP_CIS_STAT" ("ID") ENABLE;


PROMPT Completed KP_KTG_EVISIDLO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_EVISTATUTARNIZASTUPCE.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_EVISTATUTARNIZASTUPCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_EVISTATUTARNIZASTUPCE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_EVISTATUTARNIZASTUPCE" ADD CONSTRAINT "FK_KTGEVISTATZASTUPCE_SPOL" FOREIGN KEY ("ID_KTGSPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_SPOLECNOST" ("ID") ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_KTG_EVISTATUTARNIZASTUPCE" ADD CONSTRAINT "FK_KTGEVISTATZASTUPCE_TYP" FOREIGN KEY ("ID_TYP")
	  REFERENCES "DB_JT"."KP_CIS_EVITYPSTATZASTUPCE" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_EVISTATUTARNIZASTUPCE" ADD CONSTRAINT "FK_KTGEVISTATZASTUP_ADMINSPOL" FOREIGN KEY ("ID_ADMINSPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_EVIADMINSPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_KTG_EVISTATUTARNIZASTUPCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_FINANCNIINVESTICE.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_FINANCNIINVESTICE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_FINANCNIINVESTICE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_FINANCNIINVESTICE" ADD CONSTRAINT "FK_KPKTGFININV_MENA" FOREIGN KEY ("S_MENA")
	  REFERENCES "DB_JT"."KP_CIS_MENA" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_FINANCNIINVESTICE" ADD CONSTRAINT "FK_KPKTGFININV_SPOLECNOST" FOREIGN KEY ("ID_KTGSPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_SPOLECNOST" ("ID") ENABLE NOVALIDATE;


PROMPT Completed KP_KTG_FINANCNIINVESTICE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_FININVESTICEEMISE.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_FININVESTICEEMISE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_FININVESTICEEMISE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_FININVESTICEEMISE" ADD CONSTRAINT "FK_KPFININVEMISE_IDFI" FOREIGN KEY ("ID_KTGFINANCNIINVESTICE")
	  REFERENCES "DB_JT"."KP_KTG_FINANCNIINVESTICE" ("ID") ENABLE;


PROMPT Completed KP_KTG_FININVESTICEEMISE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_IFRSPRAVIDLO.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_IFRSPRAVIDLO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_IFRSPRAVIDLO
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLO" ADD CONSTRAINT "FK_KPKPIFRSPRAVIDLO_SPOLECNOST" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLO" ADD CONSTRAINT "FK_KPKPIFRSPRAVIDLO_TYP" FOREIGN KEY ("ID_CISIFRSTYPPRAVIDLO")
	  REFERENCES "DB_JT"."KP_CIS_IFRSTYPPRAVIDLO" ("ID") ENABLE;


PROMPT Completed KP_KTG_IFRSPRAVIDLO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_IFRSPRAVIDLODETAIL.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_IFRSPRAVIDLODETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_IFRSPRAVIDLODETAIL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLODETAIL" ADD CONSTRAINT "FK_IFRSDETAIL_SPOLECNOST" FOREIGN KEY ("ID_KTGSPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_SPOLECNOST" ("ID") ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLODETAIL" ADD CONSTRAINT "FK_KPIFRSPRAVDETAIL_MENA" FOREIGN KEY ("S_MENA")
	  REFERENCES "DB_JT"."KP_CIS_MENA" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLODETAIL" ADD CONSTRAINT "FK_KPIFRSPRAVDETAIL_SPOLECNOST" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLODETAIL" ADD CONSTRAINT "FK_KPKPIFRSPRAVDETAIL_PRAVIDLO" FOREIGN KEY ("ID_KTGIFRSPRAVIDLO")
	  REFERENCES "DB_JT"."KP_KTG_IFRSPRAVIDLO" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLODETAIL" ADD CONSTRAINT "FK_KPKPIFRSPRAVDETAIL_TYP" FOREIGN KEY ("ID_CISIFRSPRAVDETAILTYP")
	  REFERENCES "DB_JT"."KP_CIS_IFRSTYPPRAVIDLODETAIL" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLODETAIL" ADD CONSTRAINT "FK_IFRSPRAVIDLODETAIL_UNIFMD" FOREIGN KEY ("ID_UCETMD_UNIF")
	  REFERENCES "DB_JT"."KP_CIS_UCETUNIF" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_IFRSPRAVIDLODETAIL" ADD CONSTRAINT "FK_IFRSPRAVIDLODETAIL_UNIFD" FOREIGN KEY ("ID_UCETD_UNIF")
	  REFERENCES "DB_JT"."KP_CIS_UCETUNIF" ("ID") ENABLE;


PROMPT Completed KP_KTG_IFRSPRAVIDLODETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_MAJETKOVEUCASTIVYJIMKY.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_MAJETKOVEUCASTIVYJIMKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_MAJETKOVEUCASTIVYJIMKY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_MAJETKOVEUCASTIVYJIMKY" ADD CONSTRAINT "FK_MAJETKOVEUCASTIVYJIMKY_SPOL" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_KTG_MAJETKOVEUCASTIVYJIMKY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_ODBOR.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_ODBOR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_ODBOR
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_ODBOR" ADD CONSTRAINT "FK_ODBORUCSPOL" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") DISABLE;
  ALTER TABLE "DB_JT"."KP_KTG_ODBOR" ADD CONSTRAINT "FK_ODBOR_IFRSSEGMENT" FOREIGN KEY ("ID_IFRSSEGMENT")
	  REFERENCES "DB_JT"."KP_CIS_IFRSSEGMENT" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_ODBOR" ADD CONSTRAINT "FK_ODBOR_IFRSSUBSEGMENT" FOREIGN KEY ("ID_IFRSSUBSEGMENT")
	  REFERENCES "DB_JT"."KP_CIS_IFRSSUBSEGMENT" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_ODBOR" ADD CONSTRAINT "FK_ODBOR_MNGSEGMENT" FOREIGN KEY ("ID_MNGSEGMENT")
	  REFERENCES "DB_JT"."KP_CIS_MNGSEGMENT" ("ID") ENABLE;


PROMPT Completed KP_KTG_ODBOR.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_PBKLIENT.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_PBKLIENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_PBKLIENT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_PBKLIENT" ADD CONSTRAINT "FK_KTGPBKIENT_KONTAKT" FOREIGN KEY ("ID_KONTAKT")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_PBKLIENT" ADD CONSTRAINT "FK_KTGPBKIENT_KATEGORIE" FOREIGN KEY ("ID_KATEGORIE")
	  REFERENCES "DB_JT"."KP_CIS_PBKATEGORIEKLIENTA" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_PBKLIENT" ADD CONSTRAINT "FK_KTGPBKIENT_STATUS" FOREIGN KEY ("ID_STATUS")
	  REFERENCES "DB_JT"."KP_CIS_PBSTATUSKLIENTA" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_PBKLIENT" ADD CONSTRAINT "FK_KTGPBKIENT_SKUPINA" FOREIGN KEY ("ID_SKUPINA")
	  REFERENCES "DB_JT"."KP_KTG_PBSKUPINA" ("ID") ENABLE;


PROMPT Completed KP_KTG_PBKLIENT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_PROJEKT.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_PROJEKT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_PROJEKT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_PROJEKT" ADD CONSTRAINT "FK_KPKTGPROJEKT_STATUS" FOREIGN KEY ("ID_STATUS")
	  REFERENCES "DB_JT"."KP_CIS_PROJEKTSTATUS" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_PROJEKT" ADD CONSTRAINT "FK_KTGPROJEKT_NAVRH" FOREIGN KEY ("ID_PROJEKTNAVRH")
	  REFERENCES "DB_JT"."KP_KTG_PROJEKTNAVRH" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_PROJEKT" ADD CONSTRAINT "FK_PROJEKT_MNGSEGMENT" FOREIGN KEY ("ID_MNGSEGMENT")
	  REFERENCES "DB_JT"."KP_CIS_MNGSEGMENT" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_PROJEKT" ADD CONSTRAINT "FK_PROJEKT_TYPBILANCE" FOREIGN KEY ("ID_TYPBILANCE")
	  REFERENCES "DB_JT"."KP_CIS_TYPPROJEKTOVEBILANCE" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_PROJEKT" ADD CONSTRAINT "FK_PROJEKT_TYPBUDGETU" FOREIGN KEY ("ID_TYPBUDGETU")
	  REFERENCES "DB_JT"."KP_CIS_TYPBUDGETUPROJEKTU" ("ID") ENABLE;


PROMPT Completed KP_KTG_PROJEKT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_PROJEKTMEMORANDUM.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_PROJEKTMEMORANDUM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_PROJEKTMEMORANDUM
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_PROJEKTMEMORANDUM" ADD CONSTRAINT "FK_KTGPROJEKTMEM_IDPROJEKT" FOREIGN KEY ("ID_KTGPROJEKT")
	  REFERENCES "DB_JT"."KP_KTG_PROJEKT" ("ID") ENABLE;


PROMPT Completed KP_KTG_PROJEKTMEMORANDUM.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SPOLECNOST.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_SPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_SPOLECNOST
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST" ADD CONSTRAINT "FK_KPSPOLECNOST" FOREIGN KEY ("ID_KTG_EXTERNIRATING")
	  REFERENCES "DB_JT"."KP_KTG_EXTERNIRATING" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST" ADD CONSTRAINT "FK_KP_KTG_SPOLEC" FOREIGN KEY ("ID_KTGSPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST" ADD CONSTRAINT "FK_KP_KTG_SPOLECZEME" FOREIGN KEY ("S_COUNTRY")
	  REFERENCES "DB_JT"."KP_CIS_STAT" ("ID") ENABLE;


PROMPT Completed KP_KTG_SPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SPOLECNOSTSPRAVCEKO.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_SPOLECNOSTSPRAVCEKO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_SPOLECNOSTSPRAVCEKO
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOSTSPRAVCEKO" ADD CONSTRAINT "FK_SPOLSPRAVCEKO_IDSPOLECNOST" FOREIGN KEY ("ID_SPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_SPOLECNOST" ("ID") ENABLE NOVALIDATE;
  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOSTSPRAVCEKO" ADD CONSTRAINT "FK_SPOLSPRAVCEKO_DATABAZE" FOREIGN KEY ("ID_DATABAZE")
	  REFERENCES "DB_JT"."KP_CIS_DATABAZE" ("ID") ENABLE;


PROMPT Completed KP_KTG_SPOLECNOSTSPRAVCEKO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SPOLECNOSTVPRECHODU.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_SPOLECNOSTVPRECHODU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_SPOLECNOSTVPRECHODU
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOSTVPRECHODU" ADD CONSTRAINT "FK_KTGSPOLVPRECHODU_SPOL" FOREIGN KEY ("ID_KTGSPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_SPOLECNOST" ("ID") ENABLE NOVALIDATE;


PROMPT Completed KP_KTG_SPOLECNOSTVPRECHODU.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SPOLECNOST_GROUP.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_SPOLECNOST_GROUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_SPOLECNOST_GROUP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_SPOLECNOST_GROUP" ADD CONSTRAINT "FK_KPSPOLGROUP_SPOL" FOREIGN KEY ("ID_SPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_SPOLECNOST" ("ID") ENABLE NOVALIDATE;


PROMPT Completed KP_KTG_SPOLECNOST_GROUP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SUBKONSOLIDACE.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_SUBKONSOLIDACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_SUBKONSOLIDACE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACE" ADD CONSTRAINT "FK_KPSUBKONSOLIDACE_SKUPINA" FOREIGN KEY ("ID_KTGUCETNISKUPINA")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISKUPINA" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACE" ADD CONSTRAINT "FK_KPSUBKONSOLIDACE_SPOLECN" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACE" ADD CONSTRAINT "FK_KPSUBKONSOLIDACE_SPOLECNMAT" FOREIGN KEY ("ID_KTGUCETNISPOLECNOSTMATKA")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACE" ADD CONSTRAINT "FK_KPSUBKONSOLIDACE_SKUPINAVYJ" FOREIGN KEY ("ID_KTGUCETNISKUPINAVYJIMKA")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISKUPINA" ("ID") ENABLE;


PROMPT Completed KP_KTG_SUBKONSOLIDACE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SUBKONSOLIDACEETAPA.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_SUBKONSOLIDACEETAPA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_SUBKONSOLIDACEETAPA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACEETAPA" ADD CONSTRAINT "FK_KPSUBKONSETAPA_SPOL" FOREIGN KEY ("ID_KTGSUBKONSOLIDACE")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_KTG_SUBKONSOLIDACEETAPA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SUBKONSOLIDACEPRAVIDLO.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_SUBKONSOLIDACEPRAVIDLO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_SUBKONSOLIDACEPRAVIDLO
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACEPRAVIDLO" ADD CONSTRAINT "FK_KPKPSUBKONPRAVIDLO_TYP" FOREIGN KEY ("ID_CISIFRSTYPPRAVIDLO")
	  REFERENCES "DB_JT"."KP_CIS_IFRSTYPPRAVIDLO" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACEPRAVIDLO" ADD CONSTRAINT "FK_KPSUBKONPRAVIDLO_ETAPA" FOREIGN KEY ("ID_KTGSUBKONSOLIDACEETAPA")
	  REFERENCES "DB_JT"."KP_KTG_SUBKONSOLIDACEETAPA" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACEPRAVIDLO" ADD CONSTRAINT "FK_KPSUBKONPRAVIDLO_SPOLECNOST" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLIDACEPRAVIDLO" ADD CONSTRAINT "FK_KPSUBKONPRAVIDLO_SUB" FOREIGN KEY ("ID_KTGSUBKONSOLIDACE")
	  REFERENCES "DB_JT"."KP_KTG_SUBKONSOLIDACE" ("ID_KTGUCETNISPOLECNOST") ENABLE;


PROMPT Completed KP_KTG_SUBKONSOLIDACEPRAVIDLO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_SUBKONSOLPRAVIDLODETAIL.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_SUBKONSOLPRAVIDLODETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_SUBKONSOLPRAVIDLODETAIL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLPRAVIDLODETAIL" ADD CONSTRAINT "FK_KPSUBKONPRAVDETAIL_PRAVIDLO" FOREIGN KEY ("ID_KTGSUBKONSOLIDACEPRAVIDLO")
	  REFERENCES "DB_JT"."KP_KTG_SUBKONSOLIDACEPRAVIDLO" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLPRAVIDLODETAIL" ADD CONSTRAINT "FK_KPSUBKONPRAVDETAIL_SPOL" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLPRAVIDLODETAIL" ADD CONSTRAINT "FK_KPSUBKONPRAVDETAIL_SUBK" FOREIGN KEY ("ID_KTGSUBKONSOLIDACE")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLPRAVIDLODETAIL" ADD CONSTRAINT "FK_KPSUBKONPRAVDETAIL_TYP" FOREIGN KEY ("ID_CISIFRSPRAVDETAILTYP")
	  REFERENCES "DB_JT"."KP_CIS_IFRSTYPPRAVIDLODETAIL" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_SUBKONSOLPRAVIDLODETAIL" ADD CONSTRAINT "FK_KTGSUBPRAVIDLODETAIL_PS" FOREIGN KEY ("ID_PROTISTRANA")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_KTG_SUBKONSOLPRAVIDLODETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_TYPOPERACE.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_TYPOPERACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_TYPOPERACE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_TYPOPERACE" ADD CONSTRAINT "FK_KPKTGTYPOPERACE_TYPNASTR" FOREIGN KEY ("ID_TYPNASTROJE")
	  REFERENCES "DB_JT"."KP_KTG_TYPNASTROJE" ("ID") ENABLE;


PROMPT Completed KP_KTG_TYPOPERACE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_TYPSUBETAPA.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_TYPSUBETAPA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_TYPSUBETAPA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_TYPSUBETAPA" ADD CONSTRAINT "FK_TYPSUBETAPA_TYP" FOREIGN KEY ("ID_CISTYPETAPA")
	  REFERENCES "DB_JT"."KP_CIS_TYPSUBETAPA" ("ID") ENABLE;


PROMPT Completed KP_KTG_TYPSUBETAPA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_TYPSUBPRAVIDLO.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_TYPSUBPRAVIDLO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_TYPSUBPRAVIDLO
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_TYPSUBPRAVIDLO" ADD CONSTRAINT "FK_TYPSUBPRAVIDLO_TYP" FOREIGN KEY ("ID_CISIFRSTYPPRAVIDLO")
	  REFERENCES "DB_JT"."KP_CIS_IFRSTYPPRAVIDLO" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_TYPSUBPRAVIDLO" ADD CONSTRAINT "FK_TYPSUBPRAVIDLO_ETAPA" FOREIGN KEY ("ID_KTGTYPSUBETAPA")
	  REFERENCES "DB_JT"."KP_KTG_TYPSUBETAPA" ("ID") ENABLE;


PROMPT Completed KP_KTG_TYPSUBPRAVIDLO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_TYPSUBPRAVIDLODETAIL.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_TYPSUBPRAVIDLODETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_TYPSUBPRAVIDLODETAIL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_TYPSUBPRAVIDLODETAIL" ADD CONSTRAINT "FK_TYPSUBPRAVDETAIL_PRAVIDLO" FOREIGN KEY ("ID_KTGTYPSUBPRAVIDLO")
	  REFERENCES "DB_JT"."KP_KTG_TYPSUBPRAVIDLO" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_TYPSUBPRAVIDLODETAIL" ADD CONSTRAINT "FK_TYPSUBPRAVDETAIL_TYP" FOREIGN KEY ("ID_CISIFRSPRAVDETAILTYP")
	  REFERENCES "DB_JT"."KP_CIS_IFRSTYPPRAVIDLODETAIL" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_TYPSUBPRAVIDLODETAIL" ADD CONSTRAINT "FK_KTGSUBPRAVDETAIL_PS" FOREIGN KEY ("ID_PROTISTRANA")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_KTG_TYPSUBPRAVIDLODETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISKUPINA.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_UCETNISKUPINA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_UCETNISKUPINA" ADD CONSTRAINT "FK_KTGUCSKUP_CISBANKA" FOREIGN KEY ("ID_CISBANKA")
	  REFERENCES "DB_JT"."CIS_BANKA" ("ID") ENABLE;


PROMPT Completed KP_KTG_UCETNISKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISPOLECNOST.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_UCETNISPOLECNOST
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" ADD CONSTRAINT "FK_KPUCSPOLECNOST_DB" FOREIGN KEY ("ID_CISDATABAZE")
	  REFERENCES "DB_JT"."KP_CIS_DATABAZE" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" ADD CONSTRAINT "FK_KPUCSPOLECNOST_KATEG" FOREIGN KEY ("ID_KATEGORIE")
	  REFERENCES "DB_JT"."KP_CIS_SPOLECNOSTKATEGORIE" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" ADD CONSTRAINT "FK_KPUCSPOLECNOST_KATSPOL" FOREIGN KEY ("ID_CISKATSPOL")
	  REFERENCES "DB_JT"."KP_CIS_KATSPOL" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" ADD CONSTRAINT "FK_KPUCSPOLECNOST_LOCALE" FOREIGN KEY ("S_LOCALE")
	  REFERENCES "DB_JT"."CIS_LOCALE" ("S_LOCALE") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" ADD CONSTRAINT "FK_KPUCSPOLECNOST_SUBJECT" FOREIGN KEY ("ID_CISSUBJECT")
	  REFERENCES "DB_JT"."KP_CIS_SUBJECT" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" ADD CONSTRAINT "FK_KPUCSPOL_ADMIN" FOREIGN KEY ("ID_ADMINISTRATOR")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" ADD CONSTRAINT "FK_KPUCSPOL_ODBOR" FOREIGN KEY ("ID_KTGODBOR")
	  REFERENCES "DB_JT"."KP_KTG_ODBOR" ("ID") DISABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" ADD CONSTRAINT "FK_KPUCSPOL_ODPOS" FOREIGN KEY ("ID_ODPOVEDNAOSOBA")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" ADD CONSTRAINT "FK_KPUCSPOL_PROJEKT" FOREIGN KEY ("ID_KTGPROJEKT")
	  REFERENCES "DB_JT"."KP_KTG_PROJEKT" ("ID") DISABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" ADD CONSTRAINT "FK_KPUCSPOL_ZODPUC" FOREIGN KEY ("ID_ZODPOVEDNAUCETNI")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" ADD CONSTRAINT "FK_KTGUCETNISPOLECNOST_MNGSEG" FOREIGN KEY ("ID_MNGSEGMENT")
	  REFERENCES "DB_JT"."KP_CIS_MNGSEGMENT" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" ADD CONSTRAINT "FK_KTGUCETNISPOL_TYPPROJ" FOREIGN KEY ("ID_TYPPROJEKTU")
	  REFERENCES "DB_JT"."KP_CIS_TYPPROJEKTU" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" ADD CONSTRAINT "FK_KPUCSPOL_CENTRALA" FOREIGN KEY ("ID_CENTRALA")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST" ADD CONSTRAINT "FK_KPUCSPOL_SPRAVCE" FOREIGN KEY ("ID_SPRAVCEKONSOLIDACE")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;


PROMPT Completed KP_KTG_UCETNISPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISPOLECNOST_LINK.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISPOLECNOST_LINK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_UCETNISPOLECNOST_LINK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_LINK" ADD CONSTRAINT "FK_KPUCSPOLL_DB" FOREIGN KEY ("ID_CISDATABAZE")
	  REFERENCES "DB_JT"."KP_CIS_DATABAZE" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_LINK" ADD CONSTRAINT "FK_KPUCSPOLL_SPOLECN" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_LINK" ADD CONSTRAINT "FK_KPUCSPOLL_SUBJECT" FOREIGN KEY ("ID_CISSUBJECT")
	  REFERENCES "DB_JT"."KP_CIS_SUBJECT" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_LINK" ADD CONSTRAINT "FK_UCSPOLL_MENA" FOREIGN KEY ("S_MENA")
	  REFERENCES "DB_JT"."KP_CIS_MENA" ("ID") ENABLE;


PROMPT Completed KP_KTG_UCETNISPOLECNOST_LINK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCETNISPOLECNOST_ZAMKY.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_UCETNISPOLECNOST_ZAMKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_UCETNISPOLECNOST_ZAMKY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_UCETNISPOLECNOST_ZAMKY" ADD CONSTRAINT "FK_KPKTGUCSPOLZAMKY_UCSPOL" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_KTG_UCETNISPOLECNOST_ZAMKY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_UCSPOLPREDAVANI.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_UCSPOLPREDAVANI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_UCSPOLPREDAVANI
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_UCSPOLPREDAVANI" ADD CONSTRAINT "FK_KTGUCSPOLPREDAVANI_KAT" FOREIGN KEY ("ID_CISPRENOSKATEGORIE")
	  REFERENCES "DB_JT"."KP_CIS_PRENOSKATEGORIE" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCSPOLPREDAVANI" ADD CONSTRAINT "FK_KTGUCSPOLPREDAVANI_PRIO" FOREIGN KEY ("ID_CISPRENOSPRIORITA")
	  REFERENCES "DB_JT"."KP_CIS_PRENOSPRIORITA" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_KTG_UCSPOLPREDAVANI" ADD CONSTRAINT "FK_KTGUCSPOLPREDAVANI_UCSPOL" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_KTG_UCSPOLPREDAVANI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_USEK.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_USEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_USEK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_USEK" ADD CONSTRAINT "FK_USEKUCSPOL" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_KTG_USEK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_KTG_ZISKSR.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_KTG_ZISKSR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_KTG_ZISKSR
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_KTG_ZISKSR" ADD CONSTRAINT "FK_KPKTGZISKSR_SKUPINA" FOREIGN KEY ("ID_SKUPINA")
	  REFERENCES "DB_JT"."KP_CIS_ZISKSRSKUPINA" ("ID") ENABLE;


PROMPT Completed KP_KTG_ZISKSR.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_GENEROVANIZAMEK.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_LOG_GENEROVANIZAMEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_LOG_GENEROVANIZAMEK
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_LOG_GENEROVANIZAMEK" ADD CONSTRAINT "FK_KPLOGGENZAMEK_APPUSER" FOREIGN KEY ("ID_KTGAPPUSER")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;


PROMPT Completed KP_LOG_GENEROVANIZAMEK.sql
PROMPT


-- ============================================================================
-- Deploy: KP_LOG_GENZAMEKZAMITNUTI.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_LOG_GENZAMEKZAMITNUTI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_LOG_GENZAMEKZAMITNUTI
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_LOG_GENZAMEKZAMITNUTI" ADD CONSTRAINT "FK_KPGENZAMEKZAMIT_IDAPPUSER" FOREIGN KEY ("ID_KTGAPPUSER")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;


PROMPT Completed KP_LOG_GENZAMEKZAMITNUTI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_PARAMETRY.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_PARAMETRY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_PARAMETRY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_PARAMETRY" ADD CONSTRAINT "FK_KPPARAMETRY_SKUPINA" FOREIGN KEY ("ID_KTGUCETNISKUPINA")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISKUPINA" ("ID") ENABLE;


PROMPT Completed KP_PARAMETRY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_APPUSERSKUPINA.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_REL_APPUSERSKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_REL_APPUSERSKUPINA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_APPUSERSKUPINA" ADD CONSTRAINT "FK_RELAPPUSERSKUPINA_SKUPINA" FOREIGN KEY ("ID_UCETNISKUPINA")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISKUPINA" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_APPUSERSKUPINA" ADD CONSTRAINT "FK_RELAPPUSERSKUPINA_USER" FOREIGN KEY ("ID_KTGAPPUSER")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;


PROMPT Completed KP_REL_APPUSERSKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_APPUSER_DOCUCSPOL.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_REL_APPUSER_DOCUCSPOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_REL_APPUSER_DOCUCSPOL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_APPUSER_DOCUCSPOL" ADD CONSTRAINT "FK_RELUSERDOCSPOL_SPOL" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_APPUSER_DOCUCSPOL" ADD CONSTRAINT "FK_RELUSERDOCSPOL_USER" FOREIGN KEY ("ID_APPUSER")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;


PROMPT Completed KP_REL_APPUSER_DOCUCSPOL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_APPUSER_PROJEKT.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_REL_APPUSER_PROJEKT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_REL_APPUSER_PROJEKT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_APPUSER_PROJEKT" ADD CONSTRAINT "FK_RELUSERPROJEKTPROJEKT" FOREIGN KEY ("ID_KTGPROJEKT")
	  REFERENCES "DB_JT"."KP_KTG_PROJEKT" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_APPUSER_PROJEKT" ADD CONSTRAINT "FK_RELUSERPROJEKTUSER" FOREIGN KEY ("ID_APPUSER")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;


PROMPT Completed KP_REL_APPUSER_PROJEKT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_APPUSER_SPOLECNOSTPRAVO.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_REL_APPUSER_SPOLECNOSTPRAVO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_REL_APPUSER_SPOLECNOSTPRAVO
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_APPUSER_SPOLECNOSTPRAVO" ADD CONSTRAINT "FK_RELSPOLPRAVO" FOREIGN KEY ("ID_KTGCISSPOLECNOSTPRAVO")
	  REFERENCES "DB_JT"."KP_CIS_SPOLECNOSTPRAVO" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_APPUSER_SPOLECNOSTPRAVO" ADD CONSTRAINT "FK_RELUSERSPOLPRAVOSPOL" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_REL_APPUSER_SPOLECNOSTPRAVO.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_CENNYPAPIRINDEX.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_REL_CENNYPAPIRINDEX.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_REL_CENNYPAPIRINDEX
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_CENNYPAPIRINDEX" ADD CONSTRAINT "FK_RELCENNYPAPIRINDEX_CP" FOREIGN KEY ("ID_CENNYPAPIR")
	  REFERENCES "DB_JT"."KTG_CENNYPAPIR" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_CENNYPAPIRINDEX" ADD CONSTRAINT "FK_RELCENNYPAPIRINDEX_INDEX" FOREIGN KEY ("ID_CPINDEX")
	  REFERENCES "DB_JT"."KP_CIS_CPINDEX" ("ID") ENABLE;


PROMPT Completed KP_REL_CENNYPAPIRINDEX.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_DBLINKAPPUSER.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_REL_DBLINKAPPUSER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_REL_DBLINKAPPUSER
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_DBLINKAPPUSER" ADD CONSTRAINT "FK_RELDBLINKAPPUSER_APPUSER" FOREIGN KEY ("ID_APPUSER")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_DBLINKAPPUSER" ADD CONSTRAINT "FK_RELDBLINKAPPUSER_DBLINK" FOREIGN KEY ("S_DBLINK")
	  REFERENCES "DB_JT"."KP_CIS_DATABAZE" ("S_DBLINK") DISABLE;


PROMPT Completed KP_REL_DBLINKAPPUSER.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_DOKLAD_ZDROJDAT.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_REL_DOKLAD_ZDROJDAT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_REL_DOKLAD_ZDROJDAT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_DOKLAD_ZDROJDAT" ADD CONSTRAINT "FK_KPRELDOKLADZDROJ_ZDROJ2" FOREIGN KEY ("ID_DOKLADZDROJDAT")
	  REFERENCES "DB_JT"."KP_DAT_DOKLADZDROJDAT" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed KP_REL_DOKLAD_ZDROJDAT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_GESTORTRANSAKCE.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_REL_GESTORTRANSAKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_REL_GESTORTRANSAKCE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_GESTORTRANSAKCE" ADD CONSTRAINT "KPRELGESTORTRANSAKCE_KP_FK_TTR" FOREIGN KEY ("ID_TYPTRANSAKCE")
	  REFERENCES "DB_JT"."KP_CIS_TYPTRANSAKCE" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_GESTORTRANSAKCE" ADD CONSTRAINT "KPRELGESTORTRANSAKCE_KP_FK_SEG" FOREIGN KEY ("ID_MNGSEGMENT")
	  REFERENCES "DB_JT"."KP_CIS_MNGSEGMENT" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_GESTORTRANSAKCE" ADD CONSTRAINT "KPRELGESTORTRANSAKCE_KP_FK_USR" FOREIGN KEY ("ID_APPUSER")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;


PROMPT Completed KP_REL_GESTORTRANSAKCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_GESTORTRANSAKCE_SPOL.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_REL_GESTORTRANSAKCE_SPOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_REL_GESTORTRANSAKCE_SPOL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_GESTORTRANSAKCE_SPOL" ADD CONSTRAINT "GESTORTRANSAKCESPOL_KP_FK_TTR" FOREIGN KEY ("ID_TYPTRANSAKCE")
	  REFERENCES "DB_JT"."KP_CIS_TYPTRANSAKCE" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_GESTORTRANSAKCE_SPOL" ADD CONSTRAINT "GESTORTRANSAKCESPOL_KP_FK_SPOL" FOREIGN KEY ("ID_SPOL")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_GESTORTRANSAKCE_SPOL" ADD CONSTRAINT "GESTORTRANSAKCESPOL_KP_FK_USR" FOREIGN KEY ("ID_APPUSER")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;


PROMPT Completed KP_REL_GESTORTRANSAKCE_SPOL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_MISUROVENSCHVALOVANI.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_REL_MISUROVENSCHVALOVANI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_REL_MISUROVENSCHVALOVANI
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_MISUROVENSCHVALOVANI" ADD CONSTRAINT "FK_KPRELMISUROVEN_TT" FOREIGN KEY ("ID_CISTYPTRANSAKCE")
	  REFERENCES "DB_JT"."KP_CIS_TYPTRANSAKCE" ("ID") ENABLE;


PROMPT Completed KP_REL_MISUROVENSCHVALOVANI.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_ODBOR_TRANSAKCE.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_REL_ODBOR_TRANSAKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_REL_ODBOR_TRANSAKCE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_ODBOR_TRANSAKCE" ADD CONSTRAINT "FK_KPRELODBORTRAN_UCSPOL" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_ODBOR_TRANSAKCE" ADD CONSTRAINT "FK_KPRELODBORTRAN_ZDROJDAT" FOREIGN KEY ("ID_DOKLADZDROJDAT")
	  REFERENCES "DB_JT"."KP_DAT_DOKLADZDROJDAT" ("ID") ON DELETE CASCADE ENABLE NOVALIDATE;


PROMPT Completed KP_REL_ODBOR_TRANSAKCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_PROJEKTCFEXPORT.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_REL_PROJEKTCFEXPORT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_REL_PROJEKTCFEXPORT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_PROJEKTCFEXPORT" ADD CONSTRAINT "FK_RELPROJCFEXPID" FOREIGN KEY ("ID_PROJEKT")
	  REFERENCES "DB_JT"."KP_KTG_PROJEKT" ("ID") ENABLE;


PROMPT Completed KP_REL_PROJEKTCFEXPORT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_PROJEKTUCSPOL.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_REL_PROJEKTUCSPOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_REL_PROJEKTUCSPOL
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_PROJEKTUCSPOL" ADD CONSTRAINT "FK_PROJEKTUCSPOL_PROJEKT" FOREIGN KEY ("ID_KTGPROJEKT")
	  REFERENCES "DB_JT"."KP_KTG_PROJEKT" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_PROJEKTUCSPOL" ADD CONSTRAINT "FK_PROJEKTUCSPOL_UCSPOL" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_REL_PROJEKTUCSPOL.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_PROJEKT_TRANSAKCE.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_REL_PROJEKT_TRANSAKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_REL_PROJEKT_TRANSAKCE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_PROJEKT_TRANSAKCE" ADD CONSTRAINT "FK_KPRELPROJEKTTRAN_PROJEKT" FOREIGN KEY ("ID_KTGPROJEKT")
	  REFERENCES "DB_JT"."KP_KTG_PROJEKT" ("ID") DISABLE;
  ALTER TABLE "DB_JT"."KP_REL_PROJEKT_TRANSAKCE" ADD CONSTRAINT "FK_KPRELPROJEKTTRAN_UCSPOL" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_PROJEKT_TRANSAKCE" ADD CONSTRAINT "FK_KPRELPROJEKTTRAN_ZDROJDAT" FOREIGN KEY ("ID_DOKLADZDROJDAT")
	  REFERENCES "DB_JT"."KP_DAT_DOKLADZDROJDAT" ("ID") ON DELETE CASCADE ENABLE NOVALIDATE;


PROMPT Completed KP_REL_PROJEKT_TRANSAKCE.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_PROJEKT_ZDROJDAT.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_REL_PROJEKT_ZDROJDAT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_REL_PROJEKT_ZDROJDAT
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_PROJEKT_ZDROJDAT" ADD CONSTRAINT "FK_RELPROJEKTZDROJDAT_DOKLAD" FOREIGN KEY ("ID_PROJEKTDOKLAD")
	  REFERENCES "DB_JT"."KP_DAT_PROJEKTDOKLAD" ("ID") ENABLE;


PROMPT Completed KP_REL_PROJEKT_ZDROJDAT.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_SPOLECNOSTKARTATYP.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_REL_SPOLECNOSTKARTATYP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_REL_SPOLECNOSTKARTATYP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_SPOLECNOSTKARTATYP" ADD CONSTRAINT "FK_KPRELSPOLKARTATYP_IDKTGSPOL" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_SPOLECNOSTKARTATYP" ADD CONSTRAINT "FK_KPRELSPOLKARTATYP_IDKARTAT" FOREIGN KEY ("ID_KARTATYP")
	  REFERENCES "DB_JT"."KP_DAT_KARTATYP" ("ID") ENABLE;


PROMPT Completed KP_REL_SPOLECNOSTKARTATYP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_SPOLECNOSTSKUPINAIC.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_REL_SPOLECNOSTSKUPINAIC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_REL_SPOLECNOSTSKUPINAIC
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_SPOLECNOSTSKUPINAIC" ADD CONSTRAINT "FK_RELSPOLSKUPINAIC_SPOL" FOREIGN KEY ("ID_KTGSPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_SPOLECNOST" ("ID") ENABLE NOVALIDATE;


PROMPT Completed KP_REL_SPOLECNOSTSKUPINAIC.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_SUBKONSOLIDACECLEN.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_REL_SUBKONSOLIDACECLEN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_REL_SUBKONSOLIDACECLEN
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN" ADD CONSTRAINT "FK_KPRELSUBKONCLEN_SKUPINA" FOREIGN KEY ("ID_KTGUCETNISKUPINA")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISKUPINA" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN" ADD CONSTRAINT "FK_KPRELSUBKONCLEN_TYPCLENSTVI" FOREIGN KEY ("ID_CISSUBTYPCLENSTVI")
	  REFERENCES "DB_JT"."KP_CIS_SUBTYPCLENSTVI" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN" ADD CONSTRAINT "FK_KPRELSUBKONSOLIDACE_SUBK" FOREIGN KEY ("ID_KTGSUBKONSOLIDACE")
	  REFERENCES "DB_JT"."KP_KTG_SUBKONSOLIDACE" ("ID_KTGUCETNISPOLECNOST") ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN" ADD CONSTRAINT "FK_KPRELUCETNISKUPINACLEN" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_REL_SUBKONSOLIDACECLEN.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_SUBKONSOLIDACECLEN_RP.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_REL_SUBKONSOLIDACECLEN_RP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_REL_SUBKONSOLIDACECLEN_RP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN_RP" ADD CONSTRAINT "FK_KPRELSUBKONCLENRP_SUBK" FOREIGN KEY ("ID_KTGSUBKONSOLIDACE")
	  REFERENCES "DB_JT"."KP_KTG_SUBKONSOLIDACE" ("ID_KTGUCETNISPOLECNOST") ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_SUBKONSOLIDACECLEN_RP" ADD CONSTRAINT "FK_KPRELSUBKONCLENRP_SPOL" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_REL_SUBKONSOLIDACECLEN_RP.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_UCETNISKUPINACLEN.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_REL_UCETNISKUPINACLEN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_REL_UCETNISKUPINACLEN
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_UCETNISKUPINACLEN" ADD CONSTRAINT "FK_KPUCETNISKUPINACLEN_SKUPINA" FOREIGN KEY ("ID_KTGUCETNISKUPINA")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISKUPINA" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_UCETNISKUPINACLEN" ADD CONSTRAINT "FK_KPUCETNISKUPINACLEN_SPOLECN" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_REL_UCETNISKUPINACLEN.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REL_UCETUNIFFLOW.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_REL_UCETUNIFFLOW.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_REL_UCETUNIFFLOW
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REL_UCETUNIFFLOW" ADD CONSTRAINT "FK_KPRELUUFLOW_UU" FOREIGN KEY ("ID_CISUCETUNIF")
	  REFERENCES "DB_JT"."KP_CIS_UCETUNIF" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_REL_UCETUNIFFLOW" ADD CONSTRAINT "FK_KPRELUUFLOW_FLOW" FOREIGN KEY ("ID_CISFLOW")
	  REFERENCES "DB_JT"."KP_CIS_FLOW" ("ID") ENABLE;


PROMPT Completed KP_REL_UCETUNIFFLOW.sql
PROMPT


-- ============================================================================
-- Deploy: KP_REP_DEFSKUPINA.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_REP_DEFSKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_REP_DEFSKUPINA
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_REP_DEFSKUPINA" ADD CONSTRAINT "FK_REPDEFSKUPINA_CIS" FOREIGN KEY ("ID_CISSKUPINA")
	  REFERENCES "DB_JT"."KP_REP_CISSKUPINA" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_REP_DEFSKUPINA" ADD CONSTRAINT "FK_REPDEFSKUPINA_SPOL" FOREIGN KEY ("ID_KTGSPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_SPOLECNOST" ("ID") ENABLE NOVALIDATE;


PROMPT Completed KP_REP_DEFSKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: KP_TMP_SUBVAZBYVYJIMKY.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_TMP_SUBVAZBYVYJIMKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_TMP_SUBVAZBYVYJIMKY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_TMP_SUBVAZBYVYJIMKY" ADD CONSTRAINT "FK_KPSUBVAZBYVYJIMKY_SPOL1" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST_1")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_TMP_SUBVAZBYVYJIMKY" ADD CONSTRAINT "FK_KPSUBVAZBYVYJIMKY_SPOL2" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST_2")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_TMP_SUBVAZBYVYJIMKY" ADD CONSTRAINT "FK_KPSUBVAZBYVYJIMKY_SUBKON" FOREIGN KEY ("ID_KTGSUBKONSOLIDACE")
	  REFERENCES "DB_JT"."KP_KTG_SUBKONSOLIDACE" ("ID_KTGUCETNISPOLECNOST") ENABLE;


PROMPT Completed KP_TMP_SUBVAZBYVYJIMKY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_TMP_VAZBY_VYJIMKY.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_TMP_VAZBY_VYJIMKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_TMP_VAZBY_VYJIMKY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_TMP_VAZBY_VYJIMKY" ADD CONSTRAINT "FK_KPTMPVAZBYVYJIMKY_UCSPOL" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KP_TMP_VAZBY_VYJIMKY" ADD CONSTRAINT "FK_KPTMPVAZBYVYJIMKY_USER" FOREIGN KEY ("ID_KTGAPPUSER")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;


PROMPT Completed KP_TMP_VAZBY_VYJIMKY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_TMP_VYJIMKYPROTOKOLU.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KP_TMP_VYJIMKYPROTOKOLU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KP_TMP_VYJIMKYPROTOKOLU
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KP_TMP_VYJIMKYPROTOKOLU" ADD CONSTRAINT "FK_TMPVYJIMKYPROTOKOLU_USSPOL" FOREIGN KEY ("ID_KTGUCETNISPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_UCETNISPOLECNOST" ("ID") ENABLE;


PROMPT Completed KP_TMP_VYJIMKYPROTOKOLU.sql
PROMPT


-- ============================================================================
-- Deploy: KTG_APPUSER.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KTG_APPUSER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KTG_APPUSER
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KTG_APPUSER" ADD CONSTRAINT "FK_KTG_APPUSER_NDRN_UCTN" FOREIGN KEY ("ID_NADRIZENAUCETNI")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KTG_APPUSER" ADD CONSTRAINT "FK_KTGAPPUSERCISSPOL" FOREIGN KEY ("ID_CISDOCUCSPOL")
	  REFERENCES "DB_JT"."KP_CIS_DOKUMENTSPOLTYP" ("ID") ENABLE;


PROMPT Completed KTG_APPUSER.sql
PROMPT


-- ============================================================================
-- Deploy: KTG_CENNYPAPIR.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying KTG_CENNYPAPIR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table KTG_CENNYPAPIR
--------------------------------------------------------

  ALTER TABLE "DB_JT"."KTG_CENNYPAPIR" ADD CONSTRAINT "FK_KTGCENNYPAPIR_MENA" FOREIGN KEY ("S_MENA")
	  REFERENCES "DB_JT"."KP_CIS_MENA" ("ID") ENABLE;
  ALTER TABLE "DB_JT"."KTG_CENNYPAPIR" ADD CONSTRAINT "FK_KTGCENNYPAPIR_SPOL" FOREIGN KEY ("ID_KTGSPOLECNOST")
	  REFERENCES "DB_JT"."KP_KTG_SPOLECNOST" ("ID") ENABLE NOVALIDATE;


PROMPT Completed KTG_CENNYPAPIR.sql
PROMPT


-- ============================================================================
-- Deploy: MD_ADDITIONAL_PROPERTIES.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_ADDITIONAL_PROPERTIES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_ADDITIONAL_PROPERTIES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_ADDITIONAL_PROPERTIES" ADD CONSTRAINT "MD_ADDITIONAL_PROPERTIES__FK1" FOREIGN KEY ("CONNECTION_ID_FK")
	  REFERENCES "DB_JT"."MD_CONNECTIONS" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_ADDITIONAL_PROPERTIES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_APPLICATIONFILES.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_APPLICATIONFILES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_APPLICATIONFILES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_APPLICATIONFILES" ADD CONSTRAINT "MD_FILE_APP_FK" FOREIGN KEY ("APPLICATIONS_ID_FK")
	  REFERENCES "DB_JT"."MD_APPLICATIONS" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_APPLICATIONFILES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_APPLICATIONS.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_APPLICATIONS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_APPLICATIONS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_APPLICATIONS" ADD CONSTRAINT "MD_APP_PROJ_FK" FOREIGN KEY ("PROJECT_ID_FK")
	  REFERENCES "DB_JT"."MD_PROJECTS" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_APPLICATIONS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_CATALOGS.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_CATALOGS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_CATALOGS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_CATALOGS" ADD CONSTRAINT "MD_CATALOGS_MD_CONNECTION_FK1" FOREIGN KEY ("CONNECTION_ID_FK")
	  REFERENCES "DB_JT"."MD_CONNECTIONS" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_CATALOGS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_COLUMNS.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_COLUMNS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_COLUMNS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_COLUMNS" ADD CONSTRAINT "MD_COLUMNS_MD_TABLES_FK1" FOREIGN KEY ("TABLE_ID_FK")
	  REFERENCES "DB_JT"."MD_TABLES" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_COLUMNS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_CONNECTIONS.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_CONNECTIONS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_CONNECTIONS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_CONNECTIONS" ADD CONSTRAINT "MD_CONNECTIONS_MD_PROJECT_FK1" FOREIGN KEY ("PROJECT_ID_FK")
	  REFERENCES "DB_JT"."MD_PROJECTS" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_CONNECTIONS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_CONSTRAINTS.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_CONSTRAINTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_CONSTRAINTS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_CONSTRAINTS" ADD CONSTRAINT "MD_CONSTRAINTS_MD_TABLES_FK1" FOREIGN KEY ("TABLE_ID_FK")
	  REFERENCES "DB_JT"."MD_TABLES" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_CONSTRAINTS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_CONSTRAINT_DETAILS.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_CONSTRAINT_DETAILS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_CONSTRAINT_DETAILS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_CONSTRAINT_DETAILS" ADD CONSTRAINT "MD_CONSTRAINT_DETAILS_MD__FK2" FOREIGN KEY ("COLUMN_ID_FK")
	  REFERENCES "DB_JT"."MD_COLUMNS" ("ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "DB_JT"."MD_CONSTRAINT_DETAILS" ADD CONSTRAINT "MD_CONSTRAINT_DETAILS_MD__FK1" FOREIGN KEY ("CONSTRAINT_ID_FK")
	  REFERENCES "DB_JT"."MD_CONSTRAINTS" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_CONSTRAINT_DETAILS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_DERIVATIVES.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_DERIVATIVES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_DERIVATIVES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_DERIVATIVES" ADD CONSTRAINT "MD_DERIVATIVES_MD_CONNECT_FK1" FOREIGN KEY ("DERIVED_CONNECTION_ID_FK")
	  REFERENCES "DB_JT"."MD_CONNECTIONS" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_DERIVATIVES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_FILE_ARTIFACTS.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_FILE_ARTIFACTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_FILE_ARTIFACTS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_FILE_ARTIFACTS" ADD CONSTRAINT "MD_ARTIFACT_FILE_FK" FOREIGN KEY ("APPLICATIONFILES_ID")
	  REFERENCES "DB_JT"."MD_APPLICATIONFILES" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_FILE_ARTIFACTS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_GROUPS.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_GROUPS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_GROUPS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_GROUPS" ADD CONSTRAINT "MD_GROUPS_MD_SCHEMAS_FK1" FOREIGN KEY ("SCHEMA_ID_FK")
	  REFERENCES "DB_JT"."MD_SCHEMAS" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_GROUPS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_GROUP_MEMBERS.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_GROUP_MEMBERS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_GROUP_MEMBERS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_GROUP_MEMBERS" ADD CONSTRAINT "MD_GROUPMEMBERS_MD_USERS_FK1" FOREIGN KEY ("USER_ID_FK")
	  REFERENCES "DB_JT"."MD_USERS" ("ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "DB_JT"."MD_GROUP_MEMBERS" ADD CONSTRAINT "MD_GROUPMEMBERS_MD_GROUPS_FK2" FOREIGN KEY ("GROUP_MEMBER_ID_FK")
	  REFERENCES "DB_JT"."MD_GROUPS" ("ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "DB_JT"."MD_GROUP_MEMBERS" ADD CONSTRAINT "MD_GROUPMEMBERS_MD_GROUPS_FK1" FOREIGN KEY ("GROUP_ID_FK")
	  REFERENCES "DB_JT"."MD_GROUPS" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_GROUP_MEMBERS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_GROUP_PRIVILEGES.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_GROUP_PRIVILEGES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_GROUP_PRIVILEGES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_GROUP_PRIVILEGES" ADD CONSTRAINT "MD_GROUP_PRIVILEGES_MD_GR_FK1" FOREIGN KEY ("GROUP_ID_FK")
	  REFERENCES "DB_JT"."MD_GROUPS" ("ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "DB_JT"."MD_GROUP_PRIVILEGES" ADD CONSTRAINT "MD_GROUP_PRIVILEGES_MD_PR_FK1" FOREIGN KEY ("PRIVILEGE_ID_FK")
	  REFERENCES "DB_JT"."MD_PRIVILEGES" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_GROUP_PRIVILEGES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_INDEXES.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_INDEXES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_INDEXES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_INDEXES" ADD CONSTRAINT "MD_INDEXES_MD_TABLES_FK1" FOREIGN KEY ("TABLE_ID_FK")
	  REFERENCES "DB_JT"."MD_TABLES" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_INDEXES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_INDEX_DETAILS.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_INDEX_DETAILS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_INDEX_DETAILS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_INDEX_DETAILS" ADD CONSTRAINT "MD_INDEX_DETAILS_MD_COLUM_FK1" FOREIGN KEY ("COLUMN_ID_FK")
	  REFERENCES "DB_JT"."MD_COLUMNS" ("ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "DB_JT"."MD_INDEX_DETAILS" ADD CONSTRAINT "MD_INDEX_DETAILS_MD_INDEX_FK1" FOREIGN KEY ("INDEX_ID_FK")
	  REFERENCES "DB_JT"."MD_INDEXES" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_INDEX_DETAILS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_MIGR_DEPENDENCY.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_MIGR_DEPENDENCY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_MIGR_DEPENDENCY
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_MIGR_DEPENDENCY" ADD CONSTRAINT "MIGR_DEPENDENCY_FK" FOREIGN KEY ("CONNECTION_ID_FK")
	  REFERENCES "DB_JT"."MD_CONNECTIONS" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_MIGR_DEPENDENCY.sql
PROMPT


-- ============================================================================
-- Deploy: MD_MIGR_PARAMETER.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_MIGR_PARAMETER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_MIGR_PARAMETER
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_MIGR_PARAMETER" ADD CONSTRAINT "MIGR_PARAMETER_FK" FOREIGN KEY ("CONNECTION_ID_FK")
	  REFERENCES "DB_JT"."MD_CONNECTIONS" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_MIGR_PARAMETER.sql
PROMPT


-- ============================================================================
-- Deploy: MD_MIGR_WEAKDEP.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_MIGR_WEAKDEP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_MIGR_WEAKDEP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_MIGR_WEAKDEP" ADD CONSTRAINT "MIGR_WEAKDEP_FK2" FOREIGN KEY ("SCHEMA_ID_FK")
	  REFERENCES "DB_JT"."MD_SCHEMAS" ("ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "DB_JT"."MD_MIGR_WEAKDEP" ADD CONSTRAINT "MIGR_WEAKDEP_FK1" FOREIGN KEY ("CONNECTION_ID_FK")
	  REFERENCES "DB_JT"."MD_CONNECTIONS" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_MIGR_WEAKDEP.sql
PROMPT


-- ============================================================================
-- Deploy: MD_OTHER_OBJECTS.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_OTHER_OBJECTS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_OTHER_OBJECTS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_OTHER_OBJECTS" ADD CONSTRAINT "MD_OTHER_OBJECTS_MD_SCHEM_FK1" FOREIGN KEY ("SCHEMA_ID_FK")
	  REFERENCES "DB_JT"."MD_SCHEMAS" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_OTHER_OBJECTS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_PACKAGES.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_PACKAGES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_PACKAGES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_PACKAGES" ADD CONSTRAINT "MD_PACKAGES_MD_SCHEMAS_FK1" FOREIGN KEY ("SCHEMA_ID_FK")
	  REFERENCES "DB_JT"."MD_SCHEMAS" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_PACKAGES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_PARTITIONS.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_PARTITIONS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_PARTITIONS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_PARTITIONS" ADD CONSTRAINT "MD_PARTITIONS_MD_TABLES_FK1" FOREIGN KEY ("TABLE_ID_FK")
	  REFERENCES "DB_JT"."MD_TABLES" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_PARTITIONS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_PRIVILEGES.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_PRIVILEGES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_PRIVILEGES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_PRIVILEGES" ADD CONSTRAINT "MD_PRIVILEGES_MD_SCHEMAS_FK1" FOREIGN KEY ("SCHEMA_ID_FK")
	  REFERENCES "DB_JT"."MD_SCHEMAS" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_PRIVILEGES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_SCHEMAS.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_SCHEMAS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_SCHEMAS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_SCHEMAS" ADD CONSTRAINT "MD_SCHEMAS_MD_CATALOGS_FK1" FOREIGN KEY ("CATALOG_ID_FK")
	  REFERENCES "DB_JT"."MD_CATALOGS" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_SCHEMAS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_SEQUENCES.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_SEQUENCES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_SEQUENCES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_SEQUENCES" ADD CONSTRAINT "MD_SEQUENCES_MD_SCHEMAS_FK1" FOREIGN KEY ("SCHEMA_ID_FK")
	  REFERENCES "DB_JT"."MD_SCHEMAS" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_SEQUENCES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_STORED_PROGRAMS.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_STORED_PROGRAMS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_STORED_PROGRAMS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_STORED_PROGRAMS" ADD CONSTRAINT "MD_STORED_PROGRAMS_MD_SCH_FK1" FOREIGN KEY ("SCHEMA_ID_FK")
	  REFERENCES "DB_JT"."MD_SCHEMAS" ("ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "DB_JT"."MD_STORED_PROGRAMS" ADD CONSTRAINT "MD_STORED_PROGRAMS_MD_PAC_FK1" FOREIGN KEY ("PACKAGE_ID_FK")
	  REFERENCES "DB_JT"."MD_PACKAGES" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_STORED_PROGRAMS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_SYNONYMS.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_SYNONYMS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_SYNONYMS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_SYNONYMS" ADD CONSTRAINT "MD_SYNONYMS_MD_SCHEMAS_FK1" FOREIGN KEY ("SCHEMA_ID_FK")
	  REFERENCES "DB_JT"."MD_SCHEMAS" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_SYNONYMS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_TABLES.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_TABLES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_TABLES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_TABLES" ADD CONSTRAINT "MD_TABLES_MD_SCHEMAS_FK1" FOREIGN KEY ("SCHEMA_ID_FK")
	  REFERENCES "DB_JT"."MD_SCHEMAS" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_TABLES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_TABLESPACES.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_TABLESPACES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_TABLESPACES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_TABLESPACES" ADD CONSTRAINT "MD_TABLESPACES_MD_SCHEMAS_FK1" FOREIGN KEY ("SCHEMA_ID_FK")
	  REFERENCES "DB_JT"."MD_SCHEMAS" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_TABLESPACES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_USERS.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_USERS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_USERS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_USERS" ADD CONSTRAINT "MD_USERS_MD_SCHEMAS_FK1" FOREIGN KEY ("SCHEMA_ID_FK")
	  REFERENCES "DB_JT"."MD_SCHEMAS" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_USERS.sql
PROMPT


-- ============================================================================
-- Deploy: MD_USER_DEFINED_DATA_TYPES.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_USER_DEFINED_DATA_TYPES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_USER_DEFINED_DATA_TYPES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_USER_DEFINED_DATA_TYPES" ADD CONSTRAINT "MD_USER_DEFINED_DATA_TYPE_FK1" FOREIGN KEY ("SCHEMA_ID_FK")
	  REFERENCES "DB_JT"."MD_SCHEMAS" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_USER_DEFINED_DATA_TYPES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_USER_PRIVILEGES.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_USER_PRIVILEGES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_USER_PRIVILEGES
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_USER_PRIVILEGES" ADD CONSTRAINT "MD_USER_PRIVILEGES_MD_PRI_FK1" FOREIGN KEY ("PRIVILEGE_ID_FK")
	  REFERENCES "DB_JT"."MD_PRIVILEGES" ("ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "DB_JT"."MD_USER_PRIVILEGES" ADD CONSTRAINT "MD_USER_PRIVILEGES_MD_USE_FK1" FOREIGN KEY ("USER_ID_FK")
	  REFERENCES "DB_JT"."MD_USERS" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_USER_PRIVILEGES.sql
PROMPT


-- ============================================================================
-- Deploy: MD_VIEWS.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MD_VIEWS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MD_VIEWS
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MD_VIEWS" ADD CONSTRAINT "MD_VIEWS_MD_SCHEMAS_FK1" FOREIGN KEY ("SCHEMA_ID_FK")
	  REFERENCES "DB_JT"."MD_SCHEMAS" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MD_VIEWS.sql
PROMPT


-- ============================================================================
-- Deploy: MIGRLOG.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MIGRLOG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MIGRLOG
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MIGRLOG" ADD CONSTRAINT "MIGR_MIGRLOG_FK" FOREIGN KEY ("PARENT_LOG_ID")
	  REFERENCES "DB_JT"."MIGRLOG" ("ID") ENABLE;


PROMPT Completed MIGRLOG.sql
PROMPT


-- ============================================================================
-- Deploy: MIGR_DATATYPE_TRANSFORM_MAP.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MIGR_DATATYPE_TRANSFORM_MAP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MIGR_DATATYPE_TRANSFORM_MAP
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MIGR_DATATYPE_TRANSFORM_MAP" ADD CONSTRAINT "MIGR_DATATYPE_TRANSFORM_M_FK1" FOREIGN KEY ("PROJECT_ID_FK")
	  REFERENCES "DB_JT"."MD_PROJECTS" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MIGR_DATATYPE_TRANSFORM_MAP.sql
PROMPT


-- ============================================================================
-- Deploy: MIGR_DATATYPE_TRANSFORM_RULE.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MIGR_DATATYPE_TRANSFORM_RULE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MIGR_DATATYPE_TRANSFORM_RULE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MIGR_DATATYPE_TRANSFORM_RULE" ADD CONSTRAINT "MIGR_DATATYPE_TRANSFORM_R_FK1" FOREIGN KEY ("MAP_ID_FK")
	  REFERENCES "DB_JT"."MIGR_DATATYPE_TRANSFORM_MAP" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MIGR_DATATYPE_TRANSFORM_RULE.sql
PROMPT


-- ============================================================================
-- Deploy: MIGR_GENERATION_ORDER.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying MIGR_GENERATION_ORDER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table MIGR_GENERATION_ORDER
--------------------------------------------------------

  ALTER TABLE "DB_JT"."MIGR_GENERATION_ORDER" ADD CONSTRAINT "MIGR_GENERATION_ORDER_MD__FK1" FOREIGN KEY ("CONNECTION_ID_FK")
	  REFERENCES "DB_JT"."MD_CONNECTIONS" ("ID") ON DELETE CASCADE ENABLE;


PROMPT Completed MIGR_GENERATION_ORDER.sql
PROMPT


-- ============================================================================
-- Deploy: ROLE_PERMISSION.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying ROLE_PERMISSION.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table ROLE_PERMISSION
--------------------------------------------------------

  ALTER TABLE "DB_JT"."ROLE_PERMISSION" ADD CONSTRAINT "FK_ROLE_PERMISSION_PRM" FOREIGN KEY ("PERMISSION_ID")
	  REFERENCES "DB_JT"."PERMISSION" ("PERMISSION_ID") ENABLE;


PROMPT Completed ROLE_PERMISSION.sql
PROMPT


-- ============================================================================
-- Deploy: USER_ROLE.sql
-- Category: foreign keys
-- ============================================================================

PROMPT Deploying USER_ROLE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  Ref Constraints for Table USER_ROLE
--------------------------------------------------------

  ALTER TABLE "DB_JT"."USER_ROLE" ADD CONSTRAINT "FK_USER_ROLE_APP" FOREIGN KEY ("APPLICATION_USER_ID")
	  REFERENCES "DB_JT"."KTG_APPUSER" ("ID") ENABLE;


PROMPT Completed USER_ROLE.sql
PROMPT


-- ============================================================================
-- PHASE: Deploy MATERIALIZED VIEWS (8 files)
-- ============================================================================

PROMPT
PROMPT ============================================================================
PROMPT Deploying MATERIALIZED VIEWS (8 files)
PROMPT ============================================================================
PROMPT


-- ============================================================================
-- Deploy: MD_REGEX_CATALOG_MVIEW.sql
-- Category: materialized views
-- ============================================================================

PROMPT Deploying MD_REGEX_CATALOG_MVIEW.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Materialized View MD_REGEX_CATALOG_MVIEW
--------------------------------------------------------

  CREATE MATERIALIZED VIEW "DB_JT"."MD_REGEX_CATALOG_MVIEW" ("PROJECT_ID", "CONNECTION_ID", "CONNECTION_NAME", "CATALOG_ID", "CATALOG_NAME", "ITEM", "VALUE")
  SEGMENT CREATION DEFERRED
  ORGANIZATION HEAP PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS 
  BUILD IMMEDIATE
  USING INDEX 
  REFRESH FORCE ON DEMAND
  USING DEFAULT LOCAL ROLLBACK SEGMENT
  USING ENFORCED CONSTRAINTS DISABLE ON QUERY COMPUTATION DISABLE QUERY REWRITE
  AS SELECT  PROJECT_ID, CONNECTION_ID, CONNECTION_NAME,CATALOG_ID,
        CATALOG_NAME, ITEM, SUM(VALUE) "VALUE" from MD_REGEX_SCHEMA_MVIEW
        group by  PROJECT_ID, CONNECTION_ID, CONNECTION_NAME,CATALOG_ID,
        CATALOG_NAME, ITEM;

   COMMENT ON MATERIALIZED VIEW "DB_JT"."MD_REGEX_CATALOG_MVIEW"  IS 'snapshot table for snapshot DB_JT.MD_REGEX_CATALOG_MVIEW';


PROMPT Completed MD_REGEX_CATALOG_MVIEW.sql
PROMPT


-- ============================================================================
-- Deploy: MD_REGEX_MVIEW.sql
-- Category: materialized views
-- ============================================================================

PROMPT Deploying MD_REGEX_MVIEW.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Materialized View MD_REGEX_MVIEW
--------------------------------------------------------

  CREATE MATERIALIZED VIEW "DB_JT"."MD_REGEX_MVIEW" ("PROJECT_NAME", "PROJECT_ID", "CONNECTION_ID", "CONNECTION_NAME", "CATALOG_ID", "CATALOG_NAME", "SCHEMA_ID", "SCHEMA_NAME", "PROGRAM_ID", "PROGRAM_NAME", "ITEM", "VALUE")
  SEGMENT CREATION DEFERRED
  ORGANIZATION HEAP PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS 
  BUILD IMMEDIATE
  USING INDEX 
  REFRESH FORCE ON DEMAND
  USING DEFAULT LOCAL ROLLBACK SEGMENT
  USING ENFORCED CONSTRAINTS DISABLE ON QUERY COMPUTATION DISABLE QUERY REWRITE
  AS SELECT  pr.PROJECT_NAME, pr.ID "PROJECT_ID", c.ID "CONNECTION_ID", c.NAME "CONNECTION_NAME", mc.ID "CATALOG_ID",
        mc.CATALOG_NAME,s.id "SCHEMA_ID",s.NAME "SCHEMA_NAME", p.ID "PROGRAM_ID", p.name "PROGRAM_NAME",
        rg.DESCRIPTION "ITEM", regexp_count(p.native_sql,rg.REGEX,1,'ix') "VALUE"
FROM MD_STORED_PROGRAMS p,
  md_projects pr,
  md_connections c,
  md_schemas s,
  MD_CATALOGS mc,
  MD_CODE_REGEX rg
WHERE c.TYPE          IS NULL --Shows captured
AND mc.CONNECTION_ID_FK=c.id
AND mc.id              =s.CATALOG_ID_FK
AND pr.PROJECT_NAME LIKE 'SS%'
and pr.id=c.PROJECT_ID_FK
and p.SCHEMA_ID_FK=s.ID
and regexp_count(p.native_sql,rg.REGEX,1,'ix')>0;

   COMMENT ON MATERIALIZED VIEW "DB_JT"."MD_REGEX_MVIEW"  IS 'snapshot table for snapshot DB_JT.MD_REGEX_MVIEW';


PROMPT Completed MD_REGEX_MVIEW.sql
PROMPT


-- ============================================================================
-- Deploy: MD_REGEX_SCHEMA_MVIEW.sql
-- Category: materialized views
-- ============================================================================

PROMPT Deploying MD_REGEX_SCHEMA_MVIEW.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Materialized View MD_REGEX_SCHEMA_MVIEW
--------------------------------------------------------

  CREATE MATERIALIZED VIEW "DB_JT"."MD_REGEX_SCHEMA_MVIEW" ("PROJECT_ID", "CONNECTION_ID", "CONNECTION_NAME", "CATALOG_ID", "CATALOG_NAME", "SCHEMA_ID", "SCHEMA_NAME", "ITEM", "VALUE")
  SEGMENT CREATION DEFERRED
  ORGANIZATION HEAP PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE USERS 
  BUILD IMMEDIATE
  USING INDEX 
  REFRESH FORCE ON DEMAND
  USING DEFAULT LOCAL ROLLBACK SEGMENT
  USING ENFORCED CONSTRAINTS DISABLE ON QUERY COMPUTATION DISABLE QUERY REWRITE
  AS SELECT  PROJECT_ID, CONNECTION_ID, CONNECTION_NAME,CATALOG_ID,
        CATALOG_NAME,SCHEMA_ID,SCHEMA_NAME, ITEM, SUM(VALUE) "VALUE" from MD_REGEX_MVIEW
        group by PROJECT_NAME, PROJECT_ID, CONNECTION_ID, CONNECTION_NAME,CATALOG_ID,
        CATALOG_NAME,SCHEMA_ID,SCHEMA_NAME, ITEM;

   COMMENT ON MATERIALIZED VIEW "DB_JT"."MD_REGEX_SCHEMA_MVIEW"  IS 'snapshot table for snapshot DB_JT.MD_REGEX_SCHEMA_MVIEW';


PROMPT Completed MD_REGEX_SCHEMA_MVIEW.sql
PROMPT


-- ============================================================================
-- Deploy: MW_SEP_KP_KTG_SPOLECNOST.sql
-- Category: materialized views
-- ============================================================================

PROMPT Deploying MW_SEP_KP_KTG_SPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Materialized View MW_SEP_KP_KTG_SPOLECNOST
--------------------------------------------------------

  CREATE MATERIALIZED VIEW "DB_JT"."MW_SEP_KP_KTG_SPOLECNOST" ("C_EVIEXTDODAVATEL", "C_INDICATOR_PC", "C_LICENCE", "C_LIKVIDACE", "C_SKUPINAIC", "C_SPOLECNERIZENY", "C_VPRECHODU", "C_ZONA", "DT_DATUMZALOZENI", "DT_QUESTORUPDATE", "ID", "ID_KTG_EXTERNIRATING", "ID_KTGSPOLECNOST", "ID_UCETNISYSTEM", "KATEGORIEKOEF", "S_COUNTRY", "S_DIC", "S_EKONOM_SEKTOR", "S_HLAVNIUCETNISKUPINA", "S_ICO", "S_KODKATEGORIEPROTISTRANA", "S_KODKATEGORIEPROTISTRANA_2", "S_MESTO", "S_NAZEV", "S_OKEC", "S_POM_ICO", "S_PSC", "S_REGRMS", "S_UCETSCP", "S_ULICE", "S_ZVLASTNIVZTAHKJINEMUCLENURKC")
  SEGMENT CREATION IMMEDIATE
  ORGANIZATION HEAP PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS 
  BUILD IMMEDIATE
  USING INDEX 
  REFRESH FORCE ON DEMAND
  USING DEFAULT LOCAL ROLLBACK SEGMENT
  USING ENFORCED CONSTRAINTS DISABLE QUERY REWRITE
  AS with EBO_PILOT_SPOL as
(
select ID_KTGUCETNISPOLECNOST , ID_KTGSPOLECNOST from DB_JT.TMP_EBO_SPOL_PILOT kus  where ID_KTGUCETNISPOLECNOST is not null        
)
,EBO_SPOL_PROTISTRANY as (
    select distinct spol.id  , d.id_ktgucetnispolecnost ucspol_doklad, spol.ID_KTGSPOLECNOST   ucspol_proti , ebo.ID_KTGSPOLECNOST id_ebo_spol
    FROM 
          KP_DAT_DOKLAD         d
        , KP_DAT_DOKLADZDROJDAT dzd
        , KP_KTG_SPOLECNOST     spol
        , EBO_PILOT_SPOL        ebo
    WHERE
          d.dt_datum > '01.01.2017'                     --in (  '31.07.2017' , '30.06.2017' , '31.05.2017')  
      and
          d.id_ktgucetnispolecnost   = ebo.ID_KTGUCETNISPOLECNOST  and nl_krok = 1
      AND
          dzd.id_doklad = d.id
      AND spol.id in (dzd.id_PROTI_1 ,dzd.id_PROTI_2 ,dzd.id_PROTI_3 ,dzd.id_PROTI_4 ,dzd.EO_ID, dzd.FIRMA_ID , dzd.EMITENT_ID  )
)

select distinct
  spol.C_EVIEXTDODAVATEL
, spol.C_INDICATOR_PC
, spol.C_LICENCE
, spol.C_LIKVIDACE
, spol.C_SKUPINAIC
, spol.C_SPOLECNERIZENY
, spol.C_VPRECHODU
, spol.C_ZONA
, spol.DT_DATUMZALOZENI
, spol.DT_QUESTORUPDATE
, spol.ID
, spol.ID_KTG_EXTERNIRATING
, spol.ID_KTGSPOLECNOST
, spol.ID_UCETNISYSTEM
, spol.KATEGORIEKOEF
, spol.S_COUNTRY
, spol.S_DIC
, spol.S_EKONOM_SEKTOR
, spol.S_HLAVNIUCETNISKUPINA
, spol.S_ICO
, spol.S_KODKATEGORIEPROTISTRANA
, spol.S_KODKATEGORIEPROTISTRANA_2
, spol.S_MESTO
, spol.S_NAZEV
, spol.S_OKEC
, spol.S_POM_ICO
, spol.S_PSC
, spol.S_REGRMS
, spol.S_UCETSCP
, spol.S_ULICE
, spol.S_ZVLASTNIVZTAHKJINEMUCLENURKC
from 
           KP_KTG_SPOLECNOST      spol
      join EBO_SPOL_PROTISTRANY   eboPROT
          --on ebo.id = spol.ID;
          on eboPROT.id    = spol.ID
            or eboPROT.id_ebo_spol   = spol.ID --20.09.2017;

   COMMENT ON MATERIALIZED VIEW "DB_JT"."MW_SEP_KP_KTG_SPOLECNOST"  IS 'snapshot table for snapshot DB_JT.MW_SEP_KP_KTG_SPOLECNOST pridane z 20.9.2017';


PROMPT Completed MW_SEP_KP_KTG_SPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: MW_SEP_KP_KTG_SPOLECNOST_EBO.sql
-- Category: materialized views
-- ============================================================================

PROMPT Deploying MW_SEP_KP_KTG_SPOLECNOST_EBO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Materialized View MW_SEP_KP_KTG_SPOLECNOST_EBO
--------------------------------------------------------

  CREATE MATERIALIZED VIEW "DB_JT"."MW_SEP_KP_KTG_SPOLECNOST_EBO" ("C_EVIEXTDODAVATEL", "C_INDICATOR_PC", "C_LICENCE", "C_LIKVIDACE", "C_SKUPINAIC", "C_SPOLECNERIZENY", "C_VPRECHODU", "C_ZONA", "DT_DATUMZALOZENI", "DT_QUESTORUPDATE", "ID", "ID_KTG_EXTERNIRATING", "ID_KTGSPOLECNOST", "ID_UCETNISYSTEM", "KATEGORIEKOEF", "S_COUNTRY", "S_DIC", "S_EKONOM_SEKTOR", "S_HLAVNIUCETNISKUPINA", "S_ICO", "S_KODKATEGORIEPROTISTRANA", "S_KODKATEGORIEPROTISTRANA_2", "S_MESTO", "S_NAZEV", "S_OKEC", "S_POM_ICO", "S_PSC", "S_REGRMS", "S_UCETSCP", "S_ULICE", "S_ZVLASTNIVZTAHKJINEMUCLENURKC")
  SEGMENT CREATION IMMEDIATE
  ORGANIZATION HEAP PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS 
  BUILD IMMEDIATE
  USING INDEX 
  REFRESH FORCE ON DEMAND
  USING DEFAULT LOCAL ROLLBACK SEGMENT
  USING ENFORCED CONSTRAINTS DISABLE QUERY REWRITE
  AS select distinct
  spol.C_EVIEXTDODAVATEL
, spol.C_INDICATOR_PC
, spol.C_LICENCE
, spol.C_LIKVIDACE
, spol.C_SKUPINAIC
, spol.C_SPOLECNERIZENY
, spol.C_VPRECHODU
, spol.C_ZONA
, spol.DT_DATUMZALOZENI
, spol.DT_QUESTORUPDATE
, spol.ID
, spol.ID_KTG_EXTERNIRATING
, spol.ID_KTGSPOLECNOST
, spol.ID_UCETNISYSTEM
, spol.KATEGORIEKOEF
, spol.S_COUNTRY
, spol.S_DIC
, spol.S_EKONOM_SEKTOR
, spol.S_HLAVNIUCETNISKUPINA
, spol.S_ICO
, spol.S_KODKATEGORIEPROTISTRANA
, spol.S_KODKATEGORIEPROTISTRANA_2
, spol.S_MESTO
, spol.S_NAZEV
, spol.S_OKEC
, spol.S_POM_ICO
, spol.S_PSC
, spol.S_REGRMS
, spol.S_UCETSCP
, spol.S_ULICE
, spol.S_ZVLASTNIVZTAHKJINEMUCLENURKC
from 
           KP_KTG_SPOLECNOST      spol
      join MW_SEP_KP_REL_PROTISTR_UCSPOL ebo
           on ebo.id_SPOLECNOST  = spol.ID;

   COMMENT ON MATERIALIZED VIEW "DB_JT"."MW_SEP_KP_KTG_SPOLECNOST_EBO"  IS 'snapshot table for snapshot DB_JT.MW_SEP_KP_KTG_SPOLECNOST rozsirene o vsetky EBO protistrany z 28.9.2017';


PROMPT Completed MW_SEP_KP_KTG_SPOLECNOST_EBO.sql
PROMPT


-- ============================================================================
-- Deploy: MW_SEP_KP_KTG_UCETNISPOLECNOST.sql
-- Category: materialized views
-- ============================================================================

PROMPT Deploying MW_SEP_KP_KTG_UCETNISPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Materialized View MW_SEP_KP_KTG_UCETNISPOLECNOST
--------------------------------------------------------

  CREATE MATERIALIZED VIEW "DB_JT"."MW_SEP_KP_KTG_UCETNISPOLECNOST" ("C_EXPORTJAKOPROTISTRANA", "C_EXTSYSTEM", "C_FEIS_UCETTYP", "C_IFRSPRIMARNI", "C_ONLINE", "C_OPCE", "C_POCITATROZVAHU", "C_POCITEJMUPOZICI", "C_PREHLEDDISPLAY", "C_RKC", "C_TESTOVATMAJUCAST", "C_UCETNICTVI_V_IFRS", "DT_DATUMARCHIVACE", "DT_LASTCLOSEDATE", "DT_ONLINEOD", "DT_UCETNIOBDOBIKONEC", "DT_UCETNIOBDOBISTART", "ID", "ID_ADMINISTRATOR", "ID_CISDATABAZE", "ID_CISKATSPOL", "ID_CISNOMINEE", "ID_CISOPCE", "ID_CISSUBJECT", "ID_KATEGORIE", "ID_KTGODBOR", "ID_KTGPROJEKT", "ID_MNGSEGMENT", "ID_MNGSEGMENTBOSS", "ID_ODPOVEDNAOSOBA", "ID_SPRAVCEKONSOLIDACE", "ID_TOPMNG", "ID_TYPPROJEKTU", "ID_ZODPOVEDNAUCETNI", "ND_BUDGETNAVYSENI_OO", "ND_BUDGETNAVYSENI_TOP", "ND_DOCUROVEN2", "NL_ROKPOCSTAVIMPORTSYSTEM", "QUEST_ID", "S_DBLINK", "S_DUVODOFFLINE", "S_ICO", "S_LOCALE", "S_MENA", "S_NAZEV", "S_POZNAMKA", "S_SKUPINALIKE", "S_SOUBORPREDPONA", "S_ZKRATKA", "TOPAS_ID")
  SEGMENT CREATION IMMEDIATE
  ORGANIZATION HEAP PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS 
  BUILD IMMEDIATE
  USING INDEX 
  REFRESH FORCE ON DEMAND
  USING DEFAULT LOCAL ROLLBACK SEGMENT
  USING ENFORCED CONSTRAINTS DISABLE QUERY REWRITE
  AS with EBO_PILOT_SPOL as
(
select ID_KTGUCETNISPOLECNOST ID from DB_JT.TMP_EBO_SPOL_PILOT kus  where ID_KTGUCETNISPOLECNOST is not null        
)
, EBO_SPOL_PROTISTRANY as (
    select distinct spol.id  , d.id_ktgucetnispolecnost ucspol_doklad, spol.ID_KTGSPOLECNOST   ucspol_proti
    FROM 
          KP_DAT_DOKLAD       d
        , KP_DAT_DOKLADZDROJDAT  dzd
        , KP_KTG_SPOLECNOST   spol
        , EBO_PILOT_SPOL      ebo
    WHERE
          d.dt_datum > '01.01.2017'                     --in (  '31.07.2017' , '30.06.2017' , '31.05.2017')  
      and
          d.id_ktgucetnispolecnost   = ebo.id  and nl_krok = 1
      AND
          dzd.id_doklad = d.id
      AND spol.id in (dzd.id_PROTI_1 ,dzd.id_PROTI_2 ,dzd.id_PROTI_3 ,dzd.id_PROTI_4 ,dzd.EO_ID, dzd.FIRMA_ID , dzd.EMITENT_ID  )
)
------
select distinct
  us.C_EXPORTJAKOPROTISTRANA
, us.C_EXTSYSTEM
, us.C_FEIS_UCETTYP
, us.C_IFRSPRIMARNI
, us.C_ONLINE
, us.C_OPCE
, us.C_POCITATROZVAHU
, us.C_POCITEJMUPOZICI
, us.C_PREHLEDDISPLAY
, us.C_RKC
, us.C_TESTOVATMAJUCAST
, us.C_UCETNICTVI_V_IFRS
, us.DT_DATUMARCHIVACE
, us.DT_LASTCLOSEDATE
, us.DT_ONLINEOD
, us.DT_UCETNIOBDOBIKONEC
, us.DT_UCETNIOBDOBISTART
, us.ID
, us.ID_ADMINISTRATOR
, us.ID_CISDATABAZE
, us.ID_CISKATSPOL
, us.ID_CISNOMINEE
, us.ID_CISOPCE
, us.ID_CISSUBJECT
, us.ID_KATEGORIE
, us.ID_KTGODBOR
, us.ID_KTGPROJEKT
, us.ID_MNGSEGMENT
, us.ID_MNGSEGMENTBOSS
, us.ID_ODPOVEDNAOSOBA
, us.ID_SPRAVCEKONSOLIDACE
, us.ID_TOPMNG
, us.ID_TYPPROJEKTU
, us.ID_ZODPOVEDNAUCETNI
, us.ND_BUDGETNAVYSENI_OO
, us.ND_BUDGETNAVYSENI_TOP
, us.ND_DOCUROVEN2
, us.NL_ROKPOCSTAVIMPORTSYSTEM
, us.QUEST_ID
, us.S_DBLINK
, us.S_DUVODOFFLINE
, us.S_ICO
, us.S_LOCALE
, us.S_MENA
, us.S_NAZEV
, us.S_POZNAMKA
, us.S_SKUPINALIKE
, us.S_SOUBORPREDPONA
, us.S_ZKRATKA
, us.TOPAS_ID
FROM
      KP_KTG_UCETNISPOLECNOST us
      join  EBO_SPOL_PROTISTRANY    eboPROT
            on eboPROT.ucspol_doklad  = us.id
            or eboPROT.ucspol_proti   = us.id --20.09.2017;

   COMMENT ON MATERIALIZED VIEW "DB_JT"."MW_SEP_KP_KTG_UCETNISPOLECNOST"  IS 'snapshot table for snapshot DB_JT.MW_SEP_KP_KTG_UCETNISPOLECNOST z 20.9.2017';


PROMPT Completed MW_SEP_KP_KTG_UCETNISPOLECNOST.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/MATERIALIZED_VIEWS/MW_SEP_KP_REL_PROTISTRANA.sql: 'utf-8' codec can't decode byte 0xe8 in position 1117: invalid continuation byte


-- ============================================================================
-- Deploy: MW_SEP_KP_REL_PROTISTR_UCSPOL.sql
-- Category: materialized views
-- ============================================================================

PROMPT Deploying MW_SEP_KP_REL_PROTISTR_UCSPOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Materialized View MW_SEP_KP_REL_PROTISTR_UCSPOL
--------------------------------------------------------

  CREATE MATERIALIZED VIEW "DB_JT"."MW_SEP_KP_REL_PROTISTR_UCSPOL" ("ID_UCETNI_SPOL", "ID", "ID_DATABAZE", "ID_SPOLECNOST", "S_ICO", "S_NAZEV", "S_NUMBER0", "DOID", "KID", "PLATINST", "DT_ZMENA", "S_POM_ICO", "EID", "DATUMZALOZENI", "ULICE", "PSC", "MESTO", "STAT", "DIC", "UCETSCP", "REGRMS", "EKONOM_SEKTOR", "TYPOSOBY")
  SEGMENT CREATION IMMEDIATE
  ORGANIZATION HEAP PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE USERS 
  BUILD IMMEDIATE
  USING INDEX 
  REFRESH FORCE ON DEMAND
  USING DEFAULT LOCAL ROLLBACK SEGMENT
  USING ENFORCED CONSTRAINTS DISABLE QUERY REWRITE
  AS with 
EBO_SPOL_PROTISTRANY_JTB as
(
    select distinct spol.id spol_id , d.id_ktgucetnispolecnost  us_id
    FROM 
          KP_DAT_DOKLAD       d
        , KP_DAT_DOKLADZDROJDATAGREGACE  dzd            --  , KP_DAT_DOKLADZDROJDAT  dzd
        , KP_KTG_SPOLECNOST   spol
    WHERE
          d.dt_datum > '01.01.2017'                     --in (  '31.07.2017' , '30.06.2017' , '31.05.2017')  
      and
          d.id_ktgucetnispolecnost   in ( 1,5000 )
          and nl_krok = 1
      AND
          dzd.id_doklad = d.id
      AND spol.id = dzd.ID_KTGSPOLECNOST 
)
,
EBO_PILOT_SPOL as
(
select ID_KTGUCETNISPOLECNOST ID , s_nazev
from DB_JT.TMP_EBO_SPOL_PILOT kus  
      where    ID_KTGUCETNISPOLECNOST is not null        
            and ID_KTGUCETNISPOLECNOST NOT IN ( 1,5000)
)
,
EBO_SPOL_PROTISTRANY as
(
    select distinct spol.id  , ebo.id us_id , ebo.s_nazev us_nazev
    FROM 
          KP_DAT_DOKLAD       d
        , KP_DAT_DOKLADZDROJDAT  dzd
        , KP_KTG_SPOLECNOST   spol
        , EBO_PILOT_SPOL      ebo
    WHERE
          d.dt_datum > '01.01.2017'                     
      and
          d.id_ktgucetnispolecnost   = ebo.id  and nl_krok = 1
      AND
          dzd.id_doklad = d.id
      AND spol.id in (dzd.id_PROTI_1 ,dzd.id_PROTI_2 ,dzd.id_PROTI_3 ,dzd.id_PROTI_4 ,dzd.EO_ID, dzd.FIRMA_ID , dzd.EMITENT_ID  )
)

SELECT 
ebop.us_id      ID_UCETNI_SPOL, 
--ebop.us_nazev   S_UCETNI_SPOL_NAZEV ,
 prot.ID
,prot.ID_DATABAZE
,prot.ID_SPOLECNOST
,prot.S_ICO
,prot.S_NAZEV
,prot.S_NUMBER0
,prot.DOID
,prot.KID
,prot.PLATINST
,prot.DT_ZMENA
,prot.S_POM_ICO
,prot.EID
,prot.DATUMZALOZENI
,prot.ULICE
,prot.PSC
,prot.MESTO
,prot.STAT
,prot.DIC
,prot.UCETSCP
,prot.REGRMS
,prot.EKONOM_SEKTOR
,prot.TYPOSOBY
FROM
        DB_DSA.KP_REL_PROTISTRANA prot      
  join  EBO_SPOL_PROTISTRANY      ebop      
        on ebop.id = prot.ID_SPOLECNOST
--        ;
---------------------------------------------------------------------
UNION 

SELECT --distinct
ebop.us_id      ID_UCETNI_SPOL, 

 prot.ID
,prot.ID_DATABAZE
,prot.ID_SPOLECNOST
,prot.S_ICO
,prot.S_NAZEV
,prot.S_NUMBER0
,prot.DOID
,prot.KID
,prot.PLATINST
,prot.DT_ZMENA
,prot.S_POM_ICO
,prot.EID
,prot.DATUMZALOZENI
,prot.ULICE
,prot.PSC
,prot.MESTO
,prot.STAT
,prot.DIC
,prot.UCETSCP
,prot.REGRMS
,prot.EKONOM_SEKTOR
,prot.TYPOSOBY
FROM
          DB_DSA.KP_REL_PROTISTRANA prot      
        , EBO_SPOL_PROTISTRANY_JTB  ebop
where 
        prot.ID_SPOLECNOST  = ebop.spol_id
        and prot.ID_DATABAZE  IN (325 ,320)	        --TOPA11OO , TopSecur_SK  16.07.2018
        and ( ebop.us_id = 1 or ebop.us_id = 5000);

   COMMENT ON MATERIALIZED VIEW "DB_JT"."MW_SEP_KP_REL_PROTISTR_UCSPOL"  IS 'snapshot table for snapshot DB_JT.MW_SEP_KP_REL_PROTISTR_UCSPOL pridane z 20.9.2017, 16.7 pridane vsetky protistrany z pobocky';


PROMPT Completed MW_SEP_KP_REL_PROTISTR_UCSPOL.sql
PROMPT


-- ============================================================================
-- PHASE: Deploy VIEWS (395 files)
-- ============================================================================

PROMPT
PROMPT ============================================================================
PROMPT Deploying VIEWS (395 files)
PROMPT ============================================================================
PROMPT


-- ============================================================================
-- Deploy: AQ_QT_JOB.sql
-- Category: views
-- ============================================================================

PROMPT Deploying AQ_QT_JOB.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View AQ$QT_JOB
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."AQ$QT_JOB" ("QUEUE", "MSG_ID", "CORR_ID", "MSG_PRIORITY", "MSG_STATE", "DELAY", "DELAY_TIMESTAMP", "EXPIRATION", "ENQ_TIME", "ENQ_TIMESTAMP", "ENQ_USER_ID", "ENQ_TXN_ID", "DEQ_TIME", "DEQ_TIMESTAMP", "DEQ_USER_ID", "DEQ_TXN_ID", "RETRY_COUNT", "EXCEPTION_QUEUE_OWNER", "EXCEPTION_QUEUE", "USER_DATA", "ORIGINAL_QUEUE_NAME", "ORIGINAL_QUEUE_OWNER", "EXPIRATION_REASON", "SENDER_NAME", "SENDER_ADDRESS", "SENDER_PROTOCOL", "ORIGINAL_MSGID") AS 
  SELECT q_name QUEUE, msgid MSG_ID, corrid CORR_ID, priority MSG_PRIORITY, decode(state, 0,   'READY',
                                1,   'WAIT',
                                2,   'PROCESSED',
                                3,   'EXPIRED',
                                10,  'BUFFERED_EXPIRED') MSG_STATE, cast(FROM_TZ(delay, '01:00')
                  at time zone sessiontimezone as date) DELAY, cast(FROM_TZ(delay, '01:00')
               at time zone sessiontimezone as timestamp) DELAY_TIMESTAMP, expiration, cast(FROM_TZ(enq_time, '01:00')
                  at time zone sessiontimezone as date) ENQ_TIME, cast(FROM_TZ(enq_time, '01:00')
                  at time zone sessiontimezone as timestamp) 
                  ENQ_TIMESTAMP, enq_uid ENQ_USER_ID, enq_tid ENQ_TXN_ID, cast(FROM_TZ(deq_time, '01:00')
                  at time zone sessiontimezone as date) DEQ_TIME, cast(FROM_TZ(deq_time, '01:00')
                  at time zone sessiontimezone as timestamp) 
                  DEQ_TIMESTAMP, deq_uid DEQ_USER_ID, deq_tid DEQ_TXN_ID, retry_count,  decode (state, 0, exception_qschema, 
                                  1, exception_qschema, 
                                  2, exception_qschema,  
                                  NULL) EXCEPTION_QUEUE_OWNER,  decode (state, 0, exception_queue, 
                                  1, exception_queue, 
                                  2, exception_queue,  
                                  NULL) EXCEPTION_QUEUE,  user_data,  decode (state, 3, 
                     decode (deq_tid, 'INVALID_TRANSACTION', NULL, 
                             exception_queue), NULL)
                                ORIGINAL_QUEUE_NAME,  decode (state, 3, 
                     decode (deq_tid, 'INVALID_TRANSACTION', NULL, 
                             exception_qschema), NULL)
                                ORIGINAL_QUEUE_OWNER,  decode(state, 3, 
                     decode(deq_time, NULL, 
                       decode(deq_tid, NULL,
                       decode (expiration , NULL , 'MAX_RETRY_EXCEEDED',
                            'TIME_EXPIRATION'),
                              'INVALID_TRANSACTION', NULL,
                              'MAX_RETRY_EXCEEDED'), NULL), NULL) 
                             EXPIRATION_REASON , sender_name SENDER_NAME, sender_address SENDER_ADDRESS, sender_protocol SENDER_PROTOCOL, dequeue_msgid ORIGINAL_MSGID  FROM "QT_JOB" WHERE state != 7 AND   state != 9 WITH READ ONLY
;


PROMPT Completed AQ_QT_JOB.sql
PROMPT


-- ============================================================================
-- Deploy: AQ__QT_JOB_F.sql
-- Category: views
-- ============================================================================

PROMPT Deploying AQ__QT_JOB_F.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View AQ$_QT_JOB_F
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."AQ$_QT_JOB_F" ("Q_NAME", "ROW_ID", "MSGID", "CORRID", "PRIORITY", "STATE", "DELAY", "EXPIRATION", "ENQ_TIME", "ENQ_UID", "ENQ_TID", "DEQ_TIME", "DEQ_UID", "DEQ_TID", "RETRY_COUNT", "EXCEPTION_QSCHEMA", "EXCEPTION_QUEUE", "CSCN", "DSCN", "CHAIN_NO", "LOCAL_ORDER_NO", "TIME_MANAGER_INFO", "STEP_NO", "USER_DATA", "SENDER_NAME", "SENDER_ADDRESS", "SENDER_PROTOCOL", "DEQUEUE_MSGID", "DELIVERY_MODE", "SEQUENCE_NUM", "MSG_NUM", "QUEUE_ID", "USER_PROP") AS 
  SELECT  /*+ NO_MERGE (qo) USE_NL(qt) */ qt.q_name Q_NAME, qt.rowid ROW_ID, qt.msgid MSGID, qt.corrid CORRID, qt.priority PRIORITY, qt.state STATE, cast(FROM_TZ(qt.delay, '01:00') at time zone sessiontimezone as timestamp) DELAY, qt.expiration EXPIRATION, cast(FROM_TZ(qt.enq_time, '01:00') at time zone sessiontimezone as timestamp) ENQ_TIME, qt.enq_uid ENQ_UID, qt.enq_tid ENQ_TID, cast(FROM_TZ(qt.deq_time, '01:00') at time zone sessiontimezone as timestamp) DEQ_TIME, qt.deq_uid DEQ_UID, qt.deq_tid DEQ_TID, qt.retry_count RETRY_COUNT, qt.exception_qschema EXCEPTION_QSCHEMA, qt.exception_queue EXCEPTION_QUEUE, qt.cscn CSCN, qt.dscn DSCN, qt.chain_no CHAIN_NO, qt.local_order_no LOCAL_ORDER_NO, cast(FROM_TZ(qt.time_manager_info, '01:00') at time zone sessiontimezone as timestamp)   TIME_MANAGER_INFO, qt.step_no STEP_NO, qt.user_data USER_DATA ,qt.sender_name SENDER_NAME, qt.sender_address SENDER_ADDRESS, qt.sender_protocol SENDER_PROTOCOL, qt.dequeue_msgid DEQUEUE_MSGID, 'PERSISTENT' DELIVERY_MODE, 0 SEQUENCE_NUM, 0 MSG_NUM, qo.qid QUEUE_ID, qt.user_prop USER_PROP FROM "DB_JT"."QT_JOB" qt, SYS.ALL_INT_DEQUEUE_QUEUES qo  WHERE qt.q_name = qo.name AND qo.owner = 'DB_JT' WITH READ ONLY
;


PROMPT Completed AQ__QT_JOB_F.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_CENNYPAPIR.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_CENNYPAPIR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_CENNYPAPIR
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_CENNYPAPIR" ("ID", "S_ISIN", "ND_NOMINAL", "S_DRUHCENNEHOPAPIRU", "S_MENA", "ID_KTGSPOLECNOST", "S_POPIS", "C_REGISTROVANY", "DT_SPLATNOSTJISTINY", "C_TYPFREKVENCEPERIODY", "NL_KUPONFREKVENCE", "DT_KUPONDATUM1", "DT_KUPONDATUM2", "DT_KUPONDATUM3", "DT_KUPONDATUM4", "DT_KUPONDATUM5", "C_TYPUROKOVESAZBY", "ND_KUPONPROCENTA", "RELATIONNUMBER0", "S_ICO", "S_INSTRUMENTID", "DT_DATUMEMISE") AS 
  select "ID","S_ISIN","ND_NOMINAL","S_DRUHCENNEHOPAPIRU","S_MENA","ID_KTGSPOLECNOST","S_POPIS","C_REGISTROVANY","DT_SPLATNOSTJISTINY","C_TYPFREKVENCEPERIODY","NL_KUPONFREKVENCE","DT_KUPONDATUM1","DT_KUPONDATUM2","DT_KUPONDATUM3","DT_KUPONDATUM4","DT_KUPONDATUM5","C_TYPUROKOVESAZBY","ND_KUPONPROCENTA","RELATIONNUMBER0","S_ICO","S_INSTRUMENTID","DT_DATUMEMISE" from DB_JT.KTG_CENNYPAPIR
;


PROMPT Completed DWT_CENNYPAPIR.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_CIS_BANKAR.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_CIS_BANKAR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_CIS_BANKAR
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_CIS_BANKAR" ("ID", "S_KOD", "S_POPIS", "ID_ODBOR", "DT_PLATNOSTOD", "DT_PLATNOSTDO") AS 
  select "ID","S_KOD","S_POPIS","ID_ODBOR","DT_PLATNOSTOD","DT_PLATNOSTDO" from DB_JT.KP_CIS_BANKAR
;


PROMPT Completed DWT_CIS_BANKAR.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_CIS_CUSTOMER_GROUP.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_CIS_CUSTOMER_GROUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_CIS_CUSTOMER_GROUP
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_CIS_CUSTOMER_GROUP" ("CUST_GROUP_NAME", "CUST_GROUP_CODE", "CUST_STRUC_NAME", "CUST_STRUC_CODE", "DT_PLATNOSTOD", "DT_PLATNOSTDO") AS 
  SELECT "CUST_GROUP_NAME",
    "CUST_GROUP_CODE",
    "CUST_STRUC_NAME",
    "CUST_STRUC_CODE",
    "DT_PLATNOSTOD",
    "DT_PLATNOSTDO"
  FROM KP_CIS_CUSTOMER_GROUP
;


PROMPT Completed DWT_CIS_CUSTOMER_GROUP.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_CIS_DATABAZE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_CIS_DATABAZE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_CIS_DATABAZE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_CIS_DATABAZE" ("ID", "S_DBLINK", "S_POPIS", "S_PROQUESTOR", "S_INSTANCE", "C_PBTYP", "C_AKTIVNI", "C_DWH_LOAD") AS 
  select "ID","S_DBLINK","S_POPIS","S_PROQUESTOR","S_INSTANCE","C_PBTYP","C_AKTIVNI","C_DWH_LOAD" from DB_JT.KP_CIS_DATABAZE
;


PROMPT Completed DWT_CIS_DATABAZE.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_CIS_DOKLAD.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_CIS_DOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_CIS_DOKLAD
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_CIS_DOKLAD" ("ID", "S_POPIS", "JAVA_FORMULAR_ID", "ID_CISFORMULAR", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "C_ZAMCENO", "NL_RADEKPASIVAHV", "C_UNIFIKOVANEUCTY", "NL_RADEKMENSINOVEPODILY") AS 
  select "ID","S_POPIS","JAVA_FORMULAR_ID","ID_CISFORMULAR","DT_PLATNOSTOD","DT_PLATNOSTDO","C_ZAMCENO","NL_RADEKPASIVAHV","C_UNIFIKOVANEUCTY","NL_RADEKMENSINOVEPODILY" from DB_JT.KP_CIS_DOKLAD
;


PROMPT Completed DWT_CIS_DOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_CIS_DOKUMENT.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_CIS_DOKUMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_CIS_DOKUMENT
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_CIS_DOKUMENT" ("ID", "S_POPIS") AS 
  select "ID","S_POPIS" from DB_JT.KP_CIS_DOKUMENT
;


PROMPT Completed DWT_CIS_DOKUMENT.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_CIS_DOKUMENTSTATUS.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_CIS_DOKUMENTSTATUS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_CIS_DOKUMENTSTATUS
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_CIS_DOKUMENTSTATUS" ("ID", "S_POPIS") AS 
  select "ID","S_POPIS" from DB_JT.KP_CIS_DOKUMENTSTATUS
;


PROMPT Completed DWT_CIS_DOKUMENTSTATUS.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_CIS_LOG_DWH.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_CIS_LOG_DWH.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_CIS_LOG_DWH
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_CIS_LOG_DWH" ("CODE", "NAME") AS 
  select "CODE","NAME" from DB_JT.KP_CIS_LOG_DWH
;


PROMPT Completed DWT_CIS_LOG_DWH.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_CIS_MENA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_CIS_MENA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_CIS_MENA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_CIS_MENA" ("ID", "S_POPIS", "DT_LASTKURZ", "DT_LASTKURZAVG", "DT_NBS_LASTKURZ", "DT_NBS_LASTKURZAVG") AS 
  select "ID","S_POPIS","DT_LASTKURZ","DT_LASTKURZAVG","DT_NBS_LASTKURZ","DT_NBS_LASTKURZAVG" from DB_JT.KP_CIS_MENA
;


PROMPT Completed DWT_CIS_MENA.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_CIS_MNGSEGMENT.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_CIS_MNGSEGMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_CIS_MNGSEGMENT
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_CIS_MNGSEGMENT" ("ID", "S_POPIS", "ID_KTGSUBKONSOLIDACE") AS 
  select "ID","S_POPIS","ID_KTGSUBKONSOLIDACE" from DB_JT.KP_CIS_MNGSEGMENT
;


PROMPT Completed DWT_CIS_MNGSEGMENT.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_CIS_PROJEKTKATEGORIE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_CIS_PROJEKTKATEGORIE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_CIS_PROJEKTKATEGORIE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_CIS_PROJEKTKATEGORIE" ("ID", "S_POPIS") AS 
  select "ID","S_POPIS" from DB_JT.KP_CIS_PROJEKTKATEGORIE
;


PROMPT Completed DWT_CIS_PROJEKTKATEGORIE.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_CIS_PROJEKTSTATUS.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_CIS_PROJEKTSTATUS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_CIS_PROJEKTSTATUS
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_CIS_PROJEKTSTATUS" ("ID", "S_POPIS") AS 
  select "ID","S_POPIS" from DB_JT.KP_CIS_PROJEKTSTATUS
;


PROMPT Completed DWT_CIS_PROJEKTSTATUS.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_CIS_SUBJECT.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_CIS_SUBJECT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_CIS_SUBJECT
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_CIS_SUBJECT" ("ID", "S_POPIS") AS 
  select "ID","S_POPIS" from DB_JT.KP_CIS_SUBJECT
;


PROMPT Completed DWT_CIS_SUBJECT.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_CIS_TYPBUDGETUPROJEKTU.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_CIS_TYPBUDGETUPROJEKTU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_CIS_TYPBUDGETUPROJEKTU
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_CIS_TYPBUDGETUPROJEKTU" ("ID", "S_POPIS") AS 
  select "ID","S_POPIS" from DB_JT.KP_CIS_TYPBUDGETUPROJEKTU
;


PROMPT Completed DWT_CIS_TYPBUDGETUPROJEKTU.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_CIS_TYPFAKTURY.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_CIS_TYPFAKTURY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_CIS_TYPFAKTURY
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_CIS_TYPFAKTURY" ("ID", "TFID", "S_POPIS", "S_FEIS_POPIS", "ID_KTGUCETNISPOLECNOST", "STREDISKO", "C_PLATNOST", "C_ZALOHOVA") AS 
  select "ID","TFID","S_POPIS","S_FEIS_POPIS","ID_KTGUCETNISPOLECNOST","STREDISKO","C_PLATNOST","C_ZALOHOVA" from DB_JT.KP_CIS_TYPFAKTURY
;


PROMPT Completed DWT_CIS_TYPFAKTURY.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_CIS_TYPTRANSAKCE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_CIS_TYPTRANSAKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_CIS_TYPTRANSAKCE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_CIS_TYPTRANSAKCE" ("ID", "S_POPIS", "S_KOD", "ID_GESTOR_CZ", "ID_GESTOR_SK", "ID_GESTOR_Z", "ID_TYPTRANSAKCEGROUP", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "C_PROZASTUPCE", "ND_BUDGETNAVYSENI_GESTOR", "C_DEVELOPER", "S_KOMENTAR", "C_SPECIAL", "C_PODVOJNEMIS", "ND_UROVENPROJEKT", "ND_UROVENSPOLECNOST", "ND_UROVENTOP", "S_MENAUP", "S_MENAUS", "S_MENAUT", "C_TISKMAJETEK", "C_BUDGETOVAT", "C_CAPEX_OPEX") AS 
  select "ID","S_POPIS","S_KOD","ID_GESTOR_CZ","ID_GESTOR_SK","ID_GESTOR_Z","ID_TYPTRANSAKCEGROUP","DT_PLATNOSTOD","DT_PLATNOSTDO","C_PROZASTUPCE","ND_BUDGETNAVYSENI_GESTOR","C_DEVELOPER","S_KOMENTAR","C_SPECIAL","C_PODVOJNEMIS","ND_UROVENPROJEKT","ND_UROVENSPOLECNOST","ND_UROVENTOP","S_MENAUP","S_MENAUS","S_MENAUT","C_TISKMAJETEK","C_BUDGETOVAT","C_CAPEX_OPEX" from DB_JT.KP_CIS_TYPTRANSAKCE
;


PROMPT Completed DWT_CIS_TYPTRANSAKCE.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_CIS_TYPTRANSAKCEGROUP.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_CIS_TYPTRANSAKCEGROUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_CIS_TYPTRANSAKCEGROUP
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_CIS_TYPTRANSAKCEGROUP" ("ID", "S_KOD", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "S_POPIS", "C_DEVELOPER") AS 
  select "ID","S_KOD","DT_PLATNOSTOD","DT_PLATNOSTDO","S_POPIS","C_DEVELOPER" from DB_JT.KP_CIS_TYPTRANSAKCEGROUP
;


PROMPT Completed DWT_CIS_TYPTRANSAKCEGROUP.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_CIS_TYP_TRAN_CAPEX_OPEX.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_CIS_TYP_TRAN_CAPEX_OPEX.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_CIS_TYP_TRAN_CAPEX_OPEX
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_CIS_TYP_TRAN_CAPEX_OPEX" ("C_ID", "S_POPIS", "S_KOMENTAR") AS 
  select "C_ID","S_POPIS","S_KOMENTAR" from DB_JT.KP_CIS_TYP_TRAN_CAPEX_OPEX
;


PROMPT Completed DWT_CIS_TYP_TRAN_CAPEX_OPEX.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_CIS_UCETPRIMARNI.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_CIS_UCETPRIMARNI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_CIS_UCETPRIMARNI
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_CIS_UCETPRIMARNI" ("ID_CISDATABAZE", "C_TYP", "S_UCET", "S_POPIS") AS 
  select "ID_CISDATABAZE","C_TYP","S_UCET","S_POPIS" from DB_JT.KP_CIS_UCETPRIMARNI
;


PROMPT Completed DWT_CIS_UCETPRIMARNI.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_CIS_UCETSUMATYP.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_CIS_UCETSUMATYP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_CIS_UCETSUMATYP
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_CIS_UCETSUMATYP" ("ID", "S_ZKRATKA", "POCET_UCTU", "S_POPIS", "C_SHOWINUNIF") AS 
  select "ID","S_ZKRATKA","POCET_UCTU","S_POPIS","C_SHOWINUNIF" from DB_JT.KP_CIS_UCETSUMATYP
;


PROMPT Completed DWT_CIS_UCETSUMATYP.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_CIS_UCETUNIF.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_CIS_UCETUNIF.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_CIS_UCETUNIF
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_CIS_UCETUNIF" ("ID", "S_UCET", "C_POCITATVAZBY", "C_CLASS", "C_SHARES", "C_MULTISEGMENT", "C_COUNTRY", "C_TYPECOUNTERPARTIES", "ND_LIMITCOUNTERPARTIESDETAL", "C_MATURITY") AS 
  select ID ,SUBSTR(S_UCET,0,9),"C_POCITATVAZBY","C_CLASS","C_SHARES","C_MULTISEGMENT","C_COUNTRY","C_TYPECOUNTERPARTIES","ND_LIMITCOUNTERPARTIESDETAL","C_MATURITY" 
  from DB_JT.KP_CIS_UCETUNIF
  where --s_ucet like 'AA1000003%'
   ID   < 42896
;


PROMPT Completed DWT_CIS_UCETUNIF.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_CIS_UCETUNIFCLASS.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_CIS_UCETUNIFCLASS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_CIS_UCETUNIFCLASS
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_CIS_UCETUNIFCLASS" ("C_CLASS", "S_POPIS") AS 
  select "C_CLASS","S_POPIS" from DB_JT.KP_CIS_UCETUNIFCLASS
;


PROMPT Completed DWT_CIS_UCETUNIFCLASS.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_CIS_UCETUNIFLANG.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_CIS_UCETUNIFLANG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_CIS_UCETUNIFLANG
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_CIS_UCETUNIFLANG" ("ID_CISUCETUNIF", "S_LOCALE", "S_POPIS") AS 
  select "ID_CISUCETUNIF","S_LOCALE","S_POPIS" from DB_JT.KP_CIS_UCETUNIFLANG
;


PROMPT Completed DWT_CIS_UCETUNIFLANG.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_DAT_BUDGET.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_DAT_BUDGET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_DAT_BUDGET
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_DAT_BUDGET" ("ID", "ID_KTGODBOR", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "ID_KTGPROJEKT", "DT_SCHVALITDO") AS 
  select "ID","ID_KTGODBOR","DT_PLATNOSTOD","DT_PLATNOSTDO","ID_KTGPROJEKT","DT_SCHVALITDO" from DB_JT.KP_DAT_BUDGET
;


PROMPT Completed DWT_DAT_BUDGET.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_DAT_BUDGETPOLOZKA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_DAT_BUDGETPOLOZKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_DAT_BUDGETPOLOZKA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_DAT_BUDGETPOLOZKA" ("ID", "ID_BUDGET", "ID_CISTYPTRAN", "ND_CASTKA", "S_MENA", "ID_ODBOROO", "DT_SCHVALENOODBOR", "ID_GESTOR", "DT_SCHVALENOGESTOR", "ID_UCSPOLOO", "DT_SCHVALENOUCSPOL", "ID_UCSPOLTOP", "DT_SCHVALENOTOP", "S_POZNAMKA", "ID_APPUSER") AS 
  select "ID","ID_BUDGET","ID_CISTYPTRAN","ND_CASTKA","S_MENA","ID_ODBOROO","DT_SCHVALENOODBOR","ID_GESTOR","DT_SCHVALENOGESTOR","ID_UCSPOLOO","DT_SCHVALENOUCSPOL","ID_UCSPOLTOP","DT_SCHVALENOTOP","S_POZNAMKA","ID_APPUSER" from DB_JT.KP_DAT_BUDGETPOLOZKA
;


PROMPT Completed DWT_DAT_BUDGETPOLOZKA.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_DAT_DOKLAD.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_DAT_DOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_DAT_DOKLAD
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_DAT_DOKLAD" ("ID", "NL_ERROR", "NL_KROK", "ID_KTGUCETNISPOLECNOST", "ID_KTGDOKLAD", "S_MENA", "DT_DATUM", "S_POPIS", "ID_PARENT", "DT_VYTVORENO", "S_UZIVATEL", "DT_PLATNOSTMUSTEK", "S_UZIVATELMUSTEK", "NL_WARNING", "DT_DATUMPOCSTAV", "ID_SUBKONSOLIDACE", "ID_KTGSUBKONSOLIDACEETAPA", "NL_POCETTRANSAKCI", "ND_ZJ", "ND_VJ", "DT_MAXTRANSAKCE", "C_SUBSMER", "DT_SUBDATUM", "C_BASEDOKLAD", "NL_POCETTRANSAKCIPROJEKT", "NL_POCETTRANSAKCIODBOR", "NL_POCETTRANSAKCIPROJEKTPLUS", "DT_DATUMRELATIVE", "DT_DATUMEXPORTOLAP", "NL_VYNOSY", "NL_VYNOSYPLUS", "NL_NAKLADY", "NL_NAKLADYPLUS", "C_VAZBY", "C_IFRSPRIMARNI", "ID_CISDATABAZE") AS 
  select "ID","NL_ERROR","NL_KROK","ID_KTGUCETNISPOLECNOST","ID_KTGDOKLAD","S_MENA","DT_DATUM","S_POPIS","ID_PARENT","DT_VYTVORENO","S_UZIVATEL","DT_PLATNOSTMUSTEK","S_UZIVATELMUSTEK","NL_WARNING","DT_DATUMPOCSTAV","ID_SUBKONSOLIDACE","ID_KTGSUBKONSOLIDACEETAPA","NL_POCETTRANSAKCI","ND_ZJ","ND_VJ","DT_MAXTRANSAKCE","C_SUBSMER","DT_SUBDATUM","C_BASEDOKLAD","NL_POCETTRANSAKCIPROJEKT","NL_POCETTRANSAKCIODBOR","NL_POCETTRANSAKCIPROJEKTPLUS","DT_DATUMRELATIVE","DT_DATUMEXPORTOLAP","NL_VYNOSY","NL_VYNOSYPLUS","NL_NAKLADY","NL_NAKLADYPLUS","C_VAZBY","C_IFRSPRIMARNI","ID_CISDATABAZE" from DB_JT.KP_DAT_DOKLAD
;


PROMPT Completed DWT_DAT_DOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_DAT_DOKLADZDROJDAT.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_DAT_DOKLADZDROJDAT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_DAT_DOKLADZDROJDAT
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_DAT_DOKLADZDROJDAT" ("ID", "ID_DOKLAD", "ID_DOKLADPOLOZKA", "ID_EXTSYSTEM", "ID_EXTSYSTEM2", "C_EXTSYSTEM", "S_MENA", "C_STRANA", "S_UCET", "ND_CASTKAMENA", "ND_CASTKALOCAL", "S_EXTPROTISTRANA", "S_EXTPROTISTRANA_EO", "S_EXTPROTISTRANA_BANKA", "S_EXTPROTISTRANA_EMITENT", "S_EXTPROTISTRANAICO", "S_EXTPROTISTRANAICO_EO", "S_EXTPROTISTRANAICO_BANKA", "S_EXTPROTISTRANAICO_EMITENT", "S_POPIS", "DATUM", "C_KONTOKORENT", "KID", "DOID", "PLATINST", "EMITENT_ID", "BANKA_ID", "FIRMA_ID", "EO_ID", "NUMBER0", "ID_PROTI_1", "ID_PROTI_2", "ID_PROTI_3", "ID_PROTI_4", "S_EVIDOVATPROTISTRANU", "C_MENOVAPOZICE", "C_UVEROVAPOZICE", "C_VYJIMKAPROTISTRANA", "ID_KTGUCETNISPOLECNOSTUNIF", "POCATECNISTAV", "ID_KTGSPOLECNOST", "ID_KTGPROJEKT", "ID_KTGODBOR", "ID_TYPNASTROJE", "XIDSL", "C_TYPPORTFOLIO", "ID_KTGCENNYPAPIR", "S_FAKTURA", "PC_PROD_KIND", "PC_PROD_TYPE", "ID_EXTSYSTEM3", "S_UCETUNIF", "NL_REL", "C_TYPTRANSAKCE", "ID_TYPTRANSAKCE", "S_UCETORIGINAL", "ID_CISUCETUNIF", "DT_DATUMSPLATNOST", "UCTOVANODNE", "X_ISIT_BUDGET_ID") AS 
  select "ID","ID_DOKLAD","ID_DOKLADPOLOZKA","ID_EXTSYSTEM","ID_EXTSYSTEM2","C_EXTSYSTEM","S_MENA","C_STRANA",SUBSTR(S_UCET,0,9),"ND_CASTKAMENA","ND_CASTKALOCAL","S_EXTPROTISTRANA","S_EXTPROTISTRANA_EO","S_EXTPROTISTRANA_BANKA","S_EXTPROTISTRANA_EMITENT","S_EXTPROTISTRANAICO","S_EXTPROTISTRANAICO_EO","S_EXTPROTISTRANAICO_BANKA","S_EXTPROTISTRANAICO_EMITENT","S_POPIS","DATUM","C_KONTOKORENT","KID","DOID","PLATINST","EMITENT_ID","BANKA_ID","FIRMA_ID","EO_ID","NUMBER0","ID_PROTI_1","ID_PROTI_2","ID_PROTI_3","ID_PROTI_4","S_EVIDOVATPROTISTRANU","C_MENOVAPOZICE","C_UVEROVAPOZICE","C_VYJIMKAPROTISTRANA","ID_KTGUCETNISPOLECNOSTUNIF","POCATECNISTAV","ID_KTGSPOLECNOST","ID_KTGPROJEKT","ID_KTGODBOR","ID_TYPNASTROJE","XIDSL","C_TYPPORTFOLIO","ID_KTGCENNYPAPIR","S_FAKTURA","PC_PROD_KIND","PC_PROD_TYPE","ID_EXTSYSTEM3",SUBSTR(S_UCETUNIF,0,9),"NL_REL","C_TYPTRANSAKCE","ID_TYPTRANSAKCE","S_UCETORIGINAL",SUBSTR(ID_CISUCETUNIF,0,9),"DT_DATUMSPLATNOST","UCTOVANODNE","X_ISIT_BUDGET_ID" from DB_JT.KP_DAT_DOKLADZDROJDAT
;


PROMPT Completed DWT_DAT_DOKLADZDROJDAT.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_DAT_DOKLADZDROJDATMANUAL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_DAT_DOKLADZDROJDATMANUAL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_DAT_DOKLADZDROJDATMANUAL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_DAT_DOKLADZDROJDATMANUAL" ("DOKLAD_DATUM", "DOKLAD_KTGUCETNISPOLECNOST", "ID_DOKLAD", "S_MENA", "S_UCET", "ID_KTGUCETNISPOLECNOST", "ID_KTGSPOLECNOST", "ID_CISRADEKTEXT", "C_MENOVAPOZICE", "C_UVEROVAPOZICE", "ND_CASTKAMENA", "ND_CASTKALOCAL", "ND_CASTKACNB", "C_LIST", "S_EVIDOVATPROTISTRANU", "C_KONTOKORENT", "ID_DEFLISTBUNKA", "ID_SUBKONSOLIDACE", "ID_CISUCETUNIF") AS 
  select "DOKLAD_DATUM","DOKLAD_KTGUCETNISPOLECNOST","ID_DOKLAD","S_MENA","S_UCET","ID_KTGUCETNISPOLECNOST","ID_KTGSPOLECNOST","ID_CISRADEKTEXT","C_MENOVAPOZICE","C_UVEROVAPOZICE","ND_CASTKAMENA","ND_CASTKALOCAL","ND_CASTKACNB","C_LIST","S_EVIDOVATPROTISTRANU","C_KONTOKORENT","ID_DEFLISTBUNKA","ID_SUBKONSOLIDACE","ID_CISUCETUNIF" from DB_JT.KP_DAT_DOKLADZDROJDATMANUAL  where rownum <1
;


PROMPT Completed DWT_DAT_DOKLADZDROJDATMANUAL.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_DAT_DOKUMENT.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_DAT_DOKUMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_DAT_DOKUMENT
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_DAT_DOKUMENT" ("ID", "ID_CISDOKUMENT", "ID_KTGUCETNISPOLECNOST", "DT_DATUMZADANI", "ID_ZADAVATEL", "S_POPIS", "ID_TYPTRANSAKCE", "S_MENA", "S_PISEMNE", "C_TYPIZOVANATRAN", "DT_TYPIZOVANAOD", "DT_TYPIZOVANADO", "DT_DATUMZAUCTOVANI", "ID_SPOLECNOST", "S_CISLODOKLADU", "DT_DATUMSPLATNOSTI", "ID_APPUSER", "ID_ZAUCT", "S_PROTISTRANA", "ID_CISSTATUS", "C_POKLADNITRANSAKCE", "ID_GESTOR", "DT_GESTORSCHVALENO", "DT_POZADDATUMUHRADY", "DT_REALDATUMUHRADY", "DT_GESTORZAMITNUTO", "S_GESTORZAMITNUTO", "DT_ZADAVATELZAMITNUTO", "S_ZADAVATELZAMITNUTO", "ID_TYPIZLINK", "S_DUVODZRUSENI", "ID_UCSPOLUHRADA", "DT_ZAUCTUHRADA", "ID_ZAUCTUHRADA", "ID_TYPPRECENENI", "S_UCET", "S_UCET2", "C_DPH", "ID_BUDGET", "ID_TTDEVELOPER", "ID_CISUHRADA", "DT_UCETNIZAMITNUTO", "S_UCETNIZAMITNUTO", "ID_KTGUCETNISPOLECNOST2", "S_UCETB", "S_UCETB2", "CERPAT_REZERVU", "DT_NAVYSENI_SCHVALENO", "DT_NAVYSENI_ZAMITNUTO", "S_NAVYSENI_ZAMITNUTO", "ID_NAVYSENI_MB", "CISLOFA", "DATPRIJ", "DATDPH", "CASTKA", "FEIS_PRENOS", "DATODES", "TYP_FKT", "C_CAPEX_OPEX", "S_FEISTEXT", "DATVYSTAVENI") AS 
  select "ID","ID_CISDOKUMENT","ID_KTGUCETNISPOLECNOST","DT_DATUMZADANI","ID_ZADAVATEL","S_POPIS","ID_TYPTRANSAKCE","S_MENA","S_PISEMNE","C_TYPIZOVANATRAN","DT_TYPIZOVANAOD","DT_TYPIZOVANADO","DT_DATUMZAUCTOVANI","ID_SPOLECNOST","S_CISLODOKLADU","DT_DATUMSPLATNOSTI","ID_APPUSER","ID_ZAUCT","S_PROTISTRANA","ID_CISSTATUS","C_POKLADNITRANSAKCE","ID_GESTOR","DT_GESTORSCHVALENO","DT_POZADDATUMUHRADY","DT_REALDATUMUHRADY","DT_GESTORZAMITNUTO","S_GESTORZAMITNUTO","DT_ZADAVATELZAMITNUTO","S_ZADAVATELZAMITNUTO","ID_TYPIZLINK","S_DUVODZRUSENI","ID_UCSPOLUHRADA","DT_ZAUCTUHRADA","ID_ZAUCTUHRADA","ID_TYPPRECENENI","S_UCET","S_UCET2","C_DPH","ID_BUDGET","ID_TTDEVELOPER","ID_CISUHRADA","DT_UCETNIZAMITNUTO","S_UCETNIZAMITNUTO","ID_KTGUCETNISPOLECNOST2","S_UCETB","S_UCETB2","CERPAT_REZERVU","DT_NAVYSENI_SCHVALENO","DT_NAVYSENI_ZAMITNUTO","S_NAVYSENI_ZAMITNUTO","ID_NAVYSENI_MB","CISLOFA","DATPRIJ","DATDPH","CASTKA","FEIS_PRENOS","DATODES","TYP_FKT","C_CAPEX_OPEX","S_FEISTEXT","DATVYSTAVENI" from DB_JT.KP_DAT_DOKUMENT
  where 1=1
;


PROMPT Completed DWT_DAT_DOKUMENT.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_DAT_DOKUMENTRADEK.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_DAT_DOKUMENTRADEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_DAT_DOKUMENTRADEK
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_DAT_DOKUMENTRADEK" ("ID", "ID_DOKUMENT", "ID_ODBOR", "ID_PROJEKT", "ND_CASTKA", "ID_ODBOROO", "DT_SCHVALENOODBOR", "ID_PROJEKTMAN", "DT_SCHVALENOPROJEKT", "ID_UCSPOLOO", "DT_SCHVALENOUCSPOL", "ID_UCSPOLTOP", "DT_SCHVALENOTOP", "S_KOMENTAR", "DT_DATUMPREFAKT", "ID_PREFAKT", "C_KPREFAKT", "DT_DATUMZADANI", "C_REMOVED", "C_ZOBJEDNAVKY", "ID_ZAMITNUTO", "DT_ZAMITNUTO", "S_ZAMITNUTO", "ID_DOKUMENTORIG", "ID_ODBOROOREAL", "ID_PROJEKTMANREAL", "ID_UCSPOLOOREAL", "ID_UCSPOLTOPREAL", "ID_TYPTRANSAKCE", "ND_OBJ_CASTKA_VOLNA", "ID_OBJ_RADEK", "ID_BANKAR", "S_ISIT_BUDGET", "C_AKTIVACE_HNED", "DT_AKTIVACE", "S_SMLOUVA_CISLO", "ID_TYP_SW", "ID_APLIKACE", "ID_DRUH_NAKLADU") AS 
  select "ID","ID_DOKUMENT","ID_ODBOR","ID_PROJEKT","ND_CASTKA","ID_ODBOROO","DT_SCHVALENOODBOR","ID_PROJEKTMAN","DT_SCHVALENOPROJEKT","ID_UCSPOLOO","DT_SCHVALENOUCSPOL","ID_UCSPOLTOP","DT_SCHVALENOTOP","S_KOMENTAR","DT_DATUMPREFAKT","ID_PREFAKT","C_KPREFAKT","DT_DATUMZADANI","C_REMOVED","C_ZOBJEDNAVKY","ID_ZAMITNUTO","DT_ZAMITNUTO","S_ZAMITNUTO","ID_DOKUMENTORIG","ID_ODBOROOREAL","ID_PROJEKTMANREAL","ID_UCSPOLOOREAL","ID_UCSPOLTOPREAL","ID_TYPTRANSAKCE","ND_OBJ_CASTKA_VOLNA","ID_OBJ_RADEK","ID_BANKAR","S_ISIT_BUDGET","C_AKTIVACE_HNED","DT_AKTIVACE","S_SMLOUVA_CISLO","ID_TYP_SW","ID_APLIKACE","ID_DRUH_NAKLADU" from DB_JT.KP_DAT_DOKUMENTRADEK
  where 1=1
;


PROMPT Completed DWT_DAT_DOKUMENTRADEK.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_DAT_MANUALNIZDROJDAT.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_DAT_MANUALNIZDROJDAT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_DAT_MANUALNIZDROJDAT
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_DAT_MANUALNIZDROJDAT" ("ID", "ID_KTGUCETNISPOLECNOST", "S_MENA", "S_UCET", "ND_CASTKAMENA", "ND_CASTKALOCAL", "S_POPIS", "DT_DATUM", "ID_KTGUCETNISPOLECNOSTUNIF", "ID_KTGSPOLECNOST", "ID_KTGPROJEKT", "ID_KTGODBOR", "S_UZIVATEL", "C_SETNULL", "C_TYP", "ID_KTGPROJEKTOLD", "ID_KTGODBOROLD", "DT_DATUMPLATNOSTOD", "DT_DATUMPLATNOSTDO", "S_UCETORIGINAL", "ID_CISUCETUNIF") AS 
  select "ID","ID_KTGUCETNISPOLECNOST","S_MENA","S_UCET","ND_CASTKAMENA","ND_CASTKALOCAL","S_POPIS","DT_DATUM","ID_KTGUCETNISPOLECNOSTUNIF","ID_KTGSPOLECNOST","ID_KTGPROJEKT","ID_KTGODBOR","S_UZIVATEL","C_SETNULL","C_TYP","ID_KTGPROJEKTOLD","ID_KTGODBOROLD","DT_DATUMPLATNOSTOD","DT_DATUMPLATNOSTDO","S_UCETORIGINAL","ID_CISUCETUNIF" from DB_JT.KP_DAT_MANUALNIZDROJDAT      where rownum <1
;


PROMPT Completed DWT_DAT_MANUALNIZDROJDAT.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_DEF_BUDGETMUSTEK.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_DEF_BUDGETMUSTEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_DEF_BUDGETMUSTEK
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_DEF_BUDGETMUSTEK" ("ID", "ID_CISSUBJECT", "ID_CISTYPTRANSAKCE", "S_UCET", "DT_PLATNOSTOD", "DT_PLATNOSTDO") AS 
  select "ID","ID_CISSUBJECT","ID_CISTYPTRANSAKCE","S_UCET","DT_PLATNOSTOD","DT_PLATNOSTDO" from DB_JT.KP_DEF_BUDGETMUSTEK
;


PROMPT Completed DWT_DEF_BUDGETMUSTEK.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_DEF_DOKLAD.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_DEF_DOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_DEF_DOKLAD
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_DEF_DOKLAD" ("ID", "ID_CISLIST", "NL_PORADI", "ID_CISDOKLAD") AS 
  select "ID","ID_CISLIST","NL_PORADI","ID_CISDOKLAD" from DB_JT.KP_DEF_DOKLAD
;


PROMPT Completed DWT_DEF_DOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_DEF_LISTBUNKA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_DEF_LISTBUNKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_DEF_LISTBUNKA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_DEF_LISTBUNKA" ("ID", "ID_CISLIST", "ID_CISRADEKTYP", "NL_RADEK", "NL_SLOUPEC", "C_TYP", "S_ZKRATKA", "S_CARTESISCODEROW", "S_CARTESISCODECOLUMN") AS 
  select "ID","ID_CISLIST","ID_CISRADEKTYP","NL_RADEK","NL_SLOUPEC","C_TYP","S_ZKRATKA","S_CARTESISCODEROW","S_CARTESISCODECOLUMN" from DB_JT.KP_DEF_LISTBUNKA
;


PROMPT Completed DWT_DEF_LISTBUNKA.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_DEF_LISTBUNKAUCET.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_DEF_LISTBUNKAUCET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_DEF_LISTBUNKAUCET
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_DEF_LISTBUNKAUCET" ("ID", "ID_DEFLISTBUNKA", "S_UCET", "S_UCET_MINUS", "C_UCETSUMA", "ND_KOEFICIENT", "C_VALIDOVATMASKU", "ID_CISLIST", "S_EVIDOVATPROTISTRANU", "C_MENOVAPOZICE", "C_UVEROVAPOZICE", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "S_UZIVATEL", "ID_PARENT", "DT_LAST_MODIFY", "ID_KTGDOKLAD") AS 
  select "ID","ID_DEFLISTBUNKA","S_UCET","S_UCET_MINUS","C_UCETSUMA","ND_KOEFICIENT","C_VALIDOVATMASKU","ID_CISLIST","S_EVIDOVATPROTISTRANU","C_MENOVAPOZICE","C_UVEROVAPOZICE","DT_PLATNOSTOD","DT_PLATNOSTDO","S_UZIVATEL","ID_PARENT","DT_LAST_MODIFY","ID_KTGDOKLAD" from DB_JT.KP_DEF_LISTBUNKAUCET
;


PROMPT Completed DWT_DEF_LISTBUNKAUCET.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_DEF_UCET2UCETUNIF.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_DEF_UCET2UCETUNIF.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_DEF_UCET2UCETUNIF
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_DEF_UCET2UCETUNIF" ("ID", "ID_CISUCETUNIF", "S_UCETPRIMSYSTEM", "ID_CISSUBJECT", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "C_UCETSUMA", "S_EVIDOVATPROTISTRANU", "C_TESTOVATMAJUCAST") AS 
  select "ID","ID_CISUCETUNIF","S_UCETPRIMSYSTEM","ID_CISSUBJECT","DT_PLATNOSTOD","DT_PLATNOSTDO","C_UCETSUMA","S_EVIDOVATPROTISTRANU","C_TESTOVATMAJUCAST" 
  from DB_JT.KP_DEF_UCET2UCETUNIF
where DT_PLATNOSTDO > trunc(sysdate)
;


PROMPT Completed DWT_DEF_UCET2UCETUNIF.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_EXT_KP_CIS_ISIT_APLIKACE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_EXT_KP_CIS_ISIT_APLIKACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_EXT_KP_CIS_ISIT_APLIKACE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_EXT_KP_CIS_ISIT_APLIKACE" ("ID", "S_NAZEV", "S_POPIS", "DT_PLATNOSTOD", "DT_PLATNOSTDO") AS 
  select "ID","S_NAZEV","S_POPIS","DT_PLATNOSTOD","DT_PLATNOSTDO" from DB_JT.KP_CIS_ISIT_APLIKACE
;


PROMPT Completed DWT_EXT_KP_CIS_ISIT_APLIKACE.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_KP_CIS_ISIT_BUDGET.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_KP_CIS_ISIT_BUDGET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_KP_CIS_ISIT_BUDGET
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_KP_CIS_ISIT_BUDGET" ("ID", "S_KOD", "S_POPIS", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "ID_KTG_ODBOR", "ID_TYP_POLOZKY", "ID_KTG_PROJEKT", "ID_KTG_UCETNISPOL", "ID_DRUH_TRANSAKCE", "ID_ISIT_APLIKACE", "ID_ISIT_DRUH_NAKLADU") AS 
  select "ID","S_KOD","S_POPIS","DT_PLATNOSTOD","DT_PLATNOSTDO","ID_KTG_ODBOR","ID_TYP_POLOZKY","ID_KTG_PROJEKT","ID_KTG_UCETNISPOL","ID_DRUH_TRANSAKCE","ID_ISIT_APLIKACE","ID_ISIT_DRUH_NAKLADU" from DB_JT.KP_CIS_ISIT_BUDGET
;


PROMPT Completed DWT_KP_CIS_ISIT_BUDGET.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_KP_CIS_ISIT_DRUH_NAKLADU.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_KP_CIS_ISIT_DRUH_NAKLADU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_KP_CIS_ISIT_DRUH_NAKLADU
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_KP_CIS_ISIT_DRUH_NAKLADU" ("ID", "S_NAZEV", "S_POPIS", "DT_PLATNOSTOD", "DT_PLATNOSTDO") AS 
  select "ID","S_NAZEV","S_POPIS","DT_PLATNOSTOD","DT_PLATNOSTDO" from DB_JT.KP_CIS_ISIT_DRUH_NAKLADU
;


PROMPT Completed DWT_KP_CIS_ISIT_DRUH_NAKLADU.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_KP_CIS_ISIT_TYP_POLOZKY.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_KP_CIS_ISIT_TYP_POLOZKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_KP_CIS_ISIT_TYP_POLOZKY
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_KP_CIS_ISIT_TYP_POLOZKY" ("ID", "S_NAZEV", "S_POPIS", "DT_PLATNOSTOD", "DT_PLATNOSTDO") AS 
  select "ID","S_NAZEV","S_POPIS","DT_PLATNOSTOD","DT_PLATNOSTDO" from DB_JT.KP_CIS_ISIT_TYP_POLOZKY
;


PROMPT Completed DWT_KP_CIS_ISIT_TYP_POLOZKY.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_KP_CIS_ISIT_TYP_SW.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_KP_CIS_ISIT_TYP_SW.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_KP_CIS_ISIT_TYP_SW
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_KP_CIS_ISIT_TYP_SW" ("ID", "S_NAZEV", "S_POPIS", "DT_PLATNOSTOD", "DT_PLATNOSTDO") AS 
  select "ID","S_NAZEV","S_POPIS","DT_PLATNOSTOD","DT_PLATNOSTDO" from DB_JT.KP_CIS_ISIT_TYP_SW
;


PROMPT Completed DWT_KP_CIS_ISIT_TYP_SW.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_KP_REL_PROJEKTUCSPOL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_KP_REL_PROJEKTUCSPOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_KP_REL_PROJEKTUCSPOL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_KP_REL_PROJEKTUCSPOL" ("ID_KTGPROJEKT", "ID_KTGUCETNISPOLECNOST", "C_POUZITHV", "DT_MATKAOD", "DT_MATKADO") AS 
  SELECT "ID_KTGPROJEKT","ID_KTGUCETNISPOLECNOST","C_POUZITHV","DT_MATKAOD","DT_MATKADO" from DB_JT.Kp_Rel_Projektucspol
;


PROMPT Completed DWT_KP_REL_PROJEKTUCSPOL.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_KTG_APPUSER.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_KTG_APPUSER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_KTG_APPUSER
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_KTG_APPUSER" ("ID", "S_USERID", "S_USERNAME", "S_KRESTNI", "S_PRIJMENI", "S_TITULYPRED", "S_TITULYPO", "S_EMAIL", "C_INDIKATOR", "S_TELEFON", "ID_CISDOCUCSPOL", "ID_DOCUCSPOL", "ID_DOCCOUNTRY", "ID_NADRIZENAUCETNI", "C_ARCHIVNI", "C_OLAP", "S_ACTUATEUSERNAME", "C_EXTERNI", "OLD_USERID", "C_NADRIZENAUCETNI") AS 
  select "ID","S_USERID","S_USERNAME","S_KRESTNI","S_PRIJMENI","S_TITULYPRED","S_TITULYPO","S_EMAIL","C_INDIKATOR","S_TELEFON","ID_CISDOCUCSPOL","ID_DOCUCSPOL","ID_DOCCOUNTRY","ID_NADRIZENAUCETNI","C_ARCHIVNI","C_OLAP","S_ACTUATEUSERNAME","C_EXTERNI","OLD_USERID","C_NADRIZENAUCETNI" from DB_JT.KTG_APPUSER
;


PROMPT Completed DWT_KTG_APPUSER.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_KTG_DOKLAD.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_KTG_DOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_KTG_DOKLAD
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_KTG_DOKLAD" ("ID", "ID_CISDOKLAD", "ID_CISSUBJECT", "S_POPIS", "S_UCETNAKLADY", "S_UCETVYNOSY", "NL_PREVODMUSTEKPOCETRADKU", "C_NEDELATKONTROLUZARAZENIUCTU") AS 
  select "ID","ID_CISDOKLAD","ID_CISSUBJECT","S_POPIS","S_UCETNAKLADY","S_UCETVYNOSY","NL_PREVODMUSTEKPOCETRADKU","C_NEDELATKONTROLUZARAZENIUCTU" from DB_JT.KP_KTG_DOKLAD
;


PROMPT Completed DWT_KTG_DOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_KTG_DOKLADMAJUCASTVYJIMKA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_KTG_DOKLADMAJUCASTVYJIMKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_KTG_DOKLADMAJUCASTVYJIMKA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_KTG_DOKLADMAJUCASTVYJIMKA" ("ID", "ID_KTGDOKLAD", "S_UCET", "S_POPIS", "S_UZIVATEL", "DT_ZMENA") AS 
  select "ID","ID_KTGDOKLAD","S_UCET","S_POPIS","S_UZIVATEL","DT_ZMENA" from DB_JT.KP_KTG_DOKLADMAJUCASTVYJIMKA
;


PROMPT Completed DWT_KTG_DOKLADMAJUCASTVYJIMKA.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_KTG_ODBOR.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_KTG_ODBOR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_KTG_ODBOR
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_KTG_ODBOR" ("ID", "ID_KTGUCETNISPOLECNOST", "S_NAZEV", "S_KOD", "ID_ODPOVEDNAOSOBA", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "ID_USEK", "ID_KAT", "ID_TYPKAT", "ND_DOCUROVEN1", "C_BUDGETING", "C_ARCHIVNI", "ID_SPONZOR", "ID_IFRSSEGMENT", "ID_IFRSSUBSEGMENT", "ID_MNGSEGMENT") AS 
  select "ID","ID_KTGUCETNISPOLECNOST","S_NAZEV","S_KOD","ID_ODPOVEDNAOSOBA","DT_PLATNOSTOD","DT_PLATNOSTDO","ID_USEK","ID_KAT","ID_TYPKAT","ND_DOCUROVEN1","C_BUDGETING","C_ARCHIVNI","ID_SPONZOR","ID_IFRSSEGMENT","ID_IFRSSUBSEGMENT","ID_MNGSEGMENT" from DB_JT.KP_KTG_ODBOR
;


PROMPT Completed DWT_KTG_ODBOR.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_KTG_PBKLIENT.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_KTG_PBKLIENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_KTG_PBKLIENT
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_KTG_PBKLIENT" ("ID", "C_AKTIVNI", "S_ICO", "S_NAZEV", "S_ULICE", "S_MESTO", "S_PSC", "S_STAT", "S_PRIVATNIBANKER", "C_PERSONCORP", "ID_KONTAKT", "ID_KATEGORIE", "ID_STATUS", "ID_SKUPINA", "NUMBER0", "KID", "ID_EPERSPEKTIVA", "STREDISKO", "S_UZIVATEL", "DT_DATUMZMENY", "SHORT_NAME", "NUMBER0_SK", "S_ICOBEZNUL") AS 
  select "ID","C_AKTIVNI","S_ICO","S_NAZEV","S_ULICE","S_MESTO","S_PSC","S_STAT","S_PRIVATNIBANKER","C_PERSONCORP","ID_KONTAKT","ID_KATEGORIE","ID_STATUS","ID_SKUPINA","NUMBER0","KID","ID_EPERSPEKTIVA","STREDISKO","S_UZIVATEL","DT_DATUMZMENY","SHORT_NAME","NUMBER0_SK","S_ICOBEZNUL" from DB_JT.KP_KTG_PBKLIENT
;


PROMPT Completed DWT_KTG_PBKLIENT.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_KTG_PROJEKT.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_KTG_PROJEKT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_KTG_PROJEKT
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_KTG_PROJEKT" ("ID", "S_NAZEV", "S_CISLOOLD", "ID_STATUS", "DT_DATUMSTATUSZMENA", "ID_NAVRHUJE", "ID_SPONZOR", "ID_TOP", "ID_PMANAGER", "ID_KATEGORIE", "ID_TYPKATEGORIE", "ID_KTGUCETNISPOLECNOST", "ND_NAKLADY", "S_MENANAKLADY", "ND_INVESTICE", "S_MENAINVESTICE", "ND_OCENENI", "S_MENAOCENENI", "DT_STARTOCENENI", "ID_FREKVENCE", "DT_KONECOCENENI", "S_POPIS", "S_UZIVATEL", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "ND_DOCUROVEN1", "ID_PROJEKTNAVRH", "DT_MEMORANDUMDALSI", "NL_MEMORANDUMMESICU", "ID_IFRSSEGMENT", "ID_IFRSSUBSEGMENT", "ID_MNGSEGMENT", "ID_TYPBILANCE", "ID_TYPBUDGETU", "C_SLEDUJEBUDGET", "ND_BUDGETNAVYSENI_PM", "ND_BUDGETNAVYSENI_TOP", "ID_MNGSEGMENTBOSS", "C_POUZITMNGSEGMENT") AS 
  select "ID","S_NAZEV","S_CISLOOLD","ID_STATUS","DT_DATUMSTATUSZMENA","ID_NAVRHUJE","ID_SPONZOR","ID_TOP","ID_PMANAGER","ID_KATEGORIE","ID_TYPKATEGORIE","ID_KTGUCETNISPOLECNOST","ND_NAKLADY","S_MENANAKLADY","ND_INVESTICE","S_MENAINVESTICE","ND_OCENENI","S_MENAOCENENI","DT_STARTOCENENI","ID_FREKVENCE","DT_KONECOCENENI","S_POPIS","S_UZIVATEL","DT_PLATNOSTOD","DT_PLATNOSTDO","ND_DOCUROVEN1","ID_PROJEKTNAVRH","DT_MEMORANDUMDALSI","NL_MEMORANDUMMESICU","ID_IFRSSEGMENT","ID_IFRSSUBSEGMENT","ID_MNGSEGMENT","ID_TYPBILANCE","ID_TYPBUDGETU","C_SLEDUJEBUDGET","ND_BUDGETNAVYSENI_PM","ND_BUDGETNAVYSENI_TOP","ID_MNGSEGMENTBOSS","C_POUZITMNGSEGMENT" from DB_JT.KP_KTG_PROJEKT
;


PROMPT Completed DWT_KTG_PROJEKT.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_KTG_SPOLECNOST.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_KTG_SPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_KTG_SPOLECNOST
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_KTG_SPOLECNOST" ("ID", "S_ICO", "S_NAZEV", "S_POM_ICO", "S_COUNTRY", "C_INDICATOR_PC", "S_EKONOM_SEKTOR", "KATEGORIEKOEF", "S_OKEC", "ID_KTGSPOLECNOST", "S_HLAVNIUCETNISKUPINA", "S_KODKATEGORIEPROTISTRANA", "C_LICENCE", "C_LIKVIDACE", "C_SPOLECNERIZENY", "DT_DATUMZALOZENI", "S_ULICE", "S_PSC", "S_MESTO", "S_DIC", "S_UCETSCP", "S_REGRMS", "DT_QUESTORUPDATE", "ID_KTG_EXTERNIRATING", "C_ZONA", "ID_UCETNISYSTEM", "S_ZVLASTNIVZTAHKJINEMUCLENURKC", "C_EVIEXTDODAVATEL", "C_SKUPINAIC", "C_VPRECHODU", "S_KODKATEGORIEPROTISTRANA_2") AS 
  select "ID","S_ICO","S_NAZEV","S_POM_ICO","S_COUNTRY","C_INDICATOR_PC","S_EKONOM_SEKTOR","KATEGORIEKOEF","S_OKEC","ID_KTGSPOLECNOST","S_HLAVNIUCETNISKUPINA","S_KODKATEGORIEPROTISTRANA","C_LICENCE","C_LIKVIDACE","C_SPOLECNERIZENY","DT_DATUMZALOZENI","S_ULICE","S_PSC","S_MESTO","S_DIC","S_UCETSCP","S_REGRMS","DT_QUESTORUPDATE","ID_KTG_EXTERNIRATING","C_ZONA","ID_UCETNISYSTEM","S_ZVLASTNIVZTAHKJINEMUCLENURKC","C_EVIEXTDODAVATEL","C_SKUPINAIC","C_VPRECHODU","S_KODKATEGORIEPROTISTRANA_2" from DB_JT.KP_KTG_SPOLECNOST
;


PROMPT Completed DWT_KTG_SPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_KTG_SPOLECNOST_GROUP.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_KTG_SPOLECNOST_GROUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_KTG_SPOLECNOST_GROUP
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_KTG_SPOLECNOST_GROUP" ("ID_SPOLECNOST", "CUST_GROUP_NAME", "CUST_GROUP_CODE", "CUST_STRUC_NAME", "CUST_STRUC_CODE", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "DT_DATUMZMENY") AS 
  select "ID_SPOLECNOST","CUST_GROUP_NAME","CUST_GROUP_CODE","CUST_STRUC_NAME","CUST_STRUC_CODE","DT_PLATNOSTOD","DT_PLATNOSTDO","DT_DATUMZMENY" from DB_JT.KP_KTG_SPOLECNOST_GROUP
;


PROMPT Completed DWT_KTG_SPOLECNOST_GROUP.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_KTG_SUBKONSOLIDACE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_KTG_SUBKONSOLIDACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_KTG_SUBKONSOLIDACE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_KTG_SUBKONSOLIDACE" ("ID_KTGUCETNISPOLECNOST", "NL_PORADI", "ID_KTGUCETNISKUPINA", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "S_TYPKURSLISTEK", "ID_KTGUCETNISPOLECNOSTMATKA", "C_KAMKURZOVYROZDIL", "C_TYPVYKAZOVANI", "NL_KROKDOKLADCLENU", "C_EXPORTFLAGCZK", "ID_KTGUCETNISKUPINAVYJIMKA") AS 
  select "ID_KTGUCETNISPOLECNOST","NL_PORADI","ID_KTGUCETNISKUPINA","DT_PLATNOSTOD","DT_PLATNOSTDO","S_TYPKURSLISTEK","ID_KTGUCETNISPOLECNOSTMATKA","C_KAMKURZOVYROZDIL","C_TYPVYKAZOVANI","NL_KROKDOKLADCLENU","C_EXPORTFLAGCZK","ID_KTGUCETNISKUPINAVYJIMKA" from DB_JT.KP_KTG_SUBKONSOLIDACE
;


PROMPT Completed DWT_KTG_SUBKONSOLIDACE.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_KTG_UCETNISPOLECNOST.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_KTG_UCETNISPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_KTG_UCETNISPOLECNOST
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_KTG_UCETNISPOLECNOST" ("ID", "ID_CISSUBJECT", "S_ICO", "SPIN_ID", "TOPAS_ID", "QUEST_ID", "C_EXTSYSTEM", "S_NAZEV", "C_POCITATROZVAHU", "S_SOUBORPREDPONA", "S_MENA", "S_DBLINK", "C_AUTOMATICKEGENEROVANI", "ID_KATEGORIE", "C_RKC", "S_ZKRATKA", "DT_LASTCLOSEDATE", "DT_DATUMARCHIVACE", "C_OPCE", "ID_CISKATSPOL", "ID_ZODPOVEDNAUCETNI", "ID_ODPOVEDNAOSOBA", "ID_ADMINISTRATOR", "DT_RELATIVEDATE", "ID_TOPMNG", "S_POZNAMKA", "C_DANOVAZTRATA", "ID_CISOPCE", "ND_DOCUROVEN2", "S_LOCALE", "C_DOCDISPLAY", "C_PREHLEDDISPLAY", "ID_CISNOMINEE", "NL_ROKPOCSTAVIMPORTSYSTEM", "ID_TYPPROJEKTU", "ID_KTGODBOR", "ID_KTGPROJEKT", "DT_UCETNIOBDOBISTART", "DT_UCETNIOBDOBIKONEC", "C_ONLINE", "DT_ONLINEOD", "C_NOCNIZPRACOVANI", "ID_CISNASTROJUCETNIVYJIMKY", "ID_CISDATABAZE", "S_SKUPINALIKE", "ND_BUDGETNAVYSENI_OO", "ND_BUDGETNAVYSENI_TOP", "S_DUVODOFFLINE", "S_UZIVATEL", "ID_MNGSEGMENT", "ID_SPRAVCEKONSOLIDACE", "ID_MNGSEGMENTBOSS", "ID_CENTRALA", "C_UCETNICTVI_V_IFRS", "C_IFRSPRIMARNI", "DT_UNIFIKOVANEDOKLADY", "C_FEIS_UCETTYP", "C_TESTOVATMAJUCAST", "C_POCITEJMUPOZICI", "C_MULTISEGMENT", "C_EXPORTJAKOPROTISTRANA") AS 
  select "ID","ID_CISSUBJECT","S_ICO","SPIN_ID","TOPAS_ID","QUEST_ID","C_EXTSYSTEM","S_NAZEV","C_POCITATROZVAHU","S_SOUBORPREDPONA","S_MENA","S_DBLINK","C_AUTOMATICKEGENEROVANI","ID_KATEGORIE","C_RKC","S_ZKRATKA","DT_LASTCLOSEDATE","DT_DATUMARCHIVACE","C_OPCE","ID_CISKATSPOL","ID_ZODPOVEDNAUCETNI","ID_ODPOVEDNAOSOBA","ID_ADMINISTRATOR","DT_RELATIVEDATE","ID_TOPMNG","S_POZNAMKA","C_DANOVAZTRATA","ID_CISOPCE","ND_DOCUROVEN2","S_LOCALE","C_DOCDISPLAY","C_PREHLEDDISPLAY","ID_CISNOMINEE","NL_ROKPOCSTAVIMPORTSYSTEM","ID_TYPPROJEKTU","ID_KTGODBOR","ID_KTGPROJEKT","DT_UCETNIOBDOBISTART","DT_UCETNIOBDOBIKONEC","C_ONLINE","DT_ONLINEOD","C_NOCNIZPRACOVANI","ID_CISNASTROJUCETNIVYJIMKY","ID_CISDATABAZE","S_SKUPINALIKE","ND_BUDGETNAVYSENI_OO","ND_BUDGETNAVYSENI_TOP","S_DUVODOFFLINE","S_UZIVATEL","ID_MNGSEGMENT","ID_SPRAVCEKONSOLIDACE","ID_MNGSEGMENTBOSS","ID_CENTRALA","C_UCETNICTVI_V_IFRS","C_IFRSPRIMARNI","DT_UNIFIKOVANEDOKLADY","C_FEIS_UCETTYP","C_TESTOVATMAJUCAST","C_POCITEJMUPOZICI","C_MULTISEGMENT","C_EXPORTJAKOPROTISTRANA" from DB_JT.KP_KTG_UCETNISPOLECNOST
;


PROMPT Completed DWT_KTG_UCETNISPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_KTG_UCETNISPOLECNOST_LINK.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_KTG_UCETNISPOLECNOST_LINK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_KTG_UCETNISPOLECNOST_LINK
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_KTG_UCETNISPOLECNOST_LINK" ("ID", "ID_KTGUCETNISPOLECNOST", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "SPIN_ID", "TOPAS_ID", "C_EXTSYSTEM", "ID_CISDATABAZE", "S_UZIVATEL", "ID_CISSUBJECT", "S_MENA", "C_IFRSPRIMARNI", "DT_UNIFIKOVANEDOKLADY", "C_FEIS_PRENOS") AS 
  select "ID","ID_KTGUCETNISPOLECNOST","DT_PLATNOSTOD","DT_PLATNOSTDO","SPIN_ID","TOPAS_ID","C_EXTSYSTEM","ID_CISDATABAZE","S_UZIVATEL","ID_CISSUBJECT","S_MENA","C_IFRSPRIMARNI","DT_UNIFIKOVANEDOKLADY","C_FEIS_PRENOS" from DB_JT.KP_KTG_UCETNISPOLECNOST_LINK
;


PROMPT Completed DWT_KTG_UCETNISPOLECNOST_LINK.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_KTG_USEK.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_KTG_USEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_KTG_USEK
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_KTG_USEK" ("ID", "ID_KTGUCETNISPOLECNOST", "S_NAZEV", "ID_ODPOVEDNAOSOBA") AS 
  select "ID","ID_KTGUCETNISPOLECNOST","S_NAZEV","ID_ODPOVEDNAOSOBA" from DB_JT.KP_KTG_USEK
;


PROMPT Completed DWT_KTG_USEK.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_KURZLIST.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_KURZLIST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_KURZLIST
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_KURZLIST" ("DT_DATUM", "ID_CISBANKA", "ID_CISMENA", "ND_KURZ", "NL_KVANTITA", "DT_CREATE") AS 
  select "DT_DATUM","ID_CISBANKA","ID_CISMENA","ND_KURZ","NL_KVANTITA","DT_CREATE" from DB_JT.DAT_KURZLIST
;


PROMPT Completed DWT_KURZLIST.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_KURZLISTAVG.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_KURZLISTAVG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_KURZLISTAVG
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_KURZLISTAVG" ("DT_DATUM", "ID_CISBANKA", "ID_CISMENA", "ND_KURZ", "NL_KVANTITA") AS 
  select "DT_DATUM","ID_CISBANKA","ID_CISMENA","ND_KURZ","NL_KVANTITA" from DB_JT.DAT_KURZLISTAVG
;


PROMPT Completed DWT_KURZLISTAVG.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_LOG_BUDGETNAVYSENI.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_LOG_BUDGETNAVYSENI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_LOG_BUDGETNAVYSENI
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_LOG_BUDGETNAVYSENI" ("ID_BUDGETPOLOZKA", "ND_NAVYSENI", "S_MENA", "ND_NOVAUROVEN", "ID_DOKUMENT", "DT_DATUMZMENY") AS 
  select "ID_BUDGETPOLOZKA","ND_NAVYSENI","S_MENA","ND_NOVAUROVEN","ID_DOKUMENT","DT_DATUMZMENY" from DB_JT.KP_LOG_BUDGETNAVYSENI
;


PROMPT Completed DWT_LOG_BUDGETNAVYSENI.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_LOG_BUDGETPOLOZKA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_LOG_BUDGETPOLOZKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_LOG_BUDGETPOLOZKA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_LOG_BUDGETPOLOZKA" ("ID", "ID_BUDGET", "ID_CISTYPTRAN", "ND_CASTKA", "S_MENA", "ID_ODBOROO", "DT_SCHVALENOODBOR", "ID_GESTOR", "DT_SCHVALENOGESTOR", "ID_UCSPOLOO", "DT_SCHVALENOUCSPOL", "ID_UCSPOLTOP", "DT_SCHVALENOTOP", "S_POZNAMKA", "ID_APPUSER", "DT_DATUMZMENY") AS 
  select "ID","ID_BUDGET","ID_CISTYPTRAN","ND_CASTKA","S_MENA","ID_ODBOROO","DT_SCHVALENOODBOR","ID_GESTOR","DT_SCHVALENOGESTOR","ID_UCSPOLOO","DT_SCHVALENOUCSPOL","ID_UCSPOLTOP","DT_SCHVALENOTOP","S_POZNAMKA","ID_APPUSER","DT_DATUMZMENY" from DB_JT.KP_LOG_BUDGETPOLOZKA
;


PROMPT Completed DWT_LOG_BUDGETPOLOZKA.sql
PROMPT


-- ============================================================================
-- Deploy: DWT_REL_SUBKONSOLIDACECLEN.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWT_REL_SUBKONSOLIDACECLEN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWT_REL_SUBKONSOLIDACECLEN
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWT_REL_SUBKONSOLIDACECLEN" ("ID_KTGUCETNISKUPINA", "ID_KTGSUBKONSOLIDACE", "ID_KTGUCETNISPOLECNOST", "C_EQUITY", "DT_CLENSTVIOD", "DT_CLENSTVIDO", "C_CLEN", "ID_CISSUBTYPCLENSTVI", "ND_POMERUCASTI", "DT_DOKLADVAZBYOD", "DT_DOKLADVAZBYDO", "C_PROPISUJVAZBY", "C_SMERCLENSTVIOD", "C_SMERCLENSTVIDO", "C_SMERDETAILCLENSTVIOD", "C_SMERDETAILCLENSTVIDO") AS 
  select "ID_KTGUCETNISKUPINA","ID_KTGSUBKONSOLIDACE","ID_KTGUCETNISPOLECNOST","C_EQUITY","DT_CLENSTVIOD","DT_CLENSTVIDO","C_CLEN","ID_CISSUBTYPCLENSTVI","ND_POMERUCASTI","DT_DOKLADVAZBYOD","DT_DOKLADVAZBYDO","C_PROPISUJVAZBY","C_SMERCLENSTVIOD","C_SMERCLENSTVIDO","C_SMERDETAILCLENSTVIOD","C_SMERDETAILCLENSTVIDO" from DB_JT.KP_REL_SUBKONSOLIDACECLEN
;


PROMPT Completed DWT_REL_SUBKONSOLIDACECLEN.sql
PROMPT


-- ============================================================================
-- Deploy: DWV_DAT_BUDGET.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWV_DAT_BUDGET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWV_DAT_BUDGET
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWV_DAT_BUDGET" ("ID", "ID_KTGODBOR", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "S_KOD", "S_NAZEV", "ID_ODBOROO", "ID_UCSPOLOO", "ID_UCSPOLTOP", "S_MENA", "ID_KTGUCETNISPOLECNOST", "NAZEVUCSPOL", "DT_SCHVALITDO") AS 
  select "ID","ID_KTGODBOR","DT_PLATNOSTOD","DT_PLATNOSTDO","S_KOD","S_NAZEV","ID_ODBOROO","ID_UCSPOLOO","ID_UCSPOLTOP","S_MENA","ID_KTGUCETNISPOLECNOST","NAZEVUCSPOL","DT_SCHVALITDO" from DB_JT.VW_DAT_BUDGET
;


PROMPT Completed DWV_DAT_BUDGET.sql
PROMPT


-- ============================================================================
-- Deploy: DWV_DAT_BUDGETPOLOZKA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWV_DAT_BUDGETPOLOZKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWV_DAT_BUDGETPOLOZKA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWV_DAT_BUDGETPOLOZKA" ("ID", "ID_BUDGET", "ID_CISTYPTRAN", "ND_CASTKA", "S_MENA", "ID_ODBOROO", "ODBOROO", "ID_UCSPOLOO", "UCSPOLOO", "ID_UCSPOLTOP", "UCSPOLTOP", "ID_GESTOR", "GESTOR", "DT_SCHVALENOODBOR", "DT_SCHVALENOGESTOR", "DT_SCHVALENOUCSPOL", "DT_SCHVALENOTOP", "S_POZNAMKA", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "BUDGET", "TYPTRAN", "HISTORIE", "DT_SCHVALITDO", "ID_ODBOROOSCH", "ODBOROOSCH", "ID_UCSPOLOOSCH", "UCSPOLOOSCH", "ID_UCSPOLTOPSCH", "UCSPOLTOPSCH", "ID_GESTORSCH", "GESTORSCH") AS 
  select "ID","ID_BUDGET","ID_CISTYPTRAN","ND_CASTKA","S_MENA","ID_ODBOROO","ODBOROO","ID_UCSPOLOO","UCSPOLOO","ID_UCSPOLTOP","UCSPOLTOP","ID_GESTOR","GESTOR","DT_SCHVALENOODBOR","DT_SCHVALENOGESTOR","DT_SCHVALENOUCSPOL","DT_SCHVALENOTOP","S_POZNAMKA","DT_PLATNOSTOD","DT_PLATNOSTDO","BUDGET","TYPTRAN","HISTORIE","DT_SCHVALITDO","ID_ODBOROOSCH","ODBOROOSCH","ID_UCSPOLOOSCH","UCSPOLOOSCH","ID_UCSPOLTOPSCH","UCSPOLTOPSCH","ID_GESTORSCH","GESTORSCH" from DB_JT.VW_DAT_BUDGETPOLOZKA
;


PROMPT Completed DWV_DAT_BUDGETPOLOZKA.sql
PROMPT


-- ============================================================================
-- Deploy: DWV_DWT_VYJIMKYPROTISTRANY.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWV_DWT_VYJIMKYPROTISTRANY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWV_DWT_VYJIMKYPROTISTRANY
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWV_DWT_VYJIMKYPROTISTRANY" ("ID", "ID_DATABAZE", "S_UCETMASKA", "S_PROTISTRANA", "NL_POZICEOD", "S_ICO", "S_NAZEV") AS 
  select "ID","ID_DATABAZE","S_UCETMASKA","S_PROTISTRANA","NL_POZICEOD","S_ICO","S_NAZEV" from DB_JT.VW_KP_VYJIMKYPROTISTRANY
;


PROMPT Completed DWV_DWT_VYJIMKYPROTISTRANY.sql
PROMPT


-- ============================================================================
-- Deploy: DWV_EXT_DOKLADMAJUUCASTVYJIMKA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWV_EXT_DOKLADMAJUUCASTVYJIMKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWV_EXT_DOKLADMAJUUCASTVYJIMKA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWV_EXT_DOKLADMAJUUCASTVYJIMKA" ("ID", "KTG_DOKLAD", "S_UCET", "S_POPIS") AS 
  select "ID","KTG_DOKLAD","S_UCET","S_POPIS" from DB_JT.VW_EXT_DOKLADMAJUUCASTVYJIMKA
;


PROMPT Completed DWV_EXT_DOKLADMAJUUCASTVYJIMKA.sql
PROMPT


-- ============================================================================
-- Deploy: DWV_EXT_VYJIMKYPROTISTRANY.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWV_EXT_VYJIMKYPROTISTRANY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWV_EXT_VYJIMKYPROTISTRANY
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWV_EXT_VYJIMKYPROTISTRANY" ("ID", "ID_DATABAZE", "DB_LINK", "S_UCETMASKA", "S_PROTISTRANA", "NL_POZICEOD", "S_ICO", "S_NAZEV") AS 
  select "ID","ID_DATABAZE","DB_LINK","S_UCETMASKA","S_PROTISTRANA","NL_POZICEOD","S_ICO","S_NAZEV" from DB_JT.VW_EXT_VYJIMKYPROTISTRANY
;


PROMPT Completed DWV_EXT_VYJIMKYPROTISTRANY.sql
PROMPT


-- ============================================================================
-- Deploy: DWV_KTG_PROJEKT.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWV_KTG_PROJEKT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWV_KTG_PROJEKT
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWV_KTG_PROJEKT" ("ID", "S_NAZEV", "S_CISLOOLD", "ID_STATUS", "STATUS", "DT_DATUMSTATUSZMENA", "ID_NAVRHUJE", "NAVRHUJE", "ID_SPONZOR", "SPONZOR", "ID_TOP", "TOP", "ID_PMANAGER", "PMANAGER", "ID_MNGSEGMENTBOSS", "MNGSEGMENTBOSS", "ID_KATEGORIE", "KATEGORIE", "S_MENANAKLADY", "DT_STARTOCENENI", "DT_KONECOCENENI", "ID_FREKVENCE", "FREKVENCE", "S_POPIS", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "ID_PROJEKTNAVRH", "DT_MEMORANDUMDALSI", "NL_MEMORANDUMMESICU", "C_MEMORANDUMSPLNENO", "ID_MNGSEGMENT", "MNGSEGMENT", "ND_CASTKAPRECENENI", "ID_TYPBILANCE", "C_SLEDUJEBUDGET", "ID_TYPBUDGETU", "TYPBILANCE", "TYPBUDGETU", "NL_CNTSLD") AS 
  SELECT "ID","S_NAZEV","S_CISLOOLD","ID_STATUS","STATUS","DT_DATUMSTATUSZMENA","ID_NAVRHUJE","NAVRHUJE","ID_SPONZOR","SPONZOR","ID_TOP","TOP","ID_PMANAGER","PMANAGER","ID_MNGSEGMENTBOSS","MNGSEGMENTBOSS","ID_KATEGORIE","KATEGORIE","S_MENANAKLADY","DT_STARTOCENENI","DT_KONECOCENENI","ID_FREKVENCE","FREKVENCE","S_POPIS","DT_PLATNOSTOD","DT_PLATNOSTDO","ID_PROJEKTNAVRH","DT_MEMORANDUMDALSI","NL_MEMORANDUMMESICU","C_MEMORANDUMSPLNENO","ID_MNGSEGMENT","MNGSEGMENT","ND_CASTKAPRECENENI","ID_TYPBILANCE","C_SLEDUJEBUDGET","ID_TYPBUDGETU","TYPBILANCE","TYPBUDGETU","NL_CNTSLD" from DB_JT.VW_KTG_PROJEKT
;


PROMPT Completed DWV_KTG_PROJEKT.sql
PROMPT


-- ============================================================================
-- Deploy: DWV_LOG_DWH.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWV_LOG_DWH.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWV_LOG_DWH
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWV_LOG_DWH" ("ID", "S_CODE", "S_CODE_NAME", "S_POPIS", "DT_BUSINESS_DATE", "DT_ZMENA") AS 
  select "ID","S_CODE","S_CODE_NAME","S_POPIS","DT_BUSINESS_DATE","DT_ZMENA" from DB_JT.VW_LOG_DWH
;


PROMPT Completed DWV_LOG_DWH.sql
PROMPT


-- ============================================================================
-- Deploy: DWV_PROTISTRANADETAIL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWV_PROTISTRANADETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWV_PROTISTRANADETAIL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWV_PROTISTRANADETAIL" ("ID", "S_DBLINK", "ID_SPOLECNOST", "DETAILPROTISTRANA", "S_ICO", "S_NAZEV", "DT_ZMENA", "S_NUMBER0", "FIRMA_ID", "EO_ID", "BANKA_ID", "KID", "DOID", "PLATINST", "DATUMZALOZENI", "ULICE", "PSC", "MESTO", "STAT", "DIC", "UCETSCP", "REGRMS", "EKONOM_SEKTOR", "TYPOSOBY") AS 
  select "ID","S_DBLINK","ID_SPOLECNOST","DETAILPROTISTRANA","S_ICO","S_NAZEV","DT_ZMENA","S_NUMBER0","FIRMA_ID","EO_ID","BANKA_ID","KID","DOID","PLATINST","DATUMZALOZENI","ULICE","PSC","MESTO","STAT","DIC","UCETSCP","REGRMS","EKONOM_SEKTOR","TYPOSOBY" 
  from DB_JT.VW_PROTISTRANADETAIL
  where         --esc 13.09.2019 znizenie zanzamov z 987 452 na 418 890 
        s_dblink NOT in ( 'Manual','SEP_READ')
;


PROMPT Completed DWV_PROTISTRANADETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: DWV_RKC_SPOLECNOSTI.sql
-- Category: views
-- ============================================================================

PROMPT Deploying DWV_RKC_SPOLECNOSTI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View DWV_RKC_SPOLECNOSTI
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."DWV_RKC_SPOLECNOSTI" ("ID", "S_ICO", "S_MENA", "SPOLECNOST", "TYP_CLENSTVI", "ID_TYP_CLENSTVI", "DT_CLENSTVIOD", "DT_CLENSTVIDO") AS 
  SELECT --distinct 
us.ID,
us.S_ICO, 
us.S_MENA,
us.S_NAZEV SPOLECNOST,
styp.S_POPIS            TYP_CLENSTVI,
c.ID_CISSUBTYPCLENSTVI  ID_TYP_CLENSTVI, 
C.DT_ClenstviOD,	
to_date('31.12.2199','DD.MM.YYYY') DT_ClenstviDO --C.DT_ClenstviDO 
FROM 	db_jt.kp_rel_subkonsolidaceclen c,
                        db_jt.kp_ktg_subkonsolidace s,
                        db_jt.kp_ktg_ucetniSpolecnost us,
                        db_jt.KP_CIS_SUBTYPCLENSTVI styp
WHERE     
                       us.id = c.id_ktgUcetniSpolecnost
                	   AND 	s.id_ktgUcetniSpolecnost =   c.id_ktgsubkonsolidace
                                      AND 	c.c_clen = '1'
                                      --AND 	c.ID_CISSUBTYPCLENSTVI <> 3       			-- okerm equity
                                      AND 	s.id_ktgUcetniSkupina = 1         				-- RKC
                                      and 		c.ID_KTGSUBKONSOLIDACE = 10344 
                                      AND 	(   sysdate >= C.DT_ClenstviOD	OR C.DT_ClenstviOD IS NULL)
                                      AND 	(   sysdate <= C.DT_ClenstviDO  OR C.DT_ClenstviDO IS NULL OR C.DT_ClenstviDO = to_date('31.12.1990','DD.MM.YYYY'))                                      
                                    and 		us.c_extsystem != 'K'                                                       
                                    and c.ID_CISSUBTYPCLENSTVI = styp.id
;


PROMPT Completed DWV_RKC_SPOLECNOSTI.sql
PROMPT


-- ============================================================================
-- Deploy: ESC_RKC_SPOLECNOSTI_2019.sql
-- Category: views
-- ============================================================================

PROMPT Deploying ESC_RKC_SPOLECNOSTI_2019.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View ESC_RKC_SPOLECNOSTI_2019
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."ESC_RKC_SPOLECNOSTI_2019" ("ID", "S_NAZEV") AS 
  SELECT 
distinct 
us.id, us.S_NAZEV
                             FROM db_jt.kp_rel_subkonsolidaceclen c,
                                  db_jt.kp_ktg_subkonsolidace s,
                                  db_jt.kp_ktg_ucetniSpolecnost us

                            WHERE     
                            us.id = c.id_ktgUcetniSpolecnost
                              		    AND s.id_ktgUcetniSpolecnost =   c.id_ktgsubkonsolidace
                                      AND c.c_clen = '1'
                                      AND c.ID_CISSUBTYPCLENSTVI <> 3       -- okerm equity
                                      AND s.id_ktgUcetniSkupina = 1         -- RKC
                                      and c.ID_KTGSUBKONSOLIDACE = 10344 
                                      AND (   sysdate >= C.DT_ClenstviOD
                                                      OR C.DT_ClenstviOD IS NULL)
                                      AND (   sysdate <= C.DT_ClenstviDO                                               OR C.DT_ClenstviDO IS NULL                                              OR C.DT_ClenstviDO = '31.12.1990') ---esc                                               
                                      and us.c_extsystem != 'K'                                                       
order by 2
;


PROMPT Completed ESC_RKC_SPOLECNOSTI_2019.sql
PROMPT


-- ============================================================================
-- Deploy: ESC_RKC_SPOLECNOST_2019_DENNI.sql
-- Category: views
-- ============================================================================

PROMPT Deploying ESC_RKC_SPOLECNOST_2019_DENNI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View ESC_RKC_SPOLECNOST_2019_DENNI
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."ESC_RKC_SPOLECNOST_2019_DENNI" ("ID", "S_NAZEV") AS 
  SELECT 
distinct 
us.id, us.S_NAZEV
                             FROM db_jt.kp_rel_subkonsolidaceclen c,
                                  db_jt.kp_ktg_subkonsolidace s,
                                  db_jt.kp_ktg_ucetniSpolecnost us

                            WHERE     
                            us.id = c.id_ktgUcetniSpolecnost
                                    and us.c_online = 1 --esc 27.06 2022  / Cards&Co je externi=neni online
                              		    AND s.id_ktgUcetniSpolecnost =   c.id_ktgsubkonsolidace
                                      AND c.c_clen = '1'
                                      AND c.ID_CISSUBTYPCLENSTVI <> 3       -- okerm equity
                                      AND s.id_ktgUcetniSkupina = 1         -- RKC
                                      and c.ID_KTGSUBKONSOLIDACE = 10344 
                                      AND (   sysdate >= C.DT_ClenstviOD
                                                      OR C.DT_ClenstviOD IS NULL)
                                      AND (   sysdate <= C.DT_ClenstviDO                                               OR C.DT_ClenstviDO IS NULL                                              OR C.DT_ClenstviDO = '31.12.1990') ---esc                                               
                                      --and us.c_extsystem != 'K'                                                       
                                      and us.c_extsystem NOT IN ( 'K','M'   )        
                                      and us.id NOT in ( 6850, 1,5000) --bez ATL JTB ..

order by 2
;


PROMPT Completed ESC_RKC_SPOLECNOST_2019_DENNI.sql
PROMPT


-- ============================================================================
-- Deploy: EXT_SSRS_SL_ISIT_PROJ.sql
-- Category: views
-- ============================================================================

PROMPT Deploying EXT_SSRS_SL_ISIT_PROJ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View EXT_SSRS_SL_ISIT_PROJ
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."EXT_SSRS_SL_ISIT_PROJ" ("IDSL", "ID_SPOL", "SPOLECNOST", "ZADAVATEL", "PROTISTRANA_SL", "CISLODOKLADU", "CASTKA_RADEK", "MENA_SL", "KOMENTAR", "BID", "DATUMZADANI_SL", "DATUMZADANI_RADKU", "POPIS_SL", "ID_PROTISTRANA", "PROTISTRANA_KIS") AS 
  SELECT
       doc.ID                         IDSL
      ,doc.ID_KTGUCETNISPOLECNOST     ID_SPOL
      ,us.S_NAZEV                     SPOLECNOST
      --,doc.ID_ZADAVATEL 
      ,usr_zad.S_PRIJMENI || ' ' || usr_zad.S_KRESTNI ZADAVATEL      
      ,doc.S_PROTISTRANA              PROTISTRANA_SL
      ,doc.S_CISLODOKLADU             CISLODOKLADU
      ,dr.ND_CASTKA                   CASTKA_RADEK
      ,doc.s_mena                     MENA_SL
      ,dr.S_KOMENTAR                  KOMENTAR
      ,dr.S_ISIT_BUDGET               BID
      ,doc.DT_DATUMZADANI             DATUMZADANI_SL
      ,dr.DT_DATUMZADANI              DATUMZADANI_RADKU
      ,doc.S_POPIS                    POPIS_SL
      ,doc.ID_SPOLECNOST              ID_PROTISTRANA
      ,sp.S_NAZEV                     PROTISTRANA_KIS      
from  KP_DAT_DOKUMENTRADEK dr  

join  KP_DAT_DOKUMENT doc 
    on doc.id = dr.ID_DOKUMENT

join  KP_KTG_PROJEKT prj
    on  prj.id = dr.ID_PROJEKT
    and prj.S_NAZEV like 'IS/IT%'

left join KTG_APPUSER usr_zad
    on doc.ID_ZADAVATEL = usr_zad.ID

join KP_KTG_UCETNISPOLECNOST  us
    on us.id = doc.ID_KTGUCETNISPOLECNOST

left join KP_KTG_SPOLECNOST sp
    on sp.id = doc.ID_SPOLECNOST

WHERE
          doc.ID_CISSTATUS  != 1  --zruseno
    and   doc.DT_DATUMZADANI > to_date('01.01.2017','DD.MM.YYYY')  --do view bez omezeni
  
order by IDSL
;


PROMPT Completed EXT_SSRS_SL_ISIT_PROJ.sql
PROMPT


-- ============================================================================
-- Deploy: FC_VW_BUSINESSLINIE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying FC_VW_BUSINESSLINIE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View FC_VW_BUSINESSLINIE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."FC_VW_BUSINESSLINIE" ("ID", "S_KOD", "S_POPIS", "ND_BETA") AS 
  select "ID","S_KOD","S_POPIS","ND_BETA" from KP_CIS_BUSINESSLINIE

;


PROMPT Completed FC_VW_BUSINESSLINIE.sql
PROMPT


-- ============================================================================
-- Deploy: FC_VW_EKONOMICKYSPJATASKUPINA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying FC_VW_EKONOMICKYSPJATASKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View FC_VW_EKONOMICKYSPJATASKUPINA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."FC_VW_EKONOMICKYSPJATASKUPINA" ("ID_SPOLECNOST", "CUST_GROUP_NAME", "CUST_GROUP_CODE", "CUST_STRUC_NAME", "CUST_STRUC_CODE", "DT_PLATNOSTOD", "DT_PLATNOSTDO") AS 
  select "ID_SPOLECNOST","CUST_GROUP_NAME","CUST_GROUP_CODE","CUST_STRUC_NAME","CUST_STRUC_CODE","DT_PLATNOSTOD","DT_PLATNOSTDO" from KP_KTG_SPOLECNOST_GROUP

;


PROMPT Completed FC_VW_EKONOMICKYSPJATASKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: FC_VW_OPERACNIRIZIKO.sql
-- Category: views
-- ============================================================================

PROMPT Deploying FC_VW_OPERACNIRIZIKO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View FC_VW_OPERACNIRIZIKO
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."FC_VW_OPERACNIRIZIKO" ("ID", "ID_KTGUCETNISPOLECNOST", "DT_DATUMOD", "DT_DATUMDO") AS 
  select id, id_ktgUcetniSpolecnost, dt_datumOd, dt_datumDo from KP_dat_operacniRiziko
;


PROMPT Completed FC_VW_OPERACNIRIZIKO.sql
PROMPT


-- ============================================================================
-- Deploy: FC_VW_OPERACNIRIZIKODETAIL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying FC_VW_OPERACNIRIZIKODETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View FC_VW_OPERACNIRIZIKODETAIL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."FC_VW_OPERACNIRIZIKODETAIL" ("ID", "ID_OPERACNIRIZIKO", "ID_CISBUSINESSLINIE", "ND_CASTKA") AS 
  select id, id_operacniRiziko, id_cisBusinessLinie, nd_castka from KP_dat_operacniRizikoDetail
;


PROMPT Completed FC_VW_OPERACNIRIZIKODETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: FC_VW_PROTISTRANA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying FC_VW_PROTISTRANA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View FC_VW_PROTISTRANA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."FC_VW_PROTISTRANA" ("ID", "S_ICO", "S_NAZEV", "ID_CISSTAT", "C_INDICATOR_PC", "S_EKONOM_SEKTOR", "KATEGORIEKOEF", "S_OKEC", "ID_KTGUCETNISPOLECNOST", "S_HLAVNIUCETNISKUPINA", "C_LICENCE", "C_LIKVIDACE", "C_SPOLECNERIZENY", "DT_DATUMZALOZENI", "S_ULICE", "S_PSC", "S_MESTO", "S_DIC", "S_KODKATEGORIEPROTISTRANA", "ID_KTG_EXTERNIRATING", "C_ZONA", "ID_UCETNISYSTEM", "S_ZVLASTNIVZTAHKJINEMUCLENURKC") AS 
  select s.id,
s.S_ICO, s.S_NAZEV, s.S_COUNTRY id_cisStat, s.C_INDICATOR_PC, s.S_EKONOM_SEKTOR,
s.KATEGORIEKOEF, s.S_OKEC,
( select f.id_ktgUcetniSpolecnost from FC_cis_ucetniSpolecnost f where f.id_ktgUcetniSpolecnost = s.id_ktgSpolecnost) id_ktgUcetniSpolecnost,
s.S_HLAVNIUCETNISKUPINA,
 s.C_LICENCE, s.C_LIKVIDACE, s.C_SPOLECNERIZENY, s.DT_DATUMZALOZENI, s.S_ULICE,
 s.S_PSC, s.S_MESTO, s.S_DIC, s_kodKategorieProtistrana, id_ktg_externiRating,
 c_zona, id_ucetniSystem, S_ZVLASTNIVZTAHKJINEMUCLENURKC
from kp_ktg_spolecnost s
;


PROMPT Completed FC_VW_PROTISTRANA.sql
PROMPT


-- ============================================================================
-- Deploy: FC_VW_RELSUBKONSOLIDACE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying FC_VW_RELSUBKONSOLIDACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View FC_VW_RELSUBKONSOLIDACE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."FC_VW_RELSUBKONSOLIDACE" ("ID_KTGSUBKONSOLIDACE", "ID_KTGUCETNISPOLECNOST", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "ID_KTGUCETNISKUPINA", "C_SUBKONSOLIDACE", "NL_PORADI") AS 
  select r.id_ktgSubkonsolidace, r.id_ktgUcetniSpolecnost, r.dt_clenstviOd, r.dt_clenstviDo, k.id_ktgUcetniSkupina, 
decode ( id_cisSubject, 200, '1', '0' ) c_subKonsolidace, k.nl_poradi 
From kp_rel_subKonsolidaceClen r, kp_ktg_subkonsolidace k, kp_ktg_ucetniSpolecnost s 
where r.c_clen = '1' and k.id_ktgUcetniSpolecnost = r.id_ktgSubkonsolidace and s.id = r.id_ktgUcetniSpolecnost

;


PROMPT Completed FC_VW_RELSUBKONSOLIDACE.sql
PROMPT


-- ============================================================================
-- Deploy: FC_VW_UCETNISKUPINA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying FC_VW_UCETNISKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View FC_VW_UCETNISKUPINA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."FC_VW_UCETNISKUPINA" ("ID", "S_KOD", "S_POPIS", "S_SKUPINALIKE") AS 
  select id, s_kod, s_popis, s_skupinaLike from KP_KTG_UCETNISKUPINA where id = 1
;


PROMPT Completed FC_VW_UCETNISKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: FC_VW_UCETNISPOLECNOST.sql
-- Category: views
-- ============================================================================

PROMPT Deploying FC_VW_UCETNISPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View FC_VW_UCETNISPOLECNOST
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."FC_VW_UCETNISPOLECNOST" ("ID", "S_ICO", "S_NAZEV", "S_MENA", "C_NOCNIZPRACOVANI", "ID_CISNASTROJUCETNIVYJIMKY", "S_SKUPINALIKE", "C_SUBKONSOLIDACE", "ID_CENTRALA", "C_TYPVYKAZOVANI") AS 
  SELECT s.ID, s.s_ico, s.s_nazev, s.s_mena, c_nocnizpracovani, 
          id_cisnastrojucetnivyjimky, s.s_skupinalike, 
          DECODE (id_cissubject, 200, '1', '0') c_subkonsolidace, 
          s.id_centrala, 
		NVL ( (select c_typVykazovani from KP_KTG_SUBKONSOLIDACE where id_ktgUcetniSpolecnost = s.id ), 'D' ) c_typvykazovani 
     FROM kp_ktg_ucetnispolecnost s 
    WHERE EXISTS (SELECT f.id_ktgucetnispolecnost 
                    FROM fc_cis_ucetnispolecnost f 
                   WHERE f.id_ktgucetnispolecnost = s.ID)

;


PROMPT Completed FC_VW_UCETNISPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: FC_VW_UROKOVESAZBY.sql
-- Category: views
-- ============================================================================

PROMPT Deploying FC_VW_UROKOVESAZBY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View FC_VW_UROKOVESAZBY
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."FC_VW_UROKOVESAZBY" ("S_NAZEV", "S_POPIS", "C_RATETYP", "DT_DATUM", "ND_HODNOTA", "NL_POCETPERIOD", "C_TYPPERIODA", "S_MENA") AS 
  select "S_NAZEV","S_POPIS","C_RATETYP","DT_DATUM","ND_HODNOTA","NL_POCETPERIOD","C_TYPPERIODA","S_MENA" from vw_urokoveSazby@q56

;


PROMPT Completed FC_VW_UROKOVESAZBY.sql
PROMPT


-- ============================================================================
-- Deploy: KP_CIS_DOKUMENT_QV.sql
-- Category: views
-- ============================================================================

PROMPT Deploying KP_CIS_DOKUMENT_QV.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View KP_CIS_DOKUMENT_QV
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."KP_CIS_DOKUMENT_QV" ("ID_CISDOKUMENT", "S_POPIS_CIS_DOK") AS 
  select ID, S_POPIS  from KP_CIS_DOKUMENT
;


PROMPT Completed KP_CIS_DOKUMENT_QV.sql
PROMPT


-- ============================================================================
-- Deploy: KP_DAT_DOKUMENT_30.sql
-- Category: views
-- ============================================================================

PROMPT Deploying KP_DAT_DOKUMENT_30.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View KP_DAT_DOKUMENT_30
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."KP_DAT_DOKUMENT_30" ("ID", "ID_CISDOKUMENT", "ID_KTGUCETNISPOLECNOST", "DT_DATUMZADANI", "ID_ZADAVATEL", "S_POPIS", "ID_TYPTRANSAKCE", "S_MENA", "S_PISEMNE", "C_TYPIZOVANATRAN", "DT_TYPIZOVANAOD", "DT_TYPIZOVANADO", "DT_DATUMZAUCTOVANI", "ID_SPOLECNOST", "S_CISLODOKLADU", "DT_DATUMSPLATNOSTI", "ID_APPUSER", "ID_ZAUCT", "S_PROTISTRANA", "ID_CISSTATUS", "C_POKLADNITRANSAKCE", "ID_GESTOR", "DT_GESTORSCHVALENO", "DT_POZADDATUMUHRADY", "DT_REALDATUMUHRADY", "DT_GESTORZAMITNUTO", "S_GESTORZAMITNUTO", "DT_ZADAVATELZAMITNUTO", "S_ZADAVATELZAMITNUTO", "ID_TYPIZLINK", "S_DUVODZRUSENI", "ID_UCSPOLUHRADA", "DT_ZAUCTUHRADA", "ID_ZAUCTUHRADA", "ID_TYPPRECENENI", "S_UCET", "S_UCET2", "C_DPH", "ID_BUDGET", "ID_TTDEVELOPER", "ID_CISUHRADA", "DT_UCETNIZAMITNUTO", "S_UCETNIZAMITNUTO", "ID_KTGUCETNISPOLECNOST2", "S_UCETB", "S_UCETB2", "CERPAT_REZERVU", "DT_NAVYSENI_SCHVALENO", "DT_NAVYSENI_ZAMITNUTO", "S_NAVYSENI_ZAMITNUTO", "ID_NAVYSENI_MB") AS 
  select "ID","ID_CISDOKUMENT","ID_KTGUCETNISPOLECNOST","DT_DATUMZADANI","ID_ZADAVATEL","S_POPIS","ID_TYPTRANSAKCE","S_MENA","S_PISEMNE","C_TYPIZOVANATRAN","DT_TYPIZOVANAOD","DT_TYPIZOVANADO","DT_DATUMZAUCTOVANI","ID_SPOLECNOST","S_CISLODOKLADU","DT_DATUMSPLATNOSTI","ID_APPUSER","ID_ZAUCT","S_PROTISTRANA","ID_CISSTATUS","C_POKLADNITRANSAKCE","ID_GESTOR","DT_GESTORSCHVALENO","DT_POZADDATUMUHRADY","DT_REALDATUMUHRADY","DT_GESTORZAMITNUTO","S_GESTORZAMITNUTO","DT_ZADAVATELZAMITNUTO","S_ZADAVATELZAMITNUTO","ID_TYPIZLINK","S_DUVODZRUSENI","ID_UCSPOLUHRADA","DT_ZAUCTUHRADA","ID_ZAUCTUHRADA","ID_TYPPRECENENI","S_UCET","S_UCET2","C_DPH","ID_BUDGET","ID_TTDEVELOPER","ID_CISUHRADA","DT_UCETNIZAMITNUTO","S_UCETNIZAMITNUTO","ID_KTGUCETNISPOLECNOST2","S_UCETB","S_UCETB2","CERPAT_REZERVU","DT_NAVYSENI_SCHVALENO","DT_NAVYSENI_ZAMITNUTO","S_NAVYSENI_ZAMITNUTO","ID_NAVYSENI_MB" from KP_DAT_DOKUMENT where dt_datumzadani > sysdate-30
;


PROMPT Completed KP_DAT_DOKUMENT_30.sql
PROMPT


-- ============================================================================
-- Deploy: MGV_ALL_CAPTURED_SQL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying MGV_ALL_CAPTURED_SQL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View MGV_ALL_CAPTURED_SQL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."MGV_ALL_CAPTURED_SQL" ("OBJTYPE", "OBJNAME", "OBJID", "MAINOBJTYPE", "MAINOBJNAME", "MAINOBJID", "SCHEMANAME", "SCHEMAID", "CATALOGNAME", "CATALOGID", "CONNNAME", "CONNID", "PROJECTNAME", "PROJECTID", "CAPTUREDORCONVERTED", "QUALIFIEDNAME", "NATIVE_SQL", "LINECOUNT") AS 
  SELECT d."OBJTYPE",d."OBJNAME",d."OBJID",d."MAINOBJTYPE",d."MAINOBJNAME",d."MAINOBJID",d."SCHEMANAME",d."SCHEMAID",d."CATALOGNAME",d."CATALOGID",d."CONNNAME",d."CONNID",d."PROJECTNAME",d."PROJECTID",d."CAPTUREDORCONVERTED",d."QUALIFIEDNAME", p.native_sql,p.linecount 
FROM md_stored_programs p , mgv_all_programs_details d
WHERE p.id = d.objid
AND d.capturedorconverted = 'CAPTURED'
UNION ALL
SELECT d."OBJTYPE",d."OBJNAME",d."OBJID",d."MAINOBJTYPE",d."MAINOBJNAME",d."MAINOBJID",d."SCHEMANAME",d."SCHEMAID",d."CATALOGNAME",d."CATALOGID",d."CONNNAME",d."CONNID",d."PROJECTNAME",d."PROJECTID",d."CAPTUREDORCONVERTED",d."QUALIFIEDNAME",v.native_sql,v.linecount
FROM md_views v , mgv_all_view_details d
WHERE v.id = d.objid
AND d.capturedorconverted = 'CAPTURED'
UNION ALL
SELECT d."OBJTYPE",d."OBJNAME",d."OBJID",d."MAINOBJTYPE",d."MAINOBJNAME",d."MAINOBJID",d."SCHEMANAME",d."SCHEMAID",d."CATALOGNAME",d."CATALOGID",d."CONNNAME",d."CONNID",d."PROJECTNAME",d."PROJECTID",d."CAPTUREDORCONVERTED",d."QUALIFIEDNAME" ,t.native_sql,t.linecount
FROM md_triggers t , mgv_all_trigger_details d
WHERE t.id = d.objid
AND d.capturedorconverted = 'CAPTURED'
;


PROMPT Completed MGV_ALL_CAPTURED_SQL.sql
PROMPT


-- ============================================================================
-- Deploy: MGV_ALL_CATALOGS.sql
-- Category: views
-- ============================================================================

PROMPT Deploying MGV_ALL_CATALOGS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View MGV_ALL_CATALOGS
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."MGV_ALL_CATALOGS" ("PROJECT_ID", "PROJECT_NAME", "CONNECTION_ID", "HOST", "PORT", "USERNAME", "DBURL", "CATALOG_ID", "CATALOG_NAME") AS 
  SELECT md_projects.id project_id ,
    md_projects.project_name project_name,
    md_connections.id connection_id ,
    md_connections.host host ,
    md_connections.port port ,
    md_connections.username username ,
    md_connections.dburl dburl ,
    md_catalogs.id catalog_id ,
    md_catalogs.catalog_name catalog_name
  FROM md_projects ,
    md_connections,
    md_catalogs
  WHERE md_catalogs.connection_id_fk = md_connections.id
  AND md_connections.project_id_fk   = md_projects.id
WITH READ ONLY
;


PROMPT Completed MGV_ALL_CATALOGS.sql
PROMPT


-- ============================================================================
-- Deploy: MGV_ALL_CATALOG_DETAILS.sql
-- Category: views
-- ============================================================================

PROMPT Deploying MGV_ALL_CATALOG_DETAILS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View MGV_ALL_CATALOG_DETAILS
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."MGV_ALL_CATALOG_DETAILS" ("OBJTYPE", "OBJNAME", "OBJID", "MAINOBJTYPE", "MAINOBJNAME", "MAINOBJID", "SCHEMANAME", "SCHEMAID", "CATALOGNAME", "CATALOGID", "CONNNAME", "CONNID", "PROJECTNAME", "PROJECTID", "CAPTUREDORCONVERTED", "QUALIFIEDNAME") AS 
  SELECT 'MD_CATALOGS' objtype, cat.catalog_name objname, cat.id objid,  'MD_CATALOGS' MainObjType,cat.catalog_name MAINOBJNAME, cat.id MAINOBJID,null SchemaName,null schemaid, cat.catalog_name catalogname,cat.id catalogid, conn.name connname,conn.id  connid,proj.project_name projectname,proj.id projectid,
NVL(conn.type,'CAPTURED') CapturedOrConverted, 
CASE WHEN conn.type IS NULL THEN cat.catalog_name ELSE NULL END QualifiedName
FROM  MD_CATALOGS cat,MD_CONNECTIONS conn, MD_PROJECTS proj
WHERE  cat.connection_id_fk = conn.id
AND conn.PROJECT_ID_FK = proj.id
;


PROMPT Completed MGV_ALL_CATALOG_DETAILS.sql
PROMPT


-- ============================================================================
-- Deploy: MGV_ALL_COLUMNDT_DETAILS.sql
-- Category: views
-- ============================================================================

PROMPT Deploying MGV_ALL_COLUMNDT_DETAILS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View MGV_ALL_COLUMNDT_DETAILS
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."MGV_ALL_COLUMNDT_DETAILS" ("OBJTYPE", "OBJNAME", "OBJID", "MAINOBJTYPE", "MAINOBJNAME", "MAINOBJID", "SCHEMANAME", "SCHEMAID", "CATALOGNAME", "CATALOGID", "CONNNAME", "CONNID", "PROJECTNAME", "PROJECTID", "CAPTUREDORCONVERTED", "QUALIFIEDNAME", "DATATYPE", "ISIDENTITY") AS 
  SELECT 'MD_COLUMNS' objtype, c.COLUMN_NAME objname, c.Id objid,  'MD_TABLES' MainObjType,t.table_name MAINOBJNAME, t.id MAINOBJID, s.name SchemaName, s.id schemaid, cat.catalog_name catalogname,cat.id catalogid, conn.name connname,conn.id  connid,proj.project_name projectname ,proj.id projectid,
NVL(conn.type,'CAPTURED') CapturedOrConverted, 
CASE WHEN conn.type IS NULL THEN cat.catalog_name||'.' ELSE '' END || s.name||'.'||t.table_name ||'.'||c.COLUMN_NAME QualifiedName,
c.column_type datatype,
CASE WHEN p.PROP_KEY='SEEDVALUE' THEN 'Y' ELSE 'N' END IsIdentity
FROM MD_COLUMNS c LEFT OUTER JOIN MD_ADDITIONAL_PROPERTIES p ON c.id =p.ref_id_fk
, MD_TABLES t,MD_SCHEMAS s, MD_CATALOGS cat,MD_CONNECTIONS conn,MD_PROJECTS proj
WHERE c.table_id_fk = t.id
AND t.schema_id_fk = s.id
AND s.catalog_id_fk = cat.id
AND cat.connection_id_fk = conn.id
AND conn.PROJECT_ID_FK = proj.id
;


PROMPT Completed MGV_ALL_COLUMNDT_DETAILS.sql
PROMPT


-- ============================================================================
-- Deploy: MGV_ALL_COLUMN_DETAILS.sql
-- Category: views
-- ============================================================================

PROMPT Deploying MGV_ALL_COLUMN_DETAILS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View MGV_ALL_COLUMN_DETAILS
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."MGV_ALL_COLUMN_DETAILS" ("OBJTYPE", "OBJNAME", "OBJID", "MAINOBJTYPE", "MAINOBJNAME", "MAINOBJID", "SCHEMANAME", "SCHEMAID", "CATALOGNAME", "CATALOGID", "CONNNAME", "CONNID", "PROJECTNAME", "PROJECTID", "CAPTUREDORCONVERTED", "QUALIFIEDNAME") AS 
  SELECT 'MD_COLUMNS' objtype, c.COLUMN_NAME objname, c.Id objid,  'MD_TABLES' MainObjType,t.table_name MAINOBJNAME, t.id MAINOBJID, s.name SchemaName, s.id schemaid, cat.catalog_name catalogname,cat.id catalogid, conn.name connname,conn.id  connid,proj.project_name projectname,proj.id projectid,
NVL(conn.type,'CAPTURED') CapturedOrConverted, 
CASE WHEN conn.type IS NULL THEN cat.catalog_name||'.' ELSE '' END || s.name||'.'||t.table_name ||'.'||c.COLUMN_NAME QualifiedName
FROM MD_COLUMNS c, MD_TABLES t,MD_SCHEMAS s, MD_CATALOGS cat,MD_CONNECTIONS conn, MD_PROJECTS proj
WHERE c.table_id_fk = t.id
AND t.schema_id_fk = s.id
AND s.catalog_id_fk = cat.id
AND cat.connection_id_fk = conn.id
AND conn.PROJECT_ID_FK = proj.id
;


PROMPT Completed MGV_ALL_COLUMN_DETAILS.sql
PROMPT


-- ============================================================================
-- Deploy: MGV_ALL_CONNECTIONS.sql
-- Category: views
-- ============================================================================

PROMPT Deploying MGV_ALL_CONNECTIONS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View MGV_ALL_CONNECTIONS
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."MGV_ALL_CONNECTIONS" ("PROJECT_ID", "PROJECT_NAME", "CONNECTION_ID", "CONNECTION_NAME", "HOST", "PORT", "USERNAME", "DBURL") AS 
  SELECT md_projects.id project_id ,
    md_projects.project_name project_name,
    MD_CONNECTIONS.ID CONNECTION_ID ,
    MD_CONNECTIONS.NAME CONNECTION_NAME,
    md_connections.host host ,
    md_connections.port port ,
    md_connections.username username ,
    md_connections.dburl dburl
  FROM md_projects,
    md_connections
  WHERE MD_CONNECTIONS.PROJECT_ID_FK = MD_PROJECTS.ID
WITH READ ONLY
;


PROMPT Completed MGV_ALL_CONNECTIONS.sql
PROMPT


-- ============================================================================
-- Deploy: MGV_ALL_CONSTRAINTS_DETAILS.sql
-- Category: views
-- ============================================================================

PROMPT Deploying MGV_ALL_CONSTRAINTS_DETAILS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View MGV_ALL_CONSTRAINTS_DETAILS
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."MGV_ALL_CONSTRAINTS_DETAILS" ("OBJTYPE", "OBJNAME", "OBJID", "MAINOBJTYPE", "MAINOBJNAME", "MAINOBJID", "SCHEMANAME", "SCHEMAID", "CATALOGNAME", "CATALOGID", "CONNNAME", "CONNID", "PROJECTNAME", "PROJECTID", "CAPTUREDORCONVERTED", "QUALIFIEDNAME") AS 
  SELECT 'MD_CONSTRAINTS' objtype, c.name objname, c.Id objid,  'MD_TABLES' MainObjType,t.table_name MAINOBJNAME, t.id MAINOBJID, s.name SchemaName, s.id schemaid, cat.catalog_name catalogname,cat.id catalogid, conn.name connname,conn.id  connid,proj.project_name projectname,proj.id projectid,
NVL(conn.type,'CAPTURED') CapturedOrConverted, 
CASE WHEN conn.type IS NULL THEN cat.catalog_name||'.' ELSE '' END || s.name||'.'||t.table_name ||'.'||c.name QualifiedName
FROM MD_CONSTRAINTS c, MD_TABLES t,MD_SCHEMAS s, MD_CATALOGS cat,MD_CONNECTIONS conn, MD_PROJECTS proj
WHERE c.table_id_fk = t.id
AND t.schema_id_fk = s.id
AND s.catalog_id_fk = cat.id
AND cat.connection_id_fk = conn.id
AND conn.PROJECT_ID_FK = proj.id
;


PROMPT Completed MGV_ALL_CONSTRAINTS_DETAILS.sql
PROMPT


-- ============================================================================
-- Deploy: MGV_ALL_DETAILS.sql
-- Category: views
-- ============================================================================

PROMPT Deploying MGV_ALL_DETAILS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View MGV_ALL_DETAILS
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."MGV_ALL_DETAILS" ("OBJTYPE", "OBJNAME", "OBJID", "MAINOBJTYPE", "MAINOBJNAME", "MAINOBJID", "SCHEMANAME", "SCHEMAID", "CATALOGNAME", "CATALOGID", "CONNNAME", "CONNID", "PROJECTNAME", "PROJECTID", "CAPTUREDORCONVERTED", "QUALIFIEDNAME") AS 
  SELECT "OBJTYPE","OBJNAME","OBJID","MAINOBJTYPE","MAINOBJNAME","MAINOBJID","SCHEMANAME","SCHEMAID","CATALOGNAME","CATALOGID","CONNNAME","CONNID","PROJECTNAME","PROJECTID","CAPTUREDORCONVERTED","QUALIFIEDNAME" FROM MGV_ALL_CATALOG_DETAILS
UNION ALL
SELECT "OBJTYPE","OBJNAME","OBJID","MAINOBJTYPE","MAINOBJNAME","MAINOBJID","SCHEMANAME","SCHEMAID","CATALOGNAME","CATALOGID","CONNNAME","CONNID","PROJECTNAME","PROJECTID","CAPTUREDORCONVERTED","QUALIFIEDNAME" FROM MGV_ALL_SCHEMA_DETAILS
UNION ALL
SELECT "OBJTYPE","OBJNAME","OBJID","MAINOBJTYPE","MAINOBJNAME","MAINOBJID","SCHEMANAME","SCHEMAID","CATALOGNAME","CATALOGID","CONNNAME","CONNID","PROJECTNAME","PROJECTID","CAPTUREDORCONVERTED","QUALIFIEDNAME" FROM MGV_ALL_TABLES_DETAILS
UNION ALL
SELECT "OBJTYPE","OBJNAME","OBJID","MAINOBJTYPE","MAINOBJNAME","MAINOBJID","SCHEMANAME","SCHEMAID","CATALOGNAME","CATALOGID","CONNNAME","CONNID","PROJECTNAME","PROJECTID","CAPTUREDORCONVERTED","QUALIFIEDNAME" FROM MGV_ALL_COLUMN_DETAILS
UNION ALL
SELECT "OBJTYPE","OBJNAME","OBJID","MAINOBJTYPE","MAINOBJNAME","MAINOBJID","SCHEMANAME","SCHEMAID","CATALOGNAME","CATALOGID","CONNNAME","CONNID","PROJECTNAME","PROJECTID","CAPTUREDORCONVERTED","QUALIFIEDNAME" FROM MGV_ALL_CONSTRAINTS_DETAILS
UNION ALL
SELECT "OBJTYPE","OBJNAME","OBJID","MAINOBJTYPE","MAINOBJNAME","MAINOBJID","SCHEMANAME","SCHEMAID","CATALOGNAME","CATALOGID","CONNNAME","CONNID","PROJECTNAME","PROJECTID","CAPTUREDORCONVERTED","QUALIFIEDNAME" FROM MGV_ALL_INDEX_DETAILS
UNION ALL
SELECT "OBJTYPE","OBJNAME","OBJID","MAINOBJTYPE","MAINOBJNAME","MAINOBJID","SCHEMANAME","SCHEMAID","CATALOGNAME","CATALOGID","CONNNAME","CONNID","PROJECTNAME","PROJECTID","CAPTUREDORCONVERTED","QUALIFIEDNAME" FROM MGV_ALL_TRIGGER_DETAILS
UNION ALL
SELECT "OBJTYPE","OBJNAME","OBJID","MAINOBJTYPE","MAINOBJNAME","MAINOBJID","SCHEMANAME","SCHEMAID","CATALOGNAME","CATALOGID","CONNNAME","CONNID","PROJECTNAME","PROJECTID","CAPTUREDORCONVERTED","QUALIFIEDNAME" FROM MGV_ALL_VIEW_DETAILS
UNION ALL
SELECT "OBJTYPE","OBJNAME","OBJID","MAINOBJTYPE","MAINOBJNAME","MAINOBJID","SCHEMANAME","SCHEMAID","CATALOGNAME","CATALOGID","CONNNAME","CONNID","PROJECTNAME","PROJECTID","CAPTUREDORCONVERTED","QUALIFIEDNAME" FROM MGV_ALL_PROGRAMS_DETAILS
UNION ALL
SELECT "OBJTYPE","OBJNAME","OBJID","MAINOBJTYPE","MAINOBJNAME","MAINOBJID","SCHEMANAME","SCHEMAID","CATALOGNAME","CATALOGID","CONNNAME","CONNID","PROJECTNAME","PROJECTID","CAPTUREDORCONVERTED","QUALIFIEDNAME" FROM MGV_ALL_PARTITIONS_DETAILS
;


PROMPT Completed MGV_ALL_DETAILS.sql
PROMPT


-- ============================================================================
-- Deploy: MGV_ALL_INDEX_DETAILS.sql
-- Category: views
-- ============================================================================

PROMPT Deploying MGV_ALL_INDEX_DETAILS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View MGV_ALL_INDEX_DETAILS
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."MGV_ALL_INDEX_DETAILS" ("OBJTYPE", "OBJNAME", "OBJID", "MAINOBJTYPE", "MAINOBJNAME", "MAINOBJID", "SCHEMANAME", "SCHEMAID", "CATALOGNAME", "CATALOGID", "CONNNAME", "CONNID", "PROJECTNAME", "PROJECTID", "CAPTUREDORCONVERTED", "QUALIFIEDNAME") AS 
  SELECT 'MD_INDEXES' objtype,i.index_name objname, i.Id objid,  'MD_TABLES' MainObjType,t.table_name MAINOBJNAME,t.id MAINOBJID, s.name SchemaName, s.id schemaid, cat.catalog_name catalogname,cat.id catalogid, conn.name connname,conn.id  connid, proj.project_name projectname,proj.id projectid,
NVL(conn.type,'CAPTURED') CapturedOrConverted, 
CASE WHEN conn.type IS NULL THEN cat.catalog_name||'.' ELSE '' END || s.name||'.'||i.index_name  QualifiedName
FROM MD_INDEXES i, MD_TABLES t,MD_SCHEMAS s, MD_CATALOGS cat,MD_CONNECTIONS conn,MD_PROJECTS proj
WHERE i.table_id_fk = t.id
AND t.schema_id_fk = s.id
AND s.catalog_id_fk = cat.id
AND cat.connection_id_fk = conn.id
AND conn.PROJECT_ID_FK = proj.id
;


PROMPT Completed MGV_ALL_INDEX_DETAILS.sql
PROMPT


-- ============================================================================
-- Deploy: MGV_ALL_PARTITIONS_DETAILS.sql
-- Category: views
-- ============================================================================

PROMPT Deploying MGV_ALL_PARTITIONS_DETAILS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View MGV_ALL_PARTITIONS_DETAILS
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."MGV_ALL_PARTITIONS_DETAILS" ("OBJTYPE", "OBJNAME", "OBJID", "MAINOBJTYPE", "MAINOBJNAME", "MAINOBJID", "SCHEMANAME", "SCHEMAID", "CATALOGNAME", "CATALOGID", "CONNNAME", "CONNID", "PROJECTNAME", "PROJECTID", "CAPTUREDORCONVERTED", "QUALIFIEDNAME") AS 
  SELECT 'MD_PARTITIONS' objtype, 'PARTTITION_EXP' objname, t.id objid,  'MD_TABLES' MainObjType,t.table_name MAINOBJNAME, t.id MAINOBJID, s.name SchemaName, s.id schemaid, cat.catalog_name catalogname,cat.id catalogid, conn.name connname,conn.id  connid,proj.project_name projectname,proj.id projectid,
NVL(conn.type,'CAPTURED') CapturedOrConverted, 
CASE WHEN conn.type IS NULL THEN   md_meta.quote(cat.catalog_name,s.name,t.table_name,conn.id)
                            ELSE   s.name || '.' || t.table_name END QualifiedName
FROM MD_PARTITIONS p, MD_TABLES t,MD_SCHEMAS s, MD_CATALOGS cat,MD_CONNECTIONS conn, MD_PROJECTS proj
WHERE p.table_id_fk = t.id
AND t.schema_id_fk = s.id
AND s.catalog_id_fk = cat.id
AND cat.connection_id_fk = conn.id
AND conn.PROJECT_ID_FK = proj.id
;


PROMPT Completed MGV_ALL_PARTITIONS_DETAILS.sql
PROMPT


-- ============================================================================
-- Deploy: MGV_ALL_PROGRAMS_DETAILS.sql
-- Category: views
-- ============================================================================

PROMPT Deploying MGV_ALL_PROGRAMS_DETAILS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View MGV_ALL_PROGRAMS_DETAILS
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."MGV_ALL_PROGRAMS_DETAILS" ("OBJTYPE", "OBJNAME", "OBJID", "MAINOBJTYPE", "MAINOBJNAME", "MAINOBJID", "SCHEMANAME", "SCHEMAID", "CATALOGNAME", "CATALOGID", "CONNNAME", "CONNID", "PROJECTNAME", "PROJECTID", "CAPTUREDORCONVERTED", "QUALIFIEDNAME") AS 
  SELECT 'MD_STORED_PROGRAMS' objtype,p.name objname, p.Id objid,  'MD_STORED_PROGRAMS' MainObjType,p.name MAINOBJNAME,p.id MAINOBJID, s.name SchemaName, s.id schemaid, cat.catalog_name catalogname,cat.id catalogid, conn.name connname,conn.id  connid,proj.project_name projectname,proj.id projectid,
NVL(conn.type,'CAPTURED') CapturedOrConverted, 
CASE WHEN conn.type IS NULL THEN cat.catalog_name||'.' ELSE '' END || s.name||'.'||p.name  QualifiedName
FROM MD_STORED_PROGRAMS p,MD_SCHEMAS s, MD_CATALOGS cat,MD_CONNECTIONS conn, MD_PROJECTS proj
WHERE p.schema_id_fk = s.id
AND s.catalog_id_fk = cat.id
AND cat.connection_id_fk = conn.id
AND conn.PROJECT_ID_FK = proj.id
;


PROMPT Completed MGV_ALL_PROGRAMS_DETAILS.sql
PROMPT


-- ============================================================================
-- Deploy: MGV_ALL_SCHEMA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying MGV_ALL_SCHEMA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View MGV_ALL_SCHEMA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."MGV_ALL_SCHEMA" ("PROJECT_ID", "PROJECT_NAME", "CONNECTION_ID", "HOST", "PORT", "USERNAME", "CATALOG_ID", "CATALOG_NAME", "SCHEMA_ID", "SCHEMA_NAME") AS 
  SELECT md_projects.id project_id ,
    md_projects.project_name project_name,
    md_connections.id connection_id ,
    md_connections.host host ,
    md_connections.port port ,
    md_connections.username username ,
    md_catalogs.id catalog_id ,
    md_catalogs.catalog_name catalog_name,
    md_schemas.id schema_id ,
    md_schemas.name schema_name
  FROM md_connections,
    md_catalogs ,
    md_schemas ,
    md_projects
  WHERE md_schemas.catalog_id_fk   = md_catalogs.id
  AND md_catalogs.connection_id_fk = md_connections.id
  AND md_connections.project_id_fk = md_projects.id
WITH READ ONLY
;


PROMPT Completed MGV_ALL_SCHEMA.sql
PROMPT


-- ============================================================================
-- Deploy: MGV_ALL_SCHEMA_DETAILS.sql
-- Category: views
-- ============================================================================

PROMPT Deploying MGV_ALL_SCHEMA_DETAILS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View MGV_ALL_SCHEMA_DETAILS
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."MGV_ALL_SCHEMA_DETAILS" ("OBJTYPE", "OBJNAME", "OBJID", "MAINOBJTYPE", "MAINOBJNAME", "MAINOBJID", "SCHEMANAME", "SCHEMAID", "CATALOGNAME", "CATALOGID", "CONNNAME", "CONNID", "PROJECTNAME", "PROJECTID", "CAPTUREDORCONVERTED", "QUALIFIEDNAME") AS 
  SELECT 'MD_SCHEMAS' objtype, s.name objname, s.id objid,  'MD_SCHEMAS' MainObjType,s.name MAINOBJNAME, s.id MAINOBJID, s.name SchemaName, s.id schemaid, cat.catalog_name catalogname,cat.id catalogid, conn.name connname,conn.id  connid,proj.project_name projectname,proj.id projectid,
NVL(conn.type,'CAPTURED') CapturedOrConverted, 
CASE WHEN conn.type IS NULL THEN cat.catalog_name||'.' ELSE '' END || s.name QualifiedName
FROM MD_SCHEMAS s, MD_CATALOGS cat,MD_CONNECTIONS conn, MD_PROJECTS proj
WHERE s.catalog_id_fk = cat.id
AND cat.connection_id_fk = conn.id
AND conn.PROJECT_ID_FK = proj.id
;


PROMPT Completed MGV_ALL_SCHEMA_DETAILS.sql
PROMPT


-- ============================================================================
-- Deploy: MGV_ALL_STORED_PROGRAMS.sql
-- Category: views
-- ============================================================================

PROMPT Deploying MGV_ALL_STORED_PROGRAMS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View MGV_ALL_STORED_PROGRAMS
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."MGV_ALL_STORED_PROGRAMS" ("PROJECT_ID", "PROJECT_NAME", "CONNECTION_ID", "HOST", "PORT", "USERNAME", "CATALOG_ID", "CATALOG_NAME", "SCHEMA_ID", "SCHEMA_NAME", "STORED_PROGRAM_ID", "PROGRAMTYPE", "STORED_PROGRAM_NAME", "PACKAGE_ID_FK") AS 
  SELECT md_projects.id project_id ,
    md_projects.project_name project_name ,
    md_connections.id connection_id ,
    md_connections.host host ,
    md_connections.port port ,
    md_connections.username username ,
    md_catalogs.id catalog_id ,
    md_catalogs.catalog_name catalog_name ,
    md_schemas.id schema_id ,
    md_schemas.name schema_name ,
    md_stored_programs.id stored_program_id ,
    md_stored_programs.programtype programtype ,
    md_stored_programs.name stored_program_name,
    md_stored_programs.package_id_fk package_id_fk
  FROM md_projects ,
    md_connections,
    md_catalogs ,
    md_schemas ,
    md_stored_programs
  WHERE md_stored_programs.schema_id_fk = md_schemas.id
  AND md_schemas.catalog_id_fk          = md_catalogs.id
  AND md_catalogs.connection_id_fk      = md_connections.id
  AND md_connections.project_id_fk      = md_projects.id
;


PROMPT Completed MGV_ALL_STORED_PROGRAMS.sql
PROMPT


-- ============================================================================
-- Deploy: MGV_ALL_TABLES.sql
-- Category: views
-- ============================================================================

PROMPT Deploying MGV_ALL_TABLES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View MGV_ALL_TABLES
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."MGV_ALL_TABLES" ("PROJECT_ID", "PROJECT_NAME", "CONNECTION_ID", "HOST", "PORT", "USERNAME", "DBURL", "CATALOG_ID", "CATALOG_NAME", "SCHEMA_ID", "SCHEMA_NAME", "TABLE_ID", "TABLE_NAME") AS 
  SELECT md_projects.id project_id ,
    md_projects.project_name project_name,
    md_connections.id connection_id ,
    md_connections.host host ,
    md_connections.port port ,
    md_connections.username username ,
    md_connections.dburl dburl ,
    md_catalogs.id catalog_id ,
    md_catalogs.catalog_name catalog_name,
    md_schemas.id schema_id ,
    md_schemas.name schema_name ,
    md_tables.id table_id ,
    md_tables.TABLE_NAME TABLE_NAME
  FROM md_connections,
    md_catalogs ,
    md_schemas ,
    md_tables ,
    md_projects
  WHERE md_tables.schema_id_fk     = md_schemas.id
  AND md_schemas.catalog_id_fk     = md_catalogs.id
  AND md_catalogs.connection_id_fk = md_connections.id
  AND md_connections.project_id_fk = md_projects.id
WITH READ ONLY
;


PROMPT Completed MGV_ALL_TABLES.sql
PROMPT


-- ============================================================================
-- Deploy: MGV_ALL_TABLES_DETAILS.sql
-- Category: views
-- ============================================================================

PROMPT Deploying MGV_ALL_TABLES_DETAILS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View MGV_ALL_TABLES_DETAILS
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."MGV_ALL_TABLES_DETAILS" ("OBJTYPE", "OBJNAME", "OBJID", "MAINOBJTYPE", "MAINOBJNAME", "MAINOBJID", "SCHEMANAME", "SCHEMAID", "CATALOGNAME", "CATALOGID", "CONNNAME", "CONNID", "PROJECTNAME", "PROJECTID", "CAPTUREDORCONVERTED", "QUALIFIEDNAME") AS 
  SELECT 'MD_TABLES' objtype, t.table_name objname, t.id objid,  'MD_TABLES' MainObjType,t.table_name MAINOBJNAME, t.id MAINOBJID, s.name SchemaName, s.id schemaid, cat.catalog_name catalogname,cat.id catalogid, conn.name connname,conn.id  connid,proj.project_name projectname,proj.id projectid,
NVL(conn.type,'CAPTURED') CapturedOrConverted, 
CASE WHEN conn.type IS NULL THEN   md_meta.quote(cat.catalog_name,s.name,t.table_name,conn.id)
                            ELSE   s.name || '.' || t.table_name END QualifiedName
FROM MD_TABLES t,MD_SCHEMAS s, MD_CATALOGS cat,MD_CONNECTIONS conn, MD_PROJECTS proj
WHERE t.schema_id_fk = s.id
AND s.catalog_id_fk = cat.id
AND cat.connection_id_fk = conn.id
AND conn.PROJECT_ID_FK = proj.id
;


PROMPT Completed MGV_ALL_TABLES_DETAILS.sql
PROMPT


-- ============================================================================
-- Deploy: MGV_ALL_TABLE_TRIGGERS.sql
-- Category: views
-- ============================================================================

PROMPT Deploying MGV_ALL_TABLE_TRIGGERS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View MGV_ALL_TABLE_TRIGGERS
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."MGV_ALL_TABLE_TRIGGERS" ("PROJECT_ID", "PROJECT_NAME", "CONNECTION_ID", "HOST", "PORT", "USERNAME", "CATALOG_ID", "CATALOG_NAME", "DUMMY_FLAG", "SCHEMA_ID", "SCHEMA_NAME", "TABLE_ID", "TABLE_NAME", "TRIGGER_ID", "TRIGGER_NAME") AS 
  SELECT md_projects.id project_id ,
    md_projects.project_name project_name,
    md_connections.id connection_id ,
    md_connections.host host ,
    md_connections.port port ,
    md_connections.username username ,
    md_catalogs.id catalog_id ,
    md_catalogs.catalog_name catalog_name,
    md_catalogs.dummy_flag dummy_flag ,
    md_schemas.id schema_id ,
    md_schemas.name schema_name ,
    md_tables.id table_id ,
    md_tables.TABLE_NAME TABLE_NAME ,
    md_triggers.id trigger_id ,
    md_triggers.trigger_name trigger_name
  FROM md_projects ,
    md_connections,
    md_catalogs ,
    md_schemas ,
    md_tables ,
    md_triggers
  WHERE md_triggers.table_or_view_id_fk = md_tables.id
  AND md_tables.schema_id_fk            = md_schemas.id
  AND md_schemas.catalog_id_fk          = md_catalogs.id
  AND md_catalogs.connection_id_fk      = md_connections.id
  AND md_connections.project_id_fk      = md_projects.id
;


PROMPT Completed MGV_ALL_TABLE_TRIGGERS.sql
PROMPT


-- ============================================================================
-- Deploy: MGV_ALL_TRIGGER_DETAILS.sql
-- Category: views
-- ============================================================================

PROMPT Deploying MGV_ALL_TRIGGER_DETAILS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View MGV_ALL_TRIGGER_DETAILS
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."MGV_ALL_TRIGGER_DETAILS" ("OBJTYPE", "OBJNAME", "OBJID", "MAINOBJTYPE", "MAINOBJNAME", "MAINOBJID", "SCHEMANAME", "SCHEMAID", "CATALOGNAME", "CATALOGID", "CONNNAME", "CONNID", "PROJECTNAME", "PROJECTID", "CAPTUREDORCONVERTED", "QUALIFIEDNAME") AS 
  SELECT 'MD_TRIGGERS' objtype,trig.trigger_name objname, trig.Id objid,  'MD_TABLES' MainObjType,t.table_name MAINOBJNAME,t.id MAINOBJID, s.name SchemaName, s.id schemaid, cat.catalog_name catalogname,cat.id catalogid, conn.name connname,conn.id  connid,proj.project_name projectname,proj.id projectid,
NVL(conn.type,'CAPTURED') CapturedOrConverted, 
CASE WHEN conn.type IS NULL THEN cat.catalog_name||'.' ELSE '' END || s.name||'.'||trig.trigger_name  QualifiedName
FROM MD_TRIGGERS trig, MD_TABLES t,MD_SCHEMAS s, MD_CATALOGS cat,MD_CONNECTIONS conn, MD_PROJECTS proj
WHERE trig.table_or_view_id_fk = t.id
AND t.schema_id_fk = s.id
AND s.catalog_id_fk = cat.id
AND cat.connection_id_fk = conn.id
AND conn.PROJECT_ID_FK = proj.id 
UNION ALL
SELECT 'MD_TRIGGERS' objtype,trig.trigger_name objname, trig.Id objid,  'MD_VIEWS' MainObjType,v.view_name MAINOBJNAME,v.id MAINOBJID, s.name SchemaName, s.id schemaid, cat.catalog_name catalogname,cat.id catalogid, conn.name connname,conn.id  connid,proj.project_name projectname,proj.id projectid,
NVL(conn.type,'CAPTURED') CapturedOrConverted, 
CASE WHEN conn.type IS NULL THEN cat.catalog_name||'.' ELSE '' END || s.name||'.'||trig.trigger_name  QualifiedName
FROM MD_TRIGGERS trig, MD_VIEWS v,MD_SCHEMAS s, MD_CATALOGS cat,MD_CONNECTIONS conn, MD_PROJECTS proj
WHERE trig.table_or_view_id_fk = v.id
AND v.schema_id_fk = s.id
AND s.catalog_id_fk = cat.id
AND cat.connection_id_fk = conn.id
AND conn.PROJECT_ID_FK = proj.id 
ORDER BY objid
;


PROMPT Completed MGV_ALL_TRIGGER_DETAILS.sql
PROMPT


-- ============================================================================
-- Deploy: MGV_ALL_VIEWS.sql
-- Category: views
-- ============================================================================

PROMPT Deploying MGV_ALL_VIEWS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View MGV_ALL_VIEWS
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."MGV_ALL_VIEWS" ("PROJECT_ID", "PROJECT_NAME", "CONNECTION_ID", "HOST", "PORT", "USERNAME", "CATALOG_ID", "CATALOG_NAME", "DUMMY_FLAG", "SCHEMA_ID", "SCHEMA_NAME", "VIEW_ID", "VIEW_NAME") AS 
  SELECT md_projects.id project_id ,
    md_projects.project_name project_name,
    md_connections.id connection_id ,
    md_connections.host host ,
    md_connections.port port ,
    username username ,
    md_catalogs.id catalog_id ,
    md_catalogs.catalog_name catalog_name,
    md_catalogs.dummy_flag dummy_flag ,
    md_schemas.id schema_id ,
    md_schemas.name schema_name ,
    md_views.id view_id ,
    md_views.view_name view_name
  FROM md_projects ,
    md_connections,
    md_catalogs ,
    md_schemas ,
    md_views
  WHERE md_views.schema_id_fk      = md_schemas.id
  AND md_schemas.catalog_id_fk     = md_catalogs.id
  AND md_catalogs.connection_id_fk = md_connections.id
  AND md_connections.project_id_fk = md_projects.id
WITH READ ONLY;

   COMMENT ON TABLE "DB_JT"."MGV_ALL_VIEWS"  IS 'View to iterate over all views in the system'
;


PROMPT Completed MGV_ALL_VIEWS.sql
PROMPT


-- ============================================================================
-- Deploy: MGV_ALL_VIEW_DETAILS.sql
-- Category: views
-- ============================================================================

PROMPT Deploying MGV_ALL_VIEW_DETAILS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View MGV_ALL_VIEW_DETAILS
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."MGV_ALL_VIEW_DETAILS" ("OBJTYPE", "OBJNAME", "OBJID", "MAINOBJTYPE", "MAINOBJNAME", "MAINOBJID", "SCHEMANAME", "SCHEMAID", "CATALOGNAME", "CATALOGID", "CONNNAME", "CONNID", "PROJECTNAME", "PROJECTID", "CAPTUREDORCONVERTED", "QUALIFIEDNAME") AS 
  SELECT 'MD_VIEWS' objtype, v.view_name objname, v.Id objid,  'MD_VIEWS' MainObjType,v.view_name MAINOBJNAME,v.id MAINOBJID, s.name SchemaName, s.id schemaid, cat.catalog_name catalogname,cat.id catalogid, conn.name connname,conn.id  connid,proj.project_name projectname,proj.id projectid,
NVL(conn.type,'CAPTURED') CapturedOrConverted, 
CASE WHEN conn.type IS NULL THEN cat.catalog_name||'.' ELSE '' END || s.name||'.'||v.view_name  QualifiedName
FROM MD_VIEWS v,MD_SCHEMAS s, MD_CATALOGS cat,MD_CONNECTIONS conn, MD_PROJECTS proj
WHERE v.schema_id_fk = s.id
AND s.catalog_id_fk = cat.id
AND cat.connection_id_fk = conn.id
AND conn.PROJECT_ID_FK = proj.id
;


PROMPT Completed MGV_ALL_VIEW_DETAILS.sql
PROMPT


-- ============================================================================
-- Deploy: MGV_ALL_VIEW_TRIGGERS.sql
-- Category: views
-- ============================================================================

PROMPT Deploying MGV_ALL_VIEW_TRIGGERS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View MGV_ALL_VIEW_TRIGGERS
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."MGV_ALL_VIEW_TRIGGERS" ("PROJECT_ID", "PROJECT_NAME", "CONNECTION_ID", "HOST", "PORT", "USERNAME", "CATALOG_ID", "CATALOG_NAME", "DUMMY_FLAG", "SCHEMA_ID", "SCHEMA_NAME", "VIEW_ID", "VIEW_NAME", "TRIGGER_ID", "TRIGGER_NAME") AS 
  SELECT md_projects.id project_id ,
    md_projects.project_name project_name,
    md_connections.id connection_id ,
    md_connections.host host ,
    md_connections.port port ,
    md_connections.username username ,
    md_catalogs.id catalog_id ,
    md_catalogs.catalog_name catalog_name,
    md_catalogs.dummy_flag dummy_flag ,
    md_schemas.id schema_id ,
    md_schemas.name schema_name ,
    md_views.id view_id ,
    md_views.view_name view_name ,
    md_triggers.id trigger_id ,
    md_triggers.trigger_name trigger_name
  FROM md_projects ,
    md_connections,
    md_catalogs ,
    md_schemas ,
    md_views ,
    md_triggers
  WHERE md_triggers.table_or_view_id_fk = md_views.id
  AND md_views.schema_id_fk             = md_schemas.id
  AND md_schemas.catalog_id_fk          = md_catalogs.id
  AND md_catalogs.connection_id_fk      = md_connections.id
  AND md_connections.project_id_fk      = md_projects.id
;


PROMPT Completed MGV_ALL_VIEW_TRIGGERS.sql
PROMPT


-- ============================================================================
-- Deploy: MGV_DERIVATIVES.sql
-- Category: views
-- ============================================================================

PROMPT Deploying MGV_DERIVATIVES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View MGV_DERIVATIVES
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."MGV_DERIVATIVES" ("ID", "SRC_ID", "SRC_TYPE", "DERIVED_ID", "DERIVED_TYPE", "DERIVED_CONNECTION_ID_FK", "TRANSFORMED", "ORIGINAL_IDENTIFIER", "NEW_IDENTIFIER", "DERIVED_OBJECT_NAMESPACE", "DERIVATIVE_REASON", "SECURITY_GROUP_ID", "CREATED_ON", "CREATED_BY", "LAST_UPDATED_ON", "LAST_UPDATED_BY", "ENABLED") AS 
  SELECT "ID","SRC_ID","SRC_TYPE","DERIVED_ID","DERIVED_TYPE","DERIVED_CONNECTION_ID_FK","TRANSFORMED","ORIGINAL_IDENTIFIER","NEW_IDENTIFIER","DERIVED_OBJECT_NAMESPACE","DERIVATIVE_REASON","SECURITY_GROUP_ID","CREATED_ON","CREATED_BY","LAST_UPDATED_ON","LAST_UPDATED_BY","ENABLED" FROM MD_DERIVATIVES WHERE (Derivative_Reason <> 'SCRATCH' OR DERIVative_Reason IS NULL)
;


PROMPT Completed MGV_DERIVATIVES.sql
PROMPT


-- ============================================================================
-- Deploy: MGV_DERIVED_DETAILS.sql
-- Category: views
-- ============================================================================

PROMPT Deploying MGV_DERIVED_DETAILS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View MGV_DERIVED_DETAILS
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."MGV_DERIVED_DETAILS" ("CAPCATALOGID", "CAPCATALOGNAME", "CAPCONNID", "CAPCONNNAME", "CAPMAINOBJID", "CAPMAINOBJNAME", "CAPMAINOBJTYPE", "CAPOBJID", "CAPOBJNAME", "CAPOBJTYPE", "CAPPROJECTID", "CAPPROJECTNAME", "CAPQUALIFIEDNAME", "CAPSCHEMAID", "CAPSCHEMANAME", "CONCATALOGID", "CONCATALOGNAME", "CONCONNID", "CONCONNNAME", "CONMAINOBJID", "CONMAINOBJNAME", "CONMAINOBJTYPE", "CONOBJID", "CONOBJNAME", "CONOBJTYPE", "CONPROJECTID", "CONPROJECTNAME", "CONQUALIFIEDNAME", "CONSCHEMAID", "CONSCHEMANAME", "DERIVATIVE_REASON", "TRANSFORMED") AS 
  select d1.catalogid capcatalogid,
   d1.catalogname capcatalogname,
   d1.connid capconnid,
   d1.connname capconnname,
   d1.mainobjid capmainobjid,
   d1.mainobjname capmainobjname,
   d1.mainobjtype capmainobjtype ,
   d1.objid capobjid,
   d1.objname capobjname,
   d1.objtype capobjtype,
   d1.projectid capprojectid,
   d1.projectname capprojectname,
   d1.qualifiedname capqualifiedname,
   d1.schemaid capschemaid,
   d1.schemaname capschemaname,
   d2.catalogid concatalogid,
   d2.catalogname concatalogname,
   d2.connid conconnid,
   d2.connname conconnname,
   d2.mainobjid conmainobjid,
   d2.mainobjname conmainobjname,
   d2.mainobjtype conmainobjtype ,
   d2.objid conobjid,
   d2.objname conobjname,
   d2.objtype conobjtype,
   d2.projectid conprojectid,
   d2.projectname conprojectname,
   d2.qualifiedname conqualifiedname,
   d2.schemaid conschemaid,
   d2.schemaname conschemaname,
    der.derivative_reason,
    der.transformed
  FROM mgv_all_details d1
  LEFT OUTER JOIN md_derivatives der
  ON der.src_id              = d1.objid
  AND der.derivative_reason IS NULL
  LEFT OUTER JOIN mgv_all_details d2
  ON der.derived_id            = d2.objid
  WHERE d1.capturedorconverted = 'CAPTURED'
  AND der.derivative_reason   IS NULL
;


PROMPT Completed MGV_DERIVED_DETAILS.sql
PROMPT


-- ============================================================================
-- Deploy: MGV_SCRATCH_DERIVATIVES.sql
-- Category: views
-- ============================================================================

PROMPT Deploying MGV_SCRATCH_DERIVATIVES.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View MGV_SCRATCH_DERIVATIVES
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."MGV_SCRATCH_DERIVATIVES" ("ID", "SRC_ID", "SRC_TYPE", "DERIVED_ID", "DERIVED_TYPE", "DERIVED_CONNECTION_ID_FK", "TRANSFORMED", "ORIGINAL_IDENTIFIER", "NEW_IDENTIFIER", "DERIVED_OBJECT_NAMESPACE", "DERIVATIVE_REASON", "SECURITY_GROUP_ID", "CREATED_ON", "CREATED_BY", "LAST_UPDATED_ON", "LAST_UPDATED_BY", "ENABLED") AS 
  SELECT "ID","SRC_ID","SRC_TYPE","DERIVED_ID","DERIVED_TYPE","DERIVED_CONNECTION_ID_FK","TRANSFORMED","ORIGINAL_IDENTIFIER","NEW_IDENTIFIER","DERIVED_OBJECT_NAMESPACE","DERIVATIVE_REASON","SECURITY_GROUP_ID","CREATED_ON","CREATED_BY","LAST_UPDATED_ON","LAST_UPDATED_BY","ENABLED" FROM MD_DERIVATIVES WHERE Derivative_Reason = 'SCRATCH'
;


PROMPT Completed MGV_SCRATCH_DERIVATIVES.sql
PROMPT


-- ============================================================================
-- Deploy: QVR_CIS_ICO.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QVR_CIS_ICO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QVR_CIS_ICO
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QVR_CIS_ICO" ("ID_PROTISTRANA", "ID_UCETNISPOLECNOST", "S_ICO", "S_NAZEV") AS 
  select distinct b."ID_PROTISTRANA", b."ID_UCETNISPOLECNOST", b."S_ICO", b."S_NAZEV"
from QV_CIS_ICO b,QVR_KP_DOKLADDETAIL_DSLR_CTRL  a where a.ID_PROTISTRANA  = b.ID_PROTISTRANA
;


PROMPT Completed QVR_CIS_ICO.sql
PROMPT


-- ============================================================================
-- Deploy: QVR_CIS_LIST.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QVR_CIS_LIST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QVR_CIS_LIST
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QVR_CIS_LIST" ("ID_CIS_LIST", "LIST_ZKTRATKA", "LIST_POPIS", "LIST_REPORT_KOD", "NL_PORADILIST") AS 
  select "ID_CIS_LIST","LIST_ZKTRATKA","LIST_POPIS","LIST_REPORT_KOD","NL_PORADILIST" from QV_CIS_LIST
;


PROMPT Completed QVR_CIS_LIST.sql
PROMPT


-- ============================================================================
-- Deploy: QVR_CIS_MNGSEGMENT.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QVR_CIS_MNGSEGMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QVR_CIS_MNGSEGMENT
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QVR_CIS_MNGSEGMENT" ("ID", "S_POPIS", "ID_KTGSUBKONSOLIDACE") AS 
  select distinct b."ID",b."S_POPIS",b."ID_KTGSUBKONSOLIDACE" 
from QV_CIS_MNGSEGMENT b,QVR_KP_DOKLADDETAIL_DSLR_CTRL  a where a.ID_HOLDING_PROTISTRANA  = b.ID
;


PROMPT Completed QVR_CIS_MNGSEGMENT.sql
PROMPT


-- ============================================================================
-- Deploy: QVR_CIS_ODBOR.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QVR_CIS_ODBOR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QVR_CIS_ODBOR
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QVR_CIS_ODBOR" ("ID", "S_NAZEV", "ID_KTGUCETNISPOLECNOST", "DT_PLATNOSTOD", "DT_PLATNOSTDO") AS 
  select distinct b."ID", b."S_NAZEV", b."ID_KTGUCETNISPOLECNOST", b."DT_PLATNOSTOD", b."DT_PLATNOSTDO"
from QV_CIS_ODBOR b,QVR_KP_DOKLADDETAIL_DSLR_CTRL  a where a.ID_ODBOR  = b.id
;


PROMPT Completed QVR_CIS_ODBOR.sql
PROMPT


-- ============================================================================
-- Deploy: QVR_CIS_PROJEKT.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QVR_CIS_PROJEKT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QVR_CIS_PROJEKT
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QVR_CIS_PROJEKT" ("ID", "S_NAZEV", "STATUS") AS 
  select distinct b.ID, b.S_NAZEV, b.STATUS
from QV_CIS_PROJEKT b,QVR_KP_DOKLADDETAIL_DSLR_CTRL  a where a.ID_PROJEKT  = b.id
;


PROMPT Completed QVR_CIS_PROJEKT.sql
PROMPT


-- ============================================================================
-- Deploy: QVR_CIS_SUBJECT.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QVR_CIS_SUBJECT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QVR_CIS_SUBJECT
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QVR_CIS_SUBJECT" ("ID_SUBJECT", "S_POPIS_SUBJECT") AS 
  select distinct b."ID_SUBJECT", b."S_POPIS_SUBJECT"
from QV_CIS_SUBJECT b,QVR_KP_DOKLADDETAIL_DSLR_CTRL  a where a.ID_CISSUBJECT  = b.ID_SUBJECT
;


PROMPT Completed QVR_CIS_SUBJECT.sql
PROMPT


-- ============================================================================
-- Deploy: QVR_CIS_UCETPRIMARNI.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QVR_CIS_UCETPRIMARNI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QVR_CIS_UCETPRIMARNI
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QVR_CIS_UCETPRIMARNI" ("ID_CISDATABAZE", "S_DB_INSTANCE", "C_TYP", "S_UCET", "S_POPIS") AS 
  select distinct b."ID_CISDATABAZE", b."S_DB_INSTANCE", b."C_TYP", b."S_UCET", b."S_POPIS"
from QV_CIS_UCETPRIMARNI b,QVR_KP_DOKLADDETAIL_DSLR_CTRL  a where a.UCET_ORIGINAL  = b.S_UCET
;


PROMPT Completed QVR_CIS_UCETPRIMARNI.sql
PROMPT


-- ============================================================================
-- Deploy: QV_BUDGETY_POLOZKY.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_BUDGETY_POLOZKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_BUDGETY_POLOZKY
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_BUDGETY_POLOZKY" ("HOLDING_PROJEKT", "SPOLOCNOST", "KOD_ODBORU", "ODBOR", "ID_PROJKET", "PROJEKT", "KOD_TRANSAKCE", "TYP_TRANSAKCE", "DRUH_TRANSAKCE", "ND_CASTKA", "S_MENA", "OO_ODBORU", "PM", "BUDGET_ID", "BUDGET_OD", "BUDGET_DO", "POZNAMKA", "SCHVALENO_ODBOR", "SCHVALENO_OOH") AS 
  SELECT --distinct
    mng.s_popis HOLDING_PROJEKT,
    us.s_nazev SPOLOCNOST,
    --b.id_ktgodbor ,
    o.S_KOD KOD_ODBORU,
    o.s_nazev ODBOR,
    p.id ID_PROJKET,
    p.s_nazev PROJEKT,
    --bp.id_cistyptran,
    tt.s_kod KOD_TRANSAKCE,
    tt.s_popis TYP_TRANSAKCE,
    --tt.c_capex_opex,
    tox.s_popis DRUH_TRANSAKCE,
    bp.nd_castka,
    bp.s_mena ,
    UO.S_PRIJMENI
    || ' '
    ||uo.s_krestni OO_ODBORU,
    up.s_prijmeni
    || ' '
    ||up.s_krestni PM ,
    b.id budget_id ,
    b.dt_platnostod BUDGET_OD ,
    b.dt_platnostdo BUDGET_DO,
    bp.s_poznamka
    ,bp.dt_schvalenoodbor
    ,bp.dt_schvalenotop
  FROM KP_DAT_BUDGETPOLOZKA bp,
    KP_DAT_BUDGET b,
    --KP_CIS_TYPTRANSAKCE   tt,
    VW_CIS_TYPTRANSAKCE tt,
    KP_CIS_TYP_TRAN_CAPEX_OPEX tox,
    KP_KTG_ODBOR o,
    KP_KTG_PROJEKT p,
    KTG_APPUSER uO,
    KTG_APPUSER uP,
    KP_KTG_UCETNISPOLECNOST us,
    KP_CIS_MNGSEGMENT mng    
  WHERE tt.c_budgetovat        = 1
  AND tt.c_capex_opex          = tox.c_id (+)
  AND p.id_mngsegment          = mng.id (+)
  AND o.id_ktgucetnispolecnost = us.id (+)
  AND p.id_pmanager            = uP.id (+)
  AND o.id_odpovednaosoba      = uO.id (+)
  AND b.id_ktgprojekt          = p.id (+)
  AND b.id_ktgodbor            = o.id (+)
  AND bp.id_cistyptran         = tt.id
  AND b.id                     = bp.id_budget
  AND (        
      sysdate BETWEEN b.dt_platnostod AND b.dt_platnostdo
      OR ( b.dt_platnostod >= '01.01.2014'
           and b.dt_platnostod != b.dt_platnostdo --27.01.2015
          ) 
      )
--  AND 
--      sysdate BETWEEN tt.dt_platnostod AND tt.dt_platnostdo
--      tt.dt_platnostod > '01.01.2014'
    --AND b.id_ktgprojekt IS NULL
  ORDER BY b.id,
    tt.s_kod
;


PROMPT Completed QV_BUDGETY_POLOZKY.sql
PROMPT


-- ============================================================================
-- Deploy: QV_CIS_DATABAZE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_CIS_DATABAZE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_CIS_DATABAZE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_CIS_DATABAZE" ("ID_CISDATABAZE", "S_DBLINK", "S_POPIS", "S_PROQUESTOR", "S_INSTANCE", "C_PBTYP", "C_AKTIVNI") AS 
  select 
  ID,
  S_DBLINK, 
  S_POPIS,
  S_PROQUESTOR,
  S_INSTANCE,
  C_PBTYP,
  C_AKTIVNI                            
from DB_JT.kp_cis_databaze  
where C_AKTIVNI=1  
order by 1
;


PROMPT Completed QV_CIS_DATABAZE.sql
PROMPT


-- ============================================================================
-- Deploy: QV_CIS_ICO.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_CIS_ICO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_CIS_ICO
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_CIS_ICO" ("ID_PROTISTRANA", "ID_UCETNISPOLECNOST", "S_ICO", "S_NAZEV") AS 
  SELECT sp.id ID_PROTISTRANA,
    sp.id_ktgspolecnost ID_UCETNISPOLECNOST,
    sp.s_ico,
    sp.s_nazev
    --us.ID_CISKATSPOL
  FROM kp_ktg_spolecnost sp,
    kp_ktg_ucetnispolecnost us
  WHERE 
  --(us.ID_CISKATSPOL NOT IN (5,10,12,15)  or us.ID_CISKATSPOL is null )  AND 
  sp.id_ktgspolecnost     = us.id (+)
  --and sp.id = 65294
;


PROMPT Completed QV_CIS_ICO.sql
PROMPT


-- ============================================================================
-- Deploy: QV_CIS_LIST.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_CIS_LIST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_CIS_LIST
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_CIS_LIST" ("ID_CIS_LIST", "LIST_ZKTRATKA", "LIST_POPIS", "LIST_REPORT_KOD", "NL_PORADILIST") AS 
  select ID ID_CIS_LIST, S_ZKRATKA LIST_ZKTRATKA, S_POPIS LIST_POPIS , REPORT_KOD LIST_REPORT_KOD, NL_DEFAULTPORADILIST NL_PORADILIST
from KP_CIS_LIST
;


PROMPT Completed QV_CIS_LIST.sql
PROMPT


-- ============================================================================
-- Deploy: QV_CIS_MNGSEGMENT.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_CIS_MNGSEGMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_CIS_MNGSEGMENT
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_CIS_MNGSEGMENT" ("ID", "S_POPIS", "ID_KTGSUBKONSOLIDACE") AS 
  SELECT "ID","S_POPIS","ID_KTGSUBKONSOLIDACE" FROM db_jt.KP_CIS_MNGSEGMENT
;


PROMPT Completed QV_CIS_MNGSEGMENT.sql
PROMPT


-- ============================================================================
-- Deploy: QV_CIS_ODBOR.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_CIS_ODBOR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_CIS_ODBOR
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_CIS_ODBOR" ("ID", "S_NAZEV", "ID_KTGUCETNISPOLECNOST", "DT_PLATNOSTOD", "DT_PLATNOSTDO") AS 
  select distinct id,s_nazev,id_ktgucetnispolecnost, dt_platnostod,dt_platnostdo  from 
db_jt.kp_ktg_odbor
where sysdate between dt_platnostod and dt_platnostdo
and c_archivni = 0
;


PROMPT Completed QV_CIS_ODBOR.sql
PROMPT


-- ============================================================================
-- Deploy: QV_CIS_ODBOR_ALL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_CIS_ODBOR_ALL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_CIS_ODBOR_ALL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_CIS_ODBOR_ALL" ("ID", "S_NAZEV", "ID_KTGUCETNISPOLECNOST", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "S_KOD", "ID_USEK", "ND_DOCUROVEN1", "C_BUDGETING", "C_ARCHIVNI", "ID_MNGSEGMENT", "RO_ID", "RO_PRIJMENI", "RO_KRESTNI") AS 
  select distinct o.id,o.s_nazev,o.id_ktgucetnispolecnost, o.dt_platnostod,o.dt_platnostdo ,o.s_kod, o.id_usek, o.nd_docuroven1 , o.c_budgeting, o.c_archivni, o.id_mngsegment
  , o.ID_ODPOVEDNAOSOBA RO_ID --esc 07.2019  RO
  , usr.S_PRIJMENI RO_PRIJMENI
  ,usr.S_KRESTNI RO_KRESTNI
  from   db_jt.kp_ktg_odbor o
        ,db_jt.ktg_appuser          usr      
where
    usr.id = o.ID_ODPOVEDNAOSOBA
;


PROMPT Completed QV_CIS_ODBOR_ALL.sql
PROMPT


-- ============================================================================
-- Deploy: QV_CIS_ODBOR_SPOLECNOST.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_CIS_ODBOR_SPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_CIS_ODBOR_SPOLECNOST
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_CIS_ODBOR_SPOLECNOST" ("ID", "S_NAZEV", "ID_KTGUCETNISPOLECNOST", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "S_SPOLECNOST") AS 
  SELECT DISTINCT o.id,
    o.s_nazev,
    o.id_ktgucetnispolecnost,
    o.dt_platnostod,
    o.dt_platnostdo,
    us.s_nazev S_SPOLECNOST
  FROM  db_jt.kp_ktg_odbor o
      , DB_JT.kp_ktg_ucetnispolecnost us
  WHERE sysdate BETWEEN o.dt_platnostod AND o.dt_platnostdo
  AND o.c_archivni = 0
  AND o.id_ktgucetnispolecnost = us.id (+)
;


PROMPT Completed QV_CIS_ODBOR_SPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: QV_CIS_PROJEKT.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_CIS_PROJEKT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_CIS_PROJEKT
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_CIS_PROJEKT" ("ID", "S_NAZEV", "STATUS") AS 
  select distinct id, s_nazev , decode(id_status,3,'schvalen',5,'ukoncen') STATUS
from db_jt.kp_ktg_projekt
where id_status in( 3,5)
and sysdate between dt_platnostod and dt_platnostdo
;


PROMPT Completed QV_CIS_PROJEKT.sql
PROMPT


-- ============================================================================
-- Deploy: QV_CIS_PROJEKT_ALL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_CIS_PROJEKT_ALL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_CIS_PROJEKT_ALL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_CIS_PROJEKT_ALL" ("ID", "S_NAZEV", "S_POPIS", "STATUS", "ID_PMANAGER", "PM_PRIJMENI", "PM_KRESTNI", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "ND_DOCUROVEN1") AS 
  select distinct     prj.id
                  , prj.s_nazev 
                  , prj.S_POPIS
                  , sts.s_popis     STATUS
                  , prj.ID_PMANAGER 
                  , usr.S_PRIJMENI  PM_PRIJMENI
                  , usr.S_KRESTNI   PM_KRESTNI
                  , prj.DT_PLATNOSTOD
                  , prj.DT_PLATNOSTDO
                  , prj.ND_DOCUROVEN1                                   
from  db_jt.kp_ktg_projekt       prj,
      db_jt.kp_cis_projektstatus sts,
      db_jt.ktg_appuser          usr      
where
          prj.id_status = sts.id
      and usr.id = prj.id_pmanager
;


PROMPT Completed QV_CIS_PROJEKT_ALL.sql
PROMPT


-- ============================================================================
-- Deploy: QV_CIS_SUBJECT.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_CIS_SUBJECT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_CIS_SUBJECT
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_CIS_SUBJECT" ("ID_SUBJECT", "S_POPIS_SUBJECT") AS 
  select ID ID_SUBJECT, S_POPIS S_POPIS_SUBJECT
from KP_CIS_SUBJECT order by 1
;


PROMPT Completed QV_CIS_SUBJECT.sql
PROMPT


-- ============================================================================
-- Deploy: QV_CIS_TYPTRANSAKCE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_CIS_TYPTRANSAKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_CIS_TYPTRANSAKCE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_CIS_TYPTRANSAKCE" ("ID", "S_POPIS", "S_KOD", "ID_GESTOR_CZ", "ID_GESTOR_SK", "ID_GESTOR_Z", "ID_TYPTRANSAKCEGROUP", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "C_PROZASTUPCE", "ND_BUDGETNAVYSENI_GESTOR", "C_DEVELOPER", "S_KOMENTAR", "C_SPECIAL", "C_PODVOJNEMIS", "ND_UROVENPROJEKT", "ND_UROVENSPOLECNOST", "ND_UROVENTOP", "S_MENAUP", "S_MENAUS", "S_MENAUT", "C_TISKMAJETEK", "C_BUDGETOVAT") AS 
  select "ID","S_POPIS","S_KOD","ID_GESTOR_CZ","ID_GESTOR_SK","ID_GESTOR_Z","ID_TYPTRANSAKCEGROUP","DT_PLATNOSTOD","DT_PLATNOSTDO","C_PROZASTUPCE","ND_BUDGETNAVYSENI_GESTOR","C_DEVELOPER","S_KOMENTAR","C_SPECIAL","C_PODVOJNEMIS","ND_UROVENPROJEKT","ND_UROVENSPOLECNOST","ND_UROVENTOP","S_MENAUP","S_MENAUS","S_MENAUT","C_TISKMAJETEK","C_BUDGETOVAT"
from db_jt.KP_CIS_TYPTRANSAKCE
;


PROMPT Completed QV_CIS_TYPTRANSAKCE.sql
PROMPT


-- ============================================================================
-- Deploy: QV_CIS_TYPTRANSAKCEGROUP.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_CIS_TYPTRANSAKCEGROUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_CIS_TYPTRANSAKCEGROUP
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_CIS_TYPTRANSAKCEGROUP" ("ID", "S_KOD", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "S_POPIS", "C_DEVELOPER") AS 
  select "ID","S_KOD","DT_PLATNOSTOD","DT_PLATNOSTDO","S_POPIS","C_DEVELOPER"
from db_jt.KP_CIS_TYPTRANSAKCEGROUP
;


PROMPT Completed QV_CIS_TYPTRANSAKCEGROUP.sql
PROMPT


-- ============================================================================
-- Deploy: QV_CIS_UCETPRIMARNI.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_CIS_UCETPRIMARNI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_CIS_UCETPRIMARNI
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_CIS_UCETPRIMARNI" ("ID_CISDATABAZE", "S_DB_INSTANCE", "C_TYP", "S_UCET", "S_POPIS") AS 
  SELECT up.ID_CISDATABAZE,
  db.S_INSTANCE,
    up.C_TYP,
    up.S_UCET,
    up.S_POPIS
  FROM db_jt.KP_CIS_UCETPRIMARNI up,DB_JT.kp_cis_databaze db  
  WHERE ID_CISDATABAZE = db.id
;


PROMPT Completed QV_CIS_UCETPRIMARNI.sql
PROMPT


-- ============================================================================
-- Deploy: QV_CIS_USEK_ALL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_CIS_USEK_ALL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_CIS_USEK_ALL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_CIS_USEK_ALL" ("ID", "ID_KTGUCETNISPOLECNOST", "S_NAZEV", "ID_ODPOVEDNAOSOBA") AS 
  select "ID","ID_KTGUCETNISPOLECNOST","S_NAZEV","ID_ODPOVEDNAOSOBA"  from db_jt.kp_ktg_usek
;


PROMPT Completed QV_CIS_USEK_ALL.sql
PROMPT


-- ============================================================================
-- Deploy: QV_DAT_GENEROVANIZAMEK.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_DAT_GENEROVANIZAMEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_DAT_GENEROVANIZAMEK
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_DAT_GENEROVANIZAMEK" ("ID_SPOL", "NAZEV_SPOL", "DATUM", "ID_CISZAMEK", "ZAMEK_POPIS", "ZAMCENO", "UZIVATEL", "ID_KTGAPPUSER", "DT_DATUMZMENY", "ID_CISDOKLAD", "DOKLAD_POPIS") AS 
  select us.id ID_SPOL, us.s_nazev NAZEV_SPOL, zam.dt_datum DATUM, zam.id_ciszamek id_ciszamek , cis_zam.s_popis ZAMEK_POPIS, zam.c_zamceno ZAMCENO, 
users.s_prijmeni||' '||users.s_krestni UZIVATEL, zam.id_ktgappuser ,zam.dt_datumzmeny, zam.id_cisdoklad, cisdok.s_popis DOKLAD_POPIS 
from 
KP_DAT_GENEROVANIZAMEK zam,
KP_KTG_UCETNISPOLECNOST us,
kp_cis_zamek cis_zam,
kp_cis_doklad cisdok, 
ktg_appuser users
where 
users.id = zam.id_ktgappuser 
and
zam.ID_KTGUCETNISPOLECNOST = us.id
and zam.id_ciszamek = cis_zam.id
and cisdok.id  = zam.id_cisdoklad
order by DT_DATUM desc,zam.ID_KTGUCETNISPOLECNOST, zam.ID_CISZAMEK
;


PROMPT Completed QV_DAT_GENEROVANIZAMEK.sql
PROMPT


-- ============================================================================
-- Deploy: QV_DOKLAD_DETAIL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_DOKLAD_DETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_DOKLAD_DETAIL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_DOKLAD_DETAIL" ("DATA_SOURCE", "DATA_TYPE", "ID_SPOL", "ID_PAR", "ID_INT", "ID_EXT", "ID_ZAKAZKA", "UCET_GL", "UCET_GL_POPIS", "UCET_UNIF", "MENA_DOKLADU", "SUMA_DOKLADU", "MENA_LOKAL", "SUMA_LOKAL", "POPIS", "DATUM", "PROTISTRANA", "PROTISTRANA_ICO", "PROTISTRANA_EO", "PROTISTRANA_EO_ICO", "PROTISTRANA_EMITENT", "PROTISTRANA_EMITENT_ICO", "ID_ODBORU", "ID_PROJEKTU", "SL") AS 
  select 
'UCT'                 DATA_SOURCE,
'ACTUAL'              DATA_TYPE,
dd.id_ktgspolecnost   ID_SPOL,
dd.id_extsystem       ID_PAR, --id ext mame  2x
dd.id                 ID_INT,
dd.id_extsystem       ID_EXT,
null                  ID_ZAKAZKA, --nemame
dd.s_ucetunif         UCET_GL,    -- KIS pre 950 su ucty opacne ?
dd.s_popisoriginal    UCET_GL_POPIS, --KIS
dd.s_ucet             UCET_UNIF,  -- KIS pre 950 su ucty opacne ?
dd.s_mena             MENA_DOKLADU,
dd.nd_castkamena      SUMA_DOKLADU,
d.s_mena              MENA_LOKAL,
dd.nd_castkalocal     SUMA_LOKAL,
dd.s_popis            POPIS,
dd.datum              DATUM,
dd.s_extprotistrana         PROTISTRANA,  --KIS
dd.s_extprotistranaico      PROTISTRANA_ICO,
dd.s_extprotistrana_eo      PROTISTRANA_EO,  --KIS
dd.s_extprotistranaico_eo   PROTISTRANA_EO_ICO, --KIS
dd.s_extprotistrana_emitent PROTISTRANA_EMITENT, --KIS
dd.s_extprotistranaico_emitent PROTISTRANA_EMITENT_ICO, --KIS
dd.id_ktgodbor        ID_ODBORU,
dd.id_ktgprojekt      ID_PROJEKTU,
dd.xidsl              SL
--,dd.s_locale
--dd.id_doklad , d.c_basedoklad, d.c_ifrsprimarni, d.dt_maxtransakce, d.id_ktgdoklad, d.s_popis
from vw_kp_dokladdetail dd
,kp_dat_doklad d
where
d.id_ktgdoklad = 950  -- novy doklad , krok 1
and d.c_ifrsprimarni = 0 --non IFRS
--and d.c_ifrsprimarni = 1 --IFRS
and s_locale ='cs_CZ'
--and s_locale ='EN_US'
and
d.id = dd.id_doklad
and
d.dt_datum =  ( select max(dt_datum) from kp_dat_generovanizamek gz  
                where d.id_ktgucetnispolecnost = gz.id_ktgucetnispolecnost 
                      and (ID_CISZAMEK = 1  and gz.ID_KTGAPPUSER is not null and C_Zamceno =1) and trunc(gz.dt_datum,'YYYY') = trunc(sysdate,'YYYY') )
and d.id_ktgucetnispolecnost = 6760
--and dd.xidsl is not null
order by datum desc
;


PROMPT Completed QV_DOKLAD_DETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: QV_FEIS_POHLEDAVKY.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_FEIS_POHLEDAVKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_FEIS_POHLEDAVKY
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_FEIS_POHLEDAVKY" ("DB_NAME", "FAKTTFID", "FAKTCISLO", "FAKTCISLOFA", "VARSYMB", "KONSTSYMB", "SMLOUVA", "KATEGORIE", "FAKTCASTKA", "FAKTMENA", "CASTKAMENY", "KURZ", "JEDNOTEK", "FAKTZAPLACENO", "FAKTFORMAUHRADY", "DATUMPRIJETI", "DATUMSPLAT", "DATUMODESL", "DATUMPOVFAKT", "ODESSTRED", "ODESDOID", "ODESADR", "ODESICO", "ODESDIC", "ODESVYDAL", "ODESUCET", "ODESBANKA", "ODESSPEC", "FAKTFUID", "PRIJSTRED", "PRIJDOID", "PRIJADR", "PRIJICO", "PRIJDIC", "PRIJKON", "PRIJUCET", "PRIJBANKA", "PRIJSPEC", "FAKTPOZN", "ROUNDORDER", "ROUNDMODE", "STAV", "PFID", "PENDATUM", "FAKTTYP", "ZALOHA", "CINNOST", "INDPH", "DPHDOKL", "PERCG", "UCETSALDA", "ZAKAZKA", "FAKTPMID", "PREDMET", "ZUID", "VYPZNAKMD", "VYPZNAKD", "UCETZALOH", "CERPANO", "FAKTZAPLACENOMF", "KNIHA", "UCETSALDAG", "UCETZALOHG", "OPRAVPOLAUT", "RECIPROCNI", "RSMLOUVA", "TYPKR", "UCETKR", "ZCASTKYINDPH", "MANAZER_ID", "PROJEKT_ID", "IBAN", "UCETKRGAAP", "UPOMINAT", "PENALIZOVAT", "RNDPHMETODA", "RNDPHSDID", "STID", "SKLADADR", "QPOCODESPKB", "QSTAVEXPORTU", "QSIPO", "QZNEXPB", "INVERZNI", "ZURID", "UROCIT", "TYPPENALE", "X_PREDMETY", "RNDPHORDER", "RNDPHMODE", "IDSPL", "DATUM", "UHRCASTKA", "UHRMENA", "UHRZAPLACENO", "DOKLAD", "UHRFORMAUHRADY", "TBNAME", "PK1", "PK2", "PK3", "ZALID", "MENAF", "UHRAZAPLACENOMF", "SDID", "ZAPLACENODAN", "ZAPLACENODANMENA", "CASTKASYS", "SID", "POPIS", "STREDTYP", "SIDPODNIK", "SPLATCEDPH", "STREDNAZEV", "STREDICO", "STREDDIC", "STREDULICE", "STREDPSC", "STREDOBEC", "STREDBANKA", "UCET", "SPECSYMBOL", "DATZAVED", "DATKONEC1", "DATUCTOOD", "DATUCTODO1", "DATMESUZ1", "DATROKUZ1", "STREDPMID", "ZAPISOR", "DATZAVEDG", "STREDZEME", "DATPOCSTAVU", "DATPOCSTAVUG", "DATMESUZG1", "DATROKUZG1", "ODBERTYP", "ODBERNAZEV", "ODBERULICE", "ODBEROBEC", "ODBERPSC", "STAT", "ODBERICO", "ODBER_IC", "ODBERBANKA", "ODBERUCET", "ODBER_SPECSYMBOL", "TEL", "FAX", "ZASTUPCE", "ODBERFUID", "EMAIL", "ZODPOVIDA", "ODBERPOPIS", "ZRUSEN", "IBIS", "KATADR", "KATUCTU", "MENAUCTU", "VIP", "ODBERZEME", "ODBERPLATCEDPH", "CDOID", "ODBERSIPO", "QKODOZ", "X_LEAPOJISTOVNA", "X_VLASTNIKDOID", "X_ANGSKUP", "X_MENAANGSKUP", "X_PLATNYLIMIT", "X_SCHVALLIMIT", "X_NECERPLIMIT", "X_TYPKLIENTA") AS 
  SELECT 
  'TASS04OO',
  "FAKTTFID", "FAKTCISLO", "FAKTCISLOFA", "VARSYMB", "KONSTSYMB", "SMLOUVA", "KATEGORIE", "FAKTCASTKA", "FAKTMENA", "CASTKAMENY", "KURZ", "JEDNOTEK", "FAKTZAPLACENO", "FAKTFORMAUHRADY", "DATUMPRIJETI", "DATUMSPLAT", "DATUMODESL", "DATUMPOVFAKT", "ODESSTRED", "ODESDOID", "ODESADR", "ODESICO", "ODESDIC", "ODESVYDAL", "ODESUCET", "ODESBANKA", "ODESSPEC", "FAKTFUID", "PRIJSTRED", "PRIJDOID", "PRIJADR", "PRIJICO", "PRIJDIC", "PRIJKON", "PRIJUCET", "PRIJBANKA", "PRIJSPEC", "FAKTPOZN", "ROUNDORDER", "ROUNDMODE", "STAV", "PFID", "PENDATUM", "FAKTTYP", "ZALOHA", "CINNOST", "INDPH", "DPHDOKL", "PERCG", "UCETSALDA", "ZAKAZKA", "FAKTPMID", "PREDMET", "ZUID", "VYPZNAKMD", "VYPZNAKD", "UCETZALOH", "CERPANO", "FAKTZAPLACENOMF", "KNIHA", "UCETSALDAG", "UCETZALOHG", "OPRAVPOLAUT", "RECIPROCNI", "RSMLOUVA", "TYPKR", "UCETKR", "ZCASTKYINDPH", "MANAZER_ID", "PROJEKT_ID", "IBAN", "UCETKRGAAP", "UPOMINAT", "PENALIZOVAT", "RNDPHMETODA", "RNDPHSDID", "STID",
  "SKLADADR", "QPOCODESPKB", "QSTAVEXPORTU", "QSIPO", "QZNEXPB", "INVERZNI", "ZURID", "UROCIT", "TYPPENALE", "X_PREDMETY", "RNDPHORDER", "RNDPHMODE", "IDSPL", "DATUM", "UHRCASTKA", "UHRMENA", "UHRZAPLACENO", "DOKLAD", "UHRFORMAUHRADY", "TBNAME", "PK1", "PK2", "PK3", "ZALID", "MENAF", "UHRAZAPLACENOMF", "SDID", "ZAPLACENODAN", "ZAPLACENODANMENA", "CASTKASYS", "SID", "POPIS", "STREDTYP", "SIDPODNIK", "SPLATCEDPH", "STREDNAZEV", "STREDICO", "STREDDIC", "STREDULICE", "STREDPSC", "STREDOBEC", "STREDBANKA", "UCET", "SPECSYMBOL", "DATZAVED", "DATKONEC1", "DATUCTOOD", "DATUCTODO1", "DATMESUZ1", "DATROKUZ1", "STREDPMID", "ZAPISOR", "DATZAVEDG", "STREDZEME", "DATPOCSTAVU", "DATPOCSTAVUG", "DATMESUZG1", "DATROKUZG1", "ODBERTYP", "ODBERNAZEV", "ODBERULICE", "ODBEROBEC", "ODBERPSC", "STAT", "ODBERICO", "ODBER_IC", "ODBERBANKA", "ODBERUCET", "ODBER_SPECSYMBOL", "TEL", "FAX", "ZASTUPCE", "ODBERFUID", "EMAIL", "ZODPOVIDA", "ODBERPOPIS", "ZRUSEN", "IBIS", "KATADR", "KATUCTU", "MENAUCTU", "VIP",
  "ODBERZEME", "ODBERPLATCEDPH", "CDOID", "ODBERSIPO", "QKODOZ", "X_LEAPOJISTOVNA", "X_VLASTNIKDOID", "X_ANGSKUP", "X_MENAANGSKUP", "X_PLATNYLIMIT", "X_SCHVALLIMIT", "X_NECERPLIMIT", "X_TYPKLIENTA"
FROM xpohledavky@topasset
UNION
SELECT 
  'TABS07OO',
  "FAKTTFID", "FAKTCISLO", "FAKTCISLOFA", "VARSYMB", "KONSTSYMB", "SMLOUVA", "KATEGORIE", "FAKTCASTKA", "FAKTMENA", "CASTKAMENY", "KURZ", "JEDNOTEK", "FAKTZAPLACENO", "FAKTFORMAUHRADY", "DATUMPRIJETI", "DATUMSPLAT", "DATUMODESL", "DATUMPOVFAKT", "ODESSTRED", "ODESDOID", "ODESADR", "ODESICO", "ODESDIC", "ODESVYDAL", "ODESUCET", "ODESBANKA", "ODESSPEC", "FAKTFUID", "PRIJSTRED", "PRIJDOID", "PRIJADR", "PRIJICO", "PRIJDIC", "PRIJKON", "PRIJUCET", "PRIJBANKA", "PRIJSPEC", "FAKTPOZN", "ROUNDORDER", "ROUNDMODE", "STAV", "PFID", "PENDATUM", "FAKTTYP", "ZALOHA", "CINNOST", "INDPH", "DPHDOKL", "PERCG", "UCETSALDA", "ZAKAZKA", "FAKTPMID", "PREDMET", "ZUID", "VYPZNAKMD", "VYPZNAKD", "UCETZALOH", "CERPANO", "FAKTZAPLACENOMF", "KNIHA", "UCETSALDAG", "UCETZALOHG", "OPRAVPOLAUT", "RECIPROCNI", "RSMLOUVA", "TYPKR", "UCETKR", "ZCASTKYINDPH", "MANAZER_ID", "PROJEKT_ID", "IBAN", "UCETKRGAAP", "UPOMINAT", "PENALIZOVAT", "RNDPHMETODA", "RNDPHSDID", "STID",
  "SKLADADR", "QPOCODESPKB", "QSTAVEXPORTU", "QSIPO", "QZNEXPB", "INVERZNI", "ZURID", "UROCIT", "TYPPENALE", "X_PREDMETY", "RNDPHORDER", "RNDPHMODE", "IDSPL", "DATUM", "UHRCASTKA", "UHRMENA", "UHRZAPLACENO", "DOKLAD", "UHRFORMAUHRADY", "TBNAME", "PK1", "PK2", "PK3", "ZALID", "MENAF", "UHRAZAPLACENOMF", "SDID", "ZAPLACENODAN", "ZAPLACENODANMENA", "CASTKASYS", "SID", "POPIS", "STREDTYP", "SIDPODNIK", "SPLATCEDPH", "STREDNAZEV", "STREDICO", "STREDDIC", "STREDULICE", "STREDPSC", "STREDOBEC", "STREDBANKA", "UCET", "SPECSYMBOL", "DATZAVED", "DATKONEC1", "DATUCTOOD", "DATUCTODO1", "DATMESUZ1", "DATROKUZ1", "STREDPMID", "ZAPISOR", "DATZAVEDG", "STREDZEME", "DATPOCSTAVU", "DATPOCSTAVUG", "DATMESUZG1", "DATROKUZG1", "ODBERTYP", "ODBERNAZEV", "ODBERULICE", "ODBEROBEC", "ODBERPSC", "STAT", "ODBERICO", "ODBER_IC", "ODBERBANKA", "ODBERUCET", "ODBER_SPECSYMBOL", "TEL", "FAX", "ZASTUPCE", "ODBERFUID", "EMAIL", "ZODPOVIDA", "ODBERPOPIS", "ZRUSEN", "IBIS", "KATADR", "KATUCTU", "MENAUCTU", "VIP",
  "ODBERZEME", "ODBERPLATCEDPH", "CDOID", "ODBERSIPO", "QKODOZ", "X_LEAPOJISTOVNA", "X_VLASTNIKDOID", "X_ANGSKUP", "X_MENAANGSKUP", "X_PLATNYLIMIT", "X_SCHVALLIMIT", "X_NECERPLIMIT", "X_TYPKLIENTA"
FROM xpohledavky@topabs
UNION
SELECT 
  'SPARTAOO',
  "FAKTTFID", "FAKTCISLO", "FAKTCISLOFA", "VARSYMB", "KONSTSYMB", "SMLOUVA", "KATEGORIE", "FAKTCASTKA", "FAKTMENA", "CASTKAMENY", "KURZ", "JEDNOTEK", "FAKTZAPLACENO", "FAKTFORMAUHRADY", "DATUMPRIJETI", "DATUMSPLAT", "DATUMODESL", "DATUMPOVFAKT", "ODESSTRED", "ODESDOID", "ODESADR", "ODESICO", "ODESDIC", "ODESVYDAL", "ODESUCET", "ODESBANKA", "ODESSPEC", "FAKTFUID", "PRIJSTRED", "PRIJDOID", "PRIJADR", "PRIJICO", "PRIJDIC", "PRIJKON", "PRIJUCET", "PRIJBANKA", "PRIJSPEC", "FAKTPOZN", "ROUNDORDER", "ROUNDMODE", "STAV", "PFID", "PENDATUM", "FAKTTYP", "ZALOHA", "CINNOST", "INDPH", "DPHDOKL", "PERCG", "UCETSALDA", "ZAKAZKA", "FAKTPMID", "PREDMET", "ZUID", "VYPZNAKMD", "VYPZNAKD", "UCETZALOH", "CERPANO", "FAKTZAPLACENOMF", "KNIHA", "UCETSALDAG", "UCETZALOHG", "OPRAVPOLAUT", "RECIPROCNI", "RSMLOUVA", "TYPKR", "UCETKR", "ZCASTKYINDPH", "MANAZER_ID", "PROJEKT_ID", "IBAN", "UCETKRGAAP", "UPOMINAT", "PENALIZOVAT", "RNDPHMETODA", "RNDPHSDID", "STID",
  "SKLADADR", "QPOCODESPKB", "QSTAVEXPORTU", "QSIPO", "QZNEXPB", "INVERZNI", "ZURID", "UROCIT", "TYPPENALE", "X_PREDMETY", "RNDPHORDER", "RNDPHMODE", "IDSPL", "DATUM", "UHRCASTKA", "UHRMENA", "UHRZAPLACENO", "DOKLAD", "UHRFORMAUHRADY", "TBNAME", "PK1", "PK2", "PK3", "ZALID", "MENAF", "UHRAZAPLACENOMF", "SDID", "ZAPLACENODAN", "ZAPLACENODANMENA", "CASTKASYS", "SID", "POPIS", "STREDTYP", "SIDPODNIK", "SPLATCEDPH", "STREDNAZEV", "STREDICO", "STREDDIC", "STREDULICE", "STREDPSC", "STREDOBEC", "STREDBANKA", "UCET", "SPECSYMBOL", "DATZAVED", "DATKONEC1", "DATUCTOOD", "DATUCTODO1", "DATMESUZ1", "DATROKUZ1", "STREDPMID", "ZAPISOR", "DATZAVEDG", "STREDZEME", "DATPOCSTAVU", "DATPOCSTAVUG", "DATMESUZG1", "DATROKUZG1", "ODBERTYP", "ODBERNAZEV", "ODBERULICE", "ODBEROBEC", "ODBERPSC", "STAT", "ODBERICO", "ODBER_IC", "ODBERBANKA", "ODBERUCET", "ODBER_SPECSYMBOL", "TEL", "FAX", "ZASTUPCE", "ODBERFUID", "EMAIL", "ZODPOVIDA", "ODBERPOPIS", "ZRUSEN", "IBIS", "KATADR", "KATUCTU", "MENAUCTU", "VIP",
  "ODBERZEME", "ODBERPLATCEDPH", "CDOID", "ODBERSIPO", "QKODOZ", "X_LEAPOJISTOVNA", "X_VLASTNIKDOID", "X_ANGSKUP", "X_MENAANGSKUP", "X_PLATNYLIMIT", "X_SCHVALLIMIT", "X_NECERPLIMIT", "X_TYPKLIENTA"
FROM xpohledavky@sparta
UNION
SELECT 
  'TASESROO',
  "FAKTTFID", "FAKTCISLO", "FAKTCISLOFA", "VARSYMB", "KONSTSYMB", "SMLOUVA", "KATEGORIE", "FAKTCASTKA", "FAKTMENA", "CASTKAMENY", "KURZ", "JEDNOTEK", "FAKTZAPLACENO", "FAKTFORMAUHRADY", "DATUMPRIJETI", "DATUMSPLAT", "DATUMODESL", "DATUMPOVFAKT", "ODESSTRED", "ODESDOID", "ODESADR", "ODESICO", "ODESDIC", "ODESVYDAL", "ODESUCET", "ODESBANKA", "ODESSPEC", "FAKTFUID", "PRIJSTRED", "PRIJDOID", "PRIJADR", "PRIJICO", "PRIJDIC", "PRIJKON", "PRIJUCET", "PRIJBANKA", "PRIJSPEC", "FAKTPOZN", "ROUNDORDER", "ROUNDMODE", "STAV", "PFID", "PENDATUM", "FAKTTYP", "ZALOHA", "CINNOST", "INDPH", "DPHDOKL", "PERCG", "UCETSALDA", "ZAKAZKA", "FAKTPMID", "PREDMET", "ZUID", "VYPZNAKMD", "VYPZNAKD", "UCETZALOH", "CERPANO", "FAKTZAPLACENOMF", "KNIHA", "UCETSALDAG", "UCETZALOHG", "OPRAVPOLAUT", "RECIPROCNI", "RSMLOUVA", "TYPKR", "UCETKR", "ZCASTKYINDPH", "MANAZER_ID", "PROJEKT_ID", "IBAN", "UCETKRGAAP", "UPOMINAT", "PENALIZOVAT", "RNDPHMETODA", "RNDPHSDID", "STID",
  "SKLADADR", "QPOCODESPKB", "QSTAVEXPORTU", "QSIPO", "QZNEXPB", "INVERZNI", "ZURID", "UROCIT", "TYPPENALE", "X_PREDMETY", "RNDPHORDER", "RNDPHMODE", "IDSPL", "DATUM", "UHRCASTKA", "UHRMENA", "UHRZAPLACENO", "DOKLAD", "UHRFORMAUHRADY", "TBNAME", "PK1", "PK2", "PK3", "ZALID", "MENAF", "UHRAZAPLACENOMF", "SDID", "ZAPLACENODAN", "ZAPLACENODANMENA", "CASTKASYS", "SID", "POPIS", "STREDTYP", "SIDPODNIK", "SPLATCEDPH", "STREDNAZEV", "STREDICO", "STREDDIC", "STREDULICE", "STREDPSC", "STREDOBEC", "STREDBANKA", "UCET", "SPECSYMBOL", "DATZAVED", "DATKONEC1", "DATUCTOOD", "DATUCTODO1", "DATMESUZ1", "DATROKUZ1", "STREDPMID", "ZAPISOR", "DATZAVEDG", "STREDZEME", "DATPOCSTAVU", "DATPOCSTAVUG", "DATMESUZG1", "DATROKUZG1", "ODBERTYP", "ODBERNAZEV", "ODBERULICE", "ODBEROBEC", "ODBERPSC", "STAT", "ODBERICO", "ODBER_IC", "ODBERBANKA", "ODBERUCET", "ODBER_SPECSYMBOL", "TEL", "FAX", "ZASTUPCE", "ODBERFUID", "EMAIL", "ZODPOVIDA", "ODBERPOPIS", "ZRUSEN", "IBIS", "KATADR", "KATUCTU", "MENAUCTU", "VIP",
  "ODBERZEME", "ODBERPLATCEDPH", "CDOID", "ODBERSIPO", "QKODOZ", "X_LEAPOJISTOVNA", "X_VLASTNIKDOID", "X_ANGSKUP", "X_MENAANGSKUP", "X_PLATNYLIMIT", "X_SCHVALLIMIT", "X_NECERPLIMIT", "X_TYPKLIENTA"
FROM xpohledavky@TASESROO
UNION
SELECT 
  'TEUR04OO',
  "FAKTTFID", "FAKTCISLO", "FAKTCISLOFA", "VARSYMB", "KONSTSYMB", "SMLOUVA", "KATEGORIE", "FAKTCASTKA", "FAKTMENA", "CASTKAMENY", "KURZ", "JEDNOTEK", "FAKTZAPLACENO", "FAKTFORMAUHRADY", "DATUMPRIJETI", "DATUMSPLAT", "DATUMODESL", "DATUMPOVFAKT", "ODESSTRED", "ODESDOID", "ODESADR", "ODESICO", "ODESDIC", "ODESVYDAL", "ODESUCET", "ODESBANKA", "ODESSPEC", "FAKTFUID", "PRIJSTRED", "PRIJDOID", "PRIJADR", "PRIJICO", "PRIJDIC", "PRIJKON", "PRIJUCET", "PRIJBANKA", "PRIJSPEC", "FAKTPOZN", "ROUNDORDER", "ROUNDMODE", "STAV", "PFID", "PENDATUM", "FAKTTYP", "ZALOHA", "CINNOST", "INDPH", "DPHDOKL", "PERCG", "UCETSALDA", "ZAKAZKA", "FAKTPMID", "PREDMET", "ZUID", "VYPZNAKMD", "VYPZNAKD", "UCETZALOH", "CERPANO", "FAKTZAPLACENOMF", "KNIHA", "UCETSALDAG", "UCETZALOHG", "OPRAVPOLAUT", "RECIPROCNI", "RSMLOUVA", "TYPKR", "UCETKR", "ZCASTKYINDPH", "MANAZER_ID", "PROJEKT_ID", "IBAN", "UCETKRGAAP", "UPOMINAT", "PENALIZOVAT", "RNDPHMETODA", "RNDPHSDID", "STID",
  "SKLADADR", "QPOCODESPKB", "QSTAVEXPORTU", "QSIPO", "QZNEXPB", "INVERZNI", "ZURID", "UROCIT", "TYPPENALE", "X_PREDMETY", "RNDPHORDER", "RNDPHMODE", "IDSPL", "DATUM", "UHRCASTKA", "UHRMENA", "UHRZAPLACENO", "DOKLAD", "UHRFORMAUHRADY", "TBNAME", "PK1", "PK2", "PK3", "ZALID", "MENAF", "UHRAZAPLACENOMF", "SDID", "ZAPLACENODAN", "ZAPLACENODANMENA", "CASTKASYS", "SID", "POPIS", "STREDTYP", "SIDPODNIK", "SPLATCEDPH", "STREDNAZEV", "STREDICO", "STREDDIC", "STREDULICE", "STREDPSC", "STREDOBEC", "STREDBANKA", "UCET", "SPECSYMBOL", "DATZAVED", "DATKONEC1", "DATUCTOOD", "DATUCTODO1", "DATMESUZ1", "DATROKUZ1", "STREDPMID", "ZAPISOR", "DATZAVEDG", "STREDZEME", "DATPOCSTAVU", "DATPOCSTAVUG", "DATMESUZG1", "DATROKUZG1", "ODBERTYP", "ODBERNAZEV", "ODBERULICE", "ODBEROBEC", "ODBERPSC", "STAT", "ODBERICO", "ODBER_IC", "ODBERBANKA", "ODBERUCET", "ODBER_SPECSYMBOL", "TEL", "FAX", "ZASTUPCE", "ODBERFUID", "EMAIL", "ZODPOVIDA", "ODBERPOPIS", "ZRUSEN", "IBIS", "KATADR", "KATUCTU", "MENAUCTU", "VIP",
  "ODBERZEME", "ODBERPLATCEDPH", "CDOID", "ODBERSIPO", "QKODOZ", "X_LEAPOJISTOVNA", "X_VLASTNIKDOID", "X_ANGSKUP", "X_MENAANGSKUP", "X_PLATNYLIMIT", "X_SCHVALLIMIT", "X_NECERPLIMIT", "X_TYPKLIENTA"
FROM xpohledavky@TopEur
UNION
SELECT 
  'TSKE08OO',
  "FAKTTFID", "FAKTCISLO", "FAKTCISLOFA", "VARSYMB", "KONSTSYMB", "SMLOUVA", "KATEGORIE", "FAKTCASTKA", "FAKTMENA", "CASTKAMENY", "KURZ", "JEDNOTEK", "FAKTZAPLACENO", "FAKTFORMAUHRADY", "DATUMPRIJETI", "DATUMSPLAT", "DATUMODESL", "DATUMPOVFAKT", "ODESSTRED", "ODESDOID", "ODESADR", "ODESICO", "ODESDIC", "ODESVYDAL", "ODESUCET", "ODESBANKA", "ODESSPEC", "FAKTFUID", "PRIJSTRED", "PRIJDOID", "PRIJADR", "PRIJICO", "PRIJDIC", "PRIJKON", "PRIJUCET", "PRIJBANKA", "PRIJSPEC", "FAKTPOZN", "ROUNDORDER", "ROUNDMODE", "STAV", "PFID", "PENDATUM", "FAKTTYP", "ZALOHA", "CINNOST", "INDPH", "DPHDOKL", "PERCG", "UCETSALDA", "ZAKAZKA", "FAKTPMID", "PREDMET", "ZUID", "VYPZNAKMD", "VYPZNAKD", "UCETZALOH", "CERPANO", "FAKTZAPLACENOMF", "KNIHA", "UCETSALDAG", "UCETZALOHG", "OPRAVPOLAUT", "RECIPROCNI", "RSMLOUVA", "TYPKR", "UCETKR", "ZCASTKYINDPH", "MANAZER_ID", "PROJEKT_ID", "IBAN", "UCETKRGAAP", "UPOMINAT", "PENALIZOVAT", "RNDPHMETODA", "RNDPHSDID", "STID",
  "SKLADADR", "QPOCODESPKB", "QSTAVEXPORTU", "QSIPO", "QZNEXPB", "INVERZNI", "ZURID", "UROCIT", "TYPPENALE", "X_PREDMETY", "RNDPHORDER", "RNDPHMODE", "IDSPL", "DATUM", "UHRCASTKA", "UHRMENA", "UHRZAPLACENO", "DOKLAD", "UHRFORMAUHRADY", "TBNAME", "PK1", "PK2", "PK3", "ZALID", "MENAF", "UHRAZAPLACENOMF", "SDID", "ZAPLACENODAN", "ZAPLACENODANMENA", "CASTKASYS", "SID", "POPIS", "STREDTYP", "SIDPODNIK", "SPLATCEDPH", "STREDNAZEV", "STREDICO", "STREDDIC", "STREDULICE", "STREDPSC", "STREDOBEC", "STREDBANKA", "UCET", "SPECSYMBOL", "DATZAVED", "DATKONEC1", "DATUCTOOD", "DATUCTODO1", "DATMESUZ1", "DATROKUZ1", "STREDPMID", "ZAPISOR", "DATZAVEDG", "STREDZEME", "DATPOCSTAVU", "DATPOCSTAVUG", "DATMESUZG1", "DATROKUZG1", "ODBERTYP", "ODBERNAZEV", "ODBERULICE", "ODBEROBEC", "ODBERPSC", "STAT", "ODBERICO", "ODBER_IC", "ODBERBANKA", "ODBERUCET", "ODBER_SPECSYMBOL", "TEL", "FAX", "ZASTUPCE", "ODBERFUID", "EMAIL", "ZODPOVIDA", "ODBERPOPIS", "ZRUSEN", "IBIS", "KATADR", "KATUCTU", "MENAUCTU", "VIP",
  "ODBERZEME", "ODBERPLATCEDPH", "CDOID", "ODBERSIPO", "QKODOZ", "X_LEAPOJISTOVNA", "X_VLASTNIKDOID", "X_ANGSKUP", "X_MENAANGSKUP", "X_PLATNYLIMIT", "X_SCHVALLIMIT", "X_NECERPLIMIT", "X_TYPKLIENTA"
FROM xpohledavky@TSKE08OO
UNION
SELECT 
  'TCZK04OO',
  "FAKTTFID", "FAKTCISLO", "FAKTCISLOFA", "VARSYMB", "KONSTSYMB", "SMLOUVA", "KATEGORIE", "FAKTCASTKA", "FAKTMENA", "CASTKAMENY", "KURZ", "JEDNOTEK", "FAKTZAPLACENO", "FAKTFORMAUHRADY", "DATUMPRIJETI", "DATUMSPLAT", "DATUMODESL", "DATUMPOVFAKT", "ODESSTRED", "ODESDOID", "ODESADR", "ODESICO", "ODESDIC", "ODESVYDAL", "ODESUCET", "ODESBANKA", "ODESSPEC", "FAKTFUID", "PRIJSTRED", "PRIJDOID", "PRIJADR", "PRIJICO", "PRIJDIC", "PRIJKON", "PRIJUCET", "PRIJBANKA", "PRIJSPEC", "FAKTPOZN", "ROUNDORDER", "ROUNDMODE", "STAV", "PFID", "PENDATUM", "FAKTTYP", "ZALOHA", "CINNOST", "INDPH", "DPHDOKL", "PERCG", "UCETSALDA", "ZAKAZKA", "FAKTPMID", "PREDMET", "ZUID", "VYPZNAKMD", "VYPZNAKD", "UCETZALOH", "CERPANO", "FAKTZAPLACENOMF", "KNIHA", "UCETSALDAG", "UCETZALOHG", "OPRAVPOLAUT", "RECIPROCNI", "RSMLOUVA", "TYPKR", "UCETKR", "ZCASTKYINDPH", "MANAZER_ID", "PROJEKT_ID", "IBAN", "UCETKRGAAP", "UPOMINAT", "PENALIZOVAT", "RNDPHMETODA", "RNDPHSDID", "STID",
  "SKLADADR", "QPOCODESPKB", "QSTAVEXPORTU", "QSIPO", "QZNEXPB", "INVERZNI", "ZURID", "UROCIT", "TYPPENALE", "X_PREDMETY", "RNDPHORDER", "RNDPHMODE", "IDSPL", "DATUM", "UHRCASTKA", "UHRMENA", "UHRZAPLACENO", "DOKLAD", "UHRFORMAUHRADY", "TBNAME", "PK1", "PK2", "PK3", "ZALID", "MENAF", "UHRAZAPLACENOMF", "SDID", "ZAPLACENODAN", "ZAPLACENODANMENA", "CASTKASYS", "SID", "POPIS", "STREDTYP", "SIDPODNIK", "SPLATCEDPH", "STREDNAZEV", "STREDICO", "STREDDIC", "STREDULICE", "STREDPSC", "STREDOBEC", "STREDBANKA", "UCET", "SPECSYMBOL", "DATZAVED", "DATKONEC1", "DATUCTOOD", "DATUCTODO1", "DATMESUZ1", "DATROKUZ1", "STREDPMID", "ZAPISOR", "DATZAVEDG", "STREDZEME", "DATPOCSTAVU", "DATPOCSTAVUG", "DATMESUZG1", "DATROKUZG1", "ODBERTYP", "ODBERNAZEV", "ODBERULICE", "ODBEROBEC", "ODBERPSC", "STAT", "ODBERICO", "ODBER_IC", "ODBERBANKA", "ODBERUCET", "ODBER_SPECSYMBOL", "TEL", "FAX", "ZASTUPCE", "ODBERFUID", "EMAIL", "ZODPOVIDA", "ODBERPOPIS", "ZRUSEN", "IBIS", "KATADR", "KATUCTU", "MENAUCTU", "VIP",
  "ODBERZEME", "ODBERPLATCEDPH", "CDOID", "ODBERSIPO", "QKODOZ", "X_LEAPOJISTOVNA", "X_VLASTNIKDOID", "X_ANGSKUP", "X_MENAANGSKUP", "X_PLATNYLIMIT", "X_SCHVALLIMIT", "X_NECERPLIMIT", "X_TYPKLIENTA"
FROM xpohledavky@TopCzk
UNION
SELECT 
  'TUSD04OO',
  "FAKTTFID", "FAKTCISLO", "FAKTCISLOFA", "VARSYMB", "KONSTSYMB", "SMLOUVA", "KATEGORIE", "FAKTCASTKA", "FAKTMENA", "CASTKAMENY", "KURZ", "JEDNOTEK", "FAKTZAPLACENO", "FAKTFORMAUHRADY", "DATUMPRIJETI", "DATUMSPLAT", "DATUMODESL", "DATUMPOVFAKT", "ODESSTRED", "ODESDOID", "ODESADR", "ODESICO", "ODESDIC", "ODESVYDAL", "ODESUCET", "ODESBANKA", "ODESSPEC", "FAKTFUID", "PRIJSTRED", "PRIJDOID", "PRIJADR", "PRIJICO", "PRIJDIC", "PRIJKON", "PRIJUCET", "PRIJBANKA", "PRIJSPEC", "FAKTPOZN", "ROUNDORDER", "ROUNDMODE", "STAV", "PFID", "PENDATUM", "FAKTTYP", "ZALOHA", "CINNOST", "INDPH", "DPHDOKL", "PERCG", "UCETSALDA", "ZAKAZKA", "FAKTPMID", "PREDMET", "ZUID", "VYPZNAKMD", "VYPZNAKD", "UCETZALOH", "CERPANO", "FAKTZAPLACENOMF", "KNIHA", "UCETSALDAG", "UCETZALOHG", "OPRAVPOLAUT", "RECIPROCNI", "RSMLOUVA", "TYPKR", "UCETKR", "ZCASTKYINDPH", "MANAZER_ID", "PROJEKT_ID", "IBAN", "UCETKRGAAP", "UPOMINAT", "PENALIZOVAT", "RNDPHMETODA", "RNDPHSDID", "STID",
  "SKLADADR", "QPOCODESPKB", "QSTAVEXPORTU", "QSIPO", "QZNEXPB", "INVERZNI", "ZURID", "UROCIT", "TYPPENALE", "X_PREDMETY", "RNDPHORDER", "RNDPHMODE", "IDSPL", "DATUM", "UHRCASTKA", "UHRMENA", "UHRZAPLACENO", "DOKLAD", "UHRFORMAUHRADY", "TBNAME", "PK1", "PK2", "PK3", "ZALID", "MENAF", "UHRAZAPLACENOMF", "SDID", "ZAPLACENODAN", "ZAPLACENODANMENA", "CASTKASYS", "SID", "POPIS", "STREDTYP", "SIDPODNIK", "SPLATCEDPH", "STREDNAZEV", "STREDICO", "STREDDIC", "STREDULICE", "STREDPSC", "STREDOBEC", "STREDBANKA", "UCET", "SPECSYMBOL", "DATZAVED", "DATKONEC1", "DATUCTOOD", "DATUCTODO1", "DATMESUZ1", "DATROKUZ1", "STREDPMID", "ZAPISOR", "DATZAVEDG", "STREDZEME", "DATPOCSTAVU", "DATPOCSTAVUG", "DATMESUZG1", "DATROKUZG1", "ODBERTYP", "ODBERNAZEV", "ODBERULICE", "ODBEROBEC", "ODBERPSC", "STAT", "ODBERICO", "ODBER_IC", "ODBERBANKA", "ODBERUCET", "ODBER_SPECSYMBOL", "TEL", "FAX", "ZASTUPCE", "ODBERFUID", "EMAIL", "ZODPOVIDA", "ODBERPOPIS", "ZRUSEN", "IBIS", "KATADR", "KATUCTU", "MENAUCTU", "VIP",
  "ODBERZEME", "ODBERPLATCEDPH", "CDOID", "ODBERSIPO", "QKODOZ", "X_LEAPOJISTOVNA", "X_VLASTNIKDOID", "X_ANGSKUP", "X_MENAANGSKUP", "X_PLATNYLIMIT", "X_SCHVALLIMIT", "X_NECERPLIMIT", "X_TYPKLIENTA"
FROM xpohledavky@TopUsd
UNION
SELECT 
  'TGBP04OO',
  "FAKTTFID", "FAKTCISLO", "FAKTCISLOFA", "VARSYMB", "KONSTSYMB", "SMLOUVA", "KATEGORIE", "FAKTCASTKA", "FAKTMENA", "CASTKAMENY", "KURZ", "JEDNOTEK", "FAKTZAPLACENO", "FAKTFORMAUHRADY", "DATUMPRIJETI", "DATUMSPLAT", "DATUMODESL", "DATUMPOVFAKT", "ODESSTRED", "ODESDOID", "ODESADR", "ODESICO", "ODESDIC", "ODESVYDAL", "ODESUCET", "ODESBANKA", "ODESSPEC", "FAKTFUID", "PRIJSTRED", "PRIJDOID", "PRIJADR", "PRIJICO", "PRIJDIC", "PRIJKON", "PRIJUCET", "PRIJBANKA", "PRIJSPEC", "FAKTPOZN", "ROUNDORDER", "ROUNDMODE", "STAV", "PFID", "PENDATUM", "FAKTTYP", "ZALOHA", "CINNOST", "INDPH", "DPHDOKL", "PERCG", "UCETSALDA", "ZAKAZKA", "FAKTPMID", "PREDMET", "ZUID", "VYPZNAKMD", "VYPZNAKD", "UCETZALOH", "CERPANO", "FAKTZAPLACENOMF", "KNIHA", "UCETSALDAG", "UCETZALOHG", "OPRAVPOLAUT", "RECIPROCNI", "RSMLOUVA", "TYPKR", "UCETKR", "ZCASTKYINDPH", "MANAZER_ID", "PROJEKT_ID", "IBAN", "UCETKRGAAP", "UPOMINAT", "PENALIZOVAT", "RNDPHMETODA", "RNDPHSDID", "STID",
  "SKLADADR", "QPOCODESPKB", "QSTAVEXPORTU", "QSIPO", "QZNEXPB", "INVERZNI", "ZURID", "UROCIT", "TYPPENALE", "X_PREDMETY", "RNDPHORDER", "RNDPHMODE", "IDSPL", "DATUM", "UHRCASTKA", "UHRMENA", "UHRZAPLACENO", "DOKLAD", "UHRFORMAUHRADY", "TBNAME", "PK1", "PK2", "PK3", "ZALID", "MENAF", "UHRAZAPLACENOMF", "SDID", "ZAPLACENODAN", "ZAPLACENODANMENA", "CASTKASYS", "SID", "POPIS", "STREDTYP", "SIDPODNIK", "SPLATCEDPH", "STREDNAZEV", "STREDICO", "STREDDIC", "STREDULICE", "STREDPSC", "STREDOBEC", "STREDBANKA", "UCET", "SPECSYMBOL", "DATZAVED", "DATKONEC1", "DATUCTOOD", "DATUCTODO1", "DATMESUZ1", "DATROKUZ1", "STREDPMID", "ZAPISOR", "DATZAVEDG", "STREDZEME", "DATPOCSTAVU", "DATPOCSTAVUG", "DATMESUZG1", "DATROKUZG1", "ODBERTYP", "ODBERNAZEV", "ODBERULICE", "ODBEROBEC", "ODBERPSC", "STAT", "ODBERICO", "ODBER_IC", "ODBERBANKA", "ODBERUCET", "ODBER_SPECSYMBOL", "TEL", "FAX", "ZASTUPCE", "ODBERFUID", "EMAIL", "ZODPOVIDA", "ODBERPOPIS", "ZRUSEN", "IBIS", "KATADR", "KATUCTU", "MENAUCTU", "VIP",
  "ODBERZEME", "ODBERPLATCEDPH", "CDOID", "ODBERSIPO", "QKODOZ", "X_LEAPOJISTOVNA", "X_VLASTNIKDOID", "X_ANGSKUP", "X_MENAANGSKUP", "X_PLATNYLIMIT", "X_SCHVALLIMIT", "X_NECERPLIMIT", "X_TYPKLIENTA"
FROM xpohledavky@TopGbp
UNION
SELECT 
  'TRUB07OO',
  "FAKTTFID", "FAKTCISLO", "FAKTCISLOFA", "VARSYMB", "KONSTSYMB", "SMLOUVA", "KATEGORIE", "FAKTCASTKA", "FAKTMENA", "CASTKAMENY", "KURZ", "JEDNOTEK", "FAKTZAPLACENO", "FAKTFORMAUHRADY", "DATUMPRIJETI", "DATUMSPLAT", "DATUMODESL", "DATUMPOVFAKT", "ODESSTRED", "ODESDOID", "ODESADR", "ODESICO", "ODESDIC", "ODESVYDAL", "ODESUCET", "ODESBANKA", "ODESSPEC", "FAKTFUID", "PRIJSTRED", "PRIJDOID", "PRIJADR", "PRIJICO", "PRIJDIC", "PRIJKON", "PRIJUCET", "PRIJBANKA", "PRIJSPEC", "FAKTPOZN", "ROUNDORDER", "ROUNDMODE", "STAV", "PFID", "PENDATUM", "FAKTTYP", "ZALOHA", "CINNOST", "INDPH", "DPHDOKL", "PERCG", "UCETSALDA", "ZAKAZKA", "FAKTPMID", "PREDMET", "ZUID", "VYPZNAKMD", "VYPZNAKD", "UCETZALOH", "CERPANO", "FAKTZAPLACENOMF", "KNIHA", "UCETSALDAG", "UCETZALOHG", "OPRAVPOLAUT", "RECIPROCNI", "RSMLOUVA", "TYPKR", "UCETKR", "ZCASTKYINDPH", "MANAZER_ID", "PROJEKT_ID", "IBAN", "UCETKRGAAP", "UPOMINAT", "PENALIZOVAT", "RNDPHMETODA", "RNDPHSDID", "STID",
  "SKLADADR", "QPOCODESPKB", "QSTAVEXPORTU", "QSIPO", "QZNEXPB", "INVERZNI", "ZURID", "UROCIT", "TYPPENALE", "X_PREDMETY", "RNDPHORDER", "RNDPHMODE", "IDSPL", "DATUM", "UHRCASTKA", "UHRMENA", "UHRZAPLACENO", "DOKLAD", "UHRFORMAUHRADY", "TBNAME", "PK1", "PK2", "PK3", "ZALID", "MENAF", "UHRAZAPLACENOMF", "SDID", "ZAPLACENODAN", "ZAPLACENODANMENA", "CASTKASYS", "SID", "POPIS", "STREDTYP", "SIDPODNIK", "SPLATCEDPH", "STREDNAZEV", "STREDICO", "STREDDIC", "STREDULICE", "STREDPSC", "STREDOBEC", "STREDBANKA", "UCET", "SPECSYMBOL", "DATZAVED", "DATKONEC1", "DATUCTOOD", "DATUCTODO1", "DATMESUZ1", "DATROKUZ1", "STREDPMID", "ZAPISOR", "DATZAVEDG", "STREDZEME", "DATPOCSTAVU", "DATPOCSTAVUG", "DATMESUZG1", "DATROKUZG1", "ODBERTYP", "ODBERNAZEV", "ODBERULICE", "ODBEROBEC", "ODBERPSC", "STAT", "ODBERICO", "ODBER_IC", "ODBERBANKA", "ODBERUCET", "ODBER_SPECSYMBOL", "TEL", "FAX", "ZASTUPCE", "ODBERFUID", "EMAIL", "ZODPOVIDA", "ODBERPOPIS", "ZRUSEN", "IBIS", "KATADR", "KATUCTU", "MENAUCTU", "VIP",
  "ODBERZEME", "ODBERPLATCEDPH", "CDOID", "ODBERSIPO", "QKODOZ", "X_LEAPOJISTOVNA", "X_VLASTNIKDOID", "X_ANGSKUP", "X_MENAANGSKUP", "X_PLATNYLIMIT", "X_SCHVALLIMIT", "X_NECERPLIMIT", "X_TYPKLIENTA"
FROM xpohledavky@TopRub
;


PROMPT Completed QV_FEIS_POHLEDAVKY.sql
PROMPT


-- ============================================================================
-- Deploy: QV_KP_DOKLADDETAIL_DSLR.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_KP_DOKLADDETAIL_DSLR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_KP_DOKLADDETAIL_DSLR
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_KP_DOKLADDETAIL_DSLR" ("ID", "S_NAZEV", "NL_RADEK", "TEXTRADEK", "S_POPIS", "ND_CASTKAMENA", "S_MENA", "ND_CASTKALOCAL", "S_MENAUCSPOL", "ND_CASTKACZK", "ID_KTGSPOLECNOST", "PROTISTRANA", "DT_DATUM", "ID_KTGUCETNISPOLECNOST", "NL_PORADILIST", "DATUM", "S_LOCALE", "ID_CISSUBJECT", "S_UCET", "ID_KTGPROJEKT", "ID_KTGODBOR", "S_FAKTURA", "TYPTRANSAKCE", "XIDSL") AS 
  select dslr."ID",dslr."S_NAZEV",dslr."NL_RADEK",dslr."TEXTRADEK",dslr."S_POPIS",dslr."ND_CASTKAMENA",dslr."S_MENA",dslr."ND_CASTKALOCAL",dslr."S_MENAUCSPOL",dslr."ND_CASTKACZK",dslr."ID_KTGSPOLECNOST",dslr."PROTISTRANA",dslr."DT_DATUM",dslr."ID_KTGUCETNISPOLECNOST",dslr."NL_PORADILIST",dslr."DATUM",dslr."S_LOCALE",dslr."ID_CISSUBJECT",dslr."S_UCET",dslr."ID_KTGPROJEKT",dslr."ID_KTGODBOR",dslr."S_FAKTURA",dslr."TYPTRANSAKCE",dslr."XIDSL" from 
TB_KP_DOKLADDETAIL_DSLR_CZ dslr,
kp_ktg_ucetnispolecnost us
where 
us.dt_datumarchivace is null
and us.ID_CISKATSPOL NOT IN (5,10,12,15) 
and us.id = dslr.id_ktgucetnispolecnost
and dt_datum > to_date('01.01.2011','DD.MM.YYYY')
;


PROMPT Completed QV_KP_DOKLADDETAIL_DSLR.sql
PROMPT


-- ============================================================================
-- Deploy: QV_KP_DOKLADDETAIL_DSLR_CL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_KP_DOKLADDETAIL_DSLR_CL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_KP_DOKLADDETAIL_DSLR_CL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_KP_DOKLADDETAIL_DSLR_CL" ("LIST", "ICO_SPOL", "ID_ODBOR", "ID_PROJEKT", "UCET_ORIGINAL", "UZAVREN", "ID_HOLDING_PROTISTRANA", "ID", "S_NAZEV", "NL_RADEK", "TEXTRADEK", "S_POPIS", "ND_CASTKAMENA", "S_MENA", "ND_CASTKALOCAL", "S_MENAUCSPOL", "ND_CASTKACZK", "ID_PROTISTRANA", "PROTISTRANA", "DT_DATUM", "ID_UCETNISPOLECNOST", "DATUM", "S_LOCALE", "ID_CISSUBJECT", "S_UCET", "S_FAKTURA", "TYPTRANSAKCE", "XIDSL") AS 
  SELECT dp.nl_poradilist List,
    s.s_ico ICO_SPOL,
    zd.id_ktgodbor ID_ODBOR,
    zd.id_ktgprojekt ID_PROJEKT,
    zd.s_ucetoriginal UCET_ORIGINAL,
    (SELECT DECODE(c_zamceno,1,'ANO','NE')
    FROM KP_DAT_GENEROVANIZAMEK gz
    WHERE gz.id_ktgucetnispolecnost = s.ID
    AND gz.DT_DATUM                 = d.DT_DATUM
    AND ID_CISZAMEK                 = 1
    ) UZAVREN ,---ucetni
    s.id_mngsegment ID_HOLDING_PROTISTRANA,
    ---d.dt_datum,
    zd.ID,
    s.s_nazev,
    dp.nl_radek,
    --f_getbunkatext (rel.id_dokladpolozka, l.s_locale) textradek,
    f_getUcetUnifPopis( zd.id_cisUcetUnif, l.s_locale) textradek,
    zd.s_popis,
    DECODE (zd.c_strana, 'D', -1, 1) * zd.nd_castkamena
    /*f_getSignBilanceList(dp.nl_poradiList)*/
    nd_castkamena,
    zd.s_mena zd_s_mena,
    DECODE (zd.c_strana, 'D', -1, 1) * zd.nd_castkalocal
    /*f_getSignBilanceList(dp.nl_poradiList)*/
    nd_castkalocal,
    s.s_mena s_s_mena,
    CASE
      WHEN (s.s_mena <> 'CZK')
      THEN DECODE (zd.c_strana, 'D', -1, 1) * zd.nd_castkalocal
        /*f_getSignBilanceList(dp.nl_poradiList)*/
                                     / f_getquestorkurs (s.s_mena, d.dt_datum)
      ELSE DECODE (zd.c_strana, 'D', -1, 1) * zd.nd_castkalocal
        /*f_getSignBilanceList(dp.nl_poradiList)*/
    END nd_castkaczk,
    zd.id_ktgspolecnost ID_PROTISTRANA,
    (SELECT s_nazev FROM kp_ktg_spolecnost WHERE ID = zd.id_ktgspolecnost
    ) protistrana,
    d.dt_datum,
    --            s.ID id_ktgucetnispolecnost ID_UCETNISPOLECNOST,
    s.ID ID_UCETNISPOLECNOST,
    ---            dp.nl_poradilist,
    zd.datum,
    l.s_locale,
    s.id_cissubject,
    zd.s_ucet,
    ---            zd.id_ktgprojekt, zd.id_ktgodbor,
    zd.s_faktura,
    /*(select tt.s_kod || ' - ' || tt.S_POPIS
    from kp_def_budgetMustek m,
    kp_cis_typTransakce tt
    where s.ID_CISSUBJECT = M.ID_CISSUBJECT
    AND zd.S_UCET LIKE M.S_UCET||'%'
    and tt.ID = m.ID_CISTYPTRANSAKCE
    and zd.datum between tt.dt_platnostOd and tt.dt_platnostDo)*/
    f_gettyptransakceucet (s.id_cissubject, zd.datum, zd.s_ucet ) typtransakce,
    zd.xidsl
  FROM kp_dat_doklad d,
    kp_rel_doklad_zdrojdat rel,
    kp_dat_dokladzdrojdat zd,
    kp_ktg_ucetnispolecnost s,
    kp_dat_dokladpolozka dp,
    cis_locale l
  WHERE d.nl_krok             IN (1, 2)
  AND d.c_basedoklad           = '1'
  AND d.ID                     = rel.id_doklad
  AND rel.id_dokladzdrojdat    = zd.ID
  AND d.id_ktgucetnispolecnost = s.ID
  AND rel.id_dokladpolozka     = dp.ID
  AND s.ID_CISKATSPOL      IN (5,10,12,15)
  AND s.dt_datumarchivace     IS NULL
  AND d.dt_datum               > to_date('01.01.2009','DD.MM.YYYY')
    --and d.dt_vytvoreno > trunc(sysdate)
    --ORDER BY s.s_nazev, zd.datum;;

   COMMENT ON TABLE "DB_JT"."QV_KP_DOKLADDETAIL_DSLR_CL"  IS 'esc:07/2019  QV Extended '
;


PROMPT Completed QV_KP_DOKLADDETAIL_DSLR_CL.sql
PROMPT


-- ============================================================================
-- Deploy: QV_KP_DOKLADDETAIL_DSLR_CTRL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_KP_DOKLADDETAIL_DSLR_CTRL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_KP_DOKLADDETAIL_DSLR_CTRL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_KP_DOKLADDETAIL_DSLR_CTRL" ("LIST", "ICO_SPOL", "ID_ODBOR", "ID_PROJEKT", "UCET_ORIGINAL", "UZAVREN", "ID_HOLDING_PROTISTRANA", "ID", "S_NAZEV", "NL_RADEK", "TEXTRADEK", "S_POPIS", "ND_CASTKAMENA", "S_MENA", "ND_CASTKALOCAL", "S_MENAUCSPOL", "ND_CASTKACZK", "ID_PROTISTRANA", "PROTISTRANA", "DT_DATUM", "ID_UCETNISPOLECNOST", "DATUM", "S_LOCALE", "ID_CISSUBJECT", "S_UCET", "S_FAKTURA", "TYPTRANSAKCE", "XIDSL") AS 
  SELECT dp.nl_poradilist List,
    s.s_ico ICO_SPOL,
    zd.id_ktgodbor ID_ODBOR,
    zd.id_ktgprojekt ID_PROJEKT,
    zd.s_ucetoriginal UCET_ORIGINAL,
    (SELECT DECODE(c_zamceno,1,'ANO','NE')
    FROM KP_DAT_GENEROVANIZAMEK gz
    WHERE gz.id_ktgucetnispolecnost = s.ID
    AND gz.DT_DATUM                 = d.DT_DATUM
    AND ID_CISZAMEK                 = 1
    ) UZAVREN ,---ucetni
    s.id_mngsegment ID_HOLDING_PROTISTRANA,
    ---d.dt_datum,
    zd.ID,
    s.s_nazev,
    dp.nl_radek,
    --f_getbunkatext (rel.id_dokladpolozka, l.s_locale) textradek,
    f_getUcetUnifPopis( zd.id_cisUcetUnif, l.s_locale) textradek,
    zd.s_popis,
    DECODE (zd.c_strana, 'D', -1, 1) * zd.nd_castkamena
    /*f_getSignBilanceList(dp.nl_poradiList)*/
    nd_castkamena,
    zd.s_mena zd_s_mena,
    DECODE (zd.c_strana, 'D', -1, 1) * zd.nd_castkalocal
    /*f_getSignBilanceList(dp.nl_poradiList)*/
    nd_castkalocal,
    s.s_mena s_s_mena,
    CASE
      WHEN (s.s_mena <> 'CZK')
      THEN DECODE (zd.c_strana, 'D', -1, 1) * zd.nd_castkalocal
        /*f_getSignBilanceList(dp.nl_poradiList)*/
                                     / f_getquestorkurs (s.s_mena, d.dt_datum)
      ELSE DECODE (zd.c_strana, 'D', -1, 1) * zd.nd_castkalocal
        /*f_getSignBilanceList(dp.nl_poradiList)*/
    END nd_castkaczk,
    zd.id_ktgspolecnost ID_PROTISTRANA,
    (SELECT s_nazev FROM kp_ktg_spolecnost WHERE ID = zd.id_ktgspolecnost
    ) protistrana,
    d.dt_datum,
    --            s.ID id_ktgucetnispolecnost ID_UCETNISPOLECNOST,
    s.ID ID_UCETNISPOLECNOST,
    ---            dp.nl_poradilist,
    zd.datum,
    l.s_locale,
    s.id_cissubject,
    zd.s_ucet,
    ---            zd.id_ktgprojekt, zd.id_ktgodbor,
    zd.s_faktura,
    /*(select tt.s_kod || ' - ' || tt.S_POPIS
    from kp_def_budgetMustek m,
    kp_cis_typTransakce tt
    where s.ID_CISSUBJECT = M.ID_CISSUBJECT
    AND zd.S_UCET LIKE M.S_UCET||'%'
    and tt.ID = m.ID_CISTYPTRANSAKCE
    and zd.datum between tt.dt_platnostOd and tt.dt_platnostDo)*/
    f_gettyptransakceucet (s.id_cissubject, zd.datum, zd.s_ucet ) typtransakce,
    zd.xidsl
  FROM kp_dat_doklad d,
    kp_rel_doklad_zdrojdat rel,
    kp_dat_dokladzdrojdat zd,
    kp_ktg_ucetnispolecnost s,
    kp_dat_dokladpolozka dp,
    cis_locale l
  WHERE d.nl_krok             IN (1, 2)
  AND d.c_basedoklad           = '1'
  AND d.ID                     = rel.id_doklad
  AND rel.id_dokladzdrojdat    = zd.ID
  AND d.id_ktgucetnispolecnost = s.ID
  AND rel.id_dokladpolozka     = dp.ID
  AND s.ID_CISKATSPOL NOT     IN (5,10,12,15)
  AND s.dt_datumarchivace     IS NULL
 -- AND d.dt_datum               > to_date('01.12.2012','DD.MM.YYYY')
  AND d.dt_datum               > to_date('01.01.2018','DD.MM.YYYY');

   COMMENT ON TABLE "DB_JT"."QV_KP_DOKLADDETAIL_DSLR_CTRL"  IS 'esc:07/2019  QV Standart '
;


PROMPT Completed QV_KP_DOKLADDETAIL_DSLR_CTRL.sql
PROMPT


-- ============================================================================
-- Deploy: QV_KP_DOKLADDETAIL_DSLR_CTRLC1.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_KP_DOKLADDETAIL_DSLR_CTRLC1.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_KP_DOKLADDETAIL_DSLR_CTRLC1
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_KP_DOKLADDETAIL_DSLR_CTRLC1" ("LIST", "ICO_SPOL", "ID_ODBOR", "ID_PROJEKT", "UCET_ORIGINAL", "UZAVREN", "ID_HOLDING_PROTISTRANA", "ID", "S_NAZEV", "NL_RADEK", "TEXTRADEK", "S_POPIS", "ND_CASTKAMENA", "S_MENA", "ND_CASTKALOCAL", "S_MENAUCSPOL", "ND_CASTKACZK", "ID_PROTISTRANA", "PROTISTRANA", "DT_DATUM", "ID_UCETNISPOLECNOST", "DATUM", "S_LOCALE", "ID_CISSUBJECT", "S_UCET", "S_FAKTURA", "TYPTRANSAKCE", "XIDSL") AS 
  WITH
    d_period as (
      SELECT d.id,
             d.id_ktgucetnispolecnost,
             d.dt_datum
        FROM kp_dat_doklad d
       WHERE d.dt_datum > to_date('01.01.2018','DD.MM.YYYY')
         AND d.dt_datum IN ( SELECT period
                             FROM db_jt.qv_controlling_data
                             WHERE archive = 1)
         AND d.nl_krok  IN (1, 2)
         AND d.c_basedoklad = '1'
    ),

  zdrojdat as (
    SELECT d.id,
           d.dt_datum,
           d.id_ktgucetnispolecnost,
           rel.id_dokladzdrojdat,
           rel.id_dokladpolozka
      FROM kp_rel_doklad_zdrojdat rel
      JOIN d_period d ON d.id = rel.id_doklad
  ),

  doklad as (
    SELECT d.id,
           d.id_ktgucetnispolecnost,
           s.s_ico ICO_SPOL,
           DECODE(gz.c_zamceno,1,'ANO','NE') UZAVREN,
           s.id_mngsegment ID_HOLDING_PROTISTRANA,
           s.s_nazev,
           s.s_mena,
           d.dt_datum,
           s.ID ID_UCETNISPOLECNOST,
           s.id_cissubject,
           d.id_dokladzdrojdat,
           d.id_dokladpolozka
      FROM zdrojdat d
      JOIN kp_ktg_ucetnispolecnost s ON d.id_ktgucetnispolecnost = s.ID
      LEFT JOIN KP_DAT_GENEROVANIZAMEK gz ON gz.id_ktgucetnispolecnost = s.ID AND gz.DT_DATUM = d.DT_DATUM AND gz.ID_CISZAMEK = 1
     WHERE s.ID_CISKATSPOL NOT IN (5,10,12,15)
       AND s.dt_datumarchivace IS NULL
   )

 SELECT dp.nl_poradilist List,
       d.ICO_SPOL,
       zd.id_ktgodbor ID_ODBOR,
       zd.id_ktgprojekt ID_PROJEKT,
       zd.s_ucetoriginal UCET_ORIGINAL,
       d.UZAVREN,
       d.ID_HOLDING_PROTISTRANA,
       zd.ID,
       d.s_nazev,
       dp.nl_radek,
       f_getUcetUnifPopis( zd.id_cisUcetUnif, 'cs_CZ') textradek,      -- len 'cs_CZ'
       zd.s_popis,
       DECODE (zd.c_strana, 'D', -1, 1) * zd.nd_castkamena   nd_castkamena,
       zd.s_mena zd_s_mena,
       DECODE (zd.c_strana, 'D', -1, 1) * zd.nd_castkalocal nd_castkalocal,
       d.s_mena s_s_mena,
       CASE
         WHEN (d.s_mena <> 'CZK')
           THEN
             DECODE (zd.c_strana, 'D', -1, 1) * zd.nd_castkalocal / f_getquestorkurs (d.s_mena, d.dt_datum)
           ELSE
             DECODE (zd.c_strana, 'D', -1, 1) * zd.nd_castkalocal
       END nd_castkaczk,
       zd.id_ktgspolecnost ID_PROTISTRANA,
      s.s_nazev protistrana,
      d.dt_datum,
      d.ID ID_UCETNISPOLECNOST,
      zd.datum,
      'cs_CZ' as  s_locale,     -- len 'cs_CZ'
      d.id_cissubject,
      zd.s_ucet,
      zd.s_faktura,
      f_gettyptransakceucet (d.id_cissubject, zd.datum, zd.s_ucet ) typtransakce,
      zd.xidsl
    FROM doklad d
 JOIN kp_dat_dokladzdrojdat zd ON d.id_dokladzdrojdat    = zd.ID
 JOIN kp_dat_dokladpolozka dp ON d.id_dokladpolozka     = dp.ID
 LEFT JOIN kp_ktg_spolecnost s ON  s.ID = zd.id_ktgspolecnost

;


PROMPT Completed QV_KP_DOKLADDETAIL_DSLR_CTRLC1.sql
PROMPT


-- ============================================================================
-- Deploy: QV_KP_DOKLADDETAIL_DSLR_CTRLCZ.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_KP_DOKLADDETAIL_DSLR_CTRLCZ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_KP_DOKLADDETAIL_DSLR_CTRLCZ
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_KP_DOKLADDETAIL_DSLR_CTRLCZ" ("LIST", "ICO_SPOL", "ID_ODBOR", "ID_PROJEKT", "UCET_ORIGINAL", "UZAVREN", "ID_HOLDING_PROTISTRANA", "ID", "S_NAZEV", "NL_RADEK", "TEXTRADEK", "S_POPIS", "ND_CASTKAMENA", "S_MENA", "ND_CASTKALOCAL", "S_MENAUCSPOL", "ND_CASTKACZK", "ID_PROTISTRANA", "PROTISTRANA", "DT_DATUM", "ID_UCETNISPOLECNOST", "DATUM", "S_LOCALE", "ID_CISSUBJECT", "S_UCET", "S_FAKTURA", "TYPTRANSAKCE", "XIDSL") AS 
  WITH
  zdrojdat as (
    SELECT d.id,
           d.dt_datum,
           d.id_ktgucetnispolecnost,
           rel.id_dokladzdrojdat,
           rel.id_dokladpolozka
      FROM kp_rel_doklad_zdrojdat rel
      JOIN kp_dat_doklad d ON d.id = rel.id_doklad
     WHERE d.dt_datum > to_date('01.01.2018','DD.MM.YYYY')
       AND d.nl_krok  IN (1, 2)
       AND d.c_basedoklad = '1'
  ),

  doklad as (
    SELECT d.id,
           d.id_ktgucetnispolecnost,
           s.s_ico ICO_SPOL,
           DECODE(gz.c_zamceno,1,'ANO','NE') UZAVREN,
           s.id_mngsegment ID_HOLDING_PROTISTRANA,
           s.s_nazev,
           s.s_mena,
           d.dt_datum,
           s.ID ID_UCETNISPOLECNOST,
           s.id_cissubject,
           d.id_dokladzdrojdat,
           d.id_dokladpolozka
      FROM zdrojdat d
      JOIN kp_ktg_ucetnispolecnost s ON d.id_ktgucetnispolecnost = s.ID
      LEFT JOIN KP_DAT_GENEROVANIZAMEK gz ON gz.id_ktgucetnispolecnost = s.ID AND gz.DT_DATUM = d.DT_DATUM   AND gz.ID_CISZAMEK    = 1
     WHERE s.ID_CISKATSPOL NOT IN (5,10,12,15)
       AND s.dt_datumarchivace IS NULL
   )

 SELECT dp.nl_poradilist List,
       d.ICO_SPOL,
       zd.id_ktgodbor ID_ODBOR,
       zd.id_ktgprojekt ID_PROJEKT,
       zd.s_ucetoriginal UCET_ORIGINAL,
       d.UZAVREN,
       d.ID_HOLDING_PROTISTRANA,
       zd.ID,
       d.s_nazev,
       dp.nl_radek,
       f_getUcetUnifPopis( zd.id_cisUcetUnif, 'cs_CZ') textradek,      -- len 'cs_CZ'
       zd.s_popis,
       DECODE (zd.c_strana, 'D', -1, 1) * zd.nd_castkamena   nd_castkamena,
       zd.s_mena zd_s_mena,
       DECODE (zd.c_strana, 'D', -1, 1) * zd.nd_castkalocal nd_castkalocal,
       d.s_mena s_s_mena,
       CASE
         WHEN (d.s_mena <> 'CZK')
           THEN
             DECODE (zd.c_strana, 'D', -1, 1) * zd.nd_castkalocal / f_getquestorkurs (d.s_mena, d.dt_datum)
           ELSE
             DECODE (zd.c_strana, 'D', -1, 1) * zd.nd_castkalocal
       END nd_castkaczk,
       zd.id_ktgspolecnost ID_PROTISTRANA,
      s.s_nazev protistrana,
      d.dt_datum,
      d.ID ID_UCETNISPOLECNOST,
      zd.datum,
      'cs_CZ' as  s_locale,    -- len 'cs_CZ'
      d.id_cissubject,
      zd.s_ucet,
      zd.s_faktura,
      f_gettyptransakceucet (d.id_cissubject, zd.datum, zd.s_ucet ) typtransakce,
      zd.xidsl
    FROM doklad d
 JOIN kp_dat_dokladzdrojdat zd ON d.id_dokladzdrojdat    = zd.ID
 JOIN kp_dat_dokladpolozka dp ON d.id_dokladpolozka     = dp.ID
 LEFT JOIN kp_ktg_spolecnost s ON s.ID = zd.id_ktgspolecnost

;


PROMPT Completed QV_KP_DOKLADDETAIL_DSLR_CTRLCZ.sql
PROMPT


-- ============================================================================
-- Deploy: QV_KP_DOKLADSTRUKTURA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_KP_DOKLADSTRUKTURA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_KP_DOKLADSTRUKTURA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_KP_DOKLADSTRUKTURA" ("LIST", "RADEKTEXT", "LISTPORADI", "NL_RADEK", "C_TYP", "ID_KTGDEFLISTBUNKA", "ID_KTGDEFLISTBUNKAOPRAVNA", "S_LOCALE", "ID_CISDOKLAD") AS 
  select "LIST","RADEKTEXT","LISTPORADI","NL_RADEK","C_TYP","ID_KTGDEFLISTBUNKA","ID_KTGDEFLISTBUNKAOPRAVNA","S_LOCALE","ID_CISDOKLAD" from VW_KP_DOKLADSTRUKTURA
;


PROMPT Completed QV_KP_DOKLADSTRUKTURA.sql
PROMPT


-- ============================================================================
-- Deploy: QV_KTG_APPUSER.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_KTG_APPUSER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_KTG_APPUSER
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_KTG_APPUSER" ("ID", "S_USERID", "S_KRESTNI", "S_PRIJMENI", "S_USERNAME", "C_ARCHIVNI", "C_EXTERNI") AS 
  select  ID, S_USERID, S_KRESTNI, S_PRIJMENI, S_USERNAME, C_ARCHIVNI, C_EXTERNI
from KTG_APPUSER
;


PROMPT Completed QV_KTG_APPUSER.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/QV_LOG_GENEROVANIZAMEK.sql: 'utf-8' codec can't decode byte 0xed in position 398: invalid continuation byte


-- ============================================================================
-- Deploy: QV_LOG_GENEROVANIZAMEKPROTOKOL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_LOG_GENEROVANIZAMEKPROTOKOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_LOG_GENEROVANIZAMEKPROTOKOL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_LOG_GENEROVANIZAMEKPROTOKOL" ("DT_DATUM", "NL_KROK", "AKCE", "UROVEN", "S_UZIVATEL", "DT_TIMESTAMP", "S_DUVOD", "ID_KTGUCETNISPOLECNOST", "S_NAZEV", "S_ICO", "ID_DOKLAD", "SOUBOR", "DT_VYTVORENO", "S_NAZEV_SKUPINA4") AS 
  select "DT_DATUM","NL_KROK","AKCE","UROVEN","S_UZIVATEL","DT_TIMESTAMP","S_DUVOD","ID_KTGUCETNISPOLECNOST","S_NAZEV","S_ICO","ID_DOKLAD","SOUBOR","DT_VYTVORENO","S_NAZEV_SKUPINA4" from VW_LOG_GENEROVANIZAMEKPROTOKOL
;


PROMPT Completed QV_LOG_GENEROVANIZAMEKPROTOKOL.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/QV_ODBOR_OO.sql: 'utf-8' codec can't decode byte 0xc8 in position 743: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/QV_REPB_DOKLADDETAIL.sql: 'utf-8' codec can't decode byte 0xc8 in position 2840: invalid continuation byte


-- ============================================================================
-- Deploy: QV_REP_PROTISTRANY_CONTROLLING.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_REP_PROTISTRANY_CONTROLLING.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_REP_PROTISTRANY_CONTROLLING
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_REP_PROTISTRANY_CONTROLLING" ("ID", "S_ICO", "S_NAZEV", "S_POM_ICO", "S_COUNTRY", "C_INDICATOR_PC", "S_EKONOM_SEKTOR", "KATEGORIEKOEF", "S_OKEC", "ID_KTGSPOLECNOST", "S_HLAVNIUCETNISKUPINA", "S_KODKATEGORIEPROTISTRANA", "C_LICENCE", "C_LIKVIDACE", "C_SPOLECNERIZENY", "DT_DATUMZALOZENI", "S_ULICE", "S_PSC", "S_MESTO", "S_DIC", "S_UCETSCP", "S_REGRMS", "DT_QUESTORUPDATE", "ID_KTG_EXTERNIRATING", "C_ZONA", "ID_UCETNISYSTEM", "S_ZVLASTNIVZTAHKJINEMUCLENURKC", "C_EVIEXTDODAVATEL", "C_SKUPINAIC", "C_VPRECHODU", "S_KODKATEGORIEPROTISTRANA_2", "S_DBLINK", "ID_PROTISTRANA", "ID_DATABAZE", "ID_SPOLECNOST", "S_ICO_PR", "S_NAZEV_PR", "S_NUMBER0", "FIRMA_ID", "EO_ID", "BANKA_ID", "DOID", "KID", "PLATINST", "AKCE", "DT_ZMENA", "S_POM_ICO_PR", "EID", "DATUMZALOZENI", "ULICE", "PSC", "MESTO", "STAT", "DIC", "UCETSCP", "REGRMS", "EKONOM_SEKTOR", "TYPOSOBY") AS 
  select "ID","S_ICO","S_NAZEV","S_POM_ICO","S_COUNTRY","C_INDICATOR_PC","S_EKONOM_SEKTOR","KATEGORIEKOEF","S_OKEC","ID_KTGSPOLECNOST","S_HLAVNIUCETNISKUPINA","S_KODKATEGORIEPROTISTRANA","C_LICENCE","C_LIKVIDACE","C_SPOLECNERIZENY","DT_DATUMZALOZENI","S_ULICE","S_PSC","S_MESTO","S_DIC","S_UCETSCP","S_REGRMS","DT_QUESTORUPDATE","ID_KTG_EXTERNIRATING","C_ZONA","ID_UCETNISYSTEM","S_ZVLASTNIVZTAHKJINEMUCLENURKC","C_EVIEXTDODAVATEL","C_SKUPINAIC","C_VPRECHODU","S_KODKATEGORIEPROTISTRANA_2","S_DBLINK","ID_PROTISTRANA","ID_DATABAZE","ID_SPOLECNOST","S_ICO_PR","S_NAZEV_PR","S_NUMBER0","FIRMA_ID","EO_ID","BANKA_ID","DOID","KID","PLATINST","AKCE","DT_ZMENA","S_POM_ICO_PR","EID","DATUMZALOZENI","ULICE","PSC","MESTO","STAT","DIC","UCETSCP","REGRMS","EKONOM_SEKTOR","TYPOSOBY" from VW_REP_PROTISTRANY_CONTROLLING
;


PROMPT Completed QV_REP_PROTISTRANY_CONTROLLING.sql
PROMPT


-- ============================================================================
-- Deploy: QV_RKC_UVEROVE_POZICE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_RKC_UVEROVE_POZICE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_RKC_UVEROVE_POZICE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_RKC_UVEROVE_POZICE" ("S_UCET", "ND_CASTKAMENA", "ND_CASTKALOCAL", "S_MENA", "S_UNIFPROTI_ICO", "S_UNIFPROTI", "ID_DOKLAD", "S_LISTGROUP", "S_POPIS", "ND_KATEGORIE_KOEF", "NAZEV_SPOL", "MENA_SPOL", "ND_CASTKACNB", "S_LISTGROUPCODE", "S_LOCALE", "S_UCETUNIF", "ID_UNIFPROTI", "S_POPISORIGINAL", "C_BANKA", "ND_CISTAANGAZOVANOST") AS 
  SELECT  
       VwKpDokladuverovapozice2011.S_UCET, 
       VwKpDokladuverovapozice2011.ND_CASTKAMENA, 

       VwKpDokladuverovapozice2011.ND_CASTKALOCAL, 
       VwKpDokladuverovapozice2011.S_MENA, 

       VwKpDokladuverovapozice2011.S_UNIFPROTI_ICO, 
       
       VwKpDokladuverovapozice2011.S_UNIFPROTI, 
       VwKpDokladuverovapozice2011.ID_DOKLAD, 

       VwKpDokladuverovapozice2011.S_LISTGROUP, 
       VwKpDokladuverovapozice2011.S_POPIS, 

       VwKpDokladuverovapozice2011.ND_KATEGORIE_KOEF, 
     
       db_jt.f_getSpolecnostDoklad(VwKpDokladuverovapozice2011.id_doklad) AS NAZEV_SPOL, 
       db_jt.f_getMenaDoklad(VwKpDokladuverovapozice2011.id_doklad)      AS MENA_SPOL, 
       VwKpDokladuverovapozice2011.ND_CASTKACNB, 

       VwKpDokladuverovapozice2011.S_LISTGROUPCODE, 
       
       VwKpDokladuverovapozice2011.S_LOCALE, 
       VwKpDokladuverovapozice2011.S_UCETUNIF, 

       VwKpDokladuverovapozice2011.ID_UNIFPROTI, 
       VwKpDokladuverovapozice2011.S_POPISORIGINAL, 
       F_IS_PROTI_BANKA(ID_DOKLAD,ID_UNIFPROTI)  C_BANKA,
--       DECODE( (  F_ISSPOLECNOSTFEIS_DOKLAD(ID_DOKLAD) AND F_ISBANKA(ID_UNIFPROTI)      )  ,'Y',     nvl(VwKpDokladuverovapozice2011.C_BANKA,'N')),
       /*CASE (  (S_LISTGROUPCODE ='1') AND F_ISSPOLECNOSTFEIS_DOKLAD(ID_DOKLAD) AND F_ISBANKA(ID_UNIFPROTI)      )       
            WHEN  TRUE  THEN 'Y'                
            ELSE  nvl(VwKpDokladuverovapozice2011.C_BANKA,'N')
       END C_BANKA,
       */
      --VwKpDokladuverovapozice2011.ND_CISTAANGAZOVANOST"   
       --nvl(VwKpDokladuverovapozice2011.C_BANKA,'N'),
      (decode (ID_UNIFPROTI,29390,0 ,46033,0 ,29419,0, nvl(ND_CASTKACNB,0) * nvl(ND_KATEGORIE_KOEF,0)) ) ND_CISTAANGAZOVANOST      
FROM VW_KP_DOKLADUVEROVAPOZICE VwKpDokladuverovapozice2011
WHERE
ID_DOKLAD IN ( 
              select distinct d.id 
              from db_jt.kp_rel_subkonsolidaceclen c, 
                   db_jt.kp_ktg_subkonsolidace     s, 
	                 db_jt.kp_ktg_ucetniSpolecnost  us, 
	                 DB_JT.KP_DAT_DOKLAD            D 
              where us.id = c.id_ktgUcetniSpolecnost 
                and s.id_ktgUcetniSpolecnost = c.id_ktgsubkonsolidace 
                and c.c_clen = '1' 
                and c.ID_CISSUBTYPCLENSTVI <> 3 
                and s.id_ktgUcetniSkupina = 1 -- RKC"+ucSkup+" 
                and D.ID_KTGUCETNISPOLECNOST = US.ID 
                AND D.DT_DATUM = TO_DATE('31.07.2013','DD.MM.YYYY') 
                --AND D.DT_DATUM = TO_DATE('"+dateString+"','DD.MM.YYYY') 
                AND (D.DT_DATUM >= C.DT_ClenstviOD OR C.DT_ClenstviOD IS NULL) 
                AND (D.DT_DATUM <= C.DT_ClenstviDO OR C.DT_ClenstviDO IS NULL) 
                AND D.NL_KROK IN (1,2) AND D.C_BASEDOKLAD = '1'
              ) 
AND S_LOCALE = 'cs_CZ' 
AND (
       S_LISTGROUPCODE like 'S3'
    OR S_LISTGROUPCODE like 'N%' 
    OR S_LISTGROUPCODE IS NULL
    )
;


PROMPT Completed QV_RKC_UVEROVE_POZICE.sql
PROMPT


-- ============================================================================
-- Deploy: QV_UCET_UNIF_INFO.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_UCET_UNIF_INFO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_UCET_UNIF_INFO
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_UCET_UNIF_INFO" ("ID_CISUCETUNIF", "S_LOCALE", "S_POPIS", "S_UCET", "ID", "C_POCITATVAZBY", "C_CLASS", "UCET_UNIF_KLASIFIKACE", "C_SHARES", "C_MULTISEGMENT", "C_COUNTRY", "C_TYPECOUNTERPARTIES", "ND_LIMITCOUNTERPARTIESDETAL", "C_MATURITY") AS 
  Select KpCisUcetuniflang.ID_CISUCETUNIF, 
       KpCisUcetuniflang.S_LOCALE, 

       KpCisUcetuniflang.S_POPIS, 
       KpCisUcetunif.S_UCET, 

       KpCisUcetunif.ID, 
       KpCisUcetunif.C_POCITATVAZBY, 

       KpCisUcetunif.C_CLASS, 
        uclas.s_popis UCET_UNIF_KLASIFIKACE,       
       KpCisUcetunif.C_SHARES, 

       KpCisUcetunif.C_MULTISEGMENT, 
       KpCisUcetunif.C_COUNTRY, 

       KpCisUcetunif.C_TYPECOUNTERPARTIES, 
       KpCisUcetunif.ND_LIMITCOUNTERPARTIESDETAL, 

       KpCisUcetunif.C_MATURITY
   From DB_JT.KP_CIS_UCETUNIFLANG KpCisUcetuniflang, 
        DB_JT.KP_CIS_UCETUNIF KpCisUcetunif,
        DB_JT.KP_CIS_UCETUNIFCLASS uclas
   Where KpCisUcetuniflang.ID_CISUCETUNIF = KpCisUcetunif.ID
   and uclas.c_class = KPCISUCETUNIF.C_CLASS
;


PROMPT Completed QV_UCET_UNIF_INFO.sql
PROMPT


-- ============================================================================
-- Deploy: QV_UNIFIKOVANA_BILANCE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_UNIFIKOVANA_BILANCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_UNIFIKOVANA_BILANCE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_UNIFIKOVANA_BILANCE" ("LISTPORADI", "LIST", "NL_RADEK", "RADEKTEXT", "S_UCET", "ID_DEFLISTBUNKA") AS 
  select distinct str.LISTPORADI, str.LIST, str.NL_RADEK, str.RADEKTEXT , def.S_UCET, def.ID_DEFLISTBUNKA --, def.ID_KTGDOKLAD, str.C_TYP 
from 
      VW_KP_MUSTEKBUNKADEFINICEUCTU  def,
      VW_KP_DOKLADSTRUKTURA   str
where
        str.S_LOCALE = 'cs_CZ'        
    and def.ID_DEFLISTBUNKA = str.ID_KTGDEFLISTBUNKA    --" + IdTmpktgdeflistbunka +
    and def.ID_KTGDOKLAD = 950 --unif bilance
order by listporadi, nl_radek, def.S_UCET
;


PROMPT Completed QV_UNIFIKOVANA_BILANCE.sql
PROMPT


-- ============================================================================
-- Deploy: QV_ZASTUPY_BUDGET.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_ZASTUPY_BUDGET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_ZASTUPY_BUDGET
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_ZASTUPY_BUDGET" ("ID_KOHO", "KOHO_USERID", "KOHO_USERNAME", "ID_KDO", "KDO_USERID", "KDO_USERNAME", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "C_FWDEMAIL", "ID_BUDGET", "ID_KTGODBOR") AS 
  select 
        bz.ID_KOHO,  usrkoho.s_userid KOHO_USERID, usrkoho.s_username KOHO_USERNAME,
        bz.ID_KDO,   usrkdo.S_USERID KDO_USERID, usrkdo.S_USERNAME KDO_USERNAME,
        bz.dt_platnostod, bz.DT_PLATNOSTDO
        ,bz.C_FWDEMAIL
        ,bz.ID_BUDGET
        ,bud.ID_KTGODBOR
from    KP_DAT_BUDGETZASTUP  bz
join  KTG_APPUSER usrkdo
    on bz.ID_KDO = usrkdo.id
join  KTG_APPUSER usrkoho
    on bz.ID_KOHO = usrkoho.id
left join KP_DAT_BUDGET  bud
    on bz.ID_BUDGET = bud.id
;


PROMPT Completed QV_ZASTUPY_BUDGET.sql
PROMPT


-- ============================================================================
-- Deploy: QV_ZASTUPY_SL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying QV_ZASTUPY_SL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View QV_ZASTUPY_SL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."QV_ZASTUPY_SL" ("ID_KOHO", "KOHO_USERID", "KOHO_USERNAME", "ID_KDO", "KDO_USERID", "KDO_USERNAME", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "C_FWDEMAIL") AS 
  select 
        dz.ID_KOHO,  usrkoho.s_userid KOHO_USERID, usrkoho.s_username KOHO_USERNAME,
        dz.ID_KDO,   usrkdo.S_USERID KDO_USERID, usrkdo.S_USERNAME KDO_USERNAME,
        dt_platnostod, dz.DT_PLATNOSTDO
        ,dz.C_FWDEMAIL
from    KP_DAT_DOCZASTUP  dz
join  KTG_APPUSER usrkdo
    on dz.ID_KDO = usrkdo.id
join  KTG_APPUSER usrkoho
    on dz.ID_KOHO = usrkoho.id
;


PROMPT Completed QV_ZASTUPY_SL.sql
PROMPT


-- ============================================================================
-- Deploy: TEST_OL_UVEROVAPOZICE_KAPITAL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying TEST_OL_UVEROVAPOZICE_KAPITAL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View TEST_OL_UVEROVAPOZICE_KAPITAL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."TEST_OL_UVEROVAPOZICE_KAPITAL" ("KAPITAL", "KURZ") AS 
  select max(nd_castka) as kapital,max(kurz) as kurz from(
SELECT nd_castka, Cast('' as decimal(18,2)) as kurz 
FROM db_jt.vw_ext_kpdatkapitalskupiny kpdatkapitalskupiny 
WHERE dt_platnostod = 
          (SELECT MAX (k.dt_platnostod) 
            FROM db_jt.vw_ext_kpdatkapitalskupiny k 
        WHERE k.id_skupinapozice = kpdatkapitalskupiny.id_skupinapozice 
              AND k.dt_platnostod <= TRUNC(SYSDATE-1))
union all
select null,ND_KURZ from (
select * from DAT_KURZLIST 
where 
DAT_KURZLIST.ID_CISMENA = 'EUR'
order by dt_datum desc)
where rownum = 1
 )
;


PROMPT Completed TEST_OL_UVEROVAPOZICE_KAPITAL.sql
PROMPT


-- ============================================================================
-- Deploy: VVV.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VVV.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VVV
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VVV" ("DT_DATUM", "ID_KTGUCETNISPOLECNOST", "S_UCETUNIF", "S_MENA", "CL", "CM", "ID_KTGUCETNISPOLECNOSTTO", "ID_SEGMENT", "S_KOD", "PORADI") AS 
  select mis.DT_DATUM,
	   mis.ID_KTGUCETNISPOLECNOST,
	   nvl(uu.S_UCET,mis.S_UCET) s_ucetUnif,
	   mis.S_MENA,
	   decode(uu.c_class,'A',1,'3',1,-1)*decode(mis.C_STRANA,'D',-1,1)*mis.ND_CASTKALOCAL cl,
	   decode(uu.c_class,'A',1,'3',1,-1)*decode(mis.C_STRANA,'D',-1,1)*mis.ND_CASTKAMENA cm,
	   (select distinct s.id_ktgSpolecnost
	    from db_jt.kp_ktg_spolecnost s,
			 db_jt.kp_rel_subkonsolidaceClen sub
		where s.id = mis.ID_KTGSPOLECNOST
		  and sub.ID_KTGUCETNISKUPINA = 8
		  and sub.ID_KTGUCETNISPOLECNOST = s.id_ktgSpolecnost
	   ) id_ktgUcetniSpolecnostTo,
	   null id_segment, f.s_kod, 1 poradi
from db_jt.kp_dat_misTransakce mis,
	 db_jt.kp_cis_ucetUnif uu,
    db_jt.kp_rel_ucetunifflow rf,
    db_jt.kp_cis_flow f
where
	rf.id_cisflow = f.id (+)  and
	uu.id = rf.id_cisucetunif (+) and
	mis.ID_CISUCETUNIF = uu.ID (+)
union all
--MULTISEGMENT
select mis.DT_DATUM,
	   mis.ID_KTGUCETNISPOLECNOST,
	   nvl(uu.S_UCET,mis.S_UCET) s_ucetUnif,
	   mis.S_MENA,
	   decode(uu.c_class,'A',1,'3',1,-1)*decode(mis.C_STRANA,'D',-1,1)*mis.ND_CASTKALOCAL,
	   decode(uu.c_class,'A',1,'3',1,-1)*decode(mis.C_STRANA,'D',-1,1)*mis.ND_CASTKAMENA,
	   (select distinct s.id_ktgSpolecnost
	    from db_jt.kp_ktg_spolecnost s,
			 db_jt.kp_rel_subkonsolidaceClen sub
		where s.id = mis.ID_KTGSPOLECNOST
		  and sub.ID_KTGUCETNISKUPINA = 8
		  and sub.ID_KTGUCETNISPOLECNOST = s.id_ktgSpolecnost
	   ) id_ktgUcetniSpolecnostTo,
	   cis.id_ktgSubkonsolidace, f.s_kod, 2
from db_jt.kp_dat_misTransakce mis,
	 db_jt.kp_ktg_projekt p,
	 db_jt.kp_cis_mngSegment cis,
	 db_jt.kp_cis_ucetUnif uu,
    db_jt.kp_rel_ucetunifflow rf,
    db_jt.kp_cis_flow f
where
	rf.id_cisflow = f.id (+)  and
	uu.id = rf.id_cisucetunif (+) and
	mis.id_ktgProjekt = p.id
  and p.id_mngSegment = cis.id
  and p.c_pouzitMngSegment = '1'
  and mis.ID_CISUCETUNIF = uu.ID (+)
union all
--IFRS-SUBSEGMENT
select mis.DT_DATUM,
	   mis.ID_KTGUCETNISPOLECNOST,
	   nvl(uu.S_UCET,mis.S_UCET) s_ucetUnif,
	   mis.S_MENA,
	   decode(uu.c_class,'A',1,'3',1,-1)*decode(mis.C_STRANA,'D',-1,1)*mis.ND_CASTKALOCAL,
	   decode(uu.c_class,'A',1,'3',1,-1)*decode(mis.C_STRANA,'D',-1,1)*mis.ND_CASTKAMENA,
	   (select distinct s.id_ktgSpolecnost
	    from db_jt.kp_ktg_spolecnost s,
			 db_jt.kp_rel_subkonsolidaceClen sub
		where s.id = mis.ID_KTGSPOLECNOST
		  and sub.ID_KTGUCETNISKUPINA = 8
		  and sub.ID_KTGUCETNISPOLECNOST = s.id_ktgSpolecnost
	   ) id_ktgUcetniSpolecnostTo,
	   cis.id_ktgSubkonsolidace, f.s_kod, 3
from db_jt.kp_dat_misTransakce mis,
	 db_jt.kp_ktg_projekt p,
	 db_jt.kp_cis_ifrsSubSegment cis,
	 db_jt.kp_cis_ucetUnif uu,
    db_jt.kp_rel_ucetunifflow rf,
    db_jt.kp_cis_flow f
where
	rf.id_cisflow = f.id (+)  and
	uu.id = rf.id_cisucetunif (+) and
	mis.id_ktgProjekt = p.id
  and p.id_ifrsSubSegment = cis.id
  and mis.ID_CISUCETUNIF = uu.ID (+)

;


PROMPT Completed VVV.sql
PROMPT


-- ============================================================================
-- Deploy: VVV2.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VVV2.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VVV2
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VVV2" ("DT_DATUM", "ID_KTGUCETNISPOLECNOST", "S_UCETUNIF", "S_MENA", "CL", "CM", "ID_KTGUCETNISPOLECNOSTTO", "ID_SEGMENT", "PORADI") AS 
  select mis.DT_DATUM,
	   mis.ID_KTGUCETNISPOLECNOST,
	   nvl(uu.S_UCET,mis.S_UCET) s_ucetUnif,
	   mis.S_MENA,
	   decode(uu.c_class,'A',1,'3',1,-1)*decode(mis.C_STRANA,'D',-1,1)*mis.ND_CASTKALOCAL cl,
	   decode(uu.c_class,'A',1,'3',1,-1)*decode(mis.C_STRANA,'D',-1,1)*mis.ND_CASTKAMENA cm,
	   (select distinct s.id_ktgSpolecnost
	    from db_jt.kp_ktg_spolecnost s,
			 db_jt.kp_rel_subkonsolidaceClen sub
		where s.id = mis.ID_KTGSPOLECNOST
		  and sub.ID_KTGUCETNISKUPINA = 8
		  and sub.ID_KTGUCETNISPOLECNOST = s.id_ktgSpolecnost
	   ) id_ktgUcetniSpolecnostTo,
	   null id_segment, 1 poradi
from db_jt.kp_dat_misTransakce mis,
	 db_jt.kp_cis_ucetUnif uu
where
	mis.ID_CISUCETUNIF = uu.ID (+)
union all
--MULTISEGMENT
select mis.DT_DATUM,
	   mis.ID_KTGUCETNISPOLECNOST,
	   nvl(uu.S_UCET,mis.S_UCET) s_ucetUnif,
	   mis.S_MENA,
	   decode(uu.c_class,'A',1,'3',1,-1)*decode(mis.C_STRANA,'D',-1,1)*mis.ND_CASTKALOCAL,
	   decode(uu.c_class,'A',1,'3',1,-1)*decode(mis.C_STRANA,'D',-1,1)*mis.ND_CASTKAMENA,
	   (select distinct s.id_ktgSpolecnost
	    from db_jt.kp_ktg_spolecnost s,
			 db_jt.kp_rel_subkonsolidaceClen sub
		where s.id = mis.ID_KTGSPOLECNOST
		  and sub.ID_KTGUCETNISKUPINA = 8
		  and sub.ID_KTGUCETNISPOLECNOST = s.id_ktgSpolecnost
	   ) id_ktgUcetniSpolecnostTo,
	   cis.id_ktgSubkonsolidace, 2
from db_jt.kp_dat_misTransakce mis,
	 db_jt.kp_ktg_projekt p,
	 db_jt.kp_cis_mngSegment cis,
	 db_jt.kp_cis_ucetUnif uu
where
	mis.id_ktgProjekt = p.id
  and p.id_mngSegment = cis.id
  and p.c_pouzitMngSegment = '1'
  and mis.ID_CISUCETUNIF = uu.ID (+)
union all
--IFRS-SUBSEGMENT
select mis.DT_DATUM,
	   mis.ID_KTGUCETNISPOLECNOST,
	   nvl(uu.S_UCET,mis.S_UCET) s_ucetUnif,
	   mis.S_MENA,
	   decode(uu.c_class,'A',1,'3',1,-1)*decode(mis.C_STRANA,'D',-1,1)*mis.ND_CASTKALOCAL,
	   decode(uu.c_class,'A',1,'3',1,-1)*decode(mis.C_STRANA,'D',-1,1)*mis.ND_CASTKAMENA,
	   (select distinct s.id_ktgSpolecnost
	    from db_jt.kp_ktg_spolecnost s,
			 db_jt.kp_rel_subkonsolidaceClen sub
		where s.id = mis.ID_KTGSPOLECNOST
		  and sub.ID_KTGUCETNISKUPINA = 8
		  and sub.ID_KTGUCETNISPOLECNOST = s.id_ktgSpolecnost
	   ) id_ktgUcetniSpolecnostTo,
	   cis.id_ktgSubkonsolidace, 3
from db_jt.kp_dat_misTransakce mis,
	 db_jt.kp_ktg_projekt p,
	 db_jt.kp_cis_ifrsSubSegment cis,
	 db_jt.kp_cis_ucetUnif uu
where
	mis.id_ktgProjekt = p.id
  and p.id_ifrsSubSegment = cis.id
  and mis.ID_CISUCETUNIF = uu.ID (+)

;


PROMPT Completed VVV2.sql
PROMPT


-- ============================================================================
-- Deploy: VW_AC_GARANTOVANEPROJEKTY.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_AC_GARANTOVANEPROJEKTY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_AC_GARANTOVANEPROJEKTY
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_AC_GARANTOVANEPROJEKTY" ("PROJEKT", "ID_KTGUCETNISPOLECNOST", "SPOLECNOST", "S_UCET", "ND_CASTKAMENA", "S_MENA", "ND_CASTKALOCAL", "DATUM", "KLIENT", "KLIENT_ICO", "PROTISTRANA", "S_POPIS") AS 
  select (select s_nazev from KP_KTG_PROJEKT pr where pr.ID = zd.ID_KTGPROJEKT) projekt, 
       d.ID_KTGUCETNISPOLECNOST, 
       (select s_nazev from kp_ktg_ucetniSpolecnost s where s.ID = d.ID_KTGUCETNISPOLECNOST) spolecnost, 
       zd.S_UCET, 
       zd.ND_CASTKAMENA, 
       zd.S_MENA, 
       zd.ND_CASTKALOCAL, 
       zd.datum, 
       (select s_nazev from kp_ktg_Spolecnost k where k.S_ICO = zd.S_EXTPROTISTRANAICO_EO) klient, 
       (select s_ico from kp_ktg_Spolecnost k where k.S_ICO = zd.S_EXTPROTISTRANAICO_EO) klient_ico, 
       (select s_nazev from kp_ktg_Spolecnost p where p.ID = zd.ID_KTGSPOLECNOST) protistrana, 
       zd.s_popis 
from (select d.ID_KTGUCETNISPOLECNOST, max(d.dt_datum) dt_datum, decode(trunc(max(d.DT_DATUMPOCSTAV)-1,'yyyy'), trunc(max(d.dt_datum),'yyyy'), max(d.DT_DATUMPOCSTAV)-1, null) dt_ps 
	  from kp_dat_doklad d 
	  where d.NL_KROK in (1,2) 
	  group by d.ID_KTGUCETNISPOLECNOST 
	  ) dMax, 
	 kp_dat_doklad d, 
	 kp_rel_doklad_zdrojDat rzd, 
	 kp_dat_dokladZdrojDat zd 
where d.ID_KTGUCETNISPOLECNOST = dMax.ID_KTGUCETNISPOLECNOST 
  and (d.DT_DATUM = dMax.DT_DATUM and zd.DATUM > dMax.dt_ps 
  	or d.DT_DATUM = dMax.dt_ps) 
  and d.C_BASEDOKLAD = '1' 
  and d.ID = rzd.ID_DOKLAD 
  and rzd.id_dokladZdrojDat = zd.ID 
  and zd.ID_KTGPROJEKT in (1002375, 1002376, 1002377,1002378, 1002379, 1002380) 
order by 1,3

;


PROMPT Completed VW_AC_GARANTOVANEPROJEKTY.sql
PROMPT


-- ============================================================================
-- Deploy: VW_AC_GESTORTRANSAKCE_HOLDING.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_AC_GESTORTRANSAKCE_HOLDING.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_AC_GESTORTRANSAKCE_HOLDING
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_AC_GESTORTRANSAKCE_HOLDING" ("ID", "ID_MNG", "S_POPIS_MNG", "ID_TRAN", "S_KOD_TRAN", "S_KOMENT_TRAN", "ID_USR", "S_NAME_USR") AS 
  select "ID","ID_MNG","S_POPIS_MNG","ID_TRAN","S_KOD_TRAN","S_KOMENT_TRAN","ID_USR","S_NAME_USR" from VW_REL_GESTORTRANSAKCE
;


PROMPT Completed VW_AC_GESTORTRANSAKCE_HOLDING.sql
PROMPT


-- ============================================================================
-- Deploy: VW_AC_GESTORTRANSAKCE_SPOL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_AC_GESTORTRANSAKCE_SPOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_AC_GESTORTRANSAKCE_SPOL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_AC_GESTORTRANSAKCE_SPOL" ("ID", "ID_SPOL", "S_NAZEV", "ID_TRAN", "S_KOD_TRAN", "S_KOMENT_TRAN", "ID_USR", "S_NAME_USR") AS 
  select "ID","ID_SPOL","S_NAZEV","ID_TRAN","S_KOD_TRAN","S_KOMENT_TRAN","ID_USR","S_NAME_USR" from VW_REL_GESTORTRANSAKCE_SPOL
;


PROMPT Completed VW_AC_GESTORTRANSAKCE_SPOL.sql
PROMPT


-- ============================================================================
-- Deploy: VW_AC_KLIENTIPB.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_AC_KLIENTIPB.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_AC_KLIENTIPB
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_AC_KLIENTIPB" ("S_ICO", "S_NAZEV", "S_ULICE", "S_MESTO", "S_PSC", "S_STAT", "C_PERSONCORP", "S_PRIVATNIBANKER", "NUMBER0", "NUMBER0_SK", "KID", "ID_EPERSPEKTIVA", "SHORT_NAME", "S_SPRAVCE", "S_KO", "S_POM_ICO") AS 
  select nvl(k.s_icoBezNul,k.s_ico), 
       k.S_NAZEV, 
	   k.S_ULICE, 
	   k.S_MESTO, 
	   k.S_PSC, 
	   k.S_STAT, 
	   k.C_PERSONCORP, 
	   k.S_PRIVATNIBANKER, 
	   k.NUMBER0, 
	   k.number0_sk, 
	   k.KID, 
	   k.ID_EPERSPEKTIVA, 
	   --k.STREDISKO, 
	   k.SHORT_NAME, 
	   (select ss.s_spravce from kp_ktg_spolecnostSpravceKO ss where ss.S_NUMBER0 = nvl(k.NUMBER0,k.NUMBER0_SK)) s_spravce, 
	   (select ss.s_ko from kp_ktg_spolecnostSpravceKO ss where ss.S_NUMBER0 = nvl(k.NUMBER0,k.NUMBER0_SK)) s_ko, 
	   decode((select s.s_pom_ico from kp_ktg_spolecnost s where s.s_ico = k.s_ico),'???',NULL,(select s.s_pom_ico from kp_ktg_spolecnost s where s.s_ico = k.s_ico)) s_pom_ico 
from kp_ktg_pbKlient k 
where k.C_AKTIVNI = '1'

;


PROMPT Completed VW_AC_KLIENTIPB.sql
PROMPT


-- ============================================================================
-- Deploy: VW_AC_SPOLECNOSTADMINISTRATOR.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_AC_SPOLECNOSTADMINISTRATOR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_AC_SPOLECNOSTADMINISTRATOR
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_AC_SPOLECNOSTADMINISTRATOR" ("S_NAZEV", "NUMBER0_CZ", "NUMBER0_SK", "KID", "STREDISKO", "ID", "S_ACTUATEUSERNAME", "S_INSTANCE") AS 
  SELECT   us.s_nazev, 
            DECODE (p.id_databaze, 100, p.s_number0, NULL) number0_cz, 
            DECODE (p.id_databaze, 105, p.s_number0, NULL) number0_sk, p.kid, 
            NULL stredisko, us.ID, u.s_actuateusername, db.S_INSTANCE 
       FROM db_jt.kp_ktg_ucetnispolecnost us, 
            db_jt.kp_ktg_spolecnost s, 
            db_dsa.kp_rel_protistrana p, 
            ktg_appuser u, 
			db_jt.kp_cis_databaze db 
      WHERE us.ID = s.id_ktgspolecnost 
        AND s.ID = p.id_spolecnost 
        AND (p.s_number0 IS NOT NULL OR p.kid IS NOT NULL) 
        AND u.ID = us.ID_ADMINISTRATOR 
		AND us.ID_CISDATABAZE =db.ID 
   UNION 
   SELECT   us.s_nazev, NULL number0_cz, NULL number0_sk, NULL kid, 
            us.topas_id stredisko, us.ID, u.s_actuateusername, db.S_INSTANCE 
       FROM db_jt.kp_ktg_ucetnispolecnost us, ktg_appuser u, db_jt.kp_cis_databaze db 
      WHERE u.ID = us.ID_ADMINISTRATOR AND us.topas_id IS NOT NULL 
	  AND us.ID_CISDATABAZE =db.ID 
   ORDER BY s_nazev

;


PROMPT Completed VW_AC_SPOLECNOSTADMINISTRATOR.sql
PROMPT


-- ============================================================================
-- Deploy: VW_AC_SPOLECNOSTUCETNI.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_AC_SPOLECNOSTUCETNI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_AC_SPOLECNOSTUCETNI
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_AC_SPOLECNOSTUCETNI" ("S_NAZEV", "NUMBER0_CZ", "NUMBER0_SK", "KID", "STREDISKO", "ID", "S_ACTUATEUSERNAME", "S_INSTANCE") AS 
  SELECT   us.s_nazev, 
            DECODE (p.id_databaze, 100, p.s_number0, NULL) number0_cz, 
            DECODE (p.id_databaze, 105, p.s_number0, NULL) number0_sk, p.kid, 
            NULL stredisko, us.ID, u.S_USERID s_actuateusername, db.s_instance 
       FROM db_jt.kp_ktg_ucetnispolecnost us, 
            db_jt.kp_ktg_spolecnost s, 
            db_dsa.kp_rel_protistrana p, 
            ktg_appuser u, 
            db_jt.kp_cis_databaze db 
      WHERE us.ID = s.id_ktgspolecnost 
        AND s.ID = p.id_spolecnost 
        AND (p.s_number0 IS NOT NULL OR p.kid IS NOT NULL) 
        AND u.ID = us.id_zodpovednaucetni 
        AND us.id_cisdatabaze = db.ID 
   UNION 
   SELECT   us.s_nazev, NULL number0_cz, NULL number0_sk, NULL kid, 
            us.topas_id stredisko, us.ID, u.S_USERID s_actuateusername, db.s_instance 
       FROM db_jt.kp_ktg_ucetnispolecnost us, 
            ktg_appuser u, 
            db_jt.kp_cis_databaze db 
      WHERE u.ID = us.id_zodpovednaucetni 
        AND us.topas_id IS NOT NULL 
        AND us.id_cisdatabaze = db.ID 
   ORDER BY s_nazev

;


PROMPT Completed VW_AC_SPOLECNOSTUCETNI.sql
PROMPT


-- ============================================================================
-- Deploy: VW_APPUSER.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_APPUSER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_APPUSER
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_APPUSER" ("USERNAME", "STATUS", "MODULE", "CLIENT_IDENTIFIER", "ACTION", "AUDSID") AS 
  select username, status, module, client_identifier, action, audsid 
from v$session

;


PROMPT Completed VW_APPUSER.sql
PROMPT


-- ============================================================================
-- Deploy: VW_CARTESIS_SPOLOCNOSTI_2020.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_CARTESIS_SPOLOCNOSTI_2020.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_CARTESIS_SPOLOCNOSTI_2020
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_CARTESIS_SPOLOCNOSTI_2020" ("ID", "S_NAZEV", "ID_KTGUCETNISKUPINA", "ID_KTGSUBKONSOLIDACE", "ID_KTGUCETNISPOLECNOST", "C_EQUITY", "DT_CLENSTVIOD", "DT_CLENSTVIDO", "C_CLEN", "ID_CISSUBTYPCLENSTVI", "ND_POMERUCASTI", "DT_DOKLADVAZBYOD", "DT_DOKLADVAZBYDO", "C_PROPISUJVAZBY", "C_SMERCLENSTVIOD", "C_SMERCLENSTVIDO", "C_SMERDETAILCLENSTVIOD", "C_SMERDETAILCLENSTVIDO") AS 
  SELECT distinct 
us.id, us.S_NAZEV
,c."ID_KTGUCETNISKUPINA",c."ID_KTGSUBKONSOLIDACE",c."ID_KTGUCETNISPOLECNOST",c."C_EQUITY",c."DT_CLENSTVIOD",c."DT_CLENSTVIDO",c."C_CLEN",c."ID_CISSUBTYPCLENSTVI",c."ND_POMERUCASTI",c."DT_DOKLADVAZBYOD",c."DT_DOKLADVAZBYDO",c."C_PROPISUJVAZBY",c."C_SMERCLENSTVIOD",c."C_SMERCLENSTVIDO",c."C_SMERDETAILCLENSTVIOD",c."C_SMERDETAILCLENSTVIDO"

                             FROM db_jt.kp_rel_subkonsolidaceclen c,
                                  db_jt.kp_ktg_subkonsolidace s,
                                  db_jt.kp_ktg_ucetniSpolecnost us

                            WHERE     

                            us.id = c.id_ktgUcetniSpolecnost
                              		    AND s.id_ktgUcetniSpolecnost =   c.id_ktgsubkonsolidace
                                      AND c.c_clen = '1'
                                      --AND c.ID_CISSUBTYPCLENSTVI <> 3       -- okerm equity
                                      AND s.id_ktgUcetniSkupina = 8         -- RKC
                                      and c.ID_KTGSUBKONSOLIDACE = 10289 
                                      AND (   sysdate >= C.DT_ClenstviOD
                                                      OR C.DT_ClenstviOD IS NULL)
                                      AND (   sysdate <= C.DT_ClenstviDO                                               OR C.DT_ClenstviDO IS NULL                                              ) 
                                      and us.c_extsystem != 'K'
;


PROMPT Completed VW_CARTESIS_SPOLOCNOSTI_2020.sql
PROMPT


-- ============================================================================
-- Deploy: VW_CASHFLOW.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_CASHFLOW.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_CASHFLOW
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_CASHFLOW" ("LINK", "SID", "NAZEV", "CHAR_CASTKY", "TYP_SMLOUVY", "DATUM_PREDPISU", "CASTKA", "MENA", "UHRADA", "K_UHRADE", "COUNTERPARTY", "SMLOUVA", "PORADI", "CML_NAZEV", "PREDMET", "VAR_SYMBOL", "BU_SPOLECNOSTI", "UCET_SALDA", "PROTIUCET", "CHAR_SMLOUVY", "MANAZER_ID", "PROJEKT_ID", "DRUH_SMLOUVY", "POPIS_DRUHU", "STAV_SMLOUVY", "STAVID", "P1V0", "DOID", "C_CLENSCOPE8", "C_INTERNI") AS 
  SELECT LINK,
    SID,
    nazev,
    char_castky,
    typ_smlouvy,
    datum_predpisu,
    castka,
    mena,
    uhrada,
    k_uhrade,
    counterparty,
    smlouva,
    poradi,
    cml_nazev,
    predmet,
    var_symbol,
    bu_spolecnosti,
    ucet_salda,
    protiucet,
    char_smlouvy,
    manazer_id,
    projekt_id,
    druh_smlouvy,
    popis_druhu,
    stav_smlouvy,
    stavid,
    p1v0,
    sin.doid,
    (SELECT DECODE (COUNT (*), 0, 'N', 'Y')
    FROM kp_rel_subkonsolidaceclen rel
    WHERE s.id_ktgspolecnost = rel.id_ktgucetnispolecnost
    AND SYSDATE BETWEEN rel.dt_clenstviod AND rel.dt_clenstvido
    AND rel.id_ktgucetniskupina = 8
    ) c_clenscope8,
    CASE
      WHEN (us.C_EXTSYSTEM IS NOT NULL
      AND us.C_EXTSYSTEM   <>'M')
      THEN 'Y'
      ELSE 'N'
    END c_interni
  FROM
    (
    /*  esc 02.11.2013
    SELECT 'TASSSROO' LINK,
      SID,
      nazev,
      char_castky,
      typ_smlouvy,
      datum_predpisu,
      castka,
      mena,
      uhrada,
      k_uhrade,
      counterparty,
      smlouva,
      poradi,
      cml_nazev,
      predmet,
      var_symbol,
      bu_spolecnosti,
      ucet_salda,
      protiucet,
      char_smlouvy,
      manazer_id,
      projekt_id,
      druh_smlouvy,
      popis_druhu,
      stav_smlouvy,
      stavid,
      p1v0,
      doid
    FROM vw_cashflow@tasssroo
    UNION ALL
    */
    /*esc 13.05.2009*/
    SELECT 'TASESROO' LINK,
      SID,
      nazev,
      char_castky,
      typ_smlouvy,
      datum_predpisu,
      castka,
      mena,
      uhrada,
      k_uhrade,
      counterparty,
      smlouva,
      poradi,
      cml_nazev,
      predmet,
      var_symbol,
      bu_spolecnosti,
      ucet_salda,
      protiucet,
      char_smlouvy,
      manazer_id,
      projekt_id,
      druh_smlouvy,
      popis_druhu,
      stav_smlouvy,
      stavid,
      p1v0,
      doid
    FROM vw_cashflow@TASESROO
    UNION ALL
    SELECT 'TopGbp',
      SID,
      nazev,
      char_castky,
      typ_smlouvy,
      datum_predpisu,
      castka,
      mena,
      uhrada,
      k_uhrade,
      counterparty,
      smlouva,
      poradi,
      cml_nazev,
      predmet,
      var_symbol,
      bu_spolecnosti,
      ucet_salda,
      protiucet,
      char_smlouvy,
      manazer_id,
      projekt_id,
      druh_smlouvy,
      popis_druhu,
      stav_smlouvy,
      stavid,
      p1v0,
      doid
    FROM vw_cashflow@topgbp
    UNION ALL
    SELECT 'TopAsset',
      SID,
      nazev,
      char_castky,
      typ_smlouvy,
      datum_predpisu,
      castka,
      mena,
      uhrada,
      k_uhrade,
      counterparty,
      smlouva,
      poradi,
      cml_nazev,
      predmet,
      var_symbol,
      bu_spolecnosti,
      ucet_salda,
      protiucet,
      char_smlouvy,
      manazer_id,
      projekt_id,
      druh_smlouvy,
      popis_druhu,
      stav_smlouvy,
      stavid,
      p1v0,
      doid
    FROM vw_cashflow@topasset
    /*           UNION ALL
    SELECT 'TEPOSROO', SID, nazev, char_castky, typ_smlouvy,
    datum_predpisu, castka, mena, uhrada, k_uhrade,
    counterparty, smlouva, poradi, cml_nazev, predmet,
    var_symbol, bu_spolecnosti, ucet_salda, protiucet,
    char_smlouvy, manazer_id, projekt_id, druh_smlouvy,
    popis_druhu, stav_smlouvy, stavid, p1v0, doid
    FROM vw_cashflow@teposroo */
    UNION ALL
    SELECT 'TopCzk',
      SID,
      nazev,
      char_castky,
      typ_smlouvy,
      datum_predpisu,
      castka,
      mena,
      uhrada,
      k_uhrade,
      counterparty,
      smlouva,
      poradi,
      cml_nazev,
      predmet,
      var_symbol,
      bu_spolecnosti,
      ucet_salda,
      protiucet,
      char_smlouvy,
      manazer_id,
      projekt_id,
      druh_smlouvy,
      popis_druhu,
      stav_smlouvy,
      stavid,
      p1v0,
      doid
    FROM vw_cashflow@topczk
    UNION ALL
    SELECT 'TopEur',
      SID,
      nazev,
      char_castky,
      typ_smlouvy,
      datum_predpisu,
      castka,
      mena,
      uhrada,
      k_uhrade,
      counterparty,
      smlouva,
      poradi,
      cml_nazev,
      predmet,
      var_symbol,
      bu_spolecnosti,
      ucet_salda,
      protiucet,
      char_smlouvy,
      manazer_id,
      projekt_id,
      druh_smlouvy,
      popis_druhu,
      stav_smlouvy,
      stavid,
      p1v0,
      doid
    FROM vw_cashflow@topeur
/*  esc 02.11.2013
UNION ALL
    SELECT 'TopSkk',
      SID,
      nazev,
      char_castky,
      typ_smlouvy,
      datum_predpisu,
      castka,
      mena,
      uhrada,
      k_uhrade,
      counterparty,
      smlouva,
      poradi,
      cml_nazev,
      predmet,
      var_symbol,
      bu_spolecnosti,
      ucet_salda,
      protiucet,
      char_smlouvy,
      manazer_id,
      projekt_id,
      druh_smlouvy,
      popis_druhu,
      stav_smlouvy,
      stavid,
      p1v0,
      doid
    FROM vw_cashflow@topskk
    */
    UNION ALL    
    /*esc 13.05.2009*/
    SELECT 'TSKE08OO',
      SID,
      nazev,
      char_castky,
      typ_smlouvy,
      datum_predpisu,
      castka,
      mena,
      uhrada,
      k_uhrade,
      counterparty,
      smlouva,
      poradi,
      cml_nazev,
      predmet,
      var_symbol,
      bu_spolecnosti,
      ucet_salda,
      protiucet,
      char_smlouvy,
      manazer_id,
      projekt_id,
      druh_smlouvy,
      popis_druhu,
      stav_smlouvy,
      stavid,
      p1v0,
      doid
    FROM vw_cashflow@TSKE08OO
    UNION ALL
    SELECT 'TopUsd',
      SID,
      nazev,
      char_castky,
      typ_smlouvy,
      datum_predpisu,
      castka,
      mena,
      uhrada,
      k_uhrade,
      counterparty,
      smlouva,
      poradi,
      cml_nazev,
      predmet,
      var_symbol,
      bu_spolecnosti,
      ucet_salda,
      protiucet,
      char_smlouvy,
      manazer_id,
      projekt_id,
      druh_smlouvy,
      popis_druhu,
      stav_smlouvy,
      stavid,
      p1v0,
      doid
    FROM vw_cashflow@topusd
    UNION ALL
    
    /*esc 04.2008*/
    SELECT 'TopRub' LINK,
      SID,
      nazev,
      char_castky,
      typ_smlouvy,
      datum_predpisu,
      castka,
      mena,
      uhrada,
      k_uhrade,
      counterparty,
      smlouva,
      poradi,
      cml_nazev,
      predmet,
      var_symbol,
      bu_spolecnosti,
      ucet_salda,
      protiucet,
      char_smlouvy,
      manazer_id,
      projekt_id,
      druh_smlouvy,
      popis_druhu,
      stav_smlouvy,
      stavid,
      p1v0,
      doid
    FROM vw_cashflow@toprub
/*esc 02.11.2013
UNION ALL
        --esc 04.2008
    SELECT 'TEURCZOO',
      SID,
      nazev,
      char_castky,
      typ_smlouvy,
      datum_predpisu,
      castka,
      mena,
      uhrada,
      k_uhrade,
      counterparty,
      smlouva,
      poradi,
      cml_nazev,
      predmet,
      var_symbol,
      bu_spolecnosti,
      ucet_salda,
      protiucet,
      char_smlouvy,
      manazer_id,
      projekt_id,
      druh_smlouvy,
      popis_druhu,
      stav_smlouvy,
      stavid,
      p1v0,
      doid
    FROM vw_cashflow@teurczoo
*/
    ) SIN,
    db_dsa.kp_rel_protistrana p,
    kp_cis_databaze d,
    kp_ktg_spolecnost s,
    kp_ktg_ucetniSpolecnost us
  WHERE p.doid           = SIN.doid
  AND p.id_databaze      = d.ID
  AND d.s_dblink         = SIN.LINK
  AND p.id_spolecnost    = s.ID
  AND s.id_ktgSpolecnost = us.ID (+)
;


PROMPT Completed VW_CASHFLOW.sql
PROMPT


-- ============================================================================
-- Deploy: VW_CIS_ISIT_BUDGET.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_CIS_ISIT_BUDGET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_CIS_ISIT_BUDGET
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_CIS_ISIT_BUDGET" ("S_KOD", "DRUH_TRANSAKCE", "ID_APLIKACE", "APLIKACE", "APP_POPIS", "ID_TYP_POLOZKY", "TYP_POLOZKY", "ID_KTG_UCETNISPOL", "SPOLECNOST", "ID_KTG_ODBOR", "KOD_ODBOR", "ODBOR", "ID_KTG_PROJEKT", "PROJEKT", "BUDGET_POPIS", "DT_PLATNOSTOD", "DT_PLATNOSTDO") AS 
  SELECT distinct
  bud.S_KOD,bud.ID_DRUH_TRANSAKCE DRUH_TRANSAKCE
,bud.ID_ISIT_APLIKACE ID_APLIKACE,app.S_NAZEV APLIKACE, app.S_POPIS APP_POPIS
,bud.ID_TYP_POLOZKY, pol.S_NAZEV TYP_POLOZKY
,bud.ID_KTG_UCETNISPOL  , spol.S_NAZEV  SPOLECNOST
,bud.ID_KTG_ODBOR, odb.S_KOD KOD_ODBOR, odb.S_NAZEV  ODBOR
,bud.ID_KTG_PROJEKT, proj.S_NAZEV PROJEKT
, bud.S_POPIS  BUDGET_POPIS
,bud.DT_PLATNOSTOD
,bud.DT_PLATNOSTDO
from 
   KP_CIS_ISIT_BUDGET bud
, KP_CIS_ISIT_APLIKACE app   
, KP_CIS_ISIT_TYP_POLOZKY pol
, KP_KTG_ODBOR odb
, KP_KTG_UCETNISPOLECNOST spol
, KP_KTG_PROJEKT proj
where
      bud.ID_ISIT_APLIKACE  = app.id (+) 
and   bud.ID_TYP_POLOZKY  = pol.id (+)
and   bud.ID_KTG_ODBOR     = odb.id (+)
and   bud.ID_KTG_PROJEKT   = proj.id (+)
and   bud.ID_KTG_UCETNISPOL = spol.id (+)
--AND bud.S_KOD = 'CLR0009'
;


PROMPT Completed VW_CIS_ISIT_BUDGET.sql
PROMPT


-- ============================================================================
-- Deploy: VW_CIS_READEK.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_CIS_READEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_CIS_READEK
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_CIS_READEK" ("NL_LISTPORADI", "NL_RADEK", "RADEK", "S_LOCALE") AS 
  select dd.NL_PORADI nl_listporadi, 
       d.NL_RADEK, 
       d.NL_RADEK || ' - ' || r.S_POPIS radek, 
	   r.S_LOCALE 
from KP_DEF_LISTBUNKA d, 
	 kp_cis_radektextlang r, 
	 kp_def_doklad dd 
where d.nl_sloupec = 1 
  and d.ID_CISRADEKTYP = r.id 
  and d.id_cislist = dd.ID_CISLIST 
  and d.ID_CISLIST < 1000 
order by dd.NL_PORADI, d.nl_radek

;


PROMPT Completed VW_CIS_READEK.sql
PROMPT


-- ============================================================================
-- Deploy: VW_CIS_TYPFAKTURY.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_CIS_TYPFAKTURY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_CIS_TYPFAKTURY
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_CIS_TYPFAKTURY" ("ID", "TFID", "POPIS", "ID_KTGUCETNISPOLECNOST", "STREDISKO", "C_PLATNOST", "FEIS_PRENOS") AS 
  select 
--id , s_popis, tfid,s_feis_popis, id_ktgucetnispolecnost,stredisko,c_platnost
tf.id , tf.tfid, tf.s_popis POPIS,  tf.id_ktgucetnispolecnost, tf.stredisko, tf.c_platnost 
, nvl(lnk.c_feis_prenos,0) FEIS_PRENOS
FROM 
      KP_CIS_TYPFAKTURY tf
      , KP_KTG_UCETNISPOLECNOST_LINK lnk
      
WHERE 
      lnk.id_ktgucetnispolecnost (+) = tf.id_ktgucetnispolecnost 
      AND      C_PLATNOST = 1
order by tf.ID_KTGUCETNISPOLECNOST, tf.ID;

   COMMENT ON TABLE "DB_JT"."VW_CIS_TYPFAKTURY"  IS 'View kde su IBA aktualne platne typy faktur (zobrazia sa v SL v roletke typ faktury) podla nastavenia v ciselniku faktur a povolenia prenosu do FEIS na Ucetni spolecnosti.'
;


PROMPT Completed VW_CIS_TYPFAKTURY.sql
PROMPT


-- ============================================================================
-- Deploy: VW_CIS_TYPTRANSAKCE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_CIS_TYPTRANSAKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_CIS_TYPTRANSAKCE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_CIS_TYPTRANSAKCE" ("ID", "S_POPIS", "S_KOD", "ID_GESTOR_CZ", "ID_GESTOR_SK", "ID_GESTOR_Z", "ID_TYPTRANSAKCEGROUP", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "C_PROZASTUPCE", "ND_BUDGETNAVYSENI_GESTOR", "C_DEVELOPER", "S_KOMENTAR", "C_SPECIAL", "C_PODVOJNEMIS", "ND_UROVENPROJEKT", "ND_UROVENSPOLECNOST", "ND_UROVENTOP", "S_MENAUP", "S_MENAUS", "S_MENAUT", "C_TISKMAJETEK", "C_BUDGETOVAT", "C_CAPEX_OPEX") AS 
  SELECT distinct
       KpCisTyptransakce.ID, 
       KpCisTyptransakce.S_POPIS, 
       KpCisTyptransakce.S_KOD, 
       KpCisTyptransakce.ID_GESTOR_CZ, 
       KpCisTyptransakce.ID_GESTOR_SK, 
       KpCisTyptransakce.ID_GESTOR_Z, 
       KpCisTyptransakce.ID_TYPTRANSAKCEGROUP, 
       KpCisTyptransakce.DT_PLATNOSTOD, 
       KpCisTyptransakce.DT_PLATNOSTDO, 
       KpCisTyptransakce.C_PROZASTUPCE, 
       KpCisTyptransakce.ND_BUDGETNAVYSENI_GESTOR, 
       KpCisTyptransakce.C_DEVELOPER, 
       KpCisTyptransakce.S_KOMENTAR, 
       KpCisTyptransakce.C_SPECIAL, 
       KpCisTyptransakce.C_PODVOJNEMIS, 
       KpCisTyptransakce.ND_UROVENPROJEKT, 
       KpCisTyptransakce.ND_UROVENSPOLECNOST, 
       KpCisTyptransakce.ND_UROVENTOP, 
       KpCisTyptransakce.S_MENAUP, 
       KpCisTyptransakce.S_MENAUS, 
       KpCisTyptransakce.S_MENAUT, 
       KpCisTyptransakce.C_TISKMAJETEK, 
       KpCisTyptransakce.C_BUDGETOVAT, 
       KpCisTyptransakce.C_CAPEX_OPEX
FROM DB_JT.KP_CIS_TYPTRANSAKCE KpCisTyptransakce
UNION
SELECT
       -ASCII(KPEX.C_ID),
       KPEX.S_POPIS, 
       KPEX.C_ID,
       null,
       null,
       null,
       null,
       sysdate-1,
       sysdate+1,
       null,
       null,
       null,
       KPEX.S_KOMENTAR, 
       null,
       null,
       null,
       null,
       null,
       null,
       null,
       null,
       null,
       null,
       KPEX.C_ID
FROM DB_JT.KP_CIS_TYP_TRAN_CAPEX_OPEX KPEX
;


PROMPT Completed VW_CIS_TYPTRANSAKCE.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGET.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_DAT_BUDGET
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_DAT_BUDGET" ("ID", "ID_KTGODBOR", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "S_KOD", "S_NAZEV", "ID_ODBOROO", "ID_UCSPOLOO", "ID_UCSPOLTOP", "S_MENA", "ID_KTGUCETNISPOLECNOST", "NAZEVUCSPOL", "DT_SCHVALITDO") AS 
  select b.ID, 
       b.ID_KTGODBOR, 
	   b.DT_PLATNOSTOD, 
	   b.DT_PLATNOSTDO, 
	   o.S_KOD, 
	   o.S_NAZEV || ' (' || us.s_zkratka || ')', 
	   o.id_odpovednaosoba id_odboroo, 
       case 
	     when (u.ID_ODPOVEDNAOSOBA is not null) then u.ID_ODPOVEDNAOSOBA 
		 else us.ID_ODPOVEDNAOSOBA 
	   end id_ucspoloo, 
	   us.ID_MNGSEGMENTBOSS id_ucspoltop, 
	   us.S_MENA, 
	   us.ID, 
	   us.s_zkratka, 
	   b.DT_SCHVALITDO 
from kp_dat_budget b, 
     kp_ktg_odbor o, 
	 kp_ktg_usek u, 
	 kp_ktg_ucetnispolecnost us 
where b.ID_KTGODBOR = o.ID 
  and o.id_ktgucetnispolecnost = us.id 
  and o.ID_USEK = u.id(+) 
  and o.C_BUDGETING = '1'

;


PROMPT Completed VW_DAT_BUDGET.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETMUSTEKNAKLADCHYBI.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETMUSTEKNAKLADCHYBI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_DAT_BUDGETMUSTEKNAKLADCHYBI
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_DAT_BUDGETMUSTEKNAKLADCHYBI" ("ID_CISSUBJECT", "S_POPIS", "S_UCET") AS 
  SELECT DISTINCT kd.id_cissubject, (SELECT s_popis
                                        FROM kp_cis_subject
                                       WHERE ID = kd.id_cissubject) s_popis,
                   zd.s_ucet
              FROM kp_dat_doklad d, 
			  	   kp_ktg_doklad kd,
				   kp_rel_doklad_zdrojDat rel,
                   kp_dat_dokladzdrojdat zd
             WHERE d.c_basedoklad = '1'
               AND d.s_uzivatel = 'denni'
               AND d.id_ktgdoklad = kd.ID
			   and kd.id_cisDoklad = 1
               AND d.ID = rel.id_doklad
			   AND rel.id_dokladZdrojDat = zd.id
               AND SUBSTR (zd.s_ucet, 1, 1) = kd.s_ucetnaklady
               AND NOT EXISTS (
                      SELECT NULL
                        FROM kp_def_budgetmustek bm
                       WHERE bm.id_cissubject = kd.id_cissubject
                         AND zd.s_ucet LIKE bm.s_ucet || '%')
          ORDER BY kd.id_cissubject, zd.s_ucet

;


PROMPT Completed VW_DAT_BUDGETMUSTEKNAKLADCHYBI.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPOLOZKA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPOLOZKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_DAT_BUDGETPOLOZKA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_DAT_BUDGETPOLOZKA" ("ID", "ID_BUDGET", "ID_CISTYPTRAN", "ND_CASTKA", "S_MENA", "ID_ODBOROO", "ODBOROO", "ID_UCSPOLOO", "UCSPOLOO", "ID_UCSPOLTOP", "UCSPOLTOP", "ID_GESTOR", "GESTOR", "DT_SCHVALENOODBOR", "DT_SCHVALENOGESTOR", "DT_SCHVALENOUCSPOL", "DT_SCHVALENOTOP", "S_POZNAMKA", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "BUDGET", "TYPTRAN", "HISTORIE", "DT_SCHVALITDO", "ID_ODBOROOSCH", "ODBOROOSCH", "ID_UCSPOLOOSCH", "UCSPOLOOSCH", "ID_UCSPOLTOPSCH", "UCSPOLTOPSCH", "ID_GESTORSCH", "GESTORSCH") AS 
  select bp.id, 
	   bp.id_budget, 
	   bp.id_cistyptran, 
	   bp.nd_castka, 
	   bp.s_mena, 
	   bp.id_odboroo, 
	   (select u.s_titulypred || ' ' || u.s_krestni || ' ' || u.s_prijmeni || ' ' || u.s_titulypo from ktg_appUser u where u.id = bp.id_odboroo) odboroo, 
	   bp.id_ucspoloo, 
	   (select u.s_titulypred || ' ' || u.s_krestni || ' ' || u.s_prijmeni || ' ' || u.s_titulypo from ktg_appUser u where u.id = bp.id_ucspoloo) ucspoloo, 
	   bp.id_ucspoltop, 
	   (select u.s_titulypred || ' ' || u.s_krestni || ' ' || u.s_prijmeni || ' ' || u.s_titulypo from ktg_appUser u where u.id = bp.id_ucspoltop) ucspoltop, 
	   bp.id_gestor, 
	   (select u.s_titulypred || ' ' || u.s_krestni || ' ' || u.s_prijmeni || ' ' || u.s_titulypo from ktg_appUser u where u.id = bp.id_gestor) gestor, 
	   bp.dt_schvalenoodbor, 
	   bp.dt_schvalenogestor, 
	   bp.dt_schvalenoucspol, 
	   bp.dt_schvalenotop, 
	   bp.s_poznamka, 
	   bp.DT_PLATNOSTOD, 
	   bp.DT_PLATNOSTDO, 
       bp.budget, 
	   bp.typTran, 
	   (select count(*) from kp_log_budgetNavyseni bn where bn.id_budgetPolozka = bp.id) historie, 
	   bp.DT_SCHVALITDO, 
	   bp.id_odborooSch, 
	   (select u.s_titulypred || ' ' || u.s_krestni || ' ' || u.s_prijmeni || ' ' || u.s_titulypo from ktg_appUser u where u.id = bp.id_odborooSch) odborooSch, 
	   bp.id_ucspolooSch, 
	   (select u.s_titulypred || ' ' || u.s_krestni || ' ' || u.s_prijmeni || ' ' || u.s_titulypo from ktg_appUser u where u.id = bp.id_ucspolooSch) ucspolooSch, 
	   bp.id_ucspoltopSch, 
	   (select u.s_titulypred || ' ' || u.s_krestni || ' ' || u.s_prijmeni || ' ' || u.s_titulypo from ktg_appUser u where u.id = bp.id_ucspoltopSch) ucspoltopSch, 
	   bp.id_gestorSch, 
	   (select u.s_titulypred || ' ' || u.s_krestni || ' ' || u.s_prijmeni || ' ' || u.s_titulypo from ktg_appUser u where u.id = bp.id_gestorSch) gestorSch 
from 
	( 
	select o.id_odpovednaosoba id_odboroo, 
       case 
	     when (u.ID_ODPOVEDNAOSOBA is not null) then u.ID_ODPOVEDNAOSOBA 
	     else us.ID_ODPOVEDNAOSOBA 
	   end id_ucspoloo, 
	   us.ID_MNGSEGMENTBOSS id_ucspoltop, 
	   f_getGestor(tt.ID, us.ID) id_gestor, 
	   bp.id, 
	   bp.id_budget, 
	   bp.id_cistyptran, 
	   bp.nd_castka, 
	   bp.s_mena, 
	   bp.id_odboroo id_odboroosch, 
	   bp.dt_schvalenoodbor, 
	   bp.id_gestor id_gestorsch, 
	   bp.dt_schvalenogestor, 
	   bp.id_ucspoloo id_ucspoloosch, 
	   bp.dt_schvalenoucspol, 
	   bp.id_ucspoltop id_ucspoltopsch, 
	   bp.dt_schvalenotop, 
	   bp.s_poznamka, 
	   greatest(b.DT_PLATNOSTOD,tt.DT_PLATNOSTOD) dt_platnostOd, 
	   least(b.DT_PLATNOSTDO,tt.DT_PLATNOSTDO) dt_platnostDo, 
	   o.S_KOD || ' - ' || o.S_NAZEV || ' (' || us.S_NAZEV || ') (' || b.DT_PLATNOSTOD || ' - ' || b.DT_PLATNOSTDO || ')' BUDGET, 
	   tt.S_KOD || ' - ' || tt.S_POPIS typtran, 
	   b.DT_SCHVALITDO 
	from kp_dat_budgetpolozka bp, 
	     kp_dat_budget b, 
	     kp_ktg_odbor o, 
		 kp_ktg_usek u, 
         kp_ktg_ucetnispolecnost us, 
         kp_ktg_spolecnost s, 
         kp_cis_typtransakce tt 
	where bp.id_budget = b.id 
	 and b.id_ktgodbor = o.id 
	 and o.id_ktgucetnispolecnost = us.id 
	 and o.id_ktgucetnispolecnost = s.id_ktgspolecnost(+) 
	 and o.id_usek = u.id(+) 
	 and bp.id_cistyptran = tt.id 
	UNION ALL 
	select p.ID_PMANAGER id_odboroo, 
	   us.ID_ODPOVEDNAOSOBA id_ucspoloo, 
	   p.ID_MNGSEGMENTBOSS id_ucspoltop, 
	   f_getGestor(tt.ID, us.ID) id_gestor, 
	   bp.id, 
	   bp.id_budget, 
	   bp.id_cistyptran, 
	   bp.nd_castka, 
	   bp.s_mena, 
	   bp.id_odboroo id_odboroosch, 
	   bp.dt_schvalenoodbor, 
	   bp.id_gestor id_gestorsch, 
	   bp.dt_schvalenogestor, 
	   bp.id_ucspoloo id_ucspoloosch, 
	   bp.dt_schvalenoucspol, 
	   bp.id_ucspoltop id_ucspoltopsch, 
	   bp.dt_schvalenotop, 
	   bp.s_poznamka, 
	   greatest(b.DT_PLATNOSTOD,tt.DT_PLATNOSTOD) dt_platnostOd, 
	   least(b.DT_PLATNOSTDO,tt.DT_PLATNOSTDO) dt_platnostDo, 
	   p.ID || ' - ' || p.S_NAZEV || ' (' || b.DT_PLATNOSTOD || ' - ' || b.DT_PLATNOSTDO || ')' BUDGET, 
	   tt.S_KOD || ' - ' || tt.S_POPIS typtran, 
	   b.DT_SCHVALITDO 
	from kp_dat_budgetpolozka bp, 
	     kp_dat_budget b, 
	     kp_ktg_projekt p, 
         kp_ktg_ucetnispolecnost us, 
         kp_ktg_spolecnost s, 
         kp_cis_typtransakce tt 
	where bp.id_budget = b.id 
	 and b.id_ktgProjekt = p.id 
	 and p.id_ktgucetnispolecnost = us.id (+) 
	 and p.id_ktgucetnispolecnost = s.id_ktgspolecnost(+) 
	 and bp.id_cistyptran = tt.id 
	 ) bp, 
        ktg_appuser u1, 
        ktg_appuser u2, 
        ktg_appuser u3, 
        ktg_appuser u4 
where bp.id_odboroo = u1.id(+) 
  and bp.id_ucspoloo = u2.id(+) 
  and bp.id_ucspoltop = u3.id(+) 
  and bp.id_gestor = u4.id(+) 
order by id desc

;


PROMPT Completed VW_DAT_BUDGETPOLOZKA.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKT.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_DAT_BUDGETPROJEKT
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_DAT_BUDGETPROJEKT" ("ID", "ID_KTGPROJEKT", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "S_NAZEV", "ID_PMANAGER", "ID_UCSPOLOO", "ID_PROJEKTTOP", "S_MENA", "ID_KTGUCETNISPOLECNOST", "NAZEVUCSPOL", "DT_SCHVALITDO") AS 
  select b.ID, 
       b.ID_KTGPROJEKT, 
	   b.DT_PLATNOSTOD, 
	   b.DT_PLATNOSTDO, 
	   p.S_NAZEV, 
	   p.ID_PMANAGER, 
	   us.ID_ODPOVEDNAOSOBA id_ucspoloo, 
	   p.ID_MNGSEGMENTBOSS id_projektTop, 
	   p.S_MENANAKLADY S_MENA, 
	   us.ID, 
	   us.s_zkratka, 
	   b.DT_SCHVALITDO 
from kp_dat_budget b, 
     kp_ktg_projekt p, 
	 kp_ktg_ucetnispolecnost us 
where b.ID_KTGPROJEKT = p.ID 
  and p.ID_KTGUCETNISPOLECNOST = us.ID (+)--nove pouziti id_ktgUcetniSpolecnost na urceni oo 
  and p.C_SLEDUJEBUDGET = '1' 
  --jeste upresnit typ budgetu

;


PROMPT Completed VW_DAT_BUDGETPROJEKT.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETPROJEKTTRANSAKCE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETPROJEKTTRANSAKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_DAT_BUDGETPROJEKTTRANSAKCE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_DAT_BUDGETPROJEKTTRANSAKCE" ("ID", "S_POPIS", "ND_CASTKAMENA", "S_MENA", "ND_CASTKALOCAL", "UCSPOL_MENA", "DATUM", "SPOLECNOST", "S_UCET", "S_UNIFSPOL", "ID_BUDGET", "ID_CISTYPTRANSAKCE", "ID_KTGODBOR", "SPOL_DOC", "XIDSL", "BUDGET_MENA") AS 
  SELECT "ID",
    "S_POPIS",
    "ND_CASTKAMENA",
    "S_MENA",
    "ND_CASTKALOCAL",
    "UCSPOL_MENA",
    "DATUM",
    "SPOLECNOST",
    "S_UCET",
    "S_UNIFSPOL",
    "ID_BUDGET",
    "ID_CISTYPTRANSAKCE",
    "ID_KTGODBOR",
    "SPOL_DOC",
    "XIDSL",
    "BUDGET_MENA"
  FROM VW_DAT_BUDGETPROJEKTTRANSAKC_D --udaje z dokladov
  ----
/*  UNION
  SELECT id,
    s_popis,
    nd_castkamena,
    S_MENA,
    nd_castkalocal,
    ucspol_mena,
    DATUM,
    spolecnost,
    s_ucet,
    s_unifSpol,
    id_budget,
    ID_CISTYPTRANSAKCE,
    ID_KTGODBOR,
    spol_doc,
    xidsl,
    budget_mena
  FROM DAT_BUDGETPROJEKTTRAN_ALL_QSK
  WHERE FK_GEN_ID =
    --(SELECT MAX(FK_GEN_ID)    FROM DB_DSA.Q_ALL_GENERATION    WHERE Q_FROM='QSK'    AND KIND    ='B'    )
    (
    SELECT MAX(FK_GEN_ID)
    FROM DAT_BUDGETPROJEKTTRAN_ALL_QSK
    )
  ---
  UNION
  SELECT id,
    s_popis,
    nd_castkamena,
    S_MENA,
    nd_castkalocal,
    ucspol_mena,
    DATUM,
    spolecnost,
    s_ucet,
    s_unifSpol,
    id_budget,
    ID_CISTYPTRANSAKCE,
    ID_KTGODBOR,
    spol_doc,
    xidsl,
    budget_mena
  FROM DAT_BUDGETPROJEKTTRAN_ALL_QCZ
  WHERE FK_GEN_ID =
    --(SELECT MAX(FK_GEN_ID)    FROM DB_DSA.Q_ALL_GENERATION    WHERE Q_FROM='QCZ'    AND KIND    ='B'    );
    (
    SELECT MAX(FK_GEN_ID)
    FROM DAT_BUDGETPROJEKTTRAN_ALL_QCZ
    );
*/
;


PROMPT Completed VW_DAT_BUDGETPROJEKTTRANSAKCE.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_DAT_BUDGETPROJTRANSAKCEDOC.sql: 'utf-8' codec can't decode byte 0xc8 in position 737: invalid continuation byte


-- ============================================================================
-- Deploy: VW_DAT_BUDGETSCHVALOVANI.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETSCHVALOVANI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_DAT_BUDGETSCHVALOVANI
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_DAT_BUDGETSCHVALOVANI" ("UROVEN", "ID_BUDGET", "BUDGET", "ID_OSOBA", "OSOBA", "POCET", "NIZSI") AS 
  select 1 uroven, 
       p.ID_BUDGET, 
	   p.BUDGET, 
	   p.ID_ODBOROO id_osoba, 
	   p.odboroo osoba, 
	   count(*) pocet, 
	   '1' nizsi 
from vw_dat_budgetPolozka p 
where p.ID_ODBOROO is not null AND p.DT_SCHVALENOODBOR is null 
  and sysdate > p.DT_SCHVALITDO 
  and sysdate between dt_platnostod and p.dt_platnostdo --esc 26.03.2009
group by p.ID_BUDGET, p.BUDGET, p.ID_ODBOROO, p.odboroo 
union 
select 2, 
       p.ID_BUDGET, 
	   p.BUDGET, 
	   p.ID_GESTOR, 
	   p.gestor, 
	   count(*) pocet, 
	   '1' 
from vw_dat_budgetPolozka p 
where p.ID_GESTOR is not null AND p.DT_SCHVALENOGESTOR is null 
  and sysdate > p.DT_SCHVALITDO 
 and sysdate between dt_platnostod and p.dt_platnostdo --esc 26.03.2009  
  and (p.ID_ODBOROO is null OR p.DT_SCHVALENOODBOR is not null) 
group by p.ID_BUDGET, p.BUDGET, p.ID_GESTOR, p.gestor 
union 
select 2, 
       p.ID_BUDGET, 
	   p.BUDGET, 
	   p.ID_GESTOR, 
	   p.gestor, 
	   count(*) pocet, 
	   '0' 
from vw_dat_budgetPolozka p 
where p.ID_GESTOR is not null AND p.DT_SCHVALENOGESTOR is null 
  and sysdate > p.DT_SCHVALITDO 
 and sysdate between dt_platnostod and p.dt_platnostdo --esc 26.03.2009
  and (p.ID_ODBOROO is not null AND p.DT_SCHVALENOODBOR is null) 
group by p.ID_BUDGET, p.BUDGET, p.ID_GESTOR, p.gestor 
union 
select 3, 
       p.ID_BUDGET, 
	   p.BUDGET, 
	   p.ID_UCSPOLOO, 
	   p.UCSPOLOO, 
	   count(*) pocet, 
	   '1' 
from vw_dat_budgetPolozka p 
where p.ID_UCSPOLOO is not null AND p.DT_SCHVALENOUCSPOL is null 
  and sysdate > p.DT_SCHVALITDO 
 and sysdate between dt_platnostod and p.dt_platnostdo --esc 26.03.2009
  and (p.ID_ODBOROO is null OR p.DT_SCHVALENOODBOR is not null) 
  and (p.ID_GESTOR is null OR p.DT_SCHVALENOGESTOR is not null) 
group by p.ID_BUDGET, p.BUDGET, p.ID_UCSPOLOO, p.UCSPOLOO 
union 
select 3, 
       p.ID_BUDGET, 
	   p.BUDGET, 
	   p.ID_UCSPOLOO, 
	   p.UCSPOLOO, 
	   count(*) pocet, 
	   '0' 
from vw_dat_budgetPolozka p 
where p.ID_UCSPOLOO is not null AND p.DT_SCHVALENOUCSPOL is null 
  and sysdate > p.DT_SCHVALITDO 
 and sysdate between dt_platnostod and p.dt_platnostdo --esc 26.03.2009
  and (p.ID_ODBOROO is not null AND p.DT_SCHVALENOODBOR is null 
   or p.ID_GESTOR is not null AND p.DT_SCHVALENOGESTOR is null) 
group by p.ID_BUDGET, p.BUDGET, p.ID_UCSPOLOO, p.UCSPOLOO 
union 
select 4, 
       p.ID_BUDGET, 
	   p.BUDGET, 
	   p.ID_UCSPOLTOP, 
	   p.UCSPOLTOP, 
	   count(*) pocet, 
	   '1' 
from vw_dat_budgetPolozka p 
where p.ID_UCSPOLTOP is not null AND p.DT_SCHVALENOTOP is null 
  and sysdate > p.DT_SCHVALITDO 
 and sysdate between dt_platnostod and p.dt_platnostdo --esc 26.03.2009  
  and (p.ID_ODBOROO is null OR p.DT_SCHVALENOODBOR is not null) 
  and (p.ID_GESTOR is null OR p.DT_SCHVALENOGESTOR is not null) 
  and (p.ID_UCSPOLOO is null OR p.DT_SCHVALENOUCSPOL is not null) 
group by p.ID_BUDGET, p.BUDGET, p.ID_UCSPOLTOP, p.UCSPOLTOP 

union 
select 4, 
       p.ID_BUDGET, 
	   p.BUDGET, 
	   p.ID_UCSPOLTOP, 
	   p.UCSPOLTOP, 
	   count(*) pocet, 
	   '0' 
from vw_dat_budgetPolozka p 
where p.ID_UCSPOLTOP is not null AND p.DT_SCHVALENOTOP is null 
  and sysdate > p.DT_SCHVALITDO 
 and sysdate between dt_platnostod and p.dt_platnostdo --esc 26.03.2009
  and (p.ID_ODBOROO is not null AND p.DT_SCHVALENOODBOR is null 
   or p.ID_GESTOR is not null AND p.DT_SCHVALENOGESTOR is null 
   or p.ID_UCSPOLOO is not null AND p.DT_SCHVALENOUCSPOL is null) 
group by p.ID_BUDGET, p.BUDGET, p.ID_UCSPOLTOP, p.UCSPOLTOP 
order by 1,3,5

--)where ID_BUDGET = 1555
;


PROMPT Completed VW_DAT_BUDGETSCHVALOVANI.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_DAT_BUDGETTRANSAKCE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_DAT_BUDGETTRANSAKCE" ("ID", "S_POPIS", "ND_CASTKAMENA", "S_MENA", "ND_CASTKALOCAL", "UCSPOL_MENA", "DATUM", "SPOLECNOST", "S_UCET", "S_UNIFSPOL", "ID_BUDGET", "ID_CISTYPTRANSAKCE", "ID_KTGPROJEKT", "SPOL_DOC", "XIDSL", "BUDGET_MENA") AS 
  SELECT "ID",
    "S_POPIS",
    "ND_CASTKAMENA",
    "S_MENA",
    "ND_CASTKALOCAL",
    "UCSPOL_MENA",
    "DATUM",
    "SPOLECNOST",
    "S_UCET",
    "S_UNIFSPOL",
    "ID_BUDGET",
    "ID_CISTYPTRANSAKCE",
    "ID_KTGPROJEKT",
    "SPOL_DOC",
    "XIDSL",
    "BUDGET_MENA"
  FROM VW_DAT_BUDGETTRANSAKCE_TD
;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_DAT_BUDGETTRANSAKCEDOC.sql: 'utf-8' codec can't decode byte 0xc8 in position 725: invalid continuation byte


-- ============================================================================
-- Deploy: VW_DAT_BUDGETTRANSAKCE_X.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_DAT_BUDGETTRANSAKCE_X.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_DAT_BUDGETTRANSAKCE_X
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_DAT_BUDGETTRANSAKCE_X" ("ID", "S_POPIS", "ND_CASTKAMENA", "S_MENA", "ND_CASTKALOCAL", "UCSPOL_MENA", "DATUM", "SPOLECNOST", "S_UCET", "S_UNIFSPOL", "ID_BUDGET", "ID_CISTYPTRANSAKCE", "ID_KTGPROJEKT", "SPOL_DOC", "XIDSL", "BUDGET_MENA") AS 
  SELECT "ID","S_POPIS","ND_CASTKAMENA","S_MENA","ND_CASTKALOCAL","UCSPOL_MENA","DATUM","SPOLECNOST","S_UCET","S_UNIFSPOL","ID_BUDGET","ID_CISTYPTRANSAKCE","ID_KTGPROJEKT","SPOL_DOC","XIDSL","BUDGET_MENA" 
    FROM VW_DAT_BUDGETTRANSAKCE_TD 
UNION --QCZ
  SELECT id,
    s_popis,
    nd_castkamena,
    S_MENA,
    nd_castkalocal,
    ucspol_mena,
    DATUM,
    spolecnost,
    s_ucet,
    s_unifSpol,
    id_budget,
    ID_CISTYPTRANSAKCE,
    ID_KTGPROJEKT,
    spol_doc,
    xidsl,
    budget_mena
  FROM
    DAT_BUDGETTRANSAKCE__ALL_QCZ
    WHERE FK_GEN_ID  = ( select max(FK_GEN_ID) from DB_DSA.Q_ALL_GENERATION where Q_FROM='QCZ')
UNION --QSK
  SELECT id,
    s_popis,
    nd_castkamena,
    S_MENA,
    nd_castkalocal,
    ucspol_mena,
    DATUM,
    spolecnost,
    s_ucet,
    s_unifSpol,
    id_budget,
    ID_CISTYPTRANSAKCE,
    ID_KTGPROJEKT,
    spol_doc,
    xidsl,
    budget_mena
  FROM
    DAT_BUDGETTRANSAKCE__ALL_QSK
  WHERE FK_GEN_ID = ( select max(FK_GEN_ID) from DB_DSA.Q_ALL_GENERATION where Q_FROM='QSK')    
UNION     --udaje za 2011
  select "ID","S_POPIS","ND_CASTKAMENA","S_MENA","ND_CASTKALOCAL","UCSPOL_MENA","DATUM","SPOLECNOST","S_UCET","S_UNIFSPOL","ID_BUDGET","ID_CISTYPTRANSAKCE","ID_KTGPROJEKT","SPOL_DOC","XIDSL","BUDGET_MENA"from VW_DAT_BUDGETTRANSAKCE_T2011
;


PROMPT Completed VW_DAT_BUDGETTRANSAKCE_X.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_DOKLADZDROJDATAGREGACE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_DAT_DOKLADZDROJDATAGREGACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_DAT_DOKLADZDROJDATAGREGACE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_DAT_DOKLADZDROJDATAGREGACE" ("ID", "ID_DOKLAD", "S_MENA", "S_UCET", "ID_KTGSPOLECNOST", "ND_CASTKAMENA", "ND_CASTKALOCAL", "ID_DOKLADPOLOZKA", "ID_DEFLISTBUNKA") AS 
  ( 
select a.ID, 
       a.ID_DOKLAD, 
	   a.S_MENA, 
	   a.S_UCET, 
	   a.ID_KTGSPOLECNOST, 
	   a.ND_CASTKAMENA, 
	   a.ND_CASTKALOCAL, 
	   a.ID_DOKLADPOLOZKA, 
	   p.ID_DEFLISTBUNKA 
from kp_dat_dokladpolozka p, kp_dat_dokladZdrojDatAgregace a 
where a.id_doklad = p.id_doklad and p.id = a.ID_DOKLADPOLOZKA)

;


PROMPT Completed VW_DAT_DOKLADZDROJDATAGREGACE.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_DAT_PROJEKTTRANSAKCEDOC.sql: 'utf-8' codec can't decode byte 0xc8 in position 654: invalid continuation byte


-- ============================================================================
-- Deploy: VW_DAT_SCHVALOVAK.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_DAT_SCHVALOVAK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_DAT_SCHVALOVAK
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_DAT_SCHVALOVAK" ("ID", "ID_CISDOKUMENT", "ID_KTGUCETNISPOLECNOST", "DT_DATUMZADANI", "ID_ZADAVATEL", "S_POPIS", "ID_TYPTRANSAKCE", "C_TYPIZOVANATRAN", "DT_TYPIZOVANAOD", "DT_TYPIZOVANADO", "S_MENA", "S_PISEMNE", "DT_DATUMZAUCTOVANI", "ID_SPOLECNOST", "S_CISLODOKLADU", "DT_DATUMSPLATNOSTI", "ID_APPUSER", "ID_ZAUCT", "ID_CISSTATUS", "C_POKLADNITRANSAKCE", "ID_GESTOR", "DT_GESTORSCHVALENO", "DT_POZADDATUMUHRADY", "DT_REALDATUMUHRADY", "DT_GESTORZAMITNUTO", "S_GESTORZAMITNUTO", "DT_ZADAVATELZAMITNUTO", "S_ZADAVATELZAMITNUTO", "ID_TYPIZLINK", "S_DUVODZRUSENI", "ID_UCSPOLUHRADA", "DT_ZAUCTUHRADA", "ID_ZAUCTUHRADA", "SPOLECNOST", "ZADAVATEL", "TYPTRAN", "ID_ZODPOVEDNAUCETNI", "ID_ADMINISTRATOR", "PROTISTRANA", "ZAUCTOVATEL", "POCETRADKU", "SUMARADKU", "ND_OBJ_CASTKA_VOLNA", "DOCSTATUS", "GESTOR", "EXISTUJE_NRADEK", "POSPLATNOSTI", "UCSPOLUHRADA", "ID_UHRADAUCETNI", "ID_UHRADAADMIN", "ZAUCTUHRADA", "ID_TYPPRECENENI", "TYPPRECENENI", "S_UCET", "S_UCET2", "APPUSER", "C_DPH", "ID_BUDGET", "ID_TTDEVELOPER", "ID_CISUHRADA", "UHRADA", "DT_UCETNIZAMITNUTO", "S_UCETNIZAMITNUTO", "ZODPOVEDNAUCETNI", "C_SPECIAL", "ID_KTGUCETNISPOLECNOST2", "SPOLECNOST2", "S_UCETB", "S_UCETB2", "C_TISKMAJETEK", "ID_KATEGORIE", "CERPAT_REZERVU", "DT_NAVYSENI_SCHVALENO", "DT_NAVYSENI_ZAMITNUTO", "S_NAVYSENI_ZAMITNUTO", "ID_NAVYSENI_MB", "MASTER_BUDGETER", "CISLOFA", "DATPRIJ", "DATDPH", "CASTKA", "FEIS_PRENOS", "DATODES", "TYP_FKT", "C_CAPEX_OPEX", "S_FEISTEXT", "DATVYSTAVENI") AS 
  SELECT d.ID, d.id_cisdokument, d.id_ktgucetnispolecnost, d.dt_datumzadani,
          d.id_zadavatel, d.s_popis, d.id_typtransakce, d.c_typizovanatran,
          d.dt_typizovanaod, d.dt_typizovanado, d.s_mena, d.s_pisemne,
          d.dt_datumzauctovani, d.id_spolecnost, d.s_cislodokladu,
          d.dt_datumsplatnosti, d.id_appuser, d.id_zauct, d.id_cisstatus,
          d.c_pokladnitransakce, d.id_gestor, 
          d.dt_gestorschvaleno,
          d.dt_pozaddatumuhrady, d.dt_realdatumuhrady, d.dt_gestorzamitnuto,
          d.s_gestorzamitnuto, d.dt_zadavatelzamitnuto,
          d.s_zadavatelzamitnuto, d.id_typizlink, d.s_duvodzruseni,
          d.id_ucspoluhrada, d.dt_zauctuhrada, d.id_zauctuhrada, s.s_nazev,
          (SELECT    u.s_titulypred
                  || ' '
                  || u.s_krestni
                  || ' '
                  || u.s_prijmeni
                  || ' '
                  || u.s_titulypo
                  || ' ('
                  || u.s_telefon
                  || ')'
             FROM ktg_appuser u
            WHERE u.ID = d.id_zadavatel),
          CASE
             WHEN (d.id_cisdokument = 4 AND b.id_ktgodbor IS NOT NULL)
                THEN (SELECT    oin.s_kod
                             || ' - '
                             || oin.s_nazev
                             || ' ('
                             || b.dt_platnostod
                             || ' - '
                             || b.dt_platnostdo
                             || ')'
                        FROM kp_ktg_odbor oin
                       WHERE oin.ID = b.id_ktgodbor)
             WHEN (d.id_cisdokument = 4 AND b.id_ktgprojekt IS NOT NULL)
                THEN (SELECT    pin.ID
                             || ' - '
                             || pin.s_nazev
                             || ' ('
                             || b.dt_platnostod
                             || ' - '
                             || b.dt_platnostdo
                             || ')'
                        FROM kp_ktg_projekt pin
                       WHERE pin.ID = b.id_ktgprojekt)
             ELSE    (SELECT 'TT: '||t.s_popis
                        FROM kp_cis_typtransakce t
                       WHERE t.ID = d.id_typtransakce)
                  || (SELECT DECODE (t.s_popis, NULL, '', ', ' || t.s_popis)
                        FROM kp_cis_typtransakce t
                       WHERE t.ID = d.id_ttdeveloper)
                  || ( SELECT decode(nvl(d.C_CAPEX_OPEX ,'X'),'X','', s_popis )
                        from kp_cis_typ_tran_capex_opex tc
                        where tc.c_id = d.C_CAPEX_OPEX )                        
          END,
          s.id_zodpovednaucetni, s.id_administrator,
          CASE
             WHEN (d.id_spolecnost IS NULL)
                THEN d.s_protistrana
             ELSE ps.s_nazev
          END,
          (SELECT    u.s_titulypred
                  || ' '
                  || u.s_krestni
                  || ' '
                  || u.s_prijmeni
                  || ' '
                  || u.s_titulypo
                  || ' ('
                  || u.s_telefon
                  || ')'
             FROM ktg_appuser u
            WHERE u.ID = d.id_zauct),
          (SELECT COUNT (*)
             FROM kp_dat_dokumentradek dr
            WHERE dr.id_dokument = d.ID), 
          (SELECT SUM (nd_castka)
                                             FROM kp_dat_dokumentradek dr
                                            WHERE dr.id_dokument = d.ID),
/*esc OBJ 01/09 */
          (SELECT SUM (nvl(ND_OBJ_CASTKA_VOLNA,0) )
                                             FROM kp_dat_dokumentradek dr
                                              WHERE dr.id_dokument = d.ID),                                            
          CASE
             WHEN (d.id_cisstatus = 2)
                THEN ds.s_popis || ' (' || d.id_typizlink || ')'
             ELSE ds.s_popis
          END docstatus,
          (SELECT    u.s_titulypred
                  || ' '
                  || u.s_krestni
                  || ' '
                  || u.s_prijmeni
                  || ' '
                  || u.s_titulypo
                  || ' ('
                  || u.s_telefon
                  || ')'
             FROM ktg_appuser u
            WHERE u.ID = d.id_gestor),
          CASE
             WHEN (EXISTS (
                      SELECT NULL
                        FROM kp_dat_dokumentradek dr
                       WHERE d.ID = dr.id_dokument
                         AND (   (    dr.dt_schvalenoodbor IS NULL
                                  AND id_odboroo IS NOT NULL
                                 )
                              OR (    dr.dt_schvalenoprojekt IS NULL
                                  AND id_projektman IS NOT NULL
                                 )
                              OR (    dr.dt_schvalenoucspol IS NULL
                                  AND id_ucspoloo IS NOT NULL
                                 )
                              OR (    dr.dt_schvalenotop IS NULL
                                  AND id_ucspoltop IS NOT NULL
                                 )
                             ))
                  )
                THEN '1'
             ELSE '0'
          END existuje_nradek,
          CASE
             WHEN (SYSDATE > d.dt_datumsplatnosti)
                THEN '1'
             ELSE '0'
          END posplatnosti, sur.s_nazev,
          sur.id_zodpovednaucetni id_uhradaucetni,
          sur.id_administrator id_uhradaadmin,
          (SELECT    u.s_titulypred
                  || ' '
                  || u.s_krestni
                  || ' '
                  || u.s_prijmeni
                  || ' '
                  || u.s_titulypo
                  || ' ('
                  || u.s_telefon
                  || ')'
             FROM ktg_appuser u
            WHERE u.ID = d.id_zauctuhrada),
          d.id_typpreceneni,
          (SELECT cft.s_popis
             FROM kp_cis_projektcashflowtyp cft
            WHERE cft.ID = d.id_typpreceneni) typpreceneni, d.s_ucet,
          d.s_ucet2,
          (SELECT    u.s_titulypred
                  || ' '
                  || u.s_krestni
                  || ' '
                  || u.s_prijmeni
                  || ' '
                  || u.s_titulypo
                  || ' ('
                  || u.s_telefon
                  || ')'
             FROM ktg_appuser u
            WHERE u.ID = d.id_appuser),
          d.c_dph, d.id_budget, d.id_ttdeveloper, d.id_cisuhrada,
          (SELECT uh.s_popis
             FROM kp_cis_dokumentuhrada uh
            WHERE uh.ID = d.id_cisuhrada) uhrada, d.dt_ucetnizamitnuto,
          d.s_ucetnizamitnuto,
          (SELECT    u.s_titulypred
                  || ' '
                  || u.s_krestni
                  || ' '
                  || u.s_prijmeni
                  || ' '
                  || u.s_titulypo
                  || ' ('
                  || u.s_telefon
                  || ')'
             FROM ktg_appuser u
            WHERE u.ID = s.id_zodpovednaucetni),
          (SELECT t.c_special
             FROM kp_cis_typtransakce t
            WHERE d.id_typtransakce = t.ID) c_special,
          d.id_ktgucetnispolecnost2,
          (SELECT s2.s_nazev
             FROM kp_ktg_ucetnispolecnost s2
            WHERE s2.ID = d.id_ktgucetnispolecnost2) spolecnost2, d.s_ucetb,
          d.s_ucetb2, (SELECT t.c_tiskmajetek
                         FROM kp_cis_typtransakce t
                        WHERE d.id_typtransakce = t.ID) c_tiskmajetek,
		  s.ID_KATEGORIE,
      d.cerpat_rezervu,
      d.DT_NAVYSENI_SCHVALENO,
      d.DT_NAVYSENI_ZAMITNUTO,
      d.S_NAVYSENI_ZAMITNUTO,
      d.ID_NAVYSENI_MB,
      (SELECT    u.s_titulypred 
        || ' ' 
        || u.s_krestni 
        || ' ' 
        || u.s_prijmeni 
        || ' ' 
        || u.s_titulypo 
        || ' (' 
        || u.s_telefon 
        || ')' 
      FROM ktg_appuser u 
      WHERE u.ID = d.ID_NAVYSENI_MB),      
      d.CISLOFA,   
      d.DATPRIJ	,	
      d.DATDPH ,	
      d.CASTKA  , 
      d.FEIS_PRENOS	,
      d.DATODES ,	 
      d.TYP_FKT,
      d.C_CAPEX_OPEX,
      d.S_FEISTEXT,
      d.DATVYSTAVENI  -- 03/2013 datum vystaveni faktury
     FROM kp_dat_dokument d,
          kp_ktg_ucetnispolecnost s,
          kp_ktg_spolecnost ps,
          kp_cis_dokumentstatus ds,
          kp_ktg_ucetnispolecnost sur,
          kp_dat_budget b
    WHERE d.id_ktgucetnispolecnost = s.ID(+)
      AND d.id_spolecnost = ps.ID(+)
      AND d.id_cisstatus = ds.ID(+)
      AND d.id_ucspoluhrada = sur.ID(+)
      AND d.id_budget = b.ID(+)
--esc 24.03.2017 
--vsetky SL do 20:00, potom obmedzene
    and (
            --esc 14.12.2017
                ( d.DT_DATUMZADANI  > trunc(sysdate-365,'YEAR') and d.C_TYPIZOVANATRAN !=1)
              --( d.DT_DATUMZADANI  > trunc(sysdate-365*2,'YEAR') and d.C_TYPIZOVANATRAN !=1)
           OR ( d.DT_DATUMZADANI  > to_date('01.01.2005','DD.MM.YYYY') 
           and to_number(to_char(sysdate,'HH24') ) between 08 and 20 )            --v case 5:00 - 20:00 kazdy den, vsetko
          -- and to_number(to_char(sysdate,'HH24') ) < 20 )            --v case 0:00 - 20:00 kazdy den, vsetko
          --esc24.10.2016
          /*
          and (
              ( d.DT_DATUMZADANI  > trunc(sysdate-365*2,'YEAR') and d.C_TYPIZOVANATRAN !=1)
           OR ( d.DT_DATUMZADANI  > trunc(sysdate-365*8,'YEAR') and d.C_TYPIZOVANATRAN =1)
           --esc 9.3.2017  docasne pre Danube a pobocku na vsetko pred zaciatkom generovania.
           OR ( d.DT_DATUMZADANI  > trunc(sysdate-365*15,'YEAR') and d.id_ktgucetnispolecnost = 6092 and to_number(to_char(sysdate,'HH24') ) < 20)           
           OR ( d.DT_DATUMZADANI  > trunc(sysdate-365*15,'YEAR') and d.id_ktgucetnispolecnost = 5000 and to_number(to_char(sysdate,'HH24') ) < 20)           
          */
)
;


PROMPT Completed VW_DAT_SCHVALOVAK.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_DAT_SCHVALOVAKRADEK.sql: 'utf-8' codec can't decode byte 0xc8 in position 5785: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_DAT_SCHVALOVAKRADEK_ESC.sql: 'utf-8' codec can't decode byte 0xc8 in position 7575: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_DAT_SCHVALOVAKRADEK_G.sql: 'utf-8' codec can't decode byte 0xc8 in position 5724: invalid continuation byte


-- ============================================================================
-- Deploy: VW_DAT_SCHVALOVAK_ALL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_DAT_SCHVALOVAK_ALL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_DAT_SCHVALOVAK_ALL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_DAT_SCHVALOVAK_ALL" ("ID", "ID_CISDOKUMENT", "ID_KTGUCETNISPOLECNOST", "DT_DATUMZADANI", "ID_ZADAVATEL", "S_POPIS", "ID_TYPTRANSAKCE", "C_TYPIZOVANATRAN", "DT_TYPIZOVANAOD", "DT_TYPIZOVANADO", "S_MENA", "S_PISEMNE", "DT_DATUMZAUCTOVANI", "ID_SPOLECNOST", "S_CISLODOKLADU", "DT_DATUMSPLATNOSTI", "ID_APPUSER", "ID_ZAUCT", "ID_CISSTATUS", "C_POKLADNITRANSAKCE", "ID_GESTOR", "DT_GESTORSCHVALENO", "DT_POZADDATUMUHRADY", "DT_REALDATUMUHRADY", "DT_GESTORZAMITNUTO", "S_GESTORZAMITNUTO", "DT_ZADAVATELZAMITNUTO", "S_ZADAVATELZAMITNUTO", "ID_TYPIZLINK", "S_DUVODZRUSENI", "ID_UCSPOLUHRADA", "DT_ZAUCTUHRADA", "ID_ZAUCTUHRADA", "SPOLECNOST", "ZADAVATEL", "TYPTRAN", "ID_ZODPOVEDNAUCETNI", "ID_ADMINISTRATOR", "PROTISTRANA", "ZAUCTOVATEL", "POCETRADKU", "SUMARADKU", "ND_OBJ_CASTKA_VOLNA", "DOCSTATUS", "GESTOR", "EXISTUJE_NRADEK", "POSPLATNOSTI", "UCSPOLUHRADA", "ID_UHRADAUCETNI", "ID_UHRADAADMIN", "ZAUCTUHRADA", "ID_TYPPRECENENI", "TYPPRECENENI", "S_UCET", "S_UCET2", "APPUSER", "C_DPH", "ID_BUDGET", "ID_TTDEVELOPER", "ID_CISUHRADA", "UHRADA", "DT_UCETNIZAMITNUTO", "S_UCETNIZAMITNUTO", "ZODPOVEDNAUCETNI", "C_SPECIAL", "ID_KTGUCETNISPOLECNOST2", "SPOLECNOST2", "S_UCETB", "S_UCETB2", "C_TISKMAJETEK", "ID_KATEGORIE", "CERPAT_REZERVU", "DT_NAVYSENI_SCHVALENO", "DT_NAVYSENI_ZAMITNUTO", "S_NAVYSENI_ZAMITNUTO", "ID_NAVYSENI_MB", "MASTER_BUDGETER", "CISLOFA", "DATPRIJ", "DATDPH", "CASTKA", "FEIS_PRENOS", "DATODES", "TYP_FKT", "C_CAPEX_OPEX", "S_FEISTEXT", "DATVYSTAVENI", "DR_ID_RADKU", "DR_ID_ODBOR", "DR_ODBOR", "DR_ID_PROJEKT", "DR_PROJEKT", "DR_ND_CASTKA", "DR_ID_ODBOROO", "DR_ODBOROO", "DR_ID_PROJEKTMAN", "DR_PROJEKTMAN", "DR_ID_UCSPOLOO", "DR_UCSPOLOO", "DR_ID_UCSPOLTOP", "DR_UCSPOLTOP", "DR_DT_DATUMZADANI", "DR_C_ZOBJEDNAVKY", "DR_ID_ZAMITNUTO", "DR_DT_ZAMITNUTO", "DR_S_ZAMITNUTO", "DR_ID_ODBOROOREAL", "DR_ID_PROJEKTMANREAL", "DR_ID_UCSPOLOOREAL", "DR_ID_UCSPOLTOPREAL", "DR_ID_TYPTRANSAKCE", "DR_ID_PREFAKT", "DR_C_KPREFAKT") AS 
  SELECT d.ID, d.id_cisdokument, d.id_ktgucetnispolecnost, d.dt_datumzadani,
          d.id_zadavatel, d.s_popis, d.id_typtransakce, d.c_typizovanatran,
          d.dt_typizovanaod, d.dt_typizovanado, d.s_mena, d.s_pisemne,
          d.dt_datumzauctovani, d.id_spolecnost, d.s_cislodokladu,
          d.dt_datumsplatnosti, d.id_appuser, d.id_zauct, d.id_cisstatus,
          d.c_pokladnitransakce, d.id_gestor, d.dt_gestorschvaleno,
          d.dt_pozaddatumuhrady, d.dt_realdatumuhrady, d.dt_gestorzamitnuto,
          d.s_gestorzamitnuto, d.dt_zadavatelzamitnuto,
          d.s_zadavatelzamitnuto, d.id_typizlink, d.s_duvodzruseni,
          d.id_ucspoluhrada, d.dt_zauctuhrada, d.id_zauctuhrada, s.s_nazev,
          (SELECT    u.s_titulypred
                  || ' '
                  || u.s_krestni
                  || ' '
                  || u.s_prijmeni
                  || ' '
                  || u.s_titulypo
                  || ' ('
                  || u.s_telefon
                  || ')'
             FROM ktg_appuser u
            WHERE u.ID = d.id_zadavatel),
          CASE
             WHEN (d.id_cisdokument = 4 AND b.id_ktgodbor IS NOT NULL)
                THEN (SELECT    oin.s_kod
                             || ' - '
                             || oin.s_nazev
                             || ' ('
                             || b.dt_platnostod
                             || ' - '
                             || b.dt_platnostdo
                             || ')'
                        FROM kp_ktg_odbor oin
                       WHERE oin.ID = b.id_ktgodbor)
             WHEN (d.id_cisdokument = 4 AND b.id_ktgprojekt IS NOT NULL)
                THEN (SELECT    pin.ID
                             || ' - '
                             || pin.s_nazev
                             || ' ('
                             || b.dt_platnostod
                             || ' - '
                             || b.dt_platnostdo
                             || ')'
                        FROM kp_ktg_projekt pin
                       WHERE pin.ID = b.id_ktgprojekt)
             ELSE    (SELECT 'TT: '||t.s_popis
                        FROM kp_cis_typtransakce t
                       WHERE t.ID = d.id_typtransakce)
                  || (SELECT DECODE (t.s_popis, NULL, '', ', ' || t.s_popis)
                        FROM kp_cis_typtransakce t
                       WHERE t.ID = d.id_ttdeveloper)
                  || ( SELECT decode(nvl(d.C_CAPEX_OPEX ,'X'),'X','', s_popis )
                        from kp_cis_typ_tran_capex_opex tc
                        where tc.c_id = d.C_CAPEX_OPEX )               
          END,
          s.id_zodpovednaucetni, s.id_administrator,
          CASE
             WHEN (d.id_spolecnost IS NULL)
                THEN d.s_protistrana
             ELSE ps.s_nazev
          END,
          (SELECT    u.s_titulypred
                  || ' '
                  || u.s_krestni
                  || ' '
                  || u.s_prijmeni
                  || ' '
                  || u.s_titulypo
                  || ' ('
                  || u.s_telefon
                  || ')'
             FROM ktg_appuser u
            WHERE u.ID = d.id_zauct),
          (SELECT COUNT (*)
             FROM kp_dat_dokumentradek dr
            WHERE dr.id_dokument = d.ID), 
          (SELECT SUM (nd_castka)
                                             FROM kp_dat_dokumentradek dr
                                            WHERE dr.id_dokument = d.ID),
/*esc OBJ 01/09 */
          (SELECT SUM (nvl(ND_OBJ_CASTKA_VOLNA,0) )
                                             FROM kp_dat_dokumentradek dr
                                              WHERE dr.id_dokument = d.ID),                                            
          CASE
             WHEN (d.id_cisstatus = 2)
                THEN ds.s_popis || ' (' || d.id_typizlink || ')'
             ELSE ds.s_popis
          END docstatus,
          (SELECT    u.s_titulypred
                  || ' '
                  || u.s_krestni
                  || ' '
                  || u.s_prijmeni
                  || ' '
                  || u.s_titulypo
                  || ' ('
                  || u.s_telefon
                  || ')'
             FROM ktg_appuser u
            WHERE u.ID = d.id_gestor),
          CASE
             WHEN (EXISTS (
                      SELECT NULL
                        FROM kp_dat_dokumentradek dr
                       WHERE d.ID = dr.id_dokument
                         AND (   (    dr.dt_schvalenoodbor IS NULL
                                  AND id_odboroo IS NOT NULL
                                 )
                              OR (    dr.dt_schvalenoprojekt IS NULL
                                  AND id_projektman IS NOT NULL
                                 )
                              OR (    dr.dt_schvalenoucspol IS NULL
                                  AND id_ucspoloo IS NOT NULL
                                 )
                              OR (    dr.dt_schvalenotop IS NULL
                                  AND id_ucspoltop IS NOT NULL
                                 )
                             ))
                  )
                THEN '1'
             ELSE '0'
          END existuje_nradek,
          CASE
             WHEN (SYSDATE > d.dt_datumsplatnosti)
                THEN '1'
             ELSE '0'
          END posplatnosti, sur.s_nazev,
          sur.id_zodpovednaucetni id_uhradaucetni,
          sur.id_administrator id_uhradaadmin,
          (SELECT    u.s_titulypred
                  || ' '
                  || u.s_krestni
                  || ' '
                  || u.s_prijmeni
                  || ' '
                  || u.s_titulypo
                  || ' ('
                  || u.s_telefon
                  || ')'
             FROM ktg_appuser u
            WHERE u.ID = d.id_zauctuhrada),
          d.id_typpreceneni,
          (SELECT cft.s_popis
             FROM kp_cis_projektcashflowtyp cft
            WHERE cft.ID = d.id_typpreceneni) typpreceneni, d.s_ucet,
          d.s_ucet2,
          (SELECT    u.s_titulypred
                  || ' '
                  || u.s_krestni
                  || ' '
                  || u.s_prijmeni
                  || ' '
                  || u.s_titulypo
                  || ' ('
                  || u.s_telefon
                  || ')'
             FROM ktg_appuser u
            WHERE u.ID = d.id_appuser),
          d.c_dph, d.id_budget, d.id_ttdeveloper, d.id_cisuhrada,
          (SELECT uh.s_popis
             FROM kp_cis_dokumentuhrada uh
            WHERE uh.ID = d.id_cisuhrada) uhrada, d.dt_ucetnizamitnuto,
          d.s_ucetnizamitnuto,
          (SELECT    u.s_titulypred
                  || ' '
                  || u.s_krestni
                  || ' '
                  || u.s_prijmeni
                  || ' '
                  || u.s_titulypo
                  || ' ('
                  || u.s_telefon
                  || ')'
             FROM ktg_appuser u
            WHERE u.ID = s.id_zodpovednaucetni),
          (SELECT t.c_special
             FROM kp_cis_typtransakce t
            WHERE d.id_typtransakce = t.ID) c_special,
          d.id_ktgucetnispolecnost2,
          (SELECT s2.s_nazev
             FROM kp_ktg_ucetnispolecnost s2
            WHERE s2.ID = d.id_ktgucetnispolecnost2) spolecnost2, d.s_ucetb,
          d.s_ucetb2, (SELECT t.c_tiskmajetek
                         FROM kp_cis_typtransakce t
                        WHERE d.id_typtransakce = t.ID) c_tiskmajetek,
		  s.ID_KATEGORIE,
      d.cerpat_rezervu,
      d.DT_NAVYSENI_SCHVALENO,
      d.DT_NAVYSENI_ZAMITNUTO,
      d.S_NAVYSENI_ZAMITNUTO,
      d.ID_NAVYSENI_MB,
      (SELECT    u.s_titulypred 
        || ' ' 
        || u.s_krestni 
        || ' ' 
        || u.s_prijmeni 
        || ' ' 
        || u.s_titulypo 
        || ' (' 
        || u.s_telefon 
        || ')' 
      FROM ktg_appuser u 
      WHERE u.ID = d.ID_NAVYSENI_MB),
--2014
      d.CISLOFA,   
      d.DATPRIJ	,	
      d.DATDPH ,	
      d.CASTKA  , 
      d.FEIS_PRENOS	,
      d.DATODES ,	 
      d.TYP_FKT,
      d.C_CAPEX_OPEX,
      d.S_FEISTEXT,
      d.DATVYSTAVENI,  -- 03/2013 datum vystaveni faktury        
        dr.id,
        dr.id_odbor,
        --o.s_nazev||' - '|| o.spolecnost o_odbor,
        --o.s_nazev||' - '|| o.spolecnost o_odbor,
        o.s_nazev||' - '||(select usp.s_nazev
                            from kp_ktg_ucetnispolecnost usp            
                            where o.id_ktgucetnispolecnost = usp.id),
        dr.id_projekt,
        p.s_nazev,
        dr.nd_castka,
        dr.id_odboroo,
        (SELECT   u.s_krestni
                  || ' '
                  || u.s_prijmeni
             FROM ktg_appuser u
            WHERE u.ID = dr.id_odboroo),
        dr.id_projektman,
        (SELECT   u.s_krestni
                  || ' '
                  || u.s_prijmeni
             FROM ktg_appuser u
            WHERE u.ID = dr.id_projektman),
        dr.id_ucspoloo,
        (SELECT   u.s_krestni
                  || ' '
                  || u.s_prijmeni
             FROM ktg_appuser u
            WHERE u.ID =  dr.id_ucspoloo),        
        dr.id_ucspoltop,
        (SELECT   u.s_krestni
                  || ' '
                  || u.s_prijmeni
             FROM ktg_appuser u
            WHERE u.ID =  dr.id_ucspoltop),                
        dr.dt_datumzadani,
        dr.c_zobjednavky,
        dr.id_zamitnuto,
        dr.dt_zamitnuto,
        dr.s_zamitnuto,
        dr.id_odborooreal,
        dr.id_projektmanreal,
        dr.id_ucspolooreal,
        dr.id_ucspoltopreal,
        dr.id_typtransakce,                
        dr.id_prefakt,
        dr.c_kprefakt                
     FROM kp_dat_dokument d,
          kp_ktg_ucetnispolecnost s,
          kp_ktg_spolecnost ps,
          kp_cis_dokumentstatus ds,
          kp_ktg_ucetnispolecnost sur,
          kp_dat_budget b,
          kp_dat_dokumentradek dr,
          kp_ktg_odbor o,
          --vw_ktg_odbor o,
          kp_ktg_projekt p
    WHERE 
    d.id  = dr.id_dokument (+)
    and   DR.ID_ODBOR    = o.id (+)
    and   DR.ID_PROJEKT  = p.id (+)
    and 
    d.id_ktgucetnispolecnost = s.ID(+)
      AND d.id_spolecnost = ps.ID(+)
      AND d.id_cisstatus = ds.ID(+)
      AND d.id_ucspoluhrada = sur.ID(+)
      AND d.id_budget = b.ID(+)
--order by  d.ID desc,  DR.ID;
;


PROMPT Completed VW_DAT_SCHVALOVAK_ALL.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_SCHVALOVAK_DANKA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_DAT_SCHVALOVAK_DANKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_DAT_SCHVALOVAK_DANKA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_DAT_SCHVALOVAK_DANKA" ("ID", "ID_CISDOKUMENT", "ID_KTGUCETNISPOLECNOST", "DT_DATUMZADANI", "ID_ZADAVATEL", "S_POPIS", "ID_TYPTRANSAKCE", "C_TYPIZOVANATRAN", "DT_TYPIZOVANAOD", "DT_TYPIZOVANADO", "S_MENA", "S_PISEMNE", "DT_DATUMZAUCTOVANI", "ID_SPOLECNOST", "S_CISLODOKLADU", "DT_DATUMSPLATNOSTI", "ID_APPUSER", "ID_ZAUCT", "ID_CISSTATUS", "C_POKLADNITRANSAKCE", "ID_GESTOR", "DT_GESTORSCHVALENO", "DT_POZADDATUMUHRADY", "DT_REALDATUMUHRADY", "DT_GESTORZAMITNUTO", "S_GESTORZAMITNUTO", "DT_ZADAVATELZAMITNUTO", "S_ZADAVATELZAMITNUTO", "ID_TYPIZLINK", "S_DUVODZRUSENI", "ID_UCSPOLUHRADA", "DT_ZAUCTUHRADA", "ID_ZAUCTUHRADA", "SPOLECNOST", "ZADAVATEL", "TYPTRAN", "ID_ZODPOVEDNAUCETNI", "ID_ADMINISTRATOR", "PROTISTRANA", "ZAUCTOVATEL", "POCETRADKU", "SUMARADKU", "ND_OBJ_CASTKA_VOLNA", "DOCSTATUS", "GESTOR", "EXISTUJE_NRADEK", "POSPLATNOSTI", "UCSPOLUHRADA", "ID_UHRADAUCETNI", "ID_UHRADAADMIN", "ZAUCTUHRADA", "ID_TYPPRECENENI", "TYPPRECENENI", "S_UCET", "S_UCET2", "APPUSER", "C_DPH", "ID_BUDGET", "ID_TTDEVELOPER", "ID_CISUHRADA", "UHRADA", "DT_UCETNIZAMITNUTO", "S_UCETNIZAMITNUTO", "ZODPOVEDNAUCETNI", "C_SPECIAL", "ID_KTGUCETNISPOLECNOST2", "SPOLECNOST2", "S_UCETB", "S_UCETB2", "C_TISKMAJETEK", "ID_KATEGORIE", "CERPAT_REZERVU", "DT_NAVYSENI_SCHVALENO", "DT_NAVYSENI_ZAMITNUTO", "S_NAVYSENI_ZAMITNUTO", "ID_NAVYSENI_MB", "MASTER_BUDGETER", "DR_ID_RADKU", "DR_ID_ODBOR", "DR_ODBOR", "DR_ID_PROJEKT", "DR_PROJEKT", "DR_ND_CASTKA", "DR_ID_ODBOROO", "DR_ODBOROO", "DR_ID_PROJEKTMAN", "DR_PROJEKTMAN", "DR_ID_UCSPOLOO", "DR_UCSPOLOO", "DR_ID_UCSPOLTOP", "DR_UCSPOLTOP", "DR_DT_DATUMZADANI", "DR_C_ZOBJEDNAVKY", "DR_ID_ZAMITNUTO", "DR_DT_ZAMITNUTO", "DR_S_ZAMITNUTO", "DR_ID_ODBOROOREAL", "DR_ID_PROJEKTMANREAL", "DR_ID_UCSPOLOOREAL", "DR_ID_UCSPOLTOPREAL", "DR_ID_TYPTRANSAKCE", "DR_ID_PREFAKT", "DR_C_KPREFAKT", "DR_KOMENTAR") AS 
  SELECT d.ID, d.id_cisdokument, d.id_ktgucetnispolecnost, d.dt_datumzadani,
          d.id_zadavatel, d.s_popis, d.id_typtransakce, d.c_typizovanatran,
          d.dt_typizovanaod, d.dt_typizovanado, d.s_mena, d.s_pisemne,
          d.dt_datumzauctovani, d.id_spolecnost, d.s_cislodokladu,
          d.dt_datumsplatnosti, d.id_appuser, d.id_zauct, d.id_cisstatus,
          d.c_pokladnitransakce, d.id_gestor, d.dt_gestorschvaleno,
          d.dt_pozaddatumuhrady, d.dt_realdatumuhrady, d.dt_gestorzamitnuto,
          d.s_gestorzamitnuto, d.dt_zadavatelzamitnuto,
          d.s_zadavatelzamitnuto, d.id_typizlink, d.s_duvodzruseni,
          d.id_ucspoluhrada, d.dt_zauctuhrada, d.id_zauctuhrada, s.s_nazev,
          (SELECT    u.s_titulypred
                  || ' '
                  || u.s_krestni
                  || ' '
                  || u.s_prijmeni
                  || ' '
                  || u.s_titulypo
                  || ' ('
                  || u.s_telefon
                  || ')'
             FROM ktg_appuser u
            WHERE u.ID = d.id_zadavatel),
          CASE
             WHEN (d.id_cisdokument = 4 AND b.id_ktgodbor IS NOT NULL)
                THEN (SELECT    oin.s_kod
                             || ' - '
                             || oin.s_nazev
                             || ' ('
                             || b.dt_platnostod
                             || ' - '
                             || b.dt_platnostdo
                             || ')'
                        FROM kp_ktg_odbor oin
                       WHERE oin.ID = b.id_ktgodbor)
             WHEN (d.id_cisdokument = 4 AND b.id_ktgprojekt IS NOT NULL)
                THEN (SELECT    pin.ID
                             || ' - '
                             || pin.s_nazev
                             || ' ('
                             || b.dt_platnostod
                             || ' - '
                             || b.dt_platnostdo
                             || ')'
                        FROM kp_ktg_projekt pin
                       WHERE pin.ID = b.id_ktgprojekt)
             ELSE    (SELECT t.s_popis
                        FROM kp_cis_typtransakce t
                       WHERE t.ID = d.id_typtransakce)
                  || (SELECT DECODE (t.s_popis, NULL, '', ', ' || t.s_popis)
                        FROM kp_cis_typtransakce t
                       WHERE t.ID = d.id_ttdeveloper)
          END,
          s.id_zodpovednaucetni, s.id_administrator,
          CASE
             WHEN (d.id_spolecnost IS NULL)
                THEN d.s_protistrana
             ELSE ps.s_nazev
          END,
          (SELECT    u.s_titulypred
                  || ' '
                  || u.s_krestni
                  || ' '
                  || u.s_prijmeni
                  || ' '
                  || u.s_titulypo
                  || ' ('
                  || u.s_telefon
                  || ')'
             FROM ktg_appuser u
            WHERE u.ID = d.id_zauct),
          (SELECT COUNT (*)
             FROM kp_dat_dokumentradek dr
            WHERE dr.id_dokument = d.ID), 
          (SELECT SUM (nd_castka)
                                             FROM kp_dat_dokumentradek dr
                                            WHERE dr.id_dokument = d.ID),
/*esc OBJ 01/09 */
          (SELECT SUM (nvl(ND_OBJ_CASTKA_VOLNA,0) )
                                             FROM kp_dat_dokumentradek dr
                                              WHERE dr.id_dokument = d.ID),                                            
          CASE
             WHEN (d.id_cisstatus = 2)
                THEN ds.s_popis || ' (' || d.id_typizlink || ')'
             ELSE ds.s_popis
          END docstatus,
          (SELECT    u.s_titulypred
                  || ' '
                  || u.s_krestni
                  || ' '
                  || u.s_prijmeni
                  || ' '
                  || u.s_titulypo
                  || ' ('
                  || u.s_telefon
                  || ')'
             FROM ktg_appuser u
            WHERE u.ID = d.id_gestor),
          CASE
             WHEN (EXISTS (
                      SELECT NULL
                        FROM kp_dat_dokumentradek dr
                       WHERE d.ID = dr.id_dokument
                         AND (   (    dr.dt_schvalenoodbor IS NULL
                                  AND id_odboroo IS NOT NULL
                                 )
                              OR (    dr.dt_schvalenoprojekt IS NULL
                                  AND id_projektman IS NOT NULL
                                 )
                              OR (    dr.dt_schvalenoucspol IS NULL
                                  AND id_ucspoloo IS NOT NULL
                                 )
                              OR (    dr.dt_schvalenotop IS NULL
                                  AND id_ucspoltop IS NOT NULL
                                 )
                             ))
                  )
                THEN '1'
             ELSE '0'
          END existuje_nradek,
          CASE
             WHEN (SYSDATE > d.dt_datumsplatnosti)
                THEN '1'
             ELSE '0'
          END posplatnosti, sur.s_nazev,
          sur.id_zodpovednaucetni id_uhradaucetni,
          sur.id_administrator id_uhradaadmin,
          (SELECT    u.s_titulypred
                  || ' '
                  || u.s_krestni
                  || ' '
                  || u.s_prijmeni
                  || ' '
                  || u.s_titulypo
                  || ' ('
                  || u.s_telefon
                  || ')'
             FROM ktg_appuser u
            WHERE u.ID = d.id_zauctuhrada),
          d.id_typpreceneni,
          (SELECT cft.s_popis
             FROM kp_cis_projektcashflowtyp cft
            WHERE cft.ID = d.id_typpreceneni) typpreceneni, d.s_ucet,
          d.s_ucet2,
          (SELECT    u.s_titulypred
                  || ' '
                  || u.s_krestni
                  || ' '
                  || u.s_prijmeni
                  || ' '
                  || u.s_titulypo
                  || ' ('
                  || u.s_telefon
                  || ')'
             FROM ktg_appuser u
            WHERE u.ID = d.id_appuser),
          d.c_dph, d.id_budget, d.id_ttdeveloper, d.id_cisuhrada,
          (SELECT uh.s_popis
             FROM kp_cis_dokumentuhrada uh
            WHERE uh.ID = d.id_cisuhrada) uhrada, d.dt_ucetnizamitnuto,
          d.s_ucetnizamitnuto,
          (SELECT    u.s_titulypred
                  || ' '
                  || u.s_krestni
                  || ' '
                  || u.s_prijmeni
                  || ' '
                  || u.s_titulypo
                  || ' ('
                  || u.s_telefon
                  || ')'
             FROM ktg_appuser u
            WHERE u.ID = s.id_zodpovednaucetni),
          (SELECT t.c_special
             FROM kp_cis_typtransakce t
            WHERE d.id_typtransakce = t.ID) c_special,
          d.id_ktgucetnispolecnost2,
          (SELECT s2.s_nazev
             FROM kp_ktg_ucetnispolecnost s2
            WHERE s2.ID = d.id_ktgucetnispolecnost2) spolecnost2, d.s_ucetb,
          d.s_ucetb2, (SELECT t.c_tiskmajetek
                         FROM kp_cis_typtransakce t
                        WHERE d.id_typtransakce = t.ID) c_tiskmajetek,
		  s.ID_KATEGORIE,
      d.cerpat_rezervu,
      d.DT_NAVYSENI_SCHVALENO,
      d.DT_NAVYSENI_ZAMITNUTO,
      d.S_NAVYSENI_ZAMITNUTO,
      d.ID_NAVYSENI_MB,
      (SELECT    u.s_titulypred 
        || ' ' 
        || u.s_krestni 
        || ' ' 
        || u.s_prijmeni 
        || ' ' 
        || u.s_titulypo 
        || ' (' 
        || u.s_telefon 
        || ')' 
      FROM ktg_appuser u 
      WHERE u.ID = d.ID_NAVYSENI_MB)      
        ,
        dr.id,
        dr.id_odbor,
        --o.s_nazev||' - '|| o.spolecnost o_odbor,
        --o.s_nazev||' - '|| o.spolecnost o_odbor,
        o.s_nazev||' - '||(select usp.s_nazev
                            from kp_ktg_ucetnispolecnost usp            
                            where o.id_ktgucetnispolecnost = usp.id),
        dr.id_projekt,
        p.s_nazev,
        dr.nd_castka,
        dr.id_odboroo,
        (SELECT   u.s_krestni
                  || ' '
                  || u.s_prijmeni
             FROM ktg_appuser u
            WHERE u.ID = dr.id_odboroo),
        dr.id_projektman,
        (SELECT   u.s_krestni
                  || ' '
                  || u.s_prijmeni
             FROM ktg_appuser u
            WHERE u.ID = dr.id_projektman),
        dr.id_ucspoloo,
        (SELECT   u.s_krestni
                  || ' '
                  || u.s_prijmeni
             FROM ktg_appuser u
            WHERE u.ID =  dr.id_ucspoloo),        
        dr.id_ucspoltop,
        (SELECT   u.s_krestni
                  || ' '
                  || u.s_prijmeni
             FROM ktg_appuser u
            WHERE u.ID =  dr.id_ucspoltop),                
        dr.dt_datumzadani,
        dr.c_zobjednavky,
        dr.id_zamitnuto,
        dr.dt_zamitnuto,
        dr.s_zamitnuto,
        dr.id_odborooreal,
        dr.id_projektmanreal,
        dr.id_ucspolooreal,
        dr.id_ucspoltopreal,
        dr.id_typtransakce,                
        dr.id_prefakt,
        dr.c_kprefakt ,
        dr.s_komentar
     FROM kp_dat_dokument d,
          kp_ktg_ucetnispolecnost s,
          kp_ktg_spolecnost ps,
          kp_cis_dokumentstatus ds,
          kp_ktg_ucetnispolecnost sur,
          kp_dat_budget b,
          kp_dat_dokumentradek dr,
          kp_ktg_odbor o,
          --vw_ktg_odbor o,
          kp_ktg_projekt p
    WHERE 
    d.id  = dr.id_dokument (+)
    and   DR.ID_ODBOR    = o.id (+)
    and   DR.ID_PROJEKT  = p.id (+)
    and 
    d.id_ktgucetnispolecnost = s.ID(+)
      AND d.id_spolecnost = ps.ID(+)
      AND d.id_cisstatus = ds.ID(+)
      AND d.id_ucspoluhrada = sur.ID(+)
      AND d.id_budget = b.ID(+)
--order by  d.ID desc,  DR.ID;
;


PROMPT Completed VW_DAT_SCHVALOVAK_DANKA.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DAT_SLPROJEKTDEVELOPER.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_DAT_SLPROJEKTDEVELOPER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_DAT_SLPROJEKTDEVELOPER
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_DAT_SLPROJEKTDEVELOPER" ("ID_PROJEKT", "ID_DOKUMENT", "ND_CASTKA", "S_MENA", "S_POPIS", "DT_DATUMZADANI", "TYPTRANSAKCE") AS 
  select dr.ID_PROJEKT, 
	   dr.id_dokument, 
	   dr.nd_castka, 
	   d.S_MENA, 
	   d.S_POPIS, 
	   d.DT_DATUMZADANI, 
	   (select tt.S_POPIS from kp_cis_typTransakce tt where tt.ID = d.ID_TTDEVELOPER) typTransakce 
from (select dr.ID_PROJEKT, 
	 		 dr.id_dokument, 
			 sum(dr.ND_CASTKA) nd_castka 
	  from kp_dat_dokumentRadek dr 
	  where dr.ID_PROJEKT <> 1000001 
	  group by dr.ID_PROJEKT, dr.ID_DOKUMENT) dr, 
	 kp_dat_dokument d 
where d.id = dr.ID_DOKUMENT 
  and d.ID_TTDEVELOPER is not null 
  and d.ID_CISSTATUS in (0,2) 
order by dr.ID_PROJEKT, d.DT_DATUMZADANI, d.ID_TTDEVELOPER

;


PROMPT Completed VW_DAT_SLPROJEKTDEVELOPER.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DOKLADNASTROJ.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_DOKLADNASTROJ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_DOKLADNASTROJ
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_DOKLADNASTROJ" ("ID", "ID_KTGTYPNASTROJE", "C_TYPPORTFOLIO", "ID_KTGSPOLECNOSTPROTISTRANA", "S_PRODUKTUCET", "ID_KTGTYPOPERACE", "C_TYPVYKAZ", "S_CASROZLISENIMENA", "C_DENOMINACE", "C_RESTRUKTUALIZACEDLUHU", "DT_DATUMSPLATNOST", "C_TYPUROKSAZBA", "ND_UROKPRISPLATNOSTI", "C_KOMERCNIUCEL", "C_ODVOLATELNEZAJISTENI", "DT_DATUMFLOATNEXT", "ID_PARENT", "C_POZICEUCET", "PC_ID", "TMP_P1", "TMP_P2", "S_POPIS", "ID_KTGSPOLECNOST", "ID_DOKLAD", "DT_DATUMDOKLAD", "C_AKTIVNI", "S_UZIVATEL", "DT_ZALOZENO", "ID_KTGUCETNISPOLECNOSTVYKAZ", "ID_KTGSUBKONSOLIDACE", "ID_CASTKA", "ID_NASTROJ", "ID_TYP", "C_HLAVA", "S_MENA", "S_UCET", "ND_CASTKAMENA", "ND_CASTKALOCAL", "NL_RADEK") AS 
  SELECT 
n.ID, ID_KTGTYPNASTROJE, C_TYPPORTFOLIO, 
   ID_KTGSPOLECNOSTPROTISTRANA, S_PRODUKTUCET, ID_KTGTYPOPERACE, 
   C_TYPVYKAZ, S_CASROZLISENIMENA, C_DENOMINACE, 
   C_RESTRUKTUALIZACEDLUHU, DT_DATUMSPLATNOST, C_TYPUROKSAZBA, 
   ND_UROKPRISPLATNOSTI, C_KOMERCNIUCEL, C_ODVOLATELNEZAJISTENI, 
   DT_DATUMFLOATNEXT, ID_PARENT, C_POZICEUCET, 
   PC_ID, TMP_P1, TMP_P2, 
   S_POPIS, ID_KTGSPOLECNOST, ID_DOKLAD, 
   DT_DATUMDOKLAD, C_AKTIVNI, S_UZIVATEL, 
   DT_ZALOZENO, ID_KTGUCETNISPOLECNOSTVYKAZ, ID_KTGSUBKONSOLIDACE, 
c.ID id_castka, c.ID_NASTROJ, c.ID_TYP, 
   c.C_HLAVA, c.S_MENA, c.S_UCET, 
   c.ND_CASTKAMENA, c.ND_CASTKALOCAL, c.NL_RADEK 
from kp_dat_dokladNastroj n, kp_dat_dokladNastroj_castky c 
where n.id = c.ID_NASTROJ

;


PROMPT Completed VW_DOKLADNASTROJ.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DOKLADNASTROJCP.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_DOKLADNASTROJCP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_DOKLADNASTROJCP
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_DOKLADNASTROJCP" ("ID", "ID_KTGTYPNASTROJE", "ID_KTGSPOLECNOSTPROTISTRANA", "ID_KTGTYPOPERACE", "ID_KTGCENNYPAPIR", "ID_KTGCENNYPAPIR2", "C_TYPPORTFOLIO", "C_POZICE", "NL_POCETKUSUCP", "DT_DATUMOBCHOD", "DT_DATUMVYPORADANI", "DT_SPLATNOST", "DT_SPLATNOST_2", "C_DENOMINACE", "C_RESTRUKTUALIZACEDLUHU", "C_SPLACENAPREMIE", "ND_PORIZOVACICENAKUSMENA", "ND_PORIZOVACICENAKUSLOCAL", "ND_NOMINALHODNOTAMENA", "ND_REALNAHODNOTALOCAL", "ND_TRZNIHODNOTAMENA", "ND_TRZNIHODNOTALOCAL", "ND_OBJEMZAVAZKULOCAL", "ND_CELKEMREALNAHODNOTALOCAL", "NL_POCETKUSUCPVYPORADANI", "ND_CASTKACZK", "ND_POPLATEKVYPORADANILOCAL", "ND_CENAKUSSPLATNOST", "ND_CENAKUSSPLATNOST_2", "ND_STRIKEOPCE", "ND_DELTAOPCE", "ND_HODNOTAOPCE", "ND_HODNOTAPREMIA", "ND_UROKSPLATNOST", "ND_GAMAOPCE", "ND_VEGAOPCE", "C_TYPVYKAZ", "C_TYPVYKAZ_2", "ID_KTGPODKLADNASTOJE", "ID_KTGSPOLECNOSTEMITENT", "C_VYPLACENIRKC", "C_POTVRZENIVL", "C_TYPUROKSAZBA", "C_TYPUROKSAZBA_2", "S_REFERENCNIUROKOVA", "ND_KOREKCEUROKOVESAZBY", "DT_DATUMFLOATNEXT", "DT_DATUMFLOATNEXT_2", "ND_UROKOVASAZBA", "ND_UROKOVASAZBA_2", "ND_VOLATILITAPODKLADU", "NL_POCETUROKOBDOBI", "NL_POCETKONECUROKOBDOBI", "ID_KTGTERMINSAZBY", "S_PRODUKTUCET", "ID_PARENT", "C_POZICEUCET", "PC_ID", "TMP_P1", "TMP_P2", "C_BURZAOBCHODOVATELNOST", "S_POPIS", "ID_KTGSPOLECNOST", "ID_DOKLAD", "DT_DATUMDOKLAD", "C_AKTIVNI", "S_UZIVATEL", "DT_ZALOZENO", "ID_KTGUCETNISPOLECNOSTVYKAZ", "ID_KTGSUBKONSOLIDACE", "C_REGISTROVANY", "ID_CASTKA", "ID_NASTROJ", "ID_TYP", "C_HLAVA", "S_MENA", "S_UCET", "ND_CASTKAMENA", "ND_CASTKALOCAL", "NL_RADEK") AS 
  SELECT 
n.ID, ID_KTGTYPNASTROJE, ID_KTGSPOLECNOSTPROTISTRANA, 
   ID_KTGTYPOPERACE, ID_KTGCENNYPAPIR, ID_KTGCENNYPAPIR2, 
   C_TYPPORTFOLIO, C_POZICE, NL_POCETKUSUCP, 
   DT_DATUMOBCHOD, DT_DATUMVYPORADANI, DT_SPLATNOST, 
   DT_SPLATNOST_2, C_DENOMINACE, C_RESTRUKTUALIZACEDLUHU, 
   C_SPLACENAPREMIE, ND_PORIZOVACICENAKUSMENA, ND_PORIZOVACICENAKUSLOCAL, 
   ND_NOMINALHODNOTAMENA, ND_REALNAHODNOTALOCAL, ND_TRZNIHODNOTAMENA, 
   ND_TRZNIHODNOTALOCAL, ND_OBJEMZAVAZKULOCAL, ND_CELKEMREALNAHODNOTALOCAL, 
   NL_POCETKUSUCPVYPORADANI, ND_CASTKACZK, ND_POPLATEKVYPORADANILOCAL, 
   ND_CENAKUSSPLATNOST, ND_CENAKUSSPLATNOST_2, ND_STRIKEOPCE, 
   ND_DELTAOPCE, ND_HODNOTAOPCE, ND_HODNOTAPREMIA, 
   ND_UROKSPLATNOST, ND_GAMAOPCE, ND_VEGAOPCE, 
   C_TYPVYKAZ, C_TYPVYKAZ_2, ID_KTGPODKLADNASTOJE, 
   ID_KTGSPOLECNOSTEMITENT, C_VYPLACENIRKC, C_POTVRZENIVL, 
   C_TYPUROKSAZBA, C_TYPUROKSAZBA_2, S_REFERENCNIUROKOVA, 
   ND_KOREKCEUROKOVESAZBY, DT_DATUMFLOATNEXT, DT_DATUMFLOATNEXT_2, 
   ND_UROKOVASAZBA, ND_UROKOVASAZBA_2, ND_VOLATILITAPODKLADU, 
   NL_POCETUROKOBDOBI, NL_POCETKONECUROKOBDOBI, ID_KTGTERMINSAZBY, 
   S_PRODUKTUCET, ID_PARENT, C_POZICEUCET, 
   PC_ID, TMP_P1, TMP_P2, 
   C_BURZAOBCHODOVATELNOST, S_POPIS, ID_KTGSPOLECNOST, 
   ID_DOKLAD, DT_DATUMDOKLAD, C_AKTIVNI, 
   S_UZIVATEL, DT_ZALOZENO, ID_KTGUCETNISPOLECNOSTVYKAZ, 
   ID_KTGSUBKONSOLIDACE, C_REGISTROVANY, 
c.ID id_castka, c.ID_NASTROJ_cp ID_NASTROJ, c.ID_TYP, 
   c.C_HLAVA, c.S_MENA, c.S_UCET, 
   c.ND_CASTKAMENA, c.ND_CASTKALOCAL, c.NL_RADEK 
from kp_dat_dokladNastrojCP n, kp_dat_dokladNastroj_castky c 
where n.id = c.ID_NASTROJ_CP

;


PROMPT Completed VW_DOKLADNASTROJCP.sql
PROMPT


-- ============================================================================
-- Deploy: VW_EXT_DOKLADMAJUUCASTVYJIMKA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_EXT_DOKLADMAJUUCASTVYJIMKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_EXT_DOKLADMAJUUCASTVYJIMKA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_EXT_DOKLADMAJUUCASTVYJIMKA" ("ID", "KTG_DOKLAD", "S_UCET", "S_POPIS") AS 
  select dv.id, dv.id_ktgdoklad, dv.s_ucet, dv.s_popis
from kp_ktg_dokladmajucastvyjimka dv
where dv.id_ktgdoklad = 900
order by dv.s_ucet
;


PROMPT Completed VW_EXT_DOKLADMAJUUCASTVYJIMKA.sql
PROMPT


-- ============================================================================
-- Deploy: VW_EXT_DOKLADUVEROVAPOZICE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_EXT_DOKLADUVEROVAPOZICE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_EXT_DOKLADUVEROVAPOZICE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_EXT_DOKLADUVEROVAPOZICE" ("S_UCET", "ND_CASTKAMENA", "ND_CASTKALOCAL", "ND_CASTKACNB", "S_MENA", "S_UNIFPROTI_ICO", "S_UNIFPROTI", "ID_DOKLAD", "S_LISTGROUP", "S_LISTGROUPCODE", "S_POPIS", "ND_KATEGORIE_KOEF", "S_LOCALE", "S_UCETUNIF", "ID_UNIFPROTI", "S_POPISORIGINAL", "C_BANKA", "ND_CISTAANGAZOVANOST", "GROUP_CODE_ZDROJ", "DIFFR", "NAZEV_SPOLECNOST", "S_TYP_OBEZRETNOST_PORTFOLIA", "S_COUNTRY", "S_ESA", "S_NACE", "S_LEI", "C_KONSO_DEFAULT_FLAG", "S_SHADOW_BANK", "S_TYPE_OF_EXPOSURE", "S_COLL_REG_CODE", "C_INDIV_DEFAULT_FLAG") AS 
  SELECT s_ucet,
    nd_castkamena,
    nd_castkalocal,
    nd_castkacnb,
    s_mena,
    s_unifproti_ico,
    s_unifproti,
    id_doklad,
    s_listgroup,
    s_listgroupcode,
    s_popis,
    nd_kategorie_koef,
    s_locale,
    s_ucetoriginal S_UCETUNIF,
    id_unifproti,
    (SELECT UP.s_popis
    FROM kp_cis_ucetprimarni UP,
      kp_dat_doklad d,
      kp_ktg_ucetnispolecnost us
    WHERE d.ID                   = pp.id_doklad
    AND d.id_ktgucetnispolecnost = us.ID
    AND UP.s_ucet                = pp.s_ucetoriginal
    AND UP.id_cisdatabaze        = d.id_cisdatabaze
    AND UP.c_typ                 = us.c_feis_ucettyp
    ) s_popisoriginal ,
    --pp.c_banka --v03 2011
    --v pre Acctuate 2013
    NVL(pp.c_banka, F_IS_PROTI_BANKA ( id_doklad , id_unifproti)) c_banka
    --, pp.ND_CISTAANGAZOVANOST --v03 2011
    --v pre Acctuate 2013
    ,
    NVL(pp.ND_CISTAANGAZOVANOST,NVL(nd_castkacnb,0) * DECODE(id_unifproti,29390,0,46033,0,29419,0, NVL(nd_kategorie_koef,0)) ) ND_CISTAANGAZOVANOST ,
    GROUP_CODE_ZDROJ ,
    DIFFR --bude vzdy rovnake
    ,db_jt.f_getSpolecnostDoklad(id_doklad) NAZEV_SPOLECNOST
    --07 2021 rozsireni UA RKC
        ,S_TYP_OBEZRETNOST_PORTFOLIA
        ,DZA_COUNTRY S_COUNTRY
        ,S_UA_UNIF_ESA  S_ESA
        ,S_UA_UNIF_NACE S_NACE
        ,S_UA_UNIF_LEI  S_LEI
        ,C_UA_UNIF_DEFAULT_FLAG C_KONSO_DEFAULT_FLAG
        ,S_UA_UNIF_SHADOW_BANK S_SHADOW_BANK
        ,S_TYPE_OF_EXPOSURE
        ,S_COLL_REG_CODE
        ,c_default_flag C_INDIV_DEFAULT_FLAG
  FROM    -- zdroj pp  = p + p1 + p2
    (     --    -- v2010
    SELECT s_ucet,
      nd_castkamena,
      nd_castkalocal,
      nd_castkacnb,
      p.s_mena,
      ks.s_ico s_unifproti_ico,
      ks.s_nazev s_unifproti,
      id_doklad,
      DECODE (sg.cust_group_name, NULL, NULL, SUBSTR (sg.cust_group_name, 1, 255)
      || ' ('
      || SUBSTR (sg.cust_group_code, 1, 255)
      || ')' ) s_listgroup,
      SUBSTR (sg.cust_group_code, 1, 512) s_listgroupcode,
      p.s_popis,
      --v2
      CASE
        WHEN p.kategoriekoef IS NOT NULL
        THEN p.kategoriekoef
        ELSE ks.kategoriekoef
      END nd_kategorie_koef,
      s_locale,
      s_ucetoriginal,
      ks.ID id_unifproti ,
      c_banka --v03 2011
      ,
      ND_CISTAANGAZOVANOST --v03 2011
      ,
      p.cust_group_code GROUP_CODE_ZDROJ -- tu bude vzdy rovnaku s KISom
      ,
      DECODE(sg.cust_group_code,p.cust_group_code,'OK','-') DIFFR
--07 2021 rozsireni UA RKC
        ,S_TYP_OBEZRETNOST_PORTFOLIA
/*        ,DZA_COUNTRY
        ,S_ESA
        ,S_NACE
        ,S_LEI
esc 30.09.2022  unifikovane hodnoty podla vodopadu */
        ,ks.S_UA_UNIF_COUNTRY as DZA_COUNTRY
        ,ks.S_UA_UNIF_ESA
        ,ks.S_UA_UNIF_NACE
        ,ks.S_UA_UNIF_LEI
        ,ks.C_UA_UNIF_DEFAULT_FLAG
        ,ks.S_UA_UNIF_SHADOW_BANK
--
        ,S_TYPE_OF_EXPOSURE
        ,S_COLL_REG_CODE
        ,c_default_flag
    FROM ---
      (   -- zdroj P  START  , kp_dat_dokladzdrojdatagregace
      SELECT a.s_ucet,
        SUM (a.nd_castkamena) nd_castkamena,
        SUM (a.nd_castkalocal) nd_castkalocal,
        a.s_mena,
        a.id_ktgspolecnost unifprotiid,
        SUM (a.nd_castkacnb) nd_castkacnb,
        CASE
          WHEN a.ID_MANUALTEXT IS NOT NULL
          THEN
            (SELECT s_text FROM db_dsa.KP_S_MANUALTEXT mt WHERE mt.id = a.ID_MANUALTEXT
            )
          ELSE f_getucetunifpopisucet (a.s_ucet, l.s_locale)
        END s_popis,
        a.id_doklad,
        l.s_locale,
        a.s_ucetoriginal ,
        a.kategoriekoef,        --esc
        a.cust_group_code,      --v2010,2013
        a.c_banka,              --v03 2011
--        a.ND_CISTAANGAZOVANOST, --v03 2011
        SUM (a.ND_CISTAANGAZOVANOST) as ND_CISTAANGAZOVANOST, -- 12.8.2021 SmrM
                                /*07 2021 rozsireni UA RKC*/
        a.S_TYP_OBEZRETNOST_PORTFOLIA
/*      ,a.S_COUNTRY as DZA_COUNTRY
        ,a.S_ESA
        ,a.S_NACE
        ,a.S_LEI
esc 30.09.2022  unifikovane hodnoty podla vodopadu
        ,a.S_SHADOW_BANK */
        ,a.S_TYPE_OF_EXPOSURE
        ,a.S_COLL_REG_CODE
        ,a.c_default_flag
        FROM  kp_dat_dokladzdrojdatagregace a ,
        cis_locale l
      WHERE a.c_uverovapozice = '1'
      AND a.cust_group_code  IS NOT NULL --v2010
      GROUP BY a.id_doklad,
        a.s_ucet,
        a.s_mena,
        a.id_ktgspolecnost,
        l.s_locale,
        a.s_ucetoriginal,
        a.ID_MANUALTEXT ,
        a.kategoriekoef ,
        a.cust_group_code ,
        a.c_banka --v03 2011
        ,a.ND_CISTAANGAZOVANOST --v03 2011
      --07 2021 rozsireni UA RKC
        ,a.S_TYP_OBEZRETNOST_PORTFOLIA
/*        ,a.S_COUNTRY
        ,a.S_ESA
        ,a.S_NACE
        ,a.S_LEI
esc 30.09.2022  unifikovane hodnoty podla vodopadu
        ,a.S_SHADOW_BANK */
        ,a.S_TYPE_OF_EXPOSURE
        ,a.S_COLL_REG_CODE
        ,a.c_default_flag
        HAVING SUM (a.nd_castkamena) != 0
        OR SUM (a.nd_castkalocal)    != 0
      ) P,
      --- zdroj P END
      KP_DAT_DOKLAD D,
      KP_KTG_SPOLECNOST KS,
      KP_KTG_SPOLECNOST_GROUP SG
    WHERE p.id_doklad    = d.ID
    AND ( nd_castkamena != 0
    OR nd_castkalocal   != 0 )
    AND p.unifprotiid    = ks.ID(+)
    AND ks.ID            = sg.id_spolecnost(+)
    AND d.dt_datum BETWEEN sg.dt_platnostod AND sg.dt_platnostdo
    AND p.cust_group_code = sg.cust_group_code --v2010

--UNION
UNION ALL  -- SmrM 08.09.2021

    --v2010
    ---------------------------------------------------------------------------------------------------------------------
    SELECT s_ucet,
      nd_castkamena,
      nd_castkalocal,
      nd_castkacnb,
      p.s_mena,
      ks.s_ico s_unifproti_ico,
      ks.s_nazev s_unifproti,
      id_doklad,
      DECODE (sg.cust_group_name, NULL, NULL, SUBSTR (sg.cust_group_name, 1, 255)
      || ' ('
      || SUBSTR (sg.cust_group_code, 1, 255)
      || ')' ) s_listgroup,
      SUBSTR (sg.cust_group_code, 1, 512) s_listgroupcode,
      p.s_popis,
      --v2
      CASE
        WHEN p.kategoriekoef IS NOT NULL
        THEN p.kategoriekoef
        ELSE ks.kategoriekoef
      END nd_kategorie_koef,
      s_locale,
      s_ucetoriginal,
      ks.ID id_unifproti ,
      p.c_banka --v03 2011
      ,
      p.ND_CISTAANGAZOVANOST --v03 2011
      ,
      NULL GROUP_CODE_ZDROJ --vrkc 2013  bude vzdy iba NULL
      ,
      'KIS' DIFFR
      --07 2021 rozsireni UA RKC
        ,S_TYP_OBEZRETNOST_PORTFOLIA
/*        ,DZA_COUNTRY
        ,S_ESA
        ,S_NACE
        ,S_LEI
*/
        ,ks.S_UA_UNIF_COUNTRY as DZA_COUNTRY
        ,ks.S_UA_UNIF_ESA
        ,ks.S_UA_UNIF_NACE
        ,ks.S_UA_UNIF_LEI
        ,ks.C_UA_UNIF_DEFAULT_FLAG
        ,ks.S_UA_UNIF_SHADOW_BANK
--
        ,S_TYPE_OF_EXPOSURE
        ,S_COLL_REG_CODE
        ,c_default_flag
    FROM
      ---
      ( --zdroj P2  kp_dat_dokladzdrojdatagregace  START
      SELECT a.s_ucet,
        SUM (a.nd_castkamena) nd_castkamena,
        SUM (a.nd_castkalocal) nd_castkalocal,
        a.s_mena,
        a.id_ktgspolecnost unifprotiid,
        SUM (a.nd_castkacnb) nd_castkacnb,
        CASE
          WHEN a.ID_MANUALTEXT IS NOT NULL
          THEN
            (SELECT s_text FROM db_dsa.KP_S_MANUALTEXT mt WHERE mt.id = a.ID_MANUALTEXT
            )
          ELSE f_getucetunifpopisucet (a.s_ucet, l.s_locale)
        END s_popis,
        a.id_doklad,
        l.s_locale,
        a.s_ucetoriginal ,
        a.kategoriekoef --esc
        --,         a.cust_group_code
        ,
        a.c_banka --v03 2011
        ,
        -- a.ND_CISTAANGAZOVANOST --v03 2011
        SUM (a.ND_CISTAANGAZOVANOST) as ND_CISTAANGAZOVANOST -- 12.8.2021 SmrM
        --,        a.cust_group_code GROUP_CODE_ZDROJ --vrkc 2013 -- bude vzdy iba NULL
        --07 2021 rozsireni UA RKC
        ,S_TYP_OBEZRETNOST_PORTFOLIA
/*        ,a.S_COUNTRY DZA_COUNTRY
        ,S_ESA
        ,S_NACE
        ,S_LEI
esc 30.09.2022  unifikovane hodnoty podla vodopadu
        ,S_SHADOW_BANK  */
        ,S_TYPE_OF_EXPOSURE
        ,S_COLL_REG_CODE
        ,c_default_flag
      FROM kp_dat_dokladzdrojdatagregace a,
        cis_locale l
      WHERE a.c_uverovapozice = '1'
      AND a.cust_group_code  IS NULL --v2010
      GROUP BY a.id_doklad,
        a.s_ucet,
        a.s_mena,
        a.id_ktgspolecnost,
        l.s_locale,
        a.s_ucetoriginal,
        a.ID_MANUALTEXT ,
        a.kategoriekoef --, a.cust_group_code
        ,
        a.c_banka --v03 2011
        ,
        a.ND_CISTAANGAZOVANOST --v03 2011
        --,        a.cust_group_code --vrkc 2013
        --07 2021 rozsireni UA RKC
        ,S_TYP_OBEZRETNOST_PORTFOLIA
/*        ,a.S_COUNTRY
        ,S_ESA
        ,S_NACE
        ,S_LEI
esc 30.09.2022  unifikovane hodnoty podla vodopadu
        ,S_SHADOW_BANK  */
        ,S_TYPE_OF_EXPOSURE
        ,S_COLL_REG_CODE
        ,c_default_flag
      HAVING SUM (a.nd_castkamena) != 0
      OR SUM (a.nd_castkalocal)    != 0
      ) p,
      ---  zdroj P2  END
      kp_dat_doklad d,
      kp_ktg_spolecnost ks,
      kp_ktg_spolecnost_group sg
    WHERE p.id_doklad   = d.ID
    AND (nd_castkamena != 0
    OR nd_castkalocal  != 0)
    AND p.unifprotiid   = ks.ID(+)
    AND ks.ID           = sg.id_spolecnost(+)
    AND d.dt_datum BETWEEN sg.dt_platnostod AND sg.dt_platnostdo
    --and p.cust_group_code = sg.cust_group_code

--UNION
UNION ALL  -- SmrM 08.09.2021

    -----------------------------------------------------------------------------------------------------------------------
    SELECT s_ucet,
      nd_castkamena,
      nd_castkalocal,
      nd_castkacnb,
      p.s_mena,
      ks.s_ico s_unifproti_ico,
      ks.s_nazev s_unifproti,
      id_doklad,
      NULL s_listgroup,
      p.cust_group_code,-- NULL s_listgroupcode,
      p.s_popis,        --DECODE (LENGTH (NVL (ks.s_ico, '.')),                           0, 1,                           ks.kategoriekoef                          ) nd_kategorie_koef,
      CASE
        WHEN p.kategoriekoef IS NOT NULL
        THEN p.kategoriekoef
        ELSE ks.kategoriekoef
      END nd_kategorie_koef,
      s_locale,
      s_ucetoriginal,
      ks.ID id_unifproti ,
      p.c_banka --v03 2011
      ,
      p.ND_CISTAANGAZOVANOST --v03 2011
      ,
      p.cust_group_code GROUP_CODE_ZDROJ--vrkc 2013
      ,
      'imp' DIFFR --v KISe nema skupinu, takze rozdiel je ta z importu
              --07 2021 rozsireni UA RKC
        ,S_TYP_OBEZRETNOST_PORTFOLIA
/*        ,DZA_COUNTRY
        ,S_ESA
        ,S_NACE
        ,S_LEI
esc 30.09.2022  unifikovane hodnoty podla vodopadu */
        ,ks.S_UA_UNIF_COUNTRY as DZA_COUNTRY
        ,ks.S_UA_UNIF_ESA
        ,ks.S_UA_UNIF_NACE
        ,ks.S_UA_UNIF_LEI
        ,ks.C_UA_UNIF_DEFAULT_FLAG
        ,ks.S_UA_UNIF_SHADOW_BANK
--
        ,S_TYPE_OF_EXPOSURE
        ,S_COLL_REG_CODE
        ,c_default_flag
    FROM         ---
      (           -- zdroj P3 kp_dat_dokladzdrojdatagregace   START
      SELECT a.s_ucet,
        SUM (a.nd_castkamena) nd_castkamena,
        SUM (a.nd_castkalocal) nd_castkalocal,
        a.s_mena,
        a.id_ktgspolecnost unifprotiid,
        SUM (a.nd_castkacnb) nd_castkacnb,
        CASE
          WHEN a.ID_MANUALTEXT IS NOT NULL
          THEN
            (SELECT s_text FROM db_dsa.KP_S_MANUALTEXT mt WHERE mt.id = a.ID_MANUALTEXT
            )
          ELSE f_getucetunifpopisucet (a.s_ucet, l.s_locale)
        END s_popis,
        a.id_doklad,
        l.s_locale,
        a.s_ucetoriginal ,
        a.kategoriekoef ,
        a.cust_group_code,-- GROUP_CODE_ZDROJ,
        a.c_banka         --v03 2011
        ,
        -- a.ND_CISTAANGAZOVANOST --v03 2011
        SUM (a.ND_CISTAANGAZOVANOST) as ND_CISTAANGAZOVANOST -- 12.8.2021 SmrM
                --07 2021 rozsireni UA RKC
        ,S_TYP_OBEZRETNOST_PORTFOLIA
/*        ,a.S_COUNTRY DZA_COUNTRY
        ,S_ESA
        ,S_NACE
        ,S_LEI
esc 30.09.2022  unifikovane hodnoty podla vodopadu
        ,S_SHADOW_BANK  */
        ,S_TYPE_OF_EXPOSURE
        ,S_COLL_REG_CODE
        ,c_default_flag
      FROM kp_dat_dokladzdrojdatagregace a,
        cis_locale l
      WHERE a.c_uverovapozice = '1'
      GROUP BY a.id_doklad,
        a.s_ucet,
        a.s_mena,
        a.id_ktgspolecnost,
        l.s_locale,
        a.s_ucetoriginal,
        a.ID_MANUALTEXT ,
        a.kategoriekoef ,
        a.cust_group_code ,
        a.c_banka --v03 2011
        ,
        a.ND_CISTAANGAZOVANOST --v03 2011
                --07 2021 rozsireni UA RKC
        ,S_TYP_OBEZRETNOST_PORTFOLIA
/*        ,a.S_COUNTRY
        ,S_ESA
        ,S_NACE
        ,S_LEI
esc 30.09.2022  unifikovane hodnoty podla vodopadu
        ,S_SHADOW_BANK  */
        ,S_TYPE_OF_EXPOSURE
        ,S_COLL_REG_CODE
        ,c_default_flag
      HAVING SUM (a.nd_castkamena) != 0
      OR SUM (a.nd_castkalocal)    != 0
      ) p, ---  zdroj P3 END
      kp_dat_doklad d,
      kp_ktg_spolecnost ks
    WHERE p.id_doklad   = d.ID
    AND (nd_castkamena != 0
    OR nd_castkalocal  != 0)
    AND p.unifprotiid   = ks.ID(+)
    AND NOT EXISTS
      (SELECT NULL
      FROM kp_ktg_spolecnost_group sg
      WHERE ks.ID = sg.id_spolecnost
      AND d.dt_datum BETWEEN sg.dt_platnostod AND sg.dt_platnostdo
      )

--  pripojenie pasivneho uctu pre JTIS podla KIS-36
UNION ALL

  SELECT s_ucet,
      CASE WHEN ABS(nd_castkamena) > ABS(NVL(prev_castkamena,nd_castkamena))
        THEN 0-prev_castkamena
        ELSE nd_castkamena
      END as nd_castkamena,
      CASE WHEN ABS(nd_castkalocal) > ABS(NVL(prev_castkalocal,nd_castkalocal))
        THEN 0-prev_castkalocal
        ELSE nd_castkalocal
      END as nd_castkalocal,
      CASE WHEN ABS(nd_castkacnb) > ABS(NVL(prev_castkacnb,nd_castkacnb))
        THEN 0-prev_castkacnb
        ELSE nd_castkacnb
      END as nd_castkacnb,
      p.s_mena,
      ks.s_ico s_unifproti_ico,
      ks.s_nazev s_unifproti,
      id_doklad,
      DECODE (sg.cust_group_name, NULL, NULL, SUBSTR (sg.cust_group_name, 1, 255)
      || ' ('
      || SUBSTR (sg.cust_group_code, 1, 255)
      || ')' ) s_listgroup,
      SUBSTR (sg.cust_group_code, 1, 512) s_listgroupcode,
      p.s_popis,
      --v2
      CASE
        WHEN p.kategoriekoef IS NOT NULL
        THEN p.kategoriekoef
        ELSE ks.kategoriekoef
      END nd_kategorie_koef,
      s_locale,
      s_ucetoriginal,
      ks.ID id_unifproti ,
      p.c_banka --v03 2011
      ,
      p.ND_CISTAANGAZOVANOST --v03 2011
      ,
      NULL GROUP_CODE_ZDROJ --vrkc 2013  bude vzdy iba NULL
      ,
      'KIS' DIFFR
      --07 2021 rozsireni UA RKC
        ,S_TYP_OBEZRETNOST_PORTFOLIA
/*        ,DZA_COUNTRY
        ,S_ESA
        ,S_NACE
        ,S_LEI
*/
        ,ks.S_UA_UNIF_COUNTRY as DZA_COUNTRY
        ,ks.S_UA_UNIF_ESA
        ,ks.S_UA_UNIF_NACE
        ,ks.S_UA_UNIF_LEI
        ,ks.C_UA_UNIF_DEFAULT_FLAG
        ,ks.S_UA_UNIF_SHADOW_BANK
--
        ,S_TYPE_OF_EXPOSURE
        ,S_COLL_REG_CODE
        ,c_default_flag
    FROM
      (
      SELECT s_ucet,
        nd_castkamena,
        LAG (nd_castkamena,1) OVER (PARTITION BY id_doklad ORDER BY s_ucet ASC) AS prev_castkamena,
        nd_castkalocal,
        LAG (nd_castkalocal,1) OVER (PARTITION BY id_doklad ORDER BY s_ucet ASC) AS prev_castkalocal,
        s_mena,
        unifprotiid,
        nd_castkacnb,
        LAG (nd_castkacnb,1) OVER (PARTITION BY id_doklad ORDER BY s_ucet ASC) AS prev_castkacnb,
        s_popis,
        id_doklad,
        s_locale , --l.s_locale,
        s_ucetoriginal ,
        kategoriekoef,
        c_banka --v03 2011
        ,ND_CISTAANGAZOVANOST -- 12.8.2021 SmrM
        ,S_TYP_OBEZRETNOST_PORTFOLIA
        ,S_TYPE_OF_EXPOSURE
        ,S_COLL_REG_CODE
        ,c_default_flag
     FROM
      ( --zdroj P2  kp_dat_dokladzdrojdatagregace  START
      SELECT a.s_ucet,
        SUM (a.nd_castkamena) nd_castkamena,
        SUM (a.nd_castkalocal) nd_castkalocal,
        a.s_mena,
        a.id_ktgspolecnost unifprotiid,
        SUM (a.nd_castkacnb) nd_castkacnb,
        CASE
          WHEN a.ID_MANUALTEXT IS NOT NULL
          THEN
            (SELECT s_text FROM db_dsa.KP_S_MANUALTEXT mt WHERE mt.id = a.ID_MANUALTEXT
            )
          ELSE f_getucetunifpopisucet (a.s_ucet, 'cs_CZ') --l.s_locale)
        END s_popis,
        a.id_doklad,
        'cs_CZ' as s_locale , --l.s_locale,
        a.s_ucetoriginal ,
        a.kategoriekoef --esc
        --,         a.cust_group_code
        ,
        a.c_banka --v03 2011
        ,
        -- a.ND_CISTAANGAZOVANOST --v03 2011
        SUM (a.ND_CISTAANGAZOVANOST) as ND_CISTAANGAZOVANOST -- 12.8.2021 SmrM
        --,        a.cust_group_code GROUP_CODE_ZDROJ --vrkc 2013 -- bude vzdy iba NULL
        --07 2021 rozsireni UA RKC
        ,a.S_TYP_OBEZRETNOST_PORTFOLIA
/*        ,a.S_COUNTRY DZA_COUNTRY
        ,S_ESA
        ,S_NACE
        ,S_LEI
esc 30.09.2022  unifikovane hodnoty podla vodopadu
        ,S_SHADOW_BANK  */
        ,a.S_TYPE_OF_EXPOSURE
        ,a.S_COLL_REG_CODE
        ,a.c_default_flag
      FROM kp_dat_dokladzdrojdatagregace a
      JOIN kp_dat_doklad d
        ON a.id_doklad = d.id
      JOIN kp_ktg_ucetnispolecnost sp
        ON d.id_ktgucetnispolecnost = sp.id
      JOIN kp_ktg_spolecnost us
        ON us.id = a.id_ktgspolecnost

      WHERE ( a.c_uverovapozice = '1' OR   a.c_menovapozice = '1' )
      AND a.cust_group_code  IS NULL --v2010


      AND us.s_ico = '0011634677'                         -- NAHRADIT CISELNIK PASIV
      AND a.s_ucet IN ('LG130000420','AN200000110')       -- NAHRADIT CISELNIK PASIV
      AND sp.s_ico = '47672684'                           -- NAHRADIT CISELNIK PASIV

      GROUP BY a.id_doklad,
        a.s_ucet,
        a.s_mena,
        a.id_ktgspolecnost,
        --l.s_locale,
        a.s_ucetoriginal,
        a.ID_MANUALTEXT ,
        a.kategoriekoef --, a.cust_group_code
        ,
        a.c_banka --v03 2011
        ,
        a.ND_CISTAANGAZOVANOST --v03 2011
        --,        a.cust_group_code --vrkc 2013
        --07 2021 rozsireni UA RKC
        ,a.S_TYP_OBEZRETNOST_PORTFOLIA
/*        ,a.S_COUNTRY
        ,S_ESA
        ,S_NACE
        ,S_LEI
esc 30.09.2022  unifikovane hodnoty podla vodopadu
        ,S_SHADOW_BANK  */
        ,a.S_TYPE_OF_EXPOSURE
        ,a.S_COLL_REG_CODE
        ,a.c_default_flag
      HAVING SUM (a.nd_castkamena) != 0
      OR SUM (a.nd_castkalocal)    != 0
      )) p,
      ---  zdroj P2  END
      kp_dat_doklad d,
      kp_ktg_spolecnost ks,
      kp_ktg_spolecnost_group sg
    WHERE p.id_doklad   = d.ID
    AND (nd_castkamena != 0
    OR nd_castkalocal  != 0)
    AND p.unifprotiid   = ks.ID(+)
    AND ks.ID           = sg.id_spolecnost(+)
    AND d.dt_datum BETWEEN sg.dt_platnostod AND sg.dt_platnostdo

    AND s_ucet = 'LG130000420'  -- NAHRADIT CISELNIK PASIV

 ) pp

;


PROMPT Completed VW_EXT_DOKLADUVEROVAPOZICE.sql
PROMPT


-- ============================================================================
-- Deploy: VW_EXT_DOKLADUVEROVAPOZICE_279.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_EXT_DOKLADUVEROVAPOZICE_279.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_EXT_DOKLADUVEROVAPOZICE_279
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_EXT_DOKLADUVEROVAPOZICE_279" ("S_UCET", "ND_CASTKAMENA", "ND_CASTKALOCAL", "ND_CASTKACNB", "S_MENA", "S_UNIFPROTI_ICO", "S_UNIFPROTI", "ID_DOKLAD", "S_LISTGROUP", "S_LISTGROUPCODE", "S_POPIS", "ND_KATEGORIE_KOEF", "S_LOCALE", "S_UCETUNIF", "ID_UNIFPROTI", "S_POPISORIGINAL", "C_BANKA", "ND_CISTAANGAZOVANOST", "GROUP_CODE_ZDROJ") AS 
  SELECT s_ucet,
    nd_castkamena,
    nd_castkalocal,
    nd_castkacnb,
    s_mena,
    s_unifproti_ico,
    s_unifproti,
    id_doklad,
    s_listgroup,
    s_listgroupcode,
    s_popis,
    nd_kategorie_koef,
    s_locale,
    s_ucetoriginal,
    id_unifproti,
    (SELECT UP.s_popis
    FROM kp_cis_ucetprimarni UP,
      kp_dat_doklad d,
      kp_ktg_ucetnispolecnost us
    WHERE d.ID                   = pp.id_doklad
    AND d.id_ktgucetnispolecnost = us.ID
    AND UP.s_ucet                = pp.s_ucetoriginal
    AND UP.id_cisdatabaze        = d.id_cisdatabaze
    AND UP.c_typ                 = us.c_feis_ucettyp
    ) s_popisoriginal ,
    --pp.c_banka --v03 2011
    --v pre Acctuate 2013
    NVL(pp.c_banka, F_IS_PROTI_BANKA ( id_doklad , id_unifproti)) c_banka
    --, pp.ND_CISTAANGAZOVANOST --v03 2011
    --v pre Acctuate 2013
    ,
    NVL(pp.ND_CISTAANGAZOVANOST,NVL(nd_castkacnb,0) * DECODE(id_unifproti,29390,0,46033,0,29419,0, NVL(nd_kategorie_koef,0)) ) ND_CISTAANGAZOVANOST 
    ,    GROUP_CODE_ZDROJ
  FROM -- zdroj pp  = p + p1 + p2
    (  --    -- v2010
    SELECT s_ucet,
      nd_castkamena,
      nd_castkalocal,
      nd_castkacnb,
      p.s_mena,
      ks.s_ico s_unifproti_ico,
      ks.s_nazev s_unifproti,
      id_doklad,
      DECODE (sg.cust_group_name, NULL, NULL, SUBSTR (sg.cust_group_name, 1, 255)
      || ' ('
      || SUBSTR (sg.cust_group_code, 1, 255)
      || ')' ) s_listgroup,
      SUBSTR (sg.cust_group_code, 1, 512) s_listgroupcode,
      p.s_popis,
      --v2
      CASE
        WHEN p.kategoriekoef IS NOT NULL
        THEN p.kategoriekoef
        ELSE ks.kategoriekoef
      END nd_kategorie_koef,
      s_locale,
      s_ucetoriginal,
      ks.ID id_unifproti ,
      c_banka --v03 2011
      ,
      ND_CISTAANGAZOVANOST --v03 2011
      ,      p.cust_group_code GROUP_CODE_ZDROJ
    FROM ---
      (   -- zdroj P  START  , kp_dat_dokladzdrojdatagregace
      SELECT a.s_ucet,
        SUM (a.nd_castkamena) nd_castkamena,
        SUM (a.nd_castkalocal) nd_castkalocal,
        a.s_mena,
        a.id_ktgspolecnost unifprotiid,
        SUM (a.nd_castkacnb) nd_castkacnb,
        CASE
          WHEN a.ID_MANUALTEXT IS NOT NULL
          THEN
            (SELECT s_text FROM db_dsa.KP_S_MANUALTEXT mt WHERE mt.id = a.ID_MANUALTEXT
            )
          ELSE f_getucetunifpopisucet (a.s_ucet, l.s_locale)
        END s_popis,
        a.id_doklad,
        l.s_locale,
        a.s_ucetoriginal ,
        a.kategoriekoef --esc
        ,
        a.cust_group_code --v2010,2013
        ,
        a.c_banka --v03 2011
        ,
        a.ND_CISTAANGAZOVANOST --v03 2011
      FROM kp_dat_dokladzdrojdatagregace a,
        cis_locale l
      WHERE a.c_uverovapozice = '1'
      AND a.cust_group_code  IS NOT NULL --v2010
      GROUP BY a.id_doklad,
        a.s_ucet,
        a.s_mena,
        a.id_ktgspolecnost,
        l.s_locale,
        a.s_ucetoriginal,
        a.ID_MANUALTEXT ,
        a.kategoriekoef ,
        a.cust_group_code ,
        a.c_banka --v03 2011
        ,
        a.ND_CISTAANGAZOVANOST --v03 2011
      HAVING SUM (a.nd_castkamena) != 0
      OR SUM (a.nd_castkalocal)    != 0
      ) P,
      --- zdroj P END
      KP_DAT_DOKLAD D,
      KP_KTG_SPOLECNOST KS,
      KP_KTG_SPOLECNOST_GROUP SG
    WHERE p.id_doklad    = d.ID
    AND ( nd_castkamena != 0    OR nd_castkalocal   != 0 )
    AND p.unifprotiid    = ks.ID(+)
    AND ks.ID            = sg.id_spolecnost(+)
    AND d.dt_datum BETWEEN sg.dt_platnostod AND sg.dt_platnostdo
    AND p.cust_group_code = sg.cust_group_code --v2010
    UNION
    --v2010
    ---------------------------------------------------------------------------------------------------------------------
    SELECT s_ucet,
      nd_castkamena,
      nd_castkalocal,
      nd_castkacnb,
      p.s_mena,
      ks.s_ico s_unifproti_ico,
      ks.s_nazev s_unifproti,
      id_doklad,
      DECODE (sg.cust_group_name, NULL, NULL, SUBSTR (sg.cust_group_name, 1, 255)
      || ' ('
      || SUBSTR (sg.cust_group_code, 1, 255)
      || ')' ) s_listgroup,
      SUBSTR (sg.cust_group_code, 1, 512) s_listgroupcode,
      p.s_popis,
      --v2
      CASE
        WHEN p.kategoriekoef IS NOT NULL
        THEN p.kategoriekoef
        ELSE ks.kategoriekoef
      END nd_kategorie_koef,
      s_locale,
      s_ucetoriginal,
      ks.ID id_unifproti ,
      p.c_banka --v03 2011
      ,
      p.ND_CISTAANGAZOVANOST --v03 2011
      ,NULL      GROUP_CODE_ZDROJ --vrkc 2013
    FROM
      ---
      ( --zdroj P2  kp_dat_dokladzdrojdatagregace  START
      SELECT a.s_ucet,
        SUM (a.nd_castkamena) nd_castkamena,
        SUM (a.nd_castkalocal) nd_castkalocal,
        a.s_mena,
        a.id_ktgspolecnost unifprotiid,
        SUM (a.nd_castkacnb) nd_castkacnb,
        CASE
          WHEN a.ID_MANUALTEXT IS NOT NULL
          THEN
            (SELECT s_text FROM db_dsa.KP_S_MANUALTEXT mt WHERE mt.id = a.ID_MANUALTEXT
            )
          ELSE f_getucetunifpopisucet (a.s_ucet, l.s_locale)
        END s_popis,
        a.id_doklad,
        l.s_locale,
        a.s_ucetoriginal ,
        a.kategoriekoef --esc
        --,         a.cust_group_code
        ,
        a.c_banka --v03 2011
        ,
        a.ND_CISTAANGAZOVANOST --v03 2011
        --,        a.cust_group_code GROUP_CODE_ZDROJ --vrkc 2013
      FROM kp_dat_dokladzdrojdatagregace a,
        cis_locale l
      WHERE a.c_uverovapozice = '1'
      AND a.cust_group_code  IS NULL --v2010
      GROUP BY a.id_doklad,
        a.s_ucet,
        a.s_mena,
        a.id_ktgspolecnost,
        l.s_locale,
        a.s_ucetoriginal,
        a.ID_MANUALTEXT ,
        a.kategoriekoef --, a.cust_group_code
        ,
        a.c_banka --v03 2011
        ,
        a.ND_CISTAANGAZOVANOST --v03 2011        
      HAVING SUM (a.nd_castkamena) != 0
      OR SUM (a.nd_castkalocal)    != 0
      ) p,
      ---  zdroj P2  END
      kp_dat_doklad d,
      kp_ktg_spolecnost ks,
      kp_ktg_spolecnost_group sg
    WHERE p.id_doklad   = d.ID
    AND (nd_castkamena != 0
    OR nd_castkalocal  != 0)
    AND p.unifprotiid   = ks.ID(+)
    AND ks.ID           = sg.id_spolecnost(+)
    AND d.dt_datum BETWEEN sg.dt_platnostod AND sg.dt_platnostdo
    --and p.cust_group_code = sg.cust_group_code
    UNION
    -----------------------------------------------------------------------------------------------------------------------
    SELECT s_ucet,
      nd_castkamena,
      nd_castkalocal,
      nd_castkacnb,
      p.s_mena,
      ks.s_ico s_unifproti_ico,
      ks.s_nazev s_unifproti,
      id_doklad,
      NULL s_listgroup,
      NULL s_listgroupcode,
      p.s_popis, --DECODE (LENGTH (NVL (ks.s_ico, '.')),                           0, 1,                           ks.kategoriekoef                          ) nd_kategorie_koef,
      CASE
        WHEN p.kategoriekoef IS NOT NULL
        THEN p.kategoriekoef
        ELSE ks.kategoriekoef
      END nd_kategorie_koef,
      s_locale,
      s_ucetoriginal,
      ks.ID id_unifproti ,
      p.c_banka --v03 2011
      ,
      p.ND_CISTAANGAZOVANOST --v03 2011
      ,NULL    GROUP_CODE_ZDROJ --vrkc 2013
    FROM              ---
      (                -- zdroj P3 kp_dat_dokladzdrojdatagregace   START
      SELECT a.s_ucet,
        SUM (a.nd_castkamena) nd_castkamena,
        SUM (a.nd_castkalocal) nd_castkalocal,
        a.s_mena,
        a.id_ktgspolecnost unifprotiid,
        SUM (a.nd_castkacnb) nd_castkacnb,
        CASE
          WHEN a.ID_MANUALTEXT IS NOT NULL
          THEN
            (SELECT s_text FROM db_dsa.KP_S_MANUALTEXT mt WHERE mt.id = a.ID_MANUALTEXT
            )
          ELSE f_getucetunifpopisucet (a.s_ucet, l.s_locale)
        END s_popis,
        a.id_doklad,
        l.s_locale,
        a.s_ucetoriginal ,
        a.kategoriekoef ,
        a.cust_group_code ,
        a.c_banka --v03 2011
        ,
        a.ND_CISTAANGAZOVANOST --v03 2011
      FROM kp_dat_dokladzdrojdatagregace a,
        cis_locale l
      WHERE a.c_uverovapozice = '1'
      GROUP BY a.id_doklad,
        a.s_ucet,
        a.s_mena,
        a.id_ktgspolecnost,
        l.s_locale,
        a.s_ucetoriginal,
        a.ID_MANUALTEXT ,
        a.kategoriekoef ,
        a.cust_group_code ,
        a.c_banka --v03 2011
        ,
        a.ND_CISTAANGAZOVANOST --v03 2011
      HAVING SUM (a.nd_castkamena) != 0
      OR SUM (a.nd_castkalocal)    != 0
      ) p, ---  zdroj P3 END
      kp_dat_doklad d,
      kp_ktg_spolecnost ks
    WHERE p.id_doklad   = d.ID
    AND (nd_castkamena != 0
    OR nd_castkalocal  != 0)
    AND p.unifprotiid   = ks.ID(+)
    AND NOT EXISTS
      (SELECT NULL
      FROM kp_ktg_spolecnost_group sg
      WHERE ks.ID = sg.id_spolecnost
      AND d.dt_datum BETWEEN sg.dt_platnostod AND sg.dt_platnostdo
      )
    ) pp
;


PROMPT Completed VW_EXT_DOKLADUVEROVAPOZICE_279.sql
PROMPT


-- ============================================================================
-- Deploy: VW_EXT_DOKLADUVEROVAPOZICE_RKC.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_EXT_DOKLADUVEROVAPOZICE_RKC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_EXT_DOKLADUVEROVAPOZICE_RKC
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_EXT_DOKLADUVEROVAPOZICE_RKC" ("S_UCET", "ND_CASTKAMENA", "ND_CASTKALOCAL", "ND_CASTKACNB", "S_MENA", "S_UNIFPROTI_ICO", "S_UNIFPROTI", "ID_DOKLAD", "S_LISTGROUP", "S_LISTGROUPCODE", "S_POPIS", "ND_KATEGORIE_KOEF", "S_LOCALE", "S_UCETUNIF", "ID_UNIFPROTI", "S_POPISORIGINAL", "C_BANKA", "ND_CISTAANGAZOVANOST") AS 
  select "S_UCET","ND_CASTKAMENA","ND_CASTKALOCAL","ND_CASTKACNB","S_MENA","S_UNIFPROTI_ICO","S_UNIFPROTI","ID_DOKLAD","S_LISTGROUP","S_LISTGROUPCODE","S_POPIS","ND_KATEGORIE_KOEF","S_LOCALE","S_UCETUNIF","ID_UNIFPROTI","S_POPISORIGINAL","C_BANKA","ND_CISTAANGAZOVANOST" from VW_EXT_DOKLADUVEROVAPOZICE 
where id_doklad in(select distinct d.id 
              from db_jt.kp_rel_subkonsolidaceclen c, db_jt.kp_ktg_subkonsolidace s, db_jt.kp_ktg_ucetniSpolecnost us, DB_JT.KP_DAT_DOKLAD D 
              where us.id = c.id_ktgUcetniSpolecnost 
                and s.id_ktgUcetniSpolecnost = c.id_ktgsubkonsolidace 
                and c.c_clen = '1' 
                and c.ID_CISSUBTYPCLENSTVI <> 3 -- //? = 1 - pozdeji se mozna zmeni dle pozadavku zda jen 100% nebo i min
                and s.id_ktgUcetniSkupina = 1
                and D.ID_KTGUCETNISPOLECNOST = US.ID 
                AND D.DT_DATUM > TO_DATE('01.01.2013','DD.MM.YYYY')   --od zaciatku roka
                AND (D.DT_DATUM >= C.DT_ClenstviOD OR C.DT_ClenstviOD IS NULL) 
                AND (D.DT_DATUM <= C.DT_ClenstviDO OR C.DT_ClenstviDO IS NULL) 
                AND D.NL_KROK IN (1,2) AND D.C_BASEDOKLAD = '1')
;


PROMPT Completed VW_EXT_DOKLADUVEROVAPOZICE_RKC.sql
PROMPT


-- ============================================================================
-- Deploy: VW_EXT_KPDATKAPITALSKUPINY.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_EXT_KPDATKAPITALSKUPINY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_EXT_KPDATKAPITALSKUPINY
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_EXT_KPDATKAPITALSKUPINY" ("ID", "ID_SKUPINAPOZICE", "C_DYNAMICKY", "DT_PLATNOSTOD", "ND_CASTKA") AS 
  Select "ID","ID_SKUPINAPOZICE","C_DYNAMICKY","DT_PLATNOSTOD","ND_CASTKA" 
From Db_Jt.Kp_Dat_Kapitalskupiny 
Where Id_Skupinapozice  = 1  -- RKC
;


PROMPT Completed VW_EXT_KPDATKAPITALSKUPINY.sql
PROMPT


-- ============================================================================
-- Deploy: VW_EXT_ODBORY_NAKLADY_TISK.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_EXT_ODBORY_NAKLADY_TISK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_EXT_ODBORY_NAKLADY_TISK
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_EXT_ODBORY_NAKLADY_TISK" ("ODBOR_ID", "ODBOR_NAZEV", "ID_KTGUCETNISPOLECNOST", "UCETNNISPOLECNOST", "USEK_ID", "USEK_NAZEV") AS 
  select  o.ID      ODBOR_ID
      --,o.S_NAZEV ODBOR_NAZEV
      ,decode( usp.ID_CISKATSPOL ,5,'',10,'',12,'',15,'',   o.S_NAZEV ) ODBOR_NAZEV 
      --,o.ID_KTGUCETNISPOLECNOST ID_KTGUCETNISPOLECNOST 
      ,decode (o.ID_KTGUCETNISPOLECNOST,1,1000,o.ID_KTGUCETNISPOLECNOST  ) ID_KTGUCETNISPOLECNOST --esc 31.01.2015  
      --, usp.S_NAZEV  UCETNNISPOLECNOST
      ,decode( usp.ID_CISKATSPOL ,5,'',10,'',12,'',15,'',   usp.S_NAZEV ) UCETNNISPOLECNOST 
      ,o.ID_USEK USEK_ID   
      --, usek.S_NAZEV  USEK_NAZEV
      ,decode( usp.ID_CISKATSPOL ,5,'',10,'',12,'',15,'',   usek.S_NAZEV ) USEK_NAZEV 
from 
kp_ktg_odbor o,
KP_KTG_UCETNISPOLECNOST usp,
KP_KTG_USEK usek
where 
--    sysdate between dt_platnostod and dt_platnostdo and 
o.ID_KTGUCETNISPOLECNOST  = usp.id
and o.ID_USEK  = usek.id (+)
;


PROMPT Completed VW_EXT_ODBORY_NAKLADY_TISK.sql
PROMPT


-- ============================================================================
-- Deploy: VW_EXT_ODB_SPOL_NAKLADY_TISK.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_EXT_ODB_SPOL_NAKLADY_TISK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_EXT_ODB_SPOL_NAKLADY_TISK
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_EXT_ODB_SPOL_NAKLADY_TISK" ("ID", "S_NAZEV") AS 
  select 
  --us.ID, 
  decode (us.ID,1,1000,us.ID  ) ID, --esc 31.01.2015
decode( ID_CISKATSPOL ,5,'',10,'',12,'',15,'',   us.S_NAZEV ) S_NAZEV 
--,us.S_NAZEV
from 
      KP_KTG_UCETNISPOLECNOST us
where
      us.DT_DATUMARCHIVACE  is null
;


PROMPT Completed VW_EXT_ODB_SPOL_NAKLADY_TISK.sql
PROMPT


-- ============================================================================
-- Deploy: VW_EXT_REBECCA_APPUSER.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_EXT_REBECCA_APPUSER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_EXT_REBECCA_APPUSER
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_EXT_REBECCA_APPUSER" ("ID", "S_USERID", "S_KRESTNI", "S_PRIJMENI", "S_EMAIL", "S_TELEFON", "C_ARCHIVNI", "C_EXTERNI") AS 
  select
u.ID, u.S_USERID, u.S_KRESTNI, S_PRIJMENI, u.S_EMAIL, s_telefon, u.C_ARCHIVNI , u.C_EXTERNI
from KTG_APPUSER u
;


PROMPT Completed VW_EXT_REBECCA_APPUSER.sql
PROMPT


-- ============================================================================
-- Deploy: VW_EXT_REBECCA_PROTISTRANY.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_EXT_REBECCA_PROTISTRANY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_EXT_REBECCA_PROTISTRANY
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_EXT_REBECCA_PROTISTRANY" ("KID", "ID_PROTISTRANA", "PROTISTRANA", "PROTISTRANA_ICO", "PROTISTRANA_POM_ICO", "UCETNI_SPOL_ID", "UCETNI_SPOL", "UCETNI_SPOL_ICO", "UCETNI_SPOL_HOLDING", "S_COUNTRY", "S_KODKATEGORIEPROTISTRANA", "S_KODKATEGORIEPROTISTRANA_NZV", "TYP_SUBJEKT_KOD", "TYP_SUBJEKT_POPIS", "C_CARTESIS_FLG", "PROTISTRANA_ULICE_CP_CO", "PROTISTRANA_PSC", "PROTISTRANA_MESTO", "PROTISTRANA_ZEME", "ODPOVEDNA_OSOBA", "ODPOVEDNA_OSOBA_HOLDINGU", "ZODPOVEDNA_UCETNI", "SPRAVCE_KONSOLIDACE", "ADMINISTRATOR", "ODPOVEDNA_OSOBA_ID", "ODPOVEDNA_OSOBA_HOLDINGU_ID", "ZODPOVEDNA_UCETNI_ID", "SPRAVCE_KONSOLIDACE_ID", "ADMINISTRATOR_ID") AS 
  select 
  rebe.KID, 
  proti.id ID_PROTISTRANA, proti.s_nazev PROTISTRANA, proti.s_ico PROTISTRANA_ICO , proti.S_POM_ICO PROTISTRANA_POM_ICO
, ucspol.id UCETNI_SPOL_ID, ucspol.S_NAZEV UCETNI_SPOL,ucspol.S_ICO UCETNI_SPOL_ICO
, hold.S_POPIS UCETNI_SPOL_HOLDING
, proti.S_COUNTRY 
,nvl(proti.S_KODKATEGORIEPROTISTRANA, proti.S_KODKATEGORIEPROTISTRANA_2) S_KODKATEGORIEPROTISTRANA
,kodkat.S_NAZEV S_KODKATEGORIEPROTISTRANA_NZV
,typsubj.S_KOD      TYP_SUBJEKT_KOD
,typsubj.S_POPIS    TYP_SUBJEKT_POPIS
--,proti.S_OKEC ,proti.S_EKONOM_SEKTOR 
,db_jt.f_jespolecnostclenskupiny(ucspol.id,   8,   sysdate) as C_CARTESIS_FLG
,PROTI.S_ULICE  PROTISTRANA_ULICE_CP_CO
,PROTI.S_PSC  PROTISTRANA_PSC
,PROTI.S_MESTO PROTISTRANA_MESTO
,proti.S_COUNTRY PROTISTRANA_ZEME
,uoo.S_PRIJMENI ||' '||uoo.S_KRESTNI ODPOVEDNA_OSOBA
,uoh.S_PRIJMENI ||' '||uoh.S_KRESTNI ODPOVEDNA_OSOBA_HOLDINGU
,uzu.S_PRIJMENI ||' '||uzu.S_KRESTNI ZODPOVEDNA_UCETNI
,usk.S_PRIJMENI ||' '||usk.S_KRESTNI SPRAVCE_KONSOLIDACE
,uad.S_PRIJMENI ||' '||uad.S_KRESTNI ADMINISTRATOR
,uoo.id                              ODPOVEDNA_OSOBA_ID
,uoh.id                              ODPOVEDNA_OSOBA_HOLDINGU_ID
,uzu.id                              ZODPOVEDNA_UCETNI_ID
,usk.id                              SPRAVCE_KONSOLIDACE_ID
,uad.id                              ADMINISTRATOR_ID
from
  KP_KTG_UCETNISPOLECNOST  ucspol
, KP_KTG_SPOLECNOST     proti
, KP_CIS_MNGSEGMENT     hold
, EXT_REBECCA_KLIENTI   rebe
,KP_CIS_KATEGORIEPROTISTRAN   kodkat  -- 
,KP_DEF_KATEGORIE2TYP         kat2typ
,KP_CIS_TYPSUBJECT            typsubj -- nazvy ku kodom 
,KTG_APPUSER uoo
,KTG_APPUSER uzu
,KTG_APPUSER uoh
,KTG_APPUSER usk
,KTG_APPUSER uad
where
--spolocnosti zo zoznamu z REBECCA
(  trim(proti.s_ico)     = db_dsa.f_formatICO(rebe.ICO)  or  trim(proti.S_POM_ICO) = db_dsa.f_formatICO(rebe.ICO) or   trim(ucspol.S_ICO)     = db_dsa.f_formatICO(rebe.ICO)
 )
AND
--+ info o protitsranach
  proti.ID_KTGSPOLECNOST  = ucspol.id (+)
---------------
AND     ucspol.ID_MNGSEGMENTBOSS     = uoh.id   (+)
and     ucspol.ID_ZODPOVEDNAUCETNI   = uzu.id   (+)
and     ucspol.ID_ODPOVEDNAOSOBA     = uoo.id   (+)
and     ucspol.ID_SPRAVCEKONSOLIDACE = usk.id   (+)
and     ucspol.ID_ADMINISTRATOR      = uad.id   (+)
and     ucspol.ID_MNGSEGMENT    = hold.id (+)
----------
AND   nvl(proti.S_KODKATEGORIEPROTISTRANA, proti.S_KODKATEGORIEPROTISTRANA_2)  = kodkat.S_EXTID (+)
AND   KODKAT.S_EXTID = KAT2TYP.S_KODKATEGORIEPROTISTRANA (+)
AND   kat2typ.ID_CISTYPSUBJECT  = typsubj.ID (+)
--;
UNION
--  PROTISTRANY ( nespecificke ) MIMO zoznam od REBECCA 
  select distinct
null, --  rebe.KID, 
  proti.id ID_PROTISTRANA, proti.s_nazev PROTISTRANA, proti.s_ico PROTISTRANA_ICO , proti.S_POM_ICO PROTISTRANA_POM_ICO
, ucspol.id UCETNI_SPOL_ID, ucspol.S_NAZEV UCETNI_SPOL,ucspol.S_ICO UCETNI_SPOL_ICO
, hold.S_POPIS UCETNI_SPOL_HOLDING
, proti.S_COUNTRY 
,nvl(proti.S_KODKATEGORIEPROTISTRANA, proti.S_KODKATEGORIEPROTISTRANA_2) S_KODKATEGORIEPROTISTRANA
,kodkat.S_NAZEV S_KODKATEGORIEPROTISTRANA_NZV
,typsubj.S_KOD      TYP_SUBJEKT_KOD
,typsubj.S_POPIS    TYP_SUBJEKT_POPIS
--,proti.S_OKEC ,proti.S_EKONOM_SEKTOR 
,db_jt.f_jespolecnostclenskupiny(ucspol.id,   8,   sysdate) as C_CARTESIS_FLG
,PROTI.S_ULICE  PROTISTRANA_ULICE_CP_CO
,PROTI.S_PSC  PROTISTRANA_PSC
,PROTI.S_MESTO PROTISTRANA_MESTO
,proti.S_COUNTRY PROTISTRANA_ZEME
,uoo.S_PRIJMENI ||' '||uoo.S_KRESTNI ODPOVEDNA_OSOBA
,uoh.S_PRIJMENI ||' '||uoh.S_KRESTNI ODPOVEDNA_OSOBA_HOLDINGU
,uzu.S_PRIJMENI ||' '||uzu.S_KRESTNI ZODPOVEDNA_UCETNI
,usk.S_PRIJMENI ||' '||usk.S_KRESTNI SPRAVCE_KONSOLIDACE
,uad.S_PRIJMENI ||' '||uad.S_KRESTNI ADMINISTRATOR
,uoo.id                              ODPOVEDNA_OSOBA_ID
,uoh.id                              ODPOVEDNA_OSOBA_HOLDINGU_ID
,uzu.id                              ZODPOVEDNA_UCETNI_ID
,usk.id                              SPRAVCE_KONSOLIDACE_ID
,uad.id                              ADMINISTRATOR_ID
from
  KP_KTG_UCETNISPOLECNOST     ucspol
, KP_KTG_SPOLECNOST           proti
, KP_CIS_MNGSEGMENT           hold
--, EXT_REBECCA_KLIENTI         rebe
,KP_CIS_KATEGORIEPROTISTRAN   kodkat  -- 
,KP_DEF_KATEGORIE2TYP         kat2typ
,KP_CIS_TYPSUBJECT            typsubj -- nazvy ku kodom 
,KTG_APPUSER uoo
,KTG_APPUSER uzu
,KTG_APPUSER uoh
,KTG_APPUSER usk
,KTG_APPUSER uad
where
-- ( db_dsa.f_formatICO(ucspol.S_ICO) = db_dsa.f_formatICO(rebe.ICO) ) --slo dlho
 ( db_dsa.f_formatICO(ucspol.S_ICO) not in ( select db_dsa.f_formatICO(rebe.ICO) from EXT_REBECCA_KLIENTI rebe) )
and ucspol.id_ciskatspol not in (5,10,12,15) --CL, SPV-PAR, CUSTODY, CL-CUS )
---
and   proti.ID_KTGSPOLECNOST  = ucspol.id --! berieme iba UC SPOL(+)
---
and   ucspol.ID_MNGSEGMENT    = hold.id (+)
and     ucspol.ID_MNGSEGMENTBOSS     = uoh.id   (+)
and     ucspol.ID_ZODPOVEDNAUCETNI   = uzu.id   (+)
and     ucspol.ID_ODPOVEDNAOSOBA     = uoo.id   (+)
and     ucspol.ID_SPRAVCEKONSOLIDACE = usk.id   (+)
and     ucspol.ID_ADMINISTRATOR      = uad.id   (+)
---
AND   nvl(proti.S_KODKATEGORIEPROTISTRANA, proti.S_KODKATEGORIEPROTISTRANA_2)  = kodkat.S_EXTID (+)
AND   KODKAT.S_EXTID = KAT2TYP.S_KODKATEGORIEPROTISTRANA (+)
AND   kat2typ.ID_CISTYPSUBJECT  = typsubj.ID (+)
--;
UNION
--  CREATE OR REPLACE FORCE VIEW "DB_JT"."VW_EXT_REBECCA_PROTISTRANY" ("KID", "ID_PROTISTRANA", "PROTISTRANA", "PROTISTRANA_ICO", "PROTISTRANA_POM_ICO", "UCETNI_SPOL_ID", "UCETNI_SPOL", "UCETNI_SPOL_ICO", "UCETNI_SPOL_HOLDING", "S_COUNTRY", "S_KODKATEGORIEPROTISTRANA", "S_KODKATEGORIEPROTISTRANA_NZV", "TYP_SUBJEKT_KOD", "TYP_SUBJEKT_POPIS", "C_CARTESIS_FLG", "PROTISTRANA_ULICE_CP_CO", "PROTISTRANA_PSC", "PROTISTRANA_MESTO", "PROTISTRANA_ZEME", "ODPOVEDNA_OSOBA", "ODPOVEDNA_OSOBA_HOLDINGU", "ZODPOVEDNA_UCETNI", "SPRAVCE_KONSOLIDACE", "ADMINISTRATOR", "ODPOVEDNA_OSOBA_ID", "ODPOVEDNA_OSOBA_HOLDINGU_ID", "ZODPOVEDNA_UCETNI_ID", "SPRAVCE_KONSOLIDACE_ID", "ADMINISTRATOR_ID") AS 
--  PROTISTRANY ( SPECIFICKE ) MIMO zoznam od REBECCA 
  select distinct
null, --  rebe.KID, 
null --  proti.id ID_PROTISTRANA
,null -- proti.s_nazev PROTISTRANA
,null -- proti.s_ico PROTISTRANA_ICO 
,null -- proti.S_POM_ICO PROTISTRANA_POM_ICO
, ucspol.id UCETNI_SPOL_ID
,null -- ucspol.S_NAZEV UCETNI_SPOL
,null --ucspol.S_ICO UCETNI_SPOL_ICO
,null -- hold.S_POPIS UCETNI_SPOL_HOLDING
,null -- proti.S_COUNTRY 
,nvl(proti.S_KODKATEGORIEPROTISTRANA, proti.S_KODKATEGORIEPROTISTRANA_2) S_KODKATEGORIEPROTISTRANA
,kodkat.S_NAZEV S_KODKATEGORIEPROTISTRANA_NZV
,typsubj.S_KOD      TYP_SUBJEKT_KOD
,typsubj.S_POPIS    TYP_SUBJEKT_POPIS
--,proti.S_OKEC ,proti.S_EKONOM_SEKTOR 
,db_jt.f_jespolecnostclenskupiny(ucspol.id,   8,   sysdate) as C_CARTESIS_FLG
,null --PROTI.S_ULICE  PROTISTRANA_ULICE_CP_CO
,null --PROTI.S_PSC  PROTISTRANA_PSC
,null --PROTI.S_MESTO PROTISTRANA_MESTO
,null --proti.S_COUNTRY PROTISTRANA_ZEME
,uoo.S_PRIJMENI ||' '||uoo.S_KRESTNI ODPOVEDNA_OSOBA
,uoh.S_PRIJMENI ||' '||uoh.S_KRESTNI ODPOVEDNA_OSOBA_HOLDINGU
,uzu.S_PRIJMENI ||' '||uzu.S_KRESTNI ZODPOVEDNA_UCETNI
,usk.S_PRIJMENI ||' '||usk.S_KRESTNI SPRAVCE_KONSOLIDACE
,uad.S_PRIJMENI ||' '||uad.S_KRESTNI ADMINISTRATOR
,uoo.id                              ODPOVEDNA_OSOBA_ID
,uoh.id                              ODPOVEDNA_OSOBA_HOLDINGU_ID
,uzu.id                              ZODPOVEDNA_UCETNI_ID
,usk.id                              SPRAVCE_KONSOLIDACE_ID
,uad.id                              ADMINISTRATOR_ID
from
  KP_KTG_UCETNISPOLECNOST     ucspol
, KP_KTG_SPOLECNOST           proti
, KP_CIS_MNGSEGMENT           hold
--, EXT_REBECCA_KLIENTI         rebe
,KP_CIS_KATEGORIEPROTISTRAN   kodkat  -- 
,KP_DEF_KATEGORIE2TYP         kat2typ
,KP_CIS_TYPSUBJECT            typsubj -- nazvy ku kodom 
,KTG_APPUSER uoo
,KTG_APPUSER uzu
,KTG_APPUSER uoh
,KTG_APPUSER usk
,KTG_APPUSER uad
where
-- ( db_dsa.f_formatICO(ucspol.S_ICO) = db_dsa.f_formatICO(rebe.ICO) ) --slo dlho
 ( db_dsa.f_formatICO(ucspol.S_ICO) not in ( select db_dsa.f_formatICO(rebe.ICO) from EXT_REBECCA_KLIENTI rebe) )
and ucspol.id_ciskatspol in (5,10,12,15) --CL, SPV-PAR, CUSTODY, CL-CUS )
---
and   proti.ID_KTGSPOLECNOST  = ucspol.id --! berieme iba UC SPOL(+)
---
and   ucspol.ID_MNGSEGMENT    = hold.id (+)
and     ucspol.ID_MNGSEGMENTBOSS     = uoh.id   (+)
and     ucspol.ID_ZODPOVEDNAUCETNI   = uzu.id   (+)
and     ucspol.ID_ODPOVEDNAOSOBA     = uoo.id   (+)
and     ucspol.ID_SPRAVCEKONSOLIDACE = usk.id   (+)
and     ucspol.ID_ADMINISTRATOR      = uad.id   (+)
---
AND   nvl(proti.S_KODKATEGORIEPROTISTRANA, proti.S_KODKATEGORIEPROTISTRANA_2)  = kodkat.S_EXTID (+)
AND   KODKAT.S_EXTID = KAT2TYP.S_KODKATEGORIEPROTISTRANA (+)
AND   kat2typ.ID_CISTYPSUBJECT  = typsubj.ID (+);

   COMMENT ON TABLE "DB_JT"."VW_EXT_REBECCA_PROTISTRANY"  IS '02.08 esc Doplnene Specificke a spol mimo zoznam, 29.06  Administrator, esc 15.06 Users, KID, HR-17.3.2016, pridan sloupce adresy, HR-4.3.2016, pridan sloupec C_CARTESIS_FLG'
;


PROMPT Completed VW_EXT_REBECCA_PROTISTRANY.sql
PROMPT


-- ============================================================================
-- Deploy: VW_EXT_REP_BUDGETY_NAVYSENI.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_EXT_REP_BUDGETY_NAVYSENI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_EXT_REP_BUDGETY_NAVYSENI
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_EXT_REP_BUDGETY_NAVYSENI" ("ZADANO", "SPOLECNOST", "ID", "STATUS", "ZADAVATEL", "BUDGET_ODBOR_PROJEKT", "SL_POPIS", "SUMA_RADKU", "S_MENA", "CERPAT_REZERVU", "DT_SCHVAL_CERPANI_MIMO_REZERVU", "DT_SCHVALENO_GESTOR", "DT_ZAMITNUTO_GESTOR", "RADEK_TYP_TRANSAKCE", "RADEK", "RADEK_CASTKA", "RADEK_KOMENTAR", "RAD_DAT_SCHVALENO_OO_ODBORU", "RAD_DAT_SCHVALENO_PM", "RAD_DAT_SCHVALENO_OOH", "RAD_DAT_OO_SPOLECNOSTI", "RAD_DAT_ZAMITNUTO") AS 
  SELECT DISTINCT TO_CHAR(sl.dt_datumzadani,'DD.MM.YYYY') Zadano,
    us.s_nazev Spolecnost, --sl.id_ktgucetnispolecnost,
    sl.id,
    DECODE ( sl.ID_CISSTATUS,1,'ZRUSENY',2,'TYPIZOVANY') Status,
    (SELECT u.s_prijmeni
      || ' '
      || u.s_krestni
    FROM ktg_appuser u
    WHERE u.ID = sl.id_zadavatel
    ) zadavatel,
    CASE
      WHEN (sl.id_cisdokument = 4
      AND b.id_ktgodbor      IS NOT NULL)
      THEN
        (SELECT oin.s_kod
          || ' - '
          || oin.s_nazev
          || ' ('
          || b.dt_platnostod
          || ' - '
          || b.dt_platnostdo
          || ')'
        FROM kp_ktg_odbor oin
        WHERE oin.ID = b.id_ktgodbor
        )
      WHEN (sl.id_cisdokument = 4
      AND b.id_ktgprojekt    IS NOT NULL)
      THEN
        (SELECT pin.ID
          || ' - '
          || pin.s_nazev
          || ' ('
          || b.dt_platnostod
          || ' - '
          || b.dt_platnostdo
          || ')'
        FROM kp_ktg_projekt pin
        WHERE pin.ID = b.id_ktgprojekt
        )
        /*ELSE    (SELECT t.s_popis
        FROM kp_cis_typtransakce t
        WHERE t.ID = sl.id_typtransakce)
        || (SELECT DECODE (t.s_popis, NULL, '', ', ' || t.s_popis)
        FROM kp_cis_typtransakce t
        WHERE t.ID = sl.id_ttdeveloper)*/
    END BUDGET_odbor_projekt,
    sl.s_popis SL_popis,
    (SELECT SUM (nd_castka)
    FROM kp_dat_dokumentradek dr
    WHERE dr.id_dokument = sl.ID
    ) SUMA_radku,
    sl.s_mena,
    DECODE(NVL(sl.cerpat_rezervu,'F'),'F','NE','T','ANO') cerpat_rezervu,
    TO_CHAR(sl.dt_navyseni_schvaleno,'DD.MM.YYYY') dt_schval_cerpani_mimo_rezervu,
    TO_CHAR(sl.dt_gestorschvaleno,'DD.MM.YYYY') dt_schvaleno_gestor,
    TO_CHAR(sl.dt_gestorzamitnuto,'DD.MM.YYYY') dt_zamitnuto_gestor,
    --RADEK--
    (
    SELECT t.s_popis
    FROM kp_cis_typtransakce t
    WHERE t.ID = slr.id_typtransakce
    ) radek_typ_transakce,
    slr.id radek,
    slr.nd_castka radek_castka,
    slr.s_komentar radek_komentar,
    TO_CHAR(slr.dt_schvalenoodbor,'DD.MM.YYYY') rad_dat_schvaleno_OO_odboru,
    TO_CHAR(slr.dt_schvalenoprojekt,'DD.MM.YYYY') rad_dat_schvaleno_PM,
    TO_CHAR(slr.dt_schvalenotop,'DD.MM.YYYY') rad_dat_schvaleno_OOH,
    TO_CHAR(slr.dt_schvalenoucspol,'DD.MM.YYYY') rad_dat_OO_spolecnosti,
    TO_CHAR(slr.dt_zamitnuto,'DD.MM.YYYY') rad_dat_zamitnuto
    --RADEK--
    -----------------------------------------------------------------------------
  FROM kp_dat_dokument sl,
    kp_dat_dokumentradek slr,
    kp_dat_budget b,
    kp_ktg_ucetnispolecnost us
  WHERE sl.id_cisdokument =4 --navyseni budgetu
    --do 01.07.2011 AND sl.dt_datumzadani BETWEEN TRUNC(sysdate,'YEAR') AND TRUNC(sysdate,'MONTH')
  AND sl.dt_datumzadani BETWEEN TRUNC(sysdate,'YEAR')-365 AND sysdate
  AND ( sl.id_ktgucetnispolecnost  IN ( 1,5000)  OR sl.id_ktgucetnispolecnost is null )
  AND sl.id                      = slr.id_dokument
  AND sl.id_budget               = b.ID(+)
  AND sl.id_ktgucetnispolecnost  = us.ID(+)
    --and sl.id = 196412
  ORDER BY sl.id ,
    slr.id
;


PROMPT Completed VW_EXT_REP_BUDGETY_NAVYSENI.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_EXT_REP_SL_SCHVALOVANI.sql: 'utf-8' codec can't decode byte 0xec in position 7915: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_EXT_REP_SL_SCHVALOVANI_2010.sql: 'utf-8' codec can't decode byte 0xec in position 7921: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_EXT_REP_SL_SCHVALOVANI_2013.sql: 'utf-8' codec can't decode byte 0xc8 in position 7489: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_EXT_REP_SL_SCHVALOVANI_2016.sql: 'utf-8' codec can't decode byte 0xc8 in position 7739: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_EXT_REP_SL_SCHVALOVANI_2019.sql: 'utf-8' codec can't decode byte 0xc8 in position 7350: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_EXT_REP_SL_SCHVALOVANI_2022.sql: 'utf-8' codec can't decode byte 0xc8 in position 7861: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_EXT_REP_SL_SCHVALOVANI_JT_ALL.sql: 'utf-8' codec can't decode byte 0xc8 in position 7865: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_EXT_REP_SL_SCHVALOVANI_LOG.sql: 'utf-8' codec can't decode byte 0xec in position 3858: invalid continuation byte


-- ============================================================================
-- Deploy: VW_EXT_REP_SL_SCHVAL_RADEK_LOG.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_EXT_REP_SL_SCHVAL_RADEK_LOG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_EXT_REP_SL_SCHVAL_RADEK_LOG
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_EXT_REP_SL_SCHVAL_RADEK_LOG" ("AKCE", "DATUM_ZMENY", "SL_ID", "RADEK_ID", "ZADANI_SL_RADEK", "ID_ODBOR", "ODBOR", "ID_PROJEKT", "PROJEKT", "CASTKA", "OO_ODBOR", "SCHVALENO_ODBOR", "PROJEKT_MANAGER", "SCHVALENO_PM", "OO_USEK_SPOL", "SCHVALENO_OO", "OOH", "SCHVALENO_OOH", "S_KOMENTAR", "PREFAK", "DATUM_PREFAKTURACE", "PREFAKTUROVAL", "Z_OBJEDNAVKY", "ZAMITNUTO", "DATUM_ZAMITNUTI_RADKU", "DUVOD_ZAMITNUTI_RADKU") AS 
  SELECT
dr.C_AKCE                                         AKCE
,dr.DT_ZMENA                                      DATUM_ZMENY
,dr.ID_DOKUMENT                                   SL_ID
,dr.ID                                            RADEK_ID
,DT_DATUMZADANI                                   ZADANI_SL_RADEK
,dr.ID_ODBOR                                      ID_ODBOR
,odbor.s_nazev                                    ODBOR  
,dr.ID_PROJEKT                                    ID_PROJEKT
,proj.s_nazev                                     PROJEKT
,ND_CASTKA                                        CASTKA
,SCHVALENOODBOR.s_prijmeni ||' '|| SCHVALENOODBOR.s_krestni      
                                                  OO_ODBOR
,dr.DT_SCHVALENOODBOR                             SCHVALENO_ODBOR
,SCHVALENOPROJEKT.s_prijmeni ||' '|| SCHVALENOPROJEKT.s_krestni      
                                                  PROJEKT_MANAGER
,dr.DT_SCHVALENOPROJEKT                           SCHVALENO_PM
,SCHVALENOUCSPOL.s_prijmeni ||' '|| SCHVALENOUCSPOL.s_krestni  
                                                  OO_USEK_SPOL
,dr.DT_SCHVALENOUCSPOL                            SCHVALENO_OO
,SCHVALENOTOP.s_prijmeni ||' '|| SCHVALENOTOP.s_krestni  
                                                  OOH
,dr.DT_SCHVALENOTOP                               SCHVALENO_OOH
,S_KOMENTAR
,decode(dr.C_KPREFAKT,1,'ANO')                    PREFAK
,DT_DATUMPREFAKT                                  DATUM_PREFAKTURACE
--,ID_PREFAKT
,PREFAK.s_prijmeni ||' '|| PREFAK.s_krestni      
                                                  PREFAKTUROVAL
--,C_REMOVED                                        
,CASE  WHEN ( dr.C_ZOBJEDNAVKY=1 and dr.ID_OBJ_RADEK is not null) 
       THEN   (select obj.id_dokument from kp_dat_dokumentradek obj where obj.id = dr.ID_OBJ_RADEK )
       ELSE NULL             
 END                                              Z_OBJEDNAVKY
--,ID_ZAMITNUTO
,ZAMITNUTO.s_prijmeni ||' '|| ZAMITNUTO.s_krestni      
                                                  ZAMITNUTO
,DT_ZAMITNUTO                                     DATUM_ZAMITNUTI_RADKU
,S_ZAMITNUTO                                      DUVOD_ZAMITNUTI_RADKU
--,ID_DOKUMENTORIG
--,ID_ODBOROOREAL
--,ID_PROJEKTMANREAL
--,ID_UCSPOLOOREAL
--,ID_UCSPOLTOPREAL
--,ND_OBJ_CASTKA_VOLNA
FROM  kp_log_dokumentradek dr
     ,ktg_appuser  SCHVALENOODBOR
     ,ktg_appuser  SCHVALENOPROJEKT
     ,ktg_appuser  SCHVALENOUCSPOL
     ,ktg_appuser  SCHVALENOTOP
     ,ktg_appuser  ZAMITNUTO
     ,ktg_appuser  PREFAK
     ,kp_ktg_odbor odbor
     ,kp_ktg_projekt proj     
WHERE
    SCHVALENOODBOR.id   (+) = dr.ID_ODBOROO
and SCHVALENOPROJEKT.id (+)= dr.ID_PROJEKTMAN
and SCHVALENOUCSPOL.id  (+)= dr.ID_UCSPOLOO
and SCHVALENOTOP.id     (+)= dr.ID_UCSPOLTOP
and ZAMITNUTO.id        (+)= dr.ID_ZAMITNUTO
and PREFAK.id           (+)= dr.ID_PREFAKT
and odbor.id (+) = dr.ID_ODBOR                                     
and proj.id  (+) =  dr.ID_PROJEKT
;


PROMPT Completed VW_EXT_REP_SL_SCHVAL_RADEK_LOG.sql
PROMPT


-- ============================================================================
-- Deploy: VW_EXT_SPOLECNOSTI_UA_RKC.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_EXT_SPOLECNOSTI_UA_RKC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_EXT_SPOLECNOSTI_UA_RKC
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_EXT_SPOLECNOSTI_UA_RKC" ("KIS_ID", "ICO", "NAZEV_SPOL", "KOSOLIDACE", "RKC_CLEN_OD", "RKC_CLEN_DO", "KIS_ONLINE", "DB_LINK", "MENA") AS 
  SELECT us.id as KIS_ID,
       us.s_ico as ICO,
       us.s_nazev as NAZEV_SPOL,
       tc.s_popis as KOSOLIDACE,
       C.DT_ClenstviOD as RKC_CLEN_OD,
       C.DT_ClenstviDO as RKC_CLEN_DO,
       us.c_online as KIS_ONLINE,
       NVL(d.s_dblink,us.s_dblink) as DB_LINK,
       NVL(l.s_mena,us.s_mena) as MENA
/* =======================================
Autor:      Miroslav Smrecek
HD:         KIS-10
Pouziti:    RKC spolecnosti pro ciselniky
Funkce:     zdroj pro plneni ciselniku z CISB-66
Grant:      INFORMATICA
Vytvoreno:  02.11.2023
Update:     KIS-31 - pridanie stlpca MENA
                   - uprava vystupu pre spol bez db_linku
===========================================*/
  FROM db_jt.kp_ktg_ucetniSpolecnost us
  JOIN db_jt.kp_rel_subkonsolidaceclen c
    ON us.id = c.id_ktgUcetniSpolecnost
  JOIN db_jt.kp_ktg_subkonsolidace s
    ON s.id_ktgUcetniSpolecnost = c.id_ktgsubkonsolidace
  LEFT JOIN db_jt.kp_ktg_ucetnispolecnost_link l
    ON us.id = l.id_ktgucetnispolecnost AND
       sysdate BETWEEN l.dt_platnostod AND l.dt_platnostdo
  LEFT JOIN db_jt.kp_cis_databaze d
    ON l.id_cisdatabaze = d.id
  LEFT JOIN kp_cis_subtypclenstvi tc
    ON tc.id = c.id_cissubtypclenstvi
 WHERE c.c_clen = '1'
   AND c.ID_CISSUBTYPCLENSTVI <> 3 -- okerm equity
   AND s.id_ktgUcetniSkupina = 1 -- RKC
   and c.ID_KTGSUBKONSOLIDACE = 10344
   AND (sysdate >= C.DT_ClenstviOD OR C.DT_ClenstviOD IS NULL)
   AND (sysdate <= C.DT_ClenstviDO OR C.DT_ClenstviDO IS NULL OR
       C.DT_ClenstviDO = '31.12.1990') ---esc
   and us.c_extsystem != 'K'

;


PROMPT Completed VW_EXT_SPOLECNOSTI_UA_RKC.sql
PROMPT


-- ============================================================================
-- Deploy: VW_EXT_SPOLECNOST_ARCH_CESTA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_EXT_SPOLECNOST_ARCH_CESTA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_EXT_SPOLECNOST_ARCH_CESTA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_EXT_SPOLECNOST_ARCH_CESTA" ("ID_EXT", "S_NAZEV_EXT", "S_NUMBER0", "S_ICO", "EO_ID", "S_DOID", "KID", "ID_DATABAZE", "S_DATABAZE", "ID_PROTISTRANA", "ID_SPOLECNOST", "S_CESTA") AS 
  SELECT DISTINCT p.id ID_EXT,
    p.s_nazev,
    p.s_number0,
    p.s_ico,
    p.eo_id,
    p.doid,
    p.kid,
    p.id_databaze --, d.s_dblink
    ,
    d.s_instance,
    p.id_spolecnost ID_PROTISTRANA,
    sp.id_ktgspolecnost ID_SPOLECNOST,
    --'\\tweek\Konsolidace_JT\archiv\spol\'||sp.ID_KTGSPOLECNOST CESTA
    '\\192.168.2.63\Konsolidace_JT\archiv\spol\'||sp.ID_KTGSPOLECNOST CESTA
from 
db_dsa.KP_rel_Protistrana p,  
db_jt.kp_ktg_spolecnost sp, 
db_jt.KP_cis_databaze d
where   
sp.id = p.id_spolecnost  
and id_ktgspolecnost is not null --?? ucetni spolecnosti   
and p.id_databaze = d.id  
and sp.id_ktgspolecnost NOT in (1,5000,7327,7330)
;


PROMPT Completed VW_EXT_SPOLECNOST_ARCH_CESTA.sql
PROMPT


-- ============================================================================
-- Deploy: VW_EXT_TYPYTRANSAKCI_BUDGETY.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_EXT_TYPYTRANSAKCI_BUDGETY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_EXT_TYPYTRANSAKCI_BUDGETY
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_EXT_TYPYTRANSAKCI_BUDGETY" ("ID", "ID_CISSUBJECT", "S_UCET", "ID_CISTYPTRANSAKCE", "S_KOD", "S_POPIS", "S_KOMENTAR") AS 
  select distinct 
bm.id, bm.id_cissubject, bm.s_ucet, bm.id_cistyptransakce, tt.s_kod,tt.s_popis, tt.s_komentar 
from 
  kp_def_budgetmustek bm
  ,kp_cis_typtransakce tt
where
bm.ID_CISSUBJECT = 80 and trunc(sysdate) BETWEEN bm.DT_PLATNOSTOD AND bm.DT_PLATNOSTDO
and tt.id = bm.id_cistyptransakce
and trunc(sysdate) BETWEEN tt.DT_PLATNOSTOD AND tt.DT_PLATNOSTDO
;


PROMPT Completed VW_EXT_TYPYTRANSAKCI_BUDGETY.sql
PROMPT


-- ============================================================================
-- Deploy: VW_EXT_UCETNISPOLECNOST_PUBLIC.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_EXT_UCETNISPOLECNOST_PUBLIC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_EXT_UCETNISPOLECNOST_PUBLIC
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_EXT_UCETNISPOLECNOST_PUBLIC" ("ID", "ID_CISSUBJECT", "S_ICO", "SPIN_ID", "TOPAS_ID", "QUEST_ID", "C_EXTSYSTEM", "S_NAZEV", "C_POCITATROZVAHU", "S_SOUBORPREDPONA", "S_MENA", "S_DBLINK", "C_AUTOMATICKEGENEROVANI", "ID_KATEGORIE", "C_RKC", "S_ZKRATKA", "DT_LASTCLOSEDATE", "DT_DATUMARCHIVACE", "C_OPCE", "ID_CISKATSPOL", "ID_ZODPOVEDNAUCETNI", "ID_ODPOVEDNAOSOBA", "ID_ADMINISTRATOR", "DT_RELATIVEDATE", "ID_TOPMNG", "S_POZNAMKA", "C_DANOVAZTRATA", "ID_CISOPCE", "ND_DOCUROVEN2", "S_LOCALE", "C_DOCDISPLAY", "C_PREHLEDDISPLAY", "ID_CISNOMINEE", "NL_ROKPOCSTAVIMPORTSYSTEM", "ID_TYPPROJEKTU", "ID_KTGODBOR", "ID_KTGPROJEKT", "DT_UCETNIOBDOBISTART", "DT_UCETNIOBDOBIKONEC", "C_ONLINE", "DT_ONLINEOD", "C_NOCNIZPRACOVANI", "ID_CISNASTROJUCETNIVYJIMKY", "ID_CISDATABAZE", "S_SKUPINALIKE", "ND_BUDGETNAVYSENI_OO", "ND_BUDGETNAVYSENI_TOP", "S_DUVODOFFLINE", "S_UZIVATEL", "ID_MNGSEGMENT", "ID_SPRAVCEKONSOLIDACE", "ID_MNGSEGMENTBOSS", "ID_CENTRALA", "C_UCETNICTVI_V_IFRS", "C_IFRSPRIMARNI", "DT_UNIFIKOVANEDOKLADY", "C_FEIS_UCETTYP", "C_TESTOVATMAJUCAST", "C_POCITEJMUPOZICI", "C_MULTISEGMENT", "C_EXPORTJAKOPROTISTRANA") AS 
  select "ID","ID_CISSUBJECT","S_ICO","SPIN_ID","TOPAS_ID","QUEST_ID","C_EXTSYSTEM","S_NAZEV","C_POCITATROZVAHU","S_SOUBORPREDPONA","S_MENA","S_DBLINK","C_AUTOMATICKEGENEROVANI","ID_KATEGORIE","C_RKC","S_ZKRATKA","DT_LASTCLOSEDATE","DT_DATUMARCHIVACE","C_OPCE","ID_CISKATSPOL","ID_ZODPOVEDNAUCETNI","ID_ODPOVEDNAOSOBA","ID_ADMINISTRATOR","DT_RELATIVEDATE","ID_TOPMNG","S_POZNAMKA","C_DANOVAZTRATA","ID_CISOPCE","ND_DOCUROVEN2","S_LOCALE","C_DOCDISPLAY","C_PREHLEDDISPLAY","ID_CISNOMINEE","NL_ROKPOCSTAVIMPORTSYSTEM","ID_TYPPROJEKTU","ID_KTGODBOR","ID_KTGPROJEKT","DT_UCETNIOBDOBISTART","DT_UCETNIOBDOBIKONEC","C_ONLINE","DT_ONLINEOD","C_NOCNIZPRACOVANI","ID_CISNASTROJUCETNIVYJIMKY","ID_CISDATABAZE","S_SKUPINALIKE","ND_BUDGETNAVYSENI_OO","ND_BUDGETNAVYSENI_TOP","S_DUVODOFFLINE","S_UZIVATEL","ID_MNGSEGMENT","ID_SPRAVCEKONSOLIDACE","ID_MNGSEGMENTBOSS","ID_CENTRALA","C_UCETNICTVI_V_IFRS","C_IFRSPRIMARNI","DT_UNIFIKOVANEDOKLADY","C_FEIS_UCETTYP","C_TESTOVATMAJUCAST","C_POCITEJMUPOZICI","C_MULTISEGMENT","C_EXPORTJAKOPROTISTRANA" from kp_ktg_ucetnispolecnost
where 
    C_DOCDISPLAY = '1' 
and ID_CISKATSPOL NOT in (5, 10, 12, 15)  
and DT_DATUMARCHIVACE is null
;


PROMPT Completed VW_EXT_UCETNISPOLECNOST_PUBLIC.sql
PROMPT


-- ============================================================================
-- Deploy: VW_EXT_VYJIMKYPROTISTRANY.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_EXT_VYJIMKYPROTISTRANY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_EXT_VYJIMKYPROTISTRANY
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_EXT_VYJIMKYPROTISTRANY" ("ID", "ID_DATABAZE", "DB_LINK", "S_UCETMASKA", "S_PROTISTRANA", "NL_POZICEOD", "S_ICO", "S_NAZEV", "ID_KTG_SPOLECNOST") AS 
  SELECT v.id,
    db.s_dblink,
    v.id_databaze,
    v.s_ucetMaska,
    v.s_protistrana,
    v.nl_poziceOd,
    p.s_ico,
    p.s_nazev,
    p.id_spolecnost
  FROM db_dsa.kp_ktg_ProtistranaVyjimky v,
    db_dsa.KP_rel_Protistrana p
    ,kp_cis_databaze db
  WHERE v.id_databaze =p.id_databaze(+)
  AND v.s_protistrana =p.doid(+)
  AND p.id_databaze in (  320,325)
  and db.id = p.id_databaze
  order by 3

;


PROMPT Completed VW_EXT_VYJIMKYPROTISTRANY.sql
PROMPT


-- ============================================================================
-- Deploy: VW_FINANCNIINVEMISE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_FINANCNIINVEMISE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_FINANCNIINVEMISE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_FINANCNIINVEMISE" ("ID", "ID_KTGFINANCNIINVESTICE", "ID_PARENT", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "NL_POCETKUSU", "NL_NOMINAL", "ND_ZAKLADNIJMENI", "DT_ZMENA", "S_UZIVATEL", "C_INVESTICE", "POCETMU", "C_NENULOVY") AS 
  select ID, 
       ID_KTGFINANCNIINVESTICE, 
	   ID_PARENT, 
	   DT_PLATNOSTOD, 
	   DT_PLATNOSTDO, 
	   NL_POCETKUSU, 
	   NL_NOMINAL, 
	   ND_ZAKLADNIJMENI, 
	   DT_ZMENA, 
	   S_UZIVATEL, 
	   C_INVESTICE, 
	   (select count(*) from kp_dat_majetkovaUcast mu where mu.id_ktgFinInvesticeEmise = emi.id) pocetMU, 
	   c_nenulovy 
from KP_ktg_FinInvesticeEmise emi

;


PROMPT Completed VW_FINANCNIINVEMISE.sql
PROMPT


-- ============================================================================
-- Deploy: VW_FINANCNIINVEMISEHISTOR.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_FINANCNIINVEMISEHISTOR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_FINANCNIINVEMISEHISTOR
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_FINANCNIINVEMISEHISTOR" ("ID", "ID_KTGFINANCNIINVESTICE", "ID_PARENT", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "NL_POCETKUSU", "NL_NOMINAL", "ND_ZAKLADNIJMENI", "DT_ZMENA", "S_UZIVATEL", "C_INVESTICE") AS 
  select ID,ID_KTGFINANCNIINVESTICE,ID_PARENT,DT_PLATNOSTOD,DT_PLATNOSTDO,NL_POCETKUSU,NL_NOMINAL,ND_ZAKLADNIJMENI,DT_ZMENA,S_UZIVATEL,C_INVESTICE 
from KP_ktg_FinInvesticeEmise

;


PROMPT Completed VW_FINANCNIINVEMISEHISTOR.sql
PROMPT


-- ============================================================================
-- Deploy: VW_FINANCNIINVESTICE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_FINANCNIINVESTICE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_FINANCNIINVESTICE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_FINANCNIINVESTICE" ("ID", "ID_KTGSPOLECNOST", "S_MENA", "DT_ZMENA", "S_UZIVATEL", "S_ICO", "S_NAZEV", "S_ISIN") AS 
  select 
	fi.id, fi.id_ktgSpolecnost, fi.s_mena, fi.dt_zmena, fi.s_uzivatel, s.s_ico, s.s_nazev, fi.s_isin 
from 
	KP_ktg_FinancniInvestice fi, 
	KP_ktg_spolecnost s 
where 
	fi.id_ktgSpolecnost = s.id

;


PROMPT Completed VW_FINANCNIINVESTICE.sql
PROMPT


-- ============================================================================
-- Deploy: VW_FRONTA_DENNI_DOKLADY_MANUAL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_FRONTA_DENNI_DOKLADY_MANUAL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_FRONTA_DENNI_DOKLADY_MANUAL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_FRONTA_DENNI_DOKLADY_MANUAL" ("ID", "S_NAZEV", "S_DBLINK", "DT_DATUMARCHIVACE") AS 
  select id , s_nazev, nus.s_dblink ,nus.dt_datumarchivace 
from KP_KTG_UCETNISPOLECNOST nus where nus.ID   in 
(
SELECT distinct us.id--, us.S_NAZEV
                             FROM db_jt.kp_rel_subkonsolidaceclen c,
                                  db_jt.kp_ktg_subkonsolidace s,
                                  db_jt.kp_ktg_ucetniSpolecnost us
                            WHERE     
                            us.id = c.id_ktgUcetniSpolecnost                            
                              		    AND s.id_ktgUcetniSpolecnost =   c.id_ktgsubkonsolidace
                                      AND c.c_clen = '1'
                                      AND c.ID_CISSUBTYPCLENSTVI <> 3       -- okerm equity
                                      AND s.id_ktgUcetniSkupina = 1         -- RKC
                                      and c.ID_KTGSUBKONSOLIDACE = 10344 
                                      AND (   sysdate >= C.DT_ClenstviOD
                                                      OR C.DT_ClenstviOD IS NULL)
                                      AND (   sysdate <= C.DT_ClenstviDO                                               OR C.DT_ClenstviDO IS NULL                                              OR C.DT_ClenstviDO = '31.12.1990') ---esc                                               
                                      and us.c_extsystem != 'K'                                                       
                                  and us.ID_CISSUBJECT !=200
                                  and us.DT_DATUMARCHIVACE is null                                     
                            and us.id NOT in (1,5000) --- bez banky , pobocky , ,6850 atl od 08.11.2019
                            and us.S_DBLINK not in ('Manual' , 'sub' ) -- bez manualnych 

/*SELECT udf.id    from DB_JT.KP_KTG_UCETNISPOLECNOST udf     
                    WHERE   --udf.C_RKC = '1' 
                    udf.ID in
                        (
                          -- vybera clenov RKC   ( bez ohladu na doklad )
                          SELECT --us.*
                          DISTINCT us.ID --,us.s_nazev, s_ico,c.ID_CISSUBTYPCLENSTVI
                             FROM db_jt.kp_rel_subkonsolidaceclen c,
                                  db_jt.kp_ktg_subkonsolidace s,
                                  db_jt.kp_ktg_ucetniSpolecnost us

                            WHERE     
                            us.id = c.id_ktgUcetniSpolecnost
                                  AND s.id_ktgUcetniSpolecnost = c.id_ktgsubkonsolidace
                                  AND c.c_clen = '1'
                                  --AND c.ID_CISSUBTYPCLENSTVI <> 3                              -- typ = 1/plne , 2*pomerovo,   3/equity
                                  AND s.id_ktgUcetniSkupina = 1
                                  AND SYSDATE between C.DT_ClenstviOD and C.DT_ClenstviDO 
                                  and us.ID_CISSUBJECT !=200
                                  and us.DT_DATUMARCHIVACE is null                                     
                            )
*/----                    
/*UNION 
--INTERSECT 
--MINUS
SELECT udf.id    from DB_JT.KP_KTG_UCETNISPOLECNOST udf           where              
                    udf.ID in (
                              select distinct ID_KTGUCETNISPOLECNOST from DB_JT.KP_KTG_ODBOR where
                                    id in (select distinct ID_KTGODBOR from DB_JT.KP_DAT_BUDGET where sysdate between DT_PLATNOSTOD and DT_PLATNOSTDO 
                                            AND ID_KTGODBOR IS NOT NULL
                                            )                              
                              )
*/
) 
--esc aby sa plnili transakcie do budgetu i z aATL
--and   nus.c_automatickegenerovani = '1'
;


PROMPT Completed VW_FRONTA_DENNI_DOKLADY_MANUAL.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_IMPORT_POZICE_UM_APEX.sql: 'utf-8' codec can't decode byte 0xfd in position 536: invalid start byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_IMPORT_UA_RKC_UNIF_ATRIBUT.sql: 'utf-8' codec can't decode byte 0xe8 in position 773: invalid continuation byte


-- ============================================================================
-- Deploy: VW_ISIT_CIS_APLIKACE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_ISIT_CIS_APLIKACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_ISIT_CIS_APLIKACE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_ISIT_CIS_APLIKACE" ("ID", "S_NAZEV", "S_POPIS", "DT_PLATNOSTOD", "DT_PLATNOSTDO") AS 
  select "ID","S_NAZEV","S_POPIS","DT_PLATNOSTOD","DT_PLATNOSTDO" from KP_CIS_ISIT_APLIKACE
;


PROMPT Completed VW_ISIT_CIS_APLIKACE.sql
PROMPT


-- ============================================================================
-- Deploy: VW_ISIT_ODBOR_SPOLECNOST.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_ISIT_ODBOR_SPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_ISIT_ODBOR_SPOLECNOST
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_ISIT_ODBOR_SPOLECNOST" ("ID", "S_NAZEV", "ID_KTGUCETNISPOLECNOST", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "S_SPOLECNOST") AS 
  SELECT DISTINCT o.id,
    o.s_nazev,
    o.id_ktgucetnispolecnost,
    o.dt_platnostod,
    o.dt_platnostdo,
    us.s_nazev S_SPOLECNOST
  FROM  db_jt.kp_ktg_odbor o
      , DB_JT.kp_ktg_ucetnispolecnost us
  WHERE 
  o.id_ktgucetnispolecnost = us.id (+)
;


PROMPT Completed VW_ISIT_ODBOR_SPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: VW_ISIT_PROJEKT.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_ISIT_PROJEKT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_ISIT_PROJEKT
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_ISIT_PROJEKT" ("ID", "S_NAZEV", "STATUS") AS 
  select distinct id, s_nazev , decode(id_status,3,'schvalen',5,'ukoncen') STATUS
from db_jt.kp_ktg_projekt
where id_status in( 3,5)
and sysdate between dt_platnostod and dt_platnostdo
;


PROMPT Completed VW_ISIT_PROJEKT.sql
PROMPT


-- ============================================================================
-- Deploy: VW_ISIT_UCETNI_SPOLECNOST.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_ISIT_UCETNI_SPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_ISIT_UCETNI_SPOLECNOST
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_ISIT_UCETNI_SPOLECNOST" ("ID", "S_NAZEV", "S_MENA", "S_ICO") AS 
  select ID,S_NAZEV, S_MENA, S_ICO from kp_ktg_ucetnispolecnost
where id in ( 1, 5000, 6760, 6973, 6001 ,6850)
;


PROMPT Completed VW_ISIT_UCETNI_SPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: VW_JTB_MUSTEK.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_JTB_MUSTEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_JTB_MUSTEK
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_JTB_MUSTEK" ("S_UCET", "DT_PLATNOSTOD", "DT_PLATNOSTDO") AS 
  select uu.s_ucetprimsystem s_ucet, uu.dt_platnostod, uu.dt_platnostdo
from kp_def_ucet2ucetunif uu where uu.id_cissubject = 80 and
         substr ( ( replace ( NVL ( s_evidovatProtistranu, '----' ), '0', '-' ) || '----' ), 1, 4 ) = '----'
group by uu.s_ucetprimsystem, uu.dt_platnostod, uu.dt_platnostdo

;


PROMPT Completed VW_JTB_MUSTEK.sql
PROMPT


-- ============================================================================
-- Deploy: VW_JT_SPOLECNOST.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_JT_SPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_JT_SPOLECNOST
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_JT_SPOLECNOST" ("ID", "S_NAZEV", "S_SOUBORPREDPONA", "ID_CISSUBJECT", "S_MENA", "LASTCLOSEDATE", "C_AUTOMATICKEGENEROVANI", "C_RKC", "SPIN_ID", "TOPAS_ID", "QUEST_ID", "S_DBLINK", "S_ZKRATKA", "ID_KATEGORIE", "ID_KTGPROJEKT", "ID_KTGODBOR", "C_ONLINE", "ID_CISKATSPOL", "ID_ZODPOVEDNAUCETNI", "ID_ODPOVEDNAOSOBA", "ID_ADMINISTRATOR", "ID_TOPMNG", "STD_UOSTART", "STD_UOKONEC", "ID_MNGSEGMENT", "ID_MNGSEGMENTBOSS", "C_POCITEJMUPOZICI", "C_MULTISEGMENT") AS 
  SELECT ID, s_nazev, s_souborpredpona, id_cissubject, s_mena, 
          dt_lastclosedate lastclosedate, c_automatickegenerovani, c_rkc, 
          spin_id, topas_id, quest_id, s_dblink, s_zkratka, id_kategorie, 
          id_ktgprojekt, id_ktgodbor, c_online, id_ciskatspol, 
          s.id_zodpovednaucetni, s.id_odpovednaosoba, s.id_administrator, 
          s.id_topmng, 
          DECODE (TO_CHAR (s.dt_ucetniobdobistart, 'dd.mm.'), 
                  '01.01.', '1', 
                  '0' 
                 ) std_uostart, 
          DECODE (TO_CHAR (s.dt_ucetniobdobikonec, 'dd.mm.'), 
                  '31.12.', '1', 
                  '0' 
                 ) std_uokonec, 
          s.id_mngsegment, s.id_mngsegmentboss, s.c_pocitejmupozici, 
		  s.C_MULTISEGMENT 
     FROM db_jt.kp_ktg_ucetnispolecnost s

;


PROMPT Completed VW_JT_SPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: VW_JT_SPOLECNOSTPRAVIDLAIFRS.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_JT_SPOLECNOSTPRAVIDLAIFRS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_JT_SPOLECNOSTPRAVIDLAIFRS
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_JT_SPOLECNOSTPRAVIDLAIFRS" ("ID", "ID_PARENT", "ID_PORADI", "ID_CISIFRSTYPPRAVIDLO", "ID_KTGUCETNISPOLECNOST", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "S_POZNAMKA", "C_VALIDNI", "S_ERRORHLASKA", "DT_ZMENADEFINICEDETAIL", "DT_KONTROLA", "S_VALIDACEUCET", "ND_VALIDACEHODNOTA", "DT_ZMENA", "S_UZIVATEL", "S_POPIS", "S_ZKRATKA") AS 
  select 
      p.id, p.id_parent, p.id_poradi, p.id_cisIfrsTypPravidlo, p.id_ktgUcetniSpolecnost, 
      p.dt_platnostOd, p.dt_platnostDo, p.s_poznamka, 
      p.c_validni, p.s_errorHlaska, p.dt_zmenaDefiniceDetail, p.dt_kontrola, 
      p.s_validaceUcet, p.nd_validaceHodnota, p.dt_zmena, p.s_uzivatel, 
      t.s_popis, t.s_zkratka 
from 
      KP_ktg_IFRSPravidlo p, 
      KP_cis_IFRSTypPravidlo t 
where 
      p.id_cisIfrsTypPravidlo = t.id

;


PROMPT Completed VW_JT_SPOLECNOSTPRAVIDLAIFRS.sql
PROMPT


-- ============================================================================
-- Deploy: VW_JT_SPOLECNOSTPRAVIFRSDETAIL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_JT_SPOLECNOSTPRAVIFRSDETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_JT_SPOLECNOSTPRAVIFRSDETAIL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_JT_SPOLECNOSTPRAVIFRSDETAIL" ("ID", "ID_PORADI", "ID_PORADIPODMINKA", "ID_KTGIFRSPRAVIDLO", "ID_CISIFRSPRAVDETAILTYP", "S_POZNAMKA", "S_UCETMD", "S_UCETD", "S_MENA", "ND_CASTKA", "ND_CASTKALOCAL", "S_UCETZBYTEK", "S_PODMINKA", "DT_ZMENA", "S_UZIVATEL", "S_POPIS", "S_ZKRATKA", "ID_KTGUCETNISPOLECNOST", "ID_KTGSPOLECNOST", "ID_PORADIKOREKCEFIX", "ID_KTGPROJEKT", "ID_KTGODBOR", "ID_UCETMD_UNIF", "ID_UCETD_UNIF", "S_UUMD", "S_UUD") AS 
  SELECT p.ID, p.id_poradi, p.id_poradipodminka, p.id_ktgifrspravidlo, 
          p.id_cisifrspravdetailtyp, p.s_poznamka, p.s_ucetmd, p.s_ucetd, 
          p.s_mena, p.nd_castka, p.nd_castkalocal, p.s_ucetzbytek, 
          p.s_podminka, p.dt_zmena, p.s_uzivatel, t.s_popis, t.s_zkratka, 
          p.id_ktgucetnispolecnost, p.id_ktgspolecnost, p.id_poradikorekcefix, 
          p.id_ktgprojekt, p.id_ktgodbor, p.ID_UCETMD_UNIF, p.ID_UCETD_UNIF, 
		  (select uu.S_UCET from kp_cis_ucetUnif uu where uu.ID = p.ID_UCETMD_UNIF) s_uuMd, 
		  (select uu.S_UCET from kp_cis_ucetUnif uu where uu.ID = p.ID_UCETD_UNIF) s_uuD 
     FROM kp_ktg_ifrspravidlodetail p, kp_cis_ifrstyppravidlodetail t 
    WHERE p.id_cisifrspravdetailtyp = t.ID

;


PROMPT Completed VW_JT_SPOLECNOSTPRAVIFRSDETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: VW_JT_SPOLECNOSTPRAVIFRSHISTOR.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_JT_SPOLECNOSTPRAVIFRSHISTOR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_JT_SPOLECNOSTPRAVIFRSHISTOR
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_JT_SPOLECNOSTPRAVIFRSHISTOR" ("ID", "ID_PARENT", "ID_PORADI", "ID_CISIFRSTYPPRAVIDLO", "ID_KTGUCETNISPOLECNOST", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "S_POZNAMKA", "C_VALIDNI", "S_ERRORHLASKA", "DT_ZMENADEFINICEDETAIL", "DT_KONTROLA", "S_VALIDACEUCET", "ND_VALIDACEHODNOTA", "DT_ZMENA", "S_UZIVATEL", "S_POPIS", "S_ZKRATKA") AS 
  select
	p.id, p.id_parent, p.id_poradi, p.id_cisIfrsTypPravidlo, p.id_ktgUcetniSpolecnost,
	p.dt_platnostOd, p.dt_platnostDo, p.s_poznamka,
	p.c_validni, p.s_errorHlaska, p.dt_zmenaDefiniceDetail, p.dt_kontrola,
	p.s_validaceUcet, p.nd_validaceHodnota, p.dt_zmena, p.s_uzivatel,
	t.s_popis, t.s_zkratka
from KP_ktg_IFRSPravidlo p, KP_cis_IFRSTypPravidlo t
where p.id_cisIfrsTypPravidlo = t.id

;


PROMPT Completed VW_JT_SPOLECNOSTPRAVIFRSHISTOR.sql
PROMPT


-- ============================================================================
-- Deploy: VW_JT_SPOLECNOSTUSERPRAVO.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_JT_SPOLECNOSTUSERPRAVO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_JT_SPOLECNOSTUSERPRAVO
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_JT_SPOLECNOSTUSERPRAVO" ("ID", "S_NAZEV", "S_SOUBORPREDPONA", "ID_CISSUBJECT", "S_MENA", "LASTCLOSEDATE", "C_AUTOMATICKEGENEROVANI", "C_RKC", "SPIN_ID", "TOPAS_ID", "QUEST_ID", "S_DBLINK", "S_ZKRATKA", "ID_KATEGORIE", "ID_KTGCISSPOLECNOSTPRAVO", "S_USERID", "ID_KTGPROJEKT", "ID_KTGODBOR", "C_ONLINE", "ID_CISKATSPOL", "ZODPOVEDNAUCETNI", "ODPOVEDNAOSOBA", "ADMINISTRATOR", "TOPMNG", "ID_MNGSEGMENT", "STD_UOSTART", "STD_UOKONEC", "MNGSEGMENTBOSS", "C_POCITEJMUPOZICI", "C_MULTISEGMENT") AS 
  SELECT ID, s_nazev, s_souborpredpona, id_cissubject, s_mena, lastclosedate, 
          c_automatickegenerovani, c_rkc, spin_id, topas_id, quest_id, 
          s_dblink, s_zkratka, id_kategorie, p.id_ktgcisspolecnostpravo, 
          p.s_userid, id_ktgprojekt, id_ktgodbor, c_online, id_ciskatspol, 
          (SELECT u.s_userid 
             FROM ktg_appuser u 
            WHERE u.ID = v.id_zodpovednaucetni) zodpovednaucetni, 
          (SELECT u.s_userid 
             FROM ktg_appuser u 
            WHERE u.ID = v.id_odpovednaosoba) odpovednaosoba, 
          (SELECT u.s_userid 
             FROM ktg_appuser u 
            WHERE u.ID = v.id_administrator) administrator, 
          (SELECT u.s_userid 
             FROM ktg_appuser u 
            WHERE u.ID = v.id_topmng) topmng, id_mngsegment, std_uostart, 
          std_uokonec, (SELECT u.s_userid 
                          FROM ktg_appuser u 
                         WHERE u.ID = v.id_mngsegmentboss) mngsegmentboss, 
          c_pocitejmupozici, C_MULTISEGMENT 
     FROM vw_jt_spolecnost v, kp_rel_appuser_spolecnostpravo p 
    WHERE v.ID = p.id_ktgucetnispolecnost

;


PROMPT Completed VW_JT_SPOLECNOSTUSERPRAVO.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KIS_USER_FULL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KIS_USER_FULL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KIS_USER_FULL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KIS_USER_FULL" ("ID", "S_USERID", "S_USERNAME", "S_KRESTNI", "S_PRIJMENI", "S_EMAIL", "C_ARCHIVNI", "C_NADRIZENAUCETNI", "S_POZNAMKA", "DWH_EMAIL", "EMAIL_DIFF", "INTRANET_STAV", "DWH_NAZEV_SPOL") AS 
  WITH 
  dwh_email as ( SELECT w.login_kod,
                        w.intranet_stav,
                        LISTAGG(w.email, ', ') WITHIN GROUP (ORDER BY email DESC) email
                   FROM ( SELECT DISTINCT TRIM(login_kod) as login_kod,
                                          intranet_stav,
                                          LOWER(email) as email 
                            FROM v_dwh14oo_org_chart
                           WHERE login_kod IS NOT NULL and login_kod != '-') w
                  GROUP BY w.login_kod, w.intranet_stav ),

  dwh_spol as ( SELECT w.login_kod,
                       LISTAGG(w.nazovspol, ', ') WITHIN GROUP (ORDER BY nazovspol DESC) nazovspol
                  FROM ( SELECT DISTINCT TRIM(login_kod) as login_kod,
                                         nazovspol
                           FROM v_dwh14oo_org_chart
                          WHERE login_kod IS NOT NULL and login_kod != '-') w
                 GROUP BY w.login_kod )

SELECT 
       t.id,
       t.s_userid as S_USERID,
       t.s_username, t.s_krestni, t.s_prijmeni, LOWER(t.s_email) s_email, t.c_archivni, t.c_nadrizenaucetni, t.s_poznamka,
       --t.s_prijmeni || ' ' || t.s_krestni as USER_NAME,
       --LOWER(t.s_email) as KIS_EMAIL,
       dw.email as DWH_EMAIL,
       CASE WHEN t.s_email IS NOT NULL AND dw.email IS NOT NULL 
              THEN CASE WHEN LOWER(t.s_email) = dw.email
                          THEN 'OK'
                          ELSE 'ROZDIL'
                   END
            ELSE 'NULL' 
       END as email_diff,
       dw.intranet_stav,
       ds.nazovspol as DWH_nazev_spol
       --t.s_poznamka as KIS_poznamka
       
  FROM ktg_appuser t
  LEFT JOIN dwh_email dw ON t.s_userid = dw.LOGIN_KOD
  LEFT JOIN dwh_spol ds ON t.s_userid = ds.LOGIN_KOD
 WHERE t.c_archivni = 0  -- archivni neresit
   AND t.s_userid NOT IN ('JT8300044', 'JT8300116', 'JT8300118', 'JT8300227', 'JT8300231', 'JT8300519', -- GARFIN
                        'JT8300131',   -- Vrbova
                        'JT8300403',   -- Macek
                        'EX8100170',   -- FinAUDIT
                        'test_migrace09', 'test_migrace04', 'KIS000002', 'KIS000001' ) --technicke
   AND t.id NOT IN (-1, 81) -- admin
;


PROMPT Completed VW_KIS_USER_FULL.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLAD.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLAD
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLAD" ("NL_RADEK", "S_MENA", "ND_CASTKALOCAL", "ND_CASTKAMENA", "ND_OPRAVNACASTKALOCAL", "ND_OPRAVNACASTKAMENA", "ID_DOKLAD", "S_POPIS", "S_LIST", "S_RADEKTEXT", "NL_PORADILIST", "NL_ERROR", "NL_WARNING", "KOEF", "S_LOCALE") AS 
  select 
	nl_radek, s_mena, 
	sum (nd_castkaLocal)*f_getSignBilanceList(nl_poradiList) nd_castkaLocal, 
	sum (nd_castkaMena)*f_getSignBilanceList(nl_poradiList) nd_castkaMena, 
	sum (nd_opravnaCastkaLocal)*f_getSignBilanceList(nl_poradiList) nd_opravnaCastkaLocal, 
	sum (nd_opravnaCastkaMena)*f_getSignBilanceList(nl_poradiList) nd_opravnaCastkaMena, 
	id_doklad, s_popis, 
	s_list, s_radekText, nl_poradiList, nl_error, nl_warning, f_getSignBilanceList(nl_poradiList), s_locale 
from ( 
select 
	  dp.nl_radek, dp.nd_castkaLocal, 
	  dp.nd_castkaMena nd_castkaMena, 
	  0 nd_opravnaCastkaLocal, 0 nd_opravnaCastkaMena, 
	  dp.s_mena, kd.id  id_doklad, 
	  kd.s_popis s_popis, lt.s_popis s_list, rt.s_popis s_radekText, 
	  dp.nl_poradiList nl_poradiList, kd.nl_error, kd.nl_warning, rt.s_locale 
from 
    KP_dat_DokladPolozka dp, 
    KP_dat_Doklad kd, 
    KP_cis_List lt, 
    KP_cis_RadekTextLang rt 
where 
	dp.id_doklad = kd.id and 
	dp.id_cisList = lt.id and 
	dp.id_cisRadekTyp = rt.id and 
	dp.nl_sloupec = 1 and 
	( ( nd_castkaMena != 0 ) or ( nd_castkaLocal != 0 ) ) 
union all 
select 
	  dp.nl_radek, 0, 0, 
	  dp.nd_castkaLocal*f_getSignBilanceList(nl_poradiList) nd_opravnaCastkaLocal, 
	  dp.nd_castkaMena*f_getSignBilanceList(nl_poradiList) nd_opravnaCastkaMena, 
	  dp.s_mena, kd.id  id_doklad, 
	  kd.s_popis s_popis, lt.s_popis s_list, rt.s_popis s_radekText, 
	  dp.nl_poradiList nl_poradiList, kd.nl_error, kd.nl_warning, rt.s_locale 
from 
    KP_dat_DokladPolozka dp, 
    KP_dat_Doklad kd, 
    KP_cis_List lt, 
    KP_cis_RadekTextLang rt 
where 
	dp.id_doklad = kd.id and 
	dp.id_cisList = lt.id and 
	dp.id_cisRadekTyp = rt.id and 
	dp.nl_sloupec = 3 and 
	( ( nd_castkaMena != 0 ) or ( nd_castkaLocal != 0 ) ) 
) group by 
	nl_radek, s_mena, id_doklad, s_popis, 
	s_list, s_radekText, nl_poradiList, nl_error, nl_warning, s_locale

;


PROMPT Completed VW_KP_DOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADAUTO_CHYBAMUSTKU.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADAUTO_CHYBAMUSTKU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADAUTO_CHYBAMUSTKU
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADAUTO_CHYBAMUSTKU" ("ID_KTGUCETNISPOLECNOST", "S_NAZEV", "DT_DATUM", "ND_CASTKAMENA", "S_MENA", "ND_CASTKALOCAL", "DATUM", "S_UCET", "S_POPIS", "ID_DOKLAD", "ID_INTERNI", "ID_CISDOKLAD") AS 
  SELECT   s.ID id_ktgucetnispolecnost, s.s_nazev, d.dt_datum, 
            zd.nd_castkamena, zd.s_mena, zd.nd_castkalocal, zd.datum, 
            zd.s_ucet, zd.s_popis, zd.id_doklad, zd.ID id_interni, 
            kd.id_cisdoklad 
       FROM kp_dat_doklad d, 
            kp_rel_doklad_zdrojdat rel, 
            kp_dat_dokladzdrojdat zd, 
            kp_ktg_ucetnispolecnost s, 
            kp_ktg_doklad kd, 
            kp_dat_dokladnezarazenetran nt 
      WHERE d.dt_datum = (SELECT par.dt_ng_datum_do 
                            FROM kp_parametry par) 
        AND d.dt_vytvoreno > SYSDATE - 1 
        AND d.s_uzivatel = 'automat' 
        AND (d.c_basedoklad = '1' OR d.nl_krok BETWEEN 10 AND 17) 
        AND kd.ID = d.id_ktgdoklad 
        AND rel.id_doklad = d.ID 
        AND zd.ID = rel.id_dokladzdrojdat 
        AND s.ID = d.id_ktgucetnispolecnost 
        AND d.ID = nt.id_doklad 
        AND zd.ID = nt.id_zdrojdat 
		  and nt.c_ignorovat = '0' 
   ORDER BY s.s_nazev, zd.s_ucet, zd.datum

;


PROMPT Completed VW_KP_DOKLADAUTO_CHYBAMUSTKU.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADAUTO_PODNIKATEL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADAUTO_PODNIKATEL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADAUTO_PODNIKATEL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADAUTO_PODNIKATEL" ("ID_CISSUBJECT", "SUBJECT", "S_UCET") AS 
  SELECT   tab.id_cissubject, (SELECT cis.s_popis 
                                  FROM kp_cis_subject cis 
                                 WHERE cis.ID = tab.id_cissubject) subject, 
            tab.s_ucet 
       FROM ( SELECT DISTINCT zd.s_ucet, kd.id_cissubject 
                        FROM kp_dat_doklad d, 
                             kp_ktg_doklad kd, 
                             kp_rel_doklad_zdrojdat rel, 
                             kp_dat_dokladzdrojdat zd 
                       WHERE d.dt_datum = (SELECT par.dt_ng_datum_do 
                                             FROM kp_parametry par) 
                         AND d.dt_vytvoreno > SYSDATE - 1 
                         AND d.s_uzivatel = 'automat' 
                         AND d.id_ktgdoklad = kd.ID 
                         AND kd.id_cisdoklad = 1 
                         AND d.c_baseDoklad = '1'--d.nl_krok = 1 
                         AND rel.id_doklad = d.ID 
                         AND zd.ID = rel.id_dokladzdrojdat 
						 ) tab 
      WHERE NOT EXISTS ( 
               SELECT NULL 
                 FROM kp_def_listbunkaucet lbu, 
                      kp_def_doklad dd, 
                      kp_ktg_doklad kdin 
                WHERE dd.id_cisdoklad = 3 
                  AND dd.id_cislist = lbu.id_cislist 
                  AND lbu.id_ktgdoklad = kdin.ID 
                  AND kdin.id_cissubject = tab.id_cissubject 
                  AND tab.s_ucet LIKE lbu.s_ucet || '%') 
   ORDER BY tab.id_cissubject, tab.s_ucet

;


PROMPT Completed VW_KP_DOKLADAUTO_PODNIKATEL.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADAUTO_UNIFUCTY.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADAUTO_UNIFUCTY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADAUTO_UNIFUCTY
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADAUTO_UNIFUCTY" ("ID_KTGUCETNISPOLECNOST", "S_NAZEV", "DT_DATUM", "S_UCET", "ID_DOKLAD") AS 
  SELECT DISTINCT s.ID id_ktgucetnispolecnost, s.s_nazev, d.dt_datum, 
                   zd.s_ucetOriginal, zd.id_doklad 
              FROM kp_ktg_doklad kd, 
                   kp_dat_doklad d, 
                   kp_rel_doklad_zdrojdat rel, 
                   kp_dat_dokladzdrojdat zd, 
                   kp_ktg_ucetnispolecnost s 
             WHERE d.dt_datum = (SELECT par.dt_ng_datum_do 
                                   FROM kp_parametry par) 
               AND d.dt_vytvoreno > SYSDATE - 1 
               AND d.s_uzivatel = 'automat' 
               AND d.c_basedoklad = '1'                        --d.nl_krok = 1 
               AND d.id_ktgdoklad = kd.ID 
               AND kd.id_cisdoklad = 1 
               AND rel.id_doklad = d.ID 
               AND zd.ID = rel.id_dokladzdrojdat 
--               AND zd.s_ucetunif = '???' 
               AND zd.ID_CISUCETUNIF < 1 
			   AND s.ID = d.id_ktgucetnispolecnost 
          ORDER BY s.s_nazev, zd.s_ucetOriginal

;


PROMPT Completed VW_KP_DOKLADAUTO_UNIFUCTY.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADBILANCEODBOR.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADBILANCEODBOR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADBILANCEODBOR
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADBILANCEODBOR" ("LIST", "RADEKTEXT", "ODBOR", "NL_RADEK", "ND_CASTKALOCAL", "ND_CASTKAMENA", "S_MENA", "NL_SLOUPEC", "ID_DOKLAD", "S_LOCALE", "ID_DOKLADPOLOZKA", "ID_KTGODBOR") AS 
  select 
f_getListText( x.id_dokladpolozka, l.s_locale ) list, 
f_getBunkaText ( x.id_dokladpolozka, l.s_locale ) radektext, 
case when x.id_ktgOdbor < 0 then '???' else 
NVL ( ( select o.s_kod || ' - ' || o.S_NAZEV from kp_ktg_odbor o where o.s_kod = x.id_ktgOdbor ), '?' ) 
end odbor, 
( select dp.NL_RADEK from kp_dat_dokladPolozka dp where dp.id = x.id_dokladPolozka ) nl_radek, 
x.nd_castkaLocal, x.nd_castkamena, x.S_MENA, 
( select dp.NL_SLOUPEC from kp_dat_dokladPolozka dp where dp.id = x.id_dokladPolozka ) NL_SLOUPEC, 
x.id_doklad, l.s_locale, x.id_dokladpolozka, x.id_ktgOdbor 
from 
cis_locale l, 
( 
select 
	   rel.id_doklad, 
	   rel.id_dokladpolozka, 
	   zd.S_MENA, 
	   NVL(zd.id_ktgOdbor, -2) id_ktgOdbor, 
       sum( decode (c_strana,'M', 1, -1 ) * zd.nd_castkalocal) nd_castkaLocal, 
	   sum( decode (c_strana,'M', 1, -1 ) * zd.nd_castkamena) nd_castkamena 
from kp_rel_doklad_zdrojdat rel, 
     kp_dat_dokladzdrojdat zd 
where rel.id_dokladzdrojdat = zd.id and 
	  rel.id_dokladPolozka is not null and 
	  rel.id_dokladPolozka != -1 
  and not exists ( select 1 from kp_dat_dokladPolozka dp where dp.id = zd.id_dokladpolozka and (dp.nl_radek = 123 and dp.nl_poradilist = 2) ) 
group by rel.id_doklad, rel.id_dokladpolozka, zd.s_mena, zd.id_ktgodbor 
union all 
select 
	   dp.id_doklad, 
       dp.id, 
	   dp.s_mena, 
	   null, 
	   dp.nd_castkaLocal, 
	   dp.nd_castkaMena 
from KP_dat_DokladPolozka dp 
where 
  dp.nl_poradiList = 2 
  and dp.nl_radek = 123 
  and dp.nl_sloupec = 1 
) x 
where 
( x.nd_castkaLocal != 0 or x.nd_castkaMena != 0 ) 
order by list, nl_radek, odbor, s_mena, nl_sloupec

;


PROMPT Completed VW_KP_DOKLADBILANCEODBOR.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADBILANCEPOCSTAV.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADBILANCEPOCSTAV.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADBILANCEPOCSTAV
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADBILANCEPOCSTAV" ("ID_DOKLAD", "S_MENA", "ND_CASTKALOCAL", "ND_CASTKAMENA", "ND_OPRAVNACASTKALOCAL", "ND_OPRAVNACASTKAMENA", "NL_PORADILIST", "NL_RADEK", "S_LIST", "S_RADEKTEXT", "KOEF", "S_LOCALE") AS 
  select 
	bps.id_doklad, bps.s_mena, bps.nd_castkaLocal*f_getSignBilanceList(nl_poradiList), 
	bps.nd_castkaMena*f_getSignBilanceList(nl_poradiList), 
	bps.nd_opravnaCastkaLocal*f_getSignBilanceList(nl_poradiList), 
	bps.nd_opravnaCastkaMena*f_getSignBilanceList(nl_poradiList), 
	bps.nl_poradiList, bps.nl_radek, lt.s_popis s_list, rt.s_popis s_radekText, 
	f_getSignBilanceList(nl_poradiList), s_locale 
from 
	kp_dat_dokladbilancepocstav bps, 
    kp_cis_list lt, 
    kp_cis_radektextLang rt 
where 
	bps.id_cislist = lt.id and 
	bps.id_cisradektyp = rt.id

;


PROMPT Completed VW_KP_DOKLADBILANCEPOCSTAV.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADBILANCEPROJEKT.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADBILANCEPROJEKT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADBILANCEPROJEKT
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADBILANCEPROJEKT" ("LIST", "RADEKTEXT", "PROJEKT", "NL_RADEK", "ND_CASTKALOCAL", "ND_CASTKAMENA", "S_MENA", "NL_SLOUPEC", "ID_DOKLAD", "S_LOCALE", "ID_DOKLADPOLOZKA", "ID_KTGPROJEKT") AS 
  select 
f_getListText( x.id_dokladpolozka, l.s_locale ) list, 
f_getBunkaText ( x.id_dokladpolozka, l.s_locale ) radektext, 
( select p.id || ' - ' || p.S_NAZEV from kp_ktg_projekt p where p.id = x.id_ktgProjekt ) projekt, 
( select dp.NL_RADEK from kp_dat_dokladPolozka dp where dp.id = x.id_dokladPolozka ) nl_radek, 
x.nd_castkaLocal, x.nd_castkamena, x.S_MENA, 
( select dp.NL_SLOUPEC from kp_dat_dokladPolozka dp where dp.id = x.id_dokladPolozka ) NL_SLOUPEC, 
x.id_doklad, l.s_locale, x.id_dokladpolozka, x.id_ktgProjekt 
from 
cis_locale l, 
( 
select 
	   rel.id_doklad, 
	   rel.id_dokladpolozka, 
	   zd.S_MENA, 
	   zd.id_ktgprojekt, 
       sum( decode (c_strana,'M', 1, -1 ) * zd.nd_castkalocal) nd_castkaLocal, 
	   sum( decode (c_strana,'M', 1, -1 ) * zd.nd_castkamena) nd_castkamena 
from kp_rel_doklad_zdrojdat rel, 
     kp_dat_dokladzdrojdat zd 
where rel.id_dokladzdrojdat = zd.id and 
	  rel.id_dokladPolozka is not null and 
	  rel.id_dokladPolozka != -1 
  and not exists ( select 1 from kp_dat_dokladPolozka dp where dp.id = zd.id_dokladpolozka and (dp.nl_radek = 123 and dp.nl_poradilist = 2) ) 
group by rel.id_doklad, rel.id_dokladpolozka, zd.s_mena, zd.id_ktgprojekt 
union all 
select 
	   dp.id_doklad, 
       dp.id, 
	   dp.s_mena, 
	   null, 
	   dp.nd_castkaLocal, 
	   dp.nd_castkaMena 
from KP_dat_DokladPolozka dp 
where 
  dp.nl_poradiList = 2 
  and dp.nl_radek = 123 
  and dp.nl_sloupec = 1 
) x 
where 
( x.nd_castkaLocal != 0 or x.nd_castkaMena != 0 ) 
order by list, nl_radek, projekt, s_mena, nl_sloupec

;


PROMPT Completed VW_KP_DOKLADBILANCEPROJEKT.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADBILANCEPROTISTRANA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADBILANCEPROTISTRANA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADBILANCEPROTISTRANA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADBILANCEPROTISTRANA" ("LIST", "RADEKTEXT", "PROTISTRANA", "NL_RADEK", "ND_CASTKALOCAL", "ND_CASTKAMENA", "S_MENA", "NL_SLOUPEC", "ID_DOKLAD", "S_LOCALE", "ID_DOKLADPOLOZKA", "ID_KTGSPOLECNOST", "CLENJTFGKONS") AS 
  select 
f_getListText( x.id_dokladpolozka, l.s_locale ) list, 
f_getBunkaText ( x.id_dokladpolozka, l.s_locale ) radektext, 
( select s.s_nazev from kp_ktg_spolecnost s where s.id = x.id_ktgspolecnost ) protistrana, 
( select dp.NL_RADEK from kp_dat_dokladPolozka dp where dp.id = x.id_dokladPolozka ) nl_radek, 
x.nd_castkaLocal, x.nd_castkamena, x.S_MENA, 
( select dp.NL_SLOUPEC from kp_dat_dokladPolozka dp where dp.id = x.id_dokladPolozka ) NL_SLOUPEC, 
x.id_doklad, l.s_locale, x.id_dokladpolozka, x.id_ktgspolecnost 
,to_char(f_jeProtistranaClenSkupiny(x.ID_KTGSPOLECNOST,2,(select DT_DATUM from kp_dat_doklad dok where dok.id = id_doklad))) CLENJTFGKONS 
from 
cis_locale l, 
( 
select 
	   rel.id_doklad, 
	   rel.id_dokladpolozka, 
	   zd.S_MENA, 
	   zd.id_ktgspolecnost, 
       sum( decode (c_strana,'M', 1, -1 ) * zd.nd_castkalocal) nd_castkaLocal, 
	   sum( decode (c_strana,'M', 1, -1 ) * zd.nd_castkamena) nd_castkamena 
from kp_rel_doklad_zdrojdat rel, 
     kp_dat_dokladzdrojdat zd 
where rel.id_dokladzdrojdat = zd.id and 
	  rel.id_dokladPolozka is not null and 
	  rel.id_dokladPolozka != -1 
  and not exists ( select 1 from kp_dat_dokladPolozka dp where dp.id = zd.id_dokladpolozka and (dp.nl_radek = 123 and dp.nl_poradilist = 2) ) 
group by rel.id_doklad, rel.id_dokladpolozka, zd.s_mena, zd.id_ktgSpolecnost 
union all 
select 
	   dp.id_doklad, 
       dp.id, 
	   dp.s_mena, 
	   null, 
	   dp.nd_castkaLocal, 
	   dp.nd_castkaMena 
from KP_dat_DokladPolozka dp 
where 
  dp.nl_poradiList = 2 
  and dp.nl_radek = 123 
  and dp.nl_sloupec = 1 
) x 
where 
( x.nd_castkaLocal != 0 or x.nd_castkaMena != 0 ) 
order by list, nl_radek, protistrana, s_mena, nl_sloupec

;


PROMPT Completed VW_KP_DOKLADBILANCEPROTISTRANA.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_KP_DOKLADDETAIL.sql: 'utf-8' codec can't decode byte 0xed in position 1926: invalid continuation byte


-- ============================================================================
-- Deploy: VW_KP_DOKLADDETAIL_DSLR.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADDETAIL_DSLR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADDETAIL_DSLR
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADDETAIL_DSLR" ("ID", "S_NAZEV", "NL_RADEK", "TEXTRADEK", "S_POPIS", "ND_CASTKAMENA", "S_MENA", "ND_CASTKALOCAL", "S_MENAUCSPOL", "ND_CASTKACZK", "ID_KTGSPOLECNOST", "PROTISTRANA", "DT_DATUM", "ID_KTGUCETNISPOLECNOST", "NL_PORADILIST", "DATUM", "S_LOCALE", "ID_CISSUBJECT", "S_UCET", "ID_KTGPROJEKT", "ID_KTGODBOR", "S_FAKTURA", "TYPTRANSAKCE", "XIDSL") AS 
  SELECT   zd.ID, s.s_nazev, dp.nl_radek,
            --f_getbunkatext (rel.id_dokladpolozka, l.s_locale) textradek,
			f_getUcetUnifPopis( zd.id_cisUcetUnif, l.s_locale) textradek,
            zd.s_popis,
              DECODE (zd.c_strana, 'D', -1, 1)
            * zd.nd_castkamena /*f_getSignBilanceList(dp.nl_poradiList)*/
                                                                nd_castkamena,
            zd.s_mena,
              DECODE (zd.c_strana, 'D', -1, 1)
            * zd.nd_castkalocal /*f_getSignBilanceList(dp.nl_poradiList)*/
                                                               nd_castkalocal,
            s.s_mena,
            CASE
               WHEN (s.s_mena <> 'CZK')
                  THEN   DECODE (zd.c_strana, 'D', -1, 1)
                       * zd.nd_castkalocal /*f_getSignBilanceList(dp.nl_poradiList)*/
                       / f_getquestorkurs (s.s_mena, d.dt_datum)
               ELSE   DECODE (zd.c_strana, 'D', -1, 1)
                    * zd.nd_castkalocal
                                    /*f_getSignBilanceList(dp.nl_poradiList)*/
            END nd_castkaczk,
            zd.id_ktgspolecnost, (SELECT s_nazev
                                    FROM kp_ktg_spolecnost
                                   WHERE ID = zd.id_ktgspolecnost)
                                                                  protistrana,
            d.dt_datum, s.ID id_ktgucetnispolecnost, dp.nl_poradilist,
            zd.datum, l.s_locale, s.id_cissubject, zd.s_ucet,
            zd.id_ktgprojekt, zd.id_ktgodbor, zd.s_faktura,
            /*(select tt.s_kod || ' - ' || tt.S_POPIS
             from kp_def_budgetMustek m,
                 kp_cis_typTransakce tt
            where s.ID_CISSUBJECT = M.ID_CISSUBJECT
              AND zd.S_UCET LIKE M.S_UCET||'%'
              and tt.ID = m.ID_CISTYPTRANSAKCE
              and zd.datum between tt.dt_platnostOd and tt.dt_platnostDo)*/
            f_gettyptransakceucet (s.id_cissubject,
                                   zd.datum,
                                   zd.s_ucet
                                  ) typtransakce,
            zd.xidsl
       FROM kp_dat_doklad d,
            kp_rel_doklad_zdrojdat rel,
            kp_dat_dokladzdrojdat zd,
            kp_ktg_ucetnispolecnost s,
            kp_dat_dokladpolozka dp,
            cis_locale l
      WHERE d.nl_krok IN (1, 2)
        AND d.c_basedoklad = '1'
        AND d.ID = rel.id_doklad
        AND rel.id_dokladzdrojdat = zd.ID
        AND d.id_ktgucetnispolecnost = s.ID
        AND rel.id_dokladpolozka = dp.ID
   ORDER BY s.s_nazev, zd.datum

;


PROMPT Completed VW_KP_DOKLADDETAIL_DSLR.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADDETAIL_DSLRSUM.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADDETAIL_DSLRSUM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADDETAIL_DSLRSUM
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADDETAIL_DSLRSUM" ("S_NAZEV", "NL_RADEK", "TEXTRADEK", "ND_CASTKAMENA", "S_MENA", "ND_CASTKALOCAL", "S_MENAUCSPOL", "ND_CASTKACZK", "ID_KTGSPOLECNOST", "PROTISTRANA", "DT_DATUM", "ID_KTGUCETNISPOLECNOST", "NL_PORADILIST", "S_LOCALE", "S_UCET", "ID_CISSUBJECT", "S_UCETORIGINAL", "S_POPISORIGINAL", "ID_KTGPROJEKT") AS 
  SELECT   s.s_nazev, dp.nl_radek,
            --f_getbunkatext (rel.id_dokladpolozka, l.s_locale) textradek,
			f_getUcetUnifPopis( zd.id_cisUcetUnif, l.s_locale) textradek,
            SUM
               (  DECODE (zd.c_strana, 'D', -1, 1)
                * zd.nd_castkamena /*f_getSignBilanceList(dp.nl_poradiList)*/
               ) nd_castkamena,
            zd.s_mena,
            SUM
               (  DECODE (zd.c_strana, 'D', -1, 1)
                * zd.nd_castkalocal /*f_getSignBilanceList(dp.nl_poradiList)*/
               ) nd_castkalocal,
            s.s_mena,
            SUM
               (CASE
                   WHEN (s.s_mena <> 'CZK')
                      THEN   DECODE (zd.c_strana, 'D', -1, 1)
                           * zd.nd_castkalocal /*f_getSignBilanceList(dp.nl_poradiList)*/
                           / f_getquestorkurs (s.s_mena, d.dt_datum)
                   ELSE   DECODE (zd.c_strana, 'D', -1, 1)
                        * zd.nd_castkalocal
                                    /*f_getSignBilanceList(dp.nl_poradiList)*/
                END
               ) nd_castkaczk,
            spol.ID id_ktgspolecnost, spol.s_nazev protistrana, d.dt_datum,
            s.ID id_ktgucetnispolecnost, dp.nl_poradilist, l.s_locale,
            zd.s_ucet, s.id_cissubject, zd.s_ucetoriginal,
			(SELECT UP.s_popis
               FROM kp_cis_ucetprimarni UP
              WHERE
                UP.s_ucet = zd.s_ucetoriginal
                AND UP.id_cisdatabaze = d.id_cisdatabaze
                AND UP.c_typ = s.c_feis_ucettyp) s_popisoriginal, zd.id_ktgprojekt
       FROM kp_dat_doklad d,
            kp_rel_doklad_zdrojdat rel,
            kp_dat_dokladzdrojdat zd,
            kp_ktg_ucetnispolecnost s,
            kp_dat_dokladpolozka dp,
            kp_ktg_spolecnost spol,
            cis_locale l
      WHERE d.nl_krok IN (1, 2)
        AND d.c_basedoklad = '1'
        AND d.ID = rel.id_doklad
        AND rel.id_dokladzdrojdat = zd.ID
        AND d.id_ktgucetnispolecnost = s.ID
        AND rel.id_dokladpolozka = dp.ID
        AND zd.id_ktgspolecnost = spol.ID(+)
   GROUP BY s.s_nazev,
            dp.nl_radek,
            zd.id_cisUcetUnif,
            zd.s_mena,
            s.s_mena,
            spol.ID,
            spol.s_nazev,
            d.dt_datum,
            s.ID,
            dp.nl_poradilist,
            l.s_locale,
            zd.s_ucet,
            s.id_cissubject, zd.s_ucetoriginal, d.id_cisdatabaze, s.c_feis_ucettyp, zd.id_ktgprojekt

;


PROMPT Completed VW_KP_DOKLADDETAIL_DSLRSUM.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADDETAIL_KOSTKA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADDETAIL_KOSTKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADDETAIL_KOSTKA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADDETAIL_KOSTKA" ("ID", "ID_KTGUCETNISPOLECNOST", "ID_DOKLADPOLOZKA", "TEXTRADEK", "UCET", "S_MENA", "ND_CASTKALOCAL", "ND_CASTKAMENA", "S_POPIS", "ID_DOKLAD", "DATUM", "C_MENOVAPOZICE", "C_UVEROVAPOZICE", "POCATECNISTAV", "S_EVIDOVATPROTISTRANU", "S_LOCALE", "ID_KTGPROJEKT", "ID_KTGODBOR", "ID_KTGSPOLECNOST", "S_PROTISTRANA", "XIDSL", "S_UCETUNIF", "S_UCET", "S_PROJEKT", "S_ODBOR", "S_UCETNISPOLECNOST", "S_POPISUNIFUCET") AS 
  select z.id, 
	( select d.id_ktgUcetniSpolecnost from KP_dat_doklad d where d.id = r.id_doklad  ) id_ktgUcetniSpolecnost, 
	r.id_dokladpolozka, f_getBunkaText ( r.id_dokladpolozka, l.s_locale ) textRadek, 
	z.s_ucet ucet, z.s_mena, 
	decode ( z.c_strana, 'D', -1, 1 )*z.nd_castkalocal nd_castkalocal, decode ( z.c_strana, 'D', -1, 1 )*z.nd_castkamena nd_castkamena, 
	z.s_popis, r.id_doklad, z.datum, 
	z.c_menovaPozice, z.c_uverovaPozice, 
	z.pocatecniStav, z.s_evidovatProtistranu, l.s_locale, z.id_KtgProjekt, z.id_KtgOdbor, 
	z.id_ktgSpolecnost, 
	case 
		when ( z.id_ktgSpolecnost is not null ) then 
			(select s_nazev from KP_ktg_spolecnost where id = z.id_ktgSpolecnost) 
		else 
			'' 
	end s_protistrana, 
	z.xidsl, z.S_UCETUNIF, z.s_ucet, 
	case 
		when ( z.id_KtgProjekt is not null ) then 
			(select s_nazev from KP_ktg_projekt where id = z.id_KtgProjekt) 
		else 
			'' 
	end s_projekt, 
	case 
		when ( z.id_KtgOdbor is not null ) then 
			(select s_nazev from KP_ktg_projekt where id = z.id_KtgOdbor) 
		else 
			'' 
	end s_odbor, 
	s.s_nazev s_ucetniSpolecnost, 
	'' s_popisUnifUcet 
from 
	 KP_dat_DokladZdrojDat z, 
	 KP_rel_Doklad_ZdrojDat r, 
	 KP_dat_doklad d, 
	 KP_ktg_ucetniSpolecnost s, 
	 cis_locale l 
where 
	 z.id = r.id_dokladZdrojDat and 
	 d.id = r.ID_DOKLAD and 
	 s.id = d.id_ktgUcetniSpolecnost

;


PROMPT Completed VW_KP_DOKLADDETAIL_KOSTKA.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADDETAIL_KOSTKA_CZ.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADDETAIL_KOSTKA_CZ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADDETAIL_KOSTKA_CZ
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADDETAIL_KOSTKA_CZ" ("ID", "ID_KTGUCETNISPOLECNOST", "ID_DOKLADPOLOZKA", "TEXTRADEK", "UCET", "S_MENA", "ND_CASTKALOCAL", "ND_CASTKAMENA", "S_POPIS", "ID_DOKLAD", "DATUM", "C_MENOVAPOZICE", "C_UVEROVAPOZICE", "POCATECNISTAV", "S_EVIDOVATPROTISTRANU", "ID_KTGPROJEKT", "ID_KTGODBOR", "ID_KTGSPOLECNOST", "S_PROTISTRANA", "XIDSL", "S_UCETUNIF", "S_UCET", "S_PROJEKT", "S_ODBOR", "S_UCETNISPOLECNOST", "S_POPISUNIFUCET") AS 
  select z.id, 
	( select d.id_ktgUcetniSpolecnost from KP_dat_doklad d where d.id = r.id_doklad  ) id_ktgUcetniSpolecnost, 
	r.id_dokladpolozka, f_getBunkaText ( r.id_dokladpolozka, 'cs_CZ' ) textRadek, 
	z.s_ucet ucet, z.s_mena, 
	decode ( z.c_strana, 'D', -1, 1 )*z.nd_castkalocal nd_castkalocal, decode ( z.c_strana, 'D', -1, 1 )*z.nd_castkamena nd_castkamena, 
	z.s_popis, r.id_doklad, z.datum, 
	z.c_menovaPozice, z.c_uverovaPozice, 
	z.pocatecniStav, z.s_evidovatProtistranu, z.id_KtgProjekt, z.id_KtgOdbor, 
	z.id_ktgSpolecnost, 
	case 
		when ( z.id_ktgSpolecnost is not null ) then 
			(select s_nazev from KP_ktg_spolecnost where id = z.id_ktgSpolecnost) 
		else 
			'' 
	end s_protistrana, 
	z.xidsl, z.S_UCETUNIF, z.s_ucet, 
	case 
		when ( z.id_KtgProjekt is not null ) then 
			(select s_nazev from KP_ktg_projekt where id = z.id_KtgProjekt) 
		else 
			'' 
	end s_projekt, 
	case 
		when ( z.id_KtgOdbor is not null ) then 
			(select s_nazev from KP_ktg_projekt where id = z.id_KtgOdbor) 
		else 
			'' 
	end s_odbor, 
	s.s_nazev s_ucetniSpolecnost, 
	'' s_popisUnifUcet 
from 
	 KP_dat_DokladZdrojDat z, 
	 KP_rel_Doklad_ZdrojDat r, 
	 KP_dat_doklad d, 
	 KP_ktg_ucetniSpolecnost s 
where 
	 z.id = r.id_dokladZdrojDat and 
	 d.id = r.ID_DOKLAD and 
	 s.id = d.id_ktgUcetniSpolecnost

;


PROMPT Completed VW_KP_DOKLADDETAIL_KOSTKA_CZ.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADDETAIL_KOSTKA_EN.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADDETAIL_KOSTKA_EN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADDETAIL_KOSTKA_EN
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADDETAIL_KOSTKA_EN" ("ID", "ID_KTGUCETNISPOLECNOST", "ID_DOKLADPOLOZKA", "TEXTRADEK", "UCET", "S_MENA", "ND_CASTKALOCAL", "ND_CASTKAMENA", "S_POPIS", "ID_DOKLAD", "DATUM", "C_MENOVAPOZICE", "C_UVEROVAPOZICE", "POCATECNISTAV", "S_EVIDOVATPROTISTRANU", "ID_KTGPROJEKT", "ID_KTGODBOR", "ID_KTGSPOLECNOST", "S_PROTISTRANA", "XIDSL", "S_UCETUNIF", "S_UCET", "S_PROJEKT", "S_ODBOR", "S_UCETNISPOLECNOST", "S_POPISUNIFUCET") AS 
  select z.id, 
	( select d.id_ktgUcetniSpolecnost from KP_dat_doklad d where d.id = r.id_doklad  ) id_ktgUcetniSpolecnost, 
	r.id_dokladpolozka, f_getBunkaText ( r.id_dokladpolozka, 'en_US' ) textRadek, 
	z.s_ucet ucet, z.s_mena, 
	decode ( z.c_strana, 'D', -1, 1 )*z.nd_castkalocal nd_castkalocal, decode ( z.c_strana, 'D', -1, 1 )*z.nd_castkamena nd_castkamena, 
	z.s_popis, r.id_doklad, z.datum, 
	z.c_menovaPozice, z.c_uverovaPozice, 
	z.pocatecniStav, z.s_evidovatProtistranu, z.id_KtgProjekt, z.id_KtgOdbor, 
	z.id_ktgSpolecnost, 
	case 
		when ( z.id_ktgSpolecnost is not null ) then 
			(select s_nazev from KP_ktg_spolecnost where id = z.id_ktgSpolecnost) 
		else 
			'' 
	end s_protistrana, 
	z.xidsl, z.S_UCETUNIF, z.s_ucet, 
	case 
		when ( z.id_KtgProjekt is not null ) then 
			(select s_nazev from KP_ktg_projekt where id = z.id_KtgProjekt) 
		else 
			'' 
	end s_projekt, 
	case 
		when ( z.id_KtgOdbor is not null ) then 
			(select s_nazev from KP_ktg_projekt where id = z.id_KtgOdbor) 
		else 
			'' 
	end s_odbor, 
	s.s_nazev s_ucetniSpolecnost, 
	'' s_popisUnifUcet 
from 
	 KP_dat_DokladZdrojDat z, 
	 KP_rel_Doklad_ZdrojDat r, 
	 KP_dat_doklad d, 
	 KP_ktg_ucetniSpolecnost s 
where 
	 z.id = r.id_dokladZdrojDat and 
	 d.id = r.ID_DOKLAD and 
	 s.id = d.id_ktgUcetniSpolecnost

;


PROMPT Completed VW_KP_DOKLADDETAIL_KOSTKA_EN.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADDETAIL_ODBOR.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADDETAIL_ODBOR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADDETAIL_ODBOR
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADDETAIL_ODBOR" ("UCET", "S_MENA", "ND_CASTKALOCAL", "ND_CASTKAMENA", "ID_DOKLAD", "S_UCET", "S_LOCALE", "ID_KTGODBOR", "ID_KTGSPOLECNOST", "S_UNIFSPOL", "TEXTRADEK", "CLENJTFGKONS", "S_UCETUNIF") AS 
  SELECT   ucet, s_mena, SUM (nd_castkalocal), SUM (nd_castkamena),
            id_doklad, s_ucet, s_locale, id_ktgodbor, id_ktgspolecnost,
            s_unifspol, textradek,
            TO_CHAR
               (f_jeprotistranaclenskupiny (id_ktgspolecnost,
                                            2,
                                            (SELECT dt_datum
                                               FROM kp_dat_doklad dok
                                              WHERE dok.ID = id_doklad)
                                           )
               ) clenjtfgkons,
            s_ucetunif
       FROM (SELECT   'ucet: ' || z.s_ucet ucet, z.s_mena,
                      SUM (DECODE (z.c_strana, 'D', -1, 1) * z.nd_castkalocal
                          ) nd_castkalocal,
                      SUM (DECODE (z.c_strana, 'D', -1, 1) * z.nd_castkamena
                          ) nd_castkamena,
                      r.id_doklad, z.c_strana, z.s_ucet s_ucet, l.s_locale,
                      z.id_ktgodbor, z.id_ktgspolecnost,
                      (SELECT s_nazev
                         FROM kp_ktg_spolecnost
                        WHERE ID = z.id_ktgspolecnost) s_unifspol,
                      --f_getbunkatext (r.id_dokladpolozka, l.s_locale) textradek,
					  f_getUcetUnifPopis( z.id_cisUcetUnif, l.s_locale) textradek,
                      z.s_ucetunif
                 FROM kp_dat_dokladzdrojdat z,
                      kp_rel_doklad_zdrojdat r,
                      cis_locale l
                WHERE z.ID = r.id_dokladzdrojdat AND z.id_ktgodbor IS NOT NULL
             GROUP BY z.s_ucet,
                      z.s_mena,
                      z.c_strana,
                      r.id_doklad,
                      l.s_locale,
                      z.id_ktgodbor,
                      z.id_ktgspolecnost,
                      r.id_dokladpolozka,
                      z.s_ucetunif,
					  z.id_cisUcetUnif)
   GROUP BY ucet,
            s_ucet,
            s_mena,
            id_doklad,
            s_locale,
            id_ktgodbor,
            id_ktgspolecnost,
            s_unifspol,
            textradek,
            s_ucetunif

;


PROMPT Completed VW_KP_DOKLADDETAIL_ODBOR.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADDETAIL_PROJEKT.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADDETAIL_PROJEKT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADDETAIL_PROJEKT
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADDETAIL_PROJEKT" ("UCET", "S_MENA", "ND_CASTKALOCAL", "ND_CASTKAMENA", "ID_DOKLAD", "S_UCET", "S_LOCALE", "ID_KTGPROJEKT", "ID_KTGSPOLECNOST", "S_UNIFSPOL", "TEXTRADEK", "CLENJTFGKONS", "S_UCETUNIF") AS 
  SELECT   ucet, s_mena, SUM (nd_castkalocal), SUM (nd_castkamena),
            id_doklad, s_ucet, s_locale, id_ktgprojekt, id_ktgspolecnost,
            s_unifspol, textradek,
            TO_CHAR
               (f_jeprotistranaclenskupiny (id_ktgspolecnost,
                                            2,
                                            (SELECT dt_datum
                                               FROM kp_dat_doklad dok
                                              WHERE dok.ID = id_doklad)
                                           )
               ) clenjtfgkons,
            s_ucetunif
       FROM (SELECT   'ucet: ' || z.s_ucet ucet, z.s_mena,
                      SUM (DECODE (z.c_strana, 'D', -1, 1) * z.nd_castkalocal
                          ) nd_castkalocal,
                      SUM (DECODE (z.c_strana, 'D', -1, 1) * z.nd_castkamena
                          ) nd_castkamena,
                      r.id_doklad, z.c_strana, z.s_ucet s_ucet, l.s_locale,
                      z.id_ktgprojekt, z.id_ktgspolecnost,
                      (SELECT s_nazev
                         FROM kp_ktg_spolecnost
                        WHERE ID = z.id_ktgspolecnost) s_unifspol,
                      --f_getbunkatext (r.id_dokladpolozka, l.s_locale) textradek,
					  f_getUcetUnifPopis( z.id_cisUcetUnif, l.s_locale) textradek,
                      z.s_ucetunif
                 FROM kp_dat_dokladzdrojdat z,
                      kp_rel_doklad_zdrojdat r,
                      cis_locale l
                WHERE z.ID = r.id_dokladzdrojdat
                  AND z.id_ktgprojekt IS NOT NULL
             GROUP BY z.s_ucet,
                      z.s_mena,
                      z.c_strana,
                      r.id_doklad,
                      l.s_locale,
                      z.id_ktgprojekt,
                      z.id_ktgspolecnost,
                      r.id_dokladpolozka,
                      z.s_ucetunif,
					  z.id_cisUcetUnif)
   GROUP BY ucet,
            s_ucet,
            s_mena,
            id_doklad,
            s_locale,
            id_ktgprojekt,
            id_ktgspolecnost,
            s_unifspol,
            textradek,
            s_ucetunif

;


PROMPT Completed VW_KP_DOKLADDETAIL_PROJEKT.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADFRONTA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADFRONTA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADFRONTA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADFRONTA" ("ID", "DATUM", "S_STAV", "S_NAZEV", "ADATUM", "AUZIVATEL", "AJENOMPS", "AID1", "AID2", "S_SQLERROR", "L_POKUS", "DT_NEXT_POKUS", "IDSPOLECNOST", "IDSUBKONSOLIDACE", "AIDUZIVATELMUSTEK", "AGUIFLAG", "KROK") AS 
  SELECT f.ID, f.datum, f.s_stav, 
  --s.s_nazev, esc 04.04.2021
  s.s_nazev||'    ('||s.id||')'||' / '||s.s_dblink s_nazev,
  f.adatum, 
          NVL ((SELECT TRIM (   u.s_titulypred 
                             || ' ' 
                             || u.s_krestni 
                             || ' ' 
                             || u.s_prijmeni 
                             || ' ' 
                             || u.s_titulypo 
                             || ' (' 
                             || u.s_userid 
                             || ')' 
                            ) 
                  FROM ktg_appuser u 
                 WHERE 'jazn.com/' || u.s_userid = f.auzivatel), 
               f.auzivatel 
              ) auzivatel, 
          f.ajenomps, f.aid1, f.aid2, f.s_sqlerror, f.l_pokus, 
          f.dt_next_pokus, s.ID idspolecnost, f.aidsubkonsolidace, 
          f.auzivatelmustek, f.aguiflag, 
          DECODE (f.aidkrok, 90, 'MIS', 2, 'IFRS', 'krok='||f.aidkrok) krok 
     FROM kp_dat_dokladfronta f, kp_ktg_ucetnispolecnost s 
    WHERE s.ID = f.aidktgucetnispolecnost
;


PROMPT Completed VW_KP_DOKLADFRONTA.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADMANODBORPROJEKT.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADMANODBORPROJEKT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADMANODBORPROJEKT
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADMANODBORPROJEKT" ("ID_DOKLAD", "S_UCET", "UCET", "S_MENA", "ND_CASTKAMENA", "ND_CASTKALOCAL", "ID_KTGSPOLECNOST", "SPOLECNOST", "ID_KTGPROJEKT", "PROJEKT", "ID_KTGODBOR", "ODBOR", "ID_KTGUCETNISPOLECNOST", "DT_DATUM") AS 
  select rel.id_doklad, 
       zd.s_ucet, 
	   zd.s_ucet||' - '||f_getBunkaText(zd.ID_DOKLADPOLOZKA,'cs_CZ') ucet, 
       zd.s_mena, 
	   sum(decode(zd.c_strana,'D',-1,1) * zd.nd_castkamena) nd_castkamena, 
	   sum(decode(zd.c_strana,'D',-1,1) * zd.nd_castkalocal) nd_castkalocal, 
	   zd.id_ktgspolecnost, 
	   s.S_NAZEV||' ('||zd.id_ktgspolecnost||')' spolecnost, 
	   zd.id_ktgprojekt, 
	   p.ID||' - '||p.S_NAZEV projekt, 
	   zd.id_ktgodbor, 
	   o.S_KOD||' - '||o.S_NAZEV odbor, 
	   d.ID_KTGUCETNISPOLECNOST, 
	   d.dt_datum 
from KP_DAT_DOKLADZDROJDAT zd, 
     KP_REL_DOKLAD_ZDROJDAT rel, 
     KP_DAT_DOKLAD d, 
	 kp_ktg_spolecnost s, 
	 kp_ktg_projekt p, 
	 kp_ktg_odbor o 
where rel.id_doklad = d.id 
  and rel.ID_DOKLADZDROJDAT = zd.id 
  and zd.id_ktgspolecnost = s.id (+) 
  and zd.id_ktgprojekt = p.id (+) 
  and zd.id_ktgodbor = o.S_KOD (+) 
group by rel.id_doklad, zd.s_ucet, zd.s_mena, zd.id_ktgspolecnost, s.s_nazev, 
         zd.id_ktgprojekt, p.ID, p.S_NAZEV, zd.id_ktgodbor, o.S_KOD, o.S_NAZEV, d.ID_KTGUCETNISPOLECNOST, d.dt_datum, 
		 zd.ID_DOKLADPOLOZKA

;


PROMPT Completed VW_KP_DOKLADMANODBORPROJEKT.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADMANODBORPROJEKT2.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADMANODBORPROJEKT2.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADMANODBORPROJEKT2
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADMANODBORPROJEKT2" ("ID_DOKLAD", "S_UCET", "UCET", "S_MENA", "ND_CASTKAMENA", "ND_CASTKALOCAL", "ID_KTGSPOLECNOST", "SPOLECNOST", "ID_KTGUCETNISPOLECNOST", "DT_DATUM") AS 
  select rel.id_doklad, 
       zd.s_ucet, 
	   zd.s_ucet||' - '||f_getBunkaText(zd.ID_DOKLADPOLOZKA,'cs_CZ') ucet, 
       zd.s_mena, 
	   sum(decode(zd.c_strana,'D',-1,1) * zd.nd_castkamena) nd_castkamena, 
	   sum(decode(zd.c_strana,'D',-1,1) * zd.nd_castkalocal) nd_castkalocal, 
	   zd.id_ktgspolecnost, 
	   s.S_NAZEV||' ('||zd.id_ktgspolecnost||')' spolecnost, 
	   d.ID_KTGUCETNISPOLECNOST, 
	   d.dt_datum 
from KP_DAT_DOKLADZDROJDAT zd, 
     KP_REL_DOKLAD_ZDROJDAT rel, 
     KP_DAT_DOKLAD d, 
	 kp_ktg_spolecnost s 
where rel.id_doklad = d.id 
  and rel.ID_DOKLADZDROJDAT = zd.id 
  and zd.id_ktgspolecnost = s.id (+) 
group by rel.id_doklad, zd.s_ucet, zd.s_mena, zd.id_ktgspolecnost, s.s_nazev, 
         d.ID_KTGUCETNISPOLECNOST, d.dt_datum, zd.ID_DOKLADPOLOZKA

;


PROMPT Completed VW_KP_DOKLADMANODBORPROJEKT2.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADMANUAL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADMANUAL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADMANUAL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADMANUAL" ("IDPOLOZKADOKLAD", "IDOPRAVNAPOLOZKADOKLAD", "NL_RADEK", "S_MENA", "ND_CASTKALOCAL", "ND_CASTKAMENA", "ND_OPRAVNACASTKALOCAL", "ND_OPRAVNACASTKAMENA", "ID_DOKLAD", "S_POPIS", "S_LIST", "S_RADEKTEXT", "NL_PORADILIST", "IDPOLOZKA_DLB", "IDOPRAVNA_DLB", "NL_RADEKPASIVAHV") AS 
  SELECT   SUM (idpolozkadoklad) idpolozkadoklad, 
            SUM (idopravnapolozkadoklad) idopravnapolozkadoklad, nl_radek, 
            s_mena, 
              SUM (nd_castkalocal) 
            * f_getsignbilancelist (nl_poradilist) nd_castkalocal, 
              SUM (nd_castkamena) 
            * f_getsignbilancelist (nl_poradilist) nd_castkamena, 
              SUM (nd_opravnacastkalocal) 
            * f_getsignbilancelist (nl_poradilist) nd_opravnacastkalocal, 
              SUM (nd_opravnacastkamena) 
            * f_getsignbilancelist (nl_poradilist) nd_opravnacastkamena, 
            id_doklad, s_popis, s_list, s_radektext, nl_poradilist, 
            SUM (idpolozka_dlb), SUM (idopravna_dlb), 
			(select cd.nl_radekPasivaHV from kp_ktg_doklad kd, kp_cis_doklad cd where kd.id = id_ktgDoklad and kd.id_cisDoklad = cd.id) nl_radekPasivaHV 
       FROM (SELECT dp.ID idpolozkadoklad, 0 idopravnapolozkadoklad, 
                    dp.nl_radek, dp.nd_castkalocal, 
                    DECODE (kd.s_mena, 
                            dp.s_mena, 0, 
                            dp.nd_castkamena 
                           ) nd_castkamena, 
                    0 nd_opravnacastkalocal, 0 nd_opravnacastkamena, 
                    dp.s_mena, kd.ID id_doklad, kd.s_popis s_popis, 
                    lt.s_popis s_list, rt.s_popis s_radektext, 
                    dp.nl_poradilist nl_poradilist, 
                    dp.id_deflistbunka idpolozka_dlb, 0 idopravna_dlb, 
					id_ktgDoklad 
               FROM kp_dat_dokladpolozka dp, 
                    kp_dat_doklad kd, 
                    kp_cis_list lt, 
                    kp_cis_radektext rt, 
                    kp_def_listbunka dl 
              WHERE dp.id_doklad = kd.ID 
                AND dp.id_cislist = lt.ID 
                AND dp.id_cisradektyp = rt.ID 
                AND dp.nl_sloupec = 1 
                AND dp.id_deflistbunka = dl.ID 
                AND dl.c_typ <> 'V' 
             UNION ALL 
             SELECT 0, dp.ID idopravnapolozka, dp.nl_radek, 0, 0, 
                      dp.nd_castkalocal 
                    * f_getsignbilancelist (nl_poradilist) 
                                                        nd_opravnacastkalocal, 
                      DECODE (kd.s_mena, 
                              dp.s_mena, 0, 
                              dp.nd_castkamena 
                             ) 
                    * f_getsignbilancelist (nl_poradilist) 
                                                         nd_opravnacastkamena, 
                    dp.s_mena, kd.ID id_doklad, kd.s_popis s_popis, 
                    lt.s_popis s_list, rt.s_popis s_radektext, 
                    dp.nl_poradilist nl_poradilist, 0 idpolozka_dlb, 
                    dp.id_deflistbunka idopravna_dlb, 
					id_ktgDoklad 
               FROM kp_dat_dokladpolozka dp, 
                    kp_dat_doklad kd, 
                    kp_cis_list lt, 
                    kp_cis_radektext rt, 
                    kp_def_listbunka dl 
              WHERE dp.id_doklad = kd.ID 
                AND dp.id_cislist = lt.ID 
                AND dp.id_cisradektyp = rt.ID 
                AND dp.nl_sloupec = 3 
                AND dp.id_deflistbunka = dl.ID 
                AND dl.c_typ <> 'V') 
   GROUP BY nl_radek, 
            s_mena, 
            id_doklad, 
            s_popis, 
            s_list, 
            s_radektext, 
            nl_poradilist, 
			id_ktgDoklad

;


PROMPT Completed VW_KP_DOKLADMANUAL.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_KP_DOKLADMENOVAPOZICEDETAIL.sql: 'utf-8' codec can't decode byte 0xe8 in position 1819: invalid continuation byte


-- ============================================================================
-- Deploy: VW_KP_DOKLADPARAMETRY.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADPARAMETRY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADPARAMETRY
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADPARAMETRY" ("ID_DOKLAD", "ID_DOKLADPOLOZKA", "NL_SLOUPEC", "NL_RADEK", "DT_DATUMDOKLAD", "S_MENABUNKA", "S_MENADOKLAD", "ID_KTGUCETNISPOLECNOST", "NL_KROK", "ID_KTGUCETNISKUPINA", "RADEK") AS 
  select p.id_doklad, p.id id_dokladPolozka, p.nl_sloupec, p.nl_radek, d.dt_datum dt_datumDoklad, p.s_mena s_menaBunka, d.s_mena s_menaDoklad, 
d.id_ktgUcetniSpolecnost, d.nl_krok, 
( select s.id_ktgUcetniSkupina from kp_ktg_subkonsolidace s where s.ID_KTGUCETNISPOLECNOST = d.ID_KTGUCETNISPOLECNOST ) id_ktgUcetniSkupina, 
( select 'R'||to_char(x.id) from kp_def_listBunka x where x.id_cisList = p.ID_CISLIST and x.nl_radek = p.nl_radek and x.nl_sloupec = 1 ) radek 
from kp_dat_doklad d, kp_dat_dokladPolozka p 
where d.id = p.id_doklad and 
		d.c_baseDoklad = '1' --and p.id_doklad = -9

;


PROMPT Completed VW_KP_DOKLADPARAMETRY.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADPARAMETRY2.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADPARAMETRY2.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADPARAMETRY2
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADPARAMETRY2" ("ID_DOKLAD", "ID_DOKLADPOLOZKA", "NL_SLOUPEC", "NL_RADEK", "DT_DATUMDOKLAD", "S_MENABUNKA", "S_MENADOKLAD", "ID_KTGUCETNISPOLECNOST", "NL_KROK", "ID_KTGUCETNISKUPINA", "ID_KTGODBOR", "ID_KTGPROJEKT", "ID_KTGSPOLECNOST", "S_UCET", "S_UCETUNIF", "ID_ZDROJDAT", "RADEK") AS 
  select p.id_doklad, p.id id_dokladPolozka, p.nl_sloupec, p.nl_radek, d.dt_datum dt_datumDoklad, p.s_mena s_menaBunka, d.s_mena s_menaDoklad, 
d.id_ktgUcetniSpolecnost, d.nl_krok, 
( select s.id_ktgUcetniSkupina from kp_ktg_subkonsolidace s where s.ID_KTGUCETNISPOLECNOST = d.ID_KTGUCETNISPOLECNOST ) id_ktgUcetniSkupina, 
z.id_ktgOdbor, z.id_ktgProjekt, z.id_ktgSpolecnost, 
z.s_ucet, NVL ( z.s_ucetunif,'?') s_ucetUnif, 
z.id id_zdrojDat, /*p.ID_DEFLISTBUNKA*/ ( select 'R'||to_char(x.id) from kp_def_listBunka x where x.id_cisList = p.ID_CISLIST and x.nl_radek = p.nl_radek and x.nl_sloupec = 1 ) 
from kp_dat_doklad d, kp_dat_dokladPolozka p, kp_dat_dokladZdrojDat z, kp_rel_doklad_ZdrojDat r 
where d.id = p.id_doklad and 
		z.id = r.id_dokladZdrojDat and 
		r.id_doklad = d.id and 
		r.id_dokladPolozka = p.id and 
		p.id_doklad = r.id_doklad and 
		d.c_baseDoklad = '1'

;


PROMPT Completed VW_KP_DOKLADPARAMETRY2.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADPOLOZKADENIK.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADPOLOZKADENIK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADPOLOZKADENIK
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADPOLOZKADENIK" ("ID", "ND_OLD_VALUE", "ND_NEW_VALUE", "ND_ZMENA", "S_POPIS", "ID_DOKLAD", "S_NAZEV_SPOL", "S_POPIS_LIST", "NL_SLOUPEC", "NL_RADEK") AS 
  SELECT 
    DPD.ID, 
      DPD.ND_OLD_VALUE* f_getSignBilanceList(dp.nl_poradiList), 
      DPD.ND_NEW_VALUE* f_getSignBilanceList(dp.nl_poradiList), 
      DPD.ND_ZMENA* f_getSignBilanceList(dp.nl_poradiList), 
      DPD.S_POPIS S_POPIS, 
      DP.ID_DOKLAD, 
      US.S_NAZEV S_NAZEV_SPOL, 
      LT.S_POPIS S_POPIS_LIST, 
      DP.NL_SLOUPEC, 
      DP.NL_RADEK 
       FROM kp_dat_dokladpolozkadenik dpd, 
            kp_dat_dokladpolozka dp, 
            kp_dat_doklad kd, 
            kp_cis_list lt, 
            kp_ktg_ucetnispolecnost us 
      WHERE dpd.id_dokladpolozka = dp.ID 
        AND dp.id_doklad = kd.ID 
        AND dp.id_cislist = lt.ID 
		  and dpd.id_doklad = kd.id 
        AND us.ID = kd.id_ktgucetnispolecnost 
   ORDER BY id_doklad, s_popis_list, nl_sloupec, nl_radek, ID

;


PROMPT Completed VW_KP_DOKLADPOLOZKADENIK.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADPOLOZKADENIKSUMA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADPOLOZKADENIKSUMA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADPOLOZKADENIKSUMA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADPOLOZKADENIKSUMA" ("ID", "ND_OLD_VALUE", "ND_NEW_VALUE", "ND_ZMENA", "S_POPIS", "ID_DOKLAD", "S_NAZEV_SPOL", "NL_RADEK", "ID_CISRADEKTYP") AS 
  SELECT 
    DPD.ID, 
      DPD.ND_OLD_VALUE* f_getSignBilanceList(dp.nl_poradiList) ND_OLD_VALUE, 
      DPD.ND_NEW_VALUE* f_getSignBilanceList(dp.nl_poradiList) ND_NEW_VALUE, 
      DPD.ND_ZMENA* f_getSignBilanceList(dp.nl_poradiList) ND_ZMENA, 
      DPD.S_POPIS S_POPIS, 
      DP.ID_DOKLAD, 
      US.S_NAZEV S_NAZEV_SPOL, 
      B.NL_RADEK, 
	  B.ID_CISRADEKTYP 
FROM 
    KP_DAT_DOKLADPOLOZKADENIK DPD, 
    KP_DAT_DOKLADPOLOZKA DP, 
    KP_DAT_DOKLAD KD, 
    KP_KTG_UCETNISPOLECNOST US, 
	 KP_DEF_LISTBUNKASUM SUM, 
     KP_DEF_LISTBUNKA B 
WHERE 
    DPD.ID_DOKLADPOLOZKA = DP.ID AND 
      DP.ID_DOKLAD = KD.ID AND 
      US.ID = KD.ID_KTGUCETNISPOLECNOST 
  AND SUM.ID_BUNKA = DP.ID_DEFLISTBUNKA 
  AND SUM.ID_BUNKASUM = B.ID 
ORDER BY 
    ID_DOKLAD, NL_RADEK, ID

;


PROMPT Completed VW_KP_DOKLADPOLOZKADENIKSUMA.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADPOSLEDNI.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADPOSLEDNI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADPOSLEDNI
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADPOSLEDNI" ("ID_KTGUCETNISPOLECNOST", "MAX_DATUM", "ID_DOKLAD", "S_MENA", "ND_ZJ", "ND_VJ", "NL_POCETTRANSAKCI", "DT_MAXTRANSAKCE") AS 
  SELECT LDD2.ID_KTGUCETNISPOLECNOST, LDD2.MAX_DATUM, LDD2.ID_DOKLAD, D.S_MENA, D.ND_ZJ, D.ND_VJ, D.NL_POCETTRANSAKCI, D.DT_MAXTRANSAKCE 
FROM 
( 
SELECT LDD.ID ID_KTGUCETNISPOLECNOST, LDD.MAX_DATUM, MAX(D.ID) ID_DOKLAD 
FROM 
	( 
	SELECT ID, MAX(DT_DATUM) MAX_DATUM, NL_KROK  FROM 
	    ( 
		SELECT S.ID , D.DT_DATUM, D.NL_KROK 
		FROM KP_KTG_UCETNISPOLECNOST S, 
		     KP_DAT_DOKLAD D 
		WHERE S.ID = D.ID_KTGUCETNISPOLECNOST(+) 
		) 
	GROUP BY ID, NL_KROK 
	) LDD, 
	KP_DAT_DOKLAD D 
WHERE LDD.ID = D.ID_KTGUCETNISPOLECNOST 
  AND LDD.MAX_DATUM = D.DT_DATUM 
  AND LDD.NL_KROK = D.NL_KROK 
  AND LDD.NL_KROK = 1 
  AND EXISTS (SELECT NULL FROM KP_KTG_DOKLAD KKD WHERE KKD.ID = D.ID_KTGDOKLAD AND KKD.ID_CISDOKLAD = 1)--jen doklad 1 
GROUP BY LDD.ID , LDD.MAX_DATUM 
ORDER BY LDD.ID 
) LDD2, 
  KP_DAT_DOKLAD D 
WHERE LDD2.ID_DOKLAD = D.ID

;


PROMPT Completed VW_KP_DOKLADPOSLEDNI.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADPOSLEDNISUM.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADPOSLEDNISUM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADPOSLEDNISUM
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADPOSLEDNISUM" ("ID_KTGUCETNISPOLECNOST", "S_COUNTRY", "MAX_DATUM", "ZJ", "VJ", "POCETTRANSAKCI", "DT_MAXTRANSAKCE") AS 
  SELECT S.ID ID_KTGUCETNISPOLECNOST, 
       P.S_COUNTRY, 
	   POS.MAX_DATUM, 
	   nvl(ND_ZJ, 0) zj, 
	   nvl(ND_VJ, 0) vj, 
	   nvl(NL_POCETTRANSAKCI, 0) POCETTRANSAKCI, 
	   DT_MAXTRANSAKCE 
FROM KP_KTG_SPOLECNOST P, 
     KP_KTG_UCETNISPOLECNOST S, 
	 VW_KP_DOKLADPOSLEDNI POS 
WHERE decode(S.ID,5054,5004,S.ID) = P.ID_KTGSPOLECNOST(+) 
  AND S.ID = POS.ID_KTGUCETNISPOLECNOST(+) 
ORDER BY S.ID

;


PROMPT Completed VW_KP_DOKLADPOSLEDNISUM.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADPREHLED.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADPREHLED.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADPREHLED
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADPREHLED" ("ID_DOKLAD", "ND_CASTKALOCAL", "NL_RADEK", "ID_CISRADEKTYP") AS 
  SELECT P.ID_DOKLAD, 
       SUM(P.ND_CASTKALOCAL*DECODE(B.NL_SLOUPEC,3,-1,1)*DECODE(P.NL_PORADILIST,1,1,3,1,-1)*SUM.NL_KOEFICIENT) ND_CASTKALOCAL, 
       B.NL_RADEK, 
	   B.ID_CISRADEKTYP 
FROM KP_DEF_LISTBUNKASUM SUM, 
     KP_DEF_LISTBUNKA B, 
     KP_DAT_DOKLADPOLOZKA P, 
	 KP_DAT_DOKLAD D 
WHERE SUM.ID_BUNKA = P.ID_DEFLISTBUNKA 
  AND SUM.ID_BUNKASUM = B.ID 
  AND D.ID = P.ID_DOKLAD 
  AND P.S_MENA = D.S_MENA 
GROUP BY P.ID_DOKLAD, B.NL_RADEK, B.ID_CISRADEKTYP

;


PROMPT Completed VW_KP_DOKLADPREHLED.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADPREHLEDOBDOBI.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADPREHLEDOBDOBI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADPREHLEDOBDOBI
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADPREHLEDOBDOBI" ("ID_DOKLAD", "ND_CASTKALOCAL", "NL_RADEK", "MESIC", "ID_CISRADEKTYP") AS 
  SELECT REL.ID_DOKLAD, 
       SUM(ZD.ND_CASTKALOCAL*DECODE ( ZD.C_STRANA, 'D', -1, 1 )*DECODE(P.NL_PORADILIST,1,1,3,1,-1)*SUM.NL_KOEFICIENT) ND_CASTKALOCAL, 
	   B.NL_RADEK, 
	   TO_CHAR(ZD.DATUM, 'YYYY-MM') MESIC, 
	   B.ID_CISRADEKTYP 
FROM KP_REL_DOKLAD_ZDROJDAT REL, 
     KP_DAT_DOKLADZDROJDAT ZD, 
	 KP_DAT_DOKLADPOLOZKA P, 
	 KP_DEF_LISTBUNKASUM SUM, 
     KP_DEF_LISTBUNKA B 
WHERE ZD.ID = REL.ID_DOKLADZDROJDAT 
  and p.id_doklad = rel.id_doklad 
  AND REL.ID_DOKLADPOLOZKA = P.ID 
  AND SUM.ID_BUNKA = P.ID_DEFLISTBUNKA 
  AND SUM.ID_BUNKASUM = B.ID 
GROUP BY REL.ID_DOKLAD, B.NL_RADEK, TO_CHAR(ZD.DATUM, 'YYYY-MM'), B.ID_CISRADEKTYP 
HAVING SUM(ZD.ND_CASTKALOCAL*DECODE ( ZD.C_STRANA, 'D', -1, 1 )*DECODE(P.NL_PORADILIST,1,1,3,1,-1)*SUM.NL_KOEFICIENT) <> 0

;


PROMPT Completed VW_KP_DOKLADPREHLEDOBDOBI.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADPREHLEDOBDOBIMESIC.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADPREHLEDOBDOBIMESIC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADPREHLEDOBDOBIMESIC
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADPREHLEDOBDOBIMESIC" ("MESIC", "ID_DOKLAD") AS 
  select distinct mesic, 
       id_doklad 
from VW_KP_DOKLADPREHLEDOBDOBI 
order by mesic

;


PROMPT Completed VW_KP_DOKLADPREHLEDOBDOBIMESIC.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADPREHLEDPROTISTRANA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADPREHLEDPROTISTRANA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADPREHLEDPROTISTRANA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADPREHLEDPROTISTRANA" ("ID_DOKLAD", "ND_CASTKALOCAL", "ND_CASTKAMENA", "S_MENA", "ID_KTGSPOLECNOST", "SPOLECNOST", "NL_RADEK", "ID_CISRADEKTYP") AS 
  SELECT REL.ID_DOKLAD, 
       SUM(ZD.ND_CASTKALOCAL*DECODE ( ZD.C_STRANA, 'D', -1, 1 )*DECODE(P.NL_PORADILIST,1,1,3,1,-1)*SUM.NL_KOEFICIENT) ND_CASTKALOCAL, 
       SUM(ZD.ND_CASTKAMENA*DECODE ( ZD.C_STRANA, 'D', -1, 1 )*DECODE(P.NL_PORADILIST,1,1,3,1,-1)*SUM.NL_KOEFICIENT) ND_CASTKAMENA, 
	   ZD.S_MENA, 
	   ZD.ID_KTGSPOLECNOST, 
	   nvl((SELECT S.S_NAZEV||' ('||s.id||')' FROM KP_KTG_SPOLECNOST S WHERE S.ID = ZD.ID_KTGSPOLECNOST),' ') SPOLECNOST, 
	   B.NL_RADEK, 
	   B.ID_CISRADEKTYP 
FROM KP_REL_DOKLAD_ZDROJDAT REL, 
     KP_DAT_DOKLADZDROJDAT ZD, 
	 KP_DAT_DOKLADPOLOZKA P, 
	 KP_DEF_LISTBUNKASUM SUM, 
     KP_DEF_LISTBUNKA B 
WHERE ZD.ID = REL.ID_DOKLADZDROJDAT 
  and p.id_doklad = rel.id_doklad 
  AND REL.ID_DOKLADPOLOZKA = P.ID 
  AND SUM.ID_BUNKA = P.ID_DEFLISTBUNKA 
  AND SUM.ID_BUNKASUM = B.ID 
GROUP BY REL.ID_DOKLAD, B.NL_RADEK, ZD.ID_KTGSPOLECNOST, ZD.S_MENA, B.ID_CISRADEKTYP 
HAVING SUM(ZD.ND_CASTKALOCAL*DECODE ( ZD.C_STRANA, 'D', -1, 1 )*DECODE(P.NL_PORADILIST,1,1,3,1,-1)*SUM.NL_KOEFICIENT) <> 0 
    OR SUM(ZD.ND_CASTKAMENA*DECODE ( ZD.C_STRANA, 'D', -1, 1 )*DECODE(P.NL_PORADILIST,1,1,3,1,-1)*SUM.NL_KOEFICIENT) <> 0

;


PROMPT Completed VW_KP_DOKLADPREHLEDPROTISTRANA.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADPREHLEDROZKLAD.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADPREHLEDROZKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADPREHLEDROZKLAD
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADPREHLEDROZKLAD" ("ID_DOKLAD", "ND_CASTKALOCAL", "NL_RADEK", "NL_PORADILIST", "NL_RADEKDETAIL", "ID_CISRADEKTYP", "TEXTRADEK", "S_LOCALE") AS 
  SELECT P.ID_DOKLAD, 
       SUM(P.ND_CASTKALOCAL*DECODE(B.NL_SLOUPEC,3,-1,1)*SUM.NL_KOEFICIENT)*DECODE(P.NL_PORADILIST,1,1,3,1,-1) ND_CASTKALOCAL, 
       B.NL_RADEK, 
	   P.NL_PORADILIST, 
	   P.NL_RADEK NL_RADEKDETAIL, 
	   B.ID_CISRADEKTYP, 
	   RT.S_POPIS TEXTRADEK, 
	   RT.S_LOCALE 
FROM KP_DEF_LISTBUNKASUM SUM, 
     KP_DEF_LISTBUNKA B, 
     KP_DAT_DOKLADPOLOZKA P, 
	 KP_DAT_DOKLAD D, 
     KP_DEF_LISTBUNKA BB, 
	 KP_CIS_RADEKTEXTLANG RT 
WHERE SUM.ID_BUNKA = P.ID_DEFLISTBUNKA 
  AND SUM.ID_BUNKASUM = B.ID 
  AND D.ID = P.ID_DOKLAD 
  AND P.S_MENA = D.S_MENA 
  AND SUM.ID_BUNKA = BB.ID 
  AND BB.ID_CISRADEKTYP = RT.ID 
GROUP BY P.ID_DOKLAD, B.NL_RADEK, P.NL_PORADILIST, P.NL_RADEK, B.ID_CISRADEKTYP, RT.S_POPIS, RT.S_LOCALE 
HAVING SUM(P.ND_CASTKALOCAL*DECODE(B.NL_SLOUPEC,3,-1,1)*SUM.NL_KOEFICIENT) <> 0

;


PROMPT Completed VW_KP_DOKLADPREHLEDROZKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADPREHLEDUCET.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADPREHLEDUCET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADPREHLEDUCET
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADPREHLEDUCET" ("ID_DOKLAD", "ND_CASTKALOCAL", "ND_CASTKAMENA", "S_MENA", "S_UCET", "NL_RADEK", "TEXTRADEK", "S_LOCALE", "ID_CISRADEKTYP", "ID_DOKLADPOLOZKA") AS 
  SELECT   rel.id_doklad,
            SUM (  zd.nd_castkalocal
                 * DECODE (zd.c_strana, 'D', -1, 1)
                 * DECODE (p.nl_poradilist, 1, 1, 3, 1, -1)
                 * SUM.nl_koeficient
                ) nd_castkalocal,
            SUM (  zd.nd_castkamena
                 * DECODE (zd.c_strana, 'D', -1, 1)
                 * DECODE (p.nl_poradilist, 1, 1, 3, 1, -1)
                 * SUM.nl_koeficient
                ) nd_castkamena,
            zd.s_mena, zd.s_ucet, b.nl_radek,
            --f_getbunkatext (zd.id_dokladpolozka, l.s_locale) textradek,
			f_getUcetUnifPopis( zd.id_cisUcetUnif, l.s_locale) textradek,
            l.s_locale, b.id_cisradektyp, zd.id_dokladpolozka
       FROM kp_rel_doklad_zdrojdat rel,
            kp_dat_dokladzdrojdat zd,
            kp_dat_dokladpolozka p,
            kp_def_listbunkasum SUM,
            kp_def_listbunka b,
            cis_locale l
      WHERE zd.ID = rel.id_dokladzdrojdat
        AND p.id_doklad = rel.id_doklad
        AND rel.id_dokladpolozka = p.ID
        AND SUM.id_bunka = p.id_deflistbunka
        AND SUM.id_bunkasum = b.ID
   GROUP BY rel.id_doklad,
            b.nl_radek,
            zd.s_ucet,
            zd.s_mena,
            zd.id_dokladpolozka,
            l.s_locale,
            b.id_cisradektyp,
			zd.id_cisUcetUnif
     HAVING SUM (  zd.nd_castkalocal
                 * DECODE (zd.c_strana, 'D', -1, 1)
                 * DECODE (p.nl_poradilist, 1, 1, 3, 1, -1)
                 * SUM.nl_koeficient
                ) <> 0
         OR SUM (  zd.nd_castkamena
                 * DECODE (zd.c_strana, 'D', -1, 1)
                 * DECODE (p.nl_poradilist, 1, 1, 3, 1, -1)
                 * SUM.nl_koeficient
                ) <> 0

;


PROMPT Completed VW_KP_DOKLADPREHLEDUCET.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADPREHLEDVAZBY.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADPREHLEDVAZBY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADPREHLEDVAZBY
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADPREHLEDVAZBY" ("ID_DOKLAD", "ND_CASTKALOCAL", "NL_RADEK", "ID_CISRADEKTYP") AS 
  SELECT P.ID_DOKLAD, 
	   SUM(DD.ND_ZMENA * F_GETSIGNBILANCELIST(P.NL_PORADILIST)) ND_CASTKALOCAL, 
       B.NL_RADEK, 
	   B.ID_CISRADEKTYP 
FROM KP_DAT_DOKLADPOLOZKA P, 
	 KP_DAT_DOKLADPOLOZKADENIK DD, 
	 KP_DEF_LISTBUNKASUM SUM, 
     KP_DEF_LISTBUNKA B 
WHERE SUM.ID_BUNKA = P.ID_DEFLISTBUNKA 
  AND SUM.ID_BUNKASUM = B.ID 
  AND DD.ID_DOKLADPOLOZKA = P.ID 
  AND DD.C_AKCE = 'V' and dd.id_doklad = p.id_doklad
GROUP BY P.ID_DOKLAD, B.NL_RADEK, B.ID_CISRADEKTYP


;


PROMPT Completed VW_KP_DOKLADPREHLEDVAZBY.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADPROTISTRANA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADPROTISTRANA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADPROTISTRANA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADPROTISTRANA" ("S_UCET", "S_POPIS", "NDCASTKAMENA", "NDCASTKALOCAL", "NDCASTKACNB", "S_MENA", "UNIFPROTI_ICO", "UNIFPROTI", "REPORT_KOD", "ID_DOKLAD", "S_EVIDOVATPROTISTRANU", "LISTGROUP", "S_EKONOM_SEKTOR", "S_LOCALE", "CLENJTFGKONS", "S_UCETUNIF", "S_POPISORIGINAL", "S_KODKATEGORIEPROTISTRANA", "TYPSUBJECT", "S_COUNTRY", "C_COUNTRY", "C_TYPECOUNTERPARTIES", "ND_LIMITCOUNTERPARTIESDETAL", "S_OKEC", "S_ACC_PPF", "S_ACC_PPF_INFO") AS 
  SELECT p.s_ucet, s_popis, ndcastkamena, ndcastkalocal, ndcastkacnb, s_mena,
          ks.s_ico unifproti_ico, ks.s_nazev unifproti, c_list report_kod,
          id_doklad, s_evidovatprotistranu,
          f_getunifgroup (0, ks.ID) listgroup, ks.s_ekonom_sektor, s_locale,
          TO_CHAR
             (f_jeprotistranaclenskupiny (p.unifprotiid,
                                          2,
                                          (SELECT dt_datum
                                             FROM kp_dat_doklad dok
                                            WHERE dok.ID = p.id_doklad)
                                         )
             ) clenjtfgkons,
          s_ucetoriginal,
          (SELECT UP.s_popis
             FROM kp_cis_ucetprimarni UP,
                  kp_dat_doklad d,
                  kp_ktg_ucetnispolecnost us
            WHERE d.ID = p.id_doklad
              AND d.id_ktgucetnispolecnost = us.ID
              AND UP.s_ucet = p.s_ucetoriginal
              AND UP.id_cisdatabaze = d.id_cisdatabaze
              AND UP.c_typ = us.c_feis_ucettyp) s_popisoriginal,
-- smrM 18.09.2020              
--			ks.s_kodKategorieProtistrana,
         nvl (ks.s_kodKategorieProtistrana_2, ks.s_kodKategorieProtistrana) s_kodKategorieProtistrana,
--         f_getKodSubjectTyp (ks.s_kodKategorieProtistrana) typSubject,
         f_getKodSubjectTyp ( nvl (ks.s_kodKategorieProtistrana_2, ks.s_kodKategorieProtistrana) ) typSubject,
         ks.s_country,
         uu.c_country,
         uu.c_typecounterparties,
         uu.nd_limitcounterpartiesdetal,
         ks.s_okec,
         ppf.s_ppf_acc,
         ppf.s_ppf_info
     FROM (SELECT   a.s_ucet,
                    f_getucetunifpopisucet (a.s_ucet, l.s_locale) s_popis,
                    SUM (a.nd_castkamena) ndcastkamena,
                    SUM (a.nd_castkalocal) ndcastkalocal, a.s_mena,
                    a.id_ktgspolecnost unifprotiid,
                    SUM (a.nd_castkacnb) ndcastkacnb, UPPER (a.c_list) c_list,
                    a.id_doklad, a.s_evidovatprotistranu, l.s_locale,
                    a.s_ucetoriginal, a.id_cisucetunif
               FROM kp_dat_dokladzdrojdatagregace a, cis_locale l
           GROUP BY a.id_doklad,
                    a.s_ucet,
                    a.s_mena,
                    a.id_ktgspolecnost,
                    a.c_list,
                    a.s_evidovatprotistranu,
                    l.s_locale,
                    a.s_ucetoriginal,
                    a.id_cisucetunif
             HAVING SUM (a.nd_castkamena) != 0 OR SUM (a.nd_castkalocal) != 0) p,
          kp_ktg_spolecnost ks,
          kp_cis_ucetUnif uu,
          VW_REL_ACC_JT2PPF ppf
    WHERE (ndcastkamena != 0 OR ndcastkalocal != 0) 
          AND p.unifprotiid = ks.ID(+) 
          and uu.id = p.id_cisucetunif
          and uu.s_ucet = ppf.s_jt_acc (+)
;


PROMPT Completed VW_KP_DOKLADPROTISTRANA.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADPROTIUCETLIST.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADPROTIUCETLIST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADPROTIUCETLIST
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADPROTIUCETLIST" ("ID_DOKLAD", "ND_CASTKALOCAL", "ND_CASTKAMENA", "S_MENA", "S_MENADOKLAD", "ID_KTGSPOLECNOST", "SPOLECNOST", "NL_PORADILIST", "NL_RADEK", "S_UCET") AS 
  SELECT   rel.id_doklad, 
            SUM (  zd.nd_castkalocal 
                 * DECODE (zd.c_strana, 'D', -1, 1) 
                 * DECODE (p.nl_poradilist, 1, 1, 3, 1, -1) 
                ) nd_castkalocal, 
            SUM (  zd.nd_castkamena 
                 * DECODE (zd.c_strana, 'D', -1, 1) 
                 * DECODE (p.nl_poradilist, 1, 1, 3, 1, -1) 
                ) nd_castkamena, 
            zd.s_mena, 
			(select s_mena from kp_dat_doklad where id = rel.id_doklad) s_menaDoklad, 
			zd.id_ktgspolecnost, 
            NVL ((SELECT s.s_nazev || ' (' || s.ID || ')' 
                    FROM kp_ktg_spolecnost s 
                   WHERE s.ID = zd.id_ktgspolecnost), ' ') spolecnost, 
            p.nl_poradilist, 
			p.nl_radek, 
			zd.S_UCET 
       FROM kp_rel_doklad_zdrojdat rel, 
            kp_dat_dokladzdrojdat zd, 
            kp_dat_dokladpolozka p 
      WHERE zd.ID = rel.id_dokladzdrojdat 
        AND p.id_doklad = rel.id_doklad 
        AND rel.id_dokladpolozka = p.ID 
   GROUP BY rel.id_doklad, 
            zd.id_ktgspolecnost, 
            zd.s_mena, 
			p.nl_poradilist, 
			p.nl_radek, 
			zd.S_UCET 
     HAVING SUM (  zd.nd_castkalocal 
                 * DECODE (zd.c_strana, 'D', -1, 1) 
                 * DECODE (p.nl_poradilist, 1, 1, 3, 1, -1) 
                ) <> 0 
         OR SUM (  zd.nd_castkamena 
                 * DECODE (zd.c_strana, 'D', -1, 1) 
                 * DECODE (p.nl_poradilist, 1, 1, 3, 1, -1) 
                ) <> 0

;


PROMPT Completed VW_KP_DOKLADPROTIUCETLIST.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_KP_DOKLADSPOLODBORPROJEKT.sql: 'utf-8' codec can't decode byte 0xc8 in position 1097: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_KP_DOKLADSPOLODBORPROJ_MIS.sql: 'utf-8' codec can't decode byte 0xc8 in position 1152: invalid continuation byte


-- ============================================================================
-- Deploy: VW_KP_DOKLADSTRUKTURA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADSTRUKTURA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADSTRUKTURA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADSTRUKTURA" ("LIST", "RADEKTEXT", "LISTPORADI", "NL_RADEK", "C_TYP", "ID_KTGDEFLISTBUNKA", "ID_KTGDEFLISTBUNKAOPRAVNA", "S_LOCALE", "ID_CISDOKLAD") AS 
  SELECT lt.s_popis List,
    rt.s_popis RadekText,
    dd.nl_poradi listPoradi,
    dl.nl_radek,
    dl.c_typ,
    dl.id id_ktgDefListBunka,
    f_getBilanceOprPolozka ( dl.id_cisList, dl.nl_radek ) id_ktgDefListBunkaOpravna,
    rt.s_locale,
    dd.ID_CISDOKLAD
  FROM kp_def_Doklad dd,
    kp_cis_List lt,
    kp_def_ListBunka dl,
    kp_cis_RadekTextLang rt
  WHERE dd.id_cisList   = lt.id
  AND lt.id             = dl.id_cisList
  AND dl.id_cisRadekTyp = rt.id
  AND dl.nl_sloupec     = 1
;


PROMPT Completed VW_KP_DOKLADSTRUKTURA.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADSUBLOG.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADSUBLOG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADSUBLOG
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADSUBLOG" ("ID", "ID_DOKLADPOLOZKA", "C_AKCE", "ND_OLD_VALUE", "ND_NEW_VALUE", "ND_ZMENA", "S_POPIS", "IDDOKLAD", "NL_SLOUPEC", "NL_PORADILIST", "NL_RADEK") AS 
  SELECT d.ID, d.id_dokladpolozka, d.c_akce, d.nd_old_value, d.nd_new_value, 
          d.nd_zmena, d.s_popis, kd.ID iddoklad, dp.nl_sloupec, 
          dp.nl_poradilist, dp.nl_radek 
     FROM kp_dat_dokladpolozka dp, 
          kp_dat_doklad kd, 
          kp_dat_dokladpolozkadenik d 
    WHERE d.id_dokladpolozka = dp.ID AND dp.id_doklad = kd.ID and kd.id = d.id_doklad

;


PROMPT Completed VW_KP_DOKLADSUBLOG.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADUVEROVAPOZICE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADUVEROVAPOZICE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADUVEROVAPOZICE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADUVEROVAPOZICE" ("S_UCET", "ND_CASTKAMENA", "ND_CASTKALOCAL", "ND_CASTKACNB", "S_MENA", "S_UNIFPROTI_ICO", "S_UNIFPROTI", "ID_DOKLAD", "S_LISTGROUP", "S_LISTGROUPCODE", "S_POPIS", "ND_KATEGORIE_KOEF", "S_LOCALE", "S_UCETUNIF", "ID_UNIFPROTI", "S_POPISORIGINAL", "C_BANKA", "ND_CISTAANGAZOVANOST") AS 
  SELECT s_ucet,    nd_castkamena,    nd_castkalocal,    nd_castkacnb,    s_mena,    s_unifproti_ico,    s_unifproti,    id_doklad,
    s_listgroup,    s_listgroupcode,    s_popis,    nd_kategorie_koef,    s_locale,    s_ucetoriginal,    id_unifproti,
    (SELECT UP.s_popis
    FROM kp_cis_ucetprimarni UP,      kp_dat_doklad d,      kp_ktg_ucetnispolecnost us
    WHERE d.ID                   = pp.id_doklad
    AND d.id_ktgucetnispolecnost = us.ID
    AND UP.s_ucet                = pp.s_ucetoriginal
    AND UP.id_cisdatabaze        = d.id_cisdatabaze
    AND UP.c_typ                 = us.c_feis_ucettyp
    ) s_popisoriginal ,
    pp.c_banka --v03 2011
    --v pre Acctuate 2013
    --nvl(pp.c_banka,   F_IS_PROTI_BANKA ( id_doklad , id_unifproti)) c_banka
    , pp.ND_CISTAANGAZOVANOST --v03 2011
    --v pre Acctuate 2013
    --,nvl(pp.ND_CISTAANGAZOVANOST,nvl(nd_castkacnb,0) * decode(id_unifproti,29390,0,46033,0,29419,0, nvl(nd_kategorie_koef,0)) ) ND_CISTAANGAZOVANOST
  FROM  -- zdroj pp  = p + p1 + p2
    (    --    -- v2010
    SELECT s_ucet,      nd_castkamena,      nd_castkalocal,      nd_castkacnb,      p.s_mena,      ks.s_ico s_unifproti_ico,      ks.s_nazev s_unifproti,      id_doklad,
      DECODE (sg.cust_group_name, NULL, NULL, SUBSTR (sg.cust_group_name, 1, 255)      || ' ('      || SUBSTR (sg.cust_group_code, 1, 255)      || ')' ) s_listgroup,
      SUBSTR (sg.cust_group_code, 1, 512) s_listgroupcode,      p.s_popis,
      --v2
      CASE
        WHEN p.kategoriekoef IS NOT NULL
        THEN p.kategoriekoef
        ELSE ks.kategoriekoef
      END nd_kategorie_koef,
      s_locale,      s_ucetoriginal,      ks.ID id_unifproti ,      c_banka --v03 2011
      ,ND_CISTAANGAZOVANOST --v03 2011
    FROM      ---
      ( -- zdroj P  START  , kp_dat_dokladzdrojdatagregace
      SELECT a.s_ucet,        SUM (a.nd_castkamena) nd_castkamena,        SUM (a.nd_castkalocal) nd_castkalocal,        a.s_mena,        a.id_ktgspolecnost unifprotiid,
        SUM (a.nd_castkacnb) nd_castkacnb,
        CASE
          WHEN a.ID_MANUALTEXT IS NOT NULL
          THEN
            (SELECT s_text FROM db_dsa.KP_S_MANUALTEXT mt WHERE mt.id = a.ID_MANUALTEXT
            )
          ELSE f_getucetunifpopisucet (a.s_ucet, l.s_locale)
        END s_popis,
        a.id_doklad,        l.s_locale,        a.s_ucetoriginal ,        a.kategoriekoef --esc
        ,   a.cust_group_code --v2010
        ,   a.c_banka --v03 2011
        ,   a.ND_CISTAANGAZOVANOST --v03 2011
      FROM kp_dat_dokladzdrojdatagregace a,        cis_locale l
      WHERE a.c_uverovapozice = '1'
      AND a.cust_group_code  IS NOT NULL --v2010
      GROUP BY a.id_doklad,        a.s_ucet,        a.s_mena,        a.id_ktgspolecnost,     l.s_locale,        a.s_ucetoriginal,        a.ID_MANUALTEXT ,        a.kategoriekoef ,
        a.cust_group_code ,        a.c_banka --v03 2011
        ,   a.ND_CISTAANGAZOVANOST --v03 2011
      HAVING SUM (a.nd_castkamena) != 0
      OR SUM (a.nd_castkalocal)    != 0
      ) P,
      --- zdroj P END
      KP_DAT_DOKLAD D,
      KP_KTG_SPOLECNOST KS,
      KP_KTG_SPOLECNOST_GROUP SG
    WHERE p.id_doklad   = d.ID
          AND ( nd_castkamena != 0    OR nd_castkalocal  != 0 )
          AND p.unifprotiid   = ks.ID(+)
          AND ks.ID           = sg.id_spolecnost(+)
          AND d.dt_datum BETWEEN sg.dt_platnostod AND sg.dt_platnostdo
          --esc 2018 VABA ... AND p.cust_group_code = sg.cust_group_code --v2010
    UNION
    --v2010
    ---------------------------------------------------------------------------------------------------------------------
    SELECT s_ucet,      nd_castkamena,      nd_castkalocal,      nd_castkacnb,      p.s_mena,      ks.s_ico s_unifproti_ico,      ks.s_nazev s_unifproti,      id_doklad,
      DECODE (sg.cust_group_name, NULL, NULL, SUBSTR (sg.cust_group_name, 1, 255)      || ' ('      || SUBSTR (sg.cust_group_code, 1, 255)      || ')' ) s_listgroup,
      SUBSTR (sg.cust_group_code, 1, 512) s_listgroupcode,      p.s_popis,
      --v2
      CASE
        WHEN p.kategoriekoef IS NOT NULL
        THEN p.kategoriekoef
        ELSE ks.kategoriekoef
      END nd_kategorie_koef,
      s_locale,      s_ucetoriginal,      ks.ID id_unifproti ,      p.c_banka --v03 2011
      ,      p.ND_CISTAANGAZOVANOST --v03 2011
    FROM
      ---
      (  --zdroj P2  kp_dat_dokladzdrojdatagregace  START
      SELECT a.s_ucet,        SUM (a.nd_castkamena) nd_castkamena,        SUM (a.nd_castkalocal) nd_castkalocal,        a.s_mena,        a.id_ktgspolecnost unifprotiid,
        SUM (a.nd_castkacnb) nd_castkacnb,
        CASE
          WHEN a.ID_MANUALTEXT IS NOT NULL
          THEN
            (SELECT s_text FROM db_dsa.KP_S_MANUALTEXT mt WHERE mt.id = a.ID_MANUALTEXT
            )
          ELSE f_getucetunifpopisucet (a.s_ucet, l.s_locale)
        END s_popis,        a.id_doklad,        l.s_locale,        a.s_ucetoriginal ,        a.kategoriekoef --esc
        --,         a.cust_group_code
        ,        a.c_banka --v03 2011
        ,        a.ND_CISTAANGAZOVANOST --v03 2011
      FROM kp_dat_dokladzdrojdatagregace a,        cis_locale l
      WHERE a.c_uverovapozice = '1'
      AND a.cust_group_code  IS NULL --v2010
      GROUP BY a.id_doklad,        a.s_ucet,        a.s_mena,        a.id_ktgspolecnost,        l.s_locale,        a.s_ucetoriginal,        a.ID_MANUALTEXT ,
        a.kategoriekoef        --, a.cust_group_code
        ,  a.c_banka --v03 2011
        ,  a.ND_CISTAANGAZOVANOST --v03 2011
      HAVING SUM (a.nd_castkamena) != 0
      OR SUM (a.nd_castkalocal)    != 0
      ) p,
      ---  zdroj P2  END
      kp_dat_doklad d,
      kp_ktg_spolecnost ks,
      kp_ktg_spolecnost_group sg
    WHERE p.id_doklad   = d.ID
    AND (nd_castkamena != 0
    OR nd_castkalocal  != 0)
    AND p.unifprotiid   = ks.ID(+)
    AND ks.ID           = sg.id_spolecnost(+)
    AND d.dt_datum BETWEEN sg.dt_platnostod AND sg.dt_platnostdo
    --and p.cust_group_code = sg.cust_group_code
    UNION
    -----------------------------------------------------------------------------------------------------------------------
    SELECT s_ucet,      nd_castkamena,      nd_castkalocal,      nd_castkacnb,      p.s_mena,      ks.s_ico s_unifproti_ico,      ks.s_nazev s_unifproti,      id_doklad,
      NULL s_listgroup,
      NULL s_listgroupcode,
      p.s_popis,      --DECODE (LENGTH (NVL (ks.s_ico, '.')),                           0, 1,                           ks.kategoriekoef                          ) nd_kategorie_koef,
      CASE
        WHEN p.kategoriekoef IS NOT NULL
        THEN p.kategoriekoef
        ELSE ks.kategoriekoef
      END nd_kategorie_koef,
      s_locale,      s_ucetoriginal,      ks.ID id_unifproti ,
      p.c_banka --v03 2011
      ,   p.ND_CISTAANGAZOVANOST --v03 2011
    FROM      ---
      (  -- zdroj P3 kp_dat_dokladzdrojdatagregace   START
      SELECT a.s_ucet,        SUM (a.nd_castkamena) nd_castkamena,        SUM (a.nd_castkalocal) nd_castkalocal,        a.s_mena,        a.id_ktgspolecnost unifprotiid,
        SUM (a.nd_castkacnb) nd_castkacnb,
        CASE
          WHEN a.ID_MANUALTEXT IS NOT NULL
          THEN
            (SELECT s_text FROM db_dsa.KP_S_MANUALTEXT mt WHERE mt.id = a.ID_MANUALTEXT
            )
          ELSE f_getucetunifpopisucet (a.s_ucet, l.s_locale)
        END s_popis,
        a.id_doklad,        l.s_locale,        a.s_ucetoriginal ,        a.kategoriekoef ,        a.cust_group_code ,
        a.c_banka --v03 2011
        , a.ND_CISTAANGAZOVANOST --v03 2011
      FROM kp_dat_dokladzdrojdatagregace a,        cis_locale l
      WHERE a.c_uverovapozice = '1'
      GROUP BY a.id_doklad,        a.s_ucet,        a.s_mena,        a.id_ktgspolecnost,        l.s_locale,        a.s_ucetoriginal,        a.ID_MANUALTEXT ,        a.kategoriekoef ,
        a.cust_group_code ,        a.c_banka --v03 2011
        ,  a.ND_CISTAANGAZOVANOST --v03 2011
      HAVING SUM (a.nd_castkamena) != 0
      OR SUM (a.nd_castkalocal)    != 0
      ) p, ---  zdroj P3 END
      kp_dat_doklad d,
      kp_ktg_spolecnost ks
    WHERE p.id_doklad   = d.ID
    AND (nd_castkamena != 0
    OR nd_castkalocal  != 0)
    AND p.unifprotiid   = ks.ID(+)
    AND NOT EXISTS  (SELECT NULL  FROM kp_ktg_spolecnost_group sg   WHERE ks.ID = sg.id_spolecnost  AND d.dt_datum BETWEEN sg.dt_platnostod AND sg.dt_platnostdo   )
    ) pp
    --where s_ucet not like '2140%'        and s_ucet not like '34100%';;
;


PROMPT Completed VW_KP_DOKLADUVEROVAPOZICE.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADUVEROVAPOZICE2.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADUVEROVAPOZICE2.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADUVEROVAPOZICE2
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADUVEROVAPOZICE2" ("S_UCET", "ND_CASTKAMENA", "ND_CASTKALOCAL", "ND_CASTKACNB", "S_MENA", "S_UNIFPROTI_ICO", "S_UNIFPROTI", "ID_DOKLAD", "S_LISTGROUP", "S_LISTGROUPCODE", "S_POPIS", "ND_KATEGORIE_KOEF", "S_LOCALE", "S_UCETUNIF", "ID_UNIFPROTI", "S_POPISORIGINAL", "C_BANKA", "ND_CISTAANGAZOVANOST") AS 
  SELECT s_ucet,
    nd_castkamena,
    nd_castkalocal,
    nd_castkacnb,
    s_mena,
    s_unifproti_ico,
    s_unifproti,
    id_doklad,
    s_listgroup,
    s_listgroupcode,
    s_popis,
    nd_kategorie_koef,
    s_locale,
    s_ucetoriginal,
    id_unifproti,
    (SELECT UP.s_popis
    FROM kp_cis_ucetprimarni UP,
      kp_dat_doklad d,
      kp_ktg_ucetnispolecnost us
    WHERE d.ID                   = pp.id_doklad
    AND d.id_ktgucetnispolecnost = us.ID
    AND UP.s_ucet                = pp.s_ucetoriginal
    AND UP.id_cisdatabaze        = d.id_cisdatabaze
    AND UP.c_typ                 = us.c_feis_ucettyp
    ) s_popisoriginal ,
    pp.c_banka --v03 2011
    ,
    pp.ND_CISTAANGAZOVANOST --v03 2011
  FROM
    (
    --
    -- v2010
    SELECT s_ucet,
      nd_castkamena,
      nd_castkalocal,
      nd_castkacnb,
      p.s_mena,
      ks.s_ico s_unifproti_ico,
      ks.s_nazev s_unifproti,
      id_doklad,
      DECODE (sg.cust_group_name, NULL, NULL, SUBSTR (sg.cust_group_name, 1, 255)
      || ' ('
      || SUBSTR (sg.cust_group_code, 1, 255)
      || ')' ) s_listgroup,
      SUBSTR (sg.cust_group_code, 1, 512) s_listgroupcode,
      p.s_popis,
      --v2
      CASE
        WHEN p.kategoriekoef IS NOT NULL
        THEN p.kategoriekoef
        ELSE ks.kategoriekoef
      END nd_kategorie_koef,
      s_locale,
      s_ucetoriginal,
      ks.ID id_unifproti ,
      c_banka --v03 2011
      ,
      ND_CISTAANGAZOVANOST --v03 2011
    FROM
      ---
      (
      SELECT a.s_ucet,
        SUM (a.nd_castkamena) nd_castkamena,
        SUM (a.nd_castkalocal) nd_castkalocal,
        a.s_mena,
        a.id_ktgspolecnost unifprotiid,
        SUM (a.nd_castkacnb) nd_castkacnb,
        CASE
          WHEN a.ID_MANUALTEXT IS NOT NULL
          THEN
            (SELECT s_text FROM db_dsa.KP_S_MANUALTEXT mt WHERE mt.id = a.ID_MANUALTEXT
            )
          ELSE f_getucetunifpopisucet (a.s_ucet, l.s_locale)
        END s_popis,
        a.id_doklad,
        l.s_locale,
        a.s_ucetoriginal ,
        a.kategoriekoef --esc
        ,
        a.cust_group_code --v2010
        ,
        a.c_banka --v03 2011
        ,
        a.ND_CISTAANGAZOVANOST --v03 2011
      FROM kp_dat_dokladzdrojdatagregace a,
        cis_locale l
      WHERE a.c_uverovapozice = '1'
      AND a.cust_group_code  IS NOT NULL --v2010
      GROUP BY a.id_doklad,
        a.s_ucet,
        a.s_mena,
        a.id_ktgspolecnost,
        l.s_locale,
        a.s_ucetoriginal,
        a.ID_MANUALTEXT ,
        a.kategoriekoef ,
        a.cust_group_code ,
        a.c_banka --v03 2011
        ,
        a.ND_CISTAANGAZOVANOST --v03 2011
      HAVING SUM (a.nd_castkamena) != 0
      OR SUM (a.nd_castkalocal)    != 0
      ) P,
      ---
      KP_DAT_DOKLAD D,
      KP_KTG_SPOLECNOST KS,
      KP_KTG_SPOLECNOST_GROUP SG
    WHERE p.id_doklad   = d.ID
    AND (nd_castkamena != 0
    OR nd_castkalocal  != 0)
    AND p.unifprotiid   = ks.ID(+)
    AND ks.ID           = sg.id_spolecnost(+)
    AND d.dt_datum BETWEEN sg.dt_platnostod AND sg.dt_platnostdo
    AND p.cust_group_code = sg.cust_group_code --v2010
    UNION
    --v2010
    --
    SELECT s_ucet,
      nd_castkamena,
      nd_castkalocal,
      nd_castkacnb,
      p.s_mena,
      ks.s_ico s_unifproti_ico,
      ks.s_nazev s_unifproti,
      id_doklad,
      DECODE (sg.cust_group_name, NULL, NULL, SUBSTR (sg.cust_group_name, 1, 255)
      || ' ('
      || SUBSTR (sg.cust_group_code, 1, 255)
      || ')' ) s_listgroup,
      SUBSTR (sg.cust_group_code, 1, 512) s_listgroupcode,
      p.s_popis,
      --v2
      CASE
        WHEN p.kategoriekoef IS NOT NULL
        THEN p.kategoriekoef
        ELSE ks.kategoriekoef
      END nd_kategorie_koef,
      s_locale,
      s_ucetoriginal,
      ks.ID id_unifproti ,
      p.c_banka --v03 2011
      ,
      p.ND_CISTAANGAZOVANOST --v03 2011
    FROM
      ---
      (
      SELECT a.s_ucet,
        SUM (a.nd_castkamena) nd_castkamena,
        SUM (a.nd_castkalocal) nd_castkalocal,
        a.s_mena,
        a.id_ktgspolecnost unifprotiid,
        SUM (a.nd_castkacnb) nd_castkacnb,
        CASE
          WHEN a.ID_MANUALTEXT IS NOT NULL
          THEN
            (SELECT s_text FROM db_dsa.KP_S_MANUALTEXT mt WHERE mt.id = a.ID_MANUALTEXT
            )
          ELSE f_getucetunifpopisucet (a.s_ucet, l.s_locale)
        END s_popis,
        a.id_doklad,
        l.s_locale,
        a.s_ucetoriginal ,
        a.kategoriekoef --esc
        --,         a.cust_group_code
        ,
        a.c_banka --v03 2011
        ,
        a.ND_CISTAANGAZOVANOST --v03 2011
      FROM kp_dat_dokladzdrojdatagregace a,
        cis_locale l
      WHERE a.c_uverovapozice = '1'
      AND a.cust_group_code  IS NULL --v2010
      GROUP BY a.id_doklad,
        a.s_ucet,
        a.s_mena,
        a.id_ktgspolecnost,
        l.s_locale,
        a.s_ucetoriginal,
        a.ID_MANUALTEXT ,
        a.kategoriekoef
        --, a.cust_group_code
        ,
        a.c_banka --v03 2011
        ,
        a.ND_CISTAANGAZOVANOST --v03 2011
      HAVING SUM (a.nd_castkamena) != 0
      OR SUM (a.nd_castkalocal)    != 0
      ) p,
      ---
      kp_dat_doklad d,
      kp_ktg_spolecnost ks,
      kp_ktg_spolecnost_group sg
    WHERE p.id_doklad   = d.ID
    AND (nd_castkamena != 0
    OR nd_castkalocal  != 0)
    AND p.unifprotiid   = ks.ID(+)
    AND ks.ID           = sg.id_spolecnost(+)
    AND d.dt_datum BETWEEN sg.dt_platnostod AND sg.dt_platnostdo
    --and p.cust_group_code = sg.cust_group_code
    UNION
    --
    SELECT s_ucet,
      nd_castkamena,
      nd_castkalocal,
      nd_castkacnb,
      p.s_mena,
      ks.s_ico s_unifproti_ico,
      ks.s_nazev s_unifproti,
      id_doklad,
      NULL s_listgroup,
      NULL s_listgroupcode,
      p.s_popis,
      --DECODE (LENGTH (NVL (ks.s_ico, '.')),                           0, 1,                           ks.kategoriekoef                          ) nd_kategorie_koef,
      CASE
        WHEN p.kategoriekoef IS NOT NULL
        THEN p.kategoriekoef
        ELSE ks.kategoriekoef
      END nd_kategorie_koef,
      s_locale,
      s_ucetoriginal,
      ks.ID id_unifproti ,
      p.c_banka --v03 2011
      ,
      p.ND_CISTAANGAZOVANOST --v03 2011
    FROM
      ---
      (
      SELECT a.s_ucet,
        SUM (a.nd_castkamena) nd_castkamena,
        SUM (a.nd_castkalocal) nd_castkalocal,
        a.s_mena,
        a.id_ktgspolecnost unifprotiid,
        SUM (a.nd_castkacnb) nd_castkacnb,
        CASE
          WHEN a.ID_MANUALTEXT IS NOT NULL
          THEN
            (SELECT s_text FROM db_dsa.KP_S_MANUALTEXT mt WHERE mt.id = a.ID_MANUALTEXT
            )
          ELSE f_getucetunifpopisucet (a.s_ucet, l.s_locale)
        END s_popis,
        a.id_doklad,
        l.s_locale,
        a.s_ucetoriginal ,
        a.kategoriekoef ,
        a.cust_group_code ,
        a.c_banka --v03 2011
        ,
        a.ND_CISTAANGAZOVANOST --v03 2011
      FROM kp_dat_dokladzdrojdatagregace a,
        cis_locale l
      WHERE a.c_uverovapozice = '1'
      GROUP BY a.id_doklad,
        a.s_ucet,
        a.s_mena,
        a.id_ktgspolecnost,
        l.s_locale,
        a.s_ucetoriginal,
        a.ID_MANUALTEXT ,
        a.kategoriekoef ,
        a.cust_group_code ,
        a.c_banka --v03 2011
        ,
        a.ND_CISTAANGAZOVANOST --v03 2011
      HAVING SUM (a.nd_castkamena) != 0
      OR SUM (a.nd_castkalocal)    != 0
      ) p,
      kp_dat_doklad d,
      kp_ktg_spolecnost ks
    WHERE p.id_doklad   = d.ID
    AND (nd_castkamena != 0
    OR nd_castkalocal  != 0)
    AND p.unifprotiid   = ks.ID(+)
    AND NOT EXISTS
      (SELECT NULL
      FROM kp_ktg_spolecnost_group sg
      WHERE ks.ID = sg.id_spolecnost
      AND d.dt_datum BETWEEN sg.dt_platnostod AND sg.dt_platnostdo
      )
    ) pp
--    where s_ucet != '3510010'
;


PROMPT Completed VW_KP_DOKLADUVEROVAPOZICE2.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADUVEROVAPOZICE_BCK.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADUVEROVAPOZICE_BCK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADUVEROVAPOZICE_BCK
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADUVEROVAPOZICE_BCK" ("S_UCET", "ND_CASTKAMENA", "ND_CASTKALOCAL", "ND_CASTKACNB", "S_MENA", "S_UNIFPROTI_ICO", "S_UNIFPROTI", "ID_DOKLAD", "S_LISTGROUP", "S_LISTGROUPCODE", "S_POPIS", "ND_KATEGORIE_KOEF", "S_LOCALE", "S_UCETUNIF", "ID_UNIFPROTI", "S_POPISORIGINAL") AS 
  select "S_UCET","ND_CASTKAMENA","ND_CASTKALOCAL","ND_CASTKACNB","S_MENA","S_UNIFPROTI_ICO","S_UNIFPROTI","ID_DOKLAD","S_LISTGROUP","S_LISTGROUPCODE","S_POPIS","ND_KATEGORIE_KOEF","S_LOCALE","S_UCETUNIF","ID_UNIFPROTI","S_POPISORIGINAL" from VW_KP_DOKLADUVEROVAPOZICE
;


PROMPT Completed VW_KP_DOKLADUVEROVAPOZICE_BCK.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADUVEROVAPOZICE_NEW.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADUVEROVAPOZICE_NEW.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADUVEROVAPOZICE_NEW
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADUVEROVAPOZICE_NEW" ("S_UCET", "ND_CASTKAMENA", "ND_CASTKALOCAL", "ND_CASTKACNB", "S_MENA", "S_UNIFPROTI_ICO", "S_UNIFPROTI", "ID_DOKLAD", "S_LISTGROUP", "S_LISTGROUPCODE", "S_POPIS", "ND_KATEGORIE_KOEF", "S_LOCALE", "S_UCETUNIF", "ID_UNIFPROTI", "S_POPISORIGINAL") AS 
  SELECT s_ucet,
    nd_castkamena,
    nd_castkalocal,
    nd_castkacnb,
    s_mena,
    s_unifproti_ico,
    s_unifproti,
    id_doklad,
    s_listgroup,
    s_listgroupcode,
    s_popis,
    nd_kategorie_koef,
    s_locale,
    s_ucetoriginal,
    id_unifproti,
    (SELECT UP.s_popis
    FROM kp_cis_ucetprimarni UP,
      kp_dat_doklad d,
      kp_ktg_ucetnispolecnost us
    WHERE d.ID                   = pp.id_doklad
    AND d.id_ktgucetnispolecnost = us.ID
    AND UP.s_ucet                = pp.s_ucetoriginal
    AND UP.id_cisdatabaze        = d.id_cisdatabaze
    AND UP.c_typ                 = us.c_feis_ucettyp
    ) s_popisoriginal
  FROM
    (SELECT s_ucet,
      nd_castkamena,
      nd_castkalocal,
      nd_castkacnb,
      p.s_mena,
      ks.s_ico s_unifproti_ico,
      ks.s_nazev s_unifproti,
      id_doklad,
      DECODE (sg.cust_group_name, NULL, NULL, SUBSTR (sg.cust_group_name, 1, 255)
      || ' ('
      || SUBSTR (sg.cust_group_code, 1, 255)
      || ')' ) s_listgroup,
      SUBSTR (sg.cust_group_code, 1, 512) s_listgroupcode,
      p.s_popis,
      --v2
      CASE
        WHEN p.kategoriekoef IS NOT NULL
        THEN p.kategoriekoef
        ELSE ks.kategoriekoef
      END nd_kategorie_koef,
      s_locale,
      s_ucetoriginal,
      ks.ID id_unifproti
    FROM
      (SELECT a.s_ucet,
        SUM (a.nd_castkamena) nd_castkamena,
        SUM (a.nd_castkalocal) nd_castkalocal,
        a.s_mena,
        a.id_ktgspolecnost unifprotiid,
        SUM (a.nd_castkacnb) nd_castkacnb,
        CASE
          WHEN a.ID_MANUALTEXT IS NOT NULL
          THEN
            (SELECT s_text FROM db_dsa.KP_S_MANUALTEXT mt WHERE mt.id = a.ID_MANUALTEXT
            )
          ELSE f_getucetunifpopisucet (a.s_ucet, l.s_locale)
        END s_popis,
        a.id_doklad,
        l.s_locale,
        a.s_ucetoriginal ,
        a.kategoriekoef --esc
        ,
        a.cust_group_code
      FROM kp_dat_dokladzdrojdatagregace a,
        cis_locale l
      WHERE a.c_uverovapozice = '1'
      GROUP BY a.id_doklad,
        a.s_ucet,
        a.s_mena,
        a.id_ktgspolecnost,
        l.s_locale,
        a.s_ucetoriginal,
        a.ID_MANUALTEXT ,
        a.kategoriekoef ,
        a.cust_group_code
      HAVING SUM (a.nd_castkamena) != 0
      OR SUM (a.nd_castkalocal)    != 0
      ) p,
      kp_dat_doklad d,
      kp_ktg_spolecnost ks,
      kp_ktg_spolecnost_group sg
    WHERE p.id_doklad   = d.ID
    AND (nd_castkamena != 0
    OR nd_castkalocal  != 0)
    AND p.unifprotiid   = ks.ID(+)
    AND ks.ID           = sg.id_spolecnost(+)
    AND d.dt_datum BETWEEN sg.dt_platnostod AND sg.dt_platnostdo
    --and p.cust_group_code = sg.cust_group_code
    UNION
    SELECT s_ucet,
      nd_castkamena,
      nd_castkalocal,
      nd_castkacnb,
      p.s_mena,
      ks.s_ico s_unifproti_ico,
      ks.s_nazev s_unifproti,
      id_doklad,
      NULL s_listgroup,
      NULL s_listgroupcode,
      p.s_popis,
      --DECODE (LENGTH (NVL (ks.s_ico, '.')),                           0, 1,                           ks.kategoriekoef                          ) nd_kategorie_koef,
      CASE
        WHEN p.kategoriekoef IS NOT NULL
        THEN p.kategoriekoef
        ELSE ks.kategoriekoef
      END nd_kategorie_koef,
      s_locale,
      s_ucetoriginal,
      ks.ID id_unifproti
    FROM
      (SELECT a.s_ucet,
        SUM (a.nd_castkamena) nd_castkamena,
        SUM (a.nd_castkalocal) nd_castkalocal,
        a.s_mena,
        a.id_ktgspolecnost unifprotiid,
        SUM (a.nd_castkacnb) nd_castkacnb,
        CASE
          WHEN a.ID_MANUALTEXT IS NOT NULL
          THEN
            (SELECT s_text FROM db_dsa.KP_S_MANUALTEXT mt WHERE mt.id = a.ID_MANUALTEXT
            )
          ELSE f_getucetunifpopisucet (a.s_ucet, l.s_locale)
        END s_popis,
        a.id_doklad,
        l.s_locale,
        a.s_ucetoriginal ,
        a.kategoriekoef ,
        a.cust_group_code
      FROM kp_dat_dokladzdrojdatagregace a,
        cis_locale l
      WHERE a.c_uverovapozice = '1'
      GROUP BY a.id_doklad,
        a.s_ucet,
        a.s_mena,
        a.id_ktgspolecnost,
        l.s_locale,
        a.s_ucetoriginal,
        a.ID_MANUALTEXT ,
        a.kategoriekoef ,
        a.cust_group_code
      HAVING SUM (a.nd_castkamena) != 0
      OR SUM (a.nd_castkalocal)    != 0
      ) p,
      kp_dat_doklad d,
      kp_ktg_spolecnost ks
    WHERE p.id_doklad   = d.ID
    AND (nd_castkamena != 0
    OR nd_castkalocal  != 0)
    AND p.unifprotiid   = ks.ID(+)
    AND NOT EXISTS
      (SELECT NULL
      FROM kp_ktg_spolecnost_group sg
      WHERE ks.ID = sg.id_spolecnost
      AND d.dt_datum BETWEEN sg.dt_platnostod AND sg.dt_platnostdo
      )
    ) pp
;


PROMPT Completed VW_KP_DOKLADUVEROVAPOZICE_NEW.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADVAZBAUSERINDEX.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADVAZBAUSERINDEX.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADVAZBAUSERINDEX
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADVAZBAUSERINDEX" ("ID_DOKLAD", "ID_KTGUCETNISKUPINA", "ID_KTGUCETNISPOLECNOSTFROM", "ID_KTGUCETNISPOLECNOSTTO", "ND_SUMLOCAL", "ND_SUMMENA") AS 
  select dv1.ID_DOKLAD, 
       dv1.ID_KTGUCETNISKUPINA, 
	   dv1.ID_KTGUCETNISPOLECNOSTFROM, 
	   dv1.ID_KTGUCETNISPOLECNOSTTO, 
	   abs(sum(dv1.ND_CASTKALOCAL)) nd_sumlocal, 
	   abs(sum(dv1.ND_CASTKAMENA)) nd_summena 
from kp_dat_dokladVazby dv1, 
	 kp_dat_doklad d 
where dv1.ID_DOKLAD = d.ID 
  and dv1.ID_KTGUCETNISPOLECNOSTFROM = d.ID_KTGUCETNISPOLECNOST 
  and dv1.NL_USERINDEXVAZBA > 0 
group by dv1.ID_DOKLAD, dv1.ID_KTGUCETNISKUPINA, dv1.ID_KTGUCETNISPOLECNOSTFROM, dv1.ID_KTGUCETNISPOLECNOSTTO 
union 
select dv1.ID_DOKLAD, 
       dv1.ID_KTGUCETNISKUPINA, 
	   dv1.ID_KTGUCETNISPOLECNOSTFROM, 
	   dv1.ID_KTGUCETNISPOLECNOSTTO, 
	   abs(sum(dv1.ND_CASTKALOCAL)) c_local, 
	   abs(sum(dv1.ND_CASTKAMENA)) c_mena 
from kp_dat_dokladVazby dv1, 
	 kp_dat_doklad d 
where dv1.ID_DOKLAD = d.ID 
  and dv1.ID_KTGUCETNISPOLECNOSTTO = d.ID_KTGUCETNISPOLECNOST 
  and dv1.NL_USERINDEXVAZBA > 0 
group by dv1.ID_DOKLAD, dv1.ID_KTGUCETNISKUPINA, dv1.ID_KTGUCETNISPOLECNOSTFROM, dv1.ID_KTGUCETNISPOLECNOSTTO

;


PROMPT Completed VW_KP_DOKLADVAZBAUSERINDEX.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADVAZBYNEVYPAROVANE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADVAZBYNEVYPAROVANE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADVAZBYNEVYPAROVANE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADVAZBYNEVYPAROVANE" ("ID", "ID_PAR", "ID_DOKLAD", "ID_KTGUCETNISKUPINA", "ID_KTGUCETNISPOLECNOSTFROM", "ID_KTGUCETNISPOLECNOSTTO", "S_POPIS", "S_MENA", "S_UCET", "ND_CASTKAMENA", "ND_CASTKALOCAL", "ND_CASTKAVYPAROVAT", "NL_PORADILIST", "NL_RADEK", "ND_CASTKAMENAORIGINAL", "ND_CASTKALOCALORIGINAL", "S_LOCALE", "NL_USERINDEXVAZBA", "S_UCTYORIGINAL", "C_POCITATVAZBY") AS 
  SELECT v1.ID, v1.id_par, v1.id_doklad, v1.id_ktgucetniskupina, 
          v1.id_ktgucetnispolecnostfrom, v1.id_ktgucetnispolecnostto, 
          --f_getradektext (v1.id_cisradektext, l.s_locale) s_popis, 
          --f_getucetunifpopisucet (v1.s_ucet, l.s_locale) s_popis, 
		  (SELECT UP.s_popis 
           FROM kp_cis_ucetprimarni UP, 
                kp_ktg_ucetnispolecnost us 
           WHERE v1.id_ktgucetnispolecnostfrom = us.ID 
             AND v1.s_ucet = UP.s_ucet 
             AND UP.id_cisdatabaze = us.id_cisdatabaze 
             AND UP.c_typ = us.c_feis_ucettyp), 
		  v1.s_mena, 
          v1.s_ucet, v1.nd_castkamena, v1.nd_castkalocal, 
          v1.nd_castkavyparovat, v1.nl_poradilist, v1.nl_radek, 
          v1.nd_castkamenaoriginal, v1.nd_castkalocaloriginal, l.s_locale, 
          v1.nl_userindexvazba, 
          (SELECT s_ucet 
             FROM kp_cis_ucetUnif 
            WHERE id = v1.id_cisUcetUnif) s_uctyoriginal, 
          (SELECT c_pocitatVazby 
             FROM kp_cis_ucetUnif 
            WHERE id = v1.id_cisUcetUnif) c_pocitatVazby 
     FROM kp_dat_dokladvazby v1, cis_locale l 
    WHERE (   v1.id_par IS NULL 
           OR v1.id_par <= 0 
           OR NVL (v1.nl_userindexvazba, 0) <> 0 
          )

;


PROMPT Completed VW_KP_DOKLADVAZBYNEVYPAROVANE.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADVAZBYPREHLED.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADVAZBYPREHLED.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADVAZBYPREHLED
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADVAZBYPREHLED" ("ID_DOKLAD", "ID_KTGUCETNISKUPINA", "ID_KTGUCETNISPOLECNOSTFROM", "UCETNISPOLECNOSTFROM", "ID_KTGUCETNISPOLECNOSTTO", "UCETNISPOLECNOSTTO", "STATUS") AS 
  SELECT   v.id_doklad, v.id_ktgucetniskupina, v.id_ktgucetnispolecnostfrom, 
            (SELECT    s.s_nazev 
                    || DECODE 
                             (s.c_online, 
                              '1', '', 
                              ' <span style=''color: red''>NE ON-LINE!</span>' 
                             ) 
               FROM kp_ktg_ucetnispolecnost s 
              WHERE s.ID = v.id_ktgucetnispolecnostfrom) ucetnispolecnostfrom, 
            v.id_ktgucetnispolecnostto, 
            (SELECT    s.s_nazev 
                    || DECODE 
                             (s.c_online, 
                              '1', '', 
                              ' <span style=''color: red''>NE ON-LINE!</span>' 
                             ) 
               FROM kp_ktg_ucetnispolecnost s 
              WHERE s.ID = v.id_ktgucetnispolecnostto) ucetnispolecnostto, 
            MIN (v.status) status 
       FROM (SELECT   v1.id_doklad, v1.id_ktgucetniskupina, 
                      v1.id_ktgucetnispolecnostfrom, 
                      v1.id_ktgucetnispolecnostto, 1 status 
                 FROM kp_dat_dokladvazby v1 
                WHERE v1.id_par IS NOT NULL 
                   OR NVL (v1.nl_userindexvazba, 0) <> 0 
                   OR v1.nd_castkalocal = 0 AND v1.nd_castkamena = 0 
             GROUP BY v1.id_doklad, 
                      v1.id_ktgucetniskupina, 
                      v1.id_ktgucetnispolecnostfrom, 
                      v1.id_ktgucetnispolecnostto 
             UNION 
             SELECT   v1.id_doklad, v1.id_ktgucetniskupina, 
                      v1.id_ktgucetnispolecnostfrom, 
                      v1.id_ktgucetnispolecnostto, -1 status 
                 FROM kp_dat_dokladvazby v1 
                WHERE v1.id_par IS NULL 
                  AND NVL (v1.nl_userindexvazba, 0) = 0 
                  AND (v1.nd_castkalocal <> 0 OR v1.nd_castkamena <> 0) 
             GROUP BY v1.id_doklad, 
                      v1.id_ktgucetniskupina, 
                      v1.id_ktgucetnispolecnostfrom, 
                      v1.id_ktgucetnispolecnostto 
             UNION 
             SELECT   v1.id_doklad, v1.id_ktgucetniskupina, 
                      v1.id_ktgucetnispolecnostto, 
                      v1.id_ktgucetnispolecnostfrom, 1 status 
                 FROM kp_dat_dokladvazby v1 
                WHERE v1.id_par IS NOT NULL 
                   OR NVL (v1.nl_userindexvazba, 0) <> 0 
                   OR v1.nd_castkalocal = 0 AND v1.nd_castkamena = 0 
             GROUP BY v1.id_doklad, 
                      v1.id_ktgucetniskupina, 
                      v1.id_ktgucetnispolecnostfrom, 
                      v1.id_ktgucetnispolecnostto 
             UNION 
             SELECT   v1.id_doklad, v1.id_ktgucetniskupina, 
                      v1.id_ktgucetnispolecnostto, 
                      v1.id_ktgucetnispolecnostfrom, -1 status 
                 FROM kp_dat_dokladvazby v1 
                WHERE v1.id_par IS NULL 
                  AND NVL (v1.nl_userindexvazba, 0) <> 0 
                  AND (v1.nd_castkalocal <> 0 OR v1.nd_castkamena <> 0) 
             GROUP BY v1.id_doklad, 
                      v1.id_ktgucetniskupina, 
                      v1.id_ktgucetnispolecnostfrom, 
                      v1.id_ktgucetnispolecnostto) v 
   GROUP BY v.id_doklad, 
            v.id_ktgucetniskupina, 
            v.id_ktgucetnispolecnostfrom, 
            v.id_ktgucetnispolecnostto

;


PROMPT Completed VW_KP_DOKLADVAZBYPREHLED.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADVAZBYVYPAROVANE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADVAZBYVYPAROVANE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADVAZBYVYPAROVANE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADVAZBYVYPAROVANE" ("ID", "ID_DOKLAD", "ID_KTGUCETNISKUPINA", "ID_KTGUCETNISPOLECNOSTFROM", "ID_KTGUCETNISPOLECNOSTTO", "S_POPIS", "S_MENA", "S_UCET", "ND_CASTKAMENA", "ND_CASTKALOCAL", "ND_CASTKAVYPAROVAT", "NL_PORADILIST", "NL_RADEK", "ND_CASTKAMENAORIGINAL", "ND_CASTKALOCALORIGINAL", "PAR_IDKTGUCETNISPOLECNOSTFROM", "PAR_IDKTGUCETNISPOLECNOSTTO", "PAR_S_POPIS", "PAR_S_MENA", "PAR_S_UCET", "PAR_ND_CASTKAMENA", "PAR_ND_CASTKALOCAL", "PAR_ND_CASTKAVYPAROVAT", "PAR_NL_PORADILIST", "PAR_NL_RADEK", "PAR_ND_CASTKAMENAORIGINAL", "PAR_ND_CASTKALOCALORIGINAL", "S_LOCALE", "ID_PAR_1", "ID_PAR_2", "NL_USERINDEXVAZBA_1", "NL_USERINDEXVAZBA_2", "S_UCTYORIGINAL_1", "S_UCTYORIGINAL_2", "C_POCITATVAZBY_1", "C_POCITATVAZBY_2") AS 
  SELECT v1.ID, v1.id_doklad, v1.id_ktgucetniskupina, 
          v1.id_ktgucetnispolecnostfrom, v1.id_ktgucetnispolecnostto, 
/*    case 
            when v1.id_ktgUcetniSpolecnostFrom = v2.id_ktgUcetniSpolecnostFrom then 
             v1.id_ktgUcetniSpolecnostTo 
         else 
              v1.id_ktgUcetniSpolecnostFrom 
      end id_ktgUcetniSpolecnostFrom, 
      case 
            when v1.id_ktgUcetniSpolecnostFrom = v2.id_ktgUcetniSpolecnostFrom then 
             v1.id_ktgUcetniSpolecnostFrom 
         else 
              v1.id_ktgUcetniSpolecnostTo 
      end id_ktgUcetniSpolecnostTo, 
*/        --f_getradektext (v1.id_cisradektext, l.s_locale) s_popis, 
          --f_getucetunifpopisucet (v1.s_ucet, l.s_locale) s_popis, 
  		  (SELECT UP.s_popis 
           FROM kp_cis_ucetprimarni UP, 
                kp_ktg_ucetnispolecnost us 
           WHERE v1.id_ktgucetnispolecnostfrom = us.ID 
             AND v1.s_ucet = UP.s_ucet 
             AND UP.id_cisdatabaze = us.id_cisdatabaze 
             AND UP.c_typ = us.c_feis_ucettyp), 
		  v1.s_mena, 
          v1.s_ucet, v1.nd_castkamena, v1.nd_castkalocal, 
          v1.nd_castkavyparovat, v1.nl_poradilist, v1.nl_radek, 
          v1.nd_castkamenaoriginal, v1.nd_castkalocaloriginal, 
          v2.id_ktgucetnispolecnostfrom par_idktgucetnispolecnostfrom, 
          v2.id_ktgucetnispolecnostto par_idktgucetnispolecnostto, 
          --f_getradektext (v2.id_cisradektext, l.s_locale) par_s_popis, 
          --f_getucetunifpopisucet (v2.s_ucet, l.s_locale) par_s_popis, 
  		  (SELECT UP.s_popis 
           FROM kp_cis_ucetprimarni UP, 
                kp_ktg_ucetnispolecnost us 
           WHERE v1.id_ktgucetnispolecnostto = us.ID 
             AND v2.s_ucet = UP.s_ucet 
             AND UP.id_cisdatabaze = us.id_cisdatabaze 
             AND UP.c_typ = us.c_feis_ucettyp), 
          v2.s_mena par_s_mena, v2.s_ucet par_s_ucet, 
          DECODE (SIGN (NVL (v1.nl_userindexvazba, 1)), 
                  -1, 0, 
                  v2.nd_castkamena 
                 ) par_nd_castkamena, 
          DECODE (SIGN (NVL (v1.nl_userindexvazba, 1)), 
                  -1, 0, 
                  v2.nd_castkalocal 
                 ) par_nd_castkalocal, 
          DECODE (SIGN (NVL (v1.nl_userindexvazba, 1)), 
                  -1, 0, 
                  v2.nd_castkavyparovat 
                 ) par_nd_castkavyparovat, 
          v2.nl_poradilist par_nl_poradilist, v2.nl_radek par_nl_radek, 
          DECODE (SIGN (NVL (v1.nl_userindexvazba, 1)), 
                  -1, 0, 
                  v2.nd_castkamenaoriginal 
                 ), 
          DECODE (SIGN (NVL (v1.nl_userindexvazba, 1)), 
                  -1, 0, 
                  v2.nd_castkalocaloriginal 
                 ), 
          l.s_locale, v1.id_par, v2.id_par, v1.nl_userindexvazba, 
          v2.nl_userindexvazba, 
          (SELECT s_ucet 
             FROM kp_cis_ucetUnif 
            WHERE id = v1.id_cisUcetUnif) s_uctyoriginal_1, 
          (SELECT s_ucet 
             FROM kp_cis_ucetUnif 
            WHERE id = v2.id_cisUcetUnif) s_uctyoriginal_2, 
          (SELECT c_pocitatVazby 
             FROM kp_cis_ucetUnif 
            WHERE id = v1.id_cisUcetUnif) c_pocitatVazby_1, 
          (SELECT c_pocitatVazby 
             FROM kp_cis_ucetUnif 
            WHERE id = v2.id_cisUcetUnif) c_pocitatVazby_2 
     FROM kp_dat_dokladvazby v1, kp_dat_dokladvazby v2, cis_locale l 
    WHERE v1.id_doklad = v2.id_doklad 
      AND v2.ID = v1.id_par 
      AND NVL (v1.nl_userindexvazba, 0) >= 0 
   UNION ALL 
-- leva strana sama mezi sebou 
   SELECT v1.ID, v1.id_doklad, v1.id_ktgucetniskupina, 
          v1.id_ktgucetnispolecnostfrom, v1.id_ktgucetnispolecnostto, 
          --'L-' || f_getradektext (v1.id_cisradektext, l.s_locale) s_popis, 
          --'L-' || f_getucetunifpopisucet (v1.s_ucet, l.s_locale) s_popis, 
  		  (SELECT 'L-'||UP.s_popis 
           FROM kp_cis_ucetprimarni UP, 
                kp_ktg_ucetnispolecnost us 
           WHERE v1.id_ktgucetnispolecnostfrom = us.ID 
             AND v1.s_ucet = UP.s_ucet 
             AND UP.id_cisdatabaze = us.id_cisdatabaze 
             AND UP.c_typ = us.c_feis_ucettyp), 
          v1.s_mena, v1.s_ucet, v1.nd_castkamena, v1.nd_castkalocal, 
          v1.nd_castkavyparovat, v1.nl_poradilist, v1.nl_radek, 
          v1.nd_castkamenaoriginal, v1.nd_castkalocaloriginal, 
          v2.id_ktgucetnispolecnostfrom par_idktgucetnispolecnostfrom, 
          v2.id_ktgucetnispolecnostto par_idktgucetnispolecnostto, 
          --f_getradektext (v2.id_cisradektext, l.s_locale) par_s_popis, 
          --f_getucetunifpopisucet (v2.s_ucet, l.s_locale) par_s_popis, 
  		  (SELECT UP.s_popis 
           FROM kp_cis_ucetprimarni UP, 
                kp_ktg_ucetnispolecnost us 
           WHERE v1.id_ktgucetnispolecnostto = us.ID 
             AND v2.s_ucet = UP.s_ucet 
             AND UP.id_cisdatabaze = us.id_cisdatabaze 
             AND UP.c_typ = us.c_feis_ucettyp), 
          v2.s_mena par_s_mena, v2.s_ucet par_s_ucet, 0, 0, 0, 
          v2.nl_poradilist par_nl_poradilist, v2.nl_radek par_nl_radek, 0, 0, 
          l.s_locale, v1.id_par, v2.id_par, v1.nl_userindexvazba, 
          v2.nl_userindexvazba, 
          (SELECT s_ucet 
             FROM kp_cis_ucetUnif 
            WHERE id = v1.id_cisUcetUnif) s_uctyoriginal_1, 
          (SELECT s_ucet 
             FROM kp_cis_ucetUnif 
            WHERE id = v2.id_cisUcetUnif) s_uctyoriginal_2, 
          (SELECT c_pocitatVazby 
             FROM kp_cis_ucetUnif 
            WHERE id = v1.id_cisUcetUnif) c_pocitatVazby_1, 
          (SELECT c_pocitatVazby 
             FROM kp_cis_ucetUnif 
            WHERE id = v2.id_cisUcetUnif) c_pocitatVazby_2 
     FROM kp_dat_dokladvazby v1, 
          kp_dat_dokladvazby v2, 
          kp_dat_doklad d, 
          cis_locale l 
    WHERE v1.nl_userindexvazba < 0 
      AND d.ID = v1.id_doklad 
      AND v1.id_doklad = v2.id_doklad 
      AND v2.ID = v1.id_par 
      AND v1.id_ktgucetnispolecnostfrom = v2.id_ktgucetnispolecnostfrom 
      AND d.id_ktgucetnispolecnost = v1.id_ktgucetnispolecnostfrom 
   UNION ALL 
-- prava strana sama mezi sebou 
   SELECT v1.ID, v1.id_doklad, v1.id_ktgucetniskupina, 
          v1.id_ktgucetnispolecnostto, v1.id_ktgucetnispolecnostfrom, 
          --'P-' || f_getradektext (v1.id_cisradektext, l.s_locale) s_popis, 
          --'P-' || f_getucetunifpopisucet (v1.s_ucet, l.s_locale) s_popis, 
  		  (SELECT 'P-'||UP.s_popis 
           FROM kp_cis_ucetprimarni UP, 
                kp_ktg_ucetnispolecnost us 
           WHERE v1.id_ktgucetnispolecnostfrom = us.ID 
             AND v1.s_ucet = UP.s_ucet 
             AND UP.id_cisdatabaze = us.id_cisdatabaze 
             AND UP.c_typ = us.c_feis_ucettyp), 
          v1.s_mena, v1.s_ucet, 0, 0, 0, v1.nl_poradilist, v1.nl_radek, 0, 0, 
          v2.id_ktgucetnispolecnostfrom, v2.id_ktgucetnispolecnostto, 
          --f_getradektext (v2.id_cisradektext, l.s_locale) par_s_popis, 
          --f_getucetunifpopisucet (v2.s_ucet, l.s_locale) par_s_popis, 
  		  (SELECT UP.s_popis 
           FROM kp_cis_ucetprimarni UP, 
                kp_ktg_ucetnispolecnost us 
           WHERE v1.id_ktgucetnispolecnostto = us.ID 
             AND v2.s_ucet = UP.s_ucet 
             AND UP.id_cisdatabaze = us.id_cisdatabaze 
             AND UP.c_typ = us.c_feis_ucettyp), 
          v2.s_mena par_s_mena, v2.s_ucet par_s_ucet, v2.nd_castkamena, 
          v2.nd_castkalocal, v2.nd_castkavyparovat, 
          v2.nl_poradilist par_nl_poradilist, v2.nl_radek par_nl_radek, 
          v2.nd_castkamenaoriginal, v2.nd_castkalocaloriginal, l.s_locale, 
          v1.id_par, v2.id_par, v1.nl_userindexvazba, v2.nl_userindexvazba, 
          (SELECT s_ucet 
             FROM kp_cis_ucetUnif 
            WHERE id = v1.id_cisUcetUnif) s_uctyoriginal_1, 
          (SELECT s_ucet 
             FROM kp_cis_ucetUnif 
            WHERE id = v2.id_cisUcetUnif) s_uctyoriginal_2, 
          (SELECT c_pocitatVazby 
             FROM kp_cis_ucetUnif 
            WHERE id = v1.id_cisUcetUnif) c_pocitatVazby_1, 
          (SELECT c_pocitatVazby 
             FROM kp_cis_ucetUnif 
            WHERE id = v2.id_cisUcetUnif) c_pocitatVazby_2 
     FROM kp_dat_dokladvazby v1, 
          kp_dat_dokladvazby v2, 
          kp_dat_doklad d, 
          cis_locale l 
    WHERE v1.nl_userindexvazba < 0 
      AND d.ID = v1.id_doklad 
      AND v1.id_doklad = v2.id_doklad 
      AND v2.ID = v1.id_par 
      AND v1.id_ktgucetnispolecnostfrom = v2.id_ktgucetnispolecnostfrom 
      AND d.id_ktgucetnispolecnost = v1.id_ktgucetnispolecnostto

;


PROMPT Completed VW_KP_DOKLADVAZBYVYPAROVANE.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADVVEXCEL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADVVEXCEL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADVVEXCEL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADVVEXCEL" ("IDDOKLAD", "NL_PORADILIST", "NL_RADEK", "ND_CASTKALOCAL") AS 
  select iddoklad, nl_poradiList, nl_radek, sum(nd_zmena)* f_getSignBilanceList(nl_poradiList) nd_castkaLocal
from vw_kp_dokladSubLog
where c_akce = 'V'
group by iddoklad, nl_poradilist, nl_radek
having sum(nd_zmena) != 0
;


PROMPT Completed VW_KP_DOKLADVVEXCEL.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADVZAJEMVAZBY.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADVZAJEMVAZBY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADVZAJEMVAZBY
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADVZAJEMVAZBY" ("S_ZKRATKA", "NL_PORADILIST", "NL_RADEK", "NL_SLOUPEC", "ID", "ID_DOKLAD", "ND_CASTKALOCAL") AS 
  select
	s.s_zkratka, dp.nl_poradiList, dp.nl_radek, dp.nl_sloupec, s.id, r.id_doklad,
	sum(decode ( zd.c_strana, 'D', -1, 1 )*zd.nd_castkalocal) nd_castkaLocal
from
	KP_dat_DokladZdrojDat zd,
	KP_ktg_UcetniSpolecnost s,
	KP_rel_Doklad_ZdrojDat r,
	KP_dat_DokladPolozka dp
where
	zd.id = r.id_dokladZdrojDat and
	zd.id_ktgUcetniSpolecnostUnif = s.id and
	zd.id_dokladPolozka = dp.id and	s.c_rkc = '1'
group by
	s.s_zkratka, dp.nl_poradiList, dp.nl_radek, dp.nl_sloupec, s.id, r.id_doklad
;


PROMPT Completed VW_KP_DOKLADVZAJEMVAZBY.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADZAHLAVI.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADZAHLAVI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADZAHLAVI
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADZAHLAVI" ("DOKLADID", "NL_ERROR", "NL_WARNING", "NL_KROK", "S_MENA", "DT_DATUM", "DOKLADPARENTID", "DT_VYTVORENO", "S_UZIVATEL", "DT_PLATNOSTMUSTEK", "S_UZIVATELMUSTEK", "KTGDOKLADID", "ID_CISDOKLAD", "ID_CISSUBJECT", "S_POPIS", "UCETNISPOLECNOSTID", "SPOLECNOSTNAZEV", "S_SOUBORPREDPONA", "ID_KATEGORIE", "C_RKC", "S_LOCALE", "ID_SUBKONSOLIDACE", "C_BASEDOKLAD", "C_MULTISEGMENT", "S_DBLINK", "TOPAS_ID") AS 
  SELECT d.ID dokladid, d.nl_error, d.nl_warning, d.nl_krok, d.s_mena, 
          d.dt_datum, d.id_parent dokladparentid, d.dt_vytvoreno, 
          d.s_uzivatel, d.dt_platnostmustek, d.s_uzivatelmustek, 
          g.ID ktgdokladid, g.id_cisdoklad, g.id_cissubject, g.s_popis, 
          s.ID ucetnispolecnostid, 
             s.s_nazev 
          || DECODE (s.c_online, NULL, ' - NE ON-LINE', '0', ' - NE ON-LINE') 
                                                              spolecnostnazev, 
          s.s_souborpredpona, s.id_kategorie, s.c_rkc, s.s_locale, 
          CASE 
             WHEN (d.id_subkonsolidace <> d.id_ktgucetnispolecnost 
                  ) 
                THEN d.id_subkonsolidace 
             ELSE NULL 
          END id_subkonsolidace, 
          d.c_basedoklad, s.c_multisegment, 
		  s.S_DBLINK, s.TOPAS_ID 
     FROM kp_dat_doklad d, kp_ktg_doklad g, kp_ktg_ucetnispolecnost s 
    WHERE d.id_ktgucetnispolecnost = s.ID AND d.id_ktgdoklad = g.ID

;


PROMPT Completed VW_KP_DOKLADZAHLAVI.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADZDROJDAT.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADZDROJDAT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADZDROJDAT
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADZDROJDAT" ("ID", "ID_DOKLAD", "ID_DOKLADPOLOZKA", "ID_EXTSYSTEM", "ID_EXTSYSTEM2", "C_EXTSYSTEM", "S_MENA", "C_STRANA", "S_UCET", "ND_CASTKAMENA", "ND_CASTKALOCAL", "S_EXTPROTISTRANA", "S_EXTPROTISTRANA_EO", "S_EXTPROTISTRANA_BANKA", "S_EXTPROTISTRANA_EMITENT", "S_EXTPROTISTRANAICO", "S_EXTPROTISTRANAICO_EO", "S_EXTPROTISTRANAICO_BANKA", "S_EXTPROTISTRANAICO_EMITENT", "S_POPIS", "DATUM", "C_KONTOKORENT", "KID", "DOID", "PLATINST", "EMITENT_ID", "BANKA_ID", "FIRMA_ID", "EO_ID", "NUMBER0", "ID_PROTI_1", "ID_PROTI_2", "ID_PROTI_3", "ID_PROTI_4", "S_EVIDOVATPROTISTRANU", "C_MENOVAPOZICE", "C_UVEROVAPOZICE", "C_VYJIMKAPROTISTRANA", "ID_KTGUCETNISPOLECNOSTUNIF", "POCATECNISTAV", "ID_KTGSPOLECNOST", "ID_KTGPROJEKT", "ID_KTGODBOR", "ID_TYPNASTROJE", "XIDSL", "C_TYPPORTFOLIO", "ID_KTGCENNYPAPIR", "S_FAKTURA", "PC_PROD_KIND", "PC_PROD_TYPE", "ID_EXTSYSTEM3", "S_UCETUNIF", "NL_REL", "C_TYPTRANSAKCE", "ID_CISUCETUNIF") AS 
  SELECT /*+ ORDERED */ 
          z.ID, r.id_doklad, r.id_dokladpolozka, z.id_extsystem, 
          z.id_extsystem2, z.c_extsystem, z.s_mena, z.c_strana, z.s_ucet, 
          z.nd_castkamena, z.nd_castkalocal, z.s_extprotistrana, 
          z.s_extprotistrana_eo, z.s_extprotistrana_banka, 
          z.s_extprotistrana_emitent, z.s_extprotistranaico, 
          z.s_extprotistranaico_eo, z.s_extprotistranaico_banka, 
          z.s_extprotistranaico_emitent, z.s_popis, z.datum, z.c_kontokorent, 
          z.kid, z.doid, z.platinst, z.emitent_id, z.banka_id, z.firma_id, 
          z.eo_id, z.number0, z.id_proti_1, z.id_proti_2, z.id_proti_3, 
          z.id_proti_4, z.s_evidovatprotistranu, z.c_menovapozice, 
          z.c_uverovapozice, z.c_vyjimkaprotistrana, 
          z.id_ktgucetnispolecnostunif, z.pocatecnistav, z.id_ktgspolecnost, 
          z.id_ktgprojekt, z.id_ktgodbor, z.id_typnastroje, z.xidsl, 
          z.c_typportfolio, z.id_ktgcennypapir, z.s_faktura, z.pc_prod_kind, 
          z.pc_prod_type, z.id_extsystem3, z.s_ucetunif, z.nl_rel, 
          z.c_typtransakce, z.ID_CISUCETUNIF 
     FROM kp_rel_doklad_zdrojdat r, kp_dat_dokladzdrojdat z 
    WHERE z.ID = r.id_dokladzdrojdat

;


PROMPT Completed VW_KP_DOKLADZDROJDAT.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADZUSTATKYUCTU.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADZUSTATKYUCTU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADZUSTATKYUCTU
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADZUSTATKYUCTU" ("ID_DOKLAD", "S_UCET", "S_POPIS", "S_MENA", "ND_CASTKALOCAL", "ND_CASTKAMENA", "ND_CASTKACNB", "S_LOCALE", "S_UCETUNIF", "S_POPISORIGINAL") AS 
  SELECT   a.id_doklad, a.s_ucet,
            f_getucetunifpopisucet (a.s_ucet, l.s_locale) s_popis, a.s_mena,
            SUM (a.nd_castkalocal) nd_castkalocal,
            SUM (a.nd_castkamena) nd_castkamena,
            SUM (a.nd_castkacnb) nd_castkacnb, l.s_locale, a.s_ucetoriginal,
            (SELECT UP.s_popis
               FROM kp_cis_ucetprimarni UP,
                    kp_dat_doklad d,
                    kp_ktg_ucetniSpolecnost us
              WHERE d.ID = a.id_doklad
                and d.id_ktgucetnispolecnost = us.id 
                AND UP.s_ucet = a.s_ucetoriginal
                AND UP.id_cisdatabaze = d.id_cisdatabaze
                AND UP.c_typ = us.c_feis_ucettyp) s_popisoriginal
       FROM kp_dat_dokladzdrojdatagregace a, cis_locale l
   GROUP BY a.id_doklad, a.s_ucet, a.s_mena, l.s_locale, a.s_ucetoriginal
     HAVING SUM (a.nd_castkamena) != 0 OR SUM (a.nd_castkalocal) != 0



;


PROMPT Completed VW_KP_DOKLADZUSTATKYUCTU.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_DOKLADZUSTATKYUCTUPROTI.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_DOKLADZUSTATKYUCTUPROTI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_DOKLADZUSTATKYUCTUPROTI
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_DOKLADZUSTATKYUCTUPROTI" ("ID_DOKLAD", "S_UCET", "S_POPIS", "S_MENA", "ND_CASTKALOCAL", "ND_CASTKAMENA", "ND_CASTKACNB", "ID_KTGUCETNISPOLECNOST", "S_LOCALE") AS 
  SELECT   a.id_doklad, a.s_ucet, f_getUcetUnifPopisUcet(a.s_ucet, l.s_locale) s_popis, a.s_mena,
            SUM (a.nd_castkalocal) nd_castkalocal,
            SUM (a.nd_castkamena) nd_castkamena,
            SUM (a.nd_castkacnb) nd_castkacnb, a.id_ktgucetnispolecnost,
            l.s_locale
       FROM kp_dat_dokladzdrojdatagregace a, cis_locale l
   GROUP BY a.id_doklad,
            a.s_ucet,
            a.s_mena,
            a.id_ktgucetnispolecnost,
            l.s_locale
     HAVING SUM (a.nd_castkamena) != 0 OR SUM (a.nd_castkalocal) != 0

;


PROMPT Completed VW_KP_DOKLADZUSTATKYUCTUPROTI.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_EVIOBCHODNIREJSTRIK3M.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_EVIOBCHODNIREJSTRIK3M.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_EVIOBCHODNIREJSTRIK3M
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_EVIOBCHODNIREJSTRIK3M" ("ID", "SPOLECNOST", "S_STAT", "STAT", "EXTERNIADMIN", "KOMPLETNI", "K3M", "AKCIONAR", "A3M", "K2M", "A2M") AS 
  select id, 
       spolecnost, 
	   s_stat, 
       stat, 
	   externiAdmin, 
	   kompletni, 
	   case when (kompletni<add_months(sysdate,-3) or kompletni is null) then '!' else 'OK' end k3M, 
	   akcionar, 
	   case when (akcionar<add_months(sysdate,-3) or akcionar is null) then '!' else 'OK' end a3M, 
	   case when (trunc(kompletni)=trunc(add_months(sysdate,-2)) or kompletni is null) then '1' else '0' end k2M, 
	   case when (trunc(akcionar)=trunc(add_months(sysdate,-2)) or akcionar is null) then '1' else '0' end a2M 
from ( 
select s.id, 
       s.s_nazev spolecnost, 
	   s.s_stat, 
       (select st.s_popis from kp_cis_stat st where st.id = s.s_stat) stat, 
       (select ea.s_nazev from kp_ktg_eviExterniAdmin ea where ea.id = s.id_externiAdmin) externiAdmin, 
	   (select max(dt_datum) from kp_dat_eviObchodniRejstrik r where r.ID_ADMINSPOLECNOST = s.ID and r.ID_CISOBCHODNIREJSTRIK = 1) kompletni, 
	   (select max(dt_datum) from kp_dat_eviObchodniRejstrik r where r.ID_ADMINSPOLECNOST = s.ID and r.ID_CISOBCHODNIREJSTRIK = 6) akcionar 
from kp_ktg_eviAdminSpolecnost s 
order by s.s_nazev 
)

;


PROMPT Completed VW_KP_EVIOBCHODNIREJSTRIK3M.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_GUIDOKLADVAZBYSPOLECNOST.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_GUIDOKLADVAZBYSPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_GUIDOKLADVAZBYSPOLECNOST
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_GUIDOKLADVAZBYSPOLECNOST" ("ID_DOKLAD", "ID_KTGUCETNISPOLECNOSTFROM", "ID_KTGUCETNISPOLECNOSTTO", "ID_KTGUCETNISKUPINA", "UCETNISPOLECNOSTFROM", "S_MENAFROM", "UCETNISPOLECNOSTTO", "S_MENATO") AS 
  select vv.id_doklad, 
       vv.id_ktgUcetniSpolecnostFrom, 
	   vv.id_ktgUcetniSpolecnostTo, 
	   vv.id_ktgUcetniSkupina, 
	   sf.S_NAZEV UcetniSpolecnostFrom, 
	   sf.S_MENA s_menaFrom, 
	   st.S_NAZEV UcetniSpolecnostTo, 
	   st.S_MENA s_menaTo 
from ( 
		select id_doklad, id_ktgUcetniSpolecnostFrom, id_ktgUcetniSpolecnostTo, id_ktgUcetniSkupina 
		from db_jt.kp_dat_dokladvazby v 
		group by id_doklad, id_ktgUcetniSpolecnostFrom, id_ktgUcetniSpolecnostTo, id_ktgUcetniSkupina 
		union 
		select id_doklad, id_ktgUcetniSpolecnostTo, id_ktgUcetniSpolecnostFrom, id_ktgUcetniSkupina 
		from db_jt.kp_dat_dokladvazby v 
		group by id_doklad, id_ktgUcetniSpolecnostFrom, id_ktgUcetniSpolecnostTo, id_ktgUcetniSkupina 
		) vv, 
	 kp_ktg_ucetniSpolecnost sf, 
	 kp_ktg_ucetniSpolecnost st 
where vv.id_ktgUcetniSpolecnostFrom = sf.id 
  and vv.id_ktgUcetniSpolecnostTo = st.id

;


PROMPT Completed VW_KP_GUIDOKLADVAZBYSPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_KONSOLIDACEFRONTA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_KONSOLIDACEFRONTA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_KONSOLIDACEFRONTA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_KONSOLIDACEFRONTA" ("ID", "DATUM", "S_STAV", "S_NAZEV", "ADATUM", "AUZIVATEL", "S_SQLERROR", "ID_KTGUCETNISKUPINA", "AIDKTGSUBKONSOLIDACE", "CURRENTSESSION", "MODULE", "CLIENT_IDENTIFIER", "ACTION") AS 
  SELECT f.ID, f.datum, f.s_stav, s.s_nazev, f.adatum, 
          NVL ((SELECT TRIM (   u.s_titulypred 
                             || ' ' 
                             || u.s_krestni 
                             || ' ' 
                             || u.s_prijmeni 
                             || ' ' 
                             || u.s_titulypo 
                             || ' (' 
                             || u.s_userid 
                             || ')' 
                            ) 
                  FROM ktg_appuser u 
                 WHERE 'jazn.com/' || u.s_userid = f.auzivatel), 
               f.auzivatel 
              ) auzivatel, 
          f.s_sqlerror, f.id_ktgucetniskupina, f.aidktgsubkonsolidace, 
          DECODE (f.session_id, app.f_getsessionid, '1', '0') currentsession, 
          ss.module, ss.client_identifier, ss.action 
     FROM kp_dat_konsolidacefronta f, kp_ktg_ucetnispolecnost s, v$session ss 
    WHERE s.ID = f.aidktgsubkonsolidace AND ss.audsid(+) = f.session_id

;


PROMPT Completed VW_KP_KONSOLIDACEFRONTA.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_KONS_PACKAGE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_KONS_PACKAGE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_KONS_PACKAGE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_KONS_PACKAGE" ("UCET", "CASTKA", "MENA", "ID_KTGSPOLECNOST", "ZEME", "FLOW_KOD", "IDSORTGROUP", "DEBUG") AS 
  select ucet, castka, mena, id_ktgSpolecnost, zeme, flow_kod, idSortGroup, debug from table ( db_jt.rep_kons_package.f_getReport )

;


PROMPT Completed VW_KP_KONS_PACKAGE.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_KPDUPLICITYDETAIL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_KPDUPLICITYDETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_KPDUPLICITYDETAIL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_KPDUPLICITYDETAIL" ("DT_DATUM", "ID_KTGUCETNISPOLECNOST", "ID_DUPLICITA", "ID_ZDROJDAT", "S_MENA", "C_STRANA", "S_UCET", "ND_CASTKAMENA", "ND_CASTKALOCAL", "S_POPIS", "DATUM", "NUMBER0", "ID_KTGSPOLECNOST", "PROTISTRANA", "PC_PROD_KIND", "PC_PROD_TYPE", "S_UCETORIGINAL") AS 
  select d.DT_DATUM, 
	   d.ID_KTGUCETNISPOLECNOST, 
	   dup.id id_duplicita, 
	   zd.id id_zdrojDat, 
	   zd.s_mena, 
	   zd.c_strana, 
	   zd.s_ucet, 
	   zd.ND_CASTKAMENA, 
	   zd.ND_CASTKALOCAL, 
	   zd.s_popis, 
	   zd.datum, 
	   zd.number0, 
	   zd.id_ktgSpolecnost, 
	   (select s_nazev from kp_ktg_spolecnost where id = zd.id_ktgSpolecnost) protistrana, 
	   zd.PC_PROD_KIND, 
	   zd.PC_PROD_TYPE, 
	   zd.S_UCETORIGINAL 
from kp_dat_doklad d, 
	 kp_def_kapitalovkaDuplicity dup, 
	 kp_rel_doklad_zdrojDat rel, 
	 kp_dat_dokladZdrojDat zd 
where d.NL_KROK = 1 
  and d.DT_DATUM = dup.DT_DATUMDOKLAD 
  and d.ID_KTGUCETNISPOLECNOST = dup.ID_KTGUCETNISPOLECNOST 
  and d.ID = rel.ID_DOKLAD 
  and rel.ID_DOKLADZDROJDAT = zd.id 
  and dup.s_produktUcet = trim( zd.id_extsystem2 )

;


PROMPT Completed VW_KP_KPDUPLICITYDETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_MAJETKOVAUCAST.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_MAJETKOVAUCAST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_MAJETKOVAUCAST
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_MAJETKOVAUCAST" ("S_NOMINALEMISE", "ID_SPOLINVESTICE", "S_MENAINVESTICE", "ID_FINANCNIINVESTICE", "S_NAZEVINVESTICE", "ID", "ID_PARENT", "ID_KTGUCETNISPOLECNOST", "ID_KTGFININVESTICEEMISE", "S_UCET", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "ID_CISMUTYPTRANSAKCE", "ID_CISMUZPUSOB", "NL_POCETKUSU", "S_POPISTYPTRANSAKCE", "S_POPISZPUSOB", "S_MENATRANSAKCE", "ND_CENATRANSAKCEKUS", "ND_OBJEMTRANSAKCE", "ND_KURZ", "S_MENAUCETNI", "ND_CENAUCETNIKUS", "ND_OBJEMUCETNI", "DT_ZMENA", "S_UZIVATEL", "ID_KTGSPOLECNOST", "KOUPENOOD") AS 
  select
	fe.nl_nominal s_nominalEmise,
	fi.id_ktgspolecnost id_spolInvestice, fi.s_mena s_menaInvestice, fi.id id_financniInvestice,
	s.s_nazev s_nazevInvestice,
	mu.id, mu.id_parent, mu.id_ktgUcetniSpolecnost,
	mu.id_ktgFinInvesticeEmise, mu.s_ucet, mu.dt_platnostOd, mu.dt_platnostDo,
	mu.id_cisMUTypTransakce, mu.id_cisMUZpusob, mu.nl_pocetKusu,
	mutt.s_popis s_popisTypTransakce, muz.s_popis s_popisZpusob,
	mu.s_menaTransakce, mu.nd_cenaTransakceKus,
	mu.nd_objemTransakce, mu.nd_kurz,
	mu.s_menaUcetni, mu.nd_cenaUcetniKus, mu.nd_objemUcetni,
	mu.dt_zmena, mu.s_uzivatel, mu.id_ktgUcetniSpolecnostKoupeno id_ktgSpolecnost,
  (select s_nazev from kp_ktg_ucetnispolecnost s where s.id = mu.id_ktgUcetniSpolecnostKoupeno ) koupenoOd
from
	KP_dat_MajetkovaUcast mu,
	KP_ktg_FinInvesticeEmise fe,
	KP_ktg_FinancniInvestice fi,
	KP_ktg_Spolecnost s,
	KP_cis_MajetkovaUcastTypTran mutt,
	KP_cis_MajetkovaUcastZpusob muz
where
	mu.ID_CISMUTYPTRANSAKCE = mutt.id (+) and
	mu.ID_CISMUZPUSOB = muz.id (+) and
	mu.id_ktgFinInvesticeEmise = fe.id and
	fe.id_ktgFinancniInvestice = fi.id and
	fi.id_ktgSpolecnost = s.id

;


PROMPT Completed VW_KP_MAJETKOVAUCAST.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_MAJETKOVAUCASTHISTOR.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_MAJETKOVAUCASTHISTOR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_MAJETKOVAUCASTHISTOR
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_MAJETKOVAUCASTHISTOR" ("S_NOMINALEMISE", "S_MENAINVESTICE", "ID_FINANCNIINVESTICE", "S_NAZEVINVESTICE", "ID", "ID_PARENT", "ID_KTGUCETNISPOLECNOST", "ID_KTGFININVESTICEEMISE", "S_UCET", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "ID_CISMUTYPTRANSAKCE", "ID_CISMUZPUSOB", "NL_POCETKUSU", "S_MENATRANSAKCE", "ND_CENATRANSAKCEKUS", "ND_OBJEMTRANSAKCE", "ND_KURZ", "S_MENAUCETNI", "ND_CENAUCETNIKUS", "ND_OBJEMUCETNI", "S_POPISTYPTRANSAKCE", "S_POPISZPUSOB", "DT_ZMENA", "S_UZIVATEL", "ID_KTGSPOLECNOST", "KOUPENOOD") AS 
  SELECT fe.nl_nominal s_nominalemise, fi.s_mena s_menainvestice, 
          fi.ID id_financniinvestice, s.s_nazev s_nazevinvestice, mu.ID, 
          mu.id_parent, mu.id_ktgucetnispolecnost, mu.id_ktgfininvesticeemise, 
          mu.s_ucet, mu.dt_platnostod, mu.dt_platnostdo, 
          mu.id_cismutyptransakce, mu.id_cismuzpusob, mu.nl_pocetkusu, 
          mu.s_menatransakce, mu.nd_cenatransakcekus, mu.nd_objemtransakce, 
          mu.nd_kurz, mu.s_menaucetni, mu.nd_cenaucetnikus, mu.nd_objemucetni, 
          mutt.s_popis s_popistyptransakce, muz.s_popis s_popiszpusob, 
          mu.dt_zmena, mu.s_uzivatel, mu.id_ktgUcetniSpolecnost, 
          (SELECT s_nazev 
             FROM kp_ktg_ucetniSpolecnost s 
            WHERE s.ID = mu.id_ktgucetnispolecnost) koupenood 
     FROM kp_dat_majetkovaucast mu, 
          kp_ktg_fininvesticeemise fe, 
          kp_ktg_financniinvestice fi, 
          kp_ktg_spolecnost s, 
          kp_cis_majetkovaucasttyptran mutt, 
          kp_cis_majetkovaucastzpusob muz 
    WHERE mu.id_cismutyptransakce = mutt.ID 
      AND muz.ID(+) = mu.id_cismuzpusob 
      AND mu.id_ktgfininvesticeemise = fe.ID 
      AND fe.id_ktgfinancniinvestice = fi.ID 
      AND fi.id_ktgspolecnost = s.ID

;


PROMPT Completed VW_KP_MAJETKOVAUCASTHISTOR.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_MUSTEKBUNKADEFINICEUCTU.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_MUSTEKBUNKADEFINICEUCTU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_MUSTEKBUNKADEFINICEUCTU
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_MUSTEKBUNKADEFINICEUCTU" ("ID", "ID_DEFLISTBUNKA", "S_UCET", "C_VALIDOVATMASKU", "C_UCETSUMA", "S_EVIDOVATPROTISTRANU", "C_MENOVAPOZICE", "C_UVEROVAPOZICE", "S_UCETMINUS", "POCET_UCTU", "S_ZKRATKA", "S_MUSTEKUZIVATEL", "ID_PARENT", "ID_KTGDOKLAD", "DT_PLATNOSTOD", "DT_PLATNOSTDO") AS 
  select 
	bu.id, bu.id_defListBunka, bu.s_ucet, bu.c_validovatMasku, bu.c_ucetSuma, 
	bu.s_evidovatProtistranu, bu.c_menovaPozice, bu.c_uverovaPozice, bu.s_ucet_Minus s_ucetMinus, 
	ut.pocet_uctu, ut.s_zkratka, bu.s_uzivatel s_mustekUzivatel, bu.id_parent, bu.ID_KTGDOKLAD, 
	bu.dt_platnostOd, bu.dt_platnostDo 
from 
	kp_def_ListBunkaUcet bu, 
	kp_cis_UcetSumaTyp ut 
where 
	bu.c_ucetSuma = ut.id

;


PROMPT Completed VW_KP_MUSTEKBUNKADEFINICEUCTU.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_MUSTEKBUNKADEFUCTUHISTOR.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_MUSTEKBUNKADEFUCTUHISTOR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_MUSTEKBUNKADEFUCTUHISTOR
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_MUSTEKBUNKADEFUCTUHISTOR" ("ID", "ID_PARENT", "ID_DEFLISTBUNKA", "S_UCET", "C_VALIDOVATMASKU", "C_UCETSUMA", "S_EVIDOVATPROTISTRANU", "C_MENOVAPOZICE", "C_UVEROVAPOZICE", "S_UCETMINUS", "DT_PLATNOSTOD", "DT_PLATNOSTDO") AS 
  select
	bu.id, bu.id_parent, bu.id_defListBunka, bu.s_ucet, bu.c_validovatMasku, bu.c_ucetSuma,
	bu.s_evidovatProtistranu, bu.c_menovaPozice, bu.c_uverovaPozice, bu.s_ucet_Minus s_ucetMinus,
	bu.dt_platnostOd, bu.dt_platnostDo
from KP_def_ListBunkaUcet bu


;


PROMPT Completed VW_KP_MUSTEKBUNKADEFUCTUHISTOR.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_KP_PROJEKTDOKLAD.sql: 'utf-8' codec can't decode byte 0xc8 in position 820: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_KP_PROJEKTDOKLADDETAIL.sql: 'utf-8' codec can't decode byte 0xc8 in position 1210: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_KP_REP_COUNTRYTYPELOCAL.sql: 'utf-8' codec can't decode byte 0xc8 in position 1796: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_KP_REP_COUNTRYTYPEMENA.sql: 'utf-8' codec can't decode byte 0xc8 in position 1804: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_KP_REP_LIMITPARTIESLOCAL.sql: 'utf-8' codec can't decode byte 0xc8 in position 1560: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_KP_REP_LIMITPARTIESMENA.sql: 'utf-8' codec can't decode byte 0xc8 in position 1586: invalid continuation byte


-- ============================================================================
-- Deploy: VW_KP_SPOLECNOSTSPRAVCEKO.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_SPOLECNOSTSPRAVCEKO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_SPOLECNOSTSPRAVCEKO
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_SPOLECNOSTSPRAVCEKO" ("ID_DATABAZE", "ID_SPOLECNOST", "S_NUMBER0", "STAT", "S_ICO", "S_NAZEV", "S_SPRAVCE", "S_KO", "MNGSEGMENT", "SEGMENTBOSS", "PRODUKT") AS 
  SELECT ss.id_databaze, ss.id_spolecnost, ss.s_number0, 
          DECODE (ss.id_databaze, 100, 'CZ', 105, 'SK', NULL) stat, s.s_ico, 
          s.s_nazev, ss.s_spravce, ss.s_ko, 
          (SELECT ms.s_popis 
             FROM kp_cis_mngsegment ms 
            WHERE us.id_mngsegment = ms.ID) mngsegment, 
          (SELECT    u.s_titulypred 
                  || ' ' 
                  || u.s_krestni 
                  || ' ' 
                  || u.s_prijmeni 
                  || ' ' 
                  || u.s_titulypo 
             FROM ktg_appuser u 
            WHERE us.id_mngsegmentBoss = u.ID) segmentboss, 
          DECODE (ss.c_produkt, '1', 'ANO', 'NE') produkt 
     FROM kp_ktg_spolecnostspravceko ss, 
          kp_ktg_spolecnost s, 
          kp_ktg_ucetnispolecnost us 
    WHERE ss.id_spolecnost = s.ID 
	  AND s.id_ktgspolecnost = us.ID(+)

;


PROMPT Completed VW_KP_SPOLECNOSTSPRAVCEKO.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_KP_SPOLECNOSTZAMEKGEN.sql: 'utf-8' codec can't decode byte 0xe1 in position 843: invalid continuation byte


-- ============================================================================
-- Deploy: VW_KP_SPOLECNOSTZAMEKGENDATUM.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_SPOLECNOSTZAMEKGENDATUM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_SPOLECNOSTZAMEKGENDATUM
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_SPOLECNOSTZAMEKGENDATUM" ("DT_DATUM") AS 
  select distinct dt_datum from vw_kp_spolecnostZamekGen order by dt_datum desc

;


PROMPT Completed VW_KP_SPOLECNOSTZAMEKGENDATUM.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_KP_SUBKONPREHLEDCLEN.sql: 'utf-8' codec can't decode byte 0xe1 in position 1272: invalid continuation byte


-- ============================================================================
-- Deploy: VW_KP_SUBKONSOLIDACE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_SUBKONSOLIDACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_SUBKONSOLIDACE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_SUBKONSOLIDACE" ("ID_KTGUCETNISPOLECNOST", "NL_PORADI", "ID_KTGUCETNISKUPINA", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "S_TYPKURSLISTEK", "ID_CISSUBJECT", "S_ICO", "SPIN_ID", "TOPAS_ID", "QUEST_ID", "C_EXTSYSTEM", "S_NAZEV", "C_POCITATROZVAHU", "S_SOUBORPREDPONA", "S_MENA", "S_DBLINK", "C_AUTOMATICKEGENEROVANI", "ID_KATEGORIE", "C_RKC", "S_ZKRATKA", "DT_LASTCLOSEDATE", "DT_DATUMARCHIVACE", "C_OPCE", "ID_CISKATSPOL", "ID_ZODPOVEDNAUCETNI", "ID_ODPOVEDNAOSOBA", "ID_TOPMNG", "ID_ADMINISTRATOR", "DT_RELATIVEDATE", "S_KOD", "S_POPIS", "ID_KTGUCETNISPOLECNOSTMATKA", "C_KAMKURZOVYROZDIL", "S_MENAMATKA", "NL_KROKDOKLADCLENU", "C_EXPORTFLAGCZK") AS 
  SELECT id_ktgucetnispolecnost, nl_poradi, id_ktgucetniskupina, 
          dt_platnostod, dt_platnostdo, s.s_typkurslistek, u.id_cissubject, 
          u.s_ico, u.spin_id, u.topas_id, u.quest_id, u.c_extsystem, 
          u.s_nazev, u.c_pocitatrozvahu, u.s_souborpredpona, u.s_mena, 
          u.s_dblink, u.c_automatickegenerovani, u.id_kategorie, u.c_rkc, 
          u.s_zkratka, u.dt_lastclosedate, u.dt_datumarchivace, u.c_opce, 
          u.id_ciskatspol, u.id_zodpovednaucetni, u.id_odpovednaosoba, 
          u.id_topmng, u.id_administrator, u.dt_relativedate, us.s_kod, 
          us.s_popis, s.id_ktgucetnispolecnostmatka, s.c_kamkurzovyrozdil, 
          matka.s_mena s_menamatka, s.NL_KROKDOKLADCLENU, s.c_exportFlagCzk 
     FROM kp_ktg_subkonsolidace s, 
          kp_ktg_ucetnispolecnost u, 
          kp_ktg_ucetniskupina us, 
          kp_ktg_ucetnispolecnost matka 
    WHERE u.ID = s.id_ktgucetnispolecnost 
      AND u.c_extsystem = 'K' 
      AND s.id_ktgucetniskupina = us.ID 
      AND s.id_ktgucetnispolecnostmatka = matka.ID(+)

;


PROMPT Completed VW_KP_SUBKONSOLIDACE.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_SUBKONSPREHLED.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_SUBKONSPREHLED.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_SUBKONSPREHLED
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_SUBKONSPREHLED" ("S_NAZEV", "ID", "ID_MNGSEGMENT", "MNGSEGMENT", "ID_KTGUCETNISKUPINA") AS 
  SELECT DISTINCT s.s_nazev, 
   		  		   s.ID, 
				   s.id_mngsegment, 
                   (SELECT s_popis 
                      FROM db_jt.kp_cis_mngsegment 
                     WHERE ID = s.id_mngsegment) mngsegment, 
                   sub.id_ktgucetniskupina 
              FROM db_jt.kp_ktg_subkonsolidace sub, 
                   db_jt.kp_ktg_ucetnispolecnost s 
             WHERE s.id = sub.id_ktgucetnispolecnost 
               AND s.dt_datumarchivace IS NULL

;


PROMPT Completed VW_KP_SUBKONSPREHLED.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_UCET2DEFINICE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_UCET2DEFINICE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_UCET2DEFINICE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_UCET2DEFINICE" ("ID_DEFLISTBUNKAUCET", "S_UCET", "BUNKA", "ID_CISSUBJECT") AS 
  SELECT lu.ID id_deflistbunkaucet, lu.s_ucet, 
             'Ucet:' 
          || lu.s_ucet 
          || ' / ' 
          || st.s_zkratka 
          || ' / ' 
          || l.s_popis 
          || ' / ' 
          || lb.nl_radek 
          || '-' 
          || r.s_popis bunka, 
		  (select id_cisSubject from kp_ktg_doklad where id = lu.ID_KTGDOKLAD) id_cisSubject 
     FROM kp_def_listbunkaucet lu, 
          kp_def_listbunka lb, 
          kp_cis_list l, 
          kp_cis_radektext r, 
          kp_cis_ucetsumatyp st 
    WHERE lu.id_deflistbunka = lb.ID 
      AND lu.id_cislist = l.ID 
      AND lb.id_cisradektyp = r.ID 
      AND lu.c_ucetsuma = st.ID

;


PROMPT Completed VW_KP_UCET2DEFINICE.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_UCETNISPOLECNOSTPREHLED.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_UCETNISPOLECNOSTPREHLED.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_UCETNISPOLECNOSTPREHLED
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_UCETNISPOLECNOSTPREHLED" ("ID", "S_NAZEV", "ID_ODPOVEDNAOSOBA", "ID_TOPMNG", "ID_ADMINISTRATOR", "ID_ZODPOVEDNAUCETNI", "ODPOVEDNAOSOBA", "TOPMNG", "ADMINISTRATOR", "ZODPOVEDNAUCETNI", "C_PREHLEDDISPLAY", "C_EXTSYSTEM", "MANLINK", "ID_CISKATSPOL", "KATSPOL", "ID_MNGSEGMENT", "MNGSEGMENT", "ID_MNGSEGMENTBOSS", "MNGSEGMENTBOSS", "ID_KATEGORIE") AS 
  SELECT s.ID, s.s_nazev, s.id_odpovednaosoba, s.id_topmng, 
          s.id_administrator, s.id_zodpovednaucetni, 
             u1.s_titulypred 
          || ' ' 
          || u1.s_krestni 
          || ' ' 
          || u1.s_prijmeni 
          || ' ' 
          || u1.s_titulypo odpovednaosoba, 
             u2.s_titulypred 
          || ' ' 
          || u2.s_krestni 
          || ' ' 
          || u2.s_prijmeni 
          || ' ' 
          || u2.s_titulypo topmng, 
             u3.s_titulypred 
          || ' ' 
          || u3.s_krestni 
          || ' ' 
          || u3.s_prijmeni 
          || ' ' 
          || u3.s_titulypo administrator, 
             u4.s_titulypred 
          || ' ' 
          || u4.s_krestni 
          || ' ' 
          || u4.s_prijmeni 
          || ' ' 
          || u4.s_titulypo zodpovednaucetni, 
          s.c_prehleddisplay, s.c_extsystem, 
          DECODE (s.id_kategorie, 
                  30, 'CZ', 
                  130, 'SK', 
                  230, 'Z', 
                  NULL 
                 ) manlink, s.id_ciskatspol, 
          (SELECT cis.s_zkratka 
             FROM kp_cis_katspol cis 
            WHERE cis.ID = s.id_ciskatspol) katspol, s.id_mngsegment, 
          (SELECT cis.s_popis 
             FROM kp_cis_mngsegment cis 
            WHERE cis.ID = s.id_mngsegment) mngsegment, s.id_mngsegmentboss, 
          (SELECT    u.s_titulypred 
                  || ' ' 
                  || u.s_krestni 
                  || ' ' 
                  || u.s_prijmeni 
                  || ' ' 
                  || u.s_titulypo 
             FROM ktg_appuser u 
            WHERE u.ID = s.id_mngsegmentboss) mngsegmentboss, 
			s.id_kategorie 
     FROM kp_ktg_ucetnispolecnost s, 
          ktg_appuser u1, 
          ktg_appuser u2, 
          ktg_appuser u3, 
          ktg_appuser u4 
    WHERE s.id_odpovednaosoba = u1.ID(+) 
      AND s.id_topmng = u2.ID(+) 
      AND s.id_administrator = u3.ID(+) 
      AND s.id_zodpovednaucetni = u4.ID(+) 
      AND s.id_kategorie <> 300 
      AND s.dt_datumarchivace IS NULL

;


PROMPT Completed VW_KP_UCETNISPOLECNOSTPREHLED.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_UCSPOLPOCETZAMKU.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_UCSPOLPOCETZAMKU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_UCSPOLPOCETZAMKU
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_UCSPOLPOCETZAMKU" ("ID", "S_NAZEV", "UCETNI", "SK", "OO", "SS", "DT_DATUM", "NL_POCETSCHVALENI", "ID_DOKLAD", "C_EXTSYSTEM") AS 
  select s.id, 
	   s.s_nazev, 
	   (select u.s_krestni || ' ' || u.s_prijmeni from ktg_appUser u where u.id = s.ID_ZODPOVEDNAUCETNI) ucetni, 
	   (select u.s_krestni || ' ' || u.s_prijmeni from ktg_appUser u where u.id = s.ID_SPRAVCEKONSOLIDACE) sk, 
	   (select u.s_krestni || ' ' || u.s_prijmeni from ktg_appUser u where u.id = s.ID_ODPOVEDNAOSOBA) oo, 
	   (select u.s_krestni || ' ' || u.s_prijmeni from ktg_appUser u where u.id = s.ID_MNGSEGMENTBOSS) ss, 
	   d.DT_DATUM, 
	   (select count(*) 
	    from kp_dat_generovaniZamek z 
		where z.ID_KTGUCETNISPOLECNOST = s.id 
		  and z.ID_CISDOKLAD = 1 
		  and z.DT_DATUM = d.DT_DATUM 
		  and z.C_ZAMCENO = '1' 
		) nl_pocetSchvaleni, 
		d.id id_doklad, 
		s.c_extSystem 
from kp_ktg_ucetniSpolecnost s, 
	 kp_dat_doklad d 
where s.DT_DATUMARCHIVACE is null 
  and d.ID_KTGUCETNISPOLECNOST (+) = s.id 
  and d.C_BASEDOKLAD = '1' 
  and d.NL_KROK in (1,2) 
  and d.ID_KTGUCETNISPOLECNOST = d.ID_SUBKONSOLIDACE 
  and d.DT_DATUM = last_day(d.DT_DATUM) 
order by s.S_NAZEV, 
	  	 d.DT_DATUM

;


PROMPT Completed VW_KP_UCSPOLPOCETZAMKU.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_UCSPOLSKUPINADATA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_UCSPOLSKUPINADATA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_UCSPOLSKUPINADATA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_UCSPOLSKUPINADATA" ("ID_KTGUCETNISKUPINA", "ID_KTGUCETNISPOLECNOST", "TYPCLENSTVI", "DT_PLATNOSTOD", "DT_PLATNOSTDO") AS 
  select sub.ID_KTGUCETNISKUPINA, 
       r.ID_KTGUCETNISPOLECNOST, 
       (select cis.S_POPIS from kp_cis_subTypClenstvi cis where cis.ID = r.ID_CISSUBTYPCLENSTVI) typClenstvi, 
       r.DT_ClenstviOD, 
	   r.DT_ClenstviDO 
from kp_rel_subkonsolidaceClen r, 
     kp_ktg_subkonsolidace sub 
where r.ID_KTGSUBKONSOLIDACE = sub.ID_KTGUCETNISPOLECNOST 
  and r.C_CLEN = '1' 
order by sub.ID_KTGUCETNISKUPINA, r.ID_KTGUCETNISPOLECNOST

;


PROMPT Completed VW_KP_UCSPOLSKUPINADATA.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_UCSPOLSKUPINAPOROVNANI.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_UCSPOLSKUPINAPOROVNANI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_UCSPOLSKUPINAPOROVNANI
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_UCSPOLSKUPINAPOROVNANI" ("ID_KTGUCETNISPOLECNOST", "S_NAZEV") AS 
  select distinct r.ID_KTGUCETNISPOLECNOST, s.S_NAZEV 
from kp_rel_subkonsolidaceClen r, 
     kp_ktg_subkonsolidace sub, 
	 kp_ktg_ucetniSpolecnost s, 
	 kp_ktg_ucetniSkupina us 
where r.ID_KTGSUBKONSOLIDACE = sub.ID_KTGUCETNISPOLECNOST 
  and r.ID_KTGUCETNISPOLECNOST = s.id 
  and s.ID_CISSUBJECT <> 200 
  and r.C_CLEN = '1' 
  and sub.ID_KTGUCETNISKUPINA = us.ID 
  and us.C_POROVNAVAT = '1' 
order by s.S_NAZEV

;


PROMPT Completed VW_KP_UCSPOLSKUPINAPOROVNANI.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_UCSPOLSPRAVCEKONSOLIDACE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_UCSPOLSPRAVCEKONSOLIDACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_UCSPOLSPRAVCEKONSOLIDACE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_UCSPOLSPRAVCEKONSOLIDACE" ("ID_KTGUCETNISKUPINA", "ID", "S_NAZEV", "S_ICO", "SUBJECT", "S_MENA", "S_COUNTRY", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "SPRAVCEKONSOLIDACE", "SK_EMAIL", "SK_TELEFON", "EXTERNIUCETNI", "EU_EMAIL", "EU_TELEFON", "ID_CISSUBTYPCLENSTVI", "ODPOVEDNA_OSOBA", "MNG_SEGMENT", "SEF_SEGMENTU") AS 
  SELECT DISTINCT sub.ID_KTGUCETNISKUPINA,
    us.ID,
    us.S_NAZEV,
    us.S_ICO,
    (SELECT sub.s_popis FROM kp_cis_subject sub WHERE sub.ID = us.ID_CISSUBJECT
    ) subject,
    us.S_MENA,
    s.S_COUNTRY,
    rel.DT_ClenstviOD,
    rel.DT_ClenstviDO,
    trim(rpad(DECODE(usk.id,'-1',' ',usk.id),6,' ')
    || ' '
    || usk.S_PRIJMENi
    || ' '
    || usk.S_KRESTNI ) spravceKonsolidace,
    usk.S_EMAIL sk_email,
    usk.S_TELEFON sk_telefon,
    trim(rpad(DECODE(ueu.id,'-1',' ',ueu.id),6,' ')
    || ' '
    || ueu.S_PRIJMENi
    || ' '
    || ueu.S_KRESTNI ) externiUcetni,
    ueu.S_EMAIL eu_email,
    ueu.S_TELEFON eu_telefon,
    rel.ID_CISSUBTYPCLENSTVI ,
    trim(rpad(DECODE(uoo.id,'-1',' ',uoo.id),6,' ')
    || ' '
    || uoo.S_PRIJMENi
    || ' '
    || uoo.S_KRESTNI ) OdpovednaOsoba ,
    seg.s_popis MngSegment ,
    trim( uss.S_PRIJMENi
    || ' '
    || uss.S_KRESTNI ) SefSegmentu
  FROM kp_rel_subkonsolidaceClen rel,
    kp_ktg_subkonsolidace sub,
    kp_ktg_ucetniSpolecnost us,
    kp_ktg_spolecnost s,
    ktg_appUser usk,
    ktg_appUser ueu,
    ktg_appUser uoo,
    ktg_appUser uss,
    kp_cis_mngsegment seg
  WHERE rel.ID_KTGSUBKONSOLIDACE = sub.ID_KTGUCETNISPOLECNOST
  AND rel.ID_KTGUCETNISPOLECNOST = us.ID
  AND us.C_EXTSYSTEM            <> 'K'
  AND us.ID                      = s.ID_KTGSPOLECNOST (+)
  AND us.ID_SPRAVCEKONSOLIDACE   = usk.ID (+)
  AND us.ID_ZODPOVEDNAUCETNI     = ueu.ID (+)
  AND us.ID_ODPOVEDNAOSOBA       = uoo.ID (+)
  AND us.id_mngsegmentboss       = uss.ID (+)
  AND us.id_mngsegment           = seg.ID (+)
  ORDER BY us.S_NAZEV,
    sub.ID_KTGUCETNISKUPINA
;


PROMPT Completed VW_KP_UCSPOLSPRAVCEKONSOLIDACE.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KP_VYJIMKYPROTISTRANY.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_VYJIMKYPROTISTRANY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_VYJIMKYPROTISTRANY
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_VYJIMKYPROTISTRANY" ("ID", "ID_DATABAZE", "S_UCETMASKA", "S_PROTISTRANA", "NL_POZICEOD", "S_ICO", "S_NAZEV") AS 
  select
	v.id, v.id_databaze, v.s_ucetMaska, v.s_protistrana, v.nl_poziceOd, p.s_ico, p.s_nazev
from
	db_dsa.kp_ktg_ProtistranaVyjimky v
	  left join db_dsa.KP_rel_Protistrana p on v.id_databaze = p.id_databaze and v.s_protistrana =p.doid
where v.id_databaze !=500 

/* SmrM 01.12.2020 - puvodni view
  select
	v.id, v.id_databaze, v.s_ucetMaska, v.s_protistrana, v.nl_poziceOd, p.s_ico, p.s_nazev
from
	db_dsa.kp_ktg_ProtistranaVyjimky v,
	db_dsa.KP_rel_Protistrana p
where
	v.id_databaze =p.id_databaze(+) and v.s_protistrana =p.doid(+)
*/

union all 

-- data pre AX (db id 500) skrz vsetkych stalkerov
select
	v.id, v.id_databaze, v.s_ucetMaska, v.s_protistrana, v.nl_poziceOd, rp.s_ico, rp.s_nazev
from
	db_dsa.kp_ktg_ProtistranaVyjimky v
	  left join 
          -- NAZEV a ICO musim brat skrz vsetkych stalkerov, aby mal vsetky protistrany
          ( select distinct p.firma_id , p.s_nazev, p.s_ico
            from db_dsa.kp_rel_protistrana p
            where  p.id_databaze >= 400 and p.id_databaze < 500 -- id 400 az 499 je rezervovane pre SEP stalkerov
              and p.firma_id is not null
              -- v SEP moze mat target rozny NAZOV a ICO pre roznych stalkerov, co je chyba a vyradujeme  
              and p.firma_id in ( select firma_id  
                                 from ( select distinct firma_id , s_nazev, s_ico
                                        from db_dsa.kp_rel_protistrana
                                        where firma_id is not null -- firma_id obsahuje sep_id
                                          and (id_databaze >= 400 and id_databaze < 500)) -- id 400 az 499 je rezervovane pre SEP stalkerov
                                        group by firma_id
                                       having count(firma_id) = 1)) rp on v.s_protistrana = rp.firma_id
where v.id_databaze =500
;


PROMPT Completed VW_KP_VYJIMKYPROTISTRANY.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_KP_VYJIMKYZAMYKANITOP.sql: 'utf-8' codec can't decode byte 0xed in position 712: invalid continuation byte


-- ============================================================================
-- Deploy: VW_KP_ZEMEUCSPOL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KP_ZEMEUCSPOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KP_ZEMEUCSPOL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KP_ZEMEUCSPOL" ("S_COUNTRY") AS 
  select distinct s_country 
from kp_ktg_spolecnost 
where id_ktgspolecnost is not null 
  and s_country is not null 
order by s_country

;


PROMPT Completed VW_KP_ZEMEUCSPOL.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KTG_ODBOR.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KTG_ODBOR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KTG_ODBOR
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KTG_ODBOR" ("ID", "ID_KTGUCETNISPOLECNOST", "S_NAZEV", "S_KOD", "ID_ODPOVEDNAOSOBA", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "ID_USEK", "SPOLECNOST", "ND_DOCUROVEN1", "ND_DOCUROVEN2", "ID_TOPMNG", "ODPOVEDNAOSOBA", "USEK", "C_BUDGETING", "C_ARCHIVNI", "ID_SPONZOR", "SPONZOR", "ID_MNGSEGMENT", "MNGSEGMENT") AS 
  select o.id, 
       o.id_ktgucetnispolecnost, 
	   o.s_nazev, 
	   s_kod, 
	   o.id_odpovednaosoba, 
	   o.dt_platnostod, 
	   o.dt_platnostdo, 
	   o.id_usek, 
	   s.s_nazev, 
	   o.nd_docuroven1, 
	   s.nd_docuroven2, 
	   s.id_topmng, 
	   u.s_titulypred || ' ' || u.s_krestni || ' ' || u.s_prijmeni || ' ' || u.s_titulypo, 
	   us.s_nazev, 
	   o.c_budgeting, 
	   o.c_archivni, 
	   o.id_sponzor, 
	   u2.s_titulypred || ' ' || u2.s_krestni || ' ' || u2.s_prijmeni || ' ' || u2.s_titulypo sponzor 
	   ,o.id_mngSegment 
	   ,(select seg.s_popis from kp_cis_mngSegment seg where seg.id = o.ID_MNGSEGMENT) mngSegment 
from kp_ktg_odbor o, 
     kp_ktg_ucetnispolecnost s, 
     ktg_appuser u, 
	 kp_ktg_usek us, 
	 ktg_appuser u2 
where o.id_ktgucetnispolecnost = s.id(+) 
  and o.id_odpovednaosoba = u.id(+) 
  and o.id_usek = us.id(+) 
  and o.ID_SPONZOR = u2.ID (+) 
--  and s.c_docdisplay = '1'

;


PROMPT Completed VW_KTG_ODBOR.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KTG_PODPISOVEVZORYQUAESTOR.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KTG_PODPISOVEVZORYQUAESTOR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KTG_PODPISOVEVZORYQUAESTOR
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KTG_PODPISOVEVZORYQUAESTOR" ("SPOLECNOST", "S_ICO", "S_COUNTRY", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "S_POPISSKUPINY", "NL_MINPOCETCLENU", "S_VZORICO", "S_VZORJMENO", "S_VZORULICE", "S_VZORCISLO", "S_VZORMESTO", "S_VZORPSC", "S_VZORSTAT") AS 
  select trim(QUAESTOR.RELATION.SEARCH_NAME) spolecnost, 
	   trim(QUAESTOR.RELATION.SEARCH_IDENTIFICAT) s_ico, 
	   trim(QUAESTOR.RELATION.FK_RESIDE_COUNTRY) s_country, 
	   QUAESTOR.AUTHORISED_GROUP.DATE_BEGIN dt_platnostOd, 
	   QUAESTOR.AUTHORISED_GROUP.DATE_END dt_platnostDo, 
	   trim(QUAESTOR.AUTHORISED_GROUP.DESCRIPTION) s_popisSkupiny, 
	   QUAESTOR.AUTHORISED_GROUP.MINIMUM_PERSONS nl_minPocetClenu, 
	   trim(RELATION_1.SEARCH_IDENTIFICAT) s_vzorIco, 
	   trim(RELATION_1.SEARCH_NAME) s_vzorJmeno, 
	   trim(RELATION_1.STREET) s_vzorUlice, 
	   trim(RELATION_1.HOUSE_NUMBER_COMPL) s_vzorCislo, 
	   trim(RELATION_1.CITY) s_vzorMesto, 
	   trim(RELATION_1.POSTCODE) s_vzorPsc, 
	   (select stat.S_POPIS from kp_cis_stat stat where stat.ID = trim(QUAESTOR.RELATION_1.FK_RESIDE_COUNTRY)) s_vzorStat 
from QUAESTOR.RELATION@quaestor, 
	 QUAESTOR.REL_STATUS_MEMBER@quaestor, 
	 QUAESTOR.RELATION_STATUS@quaestor, 
	 QUAESTOR.AUTHORISED_GROUP@quaestor, 
	 QUAESTOR.AUTH_PERSON@quaestor, 
	 QUAESTOR.RELATION@quaestor RELATION_1 
where QUAESTOR.REL_STATUS_MEMBER.FK_RELATION = QUAESTOR.RELATION.NUMBER0 
  and QUAESTOR.REL_STATUS_MEMBER.FK_RELATION_STATUS = QUAESTOR.RELATION_STATUS.CODE 
  and QUAESTOR.AUTHORISED_GROUP.FK_RELATION (+) = QUAESTOR.RELATION.NUMBER0 
  and QUAESTOR.AUTH_PERSON.FK_AUTH_GROUP (+) = QUAESTOR.AUTHORISED_GROUP.ID 
  and QUAESTOR.REL_STATUS_MEMBER.FK_RELATION = QUAESTOR.RELATION.NUMBER0 
  and QUAESTOR.AUTHORISED_GROUP.FK_RELATION = QUAESTOR.RELATION.NUMBER0 
  and QUAESTOR.AUTH_PERSON.FK_RELATION = RELATION_1.NUMBER0 (+) 
  and RELATION_STATUS.NAME like '%Admin%' 
union all 
select trim(QUAESTOR.RELATION.SEARCH_NAME) spolecnost, 
	   trim(QUAESTOR.RELATION.SEARCH_IDENTIFICAT) s_ico, 
	   trim(QUAESTOR.RELATION.FK_RESIDE_COUNTRY) s_country, 
	   QUAESTOR.AUTHORISED_GROUP.DATE_BEGIN dt_platnostOd, 
	   QUAESTOR.AUTHORISED_GROUP.DATE_END dt_platnostDo, 
	   trim(QUAESTOR.AUTHORISED_GROUP.DESCRIPTION) s_popisSkupiny, 
	   QUAESTOR.AUTHORISED_GROUP.MINIMUM_PERSONS nl_minPocetClenu, 
	   trim(RELATION_1.SEARCH_IDENTIFICAT) s_vzorIco, 
	   trim(RELATION_1.SEARCH_NAME) s_vzorJmeno, 
	   trim(RELATION_1.STREET) s_vzorUlice, 
	   trim(RELATION_1.HOUSE_NUMBER_COMPL) s_vzorCislo, 
	   trim(RELATION_1.CITY) s_vzorMesto, 
	   trim(RELATION_1.POSTCODE) s_vzorPsc, 
	   (select stat.S_POPIS from kp_cis_stat stat where stat.ID = trim(QUAESTOR.RELATION_1.FK_RESIDE_COUNTRY)) s_vzorStat 
from QUAESTOR.RELATION@quaestor_sk, 
	 QUAESTOR.REL_STATUS_MEMBER@quaestor_sk, 
	 QUAESTOR.RELATION_STATUS@quaestor_sk, 
	 QUAESTOR.AUTHORISED_GROUP@quaestor_sk, 
	 QUAESTOR.AUTH_PERSON@quaestor_sk, 
	 QUAESTOR.RELATION@quaestor_sk RELATION_1 
where QUAESTOR.REL_STATUS_MEMBER.FK_RELATION = QUAESTOR.RELATION.NUMBER0 
  and QUAESTOR.REL_STATUS_MEMBER.FK_RELATION_STATUS = QUAESTOR.RELATION_STATUS.CODE 
  and QUAESTOR.AUTHORISED_GROUP.FK_RELATION (+) = QUAESTOR.RELATION.NUMBER0 
  and QUAESTOR.AUTH_PERSON.FK_AUTH_GROUP (+) = QUAESTOR.AUTHORISED_GROUP.ID 
  and QUAESTOR.REL_STATUS_MEMBER.FK_RELATION = QUAESTOR.RELATION.NUMBER0 
  and QUAESTOR.AUTHORISED_GROUP.FK_RELATION = QUAESTOR.RELATION.NUMBER0 
  and QUAESTOR.AUTH_PERSON.FK_RELATION = RELATION_1.NUMBER0 (+) 
  and RELATION_STATUS.NAME like '%Admin%' 
order by spolecnost

;


PROMPT Completed VW_KTG_PODPISOVEVZORYQUAESTOR.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_KTG_PROJEKT.sql: 'utf-8' codec can't decode byte 0xc8 in position 2944: invalid continuation byte


-- ============================================================================
-- Deploy: VW_KTG_PROJEKTNAVRH.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KTG_PROJEKTNAVRH.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KTG_PROJEKTNAVRH
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KTG_PROJEKTNAVRH" ("ID", "S_NAZEV", "ID_NAVRHUJE", "S_EMAIL", "ID_SPONZOR", "ID_PMANAGER", "S_POPIS", "ND_VYNOS", "S_MENAVYNOS", "ND_NAKLAD", "S_MENANAKLAD", "DT_ZACATEK", "DT_KONEC", "NAVRHUJE", "SPONZOR", "PMANAGER") AS 
  select 
  pn.id, 
  pn.s_nazev, 
  pn.id_navrhuje, 
  pn.s_email, 
  pn.id_sponzor, 
  pn.id_pmanager, 
  pn.s_popis, 
  pn.nd_vynos, 
  pn.s_menavynos, 
  pn.nd_naklad, 
  pn.s_menanaklad, 
  pn.dt_zacatek, 
  pn.dt_konec, 
  case 
    when (pn.id_navrhuje is null) then pn.s_email 
    when (pn.id_navrhuje < 0) then pn.s_email 
	else (u1.s_titulypred || ' ' || u1.s_krestni || ' ' || u1.s_prijmeni || ' ' || u1.s_titulypo) 
  end navrhuje, 
  (u2.s_titulypred || ' ' || u2.s_krestni || ' ' || u2.s_prijmeni || ' ' || u2.s_titulypo) sponzor, 
  (u3.s_titulypred || ' ' || u3.s_krestni || ' ' || u3.s_prijmeni || ' ' || u3.s_titulypo) pmanager 
from 
  kp_ktg_projektnavrh pn, 
  ktg_appuser u1, 
  ktg_appuser u2, 
  ktg_appuser u3 
where pn.id_navrhuje = u1.id (+) 
  and pn.id_sponzor = u2.id (+) 
  and pn.id_pmanager = u3.id (+)

;


PROMPT Completed VW_KTG_PROJEKTNAVRH.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KTG_PROJEKTSIMPLE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KTG_PROJEKTSIMPLE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KTG_PROJEKTSIMPLE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KTG_PROJEKTSIMPLE" ("ID", "S_NAZEV", "S_CISLOOLD", "ID_STATUS", "STATUS", "DT_DATUMSTATUSZMENA", "ID_NAVRHUJE", "NAVRHUJE", "ID_SPONZOR", "SPONZOR", "ID_TOP", "TOP", "ID_PMANAGER", "PMANAGER", "ID_MNGSEGMENTBOSS", "MNGSEGMENTBOSS", "S_MENANAKLADY", "ID_MNGSEGMENT", "MNGSEGMENT", "DT_MEMORANDUMDALSI", "NL_DNYDOMEMORANDA") AS 
  select p.id, 
       p.s_nazev, 
	   p.s_cisloold, 
	   p.id_status, 
	   ps.S_POPIS status, 
	   p.dt_datumstatuszmena, 
	   p.id_navrhuje, 
       (select u.s_titulypred || ' ' || u.s_krestni || ' ' || u.s_prijmeni || ' ' || u.s_titulypo from ktg_appuser u where u.id = p.ID_NAVRHUJE) navrhuje, 
	   p.id_sponzor, 
       (select u.s_titulypred || ' ' || u.s_krestni || ' ' || u.s_prijmeni || ' ' || u.s_titulypo from ktg_appuser u where u.id = p.ID_SPONZOR) sponzor, 
	   p.id_top, 
       (select u.s_titulypred || ' ' || u.s_krestni || ' ' || u.s_prijmeni || ' ' || u.s_titulypo from ktg_appuser u where u.id = p.ID_TOP) top, 
	   p.id_pmanager, 
       (select u.s_titulypred || ' ' || u.s_krestni || ' ' || u.s_prijmeni || ' ' || u.s_titulypo from ktg_appuser u where u.id = p.ID_PMANAGER) pmanager, 
	   p.id_mngSegmentBoss, 
	   (select u.s_titulypred || ' ' || u.s_krestni || ' ' || u.s_prijmeni || ' ' || u.s_titulypo from ktg_appuser u where u.id = p.id_mngSegmentBoss) mngSegmentBoss, 
       p.s_menanaklady, 
	   p.id_mngSegment, 
	   (select seg.s_popis from kp_cis_mngSegment seg where seg.id = p.ID_MNGSEGMENT) mngSegment, 
	   p.DT_MEMORANDUMDALSI, 
	   trunc(sysdate) - p.DT_MEMORANDUMDALSI nl_dnyDoMemoranda 
from kp_ktg_projekt p, 
	 kp_cis_projektstatus ps 
where p.ID_STATUS = ps.ID (+)

;


PROMPT Completed VW_KTG_PROJEKTSIMPLE.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KTG_PROJEKTUSERPRAVA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KTG_PROJEKTUSERPRAVA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KTG_PROJEKTUSERPRAVA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KTG_PROJEKTUSERPRAVA" ("ID", "S_NAZEV", "S_CISLOOLD", "ID_STATUS", "STATUS", "DT_DATUMSTATUSZMENA", "ID_NAVRHUJE", "NAVRHUJE", "ID_SPONZOR", "SPONZOR", "ID_TOP", "TOP", "ID_PMANAGER", "PMANAGER", "ID_MNGSEGMENTBOSS", "MNGSEGMENTBOSS", "ID_KATEGORIE", "KATEGORIE", "S_MENANAKLADY", "DT_STARTOCENENI", "DT_KONECOCENENI", "ID_FREKVENCE", "FREKVENCE", "S_POPIS", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "ID_PROJEKTNAVRH", "DT_MEMORANDUMDALSI", "NL_MEMORANDUMMESICU", "C_MEMORANDUMSPLNENO", "ID_APPUSER", "S_USERID", "ID_MNGSEGMENT", "MNGSEGMENT", "ND_CASTKAPRECENENI", "ID_TYPBILANCE", "C_SLEDUJEBUDGET", "ID_TYPBUDGETU", "TYPBILANCE", "TYPBUDGETU", "NL_CNTSLD") AS 
  select p.id, 
	   p.s_nazev, 
	   p.s_cisloold, 
	   p.id_status, 
	   p.status, 
	   p.dt_datumstatuszmena, 
	   p.id_navrhuje, 
	   p.navrhuje, 
	   p.id_sponzor, 
	   p.sponzor, 
	   p.id_top, 
	   p.top, 
	   p.id_pmanager, 
	   p.pmanager, 
	   p.id_mngSegmentBoss, 
	   p.mngSegmentBoss, 
	   p.id_kategorie, 
	   p.kategorie, 
	   p.s_menanaklady, 
	   p.dt_startoceneni, 
	   p.dt_konecoceneni, 
	   p.id_frekvence, 
	   p.frekvence, 
	   p.s_popis, 
	   p.dt_platnostod, 
	   p.dt_platnostdo, 
	   p.id_projektnavrh, 
	   p.dt_memorandumdalsi, 
	   p.nl_memorandummesicu, 
	   p.c_memorandumSplneno, 
	   R.ID_APPUSER, 
	   U.S_USERID, 
	   p.id_mngSegment, 
	   p.mngSegment, 
	   p.ND_CASTKAPRECENENI, 
	   p.id_typBilance, 
	   p.c_sledujeBudget, 
       p.id_typBudgetu, 
	   p.typBilance, 
	   p.typBudgetu, 
	   nl_cntSLD 
from vw_ktg_projekt p, 
	 KP_REL_APPUSER_PROJEKT R, 
	 KTG_APPUSER U 
where P.ID = R.ID_KTGPROJEKT 
  AND U.ID = R.ID_APPUSER 
  AND R.ID_TYPPRAVA = 1

;


PROMPT Completed VW_KTG_PROJEKTUSERPRAVA.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KTG_UCETNISPOLECNOST.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KTG_UCETNISPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KTG_UCETNISPOLECNOST
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KTG_UCETNISPOLECNOST" ("ID", "S_NAZEV", "S_ICO", "S_ICOFORMATOVANE", "C_EXTSYSTEM", "S_DBLINK", "ID_CISSUBJECT", "SUBJECT", "S_MENA", "ID_KATEGORIE", "SPOLKAT", "ID_ZODPOVEDNAUCETNI", "ZODPOVEDNAUCETNI", "DT_DATUMARCHIVACE", "C_OPCE", "ID_CISOPCE", "CISOPCE", "ID_CISNOMINEE", "NOMINEE", "ID_ODPOVEDNAOSOBA", "ODPOVEDNAOSOBA", "ID_TOPMNG", "TOPMNG", "ID_ADMINISTRATOR", "ADMINISTRATOR", "ID_CISKATSPOL", "KATSPOL", "S_POZNAMKA", "S_COUNTRY", "MAX_DATUM", "ZJ", "VJ", "POCETTRANSAKCI", "DT_MAXTRANSAKCE", "ID_TYPPROJEKTU", "C_ONLINE", "DT_ONLINEOD", "MNGSEGMENT", "ID_MNGSEGMENT", "C_POCITATROZVAHU", "C_AUTOMATICKEGENEROVANI", "C_RKC", "S_LOCALE", "DT_UCETNIOBDOBISTART", "DT_UCETNIOBDOBIKONEC", "S_DUVODOFFLINE", "S_ZKRATKA", "SPIN_ID", "TOPAS_ID", "QUEST_ID", "S_SOUBORPREDPONA", "ID_NADRIZENAUCETNI", "NADRIZENAUCETNI", "ID_SPRAVCEKONSOLIDACE", "SPRAVCEKONSOLIDACE", "ID_MNGSEGMENTBOSS", "MNGSEGMENTBOSS", "DT_LASTCLOSEDATE", "C_TESTOVATMAJUCAST") AS 
  SELECT s.ID, s.s_nazev, s.s_ico, 
          (SELECT s_ico 
             FROM kp_ktg_spolecnost 
            WHERE id_ktgspolecnost = s.ID) s_icoformatovane, s.c_extsystem, 
          s.s_dblink, s.id_cissubject, cs.s_popis subject, s.s_mena, 
          s.id_kategorie, sk.s_popis spolkat, s.id_zodpovednaucetni, 
             u0.s_titulypred 
          || ' ' 
          || u0.s_krestni 
          || ' ' 
          || u0.s_prijmeni 
          || ' ' 
          || u0.s_titulypo zodpovednaucetni, 
          s.dt_datumarchivace, s.c_opce, s.id_cisopce, co.s_popis cisopce, 
          s.id_cisnominee, cn.s_popis nominee, s.id_odpovednaosoba, 
             u1.s_titulypred 
          || ' ' 
          || u1.s_krestni 
          || ' ' 
          || u1.s_prijmeni 
          || ' ' 
          || u1.s_titulypo odpovednaosoba, 
          s.id_topmng, 
             u2.s_titulypred 
          || ' ' 
          || u2.s_krestni 
          || ' ' 
          || u2.s_prijmeni 
          || ' ' 
          || u2.s_titulypo topmng, 
          s.id_administrator, 
             u3.s_titulypred 
          || ' ' 
          || u3.s_krestni 
          || ' ' 
          || u3.s_prijmeni 
          || ' ' 
          || u3.s_titulypo administrator, 
          s.id_ciskatspol, cks.s_zkratka katspol, s.s_poznamka, p.s_country, 
          pos.max_datum, NVL (pos.nd_zj, 0) zj, NVL (pos.nd_vj, 0) vj, 
          NVL (pos.nl_pocettransakci, 0) pocettransakci, pos.dt_maxtransakce, 
          s.id_typprojektu, s.c_online, s.dt_onlineod, 
          (SELECT seg.s_popis 
             FROM kp_cis_mngsegment seg 
            WHERE seg.ID = s.id_mngsegment) mngsegment, s.id_mngsegment, 
          s.c_pocitatrozvahu, s.c_automatickegenerovani, s.c_rkc, s.s_locale, 
          s.dt_ucetniobdobistart, s.dt_ucetniobdobikonec, s.s_duvodoffline, 
          s.s_zkratka, s.spin_id, s.topas_id, s.quest_id, s.s_souborpredpona, 
          u0.id_nadrizenaucetni, 
          (SELECT    u.s_titulypred 
                  || ' ' 
                  || u.s_krestni 
                  || ' ' 
                  || u.s_prijmeni 
                  || ' ' 
                  || u.s_titulypo 
             FROM ktg_appuser u 
            WHERE u.ID = u0.id_nadrizenaucetni) nadrizenaucetni, 
          s.id_spravcekonsolidace, 
          (SELECT    u.s_titulypred 
                  || ' ' 
                  || u.s_krestni 
                  || ' ' 
                  || u.s_prijmeni 
                  || ' ' 
                  || u.s_titulypo 
             FROM ktg_appuser u 
            WHERE u.ID = s.id_spravcekonsolidace) spravcekonsolidace, 
          s.id_mngsegmentboss, 
          (SELECT    u.s_titulypred 
                  || ' ' 
                  || u.s_krestni 
                  || ' ' 
                  || u.s_prijmeni 
                  || ' ' 
                  || u.s_titulypo 
             FROM ktg_appuser u 
            WHERE u.ID = s.id_mngsegmentboss) mngsegmentboss, 
          s.dt_lastclosedate, 
		  s.c_testovatMajUcast 
     FROM kp_ktg_ucetnispolecnost s, 
          kp_cis_subject cs, 
          kp_cis_spolecnostkategorie sk, 
          ktg_appuser u0, 
          kp_cis_opce co, 
          kp_cis_nominee cn, 
          ktg_appuser u1, 
          ktg_appuser u2, 
          ktg_appuser u3, 
          kp_cis_katspol cks, 
          kp_ktg_spolecnost p, 
          vw_kp_dokladposledni pos 
    WHERE s.id_cissubject = cs.ID 
      AND s.id_kategorie = sk.ID 
      AND s.id_zodpovednaucetni = u0.ID(+) 
      AND s.id_cisopce = co.ID 
      AND s.id_cisnominee = cn.ID 
      AND s.id_odpovednaosoba = u1.ID(+) 
      AND s.id_topmng = u2.ID(+) 
      AND s.id_administrator = u3.ID(+) 
      AND s.id_ciskatspol = cks.ID 
      AND s.ID = p.id_ktgspolecnost(+) 
      AND s.ID = pos.id_ktgucetnispolecnost(+)
;


PROMPT Completed VW_KTG_UCETNISPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KTG_UCSPOLPREDAVANI.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KTG_UCSPOLPREDAVANI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KTG_UCSPOLPREDAVANI
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KTG_UCSPOLPREDAVANI" ("ID_KTGUCETNISPOLECNOST", "ID_CISPRENOSPRIORITA", "PRENOSPRIORITA", "ID_CISPRENOSKATEGORIE", "PRENOSKATEGORIE", "S_ACCSTATUS", "S_UZAVRENEUCETNICTVI", "DT_DATUM", "DT_ODSOUHLASENOJARKA", "ID_ODSOUHLASENOJARKA", "DT_ODSOUHLASENOJANKA", "ID_ODSOUHLASENOJANKA", "DT_ODSOUHLASENOTOP", "ID_ODSOUHLASENOTOP", "ODSOUHLASENOJARKA", "ODSOUHLASENOJANKA", "ODSOUHLASENOTOP", "SPOLECNOST") AS 
  select 
  p.id_ktgucetnispolecnost, 
  p.id_cisprenospriorita, 
  c.s_popis, 
  p.id_cisprenoskategorie, 
  k.s_popis, 
  p.s_accstatus, 
  p.s_uzavreneucetnictvi, 
  p.dt_datum, 
  p.dt_odsouhlasenojarka, 
  p.id_odsouhlasenojarka, 
  p.dt_odsouhlasenojanka, 
  p.id_odsouhlasenojanka, 
  p.dt_odsouhlasenotop, 
  p.id_odsouhlasenotop, 
  u1.s_titulypred || ' ' || u1.s_krestni || ' ' || u1.s_prijmeni || ' ' || u1.s_titulypo, 
  u2.s_titulypred || ' ' || u2.s_krestni || ' ' || u2.s_prijmeni || ' ' || u2.s_titulypo, 
  u3.s_titulypred || ' ' || u3.s_krestni || ' ' || u3.s_prijmeni || ' ' || u3.s_titulypo, 
  s.s_nazev 
from kp_ktg_ucspolpredavani p, 
     kp_cis_prenospriorita c, 
     kp_cis_prenoskategorie k, 
	 ktg_appuser u1, 
     ktg_appuser u2, 
	 ktg_appuser u3, 
	 kp_ktg_ucetnispolecnost s 
where p.id_cisprenospriorita = c.id(+) 
  and p.id_cisprenoskategorie = k.id(+) 
  and p.id_odsouhlasenojarka = u1.id(+) 
  and p.id_odsouhlasenojanka = u2.id(+) 
  and p.id_odsouhlasenotop = u3.id(+) 
  and p.id_ktgucetnispolecnost = s.id(+)

;


PROMPT Completed VW_KTG_UCSPOLPREDAVANI.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KTG_UVER.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KTG_UVER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KTG_UVER
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KTG_UVER" ("ID", "DATUM", "ID_KTGPROJEKT", "PROJEKT", "ID_KTGODBOR", "ODBOR", "ID_TYPKATEGORIE", "TYPKATEGORIE", "S_UCET", "S_POPIS", "ID_KTGSPOLECNOST", "SPOLECNOST", "ND_CASTKAMENA", "S_MENA", "ND_CASTKACZK", "ND_UROK", "ID_EXTSYSTEM", "ID_EXTSYSTEM2", "DT_OPENDATE", "DT_ENDDATE", "ID_KTGUCETNISPOLECNOST", "ID_DOKLAD", "ND_CASTKAMENA_CR", "ND_CASTKACZK_CR", "DT_PLATNOSTOD_CR", "DT_PLATNOSTDO_CR", "S_UCET_CR", "CLENJTFGKONS", "S_NUMBER0", "KO", "SPRAVCE", "ID_MNGSEGMENTSPOL", "ID_MNGSEGMENTPROJ", "MNGSEGMENTSPOL", "MNGSEGMENTPROJ", "SCORINGREF_1", "KLASIFIKACE", "AVAIL_KONTOKORENT", "DOC_DESCRIPTION") AS 
  SELECT u.ID, u.datum, u.id_ktgprojekt, p.s_nazev projekt, u.id_ktgodbor, 
          (SELECT o.s_nazev odbor 
             FROM kp_ktg_odbor o 
            WHERE u.id_ktgodbor = o.ID) odbor, 
		  --u.id_typkategorie, 
          --u.typkategorie, 
		  (SELECT um.id_typkategorie 
               FROM kp_dat_uvermanual um 
              WHERE TRIM (u.id_extsystem) = 
                                       TRIM (um.id_extsystem) 
                AND TRIM (u.id_extsystem2) = TRIM (um.id_extsystem2)) 
                                                              id_typkategorie, 
            (SELECT c.s_popis 
               FROM kp_dat_uvermanual um, kp_cis_projektuver c 
              WHERE TRIM (u.id_extsystem) = 
                                          TRIM (um.id_extsystem) 
                AND TRIM (u.id_extsystem2) = TRIM (um.id_extsystem2) 
                AND um.id_typkategorie = c.ID) typkategorie, 
		  u.s_ucet, u.s_popis, u.id_ktgspolecnost, 
          s.s_nazev spolecnost, u.nd_castkamena, u.s_mena, u.nd_castkaczk, 
          u.nd_urok, u.id_extsystem, u.id_extsystem2, u.dt_opendate, 
          u.dt_enddate, u.id_ktgucetnispolecnost, u.id_doklad, 
          u.nd_castkamena_cr, u.nd_castkaczk_cr, u.dt_platnostod_cr, 
          u.dt_platnostdo_cr, u.s_ucet_cr, u.clenjtfgkons, u.s_number0, u.ko, 
          u.spravce, us.id_mngsegment id_mngsegmentspol, 
          p.id_mngsegment id_mngsegmentproj, 
          (SELECT cis.s_popis 
             FROM kp_cis_mngsegment cis 
            WHERE cis.ID = us.id_mngsegment) mngsegmentspol, 
          (SELECT cis.s_popis 
             FROM kp_cis_mngsegment cis 
            WHERE cis.ID = p.id_mngsegment) mngsegmentproj, u.scoringref_1, 
          u.klasifikace, u.avail_kontokorent, u.doc_description 
     FROM kp_dat_uver u, 
          kp_ktg_projekt p, 
          kp_ktg_spolecnost s, 
          kp_ktg_ucetnispolecnost us 
    WHERE u.id_ktgprojekt = p.ID(+) 
      AND u.id_ktgspolecnost = s.ID(+) 
      AND s.id_ktgspolecnost = us.ID(+)

;


PROMPT Completed VW_KTG_UVER.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KTG_UVERSPLATKY.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KTG_UVERSPLATKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KTG_UVERSPLATKY
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KTG_UVERSPLATKY" ("DT_DATUM", "ND_CASTKA_LNS", "ND_CASTKA_RED", "ND_CASTKA_INT", "S_POZNAMKA", "ID_EXTSYSTEM") AS 
  select lrl.lns_red_date dt_datum, 
       lrl.lns_amount nd_castka_lns, 
	   lrl.red_amount nd_castka_red, 
	   lrl.int_amount nd_castka_int, 
	   lrl.lns_red_note s_poznamka, 
	   lrl.fk_prod_contract id_extSystem 
from LOAN_RED_LOG@quaestor lrl 
union 
select lrl.lns_red_date dt_datum, 
       lrl.lns_amount nd_castka_lns, 
	   lrl.red_amount nd_castka_red, 
	   lrl.int_amount nd_castka_int, 
	   lrl.lns_red_note s_poznamka, 
	   lrl.fk_prod_contract id_extSystem 
from LOAN_RED_LOG@quaestor_sk lrl 
order by 1 desc

;


PROMPT Completed VW_KTG_UVERSPLATKY.sql
PROMPT


-- ============================================================================
-- Deploy: VW_KTG_UVERSPLATKYHIST.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_KTG_UVERSPLATKYHIST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_KTG_UVERSPLATKYHIST
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_KTG_UVERSPLATKYHIST" ("DT_DATUM", "ND_CASTKA_LNS", "ND_CASTKA_RED", "ND_CASTKA_INT", "S_POZNAMKA", "ID_EXTSYSTEM", "DT_DATUMBACKUP") AS 
  select lrl.lns_red_date dt_datum, 
       lrl.lns_amount nd_castka_lns, 
	   lrl.red_amount nd_castka_red, 
	   lrl.int_amount nd_castka_int, 
	   lrl.lns_red_note s_poznamka, 
	   lrl.fk_prod_contract id_extSystem, 
	   lrl.backup_date dt_datumBackup 
from LOAN_RED_LOG_HIST@q56 lrl 
order by lrl.backup_date desc, lrl.lns_red_date desc

;


PROMPT Completed VW_KTG_UVERSPLATKYHIST.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_LOG_DWH.sql: 'utf-8' codec can't decode byte 0xe9 in position 603: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_LOG_GENEROVANIZAMEK.sql: 'utf-8' codec can't decode byte 0xed in position 386: invalid continuation byte


-- ============================================================================
-- Deploy: VW_LOG_GENEROVANIZAMEKPROTOKOL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_LOG_GENEROVANIZAMEKPROTOKOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_LOG_GENEROVANIZAMEKPROTOKOL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_LOG_GENEROVANIZAMEKPROTOKOL" ("DT_DATUM", "NL_KROK", "AKCE", "UROVEN", "S_UZIVATEL", "DT_TIMESTAMP", "S_DUVOD", "ID_KTGUCETNISPOLECNOST", "S_NAZEV", "S_ICO", "ID_DOKLAD", "SOUBOR", "DT_VYTVORENO", "S_NAZEV_SKUPINA4") AS 
  SELECT v.dt_datum,
    d.nl_krok,
    v.akce,
    v.uroven,
    v.s_uzivatel,
    v.dt_timestamp,
    v.s_duvod,
    v.id_ktgucetnispolecnost,
    s.s_nazev,
    s.s_ico,
    d.ID id_doklad,
    'Bilance'
    || DECODE (d.nl_krok, 2, 'IFRS', '')
    || '_'
    || TO_CHAR (v.dt_datum, 'yyyy-mm-dd')
    || '.xls' soubor,
    d.dt_vytvoreno,
    (SELECT us.s_nazev
    FROM kp_rel_subkonsolidaceclen c,
      kp_ktg_subkonsolidace sub,
      kp_ktg_ucetnispolecnost us
    WHERE c.id_ktgsubkonsolidace   = sub.id_ktgucetnispolecnost
    AND sub.id_ktgucetnispolecnost = us.ID
    AND sub.id_ktgucetniskupina    = 4
    AND c.id_ktgucetnispolecnost   = v.id_ktgucetnispolecnost
    AND v.dt_datum BETWEEN c.dt_clenstviod AND c.dt_clenstvido
    and rownum = 1 --esc 10/2010
    ) s_nazev_skupina4
  FROM vw_log_generovanizamek v,
    kp_ktg_ucetnispolecnost s,
    kp_dat_doklad d
  WHERE v.id_ktgucetnispolecnost = s.ID
  AND d.id_ktgucetnispolecnost   = v.id_ktgucetnispolecnost
  AND d.dt_datum                 = v.dt_datum
  AND d.nl_krok                 IN (1, 2)
  AND d.id_ktgucetnispolecnost   = d.id_subkonsolidace
  ORDER BY s.s_nazev,
    d.nl_krok,
    v.dt_timestamp
;


PROMPT Completed VW_LOG_GENEROVANIZAMEKPROTOKOL.sql
PROMPT


-- ============================================================================
-- Deploy: VW_LOG_PROJEKT.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_LOG_PROJEKT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_LOG_PROJEKT
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_LOG_PROJEKT" ("ID", "S_NAZEV", "S_CISLOOLD", "ID_STATUS", "STATUS", "DT_DATUMSTATUSZMENA", "ID_NAVRHUJE", "NAVRHUJE", "ID_SPONZOR", "SPONZOR", "ID_TOP", "TOP", "ID_PMANAGER", "PMANAGER", "ID_KATEGORIE", "KATEGORIE", "S_MENANAKLADY", "DT_STARTOCENENI", "DT_KONECOCENENI", "ID_FREKVENCE", "FREKVENCE", "S_POPIS", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "ID_PROJEKTNAVRH", "DT_MEMORANDUMDALSI", "NL_MEMORANDUMMESICU", "C_MEMORANDUMSPLNENO", "S_UZIVATEL", "DT_ZMENY", "ID_MNGSEGMENT", "MNGSEGMENT", "ID_TYPBILANCE", "C_SLEDUJEBUDGET", "ID_TYPBUDGETU", "TYPBILANCE", "TYPBUDGETU") AS 
  select p.id, 
       p.s_nazev, 
	   p.s_cisloold, 
	   p.id_status, 
	   ps.S_POPIS status, 
	   p.dt_datumstatuszmena, 
	   p.id_navrhuje, 
       u1.s_titulypred || ' ' || u1.s_krestni || ' ' || u1.s_prijmeni || ' ' || u1.s_titulypo navrhuje, 
	   p.id_sponzor, 
       u2.s_titulypred || ' ' || u2.s_krestni || ' ' || u2.s_prijmeni || ' ' || u2.s_titulypo sponzor, 
	   p.id_top, 
       u3.s_titulypred || ' ' || u3.s_krestni || ' ' || u3.s_prijmeni || ' ' || u3.s_titulypo top, 
	   p.id_pmanager, 
       u4.s_titulypred || ' ' || u4.s_krestni || ' ' || u4.s_prijmeni || ' ' || u4.s_titulypo pmanager, 
       p.id_kategorie, 
	   k.S_POPIS kategorie, 
	   p.s_menanaklady, 
	   p.dt_startoceneni, 
	   p.dt_konecoceneni, 
	   p.id_frekvence, 
	   freq.s_popis frekvence, 
	   p.s_popis, 
	   p.dt_platnostod, 
	   p.dt_platnostdo, 
	   p.id_projektnavrh, 
	   p.dt_memorandumdalsi, 
	   p.nl_memorandummesicu, 
	   case 
	     when (select count(*) from kp_dat_projektMemorandumZprava mz where mz.id_ktgprojekt = p.id and p.dt_memorandumdalsi > sysdate)>0 then '1' 
		 else '0' 
	   end c_memorandumSplneno, 
	   p.s_uzivatel, 
	   p.dt_zmeny, 
	   p.id_mngSegment, 
	   (select seg.s_popis from kp_cis_mngSegment seg where seg.id = p.ID_MNGSEGMENT) mngSegment, 
	   p.id_typBilance, 
	   p.c_sledujeBudget, 
       p.id_typBudgetu, 
	   (select tb.s_popis from kp_cis_typProjektoveBilance tb where tb.id = p.ID_TYPBILANCE) typBilance, 
	   (select tb.s_popis from kp_cis_typBudgetuProjektu tb where tb.id = p.ID_TYPBUDGETU) typBudgetu 
from kp_log_projekt p, 
     kp_cis_projektkategorie k, 
	 kp_cis_projektstatus ps, 
	 ktg_appuser u1, 
	 ktg_appuser u2, 
	 ktg_appuser u3, 
	 ktg_appuser u4, 
	 kp_cis_projektfrekvence freq 
where p.ID_KATEGORIE = k.ID (+) 
  and p.ID_STATUS = ps.ID (+) 
  and p.ID_NAVRHUJE = u1.ID (+) 
  and p.ID_SPONZOR = u2.ID (+) 
  and p.ID_TOP = u3.ID (+) 
  and p.ID_PMANAGER = u4.ID (+) 
  and p.id_frekvence = freq.id (+) 
order by p.DT_ZMENY desc

;


PROMPT Completed VW_LOG_PROJEKT.sql
PROMPT


-- ============================================================================
-- Deploy: VW_LOG_UCETNISPOLECNOST.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_LOG_UCETNISPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_LOG_UCETNISPOLECNOST
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_LOG_UCETNISPOLECNOST" ("ID", "S_NAZEV", "S_ICO", "C_EXTSYSTEM", "S_DBLINK", "ID_CISSUBJECT", "SUBJECT", "S_MENA", "ID_KATEGORIE", "SPOLKAT", "ID_ZODPOVEDNAUCETNI", "ZODPOVEDNAUCETNI", "DT_DATUMARCHIVACE", "C_OPCE", "ID_CISOPCE", "CISOPCE", "ID_CISNOMINEE", "NOMINEE", "ID_ODPOVEDNAOSOBA", "ODPOVEDNAOSOBA", "ID_TOPMNG", "TOPMNG", "ID_ADMINISTRATOR", "ADMINISTRATOR", "ID_CISKATSPOL", "KATSPOL", "S_POZNAMKA", "S_COUNTRY", "ID_TYPPROJEKTU", "C_ONLINE", "DT_ONLINEOD", "DT_DATUMZMENY", "S_UZIVATEL") AS 
  select s.id, 
       s.s_nazev, 
	   s.s_ico, 
	   s.c_extsystem, 
	   s.s_dblink, 
	   s.id_cissubject, 
	   cs.s_popis subject, 
	   s.s_mena, 
	   s.id_kategorie, 
	   sk.s_popis spolkat, 
	   s.id_zodpovednaucetni, 
	   u0.s_titulypred || ' ' || u0.s_krestni || ' ' || u0.s_prijmeni || ' ' || u0.s_titulypo zodpovednaucetni, 
	   s.dt_datumarchivace, 
	   s.c_opce, 
	   s.id_cisopce, 
	   co.s_popis cisopce, 
	   s.id_cisnominee, 
	   cn.s_popis nominee, 
       s.id_odpovednaosoba, 
	   u1.s_titulypred || ' ' || u1.s_krestni || ' ' || u1.s_prijmeni || ' ' || u1.s_titulypo odpovednaosoba, 
	   s.id_topmng, 
	   u2.s_titulypred || ' ' || u2.s_krestni || ' ' || u2.s_prijmeni || ' ' || u2.s_titulypo topmng, 
	   s.id_administrator, 
	   u3.s_titulypred || ' ' || u3.s_krestni || ' ' || u3.s_prijmeni || ' ' || u3.s_titulypo administrator, 
  	   s.id_ciskatspol, 
	   cks.s_zkratka katspol, 
	   s.s_poznamka, 
	   P.S_COUNTRY, 
	   s.ID_TYPPROJEKTU, 
	   s.C_ONLINE, 
	   s.DT_ONLINEOD, 
	   s.DT_DATUMZMENY, 
	   s.S_UZIVATEL 
from kp_log_ucetnispolecnost s, 
	 kp_cis_subject cs, 
	 kp_cis_spolecnostkategorie sk, 
	 ktg_appuser u0, 
	 kp_cis_opce co, 
	 kp_cis_nominee cn, 
     ktg_appuser u1, 
	 ktg_appuser u2, 
	 ktg_appuser u3, 
	 kp_cis_katspol cks, 
	 KP_KTG_SPOLECNOST P 
where s.id_cissubject = cs.id 
  and s.id_kategorie = sk.id 
  and s.id_zodpovednaucetni = u0.id (+) 
  and s.id_cisopce = co.id 
  and s.id_cisnominee = cn.id 
  and s.id_odpovednaosoba = u1.id (+) 
  and s.id_topmng = u2.id (+) 
  and s.id_administrator = u3.id (+) 
  and s.id_ciskatspol = cks.id 
  and S.ID = P.ID_KTGSPOLECNOST(+) 
order by s.DT_DATUMZMENY desc

;


PROMPT Completed VW_LOG_UCETNISPOLECNOST.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_MP_2.sql: 'utf-8' codec can't decode byte 0xe1 in position 1785: invalid continuation byte


-- ============================================================================
-- Deploy: VW_OLAP_DOKLADTOEXPORT.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_OLAP_DOKLADTOEXPORT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_OLAP_DOKLADTOEXPORT
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_OLAP_DOKLADTOEXPORT" ("ID", "ID_KTGUCETNISPOLECNOST", "UCETNISPOLECNOST", "DT_DATUM", "S_MENA", "NL_KROK", "DT_VYTVORENO", "S_UZIVATEL", "SUBKONSOLIDACE") AS 
  SELECT d.ID, d.id_ktgucetnispolecnost, 
          (SELECT s.s_nazev 
             FROM db_jt.kp_ktg_ucetnispolecnost s 
            WHERE s.ID = d.id_ktgucetnispolecnost) ucetnispolecnost, 
          d.dt_datum, d.s_mena, d.nl_krok, d.dt_vytvoreno, d.s_uzivatel, 
          (SELECT s.s_nazev 
             FROM db_jt.kp_ktg_ucetnispolecnost s 
            WHERE s.ID = 
                     DECODE (d.id_subkonsolidace, 
                             d.id_ktgucetnispolecnost, NULL, 
                             d.id_subkonsolidace 
                            )) subkonsolidace 
     FROM kp_dat_doklad d, kp_ktg_doklad k 
    WHERE d.id_ktgdoklad = k.ID 
      AND k.id_cisdoklad = 1 
	  and (d.c_baseDoklad = '1' or d.NL_KROK >= 100) 
--      AND d.ID > 373876 
      AND d.dt_datumexportolap IS NULL 
      AND dt_datum > '31.12.2004'


;


PROMPT Completed VW_OLAP_DOKLADTOEXPORT.sql
PROMPT


-- ============================================================================
-- Deploy: VW_PROTISTRANA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_PROTISTRANA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_PROTISTRANA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_PROTISTRANA" ("ID", "S_NAZEV", "S_ICO", "S_COUNTRY", "C_INDICATOR_PC", "S_EKONOM_SEKTOR", "LISTGROUP", "KATEGORIEKOEF", "ID_KTGSPOLECNOST", "DT_DATUMZALOZENI", "S_ULICE", "S_PSC", "S_MESTO", "S_DIC", "S_UCETSCP", "S_REGRMS", "S_KODKATEGORIEPROTISTRANA", "S_KODKATEGORIEPROTISTRANA_2") AS 
  SELECT s.id,
    s_nazev,
    s_ico,
    --trim(s.s_country || ' ' || stat.s_popis) s_country,    
    s_country, 
    c_indicator_pc,
    s_ekonom_sektor,
    db_jt.f_getUnifGroup ( 0, s.id ) listGroup,
    s.kategorieKoef,
    s.ID_KTGSPOLECNOST,
    s.DT_DATUMZALOZENI,
    s.S_ULICE,
    s.S_PSC,
    s.S_MESTO,
    s.S_DIC,
    s.S_UCETSCP,
    s.S_REGRMS,
    s.s_kodkategorieprotistrana,
    s.s_kodkategorieprotistrana_2
  FROM db_jt.kp_ktg_Spolecnost s ,
       db_jt.kp_cis_stat stat
  WHERE
      s.s_country = stat.ID (+)
;


PROMPT Completed VW_PROTISTRANA.sql
PROMPT


-- ============================================================================
-- Deploy: VW_PROTISTRANADETAIL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_PROTISTRANADETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_PROTISTRANADETAIL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_PROTISTRANADETAIL" ("ID", "S_DBLINK", "ID_SPOLECNOST", "DETAILPROTISTRANA", "S_ICO", "S_NAZEV", "DT_ZMENA", "S_NUMBER0", "FIRMA_ID", "EO_ID", "BANKA_ID", "KID", "DOID", "PLATINST", "DATUMZALOZENI", "ULICE", "PSC", "MESTO", "STAT", "DIC", "UCETSCP", "REGRMS", "EKONOM_SEKTOR", "TYPOSOBY") AS 
  select
	p.id, d.s_dblink, p.id_spolecnost,
   decode ( p.id_databaze, 900, 'Manualni id= ' || p.id_spolecnost,
	db_dsa.f_getRelProtistrana ( d.s_dblink, p.s_number0, p.firma_id, p.eo_id, p.banka_id, p.kid, p.doid, p.platinst, p.eid ) ) detailProtistrana,
	p.s_ico, p.s_nazev, p.dt_zmena, p.s_number0, p.firma_id, p.eo_id, p.banka_id, p.kid, p.doid, p.platinst,
    datumZalozeni,ulice,psc,mesto,stat,dic,ucetSCP,regrms,ekonom_sektor,typOsoby
from
	db_dsa.KP_rel_Protistrana p,
	db_jt.KP_cis_databaze d
where p.id_databaze = d.id

;


PROMPT Completed VW_PROTISTRANADETAIL.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_PROTISTRANAHISTORIE.sql: 'utf-8' codec can't decode byte 0x9e in position 957: invalid start byte


-- ============================================================================
-- Deploy: VW_Q_PROJEKTODBOR.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_Q_PROJEKTODBOR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_Q_PROJEKTODBOR
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_Q_PROJEKTODBOR" ("ID", "PO_CODE", "PROJEKT_ID", "ODBOR_ID", "RS_CODE", "RS_NAME", "ID_KTGUCETNISPOLECNOST") AS 
  SELECT ROWNUM ID, q.po_code, SUBSTR (q.projekt_id, 1, 7) projekt_id, 
          SUBSTR (q.odbor_id, 1, 6) odbor_id, q.rs_code, q.rs_name, 
          q.id_ktgucetnispolecnost 
     FROM ( 
--CZ 
           SELECT   po.code po_code, po.projekt_id, po.odbor_id, 
                    rs.code rs_code, rs.NAME rs_name, 
                    1 id_ktgucetnispolecnost 
               FROM dsa.kp_ktg_projektodbor@quaestor po, 
                    quaestor.relation_status@quaestor rs 
              WHERE rs.code = po.code(+) 
           UNION 
           SELECT   po.code po_code, po.projekt_id, po.odbor_id, 
                    rs.code rs_code, rs.NAME rs_name, 
                    1 id_ktgucetnispolecnost 
               FROM dsa.kp_ktg_projektodbor@quaestor po, 
                    quaestor.relation_status@quaestor rs 
              WHERE rs.code(+) = po.code 
           UNION 
--SK 
           SELECT   po.code po_code, po.projekt_id, po.odbor_id, 
                    rs.code rs_code, rs.NAME rs_name, 
                    5000 id_ktgucetnispolecnost 
               FROM dsa.kp_ktg_projektodbor@quaestor_sk po, 
                    quaestor.relation_status@quaestor_sk rs 
              WHERE rs.code = po.code(+) 
           UNION 
           SELECT   po.code po_code, po.projekt_id, po.odbor_id, 
                    rs.code rs_code, rs.NAME rs_name, 
                    5000 id_ktgucetnispolecnost 
               FROM dsa.kp_ktg_projektodbor@quaestor_sk po, 
                    quaestor.relation_status@quaestor_sk rs 
              WHERE rs.code(+) = po.code 
           ORDER BY 6, 4, 1, 5) q

;


PROMPT Completed VW_Q_PROJEKTODBOR.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REL_ACC_JT2PPF.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REL_ACC_JT2PPF.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REL_ACC_JT2PPF
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REL_ACC_JT2PPF" ("S_JT_ACC", "S_JT_INFO", "S_PPF_ACC", "S_PPF_INFO") AS 
  select rel.jt_acc, rel.jt_info, cis.s_acc_id, cis.s_acc_info
FROM KP_REL_ACC_JT2PPF rel, 
     KP_CIS_ACC_PPF cis
WHERE rel.ppf_acc_id = cis.id
;


PROMPT Completed VW_REL_ACC_JT2PPF.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REL_GESTORTRANSAKCE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REL_GESTORTRANSAKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REL_GESTORTRANSAKCE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REL_GESTORTRANSAKCE" ("ID", "ID_MNG", "S_POPIS_MNG", "ID_TRAN", "S_KOD_TRAN", "S_KOMENT_TRAN", "ID_USR", "S_NAME_USR") AS 
  select  gt.id, gt.id_mngsegment ID_MNG, mng.s_popis S_POPIS_MNG, gt.id_typtransakce ID_TRAN, tt.s_kod S_KOD_TRAN, tt.s_komentar S_KOMENT_TRAN,  gt.id_appuser ID_USR, usr.s_username S_NAME_USR
from kp_rel_gestortransakce gt
      , kp_cis_typtransakce tt
      , kp_cis_mngsegment mng
      , ktg_appuser usr
where 
        gt.id_appuser = usr.id
      and gt.id_mngsegment = mng.id
      and gt.id_typtransakce = tt.id
;


PROMPT Completed VW_REL_GESTORTRANSAKCE.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REL_GESTORTRANSAKCE_SPOL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REL_GESTORTRANSAKCE_SPOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REL_GESTORTRANSAKCE_SPOL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REL_GESTORTRANSAKCE_SPOL" ("ID", "ID_SPOL", "S_NAZEV", "ID_TRAN", "S_KOD_TRAN", "S_KOMENT_TRAN", "ID_USR", "S_NAME_USR") AS 
  select  gt.id, 
        gt.id_spol ID_SPOL, 
        sp.s_nazev S_NAZEV, 
        gt.id_typtransakce ID_TRAN, 
        tt.s_kod S_KOD_TRAN, 
        tt.s_komentar S_KOMENT_TRAN,  
        gt.id_appuser ID_USR, 
        usr.s_username S_NAME_USR
from kp_rel_gestortransakce_spol gt
      , kp_cis_typtransakce     tt
      , kp_ktg_ucetnispolecnost sp
      , ktg_appuser usr
where 
        gt.id_appuser = usr.id
      and gt.id_spol = sp.id
      and gt.id_typtransakce = tt.id
;


PROMPT Completed VW_REL_GESTORTRANSAKCE_SPOL.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REL_PROJEKTAPPUSER.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REL_PROJEKTAPPUSER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REL_PROJEKTAPPUSER
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REL_PROJEKTAPPUSER" ("ID_KTGPROJEKT", "JMENO") AS 
  select distinct r.ID_KTGPROJEKT, 
       u.S_TITULYPRED || ' ' || u.S_KRESTNI || ' ' || u.S_PRIJMENI || ' ' || u.S_TITULYPO jmeno 
from KP_REL_APPUSER_PROJEKT r, 
     ktg_appuser u 
where r.ID_APPUSER = u.id

;


PROMPT Completed VW_REL_PROJEKTAPPUSER.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REL_SPOLECNOSTAPPUSER.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REL_SPOLECNOSTAPPUSER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REL_SPOLECNOSTAPPUSER
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REL_SPOLECNOSTAPPUSER" ("ID_KTGUCETNISPOLECNOST", "JMENO") AS 
  select distinct id_ktgucetnispolecnost, 
       u.S_TITULYPRED || ' ' || u.S_KRESTNI || ' ' || u.S_PRIJMENI || ' ' || u.S_TITULYPO jmeno 
from KP_REL_APPUSER_SPOLECNOSTPRAVO r, 
     ktg_appuser u 
where r.s_userid = u.s_userid

;


PROMPT Completed VW_REL_SPOLECNOSTAPPUSER.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REL_SUBKONSOLIDACECLEN.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REL_SUBKONSOLIDACECLEN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REL_SUBKONSOLIDACECLEN
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REL_SUBKONSOLIDACECLEN" ("ID_KTGUCETNISKUPINA", "S_NAZEV", "ID_KTGUCETNISPOLECNOST", "DT_PLATNOSTOD", "DT_PLATNOSTDO") AS 
  SELECT s.id_ktgucetniskupina, us.s_nazev, c.id_ktgucetnispolecnost,
          c.dt_clenstviod dt_platnostod, c.dt_clenstvido dt_platnostdo
     FROM kp_rel_subkonsolidaceclen c,
          kp_ktg_subkonsolidace s,
          kp_ktg_ucetnispolecnost us
    WHERE us.ID = c.id_ktgucetnispolecnost
      AND s.id_ktgucetnispolecnost = c.id_ktgsubkonsolidace
      AND c.c_clen = '1'

;


PROMPT Completed VW_REL_SUBKONSOLIDACECLEN.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REL_UCETNISKUPINACLEN.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REL_UCETNISKUPINACLEN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REL_UCETNISKUPINACLEN
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REL_UCETNISKUPINACLEN" ("ID_KTGUCETNISKUPINA", "ID_KTGUCETNISPOLECNOST", "DT_PLATNOSTOD", "DT_PLATNOSTDO", "S_NAZEV") AS 
  SELECT C.ID_KTGUCETNISKUPINA,C.ID_KTGUCETNISPOLECNOST,C.DT_PLATNOSTOD,C.DT_PLATNOSTDO,S.S_NAZEV 
FROM KP_REL_UCETNISKUPINACLEN C, 
     KP_KTG_UCETNISPOLECNOST S 
WHERE C.ID_KTGUCETNISPOLECNOST = S.ID

;


PROMPT Completed VW_REL_UCETNISKUPINACLEN.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_DOCNEZAUCTOVANO.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_DOCNEZAUCTOVANO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_DOCNEZAUCTOVANO
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_DOCNEZAUCTOVANO" ("MESIC", "ZODPOVEDNAUCETNI", "NEZAUCTOVANYCH", "SCHVALENYCH", "POMER") AS 
  SELECT NEZAUCTOVANE.MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO ZODPOVEDNAUCETNI, 
	   NEZAUCTOVANE.POCET, 
	   SCHVALENE.POCET, 
	   NEZAUCTOVANE.POCET/SCHVALENE.POCET*100 POMER 
FROM ( 
SELECT MESIC, ID_ZODPOVEDNAUCETNI, COUNT(*) POCET 
FROM ( 
SELECT D.ID, 
       S.ID_ZODPOVEDNAUCETNI, 
       CASE 
	     WHEN (EXISTS (SELECT NULL FROM KP_DAT_DOKUMENTRADEK DR 
		               WHERE D.ID = DR.ID_DOKUMENT AND 
		                   ((DR.DT_SCHVALENOODBOR IS NULL AND ID_ODBOROO IS NOT NULL) OR 
			                (DR.DT_SCHVALENOPROJEKT IS NULL AND ID_PROJEKTMAN IS NOT NULL) OR 
			                (DR.DT_SCHVALENOUCSPOL IS NULL AND ID_UCSPOLOO IS NOT NULL) OR 
			                (DR.DT_SCHVALENOTOP IS NULL AND ID_UCSPOLTOP IS NOT NULL) 
					       ) 
					  ) 
               OR (SELECT COUNT(*) FROM KP_DAT_DOKUMENTRADEK DR WHERE D.ID = DR.ID_DOKUMENT) = 0 
               OR (ID_GESTOR IS NOT NULL AND DT_GESTORSCHVALENO IS NULL)) THEN 0 
		 ELSE 1 
	   END SCHVALENO, 
	   CASE WHEN (D.DT_DATUMZAUCTOVANI IS NULL) THEN 0 ELSE 1 END ZAUCTOVANO, 
	   TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') MESIC 
FROM KP_DAT_DOKUMENT D, 
     KP_KTG_UCETNISPOLECNOST S 
WHERE D.ID_CISSTATUS=0 
  AND D.ID_KTGUCETNISPOLECNOST = S.ID 
  AND S.ID_ZODPOVEDNAUCETNI IS NOT NULL 
ORDER BY ID 
) 
WHERE SCHVALENO = 1 
  AND ZAUCTOVANO = 0 
GROUP BY MESIC, ID_ZODPOVEDNAUCETNI 
) NEZAUCTOVANE, 
( 
SELECT MESIC, ID_ZODPOVEDNAUCETNI, COUNT(*) POCET 
FROM ( 
SELECT D.ID, 
       S.ID_ZODPOVEDNAUCETNI, 
       CASE 
	     WHEN (EXISTS (SELECT NULL FROM KP_DAT_DOKUMENTRADEK DR 
		               WHERE D.ID = DR.ID_DOKUMENT AND 
		                   ((DR.DT_SCHVALENOODBOR IS NULL AND ID_ODBOROO IS NOT NULL) OR 
			                (DR.DT_SCHVALENOPROJEKT IS NULL AND ID_PROJEKTMAN IS NOT NULL) OR 
			                (DR.DT_SCHVALENOUCSPOL IS NULL AND ID_UCSPOLOO IS NOT NULL) OR 
			                (DR.DT_SCHVALENOTOP IS NULL AND ID_UCSPOLTOP IS NOT NULL) 
					       ) 
					  ) 
               OR (SELECT COUNT(*) FROM KP_DAT_DOKUMENTRADEK DR WHERE D.ID = DR.ID_DOKUMENT) = 0 
               OR (ID_GESTOR IS NOT NULL AND DT_GESTORSCHVALENO IS NULL)) THEN 0 
		 ELSE 1 
	   END SCHVALENO, 
	   CASE WHEN (D.DT_DATUMZAUCTOVANI IS NULL) THEN 0 ELSE 1 END ZAUCTOVANO, 
	   TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') MESIC 
FROM KP_DAT_DOKUMENT D, 
     KP_KTG_UCETNISPOLECNOST S 
WHERE D.ID_CISSTATUS=0 
  AND D.ID_KTGUCETNISPOLECNOST = S.ID 
  AND S.ID_ZODPOVEDNAUCETNI IS NOT NULL 
ORDER BY ID 
) 
WHERE SCHVALENO = 1 
GROUP BY MESIC, ID_ZODPOVEDNAUCETNI 
) SCHVALENE, 
  KTG_APPUSER U 
WHERE NEZAUCTOVANE.MESIC = SCHVALENE.MESIC 
  AND NEZAUCTOVANE.ID_ZODPOVEDNAUCETNI = SCHVALENE.ID_ZODPOVEDNAUCETNI 
  AND NEZAUCTOVANE.ID_ZODPOVEDNAUCETNI = U.ID 
UNION 
--VSE 
SELECT 'CELKEM', 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO ZODPOVEDNAUCETNI, 
	   NEZAUCTOVANE.POCET, 
	   SCHVALENE.POCET, 
	   NEZAUCTOVANE.POCET/SCHVALENE.POCET*100 POMER 
FROM ( 
SELECT ID_ZODPOVEDNAUCETNI, COUNT(*) POCET 
FROM ( 
SELECT D.ID, 
       S.ID_ZODPOVEDNAUCETNI, 
       CASE 
	     WHEN (EXISTS (SELECT NULL FROM KP_DAT_DOKUMENTRADEK DR 
		               WHERE D.ID = DR.ID_DOKUMENT AND 
		                   ((DR.DT_SCHVALENOODBOR IS NULL AND ID_ODBOROO IS NOT NULL) OR 
			                (DR.DT_SCHVALENOPROJEKT IS NULL AND ID_PROJEKTMAN IS NOT NULL) OR 
			                (DR.DT_SCHVALENOUCSPOL IS NULL AND ID_UCSPOLOO IS NOT NULL) OR 
			                (DR.DT_SCHVALENOTOP IS NULL AND ID_UCSPOLTOP IS NOT NULL) 
					       ) 
					  ) 
               OR (SELECT COUNT(*) FROM KP_DAT_DOKUMENTRADEK DR WHERE D.ID = DR.ID_DOKUMENT) = 0 
               OR (ID_GESTOR IS NOT NULL AND DT_GESTORSCHVALENO IS NULL)) THEN 0 
		 ELSE 1 
	   END SCHVALENO, 
	   CASE WHEN (D.DT_DATUMZAUCTOVANI IS NULL) THEN 0 ELSE 1 END ZAUCTOVANO 
FROM KP_DAT_DOKUMENT D, 
     KP_KTG_UCETNISPOLECNOST S 
WHERE D.ID_CISSTATUS=0 
  AND D.ID_KTGUCETNISPOLECNOST = S.ID 
  AND S.ID_ZODPOVEDNAUCETNI IS NOT NULL 
ORDER BY ID 
) 
WHERE SCHVALENO = 1 
  AND ZAUCTOVANO = 0 
GROUP BY ID_ZODPOVEDNAUCETNI 
) NEZAUCTOVANE, 
( 
SELECT ID_ZODPOVEDNAUCETNI, COUNT(*) POCET 
FROM ( 
SELECT D.ID, 
       S.ID_ZODPOVEDNAUCETNI, 
       CASE 
	     WHEN (EXISTS (SELECT NULL FROM KP_DAT_DOKUMENTRADEK DR 
		               WHERE D.ID = DR.ID_DOKUMENT AND 
		                   ((DR.DT_SCHVALENOODBOR IS NULL AND ID_ODBOROO IS NOT NULL) OR 
			                (DR.DT_SCHVALENOPROJEKT IS NULL AND ID_PROJEKTMAN IS NOT NULL) OR 
			                (DR.DT_SCHVALENOUCSPOL IS NULL AND ID_UCSPOLOO IS NOT NULL) OR 
			                (DR.DT_SCHVALENOTOP IS NULL AND ID_UCSPOLTOP IS NOT NULL) 
					       ) 
					  ) 
               OR (SELECT COUNT(*) FROM KP_DAT_DOKUMENTRADEK DR WHERE D.ID = DR.ID_DOKUMENT) = 0 
               OR (ID_GESTOR IS NOT NULL AND DT_GESTORSCHVALENO IS NULL)) THEN 0 
		 ELSE 1 
	   END SCHVALENO, 
	   CASE WHEN (D.DT_DATUMZAUCTOVANI IS NULL) THEN 0 ELSE 1 END ZAUCTOVANO 
FROM KP_DAT_DOKUMENT D, 
     KP_KTG_UCETNISPOLECNOST S 
WHERE D.ID_CISSTATUS=0 
  AND D.ID_KTGUCETNISPOLECNOST = S.ID 
  AND S.ID_ZODPOVEDNAUCETNI IS NOT NULL 
ORDER BY ID 
) 
WHERE SCHVALENO = 1 
GROUP BY ID_ZODPOVEDNAUCETNI 
) SCHVALENE, 
  KTG_APPUSER U 
WHERE NEZAUCTOVANE.ID_ZODPOVEDNAUCETNI = SCHVALENE.ID_ZODPOVEDNAUCETNI 
  AND NEZAUCTOVANE.ID_ZODPOVEDNAUCETNI = U.ID 
ORDER BY MESIC, 3 DESC, 5 DESC

;


PROMPT Completed VW_REP_DOCNEZAUCTOVANO.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_DOCPREHLED.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_DOCPREHLED.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_DOCPREHLED
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_DOCPREHLED" ("MESIC", "POCET", "RADEK") AS 
  SELECT MESIC, POCET, RADEK FROM ( 
SELECT TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') MESIC, 
       COUNT(*) POCET, 
	   1 RADEK 
FROM KP_DAT_DOKUMENT D 
WHERE D.ID_CISSTATUS=0 
GROUP BY TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') 
ORDER BY MESIC 
) 
UNION ALL 
SELECT MESIC, POCET, RADEK FROM ( 
SELECT 'CELKEM' MESIC, 
       COUNT(*) POCET, 
	   1 RADEK 
FROM KP_DAT_DOKUMENT D 
WHERE D.ID_CISSTATUS=0 
ORDER BY MESIC 
) 
UNION ALL 
--2 
SELECT MESIC, POCET, RADEK FROM ( 
SELECT TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') MESIC, 
       COUNT(*) POCET, 
	   2 RADEK 
FROM KP_DAT_DOKUMENT D 
WHERE D.ID_CISSTATUS=0 
  AND EXISTS (SELECT NULL 
              FROM KP_DAT_DOKUMENTRADEK DR 
			  WHERE D.ID = DR.ID_DOKUMENT AND 
		            DR.ID_PROJEKT IS NOT NULL AND 
					DR.ID_PROJEKT > 0 AND 
					DR.ID_PROJEKT <> 1000001 
			 ) 
GROUP BY TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') 
ORDER BY MESIC 
) 
UNION ALL 
SELECT MESIC, POCET, RADEK FROM ( 
SELECT 'CELKEM' MESIC, 
       COUNT(*) POCET, 
	   2 RADEK 
FROM KP_DAT_DOKUMENT D 
WHERE D.ID_CISSTATUS=0 
  AND EXISTS (SELECT NULL 
              FROM KP_DAT_DOKUMENTRADEK DR 
			  WHERE D.ID = DR.ID_DOKUMENT AND 
		            DR.ID_PROJEKT IS NOT NULL AND 
					DR.ID_PROJEKT > 0 AND 
					DR.ID_PROJEKT <> 1000001 
			 ) 
ORDER BY MESIC 
) 
UNION ALL 
--3 
SELECT MESIC, POCET, RADEK FROM ( 
SELECT TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') MESIC, 
       COUNT(*) POCET, 
	   3 RADEK 
FROM KP_DAT_DOKUMENT D 
WHERE D.ID_CISSTATUS=0 
  AND (EXISTS (SELECT NULL 
              FROM KP_DAT_DOKUMENTRADEK DR 
			  WHERE D.ID = DR.ID_DOKUMENT AND 
		          ((DR.DT_SCHVALENOODBOR IS NULL AND DR.ID_ODBOROO IS NOT NULL) OR 
			       (DR.DT_SCHVALENOPROJEKT IS NULL AND DR.ID_PROJEKTMAN IS NOT NULL) OR 
				   (DR.DT_SCHVALENOUCSPOL IS NULL AND DR.ID_UCSPOLOO IS NOT NULL) OR 
				   (DR.DT_SCHVALENOTOP IS NULL AND DR.ID_UCSPOLTOP IS NOT NULL))) 
   OR (SELECT COUNT(*) FROM KP_DAT_DOKUMENTRADEK DR WHERE D.ID = DR.ID_DOKUMENT) = 0 
   OR (D.ID_GESTOR IS NOT NULL AND D.DT_GESTORSCHVALENO IS NULL)) 
GROUP BY TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') 
ORDER BY MESIC 
) 
UNION ALL 
SELECT MESIC, POCET, RADEK FROM ( 
SELECT 'CELKEM' MESIC, 
       COUNT(*) POCET, 
	   3 RADEK 
FROM KP_DAT_DOKUMENT D 
WHERE D.ID_CISSTATUS=0 
  AND (EXISTS (SELECT NULL 
              FROM KP_DAT_DOKUMENTRADEK DR 
			  WHERE D.ID = DR.ID_DOKUMENT AND 
		          ((DR.DT_SCHVALENOODBOR IS NULL AND DR.ID_ODBOROO IS NOT NULL) OR 
			       (DR.DT_SCHVALENOPROJEKT IS NULL AND DR.ID_PROJEKTMAN IS NOT NULL) OR 
				   (DR.DT_SCHVALENOUCSPOL IS NULL AND DR.ID_UCSPOLOO IS NOT NULL) OR 
				   (DR.DT_SCHVALENOTOP IS NULL AND DR.ID_UCSPOLTOP IS NOT NULL))) 
   OR (SELECT COUNT(*) FROM KP_DAT_DOKUMENTRADEK DR WHERE D.ID = DR.ID_DOKUMENT) = 0 
   OR (D.ID_GESTOR IS NOT NULL AND D.DT_GESTORSCHVALENO IS NULL)) 
ORDER BY MESIC 
) 
UNION ALL 
--4 
SELECT MESIC, POCET, RADEK FROM ( 
SELECT TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') MESIC, 
       COUNT(*) POCET, 
	   4 RADEK 
FROM KP_DAT_DOKUMENT D 
WHERE ID_CISSTATUS=0 
  AND SYSDATE > D.DT_DATUMSPLATNOSTI 
  AND (EXISTS (SELECT NULL 
              FROM KP_DAT_DOKUMENTRADEK DR 
			  WHERE D.ID = DR.ID_DOKUMENT AND 
		          ((DR.DT_SCHVALENOODBOR IS NULL AND DR.ID_ODBOROO IS NOT NULL) OR 
			       (DR.DT_SCHVALENOPROJEKT IS NULL AND DR.ID_PROJEKTMAN IS NOT NULL) OR 
				   (DR.DT_SCHVALENOUCSPOL IS NULL AND DR.ID_UCSPOLOO IS NOT NULL) OR 
				   (DR.DT_SCHVALENOTOP IS NULL AND DR.ID_UCSPOLTOP IS NOT NULL))) 
   OR (SELECT COUNT(*) FROM KP_DAT_DOKUMENTRADEK DR WHERE D.ID = DR.ID_DOKUMENT) = 0 
   OR (D.ID_GESTOR IS NOT NULL AND D.DT_GESTORSCHVALENO IS NULL)) 
GROUP BY TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') 
ORDER BY MESIC 
) 
UNION ALL 
SELECT MESIC, POCET, RADEK FROM ( 
SELECT 'CELKEM' MESIC, 
       COUNT(*) POCET, 
	   4 RADEK 
FROM KP_DAT_DOKUMENT D 
WHERE ID_CISSTATUS=0 
  AND SYSDATE > D.DT_DATUMSPLATNOSTI 
  AND (EXISTS (SELECT NULL 
              FROM KP_DAT_DOKUMENTRADEK DR 
			  WHERE D.ID = DR.ID_DOKUMENT AND 
		          ((DR.DT_SCHVALENOODBOR IS NULL AND DR.ID_ODBOROO IS NOT NULL) OR 
			       (DR.DT_SCHVALENOPROJEKT IS NULL AND DR.ID_PROJEKTMAN IS NOT NULL) OR 
				   (DR.DT_SCHVALENOUCSPOL IS NULL AND DR.ID_UCSPOLOO IS NOT NULL) OR 
				   (DR.DT_SCHVALENOTOP IS NULL AND DR.ID_UCSPOLTOP IS NOT NULL))) 
   OR (SELECT COUNT(*) FROM KP_DAT_DOKUMENTRADEK DR WHERE D.ID = DR.ID_DOKUMENT) = 0 
   OR (D.ID_GESTOR IS NOT NULL AND D.DT_GESTORSCHVALENO IS NULL)) 
ORDER BY MESIC 
) 
UNION ALL 
--5 
SELECT MESIC, POCET, RADEK FROM ( 
SELECT TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') MESIC, 
       COUNT(*) POCET, 
	   5 RADEK 
FROM KP_DAT_DOKUMENT D 
WHERE D.ID_CISSTATUS=0 
  AND D.DT_DATUMZAUCTOVANI < SYSDATE 
GROUP BY TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') 
ORDER BY MESIC 
) 
UNION ALL 
SELECT MESIC, POCET, RADEK FROM ( 
SELECT 'CELKEM' MESIC, 
       COUNT(*) POCET, 
	   5 RADEK 
FROM KP_DAT_DOKUMENT D 
WHERE D.ID_CISSTATUS=0 
  AND D.DT_DATUMZAUCTOVANI < SYSDATE 
ORDER BY MESIC 
) 
ORDER BY RADEK, MESIC

;


PROMPT Completed VW_REP_DOCPREHLED.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_DOCPRUMERNASPOL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_DOCPRUMERNASPOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_DOCPRUMERNASPOL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_DOCPRUMERNASPOL" ("MESIC", "PRUMER") AS 
  SELECT MESIC, PRUMER FROM ( 
SELECT MESIC, 
       AVG(POCET) PRUMER 
FROM ( 
	SELECT TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') MESIC, 
	       D.ID_KTGUCETNISPOLECNOST, 
		   COUNT(*) POCET 
	FROM KP_DAT_DOKUMENT D, 
	     KP_KTG_UCETNISPOLECNOST S 
	WHERE D.ID_CISSTATUS=0 
	  AND D.ID_KTGUCETNISPOLECNOST = S.ID 
	  AND S.C_DOCDISPLAY = '1' 
	GROUP BY TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM'), D.ID_KTGUCETNISPOLECNOST 
) 
GROUP BY MESIC 
ORDER BY MESIC 
) 
UNION ALL 
SELECT MESIC, PRUMER FROM ( 
SELECT MESIC, 
       AVG(POCET) PRUMER 
FROM ( 
	SELECT 'CELKEM' MESIC, 
	       D.ID_KTGUCETNISPOLECNOST, 
		   COUNT(*) POCET 
	FROM KP_DAT_DOKUMENT D, 
	     KP_KTG_UCETNISPOLECNOST S 
	WHERE D.ID_CISSTATUS=0 
	  AND D.ID_KTGUCETNISPOLECNOST = S.ID 
	  AND S.C_DOCDISPLAY = '1' 
	GROUP BY D.ID_KTGUCETNISPOLECNOST 
) 
GROUP BY MESIC 
ORDER BY MESIC 
) 
ORDER BY MESIC

;


PROMPT Completed VW_REP_DOCPRUMERNASPOL.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_DOCSCHVALANO.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_DOCSCHVALANO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_DOCSCHVALANO
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_DOCSCHVALANO" ("MESIC", "SCHVALOVATEL", "POCET") AS 
  SELECT MESIC, SCHVALOVATEL, SUM(POCET) POCET FROM 
(--odbory 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENTRADEK DR, 
     KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID = DR.ID_DOKUMENT 
  AND D.ID_CISSTATUS=0 
  AND DR.DT_SCHVALENOODBOR IS NOT NULL AND DR.ID_ODBOROO = U.ID 
GROUP BY TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM'), U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
UNION ALL 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT 'CELKEM' MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENTRADEK DR, 
     KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID = DR.ID_DOKUMENT 
  AND D.ID_CISSTATUS=0 
  AND DR.DT_SCHVALENOODBOR IS NOT NULL AND DR.ID_ODBOROO = U.ID 
GROUP BY U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
UNION ALL --projekty 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENTRADEK DR, 
     KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID = DR.ID_DOKUMENT 
  AND D.ID_CISSTATUS=0 
  AND DR.DT_SCHVALENOPROJEKT IS NOT NULL AND DR.ID_PROJEKTMAN = U.ID 
GROUP BY TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM'), U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
UNION ALL 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT 'CELKEM' MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENTRADEK DR, 
     KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID = DR.ID_DOKUMENT 
  AND D.ID_CISSTATUS=0 
  AND DR.DT_SCHVALENOPROJEKT IS NOT NULL AND DR.ID_PROJEKTMAN = U.ID 
GROUP BY U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
UNION ALL -- spolecnosti/useky 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENTRADEK DR, 
     KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID = DR.ID_DOKUMENT 
  AND D.ID_CISSTATUS=0 
  AND DR.DT_SCHVALENOUCSPOL IS NOT NULL AND DR.ID_UCSPOLOO = U.ID 
GROUP BY TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM'), U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
UNION ALL 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT 'CELKEM' MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENTRADEK DR, 
     KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID = DR.ID_DOKUMENT 
  AND D.ID_CISSTATUS=0 
  AND DR.DT_SCHVALENOUCSPOL IS NOT NULL AND DR.ID_UCSPOLOO = U.ID 
GROUP BY U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
UNION ALL -- top 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENTRADEK DR, 
     KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID = DR.ID_DOKUMENT 
  AND D.ID_CISSTATUS=0 
  AND DR.DT_SCHVALENOTOP IS NOT NULL AND DR.ID_UCSPOLTOP = U.ID 
GROUP BY TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM'), U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
UNION ALL 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT 'CELKEM' MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENTRADEK DR, 
     KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID = DR.ID_DOKUMENT 
  AND D.ID_CISSTATUS=0 
  AND DR.DT_SCHVALENOTOP IS NOT NULL AND DR.ID_UCSPOLTOP = U.ID 
GROUP BY U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
UNION ALL -- gestor 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID_GESTOR = U.ID AND D.DT_GESTORSCHVALENO IS NOT NULL 
  AND D.ID_CISSTATUS=0 
GROUP BY TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM'), U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
UNION ALL 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT 'CELKEM' MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID_GESTOR = U.ID AND D.DT_GESTORSCHVALENO IS NOT NULL 
  AND D.ID_CISSTATUS=0 
GROUP BY U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
) 
GROUP BY MESIC, SCHVALOVATEL 
ORDER BY MESIC, POCET DESC

;


PROMPT Completed VW_REP_DOCSCHVALANO.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_DOCSCHVALNE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_DOCSCHVALNE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_DOCSCHVALNE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_DOCSCHVALNE" ("MESIC", "SCHVALOVATEL", "POCET") AS 
  SELECT MESIC, SCHVALOVATEL, SUM(POCET) POCET FROM 
(--odbory 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENTRADEK DR, 
     KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID = DR.ID_DOKUMENT 
  AND D.ID_CISSTATUS=0 
  AND DR.DT_SCHVALENOODBOR IS NULL AND DR.ID_ODBOROO = U.ID 
GROUP BY TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM'), U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
UNION ALL 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT 'CELKEM' MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENTRADEK DR, 
     KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID = DR.ID_DOKUMENT 
  AND D.ID_CISSTATUS=0 
  AND DR.DT_SCHVALENOODBOR IS NULL AND DR.ID_ODBOROO = U.ID 
GROUP BY U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
UNION ALL --projekty 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENTRADEK DR, 
     KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID = DR.ID_DOKUMENT 
  AND D.ID_CISSTATUS=0 
  AND DR.DT_SCHVALENOPROJEKT IS NULL AND DR.ID_PROJEKTMAN = U.ID 
GROUP BY TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM'), U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
UNION ALL 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT 'CELKEM' MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENTRADEK DR, 
     KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID = DR.ID_DOKUMENT 
  AND D.ID_CISSTATUS=0 
  AND DR.DT_SCHVALENOPROJEKT IS NULL AND DR.ID_PROJEKTMAN = U.ID 
GROUP BY U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
UNION ALL -- spolecnosti/useky 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENTRADEK DR, 
     KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID = DR.ID_DOKUMENT 
  AND D.ID_CISSTATUS=0 
  AND DR.DT_SCHVALENOUCSPOL IS NULL AND DR.ID_UCSPOLOO = U.ID 
GROUP BY TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM'), U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
UNION ALL 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT 'CELKEM' MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENTRADEK DR, 
     KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID = DR.ID_DOKUMENT 
  AND D.ID_CISSTATUS=0 
  AND DR.DT_SCHVALENOUCSPOL IS NULL AND DR.ID_UCSPOLOO = U.ID 
GROUP BY U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
UNION ALL -- top 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENTRADEK DR, 
     KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID = DR.ID_DOKUMENT 
  AND D.ID_CISSTATUS=0 
  AND DR.DT_SCHVALENOTOP IS NULL AND DR.ID_UCSPOLTOP = U.ID 
GROUP BY TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM'), U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
UNION ALL 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT 'CELKEM' MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENTRADEK DR, 
     KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID = DR.ID_DOKUMENT 
  AND D.ID_CISSTATUS=0 
  AND DR.DT_SCHVALENOTOP IS NULL AND DR.ID_UCSPOLTOP = U.ID 
GROUP BY U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
UNION ALL -- gestor 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID_GESTOR = U.ID AND D.DT_GESTORSCHVALENO IS NULL 
  AND D.ID_CISSTATUS=0 
GROUP BY TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM'), U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
UNION ALL 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT 'CELKEM' MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID_GESTOR = U.ID AND D.DT_GESTORSCHVALENO IS NULL 
  AND D.ID_CISSTATUS=0 
GROUP BY U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
) 
GROUP BY MESIC, SCHVALOVATEL 
ORDER BY MESIC, POCET DESC

;


PROMPT Completed VW_REP_DOCSCHVALNE.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_DOCSCHVALNEREL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_DOCSCHVALNEREL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_DOCSCHVALNEREL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_DOCSCHVALNEREL" ("MESIC", "SCHVALOVATEL", "POCET") AS 
  SELECT MESIC, SCHVALOVATEL, SUM(POCET) POCET FROM 
(--odbory 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENTRADEK DR, 
     KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID = DR.ID_DOKUMENT 
  AND D.ID_CISSTATUS=0 
  AND DR.ID_ODBOROO = U.ID 
GROUP BY TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM'), U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
UNION ALL 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT 'CELKEM' MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENTRADEK DR, 
     KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID = DR.ID_DOKUMENT 
  AND D.ID_CISSTATUS=0 
  AND DR.ID_ODBOROO = U.ID 
GROUP BY U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
UNION ALL --projekty 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENTRADEK DR, 
     KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID = DR.ID_DOKUMENT 
  AND D.ID_CISSTATUS=0 
  AND DR.ID_PROJEKTMAN = U.ID 
GROUP BY TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM'), U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
UNION ALL 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT 'CELKEM' MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENTRADEK DR, 
     KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID = DR.ID_DOKUMENT 
  AND D.ID_CISSTATUS=0 
  AND DR.ID_PROJEKTMAN = U.ID 
GROUP BY U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
UNION ALL -- spolecnosti/useky 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENTRADEK DR, 
     KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID = DR.ID_DOKUMENT 
  AND D.ID_CISSTATUS=0 
  AND DR.ID_UCSPOLOO = U.ID 
GROUP BY TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM'), U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
UNION ALL 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT 'CELKEM' MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENTRADEK DR, 
     KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID = DR.ID_DOKUMENT 
  AND D.ID_CISSTATUS=0 
  AND DR.ID_UCSPOLOO = U.ID 
GROUP BY U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
UNION ALL -- top 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENTRADEK DR, 
     KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID = DR.ID_DOKUMENT 
  AND D.ID_CISSTATUS=0 
  AND DR.ID_UCSPOLTOP = U.ID 
GROUP BY TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM'), U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
UNION ALL 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT 'CELKEM' MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENTRADEK DR, 
     KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID = DR.ID_DOKUMENT 
  AND D.ID_CISSTATUS=0 
  AND DR.ID_UCSPOLTOP = U.ID 
GROUP BY U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
UNION ALL -- gestor 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID_GESTOR = U.ID 
  AND D.ID_CISSTATUS=0 
GROUP BY TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM'), U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
UNION ALL 
SELECT MESIC, SCHVALOVATEL, POCET FROM 
(SELECT 'CELKEM' MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO SCHVALOVATEL, 
       COUNT(*) POCET 
FROM KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID_GESTOR = U.ID 
  AND D.ID_CISSTATUS=0 
GROUP BY U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC) 
) 
GROUP BY MESIC, SCHVALOVATEL 
ORDER BY MESIC, POCET DESC

;


PROMPT Completed VW_REP_DOCSCHVALNEREL.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_DOCUCSPOLPORADI.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_DOCUCSPOLPORADI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_DOCUCSPOLPORADI
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_DOCUCSPOLPORADI" ("MESIC", "SPOLECNOST", "POCET") AS 
  SELECT MESIC, SPOLECNOST, POCET FROM ( 
SELECT TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') MESIC, 
       S.S_NAZEV SPOLECNOST, 
	   COUNT(*) POCET 
FROM KP_DAT_DOKUMENT D, 
     KP_KTG_UCETNISPOLECNOST S 
WHERE D.ID_CISSTATUS=0 
  AND D.ID_KTGUCETNISPOLECNOST = S.ID 
GROUP BY TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM'), S.S_NAZEV 
ORDER BY MESIC, POCET DESC 
) 
UNION ALL 
SELECT MESIC, SPOLECNOST, POCET FROM ( 
SELECT 'CELKEM' MESIC, 
       S.S_NAZEV SPOLECNOST, 
	   COUNT(*) POCET 
FROM KP_DAT_DOKUMENT D, 
     KP_KTG_UCETNISPOLECNOST S 
WHERE D.ID_CISSTATUS=0 
  AND D.ID_KTGUCETNISPOLECNOST = S.ID 
GROUP BY S.S_NAZEV 
ORDER BY MESIC, POCET DESC 
) 
ORDER BY MESIC, POCET DESC

;


PROMPT Completed VW_REP_DOCUCSPOLPORADI.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_DOCZADAVATELMAX.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_DOCZADAVATELMAX.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_DOCZADAVATELMAX
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_DOCZADAVATELMAX" ("MESIC", "ZADAVATEL", "POCET") AS 
  SELECT MESIC, ZADAVATEL, POCET FROM ( 
SELECT TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM') MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO ZADAVATEL, 
	   COUNT(*) POCET 
FROM KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID_CISSTATUS=0 
  AND D.ID_ZADAVATEL = U.ID 
GROUP BY TO_CHAR(D.DT_DATUMZADANI,'YYYY-MM'), U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC 
) 
UNION ALL 
SELECT MESIC, ZADAVATEL, POCET FROM ( 
SELECT 'CELKEM' MESIC, 
       U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO ZADAVATEL, 
	   COUNT(*) POCET 
FROM KP_DAT_DOKUMENT D, 
     KTG_APPUSER U 
WHERE D.ID_CISSTATUS=0 
  AND D.ID_ZADAVATEL = U.ID 
GROUP BY U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY MESIC, POCET DESC 
) 
ORDER BY MESIC, POCET DESC

;


PROMPT Completed VW_REP_DOCZADAVATELMAX.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_OSOBYCARTESIS.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_OSOBYCARTESIS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_OSOBYCARTESIS
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_OSOBYCARTESIS" ("ID", "CELE_JMENO", "S_EMAIL", "S_TELEFONFORMATED") AS 
  select distinct u.ID,
	   trim( u.S_TITULYPRED || ' ' || u.S_KRESTNI || ' ' || u.S_PRIJMENI || ' ' || u.S_TITULYPO ) cele_jmeno,
	   u.S_EMAIL,
	   case
	     when u.S_TELEFON like '881%' then '00420 221 710 ' || substr( u.S_TELEFON, 4 )
	     when u.S_TELEFON like '883%' then '00421 259 418 ' || substr( u.S_TELEFON, 4 )
		 else u.S_TELEFON
	   end s_telefonFormated
from kp_rel_subkonsolidaceClen sub,
	 kp_ktg_ucetniSpolecnost us,
	 ktg_appUser u
where sub.ID_KTGUCETNISKUPINA = 8 and u.id != -1
  and sub.ID_KTGUCETNISPOLECNOST = us.ID
  and sysdate between sub.dt_clenstviod and sub.dt_clenstvido
  and us.ID_CISSUBJECT <> 200
  and u.id in (us.ID_ZODPOVEDNAUCETNI,
  	  	   	   us.ID_SPRAVCEKONSOLIDACE,
			   us.ID_ODPOVEDNAOSOBA,
			   us.ID_MNGSEGMENTBOSS)

;


PROMPT Completed VW_REP_OSOBYCARTESIS.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_PROTISTRANY_2011.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_PROTISTRANY_2011.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_PROTISTRANY_2011
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_PROTISTRANY_2011" ("ID", "S_ICO", "S_NAZEV", "S_POM_ICO", "S_COUNTRY", "C_INDICATOR_PC", "S_EKONOM_SEKTOR", "KATEGORIEKOEF", "S_OKEC", "ID_KTGSPOLECNOST", "S_HLAVNIUCETNISKUPINA", "S_KODKATEGORIEPROTISTRANA", "C_LICENCE", "C_LIKVIDACE", "C_SPOLECNERIZENY", "DT_DATUMZALOZENI", "S_ULICE", "S_PSC", "S_MESTO", "S_DIC", "S_UCETSCP", "S_REGRMS", "DT_QUESTORUPDATE", "ID_KTG_EXTERNIRATING", "C_ZONA", "ID_UCETNISYSTEM", "S_ZVLASTNIVZTAHKJINEMUCLENURKC", "C_EVIEXTDODAVATEL", "C_SKUPINAIC", "C_VPRECHODU", "S_KODKATEGORIEPROTISTRANA_2", "S_DBLINK", "ID_PROTISTRANA", "ID_DATABAZE", "ID_SPOLECNOST", "S_ICO_PR", "S_NAZEV_PR", "S_NUMBER0", "FIRMA_ID", "EO_ID", "BANKA_ID", "DOID", "KID", "PLATINST", "AKCE", "DT_ZMENA", "S_POM_ICO_PR", "EID", "DATUMZALOZENI", "ULICE", "PSC", "MESTO", "STAT", "DIC", "UCETSCP", "REGRMS", "EKONOM_SEKTOR", "TYPOSOBY") AS 
  SELECT --sp.*,
    sp.id ID,
    sp.s_ico S_ICO,
    sp.s_nazev S_NAZEV,
    sp.S_POM_ICO S_POM_ICO,
    sp.S_COUNTRY S_COUNTRY,
    sp.C_INDICATOR_PC C_INDICATOR_PC,
    sp.S_EKONOM_SEKTOR S_EKONOM_SEKTOR ,
    sp.KATEGORIEKOEF KATEGORIEKOEF,
    sp.S_OKEC S_OKEC,
    sp.ID_KTGSPOLECNOST ID_KTGSPOLECNOST,
    sp.S_HLAVNIUCETNISKUPINA S_HLAVNIUCETNISKUPINA,
    sp.S_KODKATEGORIEPROTISTRANA S_KODKATEGORIEPROTISTRANA,
    sp.C_LICENCE C_LICENCE,
    sp.C_LIKVIDACE C_LIKVIDACE,
    sp.C_SPOLECNERIZENY C_SPOLECNERIZENY,
    sp.DT_DATUMZALOZENI DT_DATUMZALOZENI,
    sp.S_ULICE S_ULICE,
    sp.S_PSC S_PSC,
    sp.S_MESTO S_MESTO,
    sp.S_DIC S_DIC ,
    sp.S_UCETSCP S_UCETSCP,
    sp.S_REGRMS S_REGRMS,
    sp.DT_QUESTORUPDATE DT_QUESTORUPDATE,
    sp.ID_KTG_EXTERNIRATING ID_KTG_EXTERNIRATING,
    sp.C_ZONA C_ZONA,
    sp.ID_UCETNISYSTEM ID_UCETNISYSTEM,
    sp.S_ZVLASTNIVZTAHKJINEMUCLENURKC S_ZVLASTNIVZTAHKJINEMUCLENURKC,
    sp.C_EVIEXTDODAVATEL C_EVIEXTDODAVATEL,
    sp.C_SKUPINAIC C_SKUPINAIC,
    sp.C_VPRECHODU C_VPRECHODU,
    sp.S_KODKATEGORIEPROTISTRANA_2 S_KODKATEGORIEPROTISTRANA_2,
    cd.S_DBLINK S_DBLINK,
    --pr.*
    pr.ID ID_PROTISTRANA,
    pr.ID_DATABAZE ID_DATABAZE,
    pr.ID_SPOLECNOST ID_SPOLECNOST,
    pr.S_ICO S_ICO_PR,
    pr.S_NAZEV S_NAZEV_PR,
    pr.S_NUMBER0 S_NUMBER0,
    pr.FIRMA_ID FIRMA_ID,
    pr.EO_ID EO_ID,
    pr.BANKA_ID BANKA_ID,
    pr.DOID DOID,
    pr.KID KID,
    pr.PLATINST PLATINST,
    pr.AKCE AKCE,
    pr.DT_ZMENA DT_ZMENA,
    pr.S_POM_ICO S_POM_ICO_PR,
    pr.EID EID,
    pr.DATUMZALOZENI DATUMZALOZENI,
    pr.ULICE ULICE,
    pr.PSC PSC,
    pr.MESTO MESTO,
    pr.STAT STAT,
    pr.DIC DIC,
    pr.UCETSCP UCETSCP,
    pr.REGRMS REGRMS,
    pr.EKONOM_SEKTOR EKONOM_SEKTOR,
    pr.TYPOSOBY TYPOSOBY
  FROM db_dsa.KP_REL_PROTISTRANA pr,
    KP_CIS_DATABAZE cd,
    KP_KTG_SPOLECNOST sp
  WHERE pr.ID_DATABAZE = cd.ID
  AND sp.ID (+)        = pr.ID_SPOLECNOST
  AND sp.id           != -2
  ORDER BY 
    sp.s_nazev,
    cd.S_DBLINK
;


PROMPT Completed VW_REP_PROTISTRANY_2011.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_PROTISTRANY_2011_xls.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_PROTISTRANY_2011_xls.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_PROTISTRANY_2011_xls
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_PROTISTRANY_2011_xls" ("ID", "S_ICO", "S_NAZEV", "S_POM_ICO", "S_COUNTRY", "C_INDICATOR_PC", "S_EKONOM_SEKTOR", "KATEGORIEKOEF", "S_OKEC", "ID_KTGSPOLECNOST", "S_HLAVNIUCETNISKUPINA", "S_KODKATEGORIEPROTISTRANA", "C_LICENCE", "C_LIKVIDACE", "C_SPOLECNERIZENY", "DT_DATUMZALOZENI", "S_ULICE", "S_PSC", "S_MESTO", "S_DIC", "S_UCETSCP", "S_REGRMS", "DT_QUESTORUPDATE", "ID_KTG_EXTERNIRATING", "C_ZONA", "ID_UCETNISYSTEM", "S_ZVLASTNIVZTAHKJINEMUCLENURKC", "C_EVIEXTDODAVATEL", "C_SKUPINAIC", "C_VPRECHODU", "S_KODKATEGORIEPROTISTRANA_2", "S_DBLINK", "ID_PROTISTRANA", "ID_DATABAZE", "ID_SPOLECNOST", "S_ICO_PR", "S_NAZEV_PR", "S_NUMBER0", "FIRMA_ID", "EO_ID", "BANKA_ID", "DOID", "KID", "PLATINST", "AKCE", "DT_ZMENA", "S_POM_ICO_PR", "EID", "DATUMZALOZENI", "ULICE", "PSC", "MESTO", "STAT", "DIC", "UCETSCP", "REGRMS", "EKONOM_SEKTOR", "TYPOSOBY") AS 
  SELECT --sp.*,
    sp.id ID,
    sp.s_ico S_ICO,
    sp.s_nazev S_NAZEV,
    sp.S_POM_ICO S_POM_ICO,
    sp.S_COUNTRY S_COUNTRY,
    sp.C_INDICATOR_PC C_INDICATOR_PC,
    sp.S_EKONOM_SEKTOR S_EKONOM_SEKTOR ,
    sp.KATEGORIEKOEF KATEGORIEKOEF,
    sp.S_OKEC S_OKEC,
    sp.ID_KTGSPOLECNOST ID_KTGSPOLECNOST,
    sp.S_HLAVNIUCETNISKUPINA S_HLAVNIUCETNISKUPINA,
    sp.S_KODKATEGORIEPROTISTRANA S_KODKATEGORIEPROTISTRANA,
    sp.C_LICENCE C_LICENCE,
    sp.C_LIKVIDACE C_LIKVIDACE,
    sp.C_SPOLECNERIZENY C_SPOLECNERIZENY,
    sp.DT_DATUMZALOZENI DT_DATUMZALOZENI,
    sp.S_ULICE S_ULICE,
    sp.S_PSC S_PSC,
    sp.S_MESTO S_MESTO,
    sp.S_DIC S_DIC ,
    sp.S_UCETSCP S_UCETSCP,
    sp.S_REGRMS S_REGRMS,
    sp.DT_QUESTORUPDATE DT_QUESTORUPDATE,
    sp.ID_KTG_EXTERNIRATING ID_KTG_EXTERNIRATING,
    sp.C_ZONA C_ZONA,
    sp.ID_UCETNISYSTEM ID_UCETNISYSTEM,
    sp.S_ZVLASTNIVZTAHKJINEMUCLENURKC S_ZVLASTNIVZTAHKJINEMUCLENURKC,
    sp.C_EVIEXTDODAVATEL C_EVIEXTDODAVATEL,
    sp.C_SKUPINAIC C_SKUPINAIC,
    sp.C_VPRECHODU C_VPRECHODU,
    sp.S_KODKATEGORIEPROTISTRANA_2 S_KODKATEGORIEPROTISTRANA_2,
    cd.S_DBLINK S_DBLINK,
    --pr.*
    pr.ID ID_PROTISTRANA,
    pr.ID_DATABAZE ID_DATABAZE,
    pr.ID_SPOLECNOST ID_SPOLECNOST,
    pr.S_ICO S_ICO_PR,
    pr.S_NAZEV S_NAZEV_PR,
    pr.S_NUMBER0 S_NUMBER0,
    pr.FIRMA_ID FIRMA_ID,
    pr.EO_ID EO_ID,
    pr.BANKA_ID BANKA_ID,
    pr.DOID DOID,
    pr.KID KID,
    pr.PLATINST PLATINST,
    pr.AKCE AKCE,
    pr.DT_ZMENA DT_ZMENA,
    pr.S_POM_ICO S_POM_ICO_PR,
    pr.EID EID,
    pr.DATUMZALOZENI DATUMZALOZENI,
    pr.ULICE ULICE,
    pr.PSC PSC,
    pr.MESTO MESTO,
    pr.STAT STAT,
    pr.DIC DIC,
    pr.UCETSCP UCETSCP,
    pr.REGRMS REGRMS,
    pr.EKONOM_SEKTOR EKONOM_SEKTOR,
    pr.TYPOSOBY TYPOSOBY
  FROM db_dsa.KP_REL_PROTISTRANA pr,
    KP_CIS_DATABAZE cd,
    KP_KTG_SPOLECNOST sp
  WHERE pr.ID_DATABAZE = cd.ID
  AND sp.ID (+)        = pr.ID_SPOLECNOST
  AND sp.id           != -2
  ORDER BY id, sp.s_nazev,
    cd.S_DBLINK
;


PROMPT Completed VW_REP_PROTISTRANY_2011_xls.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_PROTISTRANY_CONTROLLING.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_PROTISTRANY_CONTROLLING.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_PROTISTRANY_CONTROLLING
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_PROTISTRANY_CONTROLLING" ("ID", "S_ICO", "S_NAZEV", "S_POM_ICO", "S_COUNTRY", "C_INDICATOR_PC", "S_EKONOM_SEKTOR", "KATEGORIEKOEF", "S_OKEC", "ID_KTGSPOLECNOST", "S_HLAVNIUCETNISKUPINA", "S_KODKATEGORIEPROTISTRANA", "C_LICENCE", "C_LIKVIDACE", "C_SPOLECNERIZENY", "DT_DATUMZALOZENI", "S_ULICE", "S_PSC", "S_MESTO", "S_DIC", "S_UCETSCP", "S_REGRMS", "DT_QUESTORUPDATE", "ID_KTG_EXTERNIRATING", "C_ZONA", "ID_UCETNISYSTEM", "S_ZVLASTNIVZTAHKJINEMUCLENURKC", "C_EVIEXTDODAVATEL", "C_SKUPINAIC", "C_VPRECHODU", "S_KODKATEGORIEPROTISTRANA_2", "S_DBLINK", "ID_PROTISTRANA", "ID_DATABAZE", "ID_SPOLECNOST", "S_ICO_PR", "S_NAZEV_PR", "S_NUMBER0", "FIRMA_ID", "EO_ID", "BANKA_ID", "DOID", "KID", "PLATINST", "AKCE", "DT_ZMENA", "S_POM_ICO_PR", "EID", "DATUMZALOZENI", "ULICE", "PSC", "MESTO", "STAT", "DIC", "UCETSCP", "REGRMS", "EKONOM_SEKTOR", "TYPOSOBY") AS 
  SELECT  --sp.*,         
sp.id ID, sp.s_ico S_ICO, sp.s_nazev S_NAZEV, sp.S_POM_ICO S_POM_ICO, sp.S_COUNTRY S_COUNTRY, sp.C_INDICATOR_PC	C_INDICATOR_PC,sp.S_EKONOM_SEKTOR	S_EKONOM_SEKTOR	,
sp.KATEGORIEKOEF	KATEGORIEKOEF,
sp.S_OKEC	S_OKEC, sp.ID_KTGSPOLECNOST ID_KTGSPOLECNOST, sp.S_HLAVNIUCETNISKUPINA	S_HLAVNIUCETNISKUPINA, sp.S_KODKATEGORIEPROTISTRANA	S_KODKATEGORIEPROTISTRANA,	
sp.C_LICENCE C_LICENCE, sp.C_LIKVIDACE	C_LIKVIDACE, sp.C_SPOLECNERIZENY C_SPOLECNERIZENY, sp.DT_DATUMZALOZENI DT_DATUMZALOZENI,	sp.S_ULICE S_ULICE,
sp.S_PSC S_PSC, sp.S_MESTO	S_MESTO, sp.S_DIC	S_DIC	, sp.S_UCETSCP	S_UCETSCP, sp.S_REGRMS	S_REGRMS, sp.DT_QUESTORUPDATE	DT_QUESTORUPDATE, sp.ID_KTG_EXTERNIRATING	ID_KTG_EXTERNIRATING,
sp.C_ZONA	C_ZONA,sp.ID_UCETNISYSTEM	ID_UCETNISYSTEM, sp.S_ZVLASTNIVZTAHKJINEMUCLENURKC	S_ZVLASTNIVZTAHKJINEMUCLENURKC, sp.C_EVIEXTDODAVATEL C_EVIEXTDODAVATEL,
sp.C_SKUPINAIC	C_SKUPINAIC, sp.C_VPRECHODU	C_VPRECHODU, sp.S_KODKATEGORIEPROTISTRANA_2 S_KODKATEGORIEPROTISTRANA_2,
cd.S_DBLINK S_DBLINK,
--pr.* 
pr.ID ID_PROTISTRANA, pr.ID_DATABAZE	ID_DATABAZE, pr.ID_SPOLECNOST	ID_SPOLECNOST, pr.S_ICO S_ICO_PR,	pr.S_NAZEV	S_NAZEV_PR, pr.S_NUMBER0	S_NUMBER0,
pr.FIRMA_ID	FIRMA_ID, pr.EO_ID	EO_ID, pr.BANKA_ID	BANKA_ID, pr.DOID	DOID, pr.KID	KID, pr.PLATINST	PLATINST, pr.AKCE	AKCE, 
pr.DT_ZMENA	DT_ZMENA, pr.S_POM_ICO S_POM_ICO_PR, pr.EID	EID, pr.DATUMZALOZENI	DATUMZALOZENI, pr.ULICE	ULICE, pr.PSC	PSC, pr.MESTO	MESTO, pr.STAT	STAT,
pr.DIC	DIC, pr.UCETSCP	UCETSCP, pr.REGRMS	REGRMS, pr.EKONOM_SEKTOR EKONOM_SEKTOR, pr.TYPOSOBY TYPOSOBY
FROM  
db_dsa.KP_REL_PROTISTRANA pr,             
KP_CIS_DATABAZE cd,             
KP_KTG_SPOLECNOST sp 
WHERE   pr.ID_DATABAZE = cd.ID     AND sp.ID (+) = pr.ID_SPOLECNOST and sp.id != -2 ORDER BY 2, 3, cd.S_DBLINK
;


PROMPT Completed VW_REP_PROTISTRANY_CONTROLLING.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_SCHVALOVAKHLAVA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_SCHVALOVAKHLAVA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_SCHVALOVAKHLAVA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_SCHVALOVAKHLAVA" ("S_POPIS", "ID", "POPIS_SL", "DOC_STATUS", "SPOLECNOST", "S_MENA", "S_PROTISTRANA", "ID_TYPTRANSAKCE", "TYP_TRANSAKCE", "ZADAVATEL", "DT_DATUMZADANI", "DT_ZADAVATELZAMITNUTO", "S_ZADAVATELZAMITNUTO", "TYPIZOVANA_TRANSKACE", "DT_TYPIZOVANAOD", "DT_TYPIZOVANADO", "PODLE_TYPIZOVANEHO_SL", "DT_DATUMZAUCTOVANI", "S_CISLODOKLADU", "GESTOR", "DT_GESTORSCHVALENO", "DT_GESTORZAMITNUTO", "S_GESTORZAMITNUTO", "S_DUVODZRUSENI", "DT_DATUMSPLATNOSTI", "UCETNI", "DT_POZADDATUMUHRADY", "DT_REALDATUMUHRADY", "ID_UCSPOLUHRADA", "DT_ZAUCTUHRADA", "ID_ZAUCTUHRADA", "DT_UCETNIZAMITNUTO", "S_UCETNIZAMITNUTO", "C_DPH", "UZIVATEL") AS 
  SELECT 
  KP_CIS_DOKUMENT.S_POPIS,   
  KP_DAT_DOKUMENT.ID,  	 
  KP_DAT_DOKUMENT.S_POPIS POPIS_SL,   
  KP_CIS_DOKUMENTSTATUS.S_POPIS DOC_STATUS,
  KP_KTG_UCETNISPOLECNOST.S_NAZEV SPOLECNOST, 
  KP_DAT_DOKUMENT.S_MENA,
	KP_DAT_DOKUMENT.S_PROTISTRANA,
  KP_DAT_DOKUMENT.ID_TYPTRANSAKCE,
  KP_CIS_TYPTRANSAKCE.S_POPIS TYP_TRANSAKCE, 		
  Z.S_USERNAME ZADAVATEL, 
  KP_DAT_DOKUMENT.DT_DATUMZADANI  , 	 
  KP_DAT_DOKUMENT.DT_ZADAVATELZAMITNUTO, 
	KP_DAT_DOKUMENT.S_ZADAVATELZAMITNUTO ,
	KP_DAT_DOKUMENT.C_TYPIZOVANATRAN TYPIZOVANA_TRANSKACE, 
	KP_DAT_DOKUMENT.DT_TYPIZOVANAOD, 
	KP_DAT_DOKUMENT.DT_TYPIZOVANADO, 
	KP_DAT_DOKUMENT.ID_TYPIZLINK PODLE_TYPIZOVANEHO_SL,		
  KP_DAT_DOKUMENT.DT_DATUMZAUCTOVANI, 
	KP_DAT_DOKUMENT.S_CISLODOKLADU , 
  GE.S_USERNAME GESTOR, 
	KP_DAT_DOKUMENT.DT_GESTORSCHVALENO, 
	KP_DAT_DOKUMENT.DT_GESTORZAMITNUTO, 
	KP_DAT_DOKUMENT.S_GESTORZAMITNUTO ,  	 
	KP_DAT_DOKUMENT.S_DUVODZRUSENI, 
	KP_DAT_DOKUMENT.DT_DATUMSPLATNOSTI, 
  ZAU.S_USERNAME UCETNI,
  KP_DAT_DOKUMENT.DT_POZADDATUMUHRADY, 
	KP_DAT_DOKUMENT.DT_REALDATUMUHRADY, 	  
  KP_DAT_DOKUMENT.ID_UCSPOLUHRADA ,
	KP_DAT_DOKUMENT.DT_ZAUCTUHRADA, 
	KP_DAT_DOKUMENT.ID_ZAUCTUHRADA, 
	KP_DAT_DOKUMENT.DT_UCETNIZAMITNUTO, 
	KP_DAT_DOKUMENT.S_UCETNIZAMITNUTO,
  KP_DAT_DOKUMENT.C_DPH,   --KP_DAT_DOKUMENT.* 
  AP.S_USERNAME UZIVATEL
FROM KP_DAT_DOKUMENT , 
     KP_CIS_DOKUMENT, 
KP_KTG_UCETNISPOLECNOST, 
KTG_APPUSER Z, KTG_APPUSER AP, KTG_APPUSER ZAU, KTG_APPUSER GE, 
KP_CIS_TYPTRANSAKCE, KP_CIS_DOKUMENTSTATUS 
WHERE
    KP_CIS_DOKUMENT.ID = KP_DAT_DOKUMENT.ID_CISDOKUMENT (+)
AND KP_DAT_DOKUMENT.ID_KTGUCETNISPOLECNOST = KP_KTG_UCETNISPOLECNOST.ID (+)
AND KP_DAT_DOKUMENT.ID_ZADAVATEL = Z.ID (+) 
AND KP_DAT_DOKUMENT.ID_APPUSER = AP.ID 
AND KP_DAT_DOKUMENT.ID_ZAUCT = ZAU.ID (+) 
AND KP_DAT_DOKUMENT.ID_GESTOR = GE.ID (+) 
AND KP_DAT_DOKUMENT.ID_TYPTRANSAKCE = KP_CIS_TYPTRANSAKCE.ID (+)
AND KP_DAT_DOKUMENT.ID_CISSTATUS =KP_CIS_DOKUMENTSTATUS.ID (+)
--and KP_DAT_DOKUMENT.ID_CISDOKUMENT =4;
;


PROMPT Completed VW_REP_SCHVALOVAKHLAVA.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_SCHVALOVAKHLAVADETAIL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_SCHVALOVAKHLAVADETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_SCHVALOVAKHLAVADETAIL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_SCHVALOVAKHLAVADETAIL" ("ID", "ID_DOKUMENT", "ID_ODBOR", "S_NAZEV_ODBOR", "ID_PROJEKT", "S_NAZEV_ROEJEKT", "ND_CASTKA", "ID_ODBOROO", "DT_SCHVALENOODBOR", "ID_PROJEKTMAN", "DT_SCHVALENOPROJEKT", "ID_UCSPOLOO", "DT_SCHVALENOUCSPOL", "ID_UCSPOLTOP", "DT_SCHVALENOTOP", "S_KOMENTAR", "DT_DATUMPREFAKT", "ID_PREFAKT", "C_KPREFAKT", "DT_DATUMZADANI", "C_REMOVED", "C_ZOBJEDNAVKY", "ID_ZAMITNUTO", "DT_ZAMITNUTO", "S_ZAMITNUTO", "ID_DOKUMENTORIG", "ID_ODBOROOREAL", "ID_PROJEKTMANREAL", "ID_UCSPOLOOREAL", "ID_UCSPOLTOPREAL", "ID_TYPTRANSAKCE", "RO", "PM", "OO", "TOP", "RRO", "RPM", "ROO", "RTOP", "ZA") AS 
  SELECT 
    dr.ID , 
	  dr.ID_DOKUMENT , 
    dr.ID_ODBOR , 
    odbor.s_nazev,
	  dr.ID_PROJEKT , 
    projekt.s_nazev,	
	  dr.ND_CASTKA, 
	  dr.ID_ODBOROO , 
	  dr.DT_SCHVALENOODBOR , 
	  dr.ID_PROJEKTMAN , 
	  dr.DT_SCHVALENOPROJEKT , 
	  dr.ID_UCSPOLOO , 
	  dr.DT_SCHVALENOUCSPOL , 
	  dr.ID_UCSPOLTOP , 
	  dr.DT_SCHVALENOTOP , 
	  dr.S_KOMENTAR , 
	  dr.DT_DATUMPREFAKT , 
	  dr.ID_PREFAKT , 
	  dr.C_KPREFAKT, 
	  dr.DT_DATUMZADANI  , 
	  dr.C_REMOVED, 
	  dr.C_ZOBJEDNAVKY , 
	  dr.ID_ZAMITNUTO , 
	  dr.DT_ZAMITNUTO , 
	  dr.S_ZAMITNUTO , 
	  dr.ID_DOKUMENTORIG , 
	  dr.ID_ODBOROOREAL , 
	  dr.ID_PROJEKTMANREAL , 
	  dr.ID_UCSPOLOOREAL , 
	  dr.ID_UCSPOLTOPREAL , 
	  dr.ID_TYPTRANSAKCE, 
RO.S_USERNAME RO, PM.S_USERNAME PM, OO.S_USERNAME OO, TOP.S_USERNAME TOP,
RRO.S_USERNAME RRO, RPM.S_USERNAME RPM, ROO.S_USERNAME ROO, RTOP.S_USERNAME RTOP, ZA.S_USERNAME ZA
FROM KP_DAT_DOKUMENTRADEK dr, 
KTG_APPUSER RO, KTG_APPUSER PM, KTG_APPUSER OO, KTG_APPUSER TOP,
KTG_APPUSER RRO, KTG_APPUSER RPM, KTG_APPUSER ROO, KTG_APPUSER RTOP, KTG_APPUSER ZA 
, kp_ktg_odbor odbor, kp_ktg_projekt projekt
WHERE dr.ID_ODBOROO = RO.ID (+) 
AND dr.ID_PROJEKTMAN  = PM.ID (+)
AND dr.ID_UCSPOLOO = OO.ID (+)
AND dr.ID_UCSPOLTOP  = TOP.ID (+)
AND dr.ID_ODBOROOREAL = RRO.ID (+) 
AND dr.ID_PROJEKTMANREAL  = RPM.ID (+) 
AND dr.ID_UCSPOLOOREAL = ROO.ID (+)
AND dr. ID_UCSPOLTOPREAL  = RTOP.ID (+)
AND dr.ID_ZAMITNUTO = ZA.ID (+)
and dr.id_odbor = odbor.id (+)
and dr.id_projekt = projekt.id (+)
order by 1
;


PROMPT Completed VW_REP_SCHVALOVAKHLAVADETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_SCHVALOVAKHLAVA_NEW.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_SCHVALOVAKHLAVA_NEW.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_SCHVALOVAKHLAVA_NEW
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_SCHVALOVAKHLAVA_NEW" ("ID_SPOLECNOST", "ID_KTGUCETNISPOLECNOST", "S_POPIS", "ID", "POPIS_SL", "DOC_STATUS", "SPOLECNOST", "S_MENA", "S_PROTISTRANA", "ID_TYPTRANSAKCE", "TYP_TRANSAKCE", "ZADAVATEL", "DT_DATUMZADANI", "DT_ZADAVATELZAMITNUTO", "S_ZADAVATELZAMITNUTO", "TYPIZOVANA_TRANSKACE", "DT_TYPIZOVANAOD", "DT_TYPIZOVANADO", "ID_TYPIZLINK", "DT_DATUMZAUCTOVANI", "S_CISLODOKLADU", "GESTOR", "DT_GESTORSCHVALENO", "DT_GESTORZAMITNUTO", "S_GESTORZAMITNUTO", "S_DUVODZRUSENI", "DT_DATUMSPLATNOSTI", "UCETNI", "DT_POZADDATUMUHRADY", "DT_REALDATUMUHRADY", "ID_UCSPOLUHRADA", "DT_ZAUCTUHRADA", "ID_ZAUCTUHRADA", "DT_UCETNIZAMITNUTO", "S_UCETNIZAMITNUTO", "C_DPH", "UZIVATEL", "CISLOFA", "DATPRIJ", "DATDPH", "CASTKA", "FEIS_PRENOS", "DATODES", "TYP_FKT", "S_FEISTEXT", "DATVYSTAVENI", "ID_CISDOKUMENT", "ID_CISSTATUS", "CAPEX_OPEX") AS 
  SELECT 
  KP_DAT_DOKUMENT.ID_SPOLECNOST,
  KP_DAT_DOKUMENT.ID_KTGUCETNISPOLECNOST,
  KP_CIS_DOKUMENT.S_POPIS,   
  KP_DAT_DOKUMENT.ID,           
  KP_DAT_DOKUMENT.S_POPIS POPIS_SL,   
  KP_CIS_DOKUMENTSTATUS.S_POPIS DOC_STATUS,
  KP_KTG_UCETNISPOLECNOST.S_NAZEV SPOLECNOST, 
  KP_DAT_DOKUMENT.S_MENA,
  KP_DAT_DOKUMENT.S_PROTISTRANA,
  KP_DAT_DOKUMENT.ID_TYPTRANSAKCE,
  KP_CIS_TYPTRANSAKCE.S_POPIS TYP_TRANSAKCE,                   
  Z.S_USERNAME ZADAVATEL, 
  KP_DAT_DOKUMENT.DT_DATUMZADANI  ,     
  KP_DAT_DOKUMENT.DT_ZADAVATELZAMITNUTO, 
                KP_DAT_DOKUMENT.S_ZADAVATELZAMITNUTO ,
                KP_DAT_DOKUMENT.C_TYPIZOVANATRAN TYPIZOVANA_TRANSKACE, 
                KP_DAT_DOKUMENT.DT_TYPIZOVANAOD, 
                KP_DAT_DOKUMENT.DT_TYPIZOVANADO, 
                KP_DAT_DOKUMENT.ID_TYPIZLINK,                    
  KP_DAT_DOKUMENT.DT_DATUMZAUCTOVANI, 
                KP_DAT_DOKUMENT.S_CISLODOKLADU , 
  GE.S_USERNAME GESTOR, 
                KP_DAT_DOKUMENT.DT_GESTORSCHVALENO, 
                KP_DAT_DOKUMENT.DT_GESTORZAMITNUTO, 
                KP_DAT_DOKUMENT.S_GESTORZAMITNUTO ,                
                KP_DAT_DOKUMENT.S_DUVODZRUSENI, 
                KP_DAT_DOKUMENT.DT_DATUMSPLATNOSTI, 
  ZAU.S_USERNAME UCETNI,
  KP_DAT_DOKUMENT.DT_POZADDATUMUHRADY, 
                KP_DAT_DOKUMENT.DT_REALDATUMUHRADY,              
  KP_DAT_DOKUMENT.ID_UCSPOLUHRADA ,
                KP_DAT_DOKUMENT.DT_ZAUCTUHRADA, 
                KP_DAT_DOKUMENT.ID_ZAUCTUHRADA, 
                KP_DAT_DOKUMENT.DT_UCETNIZAMITNUTO, 
                KP_DAT_DOKUMENT.S_UCETNIZAMITNUTO,
  KP_DAT_DOKUMENT.C_DPH,   --KP_DAT_DOKUMENT.* 
  AP.S_USERNAME UZIVATEL,
  -- TH, 9.10.2014 , polozky pro report duplicit SL
  KP_DAT_DOKUMENT.CISLOFA, 
  KP_DAT_DOKUMENT.DATPRIJ,
  KP_DAT_DOKUMENT.DATDPH,
  KP_DAT_DOKUMENT.CASTKA,
  KP_DAT_DOKUMENT.FEIS_PRENOS,
  KP_DAT_DOKUMENT.DATODES,
  KP_DAT_DOKUMENT.TYP_FKT,
  KP_DAT_DOKUMENT.S_FEISTEXT,
  KP_DAT_DOKUMENT.DATVYSTAVENI,
  KP_DAT_DOKUMENT.ID_CISDOKUMENT,
  KP_DAT_DOKUMENT.ID_CISSTATUS,
  KP_CIS_TYP_TRAN_CAPEX_OPEX.S_POPIS CAPEX_OPEX -- Pridano pole Druh transakce   
FROM  KP_DAT_DOKUMENT , 
      KP_CIS_DOKUMENT, 
      KP_CIS_TYP_TRAN_CAPEX_OPEX,
      KP_KTG_UCETNISPOLECNOST, 
      KTG_APPUSER Z, KTG_APPUSER AP, KTG_APPUSER ZAU, KTG_APPUSER GE, 
      KP_CIS_TYPTRANSAKCE, 
      KP_CIS_DOKUMENTSTATUS 
WHERE
    KP_CIS_DOKUMENT.ID = KP_DAT_DOKUMENT.ID_CISDOKUMENT (+)
AND KP_DAT_DOKUMENT.ID_KTGUCETNISPOLECNOST = KP_KTG_UCETNISPOLECNOST.ID (+)
AND KP_DAT_DOKUMENT.ID_ZADAVATEL = Z.ID (+) 
AND KP_DAT_DOKUMENT.ID_APPUSER = AP.ID 
AND KP_DAT_DOKUMENT.ID_ZAUCT = ZAU.ID (+) 
AND KP_DAT_DOKUMENT.ID_GESTOR = GE.ID (+) 
AND KP_DAT_DOKUMENT.ID_TYPTRANSAKCE = KP_CIS_TYPTRANSAKCE.ID (+)
AND KP_DAT_DOKUMENT.ID_CISSTATUS =KP_CIS_DOKUMENTSTATUS.ID (+)
AND KP_CIS_TYP_TRAN_CAPEX_OPEX.C_ID(+)=KP_DAT_DOKUMENT.C_CAPEX_OPEX
and KP_DAT_DOKUMENT.DT_DATUMZADANI  > to_date('01.01.2014','DD.MM.YYYY')
;


PROMPT Completed VW_REP_SCHVALOVAKHLAVA_NEW.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_SCHVALOVAKPOSTUP.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_SCHVALOVAKPOSTUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_SCHVALOVAKPOSTUP
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_SCHVALOVAKPOSTUP" ("ID", "ID_KTGUCETNISPOLECNOST", "SPOLECNOST", "DT_DATUMSPLATNOSTI", "DT_DATUMZADANI", "A0", "DT_DATUMZADANIRADKU", "D1", "ALARM1", "DT_DATUMSCHVALENI", "D2", "ALARM2", "DT_DATUMZAUCTOVANI", "D3", "ALARM3", "APPUSER", "ZADAVATEL", "UCETNI", "SCHVALUJICI") AS 
  select a.id, 
       a.id_ktgUcetniSpolecnost, 
	   (select s.s_nazev from kp_ktg_ucetniSpolecnost s where s.id = a.id_ktgUcetniSpolecnost) spolecnost, 
	   a.DT_DATUMSPLATNOSTI, 
	   a.dt_datumZadani, 
	   case when nvl(a.dt_datumZadani,sysdate)>a.DT_DATUMSPLATNOSTI then '1' else '0' end a0, 
	   a.dt_datumZadaniRadku, 
       round(a.dt_datumZadaniRadku-dt_datumZadani) d1, 
	   case when nvl(a.dt_datumZadaniRadku,sysdate)>a.DT_DATUMSPLATNOSTI then '1' else '0' end alarm1, 
	   a.dt_datumSchvaleni, 
	   round(a.dt_datumSchvaleni-a.dt_datumZadaniRadku) d2, 
	   case when nvl(a.dt_datumSchvaleni,sysdate)>a.DT_DATUMSPLATNOSTI then '1' else '0' end alarm2, 
	   a.DT_DATUMZAUCTOVANI, 
	   round(a.DT_DATUMZAUCTOVANI-a.DT_datumSchvaleni) d3, 
	   case when nvl(a.dt_DATUMZAUCTOVANI,sysdate)>a.DT_DATUMSPLATNOSTI then '1' else '0' end alarm3, 
	   (select u.s_krestni||' '||u.s_prijmeni from ktg_appUser u where u.id = a.id_appUSer) appUser, 
	   (select u.s_krestni||' '||u.s_prijmeni from ktg_appUser u where u.id = a.id_zadavatel) zadavatel, 
	   decode(a.id_zauct,null,(select u.s_krestni||' '||u.s_prijmeni from ktg_appUser u where u.id = a.id_ucetni),(select u.s_krestni||' '||u.s_prijmeni from ktg_appUser u where u.id = a.id_zauct)) ucetni, 
   	   (select u.s_krestni||' '||u.s_prijmeni from ktg_appUser u where u.id = a.id_schvalujici) schvalujici 
from ( 
		select d.ID, 
		       d.ID_KTGUCETNISPOLECNOST, 
		       trunc(d.DT_DATUMZADANI) DT_DATUMZADANI, 
		       trunc(max(dr.dt_datumZadani)) dt_datumZadaniRadku, 
			   trunc(f_getDokumentSchvalujiciDatum( d.ID )) dt_datumSchvaleni, 
			   trunc(d.DT_DATUMZAUCTOVANI) DT_DATUMZAUCTOVANI, 
			   trunc(d.DT_DATUMSPLATNOSTI) DT_DATUMSPLATNOSTI, 
			   d.ID_APPUSER, 
			   d.ID_ZADAVATEL, 
			   (select s.id_zodpovednaUcetni from kp_ktg_ucetniSpolecnost s where s.id = d.ID_KTGUCETNISPOLECNOST) ID_ucetni, 
			   d.id_zauct, 
			   f_getDokumentSchvalujici( d.ID ) id_schvalujici 
		from kp_dat_dokument d, 
		     kp_dat_dokumentRadek dr 
		where d.ID = dr.ID_DOKUMENT (+) 
		  and d.ID_CISSTATUS = 0 
		group by d.ID, 
		         d.ID_KTGUCETNISPOLECNOST, 
		         d.DT_DATUMZADANI, 
				 d.DT_DATUMZAUCTOVANI, 
				 d.DT_GESTORSCHVALENO, 
				 d.DT_DATUMSPLATNOSTI, 
				 d.ID_APPUSER, 
				 d.ID_ZADAVATEL, 
				 d.id_zauct 
		) a 
order by spolecnost, id
;


PROMPT Completed VW_REP_SCHVALOVAKPOSTUP.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_SCHVALOVAKPOSTUPDETAIL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_SCHVALOVAKPOSTUPDETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_SCHVALOVAKPOSTUPDETAIL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_SCHVALOVAKPOSTUPDETAIL" ("ID", "ID_DOKUMENT", "ID_ODBOR", "ID_PROJEKT", "ND_CASTKA", "ID_ODBOROO", "DT_SCHVALENOODBOR", "ID_PROJEKTMAN", "DT_SCHVALENOPROJEKT", "ID_UCSPOLOO", "DT_SCHVALENOUCSPOL", "ID_UCSPOLTOP", "DT_SCHVALENOTOP", "S_KOMENTAR", "DT_DATUMPREFAKT", "ID_PREFAKT", "C_KPREFAKT", "DT_DATUMZADANI", "C_REMOVED", "C_ZOBJEDNAVKY", "ID_ZAMITNUTO", "DT_ZAMITNUTO", "S_ZAMITNUTO", "ID_DOKUMENTORIG", "ID_ODBOROOREAL", "ID_PROJEKTMANREAL", "ID_UCSPOLOOREAL", "ID_UCSPOLTOPREAL", "ID_TYPTRANSAKCE", "RO", "PM", "OO", "TOP", "RRO", "RPM", "ROO", "RTOP", "ZA") AS 
  SELECT 
    dr.ID , 
	  dr.ID_DOKUMENT , 
    dr.ID_ODBOR , 
	  dr.ID_PROJEKT , 
	  dr.ND_CASTKA, 
	  dr.ID_ODBOROO , 
	  dr.DT_SCHVALENOODBOR , 
	  dr.ID_PROJEKTMAN , 
	  dr.DT_SCHVALENOPROJEKT , 
	  dr.ID_UCSPOLOO , 
	  dr.DT_SCHVALENOUCSPOL , 
	  dr.ID_UCSPOLTOP , 
	  dr.DT_SCHVALENOTOP , 
	  dr.S_KOMENTAR , 
	  dr.DT_DATUMPREFAKT , 
	  dr.ID_PREFAKT , 
	  dr.C_KPREFAKT, 
	  dr.DT_DATUMZADANI  , 
	  dr.C_REMOVED, 
	  dr.C_ZOBJEDNAVKY , 
	  dr.ID_ZAMITNUTO , 
	  dr.DT_ZAMITNUTO , 
	  dr.S_ZAMITNUTO , 
	  dr.ID_DOKUMENTORIG , 
	  dr.ID_ODBOROOREAL , 
	  dr.ID_PROJEKTMANREAL , 
	  dr.ID_UCSPOLOOREAL , 
	  dr.ID_UCSPOLTOPREAL , 
	  dr.ID_TYPTRANSAKCE, 
RO.S_USERNAME RO, PM.S_USERNAME PM, OO.S_USERNAME OO, TOP.S_USERNAME TOP,
RRO.S_USERNAME RRO, RPM.S_USERNAME RPM, ROO.S_USERNAME ROO, RTOP.S_USERNAME RTOP, ZA.S_USERNAME ZA
FROM KP_DAT_DOKUMENTRADEK dr, 
KTG_APPUSER RO, KTG_APPUSER PM, KTG_APPUSER OO, KTG_APPUSER TOP,
KTG_APPUSER RRO, KTG_APPUSER RPM, KTG_APPUSER ROO, KTG_APPUSER RTOP, KTG_APPUSER ZA 
WHERE dr.ID_ODBOROO = RO.ID (+) 
AND dr.ID_PROJEKTMAN  = PM.ID (+)
AND dr.ID_UCSPOLOO = OO.ID (+)
AND dr.ID_UCSPOLTOP  = TOP.ID (+)
AND dr.ID_ODBOROOREAL = RRO.ID (+) 
AND dr.ID_PROJEKTMANREAL  = RPM.ID (+) 
AND dr.ID_UCSPOLOOREAL = ROO.ID (+)
AND dr. ID_UCSPOLTOPREAL  = RTOP.ID (+)
AND dr.ID_ZAMITNUTO = ZA.ID (+)
order by 1
;


PROMPT Completed VW_REP_SCHVALOVAKPOSTUPDETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_SPOLECNOSTCARTESIS.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_SPOLECNOSTCARTESIS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_SPOLECNOSTCARTESIS
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_SPOLECNOSTCARTESIS" ("DT_DATUM", "ID_KTGSPOLECNOST", "S_NAZEV", "ID_KTGUCETNISPOLECNOST", "COMPANYPROFILE", "S_MENA", "S_COUNTRY", "IFRS_SEGMENT", "MNG_SEGMENT", "IFRS_OD", "IFRS_DO", "KATPS", "C_AKTIVNI", "CMETHOD", "AMETHOD", "ACCNTED", "DEG", "DAG", "CG", "ID_ZODPOVEDNAUCETNI", "ID_SPRAVCEKONSOLIDACE", "ID_ODPOVEDNAOSOBA", "DT_IN1_RKC", "DT_OUT1_RKC", "DT_IN2_JTFG", "DT_OUT2_JTFG", "DT_IN2_TECHNO", "DT_OUT2_TECHNO", "DT_IN4_MNG", "DT_OUT4_MNG", "CMETHOD_1", "CMETHOD_2J", "CMETHOD_2T", "CMETHOD_4", "ID_KTGUCETNISPOLECNOSTMATKA") AS 
  SELECT   rep.dt_datum,
				s.id id_ktgspolecnost,
            s.s_nazev,
				null id_ktgucetnispolecnost,
            'NA' companyprofile, null s_mena, s.s_country,
            --(select s_nazev from kp_ktg_ucetniSpolecnost where id = rep.ID_IFRSSEGMENT and rep.c_scope8 = '1') ifrs_segment,
            DECODE (rep.c_scope8,
                    '1', TO_CHAR (rep.id_ifrssegment),
                    NULL
                   ) ifrs_segment,
            --(select s_nazev from kp_ktg_ucetniSpolecnost where id = rep.ID_MNGSEGMENT and rep.c_scope8 = '1') mng_segment,
            DECODE (rep.c_scope8,
                    '1', TO_CHAR (rep.id_mngsegment),
                    NULL
                   ) mng_segment,
            DECODE (rep.c_scope8, '1', rep.ifrs_od, NULL) ifrs_od,
            DECODE (rep.c_scope8, '1', rep.ifrs_do, NULL) ifrs_do,
            --f_getKodSubjectTyp ( s.s_kodkategorieprotistrana ) katps,
            f_getKodSubjectTyp ( nvl(s.s_kodkategorieprotistrana_2,s.s_kodkategorieprotistrana) ) katps,
            rep.c_aktivni, DECODE (rep.c_scope8, '1', 'NA', 'NC') cmethod,
            'NA' amethod, DECODE (rep.c_scope8, '1', '1', '0') accnted,
            '' deg, '' dag, '' cg,
				NULL id_zodpovednaucetni,
            NULL id_spravcekonsolidace,
            NULL id_odpovednaosoba,
            DECODE (rep.c_scope8, '1', rep.dt_in1_rkc, NULL) dt_in1_rkc,
            DECODE (rep.c_scope8, '1', rep.dt_out1_rkc, NULL) dt_out1_rkc,
            DECODE (rep.c_scope8, '1', rep.dt_in2_jtfg, NULL) dt_in2_jtfg,
            DECODE (rep.c_scope8, '1', rep.dt_out2_jtfg, NULL) dt_out2_jtfg,
            DECODE (rep.c_scope8,
                    '1', rep.dt_in2_techno,
                    NULL
                   ) dt_in2_techno,
            DECODE (rep.c_scope8,
                    '1', rep.dt_out2_techno,
                    NULL
                   ) dt_out2_techno,
            DECODE (rep.c_scope8, '1', rep.dt_in4_mng, NULL) dt_in4_mng,
            DECODE (rep.c_scope8, '1', rep.dt_out4_mng, NULL) dt_out4_mng,
            DECODE (rep.c_scope8,
                    '1', DECODE (rep.id_subtypclen_1, 1, 'FC', 3, 'EM', 'NA'),
                    'NA'
                   ) cmethod_1,
            DECODE (rep.c_scope8,
                    '1', DECODE (rep.id_subtypclen_2r,
                                 1, 'FC',
                                 3, 'EM',
                                 'NA'
                                ),
                    'NA'
                   ) cmethod_2j,
            DECODE (rep.c_scope8,
                    '1', DECODE (rep.id_subtypclen_2t,
                                 1, 'FC',
                                 3, 'EM',
                                 'NA'
                                ),
                    'NA'
                   ) cmethod_2t,
            DECODE (rep.c_scope8,
                    '1', DECODE (rep.id_subtypclen_4, 1, 'FC', 3, 'EM', 'NA'),
                    'NA'
                   ) cmethod_4, rep.id_ktgucetnispolecnostmatka
       FROM kp_rep_spolecnostcartesis rep,
            kp_ktg_spolecnost s
      WHERE rep.id_ktgspolecnost = s.ID
	    AND s.id_ktgspolecnost is null
		AND s.id > 0
union all
SELECT   rep.dt_datum,
				s.id id_ktgspolecnost,
            s.s_nazev,
				null id_ktgucetnispolecnost,
            'NA' companyprofile, null s_mena, s.s_country,
            --(select s_nazev from kp_ktg_ucetniSpolecnost where id = rep.ID_IFRSSEGMENT and rep.c_scope8 = '1') ifrs_segment,
            DECODE (rep.c_scope8,
                    '1', TO_CHAR (rep.id_ifrssegment),
                    NULL
                   ) ifrs_segment,
            --(select s_nazev from kp_ktg_ucetniSpolecnost where id = rep.ID_MNGSEGMENT and rep.c_scope8 = '1') mng_segment,
            DECODE (rep.c_scope8,
                    '1', TO_CHAR (rep.id_mngsegment),
                    NULL
                   ) mng_segment,
            DECODE (rep.c_scope8, '1', rep.ifrs_od, NULL) ifrs_od,
            DECODE (rep.c_scope8, '1', rep.ifrs_do, NULL) ifrs_do,
            --f_getKodSubjectTyp ( s.s_kodkategorieprotistrana ) katps,
            f_getKodSubjectTyp ( nvl(s.s_kodkategorieprotistrana_2,s.s_kodkategorieprotistrana) ) katps,
            rep.c_aktivni, DECODE (rep.c_scope8, '1', 'NA', 'NC') cmethod,
            'NA' amethod, DECODE (rep.c_scope8, '1', '1', '0') accnted,
            '' deg, '' dag, '' cg,
				NULL id_zodpovednaucetni,
            NULL id_spravcekonsolidace,
            NULL id_odpovednaosoba,
            DECODE (rep.c_scope8, '1', rep.dt_in1_rkc, NULL) dt_in1_rkc,
            DECODE (rep.c_scope8, '1', rep.dt_out1_rkc, NULL) dt_out1_rkc,
            DECODE (rep.c_scope8, '1', rep.dt_in2_jtfg, NULL) dt_in2_jtfg,
            DECODE (rep.c_scope8, '1', rep.dt_out2_jtfg, NULL) dt_out2_jtfg,
            DECODE (rep.c_scope8,
                    '1', rep.dt_in2_techno,
                    NULL
                   ) dt_in2_techno,
            DECODE (rep.c_scope8,
                    '1', rep.dt_out2_techno,
                    NULL
                   ) dt_out2_techno,
            DECODE (rep.c_scope8, '1', rep.dt_in4_mng, NULL) dt_in4_mng,
            DECODE (rep.c_scope8, '1', rep.dt_out4_mng, NULL) dt_out4_mng,
            DECODE (rep.c_scope8,
                    '1', DECODE (rep.id_subtypclen_1, 1, 'FC', 3, 'EM', 'NA'),
                    'NA'
                   ) cmethod_1,
            DECODE (rep.c_scope8,
                    '1', DECODE (rep.id_subtypclen_2r,
                                 1, 'FC',
                                 3, 'EM',
                                 'NA'
                                ),
                    'NA'
                   ) cmethod_2j,
            DECODE (rep.c_scope8,
                    '1', DECODE (rep.id_subtypclen_2t,
                                 1, 'FC',
                                 3, 'EM',
                                 'NA'
                                ),
                    'NA'
                   ) cmethod_2t,
            DECODE (rep.c_scope8,
                    '1', DECODE (rep.id_subtypclen_4, 1, 'FC', 3, 'EM', 'NA'),
                    'NA'
                   ) cmethod_4, rep.id_ktgucetnispolecnostmatka
       FROM kp_rep_spolecnostcartesis rep,
            kp_ktg_spolecnost s
      WHERE rep.id_ktgspolecnost = s.ID
	    AND s.id_ktgspolecnost is not null
       and f_jeSpolecnostClenSkupiny ( s.id_ktgspolecnost, 8, rep.dt_datum ) = 0
		AND s.id > 0
union all
SELECT   rep.dt_datum,
				s.id id_ktgspolecnost,            
            CASE WHEN ( us.id < 10000 ) --esc 05.01.2009
                        THEN us.s_nazev
            ELSE        s.s_nazev
            END,
            --f_cartesisProtistrana ( rep.c_scope8, us.id, us.c_exportJakoProtistrana ) id_ktgucetnispolecnost,
            DECODE ( us.id,
					5004, 5054, us.id ) id_ktgucetnispolecnost,
            'NA' companyprofile, us.s_mena, s.s_country,
            --(select s_nazev from kp_ktg_ucetniSpolecnost where id = rep.ID_IFRSSEGMENT and rep.c_scope8 = '1') ifrs_segment,
            DECODE (rep.c_scope8,
                    '1', TO_CHAR (rep.id_ifrssegment),
                    NULL
                   ) ifrs_segment,
            --(select s_nazev from kp_ktg_ucetniSpolecnost where id = rep.ID_MNGSEGMENT and rep.c_scope8 = '1') mng_segment,
            DECODE (rep.c_scope8,
                    '1', TO_CHAR (rep.id_mngsegment),
                    NULL
                   ) mng_segment,
            DECODE (rep.c_scope8, '1', rep.ifrs_od, NULL) ifrs_od,
            DECODE (rep.c_scope8, '1', rep.ifrs_do, NULL) ifrs_do,
            --f_getKodSubjectTyp ( s.s_kodkategorieprotistrana ) katps,
            f_getKodSubjectTyp ( nvl(s.s_kodkategorieprotistrana_2,s.s_kodkategorieprotistrana) ) katps,
            rep.c_aktivni, DECODE (rep.c_scope8, '1', 'NA', 'NC') cmethod,
            'NA' amethod, DECODE (rep.c_scope8, '1', '1', '0') accnted,
            '' deg, '' dag, '' cg,
            DECODE (rep.c_scope8,
                    '1', us.id_zodpovednaucetni,
                    NULL
                   ) id_zodpovednaucetni,
            DECODE (rep.c_scope8,
                    '1', us.id_spravcekonsolidace,
                    NULL
                   ) id_spravcekonsolidace,
            DECODE (rep.c_scope8,
                    '1', us.id_odpovednaosoba,
                    NULL
                   ) id_odpovednaosoba,
            DECODE (rep.c_scope8, '1', rep.dt_in1_rkc, NULL) dt_in1_rkc,
            DECODE (rep.c_scope8, '1', rep.dt_out1_rkc, NULL) dt_out1_rkc,
            DECODE (rep.c_scope8, '1', rep.dt_in2_jtfg, NULL) dt_in2_jtfg,
            DECODE (rep.c_scope8, '1', rep.dt_out2_jtfg, NULL) dt_out2_jtfg,
            DECODE (rep.c_scope8,
                    '1', rep.dt_in2_techno,
                    NULL
                   ) dt_in2_techno,
            DECODE (rep.c_scope8,
                    '1', rep.dt_out2_techno,
                    NULL
                   ) dt_out2_techno,
            DECODE (rep.c_scope8, '1', rep.dt_in4_mng, NULL) dt_in4_mng,
            DECODE (rep.c_scope8, '1', rep.dt_out4_mng, NULL) dt_out4_mng,
            DECODE (rep.c_scope8,
                    '1', DECODE (rep.id_subtypclen_1, 1, 'FC', 3, 'EM', 'NA'),
                    'NA'
                   ) cmethod_1,
            DECODE (rep.c_scope8,
                    '1', DECODE (rep.id_subtypclen_2r,
                                 1, 'FC',
                                 3, 'EM',
                                 'NA'
                                ),
                    'NA'
                   ) cmethod_2j,
            DECODE (rep.c_scope8,
                    '1', DECODE (rep.id_subtypclen_2t,
                                 1, 'FC',
                                 3, 'EM',
                                 'NA'
                                ),
                    'NA'
                   ) cmethod_2t,
            DECODE (rep.c_scope8,
                    '1', DECODE (rep.id_subtypclen_4, 1, 'FC', 3, 'EM', 'NA'),
                    'NA'
                   ) cmethod_4, rep.id_ktgucetnispolecnostmatka
       FROM kp_rep_spolecnostcartesis rep,
            kp_ktg_spolecnost s,
            kp_ktg_ucetnispolecnost us
      WHERE rep.id_ktgspolecnost = s.ID
	    AND decode(s.id_ktgspolecnost,5004,5054,s.id_ktgspolecnost) = us.ID
       and f_jeSpolecnostClenSkupiny ( s.id_ktgspolecnost, 8, rep.dt_datum ) > 0
		AND s.id > 0
   ORDER BY 1, 2
;


PROMPT Completed VW_REP_SPOLECNOSTCARTESIS.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_UCSPOLDETAILCLOSEDATE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_UCSPOLDETAILCLOSEDATE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_UCSPOLDETAILCLOSEDATE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_UCSPOLDETAILCLOSEDATE" ("SPOLECNOST", "DT_LASTCLOSEDATE", "RADEK", "ID_CISKATSPOL") AS 
  SELECT S_NAZEV, 
       DT_LASTCLOSEDATE, 
       1 RADEK, 
	   ID_CISKATSPOL 
FROM KP_KTG_UCETNISPOLECNOST 
WHERE CASE 
         WHEN (EXTRACT (DAY FROM SYSDATE) > 15) THEN ADD_MONTHS(LAST_DAY(TRUNC(SYSDATE)),-1) 
		 ELSE ADD_MONTHS(LAST_DAY(TRUNC(SYSDATE)),-2) 
	   END <= DT_LASTCLOSEDATE 
  AND ID_KATEGORIE <> 300 AND DT_DATUMARCHIVACE IS NULL AND C_EXTSYSTEM <> 'M' 
UNION ALL 
SELECT S_NAZEV, 
       DT_LASTCLOSEDATE, 
       2 RADEK, 
	   ID_CISKATSPOL 
FROM KP_KTG_UCETNISPOLECNOST 
WHERE CASE 
         WHEN (EXTRACT (DAY FROM SYSDATE) > 15) THEN ADD_MONTHS(LAST_DAY(TRUNC(SYSDATE)),-1) 
		 ELSE ADD_MONTHS(LAST_DAY(TRUNC(SYSDATE)),-2) 
	   END BETWEEN DT_LASTCLOSEDATE+1 AND DT_LASTCLOSEDATE+30 
  AND ID_KATEGORIE <> 300 AND DT_DATUMARCHIVACE IS NULL AND C_EXTSYSTEM <> 'M' 
UNION ALL 
SELECT S_NAZEV, 
       DT_LASTCLOSEDATE, 
       3 RADEK, 
	   ID_CISKATSPOL 
FROM KP_KTG_UCETNISPOLECNOST 
WHERE CASE 
         WHEN (EXTRACT (DAY FROM SYSDATE) > 15) THEN ADD_MONTHS(LAST_DAY(TRUNC(SYSDATE)),-1) 
		 ELSE ADD_MONTHS(LAST_DAY(TRUNC(SYSDATE)),-2) 
	   END BETWEEN DT_LASTCLOSEDATE+31 AND DT_LASTCLOSEDATE+90 
  AND ID_KATEGORIE <> 300 AND DT_DATUMARCHIVACE IS NULL AND C_EXTSYSTEM <> 'M' 
UNION ALL 
SELECT S_NAZEV, 
       DT_LASTCLOSEDATE, 
       4 RADEK, 
	   ID_CISKATSPOL 
FROM KP_KTG_UCETNISPOLECNOST 
WHERE CASE 
         WHEN (EXTRACT (DAY FROM SYSDATE) > 15) THEN ADD_MONTHS(LAST_DAY(TRUNC(SYSDATE)),-1) 
		 ELSE ADD_MONTHS(LAST_DAY(TRUNC(SYSDATE)),-2) 
	   END BETWEEN DT_LASTCLOSEDATE+91 AND DT_LASTCLOSEDATE+360 
  AND ID_KATEGORIE <> 300 AND DT_DATUMARCHIVACE IS NULL AND C_EXTSYSTEM <> 'M' 
UNION ALL 
SELECT S_NAZEV, 
       DT_LASTCLOSEDATE, 
       5 RADEK, 
	   ID_CISKATSPOL 
FROM KP_KTG_UCETNISPOLECNOST 
WHERE CASE 
         WHEN (EXTRACT (DAY FROM SYSDATE) > 15) THEN ADD_MONTHS(LAST_DAY(TRUNC(SYSDATE)),-1) 
		 ELSE ADD_MONTHS(LAST_DAY(TRUNC(SYSDATE)),-2) 
	   END > DT_LASTCLOSEDATE+360 
  AND ID_KATEGORIE <> 300 AND DT_DATUMARCHIVACE IS NULL AND C_EXTSYSTEM <> 'M' 
UNION ALL 
SELECT S_NAZEV, 
       NULL, 
       6 RADEK, 
	   ID_CISKATSPOL 
FROM KP_KTG_UCETNISPOLECNOST 
WHERE DT_LASTCLOSEDATE IS NULL 
  AND ID_KATEGORIE <> 300 AND DT_DATUMARCHIVACE IS NULL AND C_EXTSYSTEM <> 'M' 
ORDER BY RADEK, DT_LASTCLOSEDATE, S_NAZEV

;


PROMPT Completed VW_REP_UCSPOLDETAILCLOSEDATE.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_UCSPOLLASTCLOSEDATE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_UCSPOLLASTCLOSEDATE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_UCSPOLLASTCLOSEDATE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_UCSPOLLASTCLOSEDATE" ("POCET", "RADEK") AS 
  SELECT COUNT(*) POCET, 
       1 RADEK 
FROM KP_KTG_UCETNISPOLECNOST 
WHERE CASE 
         WHEN (EXTRACT (DAY FROM SYSDATE) > 15) THEN ADD_MONTHS(LAST_DAY(TRUNC(SYSDATE)),-1) 
		 ELSE ADD_MONTHS(LAST_DAY(TRUNC(SYSDATE)),-2) 
	   END <= DT_LASTCLOSEDATE 
  AND ID_KATEGORIE <> 300 AND DT_DATUMARCHIVACE IS NULL AND C_EXTSYSTEM <> 'M' 
UNION ALL 
SELECT COUNT(*) POCET, 
       2 RADEK 
FROM KP_KTG_UCETNISPOLECNOST 
WHERE CASE 
         WHEN (EXTRACT (DAY FROM SYSDATE) > 15) THEN ADD_MONTHS(LAST_DAY(TRUNC(SYSDATE)),-1) 
		 ELSE ADD_MONTHS(LAST_DAY(TRUNC(SYSDATE)),-2) 
	   END BETWEEN DT_LASTCLOSEDATE+1 AND DT_LASTCLOSEDATE+30 
  AND ID_KATEGORIE <> 300 AND DT_DATUMARCHIVACE IS NULL AND C_EXTSYSTEM <> 'M' 
UNION ALL 
SELECT COUNT(*) POCET, 
       3 RADEK 
FROM KP_KTG_UCETNISPOLECNOST 
WHERE CASE 
         WHEN (EXTRACT (DAY FROM SYSDATE) > 15) THEN ADD_MONTHS(LAST_DAY(TRUNC(SYSDATE)),-1) 
		 ELSE ADD_MONTHS(LAST_DAY(TRUNC(SYSDATE)),-2) 
	   END BETWEEN DT_LASTCLOSEDATE+31 AND DT_LASTCLOSEDATE+90 
  AND ID_KATEGORIE <> 300 AND DT_DATUMARCHIVACE IS NULL AND C_EXTSYSTEM <> 'M' 
UNION ALL 
SELECT COUNT(*) POCET, 
       4 RADEK 
FROM KP_KTG_UCETNISPOLECNOST 
WHERE CASE 
         WHEN (EXTRACT (DAY FROM SYSDATE) > 15) THEN ADD_MONTHS(LAST_DAY(TRUNC(SYSDATE)),-1) 
		 ELSE ADD_MONTHS(LAST_DAY(TRUNC(SYSDATE)),-2) 
	   END BETWEEN DT_LASTCLOSEDATE+91 AND DT_LASTCLOSEDATE+360 
  AND ID_KATEGORIE <> 300 AND DT_DATUMARCHIVACE IS NULL AND C_EXTSYSTEM <> 'M' 
UNION ALL 
SELECT COUNT(*) POCET, 
       5 RADEK 
FROM KP_KTG_UCETNISPOLECNOST 
WHERE CASE 
         WHEN (EXTRACT (DAY FROM SYSDATE) > 15) THEN ADD_MONTHS(LAST_DAY(TRUNC(SYSDATE)),-1) 
		 ELSE ADD_MONTHS(LAST_DAY(TRUNC(SYSDATE)),-2) 
	   END > DT_LASTCLOSEDATE+360 
  AND ID_KATEGORIE <> 300 AND DT_DATUMARCHIVACE IS NULL AND C_EXTSYSTEM <> 'M' 
UNION ALL 
SELECT COUNT(*) POCET, 
       6 RADEK 
FROM KP_KTG_UCETNISPOLECNOST 
WHERE DT_LASTCLOSEDATE IS NULL 
  AND ID_KATEGORIE <> 300 AND DT_DATUMARCHIVACE IS NULL AND C_EXTSYSTEM <> 'M'

;


PROMPT Completed VW_REP_UCSPOLLASTCLOSEDATE.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_UCSPOLMAXTRANSAKCI.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_UCSPOLMAXTRANSAKCI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_UCSPOLMAXTRANSAKCI
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_UCSPOLMAXTRANSAKCI" ("SPOLECNOST", "POCETTRANSAKCI", "DATUM", "POCETTRANSAKCIPROJEKT", "POCETTRANSAKCIODBOR", "PCTTRANSAKCIPROJEKT", "PCTTRANSAKCIODBOR", "C_ONLINE", "POCETTRANSAKCIPROJEKTPLUS", "PCTTRANSAKCIPROJEKTPLUS", "ID_CISKATSPOL") AS 
  SELECT   s.s_nazev || ' (' || s.ID || ')' spolecnost, 
            d.nl_pocettransakci pocettransakci, 
            d.dt_datum datum, 
            d.nl_pocettransakciprojekt pocettransakciprojekt, 
            d.nl_pocettransakciodbor pocettransakciodbor, 
            DECODE (d.nl_pocettransakci, 
                    0, 0, 
                    100 * d.nl_pocettransakciprojekt / d.nl_pocettransakci 
                   ) pcttransakciprojekt, 
            DECODE (d.nl_pocettransakci, 
                    0, 0, 
                    100 * d.nl_pocettransakciodbor / d.nl_pocettransakci 
                   ) pcttransakciodbor, 
            s.c_online, 
            d.nl_pocettransakciprojektplus pocettransakciprojektplus, 
            DECODE (d.nl_pocettransakci, 
                    0, 0, 
                    100 * d.nl_pocettransakciprojektplus / d.nl_pocettransakci 
                   ) pcttransakciprojektplus, 
            s.id_ciskatspol 
       FROM kp_ktg_ucetnispolecnost s, 
	        kp_dat_doklad d, 
			kp_parametry p 
      WHERE s.ID = d.ID_KTGUCETNISPOLECNOST 
	    and d.DT_DATUM = p.DT_NG_DATUM_DO 
		and d.NL_KROK < 100 
		and d.NL_POCETTRANSAKCI <> 0 
   ORDER BY d.nl_pocettransakci DESC

;


PROMPT Completed VW_REP_UCSPOLMAXTRANSAKCI.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_UCSPOLPOCTTRANHB.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_UCSPOLPOCTTRANHB.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_UCSPOLPOCTTRANHB
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_UCSPOLPOCTTRANHB" ("ID", "SPOLECNOST", "HOTOVOST", "BANKUCTY") AS 
  SELECT S.ID, 
       S.S_NAZEV, 
       NVL(HOTOVOST.NL_POCETTRANSAKCI,0) HOTOVOST, 
       NVL(BANKUCTY.NL_POCETTRANSAKCI,0) BANKUCTY 
FROM 
	( 
	SELECT LDD2.ID_KTGUCETNISPOLECNOST, COUNT(*) NL_POCETTRANSAKCI 
	FROM 
	( 
	SELECT LDD.ID ID_KTGUCETNISPOLECNOST, LDD.MAX_DATUM, MAX(D.ID) ID_DOKLAD, D.ID_KTGDOKLAD 
	FROM 
		( 
		SELECT ID, MAX(DT_DATUM) MAX_DATUM, NL_KROK  FROM 
		    ( 
			SELECT S.ID , D.DT_DATUM, D.NL_KROK 
			FROM KP_KTG_UCETNISPOLECNOST S, 
			     KP_DAT_DOKLAD D 
			WHERE S.ID = D.ID_KTGUCETNISPOLECNOST(+) 
			  AND S.C_DOCDISPLAY = '1' 
			  AND D.S_UZIVATEL <> 'denni' 
			) 
		GROUP BY ID, NL_KROK 
		) LDD, 
		KP_DAT_DOKLAD D 
	WHERE LDD.ID = D.ID_KTGUCETNISPOLECNOST 
	  AND LDD.MAX_DATUM = D.DT_DATUM 
	  AND LDD.NL_KROK = D.NL_KROK 
	  AND LDD.NL_KROK = 1 
  AND EXISTS (SELECT NULL FROM KP_KTG_DOKLAD KKD WHERE KKD.ID = D.ID_KTGDOKLAD AND KKD.ID_CISDOKLAD = 1)--jen doklad 1 
	GROUP BY LDD.ID , LDD.MAX_DATUM, D.ID_KTGDOKLAD 
	ORDER BY LDD.ID 
	) LDD2, 
	  KP_REL_DOKLAD_ZDROJDAT REL, 
	  KP_DAT_DOKLADZDROJDAT ZD 
	WHERE LDD2.ID_DOKLAD = REL.ID_DOKLAD 
	  AND REL.ID_DOKLADZDROJDAT = ZD.ID 
	  AND 
	     (LDD2.ID_KTGDOKLAD = 900 AND ZD.S_UCET LIKE '111%' 
	   OR LDD2.ID_KTGDOKLAD = 901 AND ZD.S_UCET LIKE '211%' 
	   OR LDD2.ID_KTGDOKLAD = 902 AND ZD.S_UCET LIKE '111%' 
	   OR LDD2.ID_KTGDOKLAD = 903 AND ZD.S_UCET LIKE '111%' 
	   OR LDD2.ID_KTGDOKLAD = 904 AND ZD.S_UCET LIKE '211%' 
	   OR LDD2.ID_KTGDOKLAD = 905 AND ZD.S_UCET LIKE '111%') 
	GROUP BY LDD2.ID_KTGUCETNISPOLECNOST 
	) HOTOVOST, 
	( 
	SELECT LDD2.ID_KTGUCETNISPOLECNOST, COUNT(*) NL_POCETTRANSAKCI 
	FROM 
	( 
	SELECT LDD.ID ID_KTGUCETNISPOLECNOST, LDD.MAX_DATUM, MAX(D.ID) ID_DOKLAD, D.ID_KTGDOKLAD 
	FROM 
		( 
		SELECT ID, MAX(DT_DATUM) MAX_DATUM, NL_KROK  FROM 
		    ( 
			SELECT S.ID , D.DT_DATUM, D.NL_KROK 
			FROM KP_KTG_UCETNISPOLECNOST S, 
			     KP_DAT_DOKLAD D 
			WHERE S.ID = D.ID_KTGUCETNISPOLECNOST(+) 
			  AND S.C_DOCDISPLAY = '1' 
			  AND D.S_UZIVATEL <> 'denni' 
			) 
		GROUP BY ID, NL_KROK 
		) LDD, 
		KP_DAT_DOKLAD D 
	WHERE LDD.ID = D.ID_KTGUCETNISPOLECNOST 
	  AND LDD.MAX_DATUM = D.DT_DATUM 
	  AND LDD.NL_KROK = D.NL_KROK 
	  AND LDD.NL_KROK = 1 
  AND EXISTS (SELECT NULL FROM KP_KTG_DOKLAD KKD WHERE KKD.ID = D.ID_KTGDOKLAD AND KKD.ID_CISDOKLAD = 1)--jen doklad 1 
	GROUP BY LDD.ID , LDD.MAX_DATUM, D.ID_KTGDOKLAD 
	ORDER BY LDD.ID 
	) LDD2, 
	  KP_REL_DOKLAD_ZDROJDAT REL, 
	  KP_DAT_DOKLADZDROJDAT ZD 
	WHERE LDD2.ID_DOKLAD = REL.ID_DOKLAD 
	  AND REL.ID_DOKLADZDROJDAT = ZD.ID 
	  AND 
	     (LDD2.ID_KTGDOKLAD = 900 AND ZD.S_UCET LIKE '131%' 
	   OR LDD2.ID_KTGDOKLAD = 901 AND ZD.S_UCET LIKE '221%' 
	   OR LDD2.ID_KTGDOKLAD = 902 AND ZD.S_UCET LIKE '131%' 
	   OR LDD2.ID_KTGDOKLAD = 903 AND ZD.S_UCET LIKE '130%' 
	   OR LDD2.ID_KTGDOKLAD = 904 AND ZD.S_UCET LIKE '221%' 
	   OR LDD2.ID_KTGDOKLAD = 905 AND ZD.S_UCET LIKE '131%') 
	GROUP BY LDD2.ID_KTGUCETNISPOLECNOST 
	) BANKUCTY, 
	KP_KTG_UCETNISPOLECNOST S 
WHERE S.C_DOCDISPLAY = '1' 
  AND S.ID = HOTOVOST.ID_KTGUCETNISPOLECNOST(+) 
  AND S.ID = BANKUCTY.ID_KTGUCETNISPOLECNOST(+) 
ORDER BY HOTOVOST DESC, BANKUCTY DESC

;


PROMPT Completed VW_REP_UCSPOLPOCTTRANHB.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_UCSPOLPOCTTRANHB_100K.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_UCSPOLPOCTTRANHB_100K.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_UCSPOLPOCTTRANHB_100K
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_UCSPOLPOCTTRANHB_100K" ("ID", "SPOLECNOST", "HOTOVOST", "BANKUCTY") AS 
  SELECT S.ID, 
       S.S_NAZEV, 
       NVL(HOTOVOST.NL_POCETTRANSAKCI,0) HOTOVOST, 
       NVL(BANKUCTY.NL_POCETTRANSAKCI,0) BANKUCTY 
FROM 
	( 
	SELECT LDD2.ID_KTGUCETNISPOLECNOST, COUNT(*) NL_POCETTRANSAKCI 
	FROM 
	( 
	SELECT LDD.ID ID_KTGUCETNISPOLECNOST, LDD.MAX_DATUM, MAX(D.ID) ID_DOKLAD, D.ID_KTGDOKLAD 
	FROM 
		( 
		SELECT ID, MAX(DT_DATUM) MAX_DATUM, NL_KROK  FROM 
		    ( 
			SELECT S.ID , D.DT_DATUM, D.NL_KROK 
			FROM KP_KTG_UCETNISPOLECNOST S, 
			     KP_DAT_DOKLAD D 
			WHERE S.ID = D.ID_KTGUCETNISPOLECNOST(+) 
			  AND S.C_DOCDISPLAY = '1' 
			  AND D.S_UZIVATEL <> 'denni' 
			) 
		GROUP BY ID, NL_KROK 
		) LDD, 
		KP_DAT_DOKLAD D 
	WHERE LDD.ID = D.ID_KTGUCETNISPOLECNOST 
	  AND LDD.MAX_DATUM = D.DT_DATUM 
	  AND LDD.NL_KROK = D.NL_KROK 
	  AND LDD.NL_KROK = 1 
  AND EXISTS (SELECT NULL FROM KP_KTG_DOKLAD KKD WHERE KKD.ID = D.ID_KTGDOKLAD AND KKD.ID_CISDOKLAD = 1)--jen doklad 1 
	GROUP BY LDD.ID , LDD.MAX_DATUM, D.ID_KTGDOKLAD 
	ORDER BY LDD.ID 
	) LDD2, 
	  KP_REL_DOKLAD_ZDROJDAT REL, 
	  KP_DAT_DOKLADZDROJDAT ZD 
	WHERE LDD2.ID_DOKLAD = REL.ID_DOKLAD 
	  AND REL.ID_DOKLADZDROJDAT = ZD.ID 
	  AND ZD.ND_CASTKALOCAL > 100000 
	  AND 
	     (LDD2.ID_KTGDOKLAD = 900 AND ZD.S_UCET LIKE '111%' 
	   OR LDD2.ID_KTGDOKLAD = 901 AND ZD.S_UCET LIKE '211%' 
	   OR LDD2.ID_KTGDOKLAD = 902 AND ZD.S_UCET LIKE '111%' 
	   OR LDD2.ID_KTGDOKLAD = 903 AND ZD.S_UCET LIKE '111%' 
	   OR LDD2.ID_KTGDOKLAD = 904 AND ZD.S_UCET LIKE '211%' 
	   OR LDD2.ID_KTGDOKLAD = 905 AND ZD.S_UCET LIKE '111%') 
	GROUP BY LDD2.ID_KTGUCETNISPOLECNOST 
	) HOTOVOST, 
	( 
	SELECT LDD2.ID_KTGUCETNISPOLECNOST, COUNT(*) NL_POCETTRANSAKCI 
	FROM 
	( 
	SELECT LDD.ID ID_KTGUCETNISPOLECNOST, LDD.MAX_DATUM, MAX(D.ID) ID_DOKLAD, D.ID_KTGDOKLAD 
	FROM 
		( 
		SELECT ID, MAX(DT_DATUM) MAX_DATUM, NL_KROK  FROM 
		    ( 
			SELECT S.ID , D.DT_DATUM, D.NL_KROK 
			FROM KP_KTG_UCETNISPOLECNOST S, 
			     KP_DAT_DOKLAD D 
			WHERE S.ID = D.ID_KTGUCETNISPOLECNOST(+) 
			  AND S.C_DOCDISPLAY = '1' 
			  AND D.S_UZIVATEL <> 'denni' 
			) 
		GROUP BY ID, NL_KROK 
		) LDD, 
		KP_DAT_DOKLAD D 
	WHERE LDD.ID = D.ID_KTGUCETNISPOLECNOST 
	  AND LDD.MAX_DATUM = D.DT_DATUM 
	  AND LDD.NL_KROK = D.NL_KROK 
	  AND LDD.NL_KROK = 1 
  AND EXISTS (SELECT NULL FROM KP_KTG_DOKLAD KKD WHERE KKD.ID = D.ID_KTGDOKLAD AND KKD.ID_CISDOKLAD = 1)--jen doklad 1 
	GROUP BY LDD.ID , LDD.MAX_DATUM, D.ID_KTGDOKLAD 
	ORDER BY LDD.ID 
	) LDD2, 
	  KP_REL_DOKLAD_ZDROJDAT REL, 
	  KP_DAT_DOKLADZDROJDAT ZD 
	WHERE LDD2.ID_DOKLAD = REL.ID_DOKLAD 
	  AND REL.ID_DOKLADZDROJDAT = ZD.ID 
	  AND ZD.ND_CASTKALOCAL > 100000 
	  AND 
	     (LDD2.ID_KTGDOKLAD = 900 AND ZD.S_UCET LIKE '131%' 
	   OR LDD2.ID_KTGDOKLAD = 901 AND ZD.S_UCET LIKE '221%' 
	   OR LDD2.ID_KTGDOKLAD = 902 AND ZD.S_UCET LIKE '131%' 
	   OR LDD2.ID_KTGDOKLAD = 903 AND ZD.S_UCET LIKE '130%' 
	   OR LDD2.ID_KTGDOKLAD = 904 AND ZD.S_UCET LIKE '221%' 
	   OR LDD2.ID_KTGDOKLAD = 905 AND ZD.S_UCET LIKE '131%') 
	GROUP BY LDD2.ID_KTGUCETNISPOLECNOST 
	) BANKUCTY, 
	KP_KTG_UCETNISPOLECNOST S 
WHERE S.C_DOCDISPLAY = '1' 
  AND S.ID = HOTOVOST.ID_KTGUCETNISPOLECNOST(+) 
  AND S.ID = BANKUCTY.ID_KTGUCETNISPOLECNOST(+)

;


PROMPT Completed VW_REP_UCSPOLPOCTTRANHB_100K.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_UCSPOLPOCTTRANHB_10K.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_UCSPOLPOCTTRANHB_10K.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_UCSPOLPOCTTRANHB_10K
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_UCSPOLPOCTTRANHB_10K" ("ID", "SPOLECNOST", "HOTOVOST", "BANKUCTY") AS 
  SELECT S.ID, 
       S.S_NAZEV, 
       NVL(HOTOVOST.NL_POCETTRANSAKCI,0) HOTOVOST, 
       NVL(BANKUCTY.NL_POCETTRANSAKCI,0) BANKUCTY 
FROM 
	( 
	SELECT LDD2.ID_KTGUCETNISPOLECNOST, COUNT(*) NL_POCETTRANSAKCI 
	FROM 
	( 
	SELECT LDD.ID ID_KTGUCETNISPOLECNOST, LDD.MAX_DATUM, MAX(D.ID) ID_DOKLAD, D.ID_KTGDOKLAD 
	FROM 
		( 
		SELECT ID, MAX(DT_DATUM) MAX_DATUM, NL_KROK  FROM 
		    ( 
			SELECT S.ID , D.DT_DATUM, D.NL_KROK 
			FROM KP_KTG_UCETNISPOLECNOST S, 
			     KP_DAT_DOKLAD D 
			WHERE S.ID = D.ID_KTGUCETNISPOLECNOST(+) 
			  AND S.C_DOCDISPLAY = '1' 
			  AND D.S_UZIVATEL <> 'denni' 
			) 
		GROUP BY ID, NL_KROK 
		) LDD, 
		KP_DAT_DOKLAD D 
	WHERE LDD.ID = D.ID_KTGUCETNISPOLECNOST 
	  AND LDD.MAX_DATUM = D.DT_DATUM 
	  AND LDD.NL_KROK = D.NL_KROK 
	  AND LDD.NL_KROK = 1 
  AND EXISTS (SELECT NULL FROM KP_KTG_DOKLAD KKD WHERE KKD.ID = D.ID_KTGDOKLAD AND KKD.ID_CISDOKLAD = 1)--jen doklad 1 
	GROUP BY LDD.ID , LDD.MAX_DATUM, D.ID_KTGDOKLAD 
	ORDER BY LDD.ID 
	) LDD2, 
	  KP_REL_DOKLAD_ZDROJDAT REL, 
	  KP_DAT_DOKLADZDROJDAT ZD 
	WHERE LDD2.ID_DOKLAD = REL.ID_DOKLAD 
	  AND REL.ID_DOKLADZDROJDAT = ZD.ID 
	  AND ZD.ND_CASTKALOCAL > 10000 
	  AND 
	     (LDD2.ID_KTGDOKLAD = 900 AND ZD.S_UCET LIKE '111%' 
	   OR LDD2.ID_KTGDOKLAD = 901 AND ZD.S_UCET LIKE '211%' 
	   OR LDD2.ID_KTGDOKLAD = 902 AND ZD.S_UCET LIKE '111%' 
	   OR LDD2.ID_KTGDOKLAD = 903 AND ZD.S_UCET LIKE '111%' 
	   OR LDD2.ID_KTGDOKLAD = 904 AND ZD.S_UCET LIKE '211%' 
	   OR LDD2.ID_KTGDOKLAD = 905 AND ZD.S_UCET LIKE '111%') 
	GROUP BY LDD2.ID_KTGUCETNISPOLECNOST 
	) HOTOVOST, 
	( 
	SELECT LDD2.ID_KTGUCETNISPOLECNOST, COUNT(*) NL_POCETTRANSAKCI 
	FROM 
	( 
	SELECT LDD.ID ID_KTGUCETNISPOLECNOST, LDD.MAX_DATUM, MAX(D.ID) ID_DOKLAD, D.ID_KTGDOKLAD 
	FROM 
		( 
		SELECT ID, MAX(DT_DATUM) MAX_DATUM, NL_KROK  FROM 
		    ( 
			SELECT S.ID , D.DT_DATUM, D.NL_KROK 
			FROM KP_KTG_UCETNISPOLECNOST S, 
			     KP_DAT_DOKLAD D 
			WHERE S.ID = D.ID_KTGUCETNISPOLECNOST(+) 
			  AND S.C_DOCDISPLAY = '1' 
			  AND D.S_UZIVATEL <> 'denni' 
			) 
		GROUP BY ID, NL_KROK 
		) LDD, 
		KP_DAT_DOKLAD D 
	WHERE LDD.ID = D.ID_KTGUCETNISPOLECNOST 
	  AND LDD.MAX_DATUM = D.DT_DATUM 
	  AND LDD.NL_KROK = D.NL_KROK 
	  AND LDD.NL_KROK = 1 
  AND EXISTS (SELECT NULL FROM KP_KTG_DOKLAD KKD WHERE KKD.ID = D.ID_KTGDOKLAD AND KKD.ID_CISDOKLAD = 1)--jen doklad 1 
	GROUP BY LDD.ID , LDD.MAX_DATUM, D.ID_KTGDOKLAD 
	ORDER BY LDD.ID 
	) LDD2, 
	  KP_REL_DOKLAD_ZDROJDAT REL, 
	  KP_DAT_DOKLADZDROJDAT ZD 
	WHERE LDD2.ID_DOKLAD = REL.ID_DOKLAD 
	  AND REL.ID_DOKLADZDROJDAT = ZD.ID 
	  AND ZD.ND_CASTKALOCAL > 10000 
	  AND 
	     (LDD2.ID_KTGDOKLAD = 900 AND ZD.S_UCET LIKE '131%' 
	   OR LDD2.ID_KTGDOKLAD = 901 AND ZD.S_UCET LIKE '221%' 
	   OR LDD2.ID_KTGDOKLAD = 902 AND ZD.S_UCET LIKE '131%' 
	   OR LDD2.ID_KTGDOKLAD = 903 AND ZD.S_UCET LIKE '130%' 
	   OR LDD2.ID_KTGDOKLAD = 904 AND ZD.S_UCET LIKE '221%' 
	   OR LDD2.ID_KTGDOKLAD = 905 AND ZD.S_UCET LIKE '131%') 
	GROUP BY LDD2.ID_KTGUCETNISPOLECNOST 
	) BANKUCTY, 
	KP_KTG_UCETNISPOLECNOST S 
WHERE S.C_DOCDISPLAY = '1' 
  AND S.ID = HOTOVOST.ID_KTGUCETNISPOLECNOST(+) 
  AND S.ID = BANKUCTY.ID_KTGUCETNISPOLECNOST(+)

;


PROMPT Completed VW_REP_UCSPOLPOCTTRANHB_10K.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_UCSPOLPREHLED.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_UCSPOLPREHLED.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_UCSPOLPREHLED
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_UCSPOLPREHLED" ("POCET", "RADEK") AS 
  SELECT COUNT(*) POCET, 
       1 RADEK 
FROM KP_KTG_UCETNISPOLECNOST 
WHERE ID_KATEGORIE <> 300 AND DT_DATUMARCHIVACE IS NULL 
UNION ALL 
SELECT COUNT(*) POCET, 
       2 RADEK 
FROM KP_KTG_UCETNISPOLECNOST 
WHERE C_EXTSYSTEM <> 'M' AND ID_KATEGORIE <> 300 AND DT_DATUMARCHIVACE IS NULL 
UNION ALL 
SELECT COUNT(*) POCET, 
       3 RADEK 
FROM KP_KTG_UCETNISPOLECNOST 
WHERE C_EXTSYSTEM = 'M' AND ID_KATEGORIE <> 300 AND DT_DATUMARCHIVACE IS NULL 
UNION ALL 
SELECT COUNT(*) POCET, 
       4 RADEK 
FROM KP_KTG_UCETNISPOLECNOST 
WHERE C_EXTSYSTEM <> 'M' AND ID_KATEGORIE <> 300 AND DT_DATUMARCHIVACE IS NULL AND C_ONLINE = '1' 
ORDER BY RADEK

;


PROMPT Completed VW_REP_UCSPOLPREHLED.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_UCSPOLUCETNI.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_UCSPOLUCETNI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_UCSPOLUCETNI
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_UCSPOLUCETNI" ("ZODPOVEDNAUCETNI", "POCET") AS 
  SELECT U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO ZODPOVEDNAUCETNI, 
       COUNT(*) POCET 
FROM KP_KTG_UCETNISPOLECNOST S, 
     KTG_APPUSER U 
WHERE S.C_EXTSYSTEM <> 'M' 
  AND S.ID_KATEGORIE <> 300 
  AND S.DT_DATUMARCHIVACE IS NULL 
  AND S.ID_ZODPOVEDNAUCETNI = U.ID 
GROUP BY U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO 
ORDER BY POCET DESC

;


PROMPT Completed VW_REP_UCSPOLUCETNI.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_UCSPOLUCETNIDETAILMU.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_UCSPOLUCETNIDETAILMU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_UCSPOLUCETNIDETAILMU
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_UCSPOLUCETNIDETAILMU" ("ZODPOVEDNAUCETNI", "SPOLECNOST", "HLASKA", "ID_DOKLAD", "DATUM", "ID_KTGUCETNISPOLECNOST", "ID_CISKATSPOL") AS 
  select ZODPOVEDNAUCETNI, s_nazev, s_HLASKA, ID_DOKLAD, max_DATUM, 
 ID_KTGUCETNISPOLECNOST, ID_CISKATSPOL 
from MVW_REP_UCSPOLUCETNIDETAILMU 
where s_hlaska like 'MU%'

;


PROMPT Completed VW_REP_UCSPOLUCETNIDETAILMU.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_UCSPOLUCETNIDETAILZUK.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_UCSPOLUCETNIDETAILZUK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_UCSPOLUCETNIDETAILZUK
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_UCSPOLUCETNIDETAILZUK" ("ZODPOVEDNAUCETNI", "SPOLECNOST", "HLASKA", "ID_DOKLAD", "DATUM", "ID_KTGUCETNISPOLECNOST", "ID_CISKATSPOL") AS 
  SELECT DISTINCT U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO ZODPOVEDNAUCETNI, 
       S2.S_NAZEV, 
	   DP.S_HLASKA, 
	   LDD2.ID_DOKLAD, 
       LDD2.MAX_DATUM, 
	   LDD2.ID_KTGUCETNISPOLECNOST, 
	   (select id_cisKatSpol from kp_ktg_ucetniSpolecnost us where us.ID = LDD2.ID_KTGUCETNISPOLECNOST) ID_CISKATSPOL 
FROM 
( 
SELECT LDD.ID ID_KTGUCETNISPOLECNOST, LDD.MAX_DATUM, MAX(D.ID) ID_DOKLAD 
FROM 
	( 
	SELECT ID, MAX(DT_DATUM) MAX_DATUM, NL_KROK  FROM 
	    ( 
		SELECT S.ID , D.DT_DATUM, D.NL_KROK 
		FROM KP_KTG_UCETNISPOLECNOST S, 
		     KP_DAT_DOKLAD D 
		WHERE S.ID = D.ID_KTGUCETNISPOLECNOST(+) 
		  AND S.C_EXTSYSTEM <> 'M' AND S.ID_KATEGORIE <> 300 AND S.DT_DATUMARCHIVACE IS NULL 
		  AND D.S_UZIVATEL <> 'denni' 
		) 
	GROUP BY ID, NL_KROK 
	) LDD, 
	KP_DAT_DOKLAD D 
WHERE LDD.ID = D.ID_KTGUCETNISPOLECNOST 
  AND LDD.MAX_DATUM = D.DT_DATUM 
  AND LDD.NL_KROK = D.NL_KROK 
  AND LDD.NL_KROK = 1 
  AND EXISTS (SELECT NULL FROM KP_KTG_DOKLAD KKD WHERE KKD.ID = D.ID_KTGDOKLAD AND KKD.ID_CISDOKLAD = 1)--jen doklad 1 
GROUP BY LDD.ID , LDD.MAX_DATUM 
ORDER BY LDD.ID 
) LDD2, 
  KP_DAT_DOKLADPROTOKOL DP, 
  KP_KTG_UCETNISPOLECNOST S2, 
  KTG_APPUSER U 
WHERE LDD2.ID_DOKLAD = DP.ID_DOKLAD 
  AND LDD2.ID_KTGUCETNISPOLECNOST = S2.ID 
  AND DP.C_KOD = 9 
  AND S2.ID_ZODPOVEDNAUCETNI = U.ID 
ORDER BY ZODPOVEDNAUCETNI

;


PROMPT Completed VW_REP_UCSPOLUCETNIDETAILZUK.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_UCSPOLUCETNIPROBLEMMU.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_UCSPOLUCETNIPROBLEMMU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_UCSPOLUCETNIPROBLEMMU
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_UCSPOLUCETNIPROBLEMMU" ("ZODPOVEDNAUCETNI") AS 
  select distinct ZODPOVEDNAUCETNI 
from MVW_REP_UCSPOLUCETNIDETAILMU 
where s_hlaska like 'MU%'

;


PROMPT Completed VW_REP_UCSPOLUCETNIPROBLEMMU.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_UCSPOLUCETNIPROBLEMZUK.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_UCSPOLUCETNIPROBLEMZUK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_UCSPOLUCETNIPROBLEMZUK
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_UCSPOLUCETNIPROBLEMZUK" ("ZODPOVEDNAUCETNI") AS 
  SELECT DISTINCT(U.S_TITULYPRED || ' ' || U.S_KRESTNI || ' ' || U.S_PRIJMENI || ' ' || U.S_TITULYPO) ZODPOVEDNAUCETNI 
FROM 
( 
SELECT LDD.ID ID_KTGUCETNISPOLECNOST, LDD.MAX_DATUM, MAX(D.ID) ID_DOKLAD 
FROM 
	( 
	SELECT ID, MAX(DT_DATUM) MAX_DATUM, NL_KROK  FROM 
	    ( 
		SELECT S.ID , D.DT_DATUM, D.NL_KROK 
		FROM KP_KTG_UCETNISPOLECNOST S, 
		     KP_DAT_DOKLAD D 
		WHERE S.ID = D.ID_KTGUCETNISPOLECNOST(+) 
		  AND S.C_EXTSYSTEM <> 'M' AND S.ID_KATEGORIE <> 300 AND S.DT_DATUMARCHIVACE IS NULL 
		  AND D.S_UZIVATEL <> 'denni' 
		) 
	GROUP BY ID, NL_KROK 
	) LDD, 
	KP_DAT_DOKLAD D 
WHERE LDD.ID = D.ID_KTGUCETNISPOLECNOST 
  AND LDD.MAX_DATUM = D.DT_DATUM 
  AND LDD.NL_KROK = D.NL_KROK 
  AND LDD.NL_KROK = 1 
  AND EXISTS (SELECT NULL FROM KP_KTG_DOKLAD KKD WHERE KKD.ID = D.ID_KTGDOKLAD AND KKD.ID_CISDOKLAD = 1)--jen doklad 1 
GROUP BY LDD.ID , LDD.MAX_DATUM 
ORDER BY LDD.ID 
) LDD2, 
  KP_DAT_DOKLADPROTOKOL DP, 
  KP_KTG_UCETNISPOLECNOST S2, 
  KTG_APPUSER U 
WHERE LDD2.ID_DOKLAD = DP.ID_DOKLAD 
  AND LDD2.ID_KTGUCETNISPOLECNOST = S2.ID 
  AND DP.C_KOD = 9 
  AND S2.ID_ZODPOVEDNAUCETNI = U.ID 
ORDER BY ZODPOVEDNAUCETNI

;


PROMPT Completed VW_REP_UCSPOLUCETNIPROBLEMZUK.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_UCSPOLZAMEKOO.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_UCSPOLZAMEKOO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_UCSPOLZAMEKOO
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_UCSPOLZAMEKOO" ("DT_DATUM", "S_UZIVATEL", "DT_TIMESTAMP", "S_NAZEV", "ID") AS 
  select z.DT_DATUM, 
       z.S_UZIVATEL, 
	   z.DT_TIMESTAMP, 
	   s.S_NAZEV, 
	   s.id 
from KP_log_generovaniZamek z, 
     KP_KTG_UCETNISPOLECNOST S 
where z.DT_DATUM >= to_date('01.07.2005','dd.mm.yyyy') 
  and z.DT_DATUM = last_day(z.DT_DATUM) 
  and z.ID_CISZAMEK = 2 
  and z.ID_KTGUCETNISPOLECNOST = s.id 
  and S.C_ONLINE = '1' 
--  AND S.C_EXTSYSTEM <> 'M' 
  AND S.ID_KATEGORIE <> 300 
  AND S.DT_DATUMARCHIVACE IS NULL 
  and trunc(z.dt_timestamp) <= z.dt_datum + 15 
order by z.DT_DATUM, z.s_uzivatel, z.DT_TIMESTAMP, s.s_nazev

;


PROMPT Completed VW_REP_UCSPOLZAMEKOO.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_UCSPOLZAMEKOONE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_UCSPOLZAMEKOONE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_UCSPOLZAMEKOONE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_UCSPOLZAMEKOONE" ("DT_DATUM", "S_UZIVATEL", "DT_TIMESTAMP", "S_NAZEV", "ID") AS 
  select d.DT_DATUM, --nezamkli vubec 
       u.S_TITULYPRED || ' ' || u.S_KRESTNI || ' ' || u.S_PRIJMENI || ' ' || u.S_TITULYPO s_uzivatel, 
	   null dt_timestamp, 
	   s.s_nazev, 
	   s.id 
from kp_dat_doklad d, 
     KP_KTG_UCETNISPOLECNOST S, 
	 ktg_appuser u 
where d.DT_DATUM >= to_date('01.07.2005','dd.mm.yyyy') 
  and d.DT_DATUM = last_day(d.DT_DATUM) 
  and d.id_ktgucetnispolecnost = s.id 
  and S.C_ONLINE = '1' 
  AND S.ID_KATEGORIE <> 300 
  AND S.DT_DATUMARCHIVACE IS NULL 
  and d.nl_krok = 1 
  and s.ID_ODPOVEDNAOSOBA = u.id (+) 
  and not exists (select null 
                  from KP_log_generovaniZamek z 
				  where d.dt_datum = z.dt_datum 
				    and d.id_ktgucetnispolecnost = z.id_ktgucetnispolecnost 
					and z.id_ciszamek > 1) 
union all 
select z.DT_DATUM, -- 
       z.S_UZIVATEL, 
	   z.DT_TIMESTAMP, 
	   s.S_NAZEV, 
	   s.id 
from KP_log_generovaniZamek z, 
     KP_KTG_UCETNISPOLECNOST S 
where z.DT_DATUM >= to_date('01.07.2005','dd.mm.yyyy') 
  and z.DT_DATUM = last_day(z.DT_DATUM) 
  and z.ID_CISZAMEK = 2 
  and z.ID_KTGUCETNISPOLECNOST = s.id 
  and S.C_ONLINE = '1' 
  AND S.ID_KATEGORIE <> 300 
  AND S.DT_DATUMARCHIVACE IS NULL 
  and trunc(z.dt_timestamp) > z.dt_datum + 15 
order by DT_DATUM, s_uzivatel, DT_TIMESTAMP, s_nazev

;


PROMPT Completed VW_REP_UCSPOLZAMEKOONE.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/VIEWS/VW_REP_UCSPOLZAMEKSCHYBOU.sql: 'utf-8' codec can't decode byte 0xe1 in position 395: invalid continuation byte


-- ============================================================================
-- Deploy: VW_REP_UCSPOLZAMEKSCHYBOUSPOL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_UCSPOLZAMEKSCHYBOUSPOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_UCSPOLZAMEKSCHYBOUSPOL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_UCSPOLZAMEKSCHYBOUSPOL" ("DT_DATUM", "S_NAZEV", "ID", "ID_CISKATSPOL") AS 
  select distinct dt_datum, s_nazev, id, ID_CISKATSPOL 
from vw_rep_ucspolzamekschybou

;


PROMPT Completed VW_REP_UCSPOLZAMEKSCHYBOUSPOL.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_UCSPOLZAMEKUCETNI.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_UCSPOLZAMEKUCETNI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_UCSPOLZAMEKUCETNI
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_UCSPOLZAMEKUCETNI" ("DT_DATUM", "S_UZIVATEL", "DT_TIMESTAMP", "S_NAZEV", "ID") AS 
  select z.DT_DATUM, 
       z.S_UZIVATEL, 
	   z.DT_TIMESTAMP, 
	   s.S_NAZEV, 
	   s.id 
from KP_log_generovaniZamek z, 
     KP_KTG_UCETNISPOLECNOST S 
where z.DT_DATUM >= to_date('01.07.2005','dd.mm.yyyy') 
  and z.DT_DATUM = last_day(z.DT_DATUM) 
  and z.ID_CISZAMEK = 1 
  and z.ID_KTGUCETNISPOLECNOST = s.id 
  and S.C_ONLINE = '1' 
--  AND S.C_EXTSYSTEM <> 'M' 
  AND S.ID_KATEGORIE <> 300 
  AND S.DT_DATUMARCHIVACE IS NULL 
  and trunc(z.dt_timestamp) <= z.dt_datum + 10 
  and s.DT_LASTCLOSEDATE + 10 > z.dt_datum 
order by z.DT_DATUM, z.s_uzivatel, z.DT_TIMESTAMP, s.s_nazev

;


PROMPT Completed VW_REP_UCSPOLZAMEKUCETNI.sql
PROMPT


-- ============================================================================
-- Deploy: VW_REP_UCSPOLZAMEKUCETNINE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_REP_UCSPOLZAMEKUCETNINE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_REP_UCSPOLZAMEKUCETNINE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_REP_UCSPOLZAMEKUCETNINE" ("DT_DATUM", "S_UZIVATEL", "DT_TIMESTAMP", "S_NAZEV", "ID", "DT_LASTCLOSEDATE") AS 
  select d.DT_DATUM, --nezamkli vubec 
       u.S_TITULYPRED || ' ' || u.S_KRESTNI || ' ' || u.S_PRIJMENI || ' ' || u.S_TITULYPO s_uzivatel, 
	   null dt_timestamp, 
	   s.s_nazev, 
	   s.id, 
	   s.DT_LASTCLOSEDATE 
from kp_dat_doklad d, 
     KP_KTG_UCETNISPOLECNOST S, 
	 ktg_appuser u 
where d.DT_DATUM >= to_date('01.07.2005','dd.mm.yyyy') 
  and d.DT_DATUM = last_day(d.DT_DATUM) 
  and d.id_ktgucetnispolecnost = s.id 
  and S.C_ONLINE = '1' 
  AND S.ID_KATEGORIE <> 300 
  AND S.DT_DATUMARCHIVACE IS NULL 
  and d.nl_krok = 1 
  and s.ID_ZODPOVEDNAUCETNI = u.id (+) 
  and (not exists (select null 
                  from KP_log_generovaniZamek z 
				  where d.dt_datum = z.dt_datum 
				    and d.id_ktgucetnispolecnost = z.id_ktgucetnispolecnost 
					and z.id_ciszamek >= 1) 
   or s.DT_LASTCLOSEDATE is null) 
union all 
select z.DT_DATUM, -- 
       z.S_UZIVATEL, 
	   z.DT_TIMESTAMP, 
	   s.S_NAZEV, 
	   s.id, 
	   s.DT_LASTCLOSEDATE 
from KP_log_generovaniZamek z, 
     KP_KTG_UCETNISPOLECNOST S 
where z.DT_DATUM >= to_date('01.07.2005','dd.mm.yyyy') 
  and z.DT_DATUM = last_day(z.DT_DATUM) 
  and z.ID_CISZAMEK = 1 
  and z.ID_KTGUCETNISPOLECNOST = s.id 
  and S.C_ONLINE = '1' 
  AND S.ID_KATEGORIE <> 300 
  AND S.DT_DATUMARCHIVACE IS NULL 
  and (trunc(z.dt_timestamp) > z.dt_datum + 10 
   or s.DT_LASTCLOSEDATE+10 < z.dt_datum ) 
order by DT_DATUM, s_uzivatel, DT_TIMESTAMP, s_nazev

;


PROMPT Completed VW_REP_UCSPOLZAMEKUCETNINE.sql
PROMPT


-- ============================================================================
-- Deploy: VW_SSRS_UA_RKC.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_SSRS_UA_RKC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_SSRS_UA_RKC
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_SSRS_UA_RKC" ("DT_BUSINESS_DATE", "S_LISTGROUPCODE", "NAZEV_SPOLECNOST", "S_UCETUNIF", "S_POPIS", "ND_CASTKACNB", "ND_CASTKALOCAL", "ND_CASTKAMENA", "S_MENA", "S_UNIFPROTI_ICO", "S_UNIFPROTI", "S_LISTGROUP", "ND_KATEGORIE_KOEF", "ND_CISTAANGAZOVANOST", "C_BANKA", "S_UCET", "S_POPISORIGINAL", "GROUP_CODE_ZDROJ", "S_TYP_OBEZRETNOST_PORTFOLIA", "S_COUNTRY", "S_ESA", "S_NACE", "S_LEI", "C_KONSO_DEFAULT_FLAG", "S_SHADOW_BANK", "S_TYPE_OF_EXPOSURE", "S_COLL_REG_CODE", "C_INDIV_DEFAULT_FLAG") AS 
  select
  TO_DATE('25.11.2025', 'DD.MM.YYYY') as dt_business_date,
  S_LISTGROUPCODE,
  NAZEV_SPOLECNOST,
  S_UCETUNIF,
  replace(replace(replace(replace(S_POPIS,CHR(13),''),CHR(10),CHR(32)),CHR(60),''),CHR(62),'') as S_POPIS,
  ND_CASTKACNB,
  ND_CASTKALOCAL,
  ND_CASTKAMENA,
  S_MENA,
  S_UNIFPROTI_ICO,
  replace(replace(replace(replace(s_unifproti,CHR(13),''),CHR(10),CHR(32)),CHR(60),''),CHR(62),'') as s_unifproti,
  S_LISTGROUP,
  ND_KATEGORIE_KOEF,
  ND_CISTAANGAZOVANOST,
  C_BANKA,
  S_UCET,
  S_POPISORIGINAL,
  GROUP_CODE_ZDROJ
  --esc 07 2021 rozsireni UA RKC
        ,NVL(S_TYP_OBEZRETNOST_PORTFOLIA,'BDP') as S_TYP_OBEZRETNOST_PORTFOLIA
        ,S_COUNTRY
        ,S_ESA
        ,S_NACE
        ,S_LEI
        ,NVL(C_KONSO_DEFAULT_FLAG,C_INDIV_DEFAULT_FLAG) as C_KONSO_DEFAULT_FLAG
        ,S_SHADOW_BANK
        ,NVL(S_TYPE_OF_EXPOSURE,'direct') as S_TYPE_OF_EXPOSURE
        ,S_COLL_REG_CODE
        ,C_INDIV_DEFAULT_FLAG
FROM
 db_jt.vw_ext_dokladuverovapozice
 WHERE   ( id_doklad IN (SELECT DISTINCT d.ID
                           FROM db_jt.kp_rel_subkonsolidaceclen c,
                                db_jt.kp_ktg_subkonsolidace s,
                                db_jt.kp_ktg_ucetnispolecnost us,
                                db_jt.kp_dat_doklad d
                          WHERE us.ID = c.id_ktgucetnispolecnost
                            AND s.id_ktgucetnispolecnost = c.id_ktgsubkonsolidace
                            AND c.c_clen = '1'
                            --esc 01.2019 bereme jenom FULL RKC spolecnosti
                            AND c.id_cissubtypclenstvi = 1
                            AND s.id_ktgucetniskupina = 1
                            AND d.id_ktgucetnispolecnost = us.ID
                            AND d.dt_datum = TO_DATE('25.11.2025', 'DD.MM.YYYY')
                            and s.ID_KTGUCETNISPOLECNOST  = 10344
                            AND d.nl_krok IN (1, 2)
                            AND d.c_basedoklad = 1
                         )
         --01.2019 esc , Lucka: vyloucit vsechno kde spolecnost i PROTISTRANA jsou FULL v RKC scope podle konsolidace
         AND F_GET_PROTISTRANA_RKC ( ID_UNIFPROTI ) != 1
         --RKC FULL
         AND s_locale = 'cs_CZ'
         AND (
              --01.2019 esc podla Lucky
                s_listgroupcode LIKE  'S%'
              OR s_listgroupcode LIKE 'N%'
              OR s_listgroupcode LIKE 'C%'
              OR s_listgroupcode IS NULL
           )
         )
 order by s_listgroupcode, S_UNIFPROTI_ICO, s_popis
;


PROMPT Completed VW_SSRS_UA_RKC.sql
PROMPT


-- ============================================================================
-- Deploy: VW_SSRS_UVEROVKA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_SSRS_UVEROVKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_SSRS_UVEROVKA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_SSRS_UVEROVKA" ("S_LISTGROUPCODE", "NAZEV_SPOLECNOST", "S_UCETUNIF", "S_POPIS", "ND_CASTKACNB", "ND_CASTKALOCAL", "ND_CASTKAMENA", "S_MENA", "S_UNIFPROTI_ICO", "S_UNIFPROTI", "S_LISTGROUP", "ND_KATEGORIE_KOEF", "ND_CISTAANGAZOVANOST", "C_BANKA", "S_UCET", "S_POPISORIGINAL", "GROUP_CODE_ZDROJ", "S_TYP_OBEZRETNOST_PORTFOLIA", "S_COUNTRY", "S_ESA", "S_NACE", "S_LEI", "C_KONSO_DEFAULT_FLAG", "S_SHADOW_BANK", "S_TYPE_OF_EXPOSURE", "S_COLL_REG_CODE", "C_INDIV_DEFAULT_FLAG") AS 
  select
  S_LISTGROUPCODE,
  NAZEV_SPOLECNOST,
  S_UCETUNIF,
  replace(replace(replace(replace(S_POPIS,CHR(13),''),CHR(10),CHR(32)),CHR(60),''),CHR(62),'') as S_POPIS,
  ND_CASTKACNB,
  ND_CASTKALOCAL,
  ND_CASTKAMENA,
  S_MENA,
  REPLACE(S_UNIFPROTI_ICO,'???','XNA') as S_UNIFPROTI_ICO,
  CASE WHEN S_UNIFPROTI_ICO = '???'
    THEN 'NO DATA FOUND'
    ELSE replace(replace(replace(replace(s_unifproti,CHR(13),''),CHR(10),CHR(32)),CHR(60),''),CHR(62),'')
   END  as s_unifproti,
  S_LISTGROUP,
  CASE WHEN ND_KATEGORIE_KOEF IS NULL AND S_UNIFPROTI_ICO IS NOT NULL
    THEN 1
    ELSE ND_KATEGORIE_KOEF
   END AS ND_KATEGORIE_KOEF,
  ND_CISTAANGAZOVANOST,
  C_BANKA,
  S_UCET,
  S_POPISORIGINAL,
  GROUP_CODE_ZDROJ
  --esc 07 2021 rozsireni UA RKC
        ,NVL(S_TYP_OBEZRETNOST_PORTFOLIA,'BDP') as S_TYP_OBEZRETNOST_PORTFOLIA
        ,S_COUNTRY
        ,S_ESA
        ,S_NACE
        ,S_LEI
        ,NVL(C_KONSO_DEFAULT_FLAG,C_INDIV_DEFAULT_FLAG) as C_KONSO_DEFAULT_FLAG
        ,S_SHADOW_BANK
        ,NVL(S_TYPE_OF_EXPOSURE,'direct') as S_TYPE_OF_EXPOSURE
        ,S_COLL_REG_CODE
        ,C_INDIV_DEFAULT_FLAG
FROM
 db_jt.vw_ext_dokladuverovapozice
 WHERE   ( id_doklad IN (SELECT DISTINCT d.ID
                           FROM db_jt.kp_rel_subkonsolidaceclen c,
                                db_jt.kp_ktg_subkonsolidace s,
                                db_jt.kp_ktg_ucetnispolecnost us,
                                db_jt.kp_dat_doklad d
                          WHERE us.ID = c.id_ktgucetnispolecnost
                            AND s.id_ktgucetnispolecnost = c.id_ktgsubkonsolidace
                            AND c.c_clen = '1'
                            --esc 01.2019 bereme jenom FULL RKC spolecnosti
                            AND c.id_cissubtypclenstvi = 1
                            AND s.id_ktgucetniskupina = 1
                            AND d.id_ktgucetnispolecnost = us.ID
                            AND d.dt_datum = TO_DATE('25.11.2025', 'DD.MM.YYYY')
                            and s.ID_KTGUCETNISPOLECNOST  = 10344
                            AND d.nl_krok IN (1, 2)
                            AND d.c_basedoklad = 1
                         )
         --01.2019 esc , Lucka: vyloucit vsechno kde spolecnost i PROTISTRANA jsou FULL v RKC scope podle konsolidace
         AND F_GET_PROTISTRANA_RKC ( ID_UNIFPROTI ) != 1
         --RKC FULL
         AND s_locale = 'cs_CZ'
         AND (
              --01.2019 esc podla Lucky
                s_listgroupcode LIKE  'S%'
              OR s_listgroupcode LIKE 'N%'
              OR s_listgroupcode LIKE 'C%'
              OR s_listgroupcode IS NULL
           )
         )
 order by s_listgroupcode, S_UNIFPROTI_ICO, s_popis
;


PROMPT Completed VW_SSRS_UVEROVKA.sql
PROMPT


-- ============================================================================
-- Deploy: VW_SSRS_UVEROVKA_KAPITAL.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_SSRS_UVEROVKA_KAPITAL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_SSRS_UVEROVKA_KAPITAL
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_SSRS_UVEROVKA_KAPITAL" ("KAPITAL", "KURZ") AS 
  select max(nd_castka) as kapital,max(kurz) as kurz from(
SELECT nd_castka, Cast('' as decimal(18,2)) as kurz
FROM db_jt.vw_ext_kpdatkapitalskupiny kpdatkapitalskupiny
WHERE dt_platnostod =
          (SELECT MAX (k.dt_platnostod)
            FROM db_jt.vw_ext_kpdatkapitalskupiny k
        WHERE k.id_skupinapozice = kpdatkapitalskupiny.id_skupinapozice
              AND k.dt_platnostod <= TO_DATE('25.11.2025', 'DD.MM.YYYY'))
union all
select null,ND_KURZ from (
select * from DAT_KURZLIST
where
DAT_KURZLIST.ID_CISMENA = 'EUR'
order by dt_datum desc)
where rownum = 1
)
;


PROMPT Completed VW_SSRS_UVEROVKA_KAPITAL.sql
PROMPT


-- ============================================================================
-- Deploy: VW_SSRS_UVEROVKA_RKC.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_SSRS_UVEROVKA_RKC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_SSRS_UVEROVKA_RKC
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_SSRS_UVEROVKA_RKC" ("S_LISTGROUPCODE", "NAZEV_SPOLECNOST", "S_UCETUNIF", "S_POPIS", "ND_CASTKACNB", "ND_CASTKALOCAL", "ND_CASTKAMENA", "S_MENA", "S_UNIFPROTI_ICO", "S_UNIFPROTI", "S_LISTGROUP", "ND_KATEGORIE_KOEF", "ND_CISTAANGAZOVANOST", "C_BANKA", "S_UCET", "S_POPISORIGINAL", "GROUP_CODE_ZDROJ", "S_TYP_OBEZRETNOST_PORTFOLIA", "S_COUNTRY", "S_ESA", "S_NACE", "S_LEI", "S_SHADOW_BANK", "S_TYPE_OF_EXPOSURE", "S_COLL_REG_CODE", "ID_DOKLAD", "DATUM") AS 
  select
  S_LISTGROUPCODE,
  NAZEV_SPOLECNOST,
  S_UCETUNIF,
  replace(replace(replace(replace(S_POPIS,CHR(13),''),CHR(10),CHR(32)),CHR(60),''),CHR(62),'') as S_POPIS,
  ND_CASTKACNB,
  ND_CASTKALOCAL,
  ND_CASTKAMENA,
  S_MENA,
  REPLACE(S_UNIFPROTI_ICO,'???','XNA') as S_UNIFPROTI_ICO,
  CASE WHEN S_UNIFPROTI_ICO = '???'
    THEN 'NO DATA FOUND'
    ELSE replace(replace(replace(replace(s_unifproti,CHR(13),''),CHR(10),CHR(32)),CHR(60),''),CHR(62),'')
   END as s_unifproti,
  S_LISTGROUP,
  ND_KATEGORIE_KOEF,
  ND_CISTAANGAZOVANOST,
  C_BANKA,
  S_UCET,
  S_POPISORIGINAL,
  GROUP_CODE_ZDROJ
  --esc 07 2021 rozsireni UA RKC
        ,NVL(S_TYP_OBEZRETNOST_PORTFOLIA,'BDP') as S_TYP_OBEZRETNOST_PORTFOLIA
        ,S_COUNTRY
        ,S_ESA
        ,S_NACE
        ,S_LEI
        ,S_SHADOW_BANK
        ,NVL(S_TYPE_OF_EXPOSURE,'direct') as S_TYPE_OF_EXPOSURE
        ,S_COLL_REG_CODE
        ,vw_ext_dokladuverovapozice.id_doklad   -- esc rozsireni pro SSRS
        --,doklad.dt_DATUM DATUM
        ,( select dok.dt_datum from KP_DAT_DOKLAD dok where id_doklad = dok.ID )  DATUM
FROM
 db_jt.vw_ext_dokladuverovapozice
--, KP_DAT_DOKLAD doklad
 WHERE
 --id_doklad = doklad.ID and
( id_doklad IN (SELECT DISTINCT d.ID
                           FROM db_jt.kp_rel_subkonsolidaceclen c,
                                db_jt.kp_ktg_subkonsolidace s,
                                db_jt.kp_ktg_ucetnispolecnost us,
                                db_jt.kp_dat_doklad d
                          WHERE us.ID = c.id_ktgucetnispolecnost
                            AND s.id_ktgucetnispolecnost = c.id_ktgsubkonsolidace
                            AND c.c_clen = '1'
                            --esc 01.2019 bereme jenom FULL RKC spolecnosti
                            AND c.id_cissubtypclenstvi = 1
                            AND s.id_ktgucetniskupina = 1
                            AND d.id_ktgucetnispolecnost = us.ID
                            --AND d.dt_datum = TO_DATE('31.10.2023', 'DD.MM.YYYY')
                            AND d.dt_datum IN (
                                                SELECT   LAST_DAY(ADD_MONTHS(TRUNC(TO_DATE(  EXTRACT(YEAR FROM sysdate )-2,'yyyy'), 'YYYY' ), LEVEL - 1) ) AS last_day FROM dual CONNECT BY LEVEL <= 12
                                                UNION
                                                SELECT   LAST_DAY(ADD_MONTHS(TRUNC(TO_DATE(  EXTRACT(YEAR FROM sysdate )-1,'yyyy'), 'YYYY' ), LEVEL - 1) ) AS last_day FROM dual CONNECT BY LEVEL <= 12
                                                UNION
                                                SELECT   LAST_DAY(ADD_MONTHS(TRUNC(TO_DATE(  EXTRACT(YEAR FROM sysdate )-0,'yyyy'), 'YYYY' ), LEVEL - 1) ) AS last_day FROM dual CONNECT BY LEVEL <= 12
                                                )
                            and s.ID_KTGUCETNISPOLECNOST  = 10344
                            AND d.nl_krok IN (1, 2)
                            AND d.c_basedoklad = 1
                         )
         --01.2019 esc , Lucka: vyloucit vsechno kde spolecnost i PROTISTRANA jsou FULL v RKC scope podle konsolidace
         AND F_GET_PROTISTRANA_RKC ( ID_UNIFPROTI ) != 1
         --RKC FULL
         AND s_locale = 'cs_CZ'
         AND (
              --01.2019 esc podla Lucky
                s_listgroupcode LIKE  'S%'
              OR s_listgroupcode LIKE 'N%'
              OR s_listgroupcode LIKE 'C%'
              OR s_listgroupcode IS NULL
           )
         )

 --order by s_listgroupcode, S_UNIFPROTI_ICO, s_popis;

;


PROMPT Completed VW_SSRS_UVEROVKA_RKC.sql
PROMPT


-- ============================================================================
-- Deploy: VW_SSRS_UVEROVKA_RKC2.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_SSRS_UVEROVKA_RKC2.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_SSRS_UVEROVKA_RKC2
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_SSRS_UVEROVKA_RKC2" ("S_LISTGROUPCODE", "NAZEV_SPOLECNOST", "S_UCETUNIF", "S_POPIS", "ND_CASTKACNB", "ND_CASTKALOCAL", "ND_CASTKAMENA", "S_MENA", "S_UNIFPROTI_ICO", "S_UNIFPROTI", "S_LISTGROUP", "ND_KATEGORIE_KOEF", "ND_CISTAANGAZOVANOST", "C_BANKA", "S_UCET", "S_POPISORIGINAL", "GROUP_CODE_ZDROJ", "S_TYP_OBEZRETNOST_PORTFOLIA", "S_COUNTRY", "S_ESA", "S_NACE", "S_LEI", "S_SHADOW_BANK", "S_TYPE_OF_EXPOSURE", "S_COLL_REG_CODE", "ID_DOKLAD", "DATUM") AS 
  select
  S_LISTGROUPCODE,
  NAZEV_SPOLECNOST,
  S_UCETUNIF,
  replace(replace(replace(replace(S_POPIS,CHR(13),''),CHR(10),CHR(32)),CHR(60),''),CHR(62),'') as S_POPIS,
  ND_CASTKACNB,
  ND_CASTKALOCAL,
  ND_CASTKAMENA,
  S_MENA,
  REPLACE(S_UNIFPROTI_ICO,'???','XNA') as S_UNIFPROTI_ICO,
  CASE WHEN S_UNIFPROTI_ICO = '???'
    THEN 'NO DATA FOUND'
    ELSE replace(replace(replace(replace(s_unifproti,CHR(13),''),CHR(10),CHR(32)),CHR(60),''),CHR(62),'')
   END as s_unifproti,
  S_LISTGROUP,
  ND_KATEGORIE_KOEF,
  ND_CISTAANGAZOVANOST,
  C_BANKA,
  S_UCET,
  S_POPISORIGINAL,
  GROUP_CODE_ZDROJ
  --esc 07 2021 rozsireni UA RKC
        ,NVL(S_TYP_OBEZRETNOST_PORTFOLIA,'BDP') as S_TYP_OBEZRETNOST_PORTFOLIA
        ,S_COUNTRY
        ,S_ESA
        ,S_NACE
        ,S_LEI
        ,S_SHADOW_BANK
        ,NVL(S_TYPE_OF_EXPOSURE,'direct') as S_TYPE_OF_EXPOSURE
        ,S_COLL_REG_CODE
        ,vw_ext_dokladuverovapozice.id_doklad   -- esc rozsireni pro SSRS
        --,doklad.dt_DATUM DATUM
        ,( select dok.dt_datum from KP_DAT_DOKLAD dok where id_doklad = dok.ID )  DATUM
FROM
 db_jt.vw_ext_dokladuverovapozice
--, KP_DAT_DOKLAD doklad
 WHERE
 --id_doklad = doklad.ID and
( id_doklad IN (SELECT DISTINCT d.ID
                           FROM db_jt.kp_rel_subkonsolidaceclen c,
                                db_jt.kp_ktg_subkonsolidace s,
                                db_jt.kp_ktg_ucetnispolecnost us,
                                db_jt.kp_dat_doklad d
                          WHERE us.ID = c.id_ktgucetnispolecnost
                            AND s.id_ktgucetnispolecnost = c.id_ktgsubkonsolidace
                            AND c.c_clen = '1'
                            --esc 01.2019 bereme jenom FULL RKC spolecnosti
                            AND c.id_cissubtypclenstvi = 1
                            AND s.id_ktgucetniskupina = 1
                            AND d.id_ktgucetnispolecnost = us.ID
                            --AND d.dt_datum = TO_DATE('31.10.2023', 'DD.MM.YYYY')
                            AND d.dt_datum IN (  SELECT   LAST_DAY(ADD_MONTHS(TRUNC(TO_DATE('2023', 'YYYY'), 'YYYY'), LEVEL - 1)) AS last_day FROM dual CONNECT BY LEVEL <= 12                            )
                            and s.ID_KTGUCETNISPOLECNOST  = 10344
                            AND d.nl_krok IN (1, 2)
                            AND d.c_basedoklad = 1
                         )
         --01.2019 esc , Lucka: vyloucit vsechno kde spolecnost i PROTISTRANA jsou FULL v RKC scope podle konsolidace
         AND F_GET_PROTISTRANA_RKC ( ID_UNIFPROTI ) != 1
         --RKC FULL
         AND s_locale = 'cs_CZ'
         AND (
              --01.2019 esc podla Lucky
                s_listgroupcode LIKE  'S%'
              OR s_listgroupcode LIKE 'N%'
              OR s_listgroupcode LIKE 'C%'
              OR s_listgroupcode IS NULL
           )
         )

 --order by s_listgroupcode, S_UNIFPROTI_ICO, s_popis

;


PROMPT Completed VW_SSRS_UVEROVKA_RKC2.sql
PROMPT


-- ============================================================================
-- Deploy: VW_STATUS_KIS_EBO.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_STATUS_KIS_EBO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_STATUS_KIS_EBO
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_STATUS_KIS_EBO" ("STATUS") AS 
  select count(*) STATUS
from information_schema.tables@EBO_PROD 
where TABLE_SCHEMA = 'kis' and TABLE_NAME = 'UCETPOHYBY'
;


PROMPT Completed VW_STATUS_KIS_EBO.sql
PROMPT


-- ============================================================================
-- Deploy: VW_SUBKON_DOKLADPOLOZKA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_SUBKON_DOKLADPOLOZKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_SUBKON_DOKLADPOLOZKA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_SUBKON_DOKLADPOLOZKA" ("ID_DOKLAD", "ND_CASTKALOCAL", "ND_CASTKACZK", "NL_RADEK", "NL_SLOUPEC", "NL_PORADILIST") AS 
  SELECT ID_DOKLAD, ND_CASTKALOCAL*f_getSignBilanceList(nl_poradiList) ND_CASTKALOCAL, ND_CASTKACZK*f_getSignBilanceList(nl_poradiList) ND_CASTKACZK, NL_RADEK, NL_SLOUPEC, NL_PORADILIST 
FROM ( 
  SELECT D.ID ID_DOKLAD, ND_CASTKALOCAL, ND_CASTKAMENA ND_CASTKACZK, NL_RADEK, NL_SLOUPEC, NL_PORADILIST 
  FROM KP_DAT_DOKLADPOLOZKA DP, KP_DAT_DOKLAD D 
  WHERE D.ID = DP.ID_DOKLAD 
    AND DP.S_MENA = D.S_MENA 
) 
ORDER BY NL_PORADILIST, NL_RADEK

;


PROMPT Completed VW_SUBKON_DOKLADPOLOZKA.sql
PROMPT


-- ============================================================================
-- Deploy: VW_TMP_LOGDOKLAD.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_TMP_LOGDOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_TMP_LOGDOKLAD
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_TMP_LOGDOKLAD" ("NAZEV", "ID", "DT_DATUM", "ID_DOKLAD", "C_KOD", "S_HLASKA", "NL_VAZBYSKUPINA", "ID_SUBDOKLAD") AS 
  select 
(select s_nazev from kp_ktg_ucetniSpolecnost u, kp_dat_doklad d where d.id_ktgUcetniSpolecnost = u.id and d.id = p.id_doklad) nazev, 
p."ID",p."DT_DATUM",p."ID_DOKLAD",p."C_KOD",p."S_HLASKA",p."NL_VAZBYSKUPINA",p."ID_SUBDOKLAD" 
from kp_dat_dokladprotokol p 
where id_doklad = ( select max(id) from kp_dat_doklad )

;


PROMPT Completed VW_TMP_LOGDOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: VW_TMP_PROJEKTTOGEN.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_TMP_PROJEKTTOGEN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_TMP_PROJEKTTOGEN
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_TMP_PROJEKTTOGEN" ("ID_KTGPROJEKT") AS 
  select distinct id_KtgProjekt 
from kp_dat_projektdokladpolozka 
order by id_KtgProjekt

;


PROMPT Completed VW_TMP_PROJEKTTOGEN.sql
PROMPT


-- ============================================================================
-- Deploy: VW_UCETNISPOLECNOSTKOPRAVE.sql
-- Category: views
-- ============================================================================

PROMPT Deploying VW_UCETNISPOLECNOSTKOPRAVE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View VW_UCETNISPOLECNOSTKOPRAVE
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."VW_UCETNISPOLECNOSTKOPRAVE" ("ID", "ID_CISSUBJECT", "S_ICO", "SPIN_ID", "TOPAS_ID", "QUEST_ID", "C_EXTSYSTEM", "S_NAZEV", "C_POCITATROZVAHU", "S_SOUBORPREDPONA", "S_MENA", "S_DBLINK", "C_AUTOMATICKEGENEROVANI", "ID_KATEGORIE", "C_RKC", "S_ZKRATKA", "DT_LASTCLOSEDATE", "DT_DATUMARCHIVACE", "C_OPCE", "ID_CISKATSPOL", "ID_ZODPOVEDNAUCETNI", "ID_ODPOVEDNAOSOBA", "ID_ADMINISTRATOR", "DT_RELATIVEDATE", "ID_TOPMNG", "S_POZNAMKA", "C_DANOVAZTRATA", "ID_CISOPCE", "ND_DOCUROVEN2", "S_LOCALE", "C_DOCDISPLAY", "C_PREHLEDDISPLAY", "ID_CISNOMINEE", "NL_ROKPOCSTAVIMPORTSYSTEM", "ID_TYPPROJEKTU", "ID_KTGODBOR", "ID_KTGPROJEKT", "DT_UCETNIOBDOBISTART", "DT_UCETNIOBDOBIKONEC", "C_ONLINE", "DT_ONLINEOD") AS 
  select "ID","ID_CISSUBJECT","S_ICO","SPIN_ID","TOPAS_ID","QUEST_ID","C_EXTSYSTEM","S_NAZEV","C_POCITATROZVAHU","S_SOUBORPREDPONA","S_MENA","S_DBLINK","C_AUTOMATICKEGENEROVANI","ID_KATEGORIE","C_RKC","S_ZKRATKA","DT_LASTCLOSEDATE","DT_DATUMARCHIVACE","C_OPCE","ID_CISKATSPOL","ID_ZODPOVEDNAUCETNI","ID_ODPOVEDNAOSOBA","ID_ADMINISTRATOR","DT_RELATIVEDATE","ID_TOPMNG","S_POZNAMKA","C_DANOVAZTRATA","ID_CISOPCE","ND_DOCUROVEN2","S_LOCALE","C_DOCDISPLAY","C_PREHLEDDISPLAY","ID_CISNOMINEE","NL_ROKPOCSTAVIMPORTSYSTEM","ID_TYPPROJEKTU","ID_KTGODBOR","ID_KTGPROJEKT","DT_UCETNIOBDOBISTART","DT_UCETNIOBDOBIKONEC","C_ONLINE","DT_ONLINEOD" 
from kp_ktg_ucetnispolecnost s 
where 
s.id < 9999 and id not in ( 6041, 6042, 6043, 6044 ) and 
not exists ( select 1 from kp_ktg_spolecnost sp 
where s.id = sp.id_ktgSpolecnost )

;


PROMPT Completed VW_UCETNISPOLECNOSTKOPRAVE.sql
PROMPT


-- ============================================================================
-- Deploy: V_DWH14OO_ORG_CHART.sql
-- Category: views
-- ============================================================================

PROMPT Deploying V_DWH14OO_ORG_CHART.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View V_DWH14OO_ORG_CHART
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."V_DWH14OO_ORG_CHART" ("USEREXPORT_KEY", "OP", "INTRANET_STAV", "LOGIN_KOD", "TITUL", "MENO", "PRIEZVISKO", "TITULZA", "DATNAROZ", "DATNASTUP", "DATVYSTUP", "POZNAMKA", "SPOLKOD", "NAZOVSPOL", "FUNKCIA", "KODFUNKCE", "USEKKOD", "NAZEVUSEK", "ODBORKOD", "NAZOVSPOLODBOR", "ODDELENIEKOD", "NAZOVODDELENIE", "TEAMKOD", "NAZOVTEAM", "SPOLECNOST_IDOOSUBJECT", "USEK_IDOOSUBJECT", "ODBOR_IDOOSUBJECT", "ODDELENI_IDOOSUBJECT", "TEAM_IDOOSUBJECT", "OO_SPOLECNOST_KOD", "OO_USEK_KOD", "OO_ODBOR_KOD", "OO_ODDELENI_KOD", "OO_TEAM_KOD", "SCHVALUJE_DOVOLENA_KOD", "SCHVALUJE_DOCHAZKA_KOD", "OO_SPOLECNOST", "OO_USEK", "OO_ODBOR", "OO_ODDELENI", "OO_TEAM", "SCHVALUJE_DOVOLENA", "SCHVALUJE_DOCHAZKA", "ODPOVEDNA_OSOBA_USERID", "EMAIL", "LOKALITA", "PREDVOLBA", "LOKALITA_TELEFON", "KLAPKA", "MOBIL", "SPOLID", "USEKID", "FUNKCIAID", "SPOLODBORID", "ODDELENIEID", "LOKALITAID", "LOKALITA_STAT_KOD", "DWH_BUS_DATE", "DWH_INSERT_PROCESS") AS 
  SELECT "USEREXPORT_KEY","OP","INTRANET_STAV","LOGIN_KOD","TITUL","MENO","PRIEZVISKO","TITULZA","DATNAROZ","DATNASTUP","DATVYSTUP","POZNAMKA","SPOLKOD","NAZOVSPOL","FUNKCIA","KODFUNKCE","USEKKOD","NAZEVUSEK","ODBORKOD","NAZOVSPOLODBOR","ODDELENIEKOD","NAZOVODDELENIE","TEAMKOD","NAZOVTEAM","SPOLECNOST_IDOOSUBJECT","USEK_IDOOSUBJECT","ODBOR_IDOOSUBJECT","ODDELENI_IDOOSUBJECT","TEAM_IDOOSUBJECT","OO_SPOLECNOST_KOD","OO_USEK_KOD","OO_ODBOR_KOD","OO_ODDELENI_KOD","OO_TEAM_KOD","SCHVALUJE_DOVOLENA_KOD","SCHVALUJE_DOCHAZKA_KOD","OO_SPOLECNOST","OO_USEK","OO_ODBOR","OO_ODDELENI","OO_TEAM","SCHVALUJE_DOVOLENA","SCHVALUJE_DOCHAZKA","ODPOVEDNA_OSOBA_USERID","EMAIL","LOKALITA","PREDVOLBA","LOKALITA_TELEFON","KLAPKA","MOBIL","SPOLID","USEKID","FUNKCIAID","SPOLODBORID","ODDELENIEID","LOKALITAID","LOKALITA_STAT_KOD","DWH_BUS_DATE","DWH_INSERT_PROCESS" 
FROM DWH_CORE.D_T_ITR_USEREXPORT@DWH_KIS_READ
;


PROMPT Completed V_DWH14OO_ORG_CHART.sql
PROMPT


-- ============================================================================
-- Deploy: V_DWHDVL_D_H_CZV_TB_JT_PARTY.sql
-- Category: views
-- ============================================================================

PROMPT Deploying V_DWHDVL_D_H_CZV_TB_JT_PARTY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View V_DWHDVL_D_H_CZV_TB_JT_PARTY
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."V_DWHDVL_D_H_CZV_TB_JT_PARTY" ("USERID_HKEY", "USERID_KEY", "ID", "USERID", "PRIJMENI", "JMENO", "EMAIL", "OO", "OO_USER_ID", "SCHVALUJEDOVOLENA", "SCHVALUJEDOCHAZKA", "NASTUP", "VYSTUP", "LOKALITA", "PREDVOLBA", "KLAPKA", "LOKALITATELEFON", "MOBIL", "SPOLECNOSTKOD", "SPOLECNOST", "SPOLECNOSTOO", "USEKKOD", "USEK", "USEKOO", "ODBORKOD", "ODBOR", "ODBOROO", "ODDELENIKOD", "ODDELENI", "ODDELENIOO", "FUNKCE", "DWH_BUS_DATE_FROM", "DWH_BUS_DATE_TO", "DWH_VALID_TIME_FROM", "DWH_VALID_TIME_TO", "DWH_ACTUAL_FLG", "DWH_INSERT_PROCESS", "DWH_UPDATE_PROCESS") AS 
  select "USERID_HKEY","USERID_KEY","ID","USERID","PRIJMENI","JMENO","EMAIL","OO","OO_USER_ID","SCHVALUJEDOVOLENA","SCHVALUJEDOCHAZKA","NASTUP","VYSTUP","LOKALITA","PREDVOLBA","KLAPKA","LOKALITATELEFON","MOBIL","SPOLECNOSTKOD","SPOLECNOST","SPOLECNOSTOO","USEKKOD","USEK","USEKOO","ODBORKOD","ODBOR","ODBOROO","ODDELENIKOD","ODDELENI","ODDELENIOO","FUNKCE","DWH_BUS_DATE_FROM","DWH_BUS_DATE_TO","DWH_VALID_TIME_FROM","DWH_VALID_TIME_TO","DWH_ACTUAL_FLG","DWH_INSERT_PROCESS","DWH_UPDATE_PROCESS"
  from MW_DWHDVL_D_H_CZV_TB_JT_PARTY@KIS_TEST1
;


PROMPT Completed V_DWHDVL_D_H_CZV_TB_JT_PARTY.sql
PROMPT


-- ============================================================================
-- Deploy: V_DWHDVL_D_T_CZV_TB_JT_PARTY.sql
-- Category: views
-- ============================================================================

PROMPT Deploying V_DWHDVL_D_T_CZV_TB_JT_PARTY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View V_DWHDVL_D_T_CZV_TB_JT_PARTY
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."V_DWHDVL_D_T_CZV_TB_JT_PARTY" ("USERID_KEY", "ID", "USERID", "PRIJMENI", "JMENO", "EMAIL", "OO", "OO_USER_ID", "SCHVALUJEDOVOLENA", "SCHVALUJEDOCHAZKA", "NASTUP", "VYSTUP", "LOKALITA", "PREDVOLBA", "KLAPKA", "LOKALITATELEFON", "MOBIL", "SPOLECNOSTKOD", "SPOLECNOST", "SPOLECNOSTOO", "USEKKOD", "USEK", "USEKOO", "ODBORKOD", "ODBOR", "ODBOROO", "ODDELENIKOD", "ODDELENI", "ODDELENIOO", "FUNKCE", "DWH_BUS_DATE", "DWH_INSERT_PROCESS") AS 
  select "USERID_KEY","ID","USERID","PRIJMENI","JMENO","EMAIL","OO","OO_USER_ID","SCHVALUJEDOVOLENA","SCHVALUJEDOCHAZKA","NASTUP","VYSTUP","LOKALITA","PREDVOLBA","KLAPKA","LOKALITATELEFON","MOBIL","SPOLECNOSTKOD","SPOLECNOST","SPOLECNOSTOO","USEKKOD","USEK","USEKOO","ODBORKOD","ODBOR","ODBOROO","ODDELENIKOD","ODDELENI","ODDELENIOO","FUNKCE","DWH_BUS_DATE","DWH_INSERT_PROCESS"
  from MW_DWHDVL_D_T_CZV_TB_JT_PARTY@KIS_TEST1
;


PROMPT Completed V_DWHDVL_D_T_CZV_TB_JT_PARTY.sql
PROMPT


-- ============================================================================
-- Deploy: V_DWHDVL_ORG_CHART.sql
-- Category: views
-- ============================================================================

PROMPT Deploying V_DWHDVL_ORG_CHART.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View V_DWHDVL_ORG_CHART
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."V_DWHDVL_ORG_CHART" ("KIS_ID", "S_USERID", "S_USERNAME", "S_KRESTNI", "S_PRIJMENI", "C_ARCHIVNI", "EMAIL_KIS", "EMAIL_DWH", "JMENO", "PRIJMENI", "OO", "OO_USER_ID", "SCHVALUJEDOVOLENA", "SCHVALUJEDOCHAZKA", "NASTUP", "VYSTUP", "LOKALITA", "PREDVOLBA", "KLAPKA", "LOKALITATELEFON", "MOBIL", "SPOLECNOSTKOD", "SPOLECNOST", "SPOLECNOSTOO", "USEKKOD", "USEK", "USEKOO", "ODBORKOD", "ODBOR", "ODBOROO", "ODDELENIKOD", "ODDELENI", "ODDELENIOO", "FUNKCE") AS 
  select  
    kuser.ID as KIS_ID,
    kuser.S_USERID,
    kuser.S_USERNAME,
    kuser.S_KRESTNI,
    kuser.S_PRIJMENI,
    kuser.c_archivni,
    kuser.S_EMAIL as email_KIS,
    orgchart.email as email_DWH,
    orgchart.jmeno,
    orgchart.prijmeni,
    orgchart.oo,
    orgchart.oo_user_id,
    orgchart.schvalujedovolena,
    orgchart.schvalujedochazka,
    orgchart.nastup,
    orgchart.vystup,
    orgchart.lokalita,
    orgchart.predvolba,
    orgchart.klapka,
    orgchart.lokalitatelefon,
    orgchart.mobil,
    orgchart.spolecnostkod,
    orgchart.spolecnost,
    orgchart.spolecnostoo,
    orgchart.usekkod,
    orgchart.usek,
    orgchart.usekoo,
    orgchart.odborkod,
    orgchart.odbor,
    orgchart.odboroo,
    orgchart.oddelenikod,
    orgchart.oddeleni,
    orgchart.oddelenioo,
    orgchart.funkce
from ktg_appuser kuser
  left join MW_DWHDVL_D_T_CZV_TB_JT_PARTY@kis_test1 orgchart on orgchart.userid = kuser.s_userid
--where (orgchart.email like '%@gsstrust.com' or kuser.S_EMAIL  like '%@gsstrust.com' )
--  and (orgchart.email != kuser.S_EMAIL or orgchart.email is null)
;


PROMPT Completed V_DWHDVL_ORG_CHART.sql
PROMPT


-- ============================================================================
-- Deploy: V_DWHDVL_V_JT_PARTY_STRUKTURA.sql
-- Category: views
-- ============================================================================

PROMPT Deploying V_DWHDVL_V_JT_PARTY_STRUKTURA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View V_DWHDVL_V_JT_PARTY_STRUKTURA
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."V_DWHDVL_V_JT_PARTY_STRUKTURA" ("USERID", "EMPLOYER", "MANAGER") AS 
  select "USERID","EMPLOYER","MANAGER"
  from MW_DWHDVL_V_JT_PARTY_STRUKTURA@KIS_TEST1
;


PROMPT Completed V_DWHDVL_V_JT_PARTY_STRUKTURA.sql
PROMPT


-- ============================================================================
-- Deploy: V_SCHVALOVAK_DISP.sql
-- Category: views
-- ============================================================================

PROMPT Deploying V_SCHVALOVAK_DISP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View V_SCHVALOVAK_DISP
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."V_SCHVALOVAK_DISP" ("ID", "ID_CISDOKUMENT", "ID_KTGUCETNISPOLECNOST", "SPOLECNOST", "ID_TYPTRANSAKCE", "TYPTRAN", "ID_TTDEVELOPER", "C_TYPIZOVANATRAN", "DT_TYPIZOVANAOD", "DT_TYPIZOVANADO", "DT_DATUMZADANI", "ID_ZADAVATEL", "ZADAVATEL", "S_POPIS", "S_MENA", "S_PISEMNE", "DT_DATUMZAUCTOVANI", "PROTISTRANA", "S_CISLODOKLADU", "DT_DATUMSPLATNOSTI", "DT_POZADDATUMUHRADY", "DT_REALDATUMUHRADY", "SUMARADKU", "ID_BUDGET", "BUDGET_NAZEV", "CLASSNAME") AS 
  SELECT d.ID "ID",
    d.id_cisdokument,
    d.id_ktgucetnispolecnost "ID_KTGUCETNISPOLECNOST", -- b.ID_KTGUCETNISPOLECNOST,
    s.s_nazev SPOLECNOST,                              --b.spolecnost,
    d.id_typtransakce ID_TYPTRANSAKCE,                 --b.ID_TYPTRANSAKCE,
    trim(
    case
      when ttco.c_id is not null 
      Then ttco.s_popis
      WHEN (d.id_cisdokument = 4
      AND b.id_ktgodbor     IS NOT NULL)
      THEN (oin.s_kod
        || ' - '
        || oin.s_nazev
        || ' ('
        || b.dt_platnostod
        || ' - '
        || b.dt_platnostdo
        || ')')
      WHEN (d.id_cisdokument = 4
      AND b.id_ktgprojekt   IS NOT NULL)
      THEN (pin.ID
        || ' - '
        || pin.s_nazev
        || ' ('
        || b.dt_platnostod
        || ' - '
        || b.dt_platnostdo
        || ')')
      ELSE (t.s_popis
        || (DECODE (tt.s_popis, NULL, '', ', '
        || tt.s_popis)))
    END) TYPTRAN, -- b.Typtran,
    d.ID_TTDEVELOPER,
    d.c_typizovanatran C_TYPIZOVANATRAN, --b.C_TYPIZOVANATRAN,
    d.dt_typizovanaod DT_TYPIZOVANAOD,   --b.DT_TYPIZOVANAOD,
    d.dt_typizovanado DT_TYPIZOVANADO,   --b.DT_TYPIZOVANADO,
    d.dt_datumzadani "DT_DATUMZADANI",   --b.Dt_Datumzadani,
    d.id_zadavatel ID_ZADAVATEL,         --b.ID_ZADAVATEL,
    ( uz.s_titulypred
    || ' '
    || uz.s_krestni
    || ' '
    || uz.s_prijmeni
    || ' '
    || uz.s_titulypo
    || ' ('
    || uz.s_telefon
    || ')') ZADAVATEL,                       --b.Zadavatel,
    d.s_popis S_POPIS,                       --b.S_Popis,
    d.s_mena S_MENA,                         --b.S_Mena,
    d.s_pisemne S_PISEMNE,                   --b.S_Pisemne,
    d.dt_datumzauctovani DT_DATUMZAUCTOVANI, --b.DT_DATUMZAUCTOVANI,
    CASE
      WHEN (d.id_spolecnost IS NULL)
      THEN d.s_protistrana
      ELSE ps.s_nazev
    END PROTISTRANA,                           --b.Protistrana,
    d.s_cislodokladu S_CISLODOKLADU,           --b.S_CISLODOKLADU,
    d.dt_datumsplatnosti DT_DATUMSPLATNOSTI,   --b.DT_DATUMSPLATNOSTI,
    d.dt_pozaddatumuhrady DT_POZADDATUMUHRADY, --b.Dt_Pozaddatumuhrady,
    d.dt_realdatumuhrady DT_REALDATUMUHRADY,   --b.Dt_Realdatumuhrady,
    --dr.nd_castka_sum "SUMARADKU", --b.Sumaradku
    (
    SELECT NVL(SUM (xdr.nd_castka),0)
    FROM kp_dat_dokumentradek xdr
    WHERE xdr.nd_castka IS NOT NULL
    AND xdr.id_dokument  = d.id
    ) SUMARADKU,
    d.id_budget,
    CASE
      WHEN oin.S_NAZEV IS NULL
      THEN pin.s_nazev
      ELSE oin.s_kod || ' ' || oin.S_NAZEV
        || ' ('
        || NVL(us.s_zkratka,'')
        || ')'
    END
    || ' '
    || TO_CHAR(b.dt_platnostod,'YYYY') budget_nazev,
    /*
    trunc(sysdate-20) trunc_sysdate,
    trunc (dt_datumsplatnosti) trunc_dt_datumsplatnosti,
    trunc (dt_datumsplatnosti) - trunc(sysdate-20) diff,
    */
    CASE
      WHEN TRUNC(sysdate-20)    > TRUNC(d.dt_datumsplatnosti)
      AND d.dt_datumzauctovani IS NULL
      THEN 'docPrehledPoNN'
      WHEN TRUNC (dt_datumsplatnosti) - TRUNC(sysdate-20) < 5
      AND TRUNC(sysdate               -20)                < TRUNC (dt_datumsplatnosti)
      THEN 'docPrehled5DoSN'
      ELSE 'docPrehled'
        || TO_CHAR(d.id_cisdokument)
    END classname
  FROM kp_dat_dokument d
  LEFT JOIN kp_ktg_ucetnispolecnost s
  ON d.id_ktgucetnispolecnost = s.ID
    --kp_ktg_ucetnispolecnost s2,
  LEFT JOIN kp_ktg_spolecnost ps
  ON d.id_spolecnost = ps.ID
    --kp_cis_dokumentstatus ds,
    --kp_ktg_ucetnispolecnost sur,
  LEFT JOIN kp_dat_budget b
  ON d.id_budget = b.ID
  LEFT JOIN kp_ktg_odbor bodb
  ON b.id_ktgodbor = bodb.ID
  LEFT JOIN kp_ktg_ucetnispolecnost us
  ON bodb.id_ktgucetnispolecnost = us.id
    --ktg_appuser umb,
  LEFT JOIN ktg_appuser uz
  ON d.id_zadavatel = uz.ID
  LEFT JOIN kp_ktg_odbor oin
  ON b.id_ktgodbor = oin.ID
  LEFT JOIN kp_ktg_projekt pin
  ON b.id_ktgprojekt = pin.ID
  LEFT JOIN kp_cis_typtransakce t
  ON d.id_typtransakce = t.ID
  LEFT JOIN kp_cis_typtransakce tt
  on d.id_ttdeveloper = tt.id
  left join kp_cis_typ_tran_capex_opex ttco
  on d.c_capex_opex = ttco.c_id
  --where ttco.c_id is not null
;


PROMPT Completed V_SCHVALOVAK_DISP.sql
PROMPT


-- ============================================================================
-- Deploy: X_KP_REP_SCHVALOVAK_NAVYSENI.sql
-- Category: views
-- ============================================================================

PROMPT Deploying X_KP_REP_SCHVALOVAK_NAVYSENI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View X_KP_REP_SCHVALOVAK_NAVYSENI
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."X_KP_REP_SCHVALOVAK_NAVYSENI" ("ZADANO", "SPOLECNOST", "ID", "STATUS", "ZADAVATEL", "BUDGET_ODBOR_PROJEKT", "SL_POPIS", "SUMA_RADKU", "S_MENA", "CERPAT_REZERVU", "DT_SCHVAL_CERPANI_MIMO_REZERVU", "DT_SCHVALENO_GESTOR", "DT_ZAMITNUTO_GESTOR", "RADEK_TYP_TRANSAKCE", "RADEK", "RADEK_CASTKA", "RADEK_KOMENTAR", "RAD_DAT_SCHVALENO_OO_ODBORU", "RAD_DAT_SCHVALENO_PM", "RAD_DAT_SCHVALENO_OOH", "RAD_DAT_OO_SPOLECNOSTI", "RAD_DAT_ZAMITNUTO") AS 
  SELECT DISTINCT TO_CHAR(sl.dt_datumzadani,'DD.MM.YYYY') Zadano,
    us.s_nazev Spolecnost, --sl.id_ktgucetnispolecnost,
    sl.id,
    decode ( sl.ID_CISSTATUS,1,'ZRUSENY',2,'TYPIZOVANY')  Status,      
    (SELECT u.s_prijmeni
      || ' '
      || u.s_krestni
    FROM ktg_appuser u
    WHERE u.ID = sl.id_zadavatel
    ) zadavatel,
    CASE
      WHEN (sl.id_cisdokument = 4
      AND b.id_ktgodbor      IS NOT NULL)
      THEN
        (SELECT oin.s_kod
          || ' - '
          || oin.s_nazev
          || ' ('
          || b.dt_platnostod
          || ' - '
          || b.dt_platnostdo
          || ')'
        FROM kp_ktg_odbor oin
        WHERE oin.ID = b.id_ktgodbor
        )
      WHEN (sl.id_cisdokument = 4
      AND b.id_ktgprojekt    IS NOT NULL)
      THEN
        (SELECT pin.ID
          || ' - '
          || pin.s_nazev
          || ' ('
          || b.dt_platnostod
          || ' - '
          || b.dt_platnostdo
          || ')'
        FROM kp_ktg_projekt pin
        WHERE pin.ID = b.id_ktgprojekt
        )
        /*ELSE    (SELECT t.s_popis
        FROM kp_cis_typtransakce t
        WHERE t.ID = sl.id_typtransakce)
        || (SELECT DECODE (t.s_popis, NULL, '', ', ' || t.s_popis)
        FROM kp_cis_typtransakce t
        WHERE t.ID = sl.id_ttdeveloper)*/
    END BUDGET_odbor_projekt,
    sl.s_popis SL_popis,
    (SELECT SUM (nd_castka)
    FROM kp_dat_dokumentradek dr
    WHERE dr.id_dokument = sl.ID
    ) SUMA_radku,
    sl.s_mena,
    DECODE(NVL(sl.cerpat_rezervu,'F'),'F','NE','T','ANO') cerpat_rezervu,
    TO_CHAR(sl.dt_navyseni_schvaleno,'DD.MM.YYYY') dt_schval_cerpani_mimo_rezervu,
    TO_CHAR(sl.dt_gestorschvaleno,'DD.MM.YYYY') dt_schvaleno_gestor,
    TO_CHAR(sl.dt_gestorzamitnuto,'DD.MM.YYYY') dt_zamitnuto_gestor,
    --RADEK--
    (
    SELECT t.s_popis
    FROM kp_cis_typtransakce t
    WHERE t.ID = slr.id_typtransakce
    ) radek_typ_transakce,
    slr.id radek,
    slr.nd_castka radek_castka,
    slr.s_komentar radek_komentar,
    TO_CHAR(slr.dt_schvalenoodbor,'DD.MM.YYYY') rad_dat_schvaleno_OO_odboru,
    TO_CHAR(slr.dt_schvalenoprojekt,'DD.MM.YYYY') rad_dat_schvaleno_PM,
    TO_CHAR(slr.dt_schvalenotop,'DD.MM.YYYY') rad_dat_schvaleno_OOH,
    TO_CHAR(slr.dt_schvalenoucspol,'DD.MM.YYYY') rad_dat_OO_spolecnosti,
    TO_CHAR(slr.dt_zamitnuto,'DD.MM.YYYY') rad_dat_zamitnuto
    --RADEK--
    -----------------------------------------------------------------------------
  FROM kp_dat_dokument sl,
    kp_dat_dokumentradek slr,
    kp_dat_budget b,
    kp_ktg_ucetnispolecnost us
  WHERE sl.id_cisdokument =4 --navyseni budgetu
  AND sl.dt_datumzadani BETWEEN TRUNC(sysdate,'YEAR') AND TRUNC(sysdate,'MONTH')
  AND sl.id_ktgucetnispolecnost IN ( 1,5000)
  AND sl.id                      = slr.id_dokument
  AND sl.id_budget               = b.ID(+)
  AND sl.id_ktgucetnispolecnost  = us.ID(+)
    --and sl.id = 196412
  ORDER BY sl.id ,
    slr.id
;


PROMPT Completed X_KP_REP_SCHVALOVAK_NAVYSENI.sql
PROMPT


-- ============================================================================
-- Deploy: X_KP_REP_SL_NAVYSENI_2010.sql
-- Category: views
-- ============================================================================

PROMPT Deploying X_KP_REP_SL_NAVYSENI_2010.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for View X_KP_REP_SL_NAVYSENI_2010
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "DB_JT"."X_KP_REP_SL_NAVYSENI_2010" ("ZADANO", "SPOLECNOST", "ID", "STATUS", "ZADAVATEL", "BUDGET_ODBOR_PROJEKT", "SL_POPIS", "SUMA_RADKU", "S_MENA", "CERPAT_REZERVU", "DT_SCHVAL_CERPANI_MIMO_REZERVU", "DT_SCHVALENO_GESTOR", "DT_ZAMITNUTO_GESTOR", "RADEK_TYP_TRANSAKCE", "RADEK", "RADEK_CASTKA", "RADEK_KOMENTAR", "RAD_DAT_SCHVALENO_OO_ODBORU", "RAD_DAT_SCHVALENO_PM", "RAD_DAT_SCHVALENO_OOH", "RAD_DAT_OO_SPOLECNOSTI", "RAD_DAT_ZAMITNUTO") AS 
  SELECT DISTINCT TO_CHAR(sl.dt_datumzadani,'DD.MM.YYYY') Zadano,
    us.s_nazev Spolecnost, --sl.id_ktgucetnispolecnost,
    sl.id,
    decode ( sl.ID_CISSTATUS,1,'ZRUSENY',2,'TYPIZOVANY')  Status,  
    (SELECT u.s_prijmeni
      || ' '
      || u.s_krestni
    FROM ktg_appuser u
    WHERE u.ID = sl.id_zadavatel
    ) zadavatel,
    CASE
      WHEN (sl.id_cisdokument = 4
      AND b.id_ktgodbor      IS NOT NULL)
      THEN
        (SELECT oin.s_kod
          || ' - '
          || oin.s_nazev
          || ' ('
          || b.dt_platnostod
          || ' - '
          || b.dt_platnostdo
          || ')'
        FROM kp_ktg_odbor oin
        WHERE oin.ID = b.id_ktgodbor
        )
      WHEN (sl.id_cisdokument = 4
      AND b.id_ktgprojekt    IS NOT NULL)
      THEN
        (SELECT pin.ID
          || ' - '
          || pin.s_nazev
          || ' ('
          || b.dt_platnostod
          || ' - '
          || b.dt_platnostdo
          || ')'
        FROM kp_ktg_projekt pin
        WHERE pin.ID = b.id_ktgprojekt
        )
        /*ELSE    (SELECT t.s_popis
        FROM kp_cis_typtransakce t
        WHERE t.ID = sl.id_typtransakce)
        || (SELECT DECODE (t.s_popis, NULL, '', ', ' || t.s_popis)
        FROM kp_cis_typtransakce t
        WHERE t.ID = sl.id_ttdeveloper)*/
    END BUDGET_odbor_projekt,
    sl.s_popis SL_popis,
    (SELECT SUM (nd_castka)
    FROM kp_dat_dokumentradek dr
    WHERE dr.id_dokument = sl.ID
    ) SUMA_radku,
    sl.s_mena,
    DECODE(NVL(sl.cerpat_rezervu,'F'),'F','NE','T','ANO') cerpat_rezervu,
    TO_CHAR(sl.dt_navyseni_schvaleno,'DD.MM.YYYY') dt_schval_cerpani_mimo_rezervu,
    TO_CHAR(sl.dt_gestorschvaleno,'DD.MM.YYYY') dt_schvaleno_gestor,
    TO_CHAR(sl.dt_gestorzamitnuto,'DD.MM.YYYY') dt_zamitnuto_gestor,
    --RADEK--
    (
    SELECT t.s_popis
    FROM kp_cis_typtransakce t
    WHERE t.ID = slr.id_typtransakce
    ) radek_typ_transakce,
    slr.id radek,
    slr.nd_castka radek_castka,
    slr.s_komentar radek_komentar,
    TO_CHAR(slr.dt_schvalenoodbor,'DD.MM.YYYY') rad_dat_schvaleno_OO_odboru,
    TO_CHAR(slr.dt_schvalenoprojekt,'DD.MM.YYYY') rad_dat_schvaleno_PM,
    TO_CHAR(slr.dt_schvalenotop,'DD.MM.YYYY') rad_dat_schvaleno_OOH,
    TO_CHAR(slr.dt_schvalenoucspol,'DD.MM.YYYY') rad_dat_OO_spolecnosti,
    TO_CHAR(slr.dt_zamitnuto,'DD.MM.YYYY') rad_dat_zamitnuto
    --RADEK--
    -----------------------------------------------------------------------------
  FROM kp_dat_dokument sl,
    kp_dat_dokumentradek slr,
    kp_dat_budget b,
    kp_ktg_ucetnispolecnost us
  WHERE sl.id_cisdokument =4 --navyseni budgetu
    --AND sl.dt_datumzadani BETWEEN TRUNC(sysdate,'YEAR') AND TRUNC(sysdate,'MONTH')
  AND TO_CHAR(sl.dt_datumzadani,'YYYY') = '2010'-- BETWEEN TRUNC(sysdate,'YEAR') AND TRUNC(sysdate,'MONTH')
  AND sl.id_ktgucetnispolecnost        IN ( 1,5000)
  AND sl.id                             = slr.id_dokument
  AND sl.id_budget                      = b.ID(+)
  AND sl.id_ktgucetnispolecnost         = us.ID(+)
    --and sl.id = 196412
  ORDER BY sl.id ,
    slr.id
;


PROMPT Completed X_KP_REP_SL_NAVYSENI_2010.sql
PROMPT


-- ============================================================================
-- PHASE: Deploy FUNCTIONS (91 files)
-- ============================================================================

PROMPT
PROMPT ============================================================================
PROMPT Deploying FUNCTIONS (91 files)
PROMPT ============================================================================
PROMPT


-- ============================================================================
-- Deploy: FC_GETPODILINVESTICE.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying FC_GETPODILINVESTICE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function FC_GETPODILINVESTICE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."FC_GETPODILINVESTICE" ( aIdKtgUcetniSpolecnost int, aIdKtgSpolecnostEmitent int, aDatum date ) return number as
	ret number (10,6);
	pom int;
begin
	-- kvuli ochrane dat pred externim dodavatelem Facility
	select count(*) into pom from fc_cis_ucetniSpolecnost
	where id_ktgUcetniSpolecnost = aIdKtgUcetniSpolecnost;
	if ( pom = 0 ) then
		raise_application_error ( -20001, 'Nepovoleny parametr aIdKtgUcetniSpolecnost: ' || aIdKtgUcetniSpolecnost );
	end if;
	return ( f_getPodilInvestice ( aIdKtgUcetniSpolecnost, aIdKtgSpolecnostEmitent, aDatum ) );
end;

/


PROMPT Completed FC_GETPODILINVESTICE.sql
PROMPT


-- ============================================================================
-- Deploy: F_CALC.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_CALC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_CALC
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_CALC" ( vzorec varchar2, tokenPromene varchar2  )
    return number as
    language java name
    'com.jt.oracle.MathParser.jeks_calculate (java.lang.String, java.lang.String) return double';

/


PROMPT Completed F_CALC.sql
PROMPT


-- ============================================================================
-- Deploy: F_CALCULATE.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_CALCULATE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_CALCULATE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_CALCULATE" (p1 IN VARCHAR2, p2 IN VARCHAR2, p3 IN NUMBER, p4 IN NUMBER, p5 IN NUMBER, p6 IN NUMBER, p7 IN NUMBER, p8 IN NUMBER, p9 IN VARCHAR2) RETURN NUMBER AUTHID CURRENT_USER AS LANGUAGE JAVA NAME 'JTBank.kapPrim.CalcVzorecJeks.calculate(java.lang.String, java.lang.String, int, int, double, double, int, int, java.lang.String) return double';

/


PROMPT Completed F_CALCULATE.sql
PROMPT


-- ============================================================================
-- Deploy: F_CALCULATESYNTAXTEST.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_CALCULATESYNTAXTEST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_CALCULATESYNTAXTEST
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_CALCULATESYNTAXTEST" ( aVzorec varchar2, aIdKtgsubkonsolidacepravidlo int ) return varchar2 as
   ret varchar2(2048);
   p number;
begin
  ret := 'OK';
  p := f_calculate ( 'f(PROTI)='||aVzorec, '9', -1, -1, 30, 35, aIdKtgsubkonsolidacepravidlo, -1, '31.12.2004' );
  return ( ret );
  exception when others then
  return ( sqlerrm );
end;

/


PROMPT Completed F_CALCULATESYNTAXTEST.sql
PROMPT


-- ============================================================================
-- Deploy: F_CALC_SESTAVA.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_CALC_SESTAVA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_CALC_SESTAVA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_CALC_SESTAVA" ( idTmpDoklad number, datumPlatnostVzorec date  )
    return number as
    language java name
    'com.jt.oracle.MathParser.sestava_calculate ( int, java.sql.Date) return double';

/


PROMPT Completed F_CALC_SESTAVA.sql
PROMPT


-- ============================================================================
-- Deploy: F_CARTESISPROTISTRANA.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_CARTESISPROTISTRANA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_CARTESISPROTISTRANA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_CARTESISPROTISTRANA" ( aSkupina8 char, aIdKtgUcetniSpolecnost int, aExportJakoProtistrana int ) return int as
	ret int;
begin
	if ( aSkupina8 = '0' ) then
		return ( null );
	end if;

	if ( aExportJakoProtistrana = '0' ) then
   	return ( aIdKtgUcetniSpolecnost );
	end if;
   
	select s.id into ret from kp_ktg_spolecnost s where s.id_ktgspolecnost = aIdKtgUcetniSpolecnost;
	
  return ( ret );

end;

/


PROMPT Completed F_CARTESISPROTISTRANA.sql
PROMPT


-- ============================================================================
-- Deploy: F_DOKLADMAJETEKUCASTKONTROLA.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_DOKLADMAJETEKUCASTKONTROLA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_DOKLADMAJETEKUCASTKONTROLA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_DOKLADMAJETEKUCASTKONTROLA" ( aIdDoklad int ) return varchar2 
is
  text varchar2(2048);
begin
  kap_prim.p_dokladMajetekUcastKontrola( aIdDoklad, text );
  
  return text;
end;

/


PROMPT Completed F_DOKLADMAJETEKUCASTKONTROLA.sql
PROMPT


-- ============================================================================
-- Deploy: F_EXPORTCARTESIS.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_EXPORTCARTESIS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_EXPORTCARTESIS
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_EXPORTCARTESIS" ( aIdDoklad int, aDokladIdKtgUcetniSpolecnost int, aIDcisUcetUNif int, aIdKtgUcetniSpolecnost int ) return int as
	ret int;
begin
	if ( aIdKtgUcetniSpolecnost is null ) then
   	return 1;
	end if;

   select count(*) into ret from Kp_Dat_Dokladvazby v
   where v.id_doklad = aIdDoklad and
   	v.id_ktgucetniskupina = 8 and
      v.id_ktgucetnispolecnostFrom = aDokladIdKtgUcetniSpolecnost and
      v.id_ktgucetnispolecnostto = aIdKtgUcetniSpolecnost and
      v.Id_Cisucetunif = aIDcisUcetUNif and
      rownum = 1;
      
	if ( ret > 0 ) then
   	ret := 0;
	else	
   	select f_jeSpolecnostClenSkupiny ( aIdKtgUcetniSpolecnost, 8, dt_datum ) 
      	into ret
      from kp_dat_doklad where id = aIdDoklad;      
      if ( ret > 0 ) then
         ret := 0;
		else
      	ret := 1;         
     	end if; 
   end if;
   
	return ( NVL ( ret, 0 ) );
end;





/


PROMPT Completed F_EXPORTCARTESIS.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETAVGKURS.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETAVGKURS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETAVGKURS
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETAVGKURS" ( aBanka number, aMena varchar2, aDen date ) return number as
    Zdroj          varchar2(10);   -- info z kp_cis_mena odkut ma brat kurz
    l_calendarid   char(20);    
	l_kurs         number(15,8);
	l_sql          varchar(2000);
	c_qlink_cz     varchar(50) := '@quaestor';
	c_qlink_sk     varchar(50) := '@quaestor_sk';
begin

-- smrM 09.07.2020 ak CZ chce CZK alebo SK chce EUR, vratim 1
	IF (( aMena = 'CZK' and aBanka = 1 ) or ( aMena = 'EUR' and aBanka = 2 )) THEN
		return ( 1 );
	END IF; 


   SELECT nd_kurz / nl_kvantita
     INTO l_kurs
     FROM dat_kurzlistavg
    WHERE dt_datum = aDen AND id_cismena = aMena AND id_cisbanka = aBanka;

   return ( l_kurs );

-- smrM 09.07.2020 podla kp_cis_mena berieme z akeho zdroja pocitat AVG kurz   
	exception
	when no_data_found then 
	   CASE aBanka
		WHEN 1 THEN
                SELECT ccp_zdroj INTO Zdroj FROM kp_cis_mena WHERE id = aMena;
                CASE 
                    WHEN Zdroj is null THEN
                                l_sql := 'select dsa.f_getavgkurs' || c_qlink_cz || ' (:1, :2) from dual';
                                EXECUTE IMMEDIATE l_sql INTO l_kurs USING aMena, aDen;
                    WHEN Zdroj is not null THEN
                                /* jaky kalendar pouzit */
                                l_sql := 'SELECT id FROM quaestor.bd_calendar' || c_qlink_cz || ' WHERE TYPE = ''S'' AND fk_country = ''CZ''';
                                EXECUTE IMMEDIATE l_sql INTO l_calendarid;
                                l_sql := 'SELECT AVG (ccp.cena_stred) / ccp.pocet_jednotek FROM centrum_cp.kurs_meny_denni_vw@topa11oo ccp, kp_cis_mena m'
                                        || ' WHERE m.id = :1'
                                        || ' AND m.ccp_zdroj is not null'
                                        || ' AND ccp.mena_ocenujici = ''CZK'''
                                        || ' AND ccp.mena_ocenovana = :2'
                                        || ' AND ccp.ak_zdroj = m.ccp_zdroj'
                                        || ' AND ccp.mp_stav_aktivity = ''aktivni'''
                                        || ' AND ccp.mp_zpusob_vypoctu = m.ccp_zpusob_vypoctu'
                                        || ' AND ccp.datum_platnosti BETWEEN TRUNC (:3, ''year'') AND :4'
                                        || ' AND f_getCalendarTypeDayQCZ(ccp.datum_platnosti, :5) = ''B'''
                                        || ' GROUP BY ccp.mena_ocenovana, ccp.pocet_jednotek';
                                EXECUTE IMMEDIATE l_sql into l_kurs USING aMena, aMena, aDen, aDen, l_calendarid;
                END CASE;
		WHEN 2 THEN
                SELECT ccp_nbs_zdroj INTO Zdroj FROM kp_cis_mena WHERE id = aMena;
                CASE 
                    WHEN Zdroj is null THEN
                                l_sql := 'select dsa.f_getavgkurs' || c_qlink_sk || ' (:1, :2) from dual';
                                EXECUTE IMMEDIATE l_sql INTO l_kurs USING aMena, aDen;
                    WHEN Zdroj is not null THEN
                                /* jaky kalendar pouzit */
                                l_sql := 'SELECT id FROM quaestor.bd_calendar' || c_qlink_sk || ' WHERE TYPE = ''S'' AND fk_country = ''SK''';
                                EXECUTE IMMEDIATE l_sql INTO l_calendarid;
                                l_sql := 'SELECT AVG (ccp.cena_stred) / ccp.pocet_jednotek FROM centrum_cp.kurs_meny_denni_vw@topa11oo ccp, kp_cis_mena m'
                                        || ' WHERE m.id = :1'
                                        || ' AND m.ccp_nbs_zdroj is not null'
                                        || ' AND ccp.mena_ocenovana = ''EUR'''
                                        || ' AND ccp.mena_ocenujici = :2'
                                        || ' AND ccp.ak_zdroj = m.ccp_nbs_zdroj'
                                        || ' AND ccp.mp_stav_aktivity = ''aktivni'''
                                        || ' AND ccp.mp_zpusob_vypoctu = m.ccp_nbs_zpusob_vypoctu'
                                        || ' AND ccp.datum_platnosti BETWEEN TRUNC (:3, ''year'') AND :4'
                                        || ' AND f_getCalendarTypeDayQSK(ccp.datum_platnosti, :5) = ''B'''
                                        || ' GROUP BY ccp.mena_ocenujici, ccp.pocet_jednotek';
                                EXECUTE IMMEDIATE l_sql into l_kurs USING aMena, aMena, aDen, aDen, l_calendarid;    
                END CASE;
		END CASE;

       return (l_kurs);

	when others then
		raise_application_error ( -20999, 'Problem ' || aMena || ' ' || aDen );   


/* smrM 09.07.2020 povodna verzia exception

	exception
	when no_data_found then
	   case aBanka
		when 1 then
	      l_sql := 'select dsa.f_getavgkurs' || c_qlink_cz || ' (:1, :2) from dual';
		   execute immediate l_sql into l_kurs using aMena, aDen;
		when 2 then
   	   l_sql := 'select dsa.f_getavgkurs' || c_qlink_sk || ' (:1, :2) from dual';
		   execute immediate l_sql into l_kurs using aMena, aDen;
		end case;


		return (l_kurs);
	when others then
		raise_application_error ( -20999, 'Problem ' || aMena || ' ' || aDen );
*/
end;

/


PROMPT Completed F_GETAVGKURS.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETBILANCEOPRPOLOZKA.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETBILANCEOPRPOLOZKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETBILANCEOPRPOLOZKA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETBILANCEOPRPOLOZKA" ( aCisList int, aRadek int ) return int as
	ret int;
begin

	select dl.id into ret
	from
		KP_def_ListBunka dl
	where
		  dl.id_cisList = aCisList and
		  dl.nl_radek = aRadek and
		  dl.nl_sloupec	= 3;

	return ( ret );
end;

/


PROMPT Completed F_GETBILANCEOPRPOLOZKA.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETBUNKATEXT.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETBUNKATEXT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETBUNKATEXT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETBUNKATEXT" ( aIdDokladPolozka int, aLocale varchar2) return varchar2 as
	v KP_cis_RadekText.s_popis%TYPE;
begin

	if ( aIdDokladPolozka is null ) then
		return ( 'Nenalezeno' );
	end if;

	select s_popis into v
	from
		KP_cis_RadekTextLang rt,
		KP_dat_DokladPolozka dp
	where
		dp.id = aIdDokladPolozka and
		rt.id = dp.id_cisRadekTyp and
		rt.s_locale = aLocale
	;

  return ( v );

end;

/


PROMPT Completed F_GETBUNKATEXT.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETCALENDARTYPEDAYQCZ.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETCALENDARTYPEDAYQCZ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETCALENDARTYPEDAYQCZ
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETCALENDARTYPEDAYQCZ" ( aDatum date, aBDCalendar char ) RETURN char AS
	ret char;
	calendarRow quaestor.calender_year@quaestor%ROWTYPE ;
BEGIN
	SELECT * INTO calendarRow FROM quaestor.calender_year@quaestor
	WHERE
		yr=to_number( to_char( trunc( aDatum, 'YEAR' ), 'YYYY' ) ) and
		fk_bd_calendar = aBDCalendar;

	return ( substr ( calendarRow.ds, trunc(aDatum) - trunc(aDatum,'year') + 1, 1 ) );
END;

/


PROMPT Completed F_GETCALENDARTYPEDAYQCZ.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETCALENDARTYPEDAYQSK.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETCALENDARTYPEDAYQSK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETCALENDARTYPEDAYQSK
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETCALENDARTYPEDAYQSK" ( aDatum date, aBDCalendar char ) RETURN char AS
	ret char;
	calendarRow quaestor.calender_year@quaestor_sk%ROWTYPE ;
BEGIN
	SELECT * INTO calendarRow FROM quaestor.calender_year@quaestor_sk
	WHERE
		yr=to_number( to_char( trunc( aDatum, 'YEAR' ), 'YYYY' ) ) and
		fk_bd_calendar = aBDCalendar;

	return ( substr ( calendarRow.ds, trunc(aDatum) - trunc(aDatum,'year') + 1, 1 ) );
END;

/


PROMPT Completed F_GETCALENDARTYPEDAYQSK.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/FUNCTIONS/F_GETCASTKALOCALBUDGET.sql: 'utf-8' codec can't decode byte 0xc8 in position 532: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/FUNCTIONS/F_GETCASTKALOCALBUDGETCOX.sql: 'utf-8' codec can't decode byte 0xc8 in position 534: invalid continuation byte


-- ============================================================================
-- Deploy: F_GETDATUMSCHAVLENITOP.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETDATUMSCHAVLENITOP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETDATUMSCHAVLENITOP
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETDATUMSCHAVLENITOP" (aIdSpol int, aDatum date) return date is
  ret date;
begin
  select v.dt_datum
  into ret
  from kp_dat_vyjimkyZamykaniTop v
  where v.id_ktgucetnispolecnost = aIdSpol
    and v.kvartal = trunc(aDatum,'q');

  return ret;

  exception
  when NO_DATA_FOUND then
    ret := trunc(add_months(aDatum,3),'q');
    if(ret=trunc(ret,'yyyy')) then
	  ret := add_months(ret,1);
	end if;

    return ret+24;
end;

/


PROMPT Completed F_GETDATUMSCHAVLENITOP.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETDOKLADKODSTAV.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETDOKLADKODSTAV.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETDOKLADKODSTAV
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETDOKLADKODSTAV" ( aIdDoklad int ) return int as
	ret int := null;
	l_kod char;
begin

	select max(c_kod) into l_kod from KP_dat_DokladProtokol
		where id_doklad = aIdDoklad;

	if ( l_kod between '6' and '9' ) then
		return ( -999 );
	elsif ( l_kod between '1' and '5' ) then
		return ( -555 );
	elsif ( l_kod != '0' ) then
		raise_application_error ( -20001, 'Necekany kod ' || l_kod );
	end if;

	-- tak ted musi byt l_kod ='0' takze se jdu podivat po vazbach
	select count(*) into ret from KP_dat_dokladVazbyAkcept
	where
		id_doklad = aIdDoklad and c_akceptace = '0';

	if ( ret != 0 ) then
		-- test zda existuji vazby, pokud neexistuji tak sice muze teoreticky byt chybou systemu
		-- ale prakticky spis zadne vazby neexistuji takze proto zadny zaznam neni a je to tedy OK
		select count(*) into ret from kp_dat_dokladVazby where id_doklad = aIdDoklad;
		if ( ret != 0 ) then
			-- chyba nejsou odsouhlasene vazby
			ret := -90;
		end if;
	end if;

	return ( ret );
end;

/


PROMPT Completed F_GETDOKLADKODSTAV.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETDOKLADKROK.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETDOKLADKROK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETDOKLADKROK
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETDOKLADKROK" ( aIdKtgUcetniSpolecnost int, aDatum date, aKrok int ) return int as
	ret int := null;
begin
    for curDoklad in (
		select d.id from KP_dat_Doklad d, kp_ktg_doklad k
		where d.id_ktgUcetniSpolecnost = aIdKtgUcetniSpolecnost and d.dt_datum = aDatum and
		d.nl_krok <= aKrok and d.id_subKonsolidace = id_ktgUcetniSpolecnost and d.id_ktgDoklad < 1000 and d.id_ktgDoklad = k.id and k.id_cisdoklad = 1
		order by d.nl_krok desc )
    loop
		ret := curDoklad.id;
		exit;
	end loop;
	return ( ret );
end;

/


PROMPT Completed F_GETDOKLADKROK.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETDOKLADSUBKONSOLIDACEKROK.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETDOKLADSUBKONSOLIDACEKROK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETDOKLADSUBKONSOLIDACEKROK
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETDOKLADSUBKONSOLIDACEKROK" ( aIdKtgUcetniSpolecnost int, aIdKtgSubkonsolidace int, aDatum date, aKrok int ) return int as
	ret int := null;
begin
    for curDoklad in (
		select d.id from KP_dat_Doklad d, kp_ktg_doklad k
		where 			
      	d.id_subKonsolidace = aIdKtgSubkonsolidace and
			d.id_ktgUcetniSpolecnost = aIdKtgUcetniSpolecnost and
			d.dt_datum = aDatum and
			d.nl_krok <= aKrok and d.id_ktgDoklad = k.id and k.id_cisdoklad = 1
		order by nl_krok desc )
    loop
		ret := curDoklad.id;
		exit;
	end loop;
	return ( ret );
	
end;

/


PROMPT Completed F_GETDOKLADSUBKONSOLIDACEKROK.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETDOKSCHVALENYDTFINAL_T.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETDOKSCHVALENYDTFINAL_T.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETDOKSCHVALENYDTFINAL_T
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETDOKSCHVALENYDTFINAL_T" 
(aIdDokument int) return VARCHAR2 is
  s_username VARCHAR2(100);
	l_osoba int;
  i int := 0; --pocet riadkov
	l_datum date := to_date('01.01.1970','DD.MM.YYYY');
  
begin
-- skontorluje naraz MaterBudgeter a gestora
	--select decode ( ( nvl(d.DT_NAVYSENI_SCHVALENO,'1.1.1970') > nvl(d.DT_GESTORSCHVALENO,'1.1.1970') )	 ,     d.ID_NAVYSENI_MB                   , d.ID_GESTOR )
  SELECT        
        CASE 
          WHEN ( nvl(d.DT_NAVYSENI_SCHVALENO,to_date('01.01.1970','DD.MM.YYYY')) > nvl(d.DT_GESTORSCHVALENO,to_date('01.01.1970','DD.MM.YYYY')) )	 
          THEN  d.ID_NAVYSENI_MB                   
          ELSE  d.ID_GESTOR 
        END  L_OSOBA  
  ,
        CASE 
          WHEN ( nvl(d.DT_NAVYSENI_SCHVALENO,to_date('01.01.1970','DD.MM.YYYY')) > nvl(d.DT_GESTORSCHVALENO,to_date('01.01.1970','DD.MM.YYYY')) )
          THEN   nvl(d.DT_NAVYSENI_SCHVALENO,to_date('01.01.1970','DD.MM.YYYY'))
          ELSE   nvl(d.DT_GESTORSCHVALENO,to_date('01.01.1970','DD.MM.YYYY'))          
        END   L_DATUM
	into l_osoba, l_datum
	from kp_dat_dokument d
	where d.ID = aIdDokument;
	
	if( l_osoba is not null and l_datum = to_date('01.01.1970','DD.MM.YYYY') ) then
		return null;
	end if; 

	for dr in (select *
             from kp_dat_dokumentRadek dr
            where dr.ID_DOKUMENT = aIdDokument) 
  loop
   i := i+1 ;			  
		if(( dr.ID_ODBOROO is not null and dr.DT_SCHVALENOODBOR is null ) or
		   ( dr.ID_PROJEKTMAN is not null and dr.DT_SCHVALENOPROJEKT is null ) or
		   ( dr.ID_UCSPOLOO is not null and dr.DT_SCHVALENOUCSPOL is null ) or
		   ( dr.ID_UCSPOLTOP is not null and dr.DT_SCHVALENOTOP is null )) then
			l_datum := null;
      l_osoba := null;
			exit;
		end if;
		
		if( dr.ID_ODBOROO is not null and dr.DT_SCHVALENOODBOR > l_datum ) then
			l_datum := dr.DT_SCHVALENOODBOR;
      l_osoba := dr.ID_ODBOROO;
		end if;
		
		if( dr.ID_PROJEKTMAN is not null and dr.DT_SCHVALENOPROJEKT > l_datum ) then
			l_datum := dr.DT_SCHVALENOPROJEKT;
       l_osoba := dr.ID_PROJEKTMAN;
		end if;
		
		if( dr.ID_UCSPOLOO is not null and dr.DT_SCHVALENOUCSPOL > l_datum ) then
			l_datum := dr.DT_SCHVALENOUCSPOL;
       l_osoba := dr.ID_UCSPOLOO;
		end if;
		
		if( dr.ID_UCSPOLTOP is not null and dr.DT_SCHVALENOTOP > l_datum ) then
			l_datum := dr.DT_SCHVALENOTOP;
       l_osoba := dr.ID_UCSPOLTOP;
		end if;
		
	end loop;
	
	if( l_datum = to_date('01.01.1970','DD.MM.YYYY') ) then
		l_datum := null;
	end if;
	
	if  i = 0  then --ak ma aspon jeden riadok
    l_datum := null;
    l_osoba := null;
  end if;  
  
  select U.S_KRESTNI ||' '||U.S_PRIJMENI
	into s_username
	from ktg_appuser u
	where u.ID = l_osoba;
	return s_username;
  
end;

/


PROMPT Completed F_GETDOKSCHVALENYDTFINAL_T.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETDOKUMENTSCHVALENYDTFINAL.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETDOKUMENTSCHVALENYDTFINAL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETDOKUMENTSCHVALENYDTFINAL
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETDOKUMENTSCHVALENYDTFINAL" 
(aIdDokument int) return date is
	l_osoba int;
  i int := 0; --pocet riadkov
	l_datum date := to_date('01.01.1970','DD.MM.YYYY');
  
begin
-- skontorluje naraz MaterBudgeter a gestora
	--select decode ( ( nvl(d.DT_NAVYSENI_SCHVALENO,'1.1.1970') > nvl(d.DT_GESTORSCHVALENO,'1.1.1970') )	 ,     d.ID_NAVYSENI_MB                   , d.ID_GESTOR )
  SELECT        
        CASE 
          WHEN ( nvl(d.DT_NAVYSENI_SCHVALENO,to_date('01.01.1970','DD.MM.YYYY')) > nvl(d.DT_GESTORSCHVALENO,to_date('01.01.1970','DD.MM.YYYY')) )	 
          THEN  d.ID_NAVYSENI_MB                   
          ELSE  d.ID_GESTOR 
        END  L_OSOBA  
  ,
        CASE 
          WHEN ( nvl(d.DT_NAVYSENI_SCHVALENO,to_date('01.01.1970','DD.MM.YYYY')) > nvl(d.DT_GESTORSCHVALENO,to_date('01.01.1970','DD.MM.YYYY')) )
          THEN   nvl(d.DT_NAVYSENI_SCHVALENO,to_date('01.01.1970','DD.MM.YYYY'))
          ELSE   nvl(d.DT_GESTORSCHVALENO,to_date('01.01.1970','DD.MM.YYYY'))          
        END   L_DATUM
	into l_osoba, l_datum
	from kp_dat_dokument d
	where d.ID = aIdDokument;
	
	if( l_osoba is not null and l_datum = to_date('01.01.1970','DD.MM.YYYY') ) then
		return null;
	end if; 

	for dr in (select *
             from kp_dat_dokumentRadek dr
            where dr.ID_DOKUMENT = aIdDokument) 
  loop
   i := i+1 ;			  
		if(( dr.ID_ODBOROO is not null and dr.DT_SCHVALENOODBOR is null ) or
		   ( dr.ID_PROJEKTMAN is not null and dr.DT_SCHVALENOPROJEKT is null ) or
		   ( dr.ID_UCSPOLOO is not null and dr.DT_SCHVALENOUCSPOL is null ) or
		   ( dr.ID_UCSPOLTOP is not null and dr.DT_SCHVALENOTOP is null )) then
			l_datum := null;
			exit;
		end if;
		
		if( dr.ID_ODBOROO is not null and dr.DT_SCHVALENOODBOR > l_datum ) then
			l_datum := dr.DT_SCHVALENOODBOR;
		end if;
		
		if( dr.ID_PROJEKTMAN is not null and dr.DT_SCHVALENOPROJEKT > l_datum ) then
			l_datum := dr.DT_SCHVALENOPROJEKT;
		end if;
		
		if( dr.ID_UCSPOLOO is not null and dr.DT_SCHVALENOUCSPOL > l_datum ) then
			l_datum := dr.DT_SCHVALENOUCSPOL;
		end if;
		
		if( dr.ID_UCSPOLTOP is not null and dr.DT_SCHVALENOTOP > l_datum ) then
			l_datum := dr.DT_SCHVALENOTOP;
		end if;
		
	end loop;
	
	if( l_datum = to_date('01.01.1970','DD.MM.YYYY') ) then
		l_datum := null;
	end if;
	
	if  i = 0  then --ak ma aspon jeden riadok
    l_datum := null;
  end if;  
  
  return l_datum;
end;

/


PROMPT Completed F_GETDOKUMENTSCHVALENYDTFINAL.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETDOKUMENTSCHVALUJICI.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETDOKUMENTSCHVALUJICI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETDOKUMENTSCHVALUJICI
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETDOKUMENTSCHVALUJICI" (aIdDokument int) return int is
	l_osoba int;
	l_datum date;
begin
	select d.ID_GESTOR, nvl(d.DT_GESTORSCHVALENO,to_date('1.1.1970'))
	into l_osoba, l_datum
	from kp_dat_dokument d
	where d.ID = aIdDokument;

	for dr in (select *
	          from kp_dat_dokumentRadek dr
			  where dr.ID_DOKUMENT = aIdDokument) loop
			  
		if( dr.ID_ODBOROO is not null and dr.DT_SCHVALENOODBOR is null ) then
			l_osoba := dr.ID_ODBOROO;
			exit;
		elsif( dr.ID_PROJEKTMAN is not null and dr.DT_SCHVALENOPROJEKT is null ) then
			l_osoba := dr.ID_PROJEKTMAN;
			exit;
		elsif( dr.ID_UCSPOLOO is not null and dr.DT_SCHVALENOUCSPOL is null ) then
			l_osoba := dr.ID_UCSPOLOO;
			exit;
		elsif( dr.ID_UCSPOLTOP is not null and dr.DT_SCHVALENOTOP is null ) then
			l_osoba := dr.ID_UCSPOLTOP;
			exit;
		end if;
		
		if( dr.ID_ODBOROO is not null and dr.DT_SCHVALENOODBOR > l_datum ) then
			l_osoba := dr.ID_ODBOROO;
			l_datum := dr.DT_SCHVALENOODBOR;
		end if;
		
		if( dr.ID_PROJEKTMAN is not null and dr.DT_SCHVALENOPROJEKT > l_datum ) then
			l_osoba := dr.ID_PROJEKTMAN;
			l_datum := dr.DT_SCHVALENOPROJEKT;
		end if;
		
		if( dr.ID_UCSPOLOO is not null and dr.DT_SCHVALENOUCSPOL > l_datum ) then
			l_osoba := dr.ID_UCSPOLOO;
			l_datum := dr.DT_SCHVALENOUCSPOL;
		end if;
		
		if( dr.ID_UCSPOLTOP is not null and dr.DT_SCHVALENOTOP > l_datum ) then
			l_osoba := dr.ID_UCSPOLTOP;
			l_datum := dr.DT_SCHVALENOTOP;
		end if;
		
	end loop;
	
	return l_osoba;
end;

/


PROMPT Completed F_GETDOKUMENTSCHVALUJICI.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETDOKUMENTSCHVALUJICIDATUM.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETDOKUMENTSCHVALUJICIDATUM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETDOKUMENTSCHVALUJICIDATUM
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETDOKUMENTSCHVALUJICIDATUM" (aIdDokument int) return date is
	l_osoba int;
	l_datum date := '1.1.1970';
begin
	select d.ID_GESTOR, nvl(d.DT_GESTORSCHVALENO,'1.1.1970')
	into l_osoba, l_datum
	from kp_dat_dokument d
	where d.ID = aIdDokument;
	
	if( l_osoba is not null and l_datum = '1.1.1970' ) then
		return null;
	end if; 

	for dr in (select *
	          from kp_dat_dokumentRadek dr
			  where dr.ID_DOKUMENT = aIdDokument) loop
			  
		if(( dr.ID_ODBOROO is not null and dr.DT_SCHVALENOODBOR is null ) or
		   ( dr.ID_PROJEKTMAN is not null and dr.DT_SCHVALENOPROJEKT is null ) or
		   ( dr.ID_UCSPOLOO is not null and dr.DT_SCHVALENOUCSPOL is null ) or
		   ( dr.ID_UCSPOLTOP is not null and dr.DT_SCHVALENOTOP is null )) then
			l_datum := null;
			exit;
		end if;
		
		if( dr.ID_ODBOROO is not null and dr.DT_SCHVALENOODBOR > l_datum ) then
			l_datum := dr.DT_SCHVALENOODBOR;
		end if;
		
		if( dr.ID_PROJEKTMAN is not null and dr.DT_SCHVALENOPROJEKT > l_datum ) then
			l_datum := dr.DT_SCHVALENOPROJEKT;
		end if;
		
		if( dr.ID_UCSPOLOO is not null and dr.DT_SCHVALENOUCSPOL > l_datum ) then
			l_datum := dr.DT_SCHVALENOUCSPOL;
		end if;
		
		if( dr.ID_UCSPOLTOP is not null and dr.DT_SCHVALENOTOP > l_datum ) then
			l_datum := dr.DT_SCHVALENOTOP;
		end if;
		
	end loop;
	
	if( l_datum = '1.1.1970' ) then
		return null;
	end if;
	
	return l_datum;
end;

/


PROMPT Completed F_GETDOKUMENTSCHVALUJICIDATUM.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETGESTOR.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETGESTOR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETGESTOR
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETGESTOR" ( aIdTypTransakce int, aIdUcetSpol int ) return int as
	retGestor int;
begin
    
   IF(aIdTypTransakce is not null and aIdUcetSpol is not null) THEN
    
    begin
      select distinct  GESP.ID_APPUSER
        into retGestor      
        from KP_REL_GESTORTRANSAKCE_SPOL GESP
      where         GESP.ID_SPOL          = aIdUcetSpol
                and GESP.ID_TYPTRANSAKCE  =aIdTypTransakce;
       
      exception WHEN NO_DATA_FOUND THEN 
      BEGIN  
        SELECT distinct GESw.ID_APPUSER
          INTO  retGestor      
          FROM  KP_REL_GESTORTRANSAKCE GESw,KP_KTG_UCETNISPOLECNOST UCSPOLw
         WHERE    GESW.ID_MNGSEGMENT = ucspolw.id_mngsegment
              and ucspolw.id  = aIdUcetSpol
              and GESw.id_typtransakce = aIdTypTransakce;
         exception WHEN NO_DATA_FOUND THEN               
              retGestor := null;	
      END;
    end;

  END IF;

return retGestor;

  
end;      
  /* v3
    begin
      select distinct nvl( GESP.ID_APPUSER,GES.ID_APPUSER) ID_APPUSER --, GES.ID_APPUSER, GESP.ID_APPUSER, GES.s_nazev
      into retGestor      
      from  
            KP_REL_GESTORTRANSAKCE_SPOL GESP,
            ( select distinct gesw.id_appuser, GESw.ID_TYPTRANSAKCE, UCSPOLw.id  IdUcetSpol ,UCSPOLw.s_nazev            
                from KP_REL_GESTORTRANSAKCE GESw,
                     KP_KTG_UCETNISPOLECNOST UCSPOLw
               where     
                     GESW.ID_MNGSEGMENT = ucspolw.id_mngsegment
                     and gesw.id_typtransakce = aIdTypTransakce
                     and ucspolw.id  = aIdUcetSpol
                     ) GES 
      where        
                GESP.ID_SPOL             (+) = GES.IdUcetSpol 
                and GESP.ID_TYPTRANSAKCE (+) = GES.ID_TYPTRANSAKCE ;
        
    
    exception WHEN NO_DATA_FOUND THEN 
              retGestor := null;	
    end;
  
  END IF;
*/

/* v2
    select nvl(GESP.id_appuser,GET.id_appuser), GESP.id_appuser,GET.id_appuser
    into retGestor
      from  KP_REL_GESTORTRANSAKCE GET,
            KP_REL_GESTORTRANSAKCE_SPOL GESP,
            KP_KTG_UCETNISPOLECNOST UCSPOL
      where
            GET.id_typtransakce  (+)= aIdTypTransakce
        and GESP.ID_TYPTRANSAKCE =  GET.id_typtransakce 
        and GET.id_mngsegment    = UCSPOL.id_mngsegment
        and GESP.ID_SPOL         (+)= ucspol.id --&aIdUcetSpol 
        --and ucspol.id            = aIdUcetSpol; 
  */      



/* v1
create or replace function f_getGestor_bck( aIdTypTransakce int, aIdUcetSpol int ) return int as
	l_cnt int;
	l_country varchar2(3);
	retGestor int;
begin
    if(aIdTypTransakce is not null) then
	    select count(*)
		into l_cnt
		from kp_ktg_spolecnost
		where id_ktgspolecnost = decode(aIdUcetSpol,5054,5004,aIdUcetSpol);

		if(l_cnt = 1) then
		  select s_country
		  into l_country
	      from kp_ktg_spolecnost
		  where id_ktgspolecnost = decode(aIdUcetSpol,5054,5004,aIdUcetSpol);

		  if(UPPER(l_country) = 'CZ') then
	           select id_gestor_cz
	           into retGestor
	           from kp_cis_typtransakce
	           where id = aIdTypTransakce;
		  elsif(UPPER(l_country) = 'SK') then
	           select id_gestor_sk
	           into retGestor
	           from kp_cis_typtransakce
	           where id = aIdTypTransakce;
		  else
	           select id_gestor_z
	           into retGestor
	           from kp_cis_typtransakce
	           where id = aIdTypTransakce;
		  end if;
		  
		  --vyjimky
		  select count(*)
		  into l_cnt
		  from kp_dat_gestorVyjimky
		  where id_ktgAppUser = retgestor;
		  
		  if(l_cnt > 0) then
			  select count(*)
			  into l_cnt
			  from kp_dat_gestorVyjimky
			  where id_ktgAppUser = retGestor
			    and id_ktgUcetniSpolecnost = aIdUcetSpol;
				
			  if(l_cnt = 0) then
			  	  retGestor := null;
			  end if; 
		  end if;

		end if;
	end if;
	
	return retGestor;
end;  

*/

/


PROMPT Completed F_GETGESTOR.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETGESTOR_R907.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETGESTOR_R907.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETGESTOR_R907
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETGESTOR_R907" ( aIdTypTransakce int, aIdUcetSpol int ) return int as
	l_cnt int;
	l_country varchar2(3);
	retGestor int;
begin
    if(aIdTypTransakce is not null) then
	    select count(*)
		into l_cnt
		from kp_ktg_spolecnost
		where id_ktgspolecnost = decode(aIdUcetSpol,5054,5004,aIdUcetSpol);

		if(l_cnt = 1) then
		  select s_country
		  into l_country
	      from kp_ktg_spolecnost
		  where id_ktgspolecnost = decode(aIdUcetSpol,5054,5004,aIdUcetSpol);

		  if(UPPER(l_country) = 'CZ') then
	           select id_gestor_cz
	           into retGestor
	           from kp_cis_typtransakce
	           where id = aIdTypTransakce;
		  elsif(UPPER(l_country) = 'SK') then
	           select id_gestor_sk
	           into retGestor
	           from kp_cis_typtransakce
	           where id = aIdTypTransakce;
		  else
	           select id_gestor_z
	           into retGestor
	           from kp_cis_typtransakce
	           where id = aIdTypTransakce;
		  end if;
		  
		  --vyjimky
		  select count(*)
		  into l_cnt
		  from kp_dat_gestorVyjimky
		  where id_ktgAppUser = retgestor;
		  
		  if(l_cnt > 0) then
			  select count(*)
			  into l_cnt
			  from kp_dat_gestorVyjimky
			  where id_ktgAppUser = retGestor
			    and id_ktgUcetniSpolecnost = aIdUcetSpol;
				
			  if(l_cnt = 0) then
			  	  retGestor := null;
			  end if; 
		  end if;

		end if;
	end if;
	
	return retGestor;
end;

/


PROMPT Completed F_GETGESTOR_R907.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETKODSUBJECTTYP.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETKODSUBJECTTYP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETKODSUBJECTTYP
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETKODSUBJECTTYP" ( aKategorie varchar2) return varchar2 as
	rowDef KP_def_kategorie2typ%ROWTYPE;
   ret kp_cis_typSubject.s_kod%TYPE;
begin
	if ( aKategorie is null ) then
   	return null;
	end if;      

	begin
		select * into rowDef from KP_def_kategorie2typ 
   	where s_kodkategorieprotistrana = aKategorie;
	exception when NO_DATA_FOUND then
   	rowDef.id_cisTypSubject := -1;      
	end;      

	select s_kod into ret 
   from kp_cis_typSubject 
   where id = rowDef.id_cisTypSubject;

  return ( ret );

end;

/


PROMPT Completed F_GETKODSUBJECTTYP.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETKURS.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETKURS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETKURS
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETKURS" ( aBanka number, aMena varchar2, aDen date ) return number as

    Zdroj   varchar2(10);   -- info z kp_cis_mena odkut ma brat kurz
	l_kurs  number(15,8);

begin
	IF (( aMena = 'CZK' and aBanka = 1 ) or ( aMena = 'EUR' and aBanka = 2 )) THEN
		return ( 1 );
	END IF;


	SELECT nd_kurz / nl_kvantita
	  INTO l_kurs
	  FROM dat_kurzlist
	 WHERE id_cisbanka = aBanka
       and id_cismena = aMena
       and dt_datum = aDen;

	return ( l_kurs );

    exception
	when no_data_found then
        CASE aBanka
            WHEN 1 THEN
                SELECT ccp_zdroj INTO Zdroj FROM kp_cis_mena WHERE id = aMena;
                CASE
                    WHEN Zdroj is null THEN
                        SELECT xr.xrate_middle / xr.quotation_unit
                        INTO l_kurs
                        FROM quaestor.xrate@quaestor xr
                        WHERE xr.xrate_type = 'F' 
                          and xr.fk_currency = aMena 
                          and xr.xrate_date = aDen;
                    WHEN Zdroj is not null THEN
                        SELECT ccp.cena_stred / ccp.pocet_jednotek 
                        INTO l_kurs
                        FROM centrum_cp.kurs_meny_denni_vw@topa11oo ccp, kp_cis_mena m 
                        WHERE m.id = aMena
                          AND m.ccp_zdroj is not null
                          AND ccp.mena_ocenujici = 'CZK'
                          AND ccp.mena_ocenovana = aMena
                          AND ccp.ak_zdroj = m.ccp_zdroj
                          AND ccp.mp_stav_aktivity = 'aktivni'
                          AND ccp.mp_zpusob_vypoctu = m.ccp_zpusob_vypoctu
                          AND ccp.datum_platnosti = aDen;                          
                END CASE;
            WHEN 2 THEN
                SELECT ccp_nbs_zdroj INTO Zdroj FROM kp_cis_mena WHERE id = aMena;
                CASE
                    WHEN Zdroj is null THEN
                        SELECT xr.xrate_middle / xr.quotation_unit
                        INTO l_kurs
                        FROM quaestor.xrate@quaestor_sk xr
                        WHERE xr.xrate_type = 'F' 
                          and xr.fk_currency = aMena 
                          and xr.xrate_date = aDen;
                    WHEN Zdroj is not null THEN
                        SELECT ccp.cena_stred / ccp.pocet_jednotek
                          INTO l_kurs
                        FROM centrum_cp.kurs_meny_denni_vw@topa11oo ccp, kp_cis_mena m
                        WHERE m.id = aMena
                          AND m.ccp_nbs_zdroj is not null
                          AND ccp.mena_ocenovana = 'EUR'
                          AND ccp.mena_ocenujici = aMena
                          AND ccp.ak_zdroj = m.ccp_nbs_zdroj
                          AND ccp.mp_stav_aktivity = 'aktivni'
                          AND ccp.mp_zpusob_vypoctu = m.ccp_nbs_zpusob_vypoctu
                          AND ccp.datum_platnosti = aDen;                        
                END CASE;                
        END CASE;

        return (l_kurs);

	when others then
        raise_application_error ( -20999, 'Kurz : ' || aMena || '  ' || aDen );

end;

/


PROMPT Completed F_GETKURS.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETLISTTEXT.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETLISTTEXT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETLISTTEXT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETLISTTEXT" ( aIdDokladPolozka int, aLocale varchar2) return varchar2 as
-- vraci popis pro polozku z parametru
-- %param aIdDokladPolozka obsahuje Id polozky
-- %param aLocale rika v jakem jazyku se ma text vratit pripustne hodnoty {*}  cs_CZ {*}  en_US
-- %usage Pouziva se pro lokalizaci <b>textu v selectech</b> cis_banka
	v KP_cis_RadekText.s_popis%TYPE;
begin

	if ( aIdDokladPolozka is null ) then
		return ( 'Nenalezeno' );
	end if;

	select s_popis into v
	from
		KP_cis_List l,
		KP_dat_DokladPolozka dp
	where
		dp.id = aIdDokladPolozka and
		l.id = dp.id_cisList
--		rt.s_locale = aLocale		
		; 
	
  return ( v );

end;

/


PROMPT Completed F_GETLISTTEXT.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETMAXDOKLAD.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETMAXDOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETMAXDOKLAD
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETMAXDOKLAD" (AIDKTGUCETNISPOLECNOST INT, ADTDATUM DATE, AKROK INT := 99) RETURN INT AS
  RET INT := NULL;
BEGIN
  FOR R IN (
	SELECT ID, NL_KROK
	FROM (
		SELECT MAX(DT_DATUM) MAX_DATUM
		FROM KP_DAT_DOKLAD D
		WHERE D.ID_KTGUCETNISPOLECNOST = AIDKTGUCETNISPOLECNOST
		  AND D.NL_KROK <= AKROK
		  AND D.NL_KROK IN (1,2,90) 
		  AND D.DT_DATUM <= ADTDATUM
		  AND D.ID_SUBKONSOLIDACE = D.ID_KTGUCETNISPOLECNOST
		) MAX,
        KP_DAT_DOKLAD D
	WHERE D.ID_KTGUCETNISPOLECNOST = AIDKTGUCETNISPOLECNOST
	  AND MAX.MAX_DATUM = D.DT_DATUM
	  AND D.ID_SUBKONSOLIDACE = D.ID_KTGUCETNISPOLECNOST
	  AND D.NL_KROK <= AKROK
	  AND D.NL_KROK IN (1,2,90) 
    ORDER BY NL_KROK DESC
	  ) LOOP

	RET := R.ID;
	EXIT;

  END LOOP;

  RETURN RET;
END;

/


PROMPT Completed F_GETMAXDOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETMENADOKLAD.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETMENADOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETMENADOKLAD
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETMENADOKLAD" ( aIdDoklad int ) return varchar2 as
	ret KP_ktg_ucetniSpolecnost.s_mena%TYPE;
begin

	select s.s_mena into ret
	from KP_Dat_doklad d, KP_ktg_ucetniSpolecnost s
	where
		  d.id_ktgUcetniSpolecnost = s.id and
		  d.id = aIdDoklad;

	return ( ret );

exception when others then
  app.p_log_autonomous('EXEPTION WO: f_getMenaDoklad : '||aIdDoklad);
  raise;
  --return('');
end;

/


PROMPT Completed F_GETMENADOKLAD.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/FUNCTIONS/F_GETMENAKURS.sql: 'utf-8' codec can't decode byte 0xc8 in position 414: invalid continuation byte


-- ============================================================================
-- Deploy: F_GETOBDOBIDATUMOD.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETOBDOBIDATUMOD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETOBDOBIDATUMOD
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETOBDOBIDATUMOD" return date as
	ret date;
begin
	select dt_datumOd into ret from kp_ktg_obdobi where id =
		( select Max(id) from kp_ktg_obdobi );
	return ( ret );
end;

/


PROMPT Completed F_GETOBDOBIDATUMOD.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETPODILINVESTICE.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETPODILINVESTICE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETPODILINVESTICE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETPODILINVESTICE" ( aIdKtgUcetniSpolecnost int, aIdKtgSpolecnostEmitent int, aDatum date ) return number as
	ret number (15,6);
begin
--app.p_log_autonomous('f_getPodilInvestice: '||aIdKtgUcetniSpolecnost||'/'||aIdKtgSpolecnostEmitent||' '||aDatum);
	select
		sum (m.nl_pocetKusu*e.nl_nominal/ f_getZakladJmeni ( i.id_ktgSpolecnost, aDatum ) ) into ret
	from
		kp_dat_majetkovaUcast m,
		kp_ktg_financniInvestice i,
		kp_ktg_finInvesticeEmise e
	where
		i.id = e.id_ktgFinancniInvestice and
		m.id_ktgFinInvesticeEmise = e.id and
		aDatum between m.dt_platnostOd and m.dt_platnostDo and
		m.id_ktgUcetniSpolecnost = aIdKtgUcetniSpolecnost  and
		m.nl_pocetKusu != 0 and
		i.id_ktgSpolecnost = aIdKtgSpolecnostEmitent
		and e.c_nenulovy = '1';

	return ( ret );

exception 
    WHEN others then
      app.p_log_autonomous('CHYBA f_getPodilInvestice: '||aIdKtgUcetniSpolecnost||'/'||aIdKtgSpolecnostEmitent||' '||aDatum);
      raise;
end;

/


PROMPT Completed F_GETPODILINVESTICE.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETQUESTORKURS.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETQUESTORKURS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETQUESTORKURS
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETQUESTORKURS" ( aMena varchar2, aDatum date ) return number as
	ret number;
begin

  if ( aMena is null ) then
    return 1;
  end if;

	select quotation_unit/xrate_middle
	into ret
	from quaestor.xrate@q56
	where
		xrate_date = trunc(aDatum) and
		xrate_type = 'F' and
		fk_currency = aMena
 -- 12.08.2014 / 17.05.2012  v QCZ moze byt viac kurzov v priebehu dna. berieme posledny
    and xrate_time =( select  max( mx.xrate_time) from quaestor.xrate@q56 mx
                              where aMena = mx.fk_currency and
                                    mx.xrate_type = 'F' and
                                    mx.xrate_date = trunc(aDatum)
                          )      
    
    ;

	return ( ret );

	exception
		when NO_DATA_FOUND then
			return ( 1 );


/*
  if ( aMena is null ) then
    return 1;
  end if;


  select sum(ND_KURZ) into ret  from TMP_KURZLISTEK
  where DT_DATUM = aDatum and S_MENA = aMena;

  if ( ret != 0 ) then
  	 return ret;
  end if;

	select quotation_unit/xrate_middle
	into ret
	from quaestor.xrate@q56
	where
		xrate_date = trunc(aDatum) and
		xrate_type = 'F' and
		fk_currency = aMena;

    insert into tmp_kurzListek ( dt_datum, s_mena, nd_kurz )
	values ( aDatum, aMena, ret );

	return ( ret );

	exception
		when NO_DATA_FOUND then
		    insert into tmp_kurzListek ( dt_datum, s_mena, nd_kurz )
			values ( aDatum, aMena, 1 );
			return ( 1 );
*/

end;

/


PROMPT Completed F_GETQUESTORKURS.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETQUESTORKURS_CACHE.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETQUESTORKURS_CACHE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETQUESTORKURS_CACHE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETQUESTORKURS_CACHE" ( aMena varchar2, aDatum date ) return number as
	ret number;
begin

  if ( aMena is null ) then
    return 1;
  end if;


  select sum(ND_KURZ) into ret  from TMP_KURZLISTEK
  where DT_DATUM = aDatum and S_MENA = aMena;

  if ( ret != 0 ) then
  	 return ret;
  end if;

	select quotation_unit/xrate_middle
	into ret
	from quaestor.xrate@q56
	where
		xrate_date = trunc(aDatum) and
		xrate_type = 'F' and
		fk_currency = aMena
-- 12.08.2014 / 17.05.2012  v QCZ moze byt viac kurzov v priebehu dna. berieme posledny
    and xrate_time =( select  max( mx.xrate_time) from quaestor.xrate@q56 mx
                              where aMena = mx.fk_currency and
                                    mx.xrate_type = 'F' and
                                    mx.xrate_date = trunc(aDatum)
                          )          
    
    ;

    insert into tmp_kurzListek ( dt_datum, s_mena, nd_kurz )
	values ( aDatum, aMena, ret );

	return ( ret );

	exception
		when NO_DATA_FOUND then
		    insert into tmp_kurzListek ( dt_datum, s_mena, nd_kurz )
			values ( aDatum, aMena, 1 );
			return ( 1 );

end;

/


PROMPT Completed F_GETQUESTORKURS_CACHE.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETRADEKTEXT.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETRADEKTEXT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETRADEKTEXT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETRADEKTEXT" ( aIdRadek int, aLocale varchar2) return varchar2 as
	v KP_cis_RadekText.s_popis%TYPE;
begin

	select s_popis into v
	from
		KP_cis_RadekTextLang rt
	where
		rt.id = aIdRadek and
		rt.s_locale = aLocale
	;

  return ( v );

end;

/


PROMPT Completed F_GETRADEKTEXT.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETSIGNBILANCELIST.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETSIGNBILANCELIST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETSIGNBILANCELIST
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETSIGNBILANCELIST" ( aPoradiList int ) return int as
	ret int;
begin
	if ( aPoradiList = 1 ) or ( aPoradiList = 3 ) or ( aPoradiList = 55 ) then
		ret := 1;
	else
		ret := -1;
	end if;

	return ( ret );
end;

/


PROMPT Completed F_GETSIGNBILANCELIST.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETSIGNCARTESIS.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETSIGNCARTESIS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETSIGNCARTESIS
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETSIGNCARTESIS" ( aClass char, aSloupec int ) return int as
	ret int;
begin

   if ( aClass in ( 'A', '3' ) ) then
   	return ( 1 );
   end if;

/* neni jiste
	if ( aClass = 'A' and aSloupec = 3 ) then
   	return ( -1 ); 
   end if;
*/
   	
	return ( -1 );
end;

/


PROMPT Completed F_GETSIGNCARTESIS.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/FUNCTIONS/F_GETSPINTESTICOEO.sql: 'utf-8' codec can't decode byte 0xed in position 532: invalid continuation byte


-- ============================================================================
-- Deploy: F_GETSPOLECNOSTDOKLAD.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETSPOLECNOSTDOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETSPOLECNOSTDOKLAD
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETSPOLECNOSTDOKLAD" ( aIdDoklad int ) return varchar2 as
	ret KP_ktg_ucetniSpolecnost.s_nazev%TYPE;
begin

	select s.s_nazev into ret
	from KP_Dat_doklad d, KP_ktg_ucetniSpolecnost s
	where
		  d.id_ktgUcetniSpolecnost = s.id and
		  d.id = aIdDoklad;

	return ( ret );
exception when others then
  app.p_log_autonomous('EXEPTION WO: f_getSpolecnostDoklad : '||aIdDoklad);
  raise;
  --return('');
end;

/


PROMPT Completed F_GETSPOLECNOSTDOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETSPOLECNOSTDOKLADYKODSTAV.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETSPOLECNOSTDOKLADYKODSTAV.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETSPOLECNOSTDOKLADYKODSTAV
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETSPOLECNOSTDOKLADYKODSTAV" ( aIdKtgUcetniSpolecnost int, aDatum date ) return int as
	ret int := null;
	l_count int;
	l_kod char;
	l_doklad int;
begin

	 for i in reverse 1 .. 2 loop 
		 select count(*) into l_count from KP_dat_doklad
		 where
			id_ktgUcetniSpolecnost = aIdKtgUcetniSpolecnost and
			dt_datum = aDatum and
			nl_krok = i; 
	 
	 	if ( l_count = 1 ) then
			 select id into l_doklad from KP_dat_doklad
			 where
				id_ktgUcetniSpolecnost = aIdKtgUcetniSpolecnost and
				dt_datum = aDatum and
				nl_krok = i; 
		 		
			ret := 	f_getDokladKodStav ( l_doklad );
			if ( ret < 0 ) then
				return ( ret );
			end if;
		end if;
	
	end loop;

/*
	for cDoklad in (
		select id
		from KP_dat_doklad
		where
			id_ktgUcetniSpolecnost = aIdKtgUcetniSpolecnost and
			dt_datum = aDatum and
			nl_krok <= 2

	) loop

		ret := 	f_getDokladKodStav ( cDoklad.id );
		if ( ret < 0 ) then
			return ( ret );
		end if;

	end loop;
*/
	return ( ret );
end;

/


PROMPT Completed F_GETSPOLECNOSTDOKLADYKODSTAV.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETSPOLECNOSTESSK.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETSPOLECNOSTESSK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETSPOLECNOSTESSK
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETSPOLECNOSTESSK" ( aIdSpolecnost int ) return KP_KTG_SPOLECNOST_GROUP.cust_group_code%TYPE as
-- vraci ekonomicky spjatou skupinu, je-li to mozne. pokud neni zadano vraci null pokud jich je vice vraci otazniky
	type typeTableCode is table of KP_KTG_SPOLECNOST_GROUP.cust_group_code%TYPE;
	tableGroup typeTableCode;
begin
	select cust_group_code BULK COLLECT INTO tableGroup from  KP_KTG_SPOLECNOST_GROUP where id_spolecnost = aIdSpolecnost;
/*
	if ( tableGroup.count = 1 ) then
		return ( tableGroup(1) );
	elsif ( tableGroup.count = 0 ) then
		return null;
	end if;
*/
	
	case tableGroup.count 
	   when 0 then return null;
	   when 1 then return ( tablegroup(1) );
	   else return ( '?????' );
		
	end case;

	 
end;

/


PROMPT Completed F_GETSPOLECNOSTESSK.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETSPOLECNOSTID.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETSPOLECNOSTID.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETSPOLECNOSTID
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETSPOLECNOSTID" ( aExtCislo varchar2, aSystem char, aError int ) return int as
	ret int;
begin
	begin
		if ( aSystem = 'Q' ) then
			select id into ret from KP_ktg_UcetniSpolecnost where aExtCislo = quest_id;
		elsif ( aSystem = 'T' ) then
			select id into ret from KP_ktg_UcetniSpolecnost where aExtCislo = topas_id;
		elsif ( aSystem = 'S' ) then
			select id into ret from KP_ktg_UcetniSpolecnost where aExtCislo = to_char(spin_id);
		else
			raise_application_error ( -20000, 'Chybny vstupni parametr aSystem=' || aSystem ) ;
		end if;

		exception
			when no_data_found then
				if ( aError != 0 ) then
					raise_application_error ( -20000, 'Nenalezena spolecnost pro vstupni parametr aExtCislo=' || aExtCislo || '  aSystem=' || aSystem ) ;
				end if;
				ret:=null;
	end;

	return ( ret );
end;

/


PROMPT Completed F_GETSPOLECNOSTID.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/FUNCTIONS/F_GETSPOLECNOSTKO.sql: 'utf-8' codec can't decode byte 0xed in position 1345: invalid continuation byte


-- ============================================================================
-- Deploy: F_GETSPOLECNOSTKODBA008.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETSPOLECNOSTKODBA008.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETSPOLECNOSTKODBA008
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETSPOLECNOSTKODBA008" ( aIdSpolecnost int, aESSk KP_KTG_SPOLECNOST_GROUP.cust_group_code%TYPE ) 
return KP_KTG_SPOLECNOST_GROUP.cust_struc_code%TYPE as
   ret KP_KTG_SPOLECNOST_GROUP.cust_struc_code%TYPE;
begin
	select cust_struc_code INTO ret 
	from  KP_KTG_SPOLECNOST_GROUP 
	where id_spolecnost = aIdSpolecnost and cust_group_code = aESSk;

	return ( ret );
		
end;

/


PROMPT Completed F_GETSPOLECNOSTKODBA008.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETSPOLECNOSTMATKA.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETSPOLECNOSTMATKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETSPOLECNOSTMATKA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETSPOLECNOSTMATKA" ( aKtgUcetniSpolecnost int, aSkupina int, aDatum date ) return int as
	ret int;
   datum date := NVL ( aDatum, sysdate );
begin
	
   select Max(sb.id_ktgucetnispolecnostmatka) into ret
   from 
   	kp_rel_subkonsolidaceclen rr, 
      kp_ktg_subkonsolidace sb 
   where 
   	sb.id_ktgucetnispolecnost = rr.id_ktgsubkonsolidace and
      rr.id_ktgucetniskupina = aSkupina and 
      rr.id_ktgucetnispolecnost = aKtgUcetniSpolecnost and
		datum between rr.dt_clenstviod and rr.dt_clenstvido;
	
	return ( ret );
end;

/


PROMPT Completed F_GETSPOLECNOSTMATKA.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/FUNCTIONS/F_GETSPOLECNOSTSPRAVCE.sql: 'utf-8' codec can't decode byte 0xed in position 1369: invalid continuation byte


-- ============================================================================
-- Deploy: F_GETSUBDOKLADKROK.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETSUBDOKLADKROK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETSUBDOKLADKROK
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETSUBDOKLADKROK" ( aIdKtgUcetniSpolecnost int, aDatum date, aKrok int, aIdKtgSubkonsolidace int ) return int as
	ret int := null;
begin
    for curDoklad in (
		select id from KP_dat_Doklad
		where
			id_ktgUcetniSpolecnost = aIdKtgUcetniSpolecnost and
			dt_datum = aDatum and
			nl_krok <= aKrok and
			id_subKonsolidace != id_ktgUcetniSpolecnost
			--id_subKonsolidace = aIdKtgSubkonsolidace
		order by nl_krok desc )
    loop
		ret := curDoklad.id;
		exit;
	end loop;
	return ( ret );
end;

/


PROMPT Completed F_GETSUBDOKLADKROK.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETSUBSTINGONLYNUMBER.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETSUBSTINGONLYNUMBER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETSUBSTINGONLYNUMBER
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETSUBSTINGONLYNUMBER" ( aText varchar2, aStartIndex int ) return varchar2 as
ret varchar2(128);
i int := aStartIndex;
znak char;
begin

	  if ( aStartIndex > 1 ) then
	  	  ret := substr ( aText, 1, aStartIndex-1 );
	  else
	     ret := '';
	  end if;

	  while ( i <= length( aText ) ) loop
	  		  znak := substr( aText, i,1);

			  if ( znak > '9' or znak < '0' ) then
			  	  return ( ret );
			  end if;
			  i := i + 1;
			  ret := ret || znak;
	  end loop;

	  return ( ret );

end;

/


PROMPT Completed F_GETSUBSTINGONLYNUMBER.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETTYPTRANSAKCEUCET.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETTYPTRANSAKCEUCET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETTYPTRANSAKCEUCET
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETTYPTRANSAKCEUCET" (aIdSubject int, aDatum date, aUcet varchar2) return varchar2 is
  ret varchar2(200) := null;
begin
/*
  select tt.s_kod || ' - ' || tt.S_POPIS 
  into ret
  from kp_def_budgetMustek m, 
       kp_cis_typTransakce tt 
  where aIdSubject = M.ID_CISSUBJECT 
    AND aUcet LIKE M.S_UCET||'%' 
    and tt.ID = m.ID_CISTYPTRANSAKCE 
    and aDatum between tt.dt_platnostOd and tt.dt_platnostDo;
	
  return ret;

  exception when NO_DATA_FOUND then 
*/
    return null;
end;

/


PROMPT Completed F_GETTYPTRANSAKCEUCET.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETTYPVYKAZ.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETTYPVYKAZ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETTYPVYKAZ
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETTYPVYKAZ" ( aIdDokladPolozka int, aUcet varchar2 ) return char as
	ret char;
begin
	select to_char(nl_poradiList) into ret
	from kp_dat_dokladPolozka where id = aIdDokladPolozka;

	if ( ret = '5' ) then
		-- naklady / vynosy jedine podle prvniho znaku uctu, protoze kazdy subjekt to ma jinak
		null;
	end if;

	return ( ret );
end;

/


PROMPT Completed F_GETTYPVYKAZ.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETUCETUNIFPOPIS.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETUCETUNIFPOPIS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETUCETUNIFPOPIS
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETUCETUNIFPOPIS" ( aId int, aLocale varchar2 ) return varchar2 as
	l_popis kp_cis_ucetUnifLang.S_POPIS%type;
begin
	select l.S_POPIS
	into l_popis
	from kp_cis_ucetUnifLang l
	where l.ID_CISUCETUNIF = aId
	  and l.S_LOCALE = aLocale;
  	  
	return l_popis;
	
	exception when no_data_found then
		return '???';
end;

/


PROMPT Completed F_GETUCETUNIFPOPIS.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETUCETUNIFPOPISUCET.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETUCETUNIFPOPISUCET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETUCETUNIFPOPISUCET
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETUCETUNIFPOPISUCET" ( aUcetUnif varchar2, aLocale varchar2 ) return varchar2 as
	l_popis kp_cis_ucetUnifLang.S_POPIS%type;
begin
	select l.S_POPIS
	into l_popis
	from kp_cis_ucetUnif c,
		 kp_cis_ucetUnifLang l
	where c.S_UCET = aUcetUnif
	  and l.ID_CISUCETUNIF = c.ID
	  and l.S_LOCALE = aLocale;
  	  
	return l_popis;
	
	exception when no_data_found then
		return '???';
end;

/


PROMPT Completed F_GETUCETUNIFPOPISUCET.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETUCSPOLPROTIBUDOUCNOST.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETUCSPOLPROTIBUDOUCNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETUCSPOLPROTIBUDOUCNOST
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETUCSPOLPROTIBUDOUCNOST" ( aIdUcSpol int,
	   	  		  		   							   aDatum date,
													   aIdProti int) return int as
	cnt int;
begin
	select count(*)
	into cnt
	from kp_dat_doklad dIn,
		 kp_dat_dokladZdrojDatAgregace aIn
	where dIn.ID_KTGUCETNISPOLECNOST = aIdUcSpol
	  and dIn.DT_DATUM = add_months(aDatum,-1)
	  and dIn.DT_DATUM = last_day(dIn.DT_DATUM)
	  and dIn.C_BASEDOKLAD = '1'
	  and dIn.ID = aIn.ID_DOKLAD
	  and aIn.ID_KTGSPOLECNOST = aIdProti;
	
	return cnt;
end;

/


PROMPT Completed F_GETUCSPOLPROTIBUDOUCNOST.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETUNIFAIXDOID.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETUNIFAIXDOID.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETUNIFAIXDOID
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETUNIFAIXDOID" ( aIdCisDatabaze int, aDoid varchar2, aDatum date, aIdDoklad number ) return int as

--create or replace FUNCTION         "F_GETUNIFAIXDOID" ( aIdCisDatabaze int, aDoid varchar2, aDatum date ) return int as
	l_idKtgSpolecnost int;
    l_id_cisdatabaze_party int;
begin

    select id_cisdatabaze_party into l_id_cisdatabaze_party
    from kp_ktg_ucetnispolecnost
    where id = (select ID_KTGUCETNISPOLECNOST
                from KP_DAT_DOKLAD
                where id = aIdDoklad);
    
-- smrM 19.06.2020 - aIdCisDatabaze = 500, SEP v KP_REL_PROTISTRANA = 400
--	select id_spolecnost into l_idKtgSpolecnost from db_dsa.KP_Rel_Protistrana where firma_id = aDoid and aIdCisDatabaze = id_databaze ;
    select id_spolecnost into l_idKtgSpolecnost from db_dsa.KP_Rel_Protistrana where firma_id = aDoid and id_databaze = l_id_cisdatabaze_party ;
	
--    db_jt.app.p_log_autonomous ( 'f_getUnifAIXDoid : '||aDoid || ' ' || aDatum || '  ' || aIdCisDatabaze || ' id_doklad ' || aIdDoklad || ' id_cisdatabaze_party ' || l_id_cisdatabaze_party );
    
    l_idKtgSpolecnost := f_getUnifSkupinaIc ( l_idKtgSpolecnost, aDatum );
	
    return ( l_idKtgSpolecnost );

-- smrM 19.06.2020 - do dokladu vlozi info SEP problem    
    exception
        when no_data_found then
-- smrM 12.03.2021 ukladanie sep_id
            db_dsa.p_sep_problem_bilance ( l_id_cisdatabaze_party, aDoid, aIdDoklad );
            
            db_jt.app.p_log_autonomous ( 'f_getUnifAIXDoid not found : '||aDoid || ' ' || aDatum || '  ' || aIdCisDatabaze || ' / ' || l_id_cisdatabaze_party || '  ' || aIdDoklad );
            return -3;
        when value_error then  -- nedali tam numericke SEPID a tak to nejde prevest na cislo
            db_jt.app.p_log_autonomous ( 'f_getUnifAIXDoid value error : '||aDoid || ' ' || aDatum || '  ' || aIdCisDatabaze || ' / ' || l_id_cisdatabaze_party || '  ' || aIdDoklad );
            return -3;

        when others then
            raise_application_error ( -20000, sqlerrm ||  'aIdDB int, aDoid varchar2, aDatum ' || aIdCisDatabaze|| ' / ' || l_id_cisdatabaze_party || '  ' || aDoid || '  ' || aDatum || '  ' || aIdDoklad ); 

    --raise_application_error(-20001,'do_id='||aDoId);    

end;

/*
create or replace function f_getUnifAIXDoid ( aIdDB int, aDoid varchar2, aDatum date ) return int as
    rowSep db_dsa.kp_s_sep%rowtype;
    l_formatIco varchar2(20) := '???????';
begin

    -- AIX mame SEPID v DOID
    select * into rowSep from db_dsa.kp_s_sep ss where ss.sep_id = to_number(aDoid);

    -- radky co jsou oznacene jako ignorovat se ignoruji
    if ( rowSep.flag_ignorovat != '0' ) then
            db_jt.app.p_log_autonomous ( 'f_getUnifAIXDoi nastaveno ignorovat : '||aDoid || ' ' || aDatum || '  ' || aIdDB );
            return -5;
    end if;

--dbms_output.put_line ( 'to_number(aDoid)  ' || to_number(aDoid) );
    if ( rowSep.id_ktgSpolecnost is null and ( rowSep.ico is not null or rowSep.rc is not null )  ) then
        -- zkusim podle ico
--dbms_output.put_line ( 'v if  ' );
-- smrM 29.5.2020 treba formatovat vse
     --   if ( length (rowSep.ico) != 10 ) then
     --       l_formatIco := lpad ( rowSep.ico, 10, '0' );
     --   end if;
--dbms_output.put_line ( 'rowSep.ico  ' || rowSep.ico );
     --   select id into rowSep.id_ktgspolecnost from kp_ktg_spolecnost ss where ss.s_ico = l_formatIco or ss.s_ico = rowSep.ico or ss.s_ico = rowSep.rc;
        select id into rowSep.id_ktgspolecnost from kp_ktg_spolecnost ss where ss.s_ico = db_dsa.f_formatico(  NVL (rowSep.rc,rowSep.ico));

    end if;

    rowSep.id_ktgspolecnost := f_getUnifSkupinaIc ( rowSep.id_ktgspolecnost, aDatum );
    return ( rowSep.id_ktgspolecnost );

    exception
        when too_many_rows then
            db_jt.app.p_log_autonomous ( 'f_getUnifAIXDoi duplicita : '||aDoid || ' ' || aDatum || '  ' || aIdDB );
            return -4;

        when no_data_found then
            db_jt.app.p_log_autonomous ( 'f_getUnifAIXDoi not found : '||aDoid || ' ' || aDatum || '  ' || aIdDB );
            return -3;
        when value_error then  -- nedali tam numericke SEPID a tak to nejde prevest na cislo
            db_jt.app.p_log_autonomous ( 'f_getUnifAIXDoi value error : '||aDoid || ' ' || aDatum || '  ' || aIdDB );
            return -3;

        when others then
            raise_application_error ( -20000, sqlerrm ||  'aIdDB int, aDoid varchar2, aDatum ' || aIdDB || '  ' || aDoid || '  ' || aDatum ); 

    --raise_application_error(-20001,'do_id='||aDoId);
end;
*/

/


PROMPT Completed F_GETUNIFAIXDOID.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETUNIFGROUP.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETUNIFGROUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETUNIFGROUP
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETUNIFGROUP" ( aCo int, aIdSpolecnost int ) return varchar2 as
	cursor cGroup is
		select cust_group_name, cust_group_code, cust_struc_name, cust_struc_code
		from KP_ktg_Spolecnost_Group
		where id_spolecnost = aIdSpolecnost;
	ret varchar2(512) := '';
	carka varchar2(2) := '';
begin
	for cG in cGroup loop
		if ( aCo = 1 ) then
			ret := Substr ( ret || carka || cG.cust_group_code, 1, 512 );
			carka := ', ';
		else
			ret := Substr ( ret || carka || cG.cust_group_name, 1, 512 );
			carka := ', ';
		end if;
	end loop;
	return ret;
end;

/


PROMPT Completed F_GETUNIFGROUP.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETUNIFPROTI.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETUNIFPROTI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETUNIFPROTI
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETUNIFPROTI" ( aVyjimkaProtistrana varchar2, aPoradi varchar2, aIdProti1 number, aIdProti2 number, aIdProti3 number ) return varchar2 as
	ret varchar2(512);
	l_spolecnost int;
	znak varchar2(30);
	l_ico KP_ktg_spolecnost.s_ico%TYPE;
begin

	if ( aVyjimkaProtistrana != '0' ) then
		return ( f_getUnifProti_Pom ( aVyjimkaProtistrana, aIdProti1, aIdProti2, aIdProti3 ) );
	end if;

	l_spolecnost := NVL ( aIdProti1, NVL ( aIdProti2 ,aIdProti3 ) );

	if ( l_spolecnost is null or aPoradi is null ) then
		return ( null );
	end if;

	for i in 1 .. 3 loop

	 znak := substr ( aPoradi, i, 1 );
		ret := f_getUnifProti_Pom ( znak, aIdProti1, aIdProti2, aIdProti3 );
		if ( length ( ret  ) > 0 ) then
			return ( ret );
		end if;

	end loop;

	return ( '' );
/*
	exception
		when others then

		return ( 'xxx ' || length ( f_getUnifProti_Pom ( '1', aIdProti1, aIdProti2, aIdProti3 ) ) ||
		'xxx ' || length ( f_getUnifProti_Pom ( '2', aIdProti1, aIdProti2, aIdProti3 ) ) ||
		'xxx ' || length ( f_getUnifProti_Pom ( '3', aIdProti1, aIdProti2, aIdProti3 ) )
		);
*/
end;

/


PROMPT Completed F_GETUNIFPROTI.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETUNIFPROTIID.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETUNIFPROTIID.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETUNIFPROTIID
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETUNIFPROTIID" ( aVyjimkaProtistrana varchar2, aPoradi varchar2, aIdProti1 number, aIdProti2 number, aIdProti3 number, aIdProti4 number ) return int as
	ret int;
	l_spolecnost int;
	znak varchar2(30);
begin

	if ( aVyjimkaProtistrana != '0' ) then
		return ( f_getUnifProti_PomID ( aVyjimkaProtistrana, aIdProti1, aIdProti2, aIdProti3, aIdProti4, false ) );
	end if;

	l_spolecnost := NVL ( aIdProti1, NVL ( aIdProti2 , NVL ( aIdProti3, aIdProti4 ) ) );

	if ( l_spolecnost is null or aPoradi is null ) then
		return ( null );
	end if;

	for i in 1 .. 4 loop

	 znak := substr ( aPoradi, i, 1 );
		ret := f_getUnifProti_PomID ( znak, aIdProti1, aIdProti2, aIdProti3, aIdProti4, false );
		if ( ret is not null ) then
			return ( ret );
		end if;

	end loop;

	return ( null );
end;

/


PROMPT Completed F_GETUNIFPROTIID.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETUNIFPROTIKTGSPOL.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETUNIFPROTIKTGSPOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETUNIFPROTIKTGSPOL
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETUNIFPROTIKTGSPOL" ( aVyjimkaProtistrana varchar2, aPoradi varchar2, aIdProti1 number, aIdProti2 number, aIdProti3 number, aIdProti4 number, aDatum date ) return varchar2 as
	ret int;
	l_spolecnost int;
begin
	l_spolecnost := f_getUnifProtiID ( aVyjimkaProtistrana, aPoradi, aIdProti1, aIdProti2, aIdProti3, aIdProti4 );
	if ( l_spolecnost is null ) then
		return null;
	end if;

	select Min(id_ktgSpolecnost) into ret
	from KP_Ktg_Spolecnost
	where id = l_spolecnost;

	if ( aDatum >= '1.1.2005' and ret = 5004 ) then
		-- vyjimka pro ASSET
		ret := 5054;
	end if;

	return ( ret );

end;

/


PROMPT Completed F_GETUNIFPROTIKTGSPOL.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETUNIFPROTI_POM.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETUNIFPROTI_POM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETUNIFPROTI_POM
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETUNIFPROTI_POM" ( aPoradi varchar2, aIdProti1 number, aIdProti2 number, aIdProti3 number ) return varchar2 as
	ret varchar2(512);
	l_spolecnost int;
	l_ico KP_ktg_spolecnost.s_ico%TYPE;
begin

	if ( aPoradi = '1' ) then
		l_spolecnost := aIdProti1;
	elsif ( aPoradi = '2' ) then
		l_spolecnost := aIdProti2;
	elsif ( aPoradi = '3' ) then
		l_spolecnost := aIdProti3;
	elsif ( aPoradi = '-' ) then
		return ( null );
	else
		l_spolecnost := -9999;
	end if;

	select substr ( 'id:' || to_char(id) || ' ico:' || s_ico || '  ' || s_nazev , 1, 128 ), s_ico into ret, l_ico
	from KP_ktg_spolecnost where id = l_spolecnost;

	return ( ret );

	exception
		when NO_DATA_FOUND then
			return ( null );

end;

/


PROMPT Completed F_GETUNIFPROTI_POM.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETUNIFPROTI_POMID.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETUNIFPROTI_POMID.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETUNIFPROTI_POMID
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETUNIFPROTI_POMID" ( aPoradi varchar2, aIdProti1 number, aIdProti2 number, aIdProti3 number, aIdProti4 number, aKontrola boolean default true ) return int as
	l_id int;
	l_spolecnost int;
begin

	if ( aPoradi = '1' ) then
		l_spolecnost := aIdProti1;
	elsif ( aPoradi = '2' ) then
		l_spolecnost := aIdProti2;
	elsif ( aPoradi = '3' ) then
		l_spolecnost := aIdProti3;
	elsif ( aPoradi = '4' ) then
		l_spolecnost := aIdProti4;
	elsif ( aPoradi = '-' ) then
		return ( null );
	else
		l_spolecnost := -9999;
		return (null);
	end if;

	if ( not aKontrola ) then 
   	return ( l_spolecnost );
   end if; 

	select id into l_id
	from KP_ktg_spolecnost
	where
		id = l_spolecnost and
		id >=-1; -- chci vyradit zarazky typu -2 chybne ICO

	return ( l_id );

	exception
		when NO_DATA_FOUND then
			return ( null );

end;

/


PROMPT Completed F_GETUNIFPROTI_POMID.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETUNIFQUAESTNUMBER0.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETUNIFQUAESTNUMBER0.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETUNIFQUAESTNUMBER0
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETUNIFQUAESTNUMBER0" ( aIdCisDatabaze int, aNumber0 varchar2, aDatum date ) return int as
	l_idKtgSpolecnost int;
begin
	select id_spolecnost into l_idKtgSpolecnost from db_dsa.KP_Rel_Protistrana where s_number0 = aNumber0 and aIdCisDatabaze = id_databaze ;
	l_idKtgSpolecnost := f_getUnifSkupinaIc ( l_idKtgSpolecnost, aDatum );
	return ( l_idKtgSpolecnost );
end;

/


PROMPT Completed F_GETUNIFQUAESTNUMBER0.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETUNIFQUAESTTOPAS.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETUNIFQUAESTTOPAS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETUNIFQUAESTTOPAS
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETUNIFQUAESTTOPAS" ( aIdSecurDB int, aTopasProtistrana varchar2, aDatum date ) return int as
	l_idKtgSpolecnost int;
begin
	select id_spolecnost into l_idKtgSpolecnost from db_dsa.KP_Rel_Protistrana where  doid = aTopasProtistrana and aIdSecurDB = id_databaze ;
	l_idKtgSpolecnost := f_getUnifSkupinaIc ( l_idKtgSpolecnost, aDatum );
	return ( l_idKtgSpolecnost );
end;

/


PROMPT Completed F_GETUNIFQUAESTTOPAS.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETUNIFQUAESTTOPASKID.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETUNIFQUAESTTOPASKID.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETUNIFQUAESTTOPASKID
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETUNIFQUAESTTOPASKID" ( aIdSecurDB int, aTopasKid varchar2, aDatum date ) return int as
	l_idKtgSpolecnost int;
begin
	if ( aTopasKid is null ) then
		return null;
	end if;
	select id_spolecnost into l_idKtgSpolecnost from db_dsa.KP_Rel_Protistrana where  kid = aTopasKid and aIdSecurDB = id_databaze ;
	l_idKtgSpolecnost := f_getUnifSkupinaIc ( l_idKtgSpolecnost, aDatum );
	return ( l_idKtgSpolecnost );
end;

/


PROMPT Completed F_GETUNIFQUAESTTOPASKID.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETUNIFSKUPINAIC.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETUNIFSKUPINAIC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETUNIFSKUPINAIC
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETUNIFSKUPINAIC" ( aIdKtgSpolecnost int, aDatum date ) return int as
	l_skupinaIc char(1);
	l_idKtgSpolecnost int;
begin
	select c_skupinaIc 
	into l_skupinaIc 
	from kp_ktg_spolecnost 
	where id = aIdKtgSpolecnost;
	
	if(l_skupinaIc = '1') then
		begin
			select id_ktgSpolecnost
			into l_idKtgSpolecnost
			from kp_rel_spolecnostSkupinaIc
			where id_ktgSpolecnostClen = aIdKtgSpolecnost
			  and aDatum between dt_platnostOd and dt_platnostDo
			  and rownum = 1;  
		exception when NO_DATA_FOUND then
			l_idKtgSpolecnost := aIdKtgSpolecnost;
		end;
	else
		l_idKtgSpolecnost := aIdKtgSpolecnost;
	end if;
	
	return ( l_idKtgSpolecnost );
end;

/


PROMPT Completed F_GETUNIFSKUPINAIC.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETUNIFSPINBANKA.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETUNIFSPINBANKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETUNIFSPINBANKA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETUNIFSPINBANKA" ( aBankaId int, aDatum date ) return int as
	l_idKtgSpolecnost int;
begin
	select id_spolecnost into l_idKtgSpolecnost from db_dsa.KP_Rel_Protistrana where banka_id = aBankaId and 200 = id_databaze ;
	l_idKtgSpolecnost := f_getUnifSkupinaIc ( l_idKtgSpolecnost, aDatum );
	return ( l_idKtgSpolecnost );
end;

/


PROMPT Completed F_GETUNIFSPINBANKA.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETUNIFSPINEO.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETUNIFSPINEO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETUNIFSPINEO
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETUNIFSPINEO" ( aEOId int, aDatum date ) return int as
	l_idKtgSpolecnost int;
begin
	select id_spolecnost into l_idKtgSpolecnost from db_dsa.KP_Rel_Protistrana where eo_id = aEOId and 200 = id_databaze ;
	l_idKtgSpolecnost := f_getUnifSkupinaIc ( l_idKtgSpolecnost, aDatum );
	return ( l_idKtgSpolecnost );
end;

/


PROMPT Completed F_GETUNIFSPINEO.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETUNIFSPINFIRMA.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETUNIFSPINFIRMA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETUNIFSPINFIRMA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETUNIFSPINFIRMA" ( aFirmaId int, aDatum date ) return int as
	l_idKtgSpolecnost int;
begin
	select id_spolecnost into l_idKtgSpolecnost from db_dsa.KP_Rel_Protistrana where firma_id = aFirmaId and 200 = id_databaze ;
	l_idKtgSpolecnost := f_getUnifSkupinaIc ( l_idKtgSpolecnost, aDatum );
	return ( l_idKtgSpolecnost );
end;

/


PROMPT Completed F_GETUNIFSPINFIRMA.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETUNIFTOPASDOID.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETUNIFTOPASDOID.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETUNIFTOPASDOID
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETUNIFTOPASDOID" ( aIdDB int, aDoid varchar2, aDatum date ) return int as
	l_idKtgSpolecnost int;
begin
	select id_spolecnost into l_idKtgSpolecnost from db_dsa.KP_Rel_Protistrana where doid = aDoid and aIdDB = id_databaze ;
	l_idKtgSpolecnost := f_getUnifSkupinaIc ( l_idKtgSpolecnost, aDatum );
	return ( l_idKtgSpolecnost );
	
	exception when no_data_found then return null;
	  --raise_application_error(-20001,'do_id='||aDoId);
end;

/


PROMPT Completed F_GETUNIFTOPASDOID.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETUNIFTOPASEMITENT.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETUNIFTOPASEMITENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETUNIFTOPASEMITENT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETUNIFTOPASEMITENT" ( aIdDB int, aEmitentID int, aZakazka varchar2, aDatum date ) return int as
	l_idKtgSpolecnost int;
	l_pocet int;
	s_predpona1 char(4) := substr ( aZakazka, 1, 4 );
	s_predpona2 char(2) := substr ( aZakazka, 1, 2 );
	s_whereICO varchar2(20);
begin

	select id_spolecnost into l_idKtgSpolecnost
	from db_dsa.KP_Rel_Protistrana
	where eid = aEmitentID and aIdDB = id_databaze ;

	return ( l_idKtgSpolecnost );

	exception when no_data_Found then
		if ( ( l_idKtgSpolecnost is null ) and ( aZakazka is not null ) ) then
			-- v zakazce muze byt schovane IC/RC
			if ( s_predpona1 in ( 'POHL', 'GARA' ) ) then
				s_whereICO := substr ( aZakazka, 5, 8 );
			elsif ( s_predpona2 in ( 'PO', 'GA' ) ) then
				s_whereICO := substr ( aZakazka, 3, 10 );
			else
			   s_whereICO := f_getSubstingOnlyNumber ( aZakazka, 12 ); 
				select count(*) into l_pocet
				from KP_ktg_FinancniInvestice
				where s_isin = s_whereICO;
				if ( l_pocet = 1 ) then
					select id_ktgSpolecnost into l_idKtgSpolecnost
					from KP_ktg_FinancniInvestice
					where s_isin = s_whereICO;

					return ( l_idKtgSpolecnost );
				else
					-- pokusim se to najit pres CP z databaze Asset
					select eid into l_pocet from sysadm.cp@topasset c where c.ISIN = s_whereICO;
--					select ico into s_whereICO from sysadm.emitenti@topasset e where e.eid = l_pocet;
					select ico into s_whereICO from sysadm.emitenti@topasset e where e.eid = l_pocet;
				end if;

			end if;

			s_whereICO := lpad ( s_whereICO, 10, '0' );

			select id into l_idKtgSpolecnost
			from kp_ktg_spolecnost
			where s_ico = s_whereICO;

		end if;

	l_idKtgSpolecnost := f_getUnifSkupinaIc ( l_idKtgSpolecnost, aDatum );
	return ( l_idKtgSpolecnost );
end;

/


PROMPT Completed F_GETUNIFTOPASEMITENT.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETUNIFTOPASINSTIT.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETUNIFTOPASINSTIT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETUNIFTOPASINSTIT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETUNIFTOPASINSTIT" ( aIdDB int, aInst varchar2, aDatum date ) return int as
	l_idKtgSpolecnost int;
begin
	select Max(id_spolecnost) into l_idKtgSpolecnost from db_dsa.KP_Rel_Protistrana where platinst = aInst and aIdDB = id_databaze ;
	if ( l_idKtgSpolecnost is null ) then
		-- zkusim to jeste podle dodavatel odberatel
		return ( f_getUnifTopasDoid ( aIdDB, aInst, aDatum ) );
	end if;
	l_idKtgSpolecnost := f_getUnifSkupinaIc ( l_idKtgSpolecnost, aDatum );
	return ( l_idKtgSpolecnost );
end;

/


PROMPT Completed F_GETUNIFTOPASINSTIT.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETUNIFTOPASKID.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETUNIFTOPASKID.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETUNIFTOPASKID
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETUNIFTOPASKID" ( aIdDB int, aKid varchar2, aDatum date ) return int as
	l_idKtgSpolecnost int;
begin
	select id_spolecnost into l_idKtgSpolecnost from db_dsa.KP_Rel_Protistrana where kid = aKid and aIdDB = id_databaze ;
	l_idKtgSpolecnost := f_getUnifSkupinaIc ( l_idKtgSpolecnost, aDatum );
	return ( l_idKtgSpolecnost );
exception when others then
	app.p_log ( SQLERRM );
   app.p_log ( 'aIdDB  ' || aIdDB || '  ' || aKid || '   ' || aDatum );   
   raise;
end;

/


PROMPT Completed F_GETUNIFTOPASKID.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETUROVENSCHVALOVANIMIS.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETUROVENSCHVALOVANIMIS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETUROVENSCHVALOVANIMIS
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETUROVENSCHVALOVANIMIS" ( aIdTypTransakce int, aUroven int, aIdObjekt int ) return number as
	l_castka number(18,2);
begin
	begin
		if( aUroven = 2 ) then
			select nd_urovenSchvalovani
			into l_castka
			from kp_rel_misUrovenSchvalovani
			where id_cisTypTransakce = aIdTypTransakce
			  and id_ktgUcetniSpolecnost = aIdObjekt
			  and nl_uroven = aUroven;
		elsif( aUroven = 3 ) then
			select nd_urovenSchvalovani
			into l_castka
			from kp_rel_misUrovenSchvalovani
			where id_cisTypTransakce = aIdTypTransakce
			  and id_ktgUcetniSpolecnost = aIdObjekt
			  and nl_uroven = aUroven;
		elsif( aUroven = 1 ) then
			select nd_urovenSchvalovani
			into l_castka
			from kp_rel_misUrovenSchvalovani
			where id_cisTypTransakce = aIdTypTransakce
			  and id_ktgProjekt = aIdObjekt
			  and nl_uroven = aUroven;
		end if;
	exception when no_data_found then
		l_castka := 0;
	end;
	
	return l_castka;
end; 

/


PROMPT Completed F_GETUROVENSCHVALOVANIMIS.sql
PROMPT


-- ============================================================================
-- Deploy: F_GETZAKLADJMENI.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GETZAKLADJMENI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GETZAKLADJMENI
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GETZAKLADJMENI" ( aIdSpolecnost int, aDatum date ) return number as
	ret number (18,2);
begin
	select sum(nd_zakladniJmeni) into ret
	from
		kp_ktg_financniInvestice i,
		kp_ktg_finInvesticeEmise e
	where
		i.id = e.id_ktgFinancniInvestice and
		aDatum between e.dt_platnostOd and e.dt_platnostDo and
		i.id_ktgSpolecnost = aIdSpolecnost;

	return ( ret );

end;

/


PROMPT Completed F_GETZAKLADJMENI.sql
PROMPT


-- ============================================================================
-- Deploy: F_GET_PROTISTRANA_RKC.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GET_PROTISTRANA_RKC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GET_PROTISTRANA_RKC
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GET_PROTISTRANA_RKC" ( aID_UNIFPROTI IN NUMBER ) RETURN NUMBER AS 
-- overuje ci je protistrana v RKC a FULL
--return  c.id_cissubtypclenstvi
--          1   - full
--          2   - pomerna
--          3   - equity
ret NUMBER := -1; 

BEGIN

SELECT c.id_cissubtypclenstvi into ret
        FROM    db_jt.kp_rel_subkonsolidaceclen c, 
                db_jt.kp_ktg_subkonsolidace s, 
                db_jt.KP_KTG_SPOLECNOST spol
        WHERE 
                    spol.id = aID_UNIFPROTI
                AND spol.ID_KTGSPOLECNOST = c.id_ktgucetnispolecnost    --ID UCETNI SPOLECNST
                AND s.id_ktgucetnispolecnost = c.id_ktgsubkonsolidace 
                AND c.c_clen = '1' 
                AND s.id_ktgucetniskupina = 1 
                AND s.ID_KTGUCETNISPOLECNOST  = 10344                   --RKC spravovana konsolidaci
            ;

return ret;

exception when others then
  --app.p_log_autonomous('EXEPTION WO: F_IS_PROTISTRANA_RKC : '||aID_UNIFPROTI);
  --raise;
  return(-1);
END F_GET_PROTISTRANA_RKC;

/


PROMPT Completed F_GET_PROTISTRANA_RKC.sql
PROMPT


-- ============================================================================
-- Deploy: F_GET_UARKC_DEFAULTFLAG.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_GET_UARKC_DEFAULTFLAG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_GET_UARKC_DEFAULTFLAG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_GET_UARKC_DEFAULTFLAG" ( v_default_flag VARCHAR2
                                                   , v_spolecnost   INT )
RETURN VARCHAR2 AS

/* =======================================

Pouziti:    unifikace DEFAULT FLAG pre UA RKC
Popis:      pokud vysledny DEFAULT FLAG je X nebo NULL, kontroluje sa zda nizsia spol nedodala Y alebo N
HD:         KIS-35
Vytvoreno:  04.04.2025
Vytvoril:   Smrecek
Update:

===========================================*/

  l_all_dflags VARCHAR2(10);
  l_pozice_Y   INT;
  l_pozice_N   INT;

BEGIN
  SELECT NVL(c_jtbcr_default_flag,'X') ||
         NVL(c_jtbsr_default_flag,'X') ||
         NVL(c_jtbge_default_flag,'X') ||
         NVL(c_aft_default_flag,'X') ||
         NVL(c_vaba_default_flag,'X') ||
         NVL(c_poba_default_flag ,'X')
    INTO l_all_dflags
    FROM import_pozice_ua_rkc_atributy
   WHERE id_spolecnost = v_spolecnost;


  IF v_default_flag IN ('Y','N')
    THEN
      RETURN(v_default_flag);
  END IF;

  SELECT INSTR(l_all_dflags,'Y'),
         INSTR(l_all_dflags,'N')
    INTO l_pozice_Y, l_pozice_N
    FROM dual;

  IF l_pozice_Y = 0 AND l_pozice_N = 0
    THEN
      RETURN(v_default_flag);
  ELSIF l_pozice_Y > 0 AND l_pozice_N = 0
    THEN
      RETURN('Y');
  ELSIF l_pozice_Y = 0 AND l_pozice_N > 0
    THEN
      RETURN('N');
  END IF;

  IF l_pozice_Y < l_pozice_N
    THEN
      RETURN('Y');
  ELSE
    RETURN('N');
  END IF;

END;

/


PROMPT Completed F_GET_UARKC_DEFAULTFLAG.sql
PROMPT


-- ============================================================================
-- Deploy: F_ISBANK.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_ISBANK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_ISBANK
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_ISBANK" ( aIdKtgSpolecnost number ) return int is
ret number := 1;  -- -1 - nemame info 
             -- 0 BANKA   ( RKC )
             -- 1 NEBANKA ( RKC )
begin

--esc return ret ; --esc
	if ( aIdKtgSpolecnost is null ) then
   	return -1;
	end if;      

--app.p_log_autonomous('f_isBank: '||aIdKtgSpolecnost);

begin 

 select   0  into ret
  from 
       kp_ktg_spolecnost ks
  where   
      ks.id      =    aIdKtgSpolecnost and
      ( nvl(ks.s_kodkategorieprotistrana_2, s_kodkategorieprotistrana) like ('7%') 
            or nvl(ks.s_kodkategorieprotistrana_2, s_kodkategorieprotistrana)like ('860%') 
          )
      and 
      nvl(ks.s_kodkategorieprotistrana_2, s_kodkategorieprotistrana) not in ('760','765','753');

--app.p_log_autonomous('f_isBank/ OK : '||aIdKtgSpolecnost||' ret='||nvl(ret,0));

exception
  when NO_DATA_FOUND  then 
        app.p_log_autonomous('f_isBank/ NEBANKA : '||aIdKtgSpolecnost||' ret='||nvl(ret,0));  
        return 1;
end; 

return ret;

exception
  when others   
  then 
        app.p_log_autonomous('f_isBank/ CHYBA : '|| SQLERRM|| ' - '||aIdKtgSpolecnost||' ret='||nvl(ret,0));  
        return -1;
end;

/*
select   distinct ct.s_kod, ct.s_popis, KP_def_kategorie2typ.*
from KP_def_kategorie2typ , kp_cis_typSubject ct
where ct.id = id_cisTypSubject
and s_kodkategorieprotistrana like ('7%') 
    or s_kodkategorieprotistrana like ('860%') and s_kodkategorieprotistrana  not in ('760','765','753')
*/

/


PROMPT Completed F_ISBANK.sql
PROMPT


-- ============================================================================
-- Deploy: F_ISBANKA.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_ISBANKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_ISBANKA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_ISBANKA" ( aIdKtgSpolecnost int   ) return boolean as
--ret number := 1;  -- -1 - nemame info +> NEBANKA
             -- 0 BANKA   ( RKC )
             -- 1 NEBANKA ( RKC )
o_ret number;
begin
o_ret := 1;   -- 1 NEBANKA ( RKC )

	if ( aIdKtgSpolecnost is null ) then
   	o_ret := -1;
	end if;      

app.p_log_autonomous('f_isBank: '||aIdKtgSpolecnost);

begin 

 select   0  into o_ret
  from        kp_ktg_spolecnost ks
  where   
      ks.id      =    aIdKtgSpolecnost and
      ( nvl(ks.s_kodkategorieprotistrana_2, s_kodkategorieprotistrana) like ('7%') 
            or nvl(ks.s_kodkategorieprotistrana_2, s_kodkategorieprotistrana)like ('860%') 
          )
      and 
      nvl(ks.s_kodkategorieprotistrana_2, s_kodkategorieprotistrana) not in ('760','765','753');

--app.p_log_autonomous('p_isBank/ OK : '||aIdKtgSpolecnost||' ret='||nvl(o_ret,0));

exception
  when NO_DATA_FOUND  then 
        app.p_log_autonomous('p_isBank/ NEBANKA : '||aIdKtgSpolecnost||' o_ret='||nvl(o_ret,0));  
        return false;

end;

if ( o_ret = 0)
  then
        return true;
  else 
        return false;
end if;

exception
  when others   
  then 
        app.p_log_autonomous('f_isBank/ CHYBA / NEBANKA : '|| SQLERRM|| ' - '||aIdKtgSpolecnost||' ret='||nvl(o_ret,0));  
        return false;
end;

/*
grant execute on db_jt.p_isBank to R_APPSERVER
*/
/*
select   distinct ct.s_kod, ct.s_popis, KP_def_kategorie2typ.*
from KP_def_kategorie2typ , kp_cis_typSubject ct
where ct.id = id_cisTypSubject
and s_kodkategorieprotistrana like ('7%') 
    or s_kodkategorieprotistrana like ('860%') and s_kodkategorieprotistrana  not in ('760','765','753')
*/

/


PROMPT Completed F_ISBANKA.sql
PROMPT


-- ============================================================================
-- Deploy: F_ISSPOLECNOSTFEIS_DOKLAD.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_ISSPOLECNOSTFEIS_DOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_ISSPOLECNOSTFEIS_DOKLAD
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_ISSPOLECNOSTFEIS_DOKLAD" ( aIdDoklad int) return boolean  is
/*   je FEIS - 1 / true
 neni FEIS - 0 / false
*/
ret  int :=0 ;
begin
     --app.p_log_autonomous('p_isSpolecnostFEIS_Doklad START : '|| aIdDoklad );
begin 

	select 1 into ret
  	from KP_Dat_doklad d, 
         KP_ktg_ucetniSpolecnost s,
         KP_CIS_databaze db
	where
		  db.s_proquestor is null     and
      db.id = s.id_cisdatabaze        and
      d.id_ktgUcetniSpolecnost = s.id and
		  d.id = aIdDoklad;
  
exception  
  when NO_DATA_FOUND then
              app.p_log_autonomous('f_isSpolecnostFEIS_Doklad NO_DATA_FOUND : '|| aIdDoklad );
              return false;
end;

--app.p_log_autonomous('f_isSpolecnostFEIS_Doklad '|| aIdDoklad ||' / ret= '||ret);

if (ret=1) then
      return true ;
else
      return false;
end if;


exception
      when others then
              app.p_log_autonomous('f_isSpolecnostFEIS_Doklad ERROR : '||  SQLERRM ||''|| aIdDoklad );
              return false;
end ;

/


PROMPT Completed F_ISSPOLECNOSTFEIS_DOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: F_IS_INTERNI_EQUITY.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_IS_INTERNI_EQUITY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_IS_INTERNI_EQUITY
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_IS_INTERNI_EQUITY" ( aIdDoklad int, aDokladIdKtgUcetniSpolecnost int, aIDcisUcetUNif int, aIdKtgUcetniSpolecnost int ) return int as
	ret int;
begin
--
-- 1 - true
-- 0 - false
--
/*esc  k dokladu overuje ci je to interna ucetni spolecnost konsolidovana equity metodou*/
/*06.01.09 - zohladnuje aj trvanie platnosti metody*/
	if ( aIdKtgUcetniSpolecnost is null ) then
           	return 0 ;
	end if;

		select count(*) 
		into ret 
		from db_jt.KP_REL_SUBKONSOLIDACECLEN subc  
                    ,db_jt.kp_dat_doklad d
		where   d.id = aIdDoklad
                        and d.DT_DATUM >= subc.DT_CLENSTVIOD 
                        and d.DT_DATUM <= subc.DT_CLENSTVIDO
                        and  subc.ID_CISSUBTYPCLENSTVI = 3					 	   
			and  subc.ID_KTGUCETNISKUPINA = 8									
			and  subc.ID_KTGUCETNISPOLECNOST = aIdKtgUcetniSpolecnost;	-- spolocnost To...

		if ret > 0 then 
			return 1; 
		end if;	 

--	END IF;

	return 0;	
end;

/


PROMPT Completed F_IS_INTERNI_EQUITY.sql
PROMPT


-- ============================================================================
-- Deploy: F_IS_PROTI_BANKA.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_IS_PROTI_BANKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_IS_PROTI_BANKA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_IS_PROTI_BANKA" ( aIdDoklad int, aIDUNIFPROTI int) return varchar2  is
/*   je banka - 1 / true
 neni banka - 0 / false
*/
ret  int :=0 ;
begin
     --app.p_log_autonomous('F_IS_PROTI_BANKA START : '|| aIdDoklad );

	if (  F_ISSPOLECNOSTFEIS_DOKLAD ( aIdDoklad) )
  then
                if ( f_isBanka(aIDUNIFPROTI) )          
                   then  return 'Y';
                else 
                    return 'N';
                end if;
  end if;
--app.p_log_autonomous('F_IS_PROTI_BANKA '|| aIdDoklad ||' / ret= '||ret);
Return '';

exception
      when others then
              app.p_log_autonomous('F_IS_PROTI_BANKA ERROR : '||  SQLERRM ||''|| aIdDoklad );
              return 'N';
end ;

/


PROMPT Completed F_IS_PROTI_BANKA.sql
PROMPT


-- ============================================================================
-- Deploy: F_JEPROTISTRANACLENSKUPINY.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_JEPROTISTRANACLENSKUPINY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_JEPROTISTRANACLENSKUPINY
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_JEPROTISTRANACLENSKUPINY" (aIdProti int, aIdSkup int, aDatum date) return int is
  cnt int;
begin
  select count(*)
  into cnt
  from kp_ktg_spolecnost s,
       kp_rel_subkonsolidaceClen rel,
       kp_ktg_subkonsolidace sub
  where s.ID_KTGSPOLECNOST = rel.ID_KTGUCETNISPOLECNOST
    and rel.ID_KTGSUBKONSOLIDACE = sub.ID_KTGUCETNISPOLECNOST
    and s.ID = aIdProti
    and sub.ID_KTGUCETNISKUPINA = aIdSkup
    and rel.C_CLEN = '1'
    AND (aDatum >= REL.DT_clenstviOD OR REL.DT_clenstviOD IS NULL)
    AND (aDatum <= REL.DT_clenstviDO OR REL.DT_clenstviDO IS NULL)
    AND REL.ID_CISSUBTYPCLENSTVI <> 3;

  if(cnt>0) then return 1; end if;

  return 0;
end;

/


PROMPT Completed F_JEPROTISTRANACLENSKUPINY.sql
PROMPT


-- ============================================================================
-- Deploy: F_JESPOLECNOSTCLENKONSOLIDACE.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_JESPOLECNOSTCLENKONSOLIDACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_JESPOLECNOSTCLENKONSOLIDACE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_JESPOLECNOSTCLENKONSOLIDACE" (aIdSpol int, aIdKons int, aDatum date) return int is
  PRAGMA AUTONOMOUS_TRANSACTION;
  retVal int := 0;
begin
  for r in (SELECT REL.ID_KTGUCETNISPOLECNOST, S.C_EXTSYSTEM
	  	    FROM KP_REL_SUBKONSOLIDACECLEN REL,
				 KP_KTG_UCETNISPOLECNOST S
			WHERE REL.ID_KTGSUBKONSOLIDACE = aIdKons
	  		  AND REL.C_CLEN = '1'
   		   	  AND (aDatum >= REL.DT_clenstviOD OR REL.DT_clenstviOD IS NULL)
      		  AND (aDatum <= REL.DT_clenstviDO OR REL.DT_clenstviDO IS NULL)
	  		  AND REL.ID_CISSUBTYPCLENSTVI <> 3
			  AND REL.ID_KTGUCETNISPOLECNOST = S.ID) loop

	if(r.ID_KTGUCETNISPOLECNOST = aIdSpol) then
		retVal := 1;
		exit;
	elsif(r.C_EXTSYSTEM = 'K') then
		retVal := f_jeSpolecnostClenKonsolidace(aIdSpol, r.ID_KTGUCETNISPOLECNOST, aDatum);
		exit when retVal = 1;
	end if;

  end loop;

  return retVal;
end;

/


PROMPT Completed F_JESPOLECNOSTCLENKONSOLIDACE.sql
PROMPT


-- ============================================================================
-- Deploy: F_JESPOLECNOSTCLENKONSVAZBY.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_JESPOLECNOSTCLENKONSVAZBY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_JESPOLECNOSTCLENKONSVAZBY
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_JESPOLECNOSTCLENKONSVAZBY" (aIdSpol int, aIdKons int, aIdSubkons int, aDatum date, aLevel int := 0) return int is
  PRAGMA AUTONOMOUS_TRANSACTION;
  retVal int := 0;
  l_idKons int;
  cnt int;
begin
	if(aLevel=0) then
	  	retVal := f_jeSpolecnostClenKonsolidace(aIdSpol, aIdSubkons, aDatum);
		if(retVal>0) then
			return retVal;
		end if;
	end if;

	if(aIdKons=aIdSubkons) then
		return 0;
	end if;

  	SELECT count(*)
	INTO cnt
	FROM KP_REL_SUBKONSOLIDACECLEN REL
	WHERE REL.ID_KTGUCETNISPOLECNOST = aIdSubkons
	  AND REL.C_CLEN = '1'
   	  AND (aDatum >= REL.DT_clenstviOD OR REL.DT_clenstviOD IS NULL)
	  AND (aDatum <= REL.DT_clenstviDO OR REL.DT_clenstviDO IS NULL)
	  AND REL.ID_CISSUBTYPCLENSTVI <> 3;

	if(cnt=1) then
	  	SELECT REL.ID_KTGSUBKONSOLIDACE
		INTO l_idKons
		FROM KP_REL_SUBKONSOLIDACECLEN REL
		WHERE REL.ID_KTGUCETNISPOLECNOST = aIdSubkons
		  AND REL.C_CLEN = '1'
	   	  AND (aDatum >= REL.DT_clenstviOD OR REL.DT_clenstviOD IS NULL)
		  AND (aDatum <= REL.DT_clenstviDO OR REL.DT_clenstviDO IS NULL)
		  AND REL.ID_CISSUBTYPCLENSTVI <> 3;

		for r in (SELECT REL.ID_KTGUCETNISPOLECNOST
		  	      FROM KP_REL_SUBKONSOLIDACECLEN REL
				  WHERE REL.ID_KTGSUBKONSOLIDACE = l_idKons
			  		AND REL.C_CLEN = '1'
		   		   	AND (aDatum >= REL.DT_clenstviOD OR REL.DT_clenstviOD IS NULL)
		      		AND (aDatum <= REL.DT_clenstviDO OR REL.DT_clenstviDO IS NULL)
			  		AND REL.ID_CISSUBTYPCLENSTVI <> 3) loop
			if(r.ID_KTGUCETNISPOLECNOST = aIdSpol) then
				retVal := 1;
				exit;
			end if;
		end loop;
		if(retVal=0) then
			retVal := f_jeSpolecnostClenKonsVazby(aIdSpol, aIdKons, l_idKons, aDatum, aLevel+1);
			return retVal;
		end if;

	end if;

  return retVal;
end;

/


PROMPT Completed F_JESPOLECNOSTCLENKONSVAZBY.sql
PROMPT


-- ============================================================================
-- Deploy: F_JESPOLECNOSTCLENSKUPINY.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_JESPOLECNOSTCLENSKUPINY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_JESPOLECNOSTCLENSKUPINY
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_JESPOLECNOSTCLENSKUPINY" (aIdSpol int, aIdSkup int, aDatum date) return int is
  cnt int;
begin
  select count(*)
  into cnt
  from kp_rel_subkonsolidaceClen rel,
       kp_ktg_subkonsolidace sub
  where rel.ID_KTGSUBKONSOLIDACE = sub.ID_KTGUCETNISPOLECNOST
    and rel.ID_KTGUCETNISPOLECNOST = aIdSpol
    and sub.ID_KTGUCETNISKUPINA = aIdSkup
    and rel.C_CLEN = '1'
    AND ((aDatum >= REL.DT_clenstviOD OR REL.DT_clenstviOD IS NULL)
    AND (aDatum <= REL.DT_clenstviDO OR REL.DT_clenstviDO IS NULL)
	 OR aDatum IS NULL);
--    AND REL.ID_CISSUBTYPCLENSTVI <> 3;

  if(cnt>0) then return 1; end if;

  return 0;
end;

/


PROMPT Completed F_JESPOLECNOSTCLENSKUPINY.sql
PROMPT


-- ============================================================================
-- Deploy: F_MAJETEKUCASTKONTROLA.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_MAJETEKUCASTKONTROLA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_MAJETEKUCASTKONTROLA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_MAJETEKUCASTKONTROLA" (id_doklad int) return varchar2 is
  txt varchar2(2048);
begin
  db_jt.kap_prim.p_dokladMajetekUcastKontrola (id_doklad,txt);
  return txt;
end;

/


PROMPT Completed F_MAJETEKUCASTKONTROLA.sql
PROMPT


-- ============================================================================
-- Deploy: F_NEXTIDUCSPOL.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_NEXTIDUCSPOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_NEXTIDUCSPOL
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_NEXTIDUCSPOL" (p_extSystem varchar2) return int as
  l_idSpol int;
  l_cnt int;
begin
  select max(id)+1
  into l_idSpol
  from db_jt.kp_ktg_ucetnispolecnost
  where id<9999
    and C_EXTSYSTEM = p_extSystem;
  loop
    select count(*) cnt into l_cnt from db_jt.kp_ktg_ucetnispolecnost where id = l_idSpol;
	dbms_output.put_line(l_idSpol || '-' || l_cnt);
    exit when l_cnt<1;
	l_idSpol := l_idSpol+1;
  end loop;
  return l_idSpol;
end;

/


PROMPT Completed F_NEXTIDUCSPOL.sql
PROMPT


-- ============================================================================
-- Deploy: F_STRANY_V_S1000.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_STRANY_V_S1000.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_STRANY_V_S1000
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_STRANY_V_S1000" ( aID_DOKLAD IN NUMBER, aID_UNIFPROTI IN NUMBER ) RETURN NUMBER AS 
ret NUMBER; 
ret2 NUMBER;
ret3 number;
BEGIN

select COUNT(*) as x into ret	
  from KP_DAT_DOKLAD D,
      KP_KTG_SPOLECNOST KS,
      KP_KTG_SPOLECNOST_GROUP SG
	where
  d.id = aID_DOKLAD
  AND D.ID_KTGUCETNISPOLECNOST  = ks.id_ktgspolecnost
  AND ks.ID            = sg.id_spolecnost(+)
  AND d.dt_datum BETWEEN sg.dt_platnostod AND sg.dt_platnostdo
  and 
  SG.CUST_GROUP_CODE = 'S1000';
  
  
  select COUNT(*) into ret2
  from
  KP_DAT_DOKLAD D,
  KP_KTG_SPOLECNOST KS,
  KP_KTG_SPOLECNOST_GROUP SG
  where
   d.id = aID_DOKLAD
   and
   aID_UNIFPROTI   = ks.ID(+)
    AND ks.ID            = sg.id_spolecnost(+)
    AND d.dt_datum BETWEEN sg.dt_platnostod AND sg.dt_platnostdo
    and CUST_GROUP_CODE = 'S1000';
    
  IF (ret>0 and ret2>0) then ret3 := 1; else ret3:= 0; end if;  
 	return ( ret3 );
exception when others then
  app.p_log_autonomous('EXEPTION WO: F_TEST_OL_RKC : '||aID_DOKLAD);
  raise;
  --return('');
END F_STRANY_V_S1000;

/


PROMPT Completed F_STRANY_V_S1000.sql
PROMPT


-- ============================================================================
-- Deploy: F_TESTDOKLADIDZAMCENO.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_TESTDOKLADIDZAMCENO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_TESTDOKLADIDZAMCENO
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_TESTDOKLADIDZAMCENO" ( aIdDoklad int, aKrok int, aTypeUser int) return date as
	pom int;
	ret date;
begin
  if(aTypeUser is null) then
	select count(*), Max(dt_timestamp) into pom, ret
	from KP_dat_dokladZamek
	where id_doklad = aIdDoklad and nl_krok >= aKrok;
  else
	select count(*), Max(dt_timestamp) into pom, ret
	from KP_dat_dokladZamek
	where id_doklad = aIdDoklad and nl_krok >= aKrok and id_typeUser = aTypeUser;
  end if;
	if ( pom > 0 ) then
		-- tak tohle je uz zamceno
		return ( ret );
	end if;
	return (null);
end;

/


PROMPT Completed F_TESTDOKLADIDZAMCENO.sql
PROMPT


-- ============================================================================
-- Deploy: F_TESTDOKLADZAMCENO.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_TESTDOKLADZAMCENO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_TESTDOKLADZAMCENO
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_TESTDOKLADZAMCENO" ( aIdKtgUcetniSpolecnost int, aDatum date, aKrok int ) return date as
	pomIdDoklad int;
	pomIdDokladIfrs int;
	pom int;
	ret date;
begin
    if(aKrok = 2) then
        pomIdDoklad := f_getDokladKrok ( aIdKtgUcetniSpolecnost, aDatum, 1 );
		pomIdDokladIfrs := f_getDokladKrok ( aIdKtgUcetniSpolecnost, aDatum, 2 );
	else
        pomIdDoklad := f_getDokladKrok ( aIdKtgUcetniSpolecnost, aDatum, aKrok );
	end if;

	if ( pomIdDoklad is not null ) then
		-- doklad jiz existuje zkontroluji zda neni zamceny
		ret := f_testDokladIdZamceno ( pomIdDoklad, aKrok, null );
	end if;
   	if(ret is not null) then
	    return (ret);
	else
	    if ( pomIdDokladIfrs is not null ) then
		    -- doklad ifrs jiz existuje zkontroluji zda neni zamceny
    		return (f_testDokladIdZamceno ( pomIdDokladIfrs, aKrok, null ));
		end if;
	end if;
	-- doklady neexistuji tak neni ani zamceno
	return ( null );
end;

/


PROMPT Completed F_TESTDOKLADZAMCENO.sql
PROMPT


-- ============================================================================
-- Deploy: F_VOLATILITAMENA.sql
-- Category: functions
-- ============================================================================

PROMPT Deploying F_VOLATILITAMENA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Function F_VOLATILITAMENA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "DB_JT"."F_VOLATILITAMENA" ( aDatumOd date, aDatumDo date, aMena varchar2 ) return number as
begin
		return 1;
end;

/


PROMPT Completed F_VOLATILITAMENA.sql
PROMPT


-- ============================================================================
-- PHASE: Deploy PROCEDURES (31 files)
-- ============================================================================

PROMPT
PROMPT ============================================================================
PROMPT Deploying PROCEDURES (31 files)
PROMPT ============================================================================
PROMPT


-- ============================================================================
-- Deploy: PUT_ANY_LINE.sql
-- Category: procedures
-- ============================================================================

PROMPT Deploying PUT_ANY_LINE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Procedure PUT_ANY_LINE
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "DB_JT"."PUT_ANY_LINE" (pstrText IN VARCHAR2) IS
     cnumLineSize  CONSTANT NUMBER := 255;   -- Maximum size of DBMS_OUTPUT string
      lstrLeft  VARCHAR2 (32767);
      lstrRight VARCHAR2 (32767);
      lnumPos   NUMBER;
   BEGIN
		if ( pstrText is null ) then
			return;
		end if;
      IF LENGTH(pstrText) <= cnumLineSize THEN
         -- Line short enough to go to PUT_LINE
         DBMS_OUTPUT.PUT_LINE(pstrText);
      ELSE
         -- Line is too long, attempt to split it at a space
         lstrLeft := SUBSTR(pstrText,1,cnumLineSize);
         lnumPos := INSTR(lstrLeft,' ',-1);
         IF lnumPos = 0 THEN
            -- No spaces in the line, so just split it regardless
            lstrRight := SUBSTR(pstrText,cnumLineSize+1);
         ELSE
            lstrLeft := SUBSTR(lstrLeft,1,lnumPos-1);
            lstrRight := SUBSTR(pstrText,lnumPos+1);
         END IF;
         -- lstrLeft is small enough to send to put_line...
         DBMS_OUTPUT.PUT_LINE (lstrLeft);
         -- ...but lstrRight may not be. Make a recursive call to deal with it
         put_any_line (lstrRight);
      END IF;
   END;

/


PROMPT Completed PUT_ANY_LINE.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/PROCEDURES/P_CALCAVGKURZ.sql: 'utf-8' codec can't decode byte 0xe8 in position 968: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/PROCEDURES/P_CALCAVGKURZ_CCP.sql: 'utf-8' codec can't decode byte 0xe8 in position 976: invalid continuation byte


-- ============================================================================
-- Deploy: P_CALCAVGKURZ_KIS.sql
-- Category: procedures
-- ============================================================================

PROMPT Deploying P_CALCAVGKURZ_KIS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Procedure P_CALCAVGKURZ_KIS
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "DB_JT"."P_CALCAVGKURZ_KIS" (p_limitdate DATE DEFAULT NULL)
/* Procedura dopocte YTD prumery menovych kurzu od data poslednich vypoctenych az po datum poslednich kurzu v tabulce dennich kurzu */
AS
   l_datefrom     DATE;
   l_dateto       DATE;
   l_calcdate     DATE;
   l_dateloop     INTEGER;
   l_calendarid   CHAR (20);
   l_sql          VARCHAR (2000);
   c_qlink_cz     VARCHAR (50)   := '@quaestor';
   c_qlink_sk     VARCHAR (50)   := '@quaestor_sk';

   PROCEDURE kurz_calc (p_id_cisbanka NUMBER)
   IS
   BEGIN
      /* datum poslednich dopocitavanych prumeru kurzu */
      SELECT NVL (MAX (dt_datum), TRUNC (SYSDATE, 'year') - 1)
        INTO l_datefrom
        FROM dat_kurzlistavg
        WHERE id_cisbanka = p_id_cisbanka;

      /* datum, do ktereho mame denni kurzy */
      SELECT MAX (dt_datum) INTO l_dateto
      FROM dat_kurzlist
      WHERE id_cisbanka = p_id_cisbanka;

      CASE p_id_cisbanka
         WHEN 1
         THEN
            /* jaky kalendar pouzit */
            l_sql :=
                  'SELECT id FROM quaestor.bd_calendar'
               || c_qlink_cz
               || ' WHERE TYPE = ''S'' AND fk_country = ''CZ''';

            EXECUTE IMMEDIATE l_sql
                         INTO l_calendarid;

            /* vlozeni vypoctenych prumeru do tabulky (pro vsechny meny) */
            l_sql :=
                  'INSERT INTO dat_kurzlistavg (dt_datum, id_cisbanka, id_cismena, nd_kurz, nl_kvantita, zdroj)'
               || ' (SELECT   :1, :2, kl.id_cismena, AVG (nd_kurz) / nl_kvantita, 1, ''KIS'''
               || ' FROM dat_kurzlist kl'
               || ' WHERE kl.id_cisbanka = 1'
               || ' AND kl.id_cismena in (select id from kp_cis_mena )'
               || ' AND kl.dt_datum BETWEEN TRUNC (:3, ''year'') AND :4'
               || ' AND dsa.f_getCalendarTypeDay'
               || c_qlink_cz
               || ' (kl.dt_datum, :5) = ''B'''
               || ' GROUP BY kl.id_cismena, nl_kvantita)';
         WHEN 2
         THEN
            /* jaky kalendar pouzit */
            l_sql :=
                  'SELECT id FROM quaestor.bd_calendar'
               || c_qlink_sk
               || ' WHERE TYPE = ''S'' AND fk_country = ''SK''';

            EXECUTE IMMEDIATE l_sql
                         INTO l_calendarid;

            /* vlozeni vypoctenych prumeru do tabulky (pro vsechny meny) */
            l_sql :=
                  'INSERT INTO dat_kurzlistavg (dt_datum, id_cisbanka, id_cismena, nd_kurz, nl_kvantita, zdroj)'
               || ' (SELECT   :1, :2, kl.id_cismena, AVG (nd_kurz) / nl_kvantita, 1, ''KIS'''
               || ' FROM dat_kurzlist kl'
               || ' WHERE kl.id_cisbanka = 2'
               || ' AND kl.id_cismena in (select id from kp_cis_mena )'
               || ' AND kl.dt_datum BETWEEN TRUNC (:3, ''year'') AND :4'
               || ' AND dsa.f_getCalendarTypeDay'
               || c_qlink_sk
               || ' (kl.dt_datum, :5) = ''B'''
               || ' GROUP BY kl.id_cismena, nl_kvantita)';
      END CASE;

      /* pripadne pouziti omezeni volitelnym parametrem */
      IF p_limitdate IS NOT NULL
      THEN
         l_dateto := LEAST (p_limitdate, l_dateto);
      END IF;

      /* pro kazdy den v obdobi */
      FOR l_dateloop IN 1 .. TRUNC (l_dateto - l_datefrom)
      LOOP
         l_calcdate := l_datefrom + l_dateloop;

         /* vlozeni vypoctenych prumeru do tabulky (pro vsechny meny) */
         EXECUTE IMMEDIATE l_sql
                     USING l_calcdate, p_id_cisbanka, l_calcdate, l_calcdate, l_calendarid;
      END LOOP;
   END;
BEGIN
   /* dopocitani kurzu pro CZ */
   kurz_calc (1);
   /* dopocitani kurzu pro SK */
   kurz_calc (2);
   COMMIT;
EXCEPTION
   WHEN OTHERS
   THEN
      raise_application_error (-20999,
                               'Problem pri vypoctu prumerneho kurzu pro datum ' || l_calcdate || '  ' || sqlerrm
                              );
END;

/


PROMPT Completed P_CALCAVGKURZ_KIS.sql
PROMPT


-- ============================================================================
-- Deploy: P_CREATE_SSRS_UA_RKC.sql
-- Category: procedures
-- ============================================================================

PROMPT Deploying P_CREATE_SSRS_UA_RKC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Procedure P_CREATE_SSRS_UA_RKC
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "DB_JT"."P_CREATE_SSRS_UA_RKC" (p_date IN VARCHAR2) AS

/* =======================================

Autor:          Miroslav Smrecek
Pouziti:        vytvoreni view pro SSRS report
Funkce:         zavolanim procedury dojde k vytvoreni UA SSRS pro business date

===========================================*/

BEGIN
execute immediate 'CREATE OR REPLACE FORCE VIEW "VW_SSRS_UA_RKC" as
select
  TO_DATE('''||p_date||''', ''DD.MM.YYYY'') as dt_business_date,
  S_LISTGROUPCODE,
  NAZEV_SPOLECNOST,
  S_UCETUNIF,
  replace(replace(replace(replace(S_POPIS,CHR(13),''''),CHR(10),CHR(32)),CHR(60),''''),CHR(62),'''') as S_POPIS,
  ND_CASTKACNB,
  ND_CASTKALOCAL,
  ND_CASTKAMENA,
  S_MENA,
  S_UNIFPROTI_ICO,
  replace(replace(replace(replace(s_unifproti,CHR(13),''''),CHR(10),CHR(32)),CHR(60),''''),CHR(62),'''') as s_unifproti,
  S_LISTGROUP,
  ND_KATEGORIE_KOEF,
  ND_CISTAANGAZOVANOST,
  C_BANKA,
  S_UCET,
  S_POPISORIGINAL,
  GROUP_CODE_ZDROJ
  --esc 07 2021 rozsireni UA RKC
        ,NVL(S_TYP_OBEZRETNOST_PORTFOLIA,''BDP'') as S_TYP_OBEZRETNOST_PORTFOLIA
        ,S_COUNTRY
        ,S_ESA
        ,S_NACE
        ,S_LEI
        ,NVL(C_KONSO_DEFAULT_FLAG,C_INDIV_DEFAULT_FLAG) as C_KONSO_DEFAULT_FLAG
        ,S_SHADOW_BANK
        ,NVL(S_TYPE_OF_EXPOSURE,''direct'') as S_TYPE_OF_EXPOSURE
        ,S_COLL_REG_CODE
        ,C_INDIV_DEFAULT_FLAG
FROM
 db_jt.vw_ext_dokladuverovapozice
 WHERE   ( id_doklad IN (SELECT DISTINCT d.ID
                           FROM db_jt.kp_rel_subkonsolidaceclen c,
                                db_jt.kp_ktg_subkonsolidace s,
                                db_jt.kp_ktg_ucetnispolecnost us,
                                db_jt.kp_dat_doklad d
                          WHERE us.ID = c.id_ktgucetnispolecnost
                            AND s.id_ktgucetnispolecnost = c.id_ktgsubkonsolidace
                            AND c.c_clen = ''1''
                            --esc 01.2019 bereme jenom FULL RKC spolecnosti
                            AND c.id_cissubtypclenstvi = 1
                            AND s.id_ktgucetniskupina = 1
                            AND d.id_ktgucetnispolecnost = us.ID
                            AND d.dt_datum = TO_DATE('''||p_date||''', ''DD.MM.YYYY'')
                            and s.ID_KTGUCETNISPOLECNOST  = 10344
                            AND d.nl_krok IN (1, 2)
                            AND d.c_basedoklad = 1
                         )
         --01.2019 esc , Lucka: vyloucit vsechno kde spolecnost i PROTISTRANA jsou FULL v RKC scope podle konsolidace
         AND F_GET_PROTISTRANA_RKC ( ID_UNIFPROTI ) != 1
         --RKC FULL
         AND s_locale = ''cs_CZ''
         AND (
              --01.2019 esc podla Lucky
                s_listgroupcode LIKE  ''S%''
              OR s_listgroupcode LIKE ''N%''
              OR s_listgroupcode LIKE ''C%''
              OR s_listgroupcode IS NULL
           )
         )
 order by s_listgroupcode, S_UNIFPROTI_ICO, s_popis';

 execute IMMEDIATE 'grant select on db_jt.VW_SSRS_UA_RKC to SSRS';

end;

/


PROMPT Completed P_CREATE_SSRS_UA_RKC.sql
PROMPT


-- ============================================================================
-- Deploy: P_CREATE_VIEW_UVEROVKA.sql
-- Category: procedures
-- ============================================================================

PROMPT Deploying P_CREATE_VIEW_UVEROVKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Procedure P_CREATE_VIEW_UVEROVKA
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "DB_JT"."P_CREATE_VIEW_UVEROVKA" (datum IN VARCHAR2) AS
BEGIN
execute immediate 'CREATE OR REPLACE FORCE VIEW "VW_SSRS_UVEROVKA" as
select
  S_LISTGROUPCODE,
  NAZEV_SPOLECNOST,
  S_UCETUNIF,
  replace(replace(replace(replace(S_POPIS,CHR(13),''''),CHR(10),CHR(32)),CHR(60),''''),CHR(62),'''') as S_POPIS,
  ND_CASTKACNB,
  ND_CASTKALOCAL,
  ND_CASTKAMENA,
  S_MENA,
  REPLACE(S_UNIFPROTI_ICO,''???'',''XNA'') as S_UNIFPROTI_ICO,
  CASE WHEN S_UNIFPROTI_ICO = ''???''
    THEN ''NO DATA FOUND''
    ELSE replace(replace(replace(replace(s_unifproti,CHR(13),''''),CHR(10),CHR(32)),CHR(60),''''),CHR(62),'''')
   END  as s_unifproti,
  S_LISTGROUP,
  CASE WHEN ND_KATEGORIE_KOEF IS NULL AND S_UNIFPROTI_ICO IS NOT NULL
    THEN 1
    ELSE ND_KATEGORIE_KOEF
   END AS ND_KATEGORIE_KOEF,
  ND_CISTAANGAZOVANOST,
  C_BANKA,
  S_UCET,
  S_POPISORIGINAL,
  GROUP_CODE_ZDROJ
  --esc 07 2021 rozsireni UA RKC
        ,NVL(S_TYP_OBEZRETNOST_PORTFOLIA,''BDP'') as S_TYP_OBEZRETNOST_PORTFOLIA
        ,S_COUNTRY
        ,S_ESA
        ,S_NACE
        ,S_LEI
        ,NVL(C_KONSO_DEFAULT_FLAG,C_INDIV_DEFAULT_FLAG) as C_KONSO_DEFAULT_FLAG
        ,S_SHADOW_BANK
        ,NVL(S_TYPE_OF_EXPOSURE,''direct'') as S_TYPE_OF_EXPOSURE
        ,S_COLL_REG_CODE
        ,C_INDIV_DEFAULT_FLAG
FROM
 db_jt.vw_ext_dokladuverovapozice
 WHERE   ( id_doklad IN (SELECT DISTINCT d.ID
                           FROM db_jt.kp_rel_subkonsolidaceclen c,
                                db_jt.kp_ktg_subkonsolidace s,
                                db_jt.kp_ktg_ucetnispolecnost us,
                                db_jt.kp_dat_doklad d
                          WHERE us.ID = c.id_ktgucetnispolecnost
                            AND s.id_ktgucetnispolecnost = c.id_ktgsubkonsolidace
                            AND c.c_clen = ''1''
                            --esc 01.2019 bereme jenom FULL RKC spolecnosti
                            AND c.id_cissubtypclenstvi = 1
                            AND s.id_ktgucetniskupina = 1
                            AND d.id_ktgucetnispolecnost = us.ID
                            AND d.dt_datum = TO_DATE('''||datum||''', ''DD.MM.YYYY'')
                            and s.ID_KTGUCETNISPOLECNOST  = 10344
                            AND d.nl_krok IN (1, 2)
                            AND d.c_basedoklad = 1
                         )
         --01.2019 esc , Lucka: vyloucit vsechno kde spolecnost i PROTISTRANA jsou FULL v RKC scope podle konsolidace
         AND F_GET_PROTISTRANA_RKC ( ID_UNIFPROTI ) != 1
         --RKC FULL
         AND s_locale = ''cs_CZ''
         AND (
              --01.2019 esc podla Lucky
                s_listgroupcode LIKE  ''S%''
              OR s_listgroupcode LIKE ''N%''
              OR s_listgroupcode LIKE ''C%''
              OR s_listgroupcode IS NULL
           )
         )
 order by s_listgroupcode, S_UNIFPROTI_ICO, s_popis';

 execute IMMEDIATE 'grant select on db_jt.VW_SSRS_UVEROVKA to READ_SSRS';
 execute IMMEDIATE 'grant select on db_jt.VW_SSRS_UVEROVKA to R_ACCTUATE';


execute immediate 'CREATE OR REPLACE FORCE VIEW "VW_SSRS_UVEROVKA_KAPITAL" ("KAPITAL", "KURZ") AS
  select max(nd_castka) as kapital,max(kurz) as kurz from(
SELECT nd_castka, Cast('''' as decimal(18,2)) as kurz
FROM db_jt.vw_ext_kpdatkapitalskupiny kpdatkapitalskupiny
WHERE dt_platnostod =
          (SELECT MAX (k.dt_platnostod)
            FROM db_jt.vw_ext_kpdatkapitalskupiny k
        WHERE k.id_skupinapozice = kpdatkapitalskupiny.id_skupinapozice
              AND k.dt_platnostod <= TO_DATE('''||datum||''', ''DD.MM.YYYY''))
union all
select null,ND_KURZ from (
select * from DAT_KURZLIST
where
DAT_KURZLIST.ID_CISMENA = ''EUR''
order by dt_datum desc)
where rownum = 1
)';

 execute IMMEDIATE 'grant select on db_jt.VW_SSRS_UVEROVKA_KAPITAL to READ_SSRS';
 execute IMMEDIATE 'grant select on db_jt.VW_SSRS_UVEROVKA_KAPITAL to R_ACCTUATE';

end;

/


PROMPT Completed P_CREATE_VIEW_UVEROVKA.sql
PROMPT


-- ============================================================================
-- Deploy: P_DELETESPOLECNOST.sql
-- Category: procedures
-- ============================================================================

PROMPT Deploying P_DELETESPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Procedure P_DELETESPOLECNOST
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "DB_JT"."P_DELETESPOLECNOST" ( aId int ) as begin

delete db_kostka.TOP_CIS_SPOLECNOST where id_ktgSpolecnost = aId;

update kp_dat_denniagregace set id_ktgspolecnostproti = null where id_ktgspolecnostproti = aId;

update kp_dat_denniagregace set id_ktgucetnispolecnostproti = null where id_ktgucetnispolecnostproti = aId;

delete kp_dat_dokladNastrojCP where id_ktgSpolecnostProtistrana = aId;

delete kp_dat_dokladNastrojCP where id_ktgSpolecnost = aId;

delete kp_dat_dokladNastroj where id_ktgSpolecnostProtistrana = aId;

delete kp_dat_dokladNastroj where id_ktgSpolecnost = aId;


update kp_dat_dokladzdrojdatagregace set id_ktgspolecnost = null where id_ktgspolecnost = aId;

update kp_dat_dokladzdrojdat set id_ktgspolecnost = null where id_ktgSpolecnost = aId;

delete KP_ktg_FinancniInvestice where id_ktgspolecnost = aId;

delete kp_dat_manualnizdrojdat where id_ktgspolecnost = aId;

delete KP_KTG_SPOLECNOST_GROUP where id_spolecnost = aId;

delete kp_ktg_spolecnost where id = aId;

commit;

end;

/


PROMPT Completed P_DELETESPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: P_DELETEUCETNISPOLECNOST.sql
-- Category: procedures
-- ============================================================================

PROMPT Deploying P_DELETEUCETNISPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Procedure P_DELETEUCETNISPOLECNOST
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "DB_JT"."P_DELETEUCETNISPOLECNOST" (aIdUcSpol int) as
  idSpol int;
  pom int;
begin
  select count(*)
  into pom
  from kp_ktg_spolecnost s
  where s.ID_KTGSPOLECNOST = aIdUcSpol;

  if ( pom = 1 ) then

    select id
    into idSpol
    from kp_ktg_spolecnost s
    where s.ID_KTGSPOLECNOST = aIdUcSpol;

	p_deleteSpolecnost( idSpol );

  end if;

  for r in (select id
            from kp_dat_doklad d
            where d.ID_KTGUCETNISPOLECNOST = aIdUcSpol) loop

	kap_doklad.P_DELETE( r.id );

  end loop;

  update kp_dat_dokladzdrojdat d
  set d.ID_KTGUCETNISPOLECNOSTUNIF = null
  where d.ID_KTGUCETNISPOLECNOSTUNIF = aIdUcSpol;

  update kp_dat_dokladzdrojdatagregace d
  set d.ID_KTGUCETNISPOLECNOST = null
  where d.ID_KTGUCETNISPOLECNOST = aIdUcSpol;

  delete from KP_REL_APPUSER_SPOLECNOSTPRAVO d
  where d.ID_KTGUCETNISPOLECNOST = aIdUcSpol;

  delete from FC_CIS_UCETNISPOLECNOST d
  where d.ID_KTGUCETNISPOLECNOST = aIdUcSpol;

  -- vic FK na me zatim nevyskocilo :-)

  delete KP_ktg_ucetniSpolecnost_link where id_ktgUcetniSpolecnost = aIdUcSpol;
  
  delete from kp_ktg_ucetnispolecnost d
  where d.id = aIdUcSpol;

  commit;
end;

/


PROMPT Completed P_DELETEUCETNISPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: P_EXECUTESQL.sql
-- Category: procedures
-- ============================================================================

PROMPT Deploying P_EXECUTESQL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Procedure P_EXECUTESQL
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "DB_JT"."P_EXECUTESQL" ( aPrikaz varchar2 ) AUTHID CURRENT_USER AS
 i integer;
 x integer;
begin
	i:=dbms_sql.open_cursor;

	dbms_sql.parse(i, aPrikaz,dbms_sql.v7);
	x:= dbms_sql.execute(i);
	dbms_sql.close_cursor(i);

END;

/


PROMPT Completed P_EXECUTESQL.sql
PROMPT


-- ============================================================================
-- Deploy: P_GETIDBUDGET.sql
-- Category: procedures
-- ============================================================================

PROMPT Deploying P_GETIDBUDGET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Procedure P_GETIDBUDGET
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "DB_JT"."P_GETIDBUDGET" (IDradek int, idBudget out varchar2) AS
BEGIN
--esc 04/2011 vrati ID Budgetu podla ID riadku
--!! zmena !! nie podla id odboru alebo projektu 
--grant execute on p_getIdBudget to  appserver;    
  
select bud.id
into idBudget
from kp_dat_budget bud
, kp_dat_dokumentradek dr
where dr.id = IDradek
      and (
            dr.id_odbor   = bud.id_ktgodbor
            --or dr.id_projekt = bud.id_ktgprojekt
          )
      and dr.dt_datumzadani between bud.dt_platnostod and bud.dt_platnostdo    ;

exception 
when others then 
    idBudget := '0';
    
END p_getIdBudget;

/


PROMPT Completed P_GETIDBUDGET.sql
PROMPT


-- ============================================================================
-- Deploy: P_GETIDSL4IDROWDB.sql
-- Category: procedures
-- ============================================================================

PROMPT Deploying P_GETIDSL4IDROWDB.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Procedure P_GETIDSL4IDROWDB
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "DB_JT"."P_GETIDSL4IDROWDB" (IDRadek int, SL out varchar2) AS
BEGIN
--esc 01/09 vrati ID SL podla riadku 
--grant execute on p_getIdSL4IdRowdb to  appserver;    
  
   select dr.id_dokument
   into SL
   from kp_dat_dokumentradek dr
   where ID =  IDRadek ;

exception 
when others then 
    SL := '';
    
END p_getIdSL4IdRowdb;

/


PROMPT Completed P_GETIDSL4IDROWDB.sql
PROMPT


-- ============================================================================
-- Deploy: P_GETSL4OBJDB.sql
-- Category: procedures
-- ============================================================================

PROMPT Deploying P_GETSL4OBJDB.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Procedure P_GETSL4OBJDB
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "DB_JT"."P_GETSL4OBJDB" (idObjRadek int, zoznamSL out varchar2) AS
v_zoznamSL VARCHAR2(200):='';
BEGIN
--esc 01/09 vrati cisla SL ktore maju riadok vytvoreny zo zadanej objednavky !
--grant execute on P_GETSL4OBJDB to  appserver;    
  for c in ( select distinct dr.id_dokument
               from kp_dat_dokumentradek dr
              where ID_OBJ_RADEK =  idObjRadek  order by id_dokument
              )
  loop               
    if length(v_zoznamSL) > 0 then 
      v_zoznamSL := v_zoznamSL||','||c.id_dokument ;
    else
      v_zoznamSL := c.id_dokument ;
    end if;
    
  end loop;
  if v_zoznamSL is null 
    then zoznamsl:='-1';
  else   zoznamSL := v_zoznamSL;
  end if;
  
END P_GETSL4OBJDB;

/


PROMPT Completed P_GETSL4OBJDB.sql
PROMPT


-- ============================================================================
-- Deploy: P_IMPORT_POZICE_UM.sql
-- Category: procedures
-- ============================================================================

PROMPT Deploying P_IMPORT_POZICE_UM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Procedure P_IMPORT_POZICE_UM
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "DB_JT"."P_IMPORT_POZICE_UM" (aIdKtgUcetniSpolecnost  int,aDatum  date,aTyp char, aUser varchar2, aID_IMPORT  int)  AS
PRAGMA AUTONOMOUS_TRANSACTION;
BEGIN 
--DB_DSA... grant execute on LOADMANUAL to DB_JT;
--nacitat zo zoznamu importov
/*aIdKtgUcetniSpolecnost := 1045; -- BAULIGA
aDatum  :=  to_date('31.07.2013','DD.MM.YYYY');
aTyp    :=  'U'; --'M';
*/
db_jt.app.p_log_autonomous(trim('p_import_pozice_UM - START::  ID='||aID_IMPORT|| ' ID_KTGUCETNISPOLECNOST:'||aIdKtgUcetniSpolecnost||' IMPORT_TYP:'||aTyp||' Datum:'||aDatum||' S_USER:'||aUser   )) ;               

    db_dsa.loadManual.p_startImport( aIdKtgUcetniSpolecnost ,aDatum ,aTyp ); 

db_jt.app.p_log_autonomous(trim('p_import_pozice_UM - end: p_startImport   ')) ;               

if (aTyp =  'U')  --      readPoziceUverova();then
then
    FOR c in (select * from DB_JT.IMPORT_POZICE_UM_DATA where  ID_IMPORT = aID_IMPORT)
    LOOP
    --db_jt.app.p_log_autonomous(trim('p_import_pozice_UM - LOOP: ico:'||c.s_ico||' spolecnost:'||c.S_KTGSPOLECNOST_NAZEV)) ;               
    
    db_dsa.loadmanual.p_testInsertUverovaR ( 
        aUzivatel     =>       nvl(aUser,'import_2013')               --varchar2  admin JT
      , aExtId        =>       c.s_ico                     --varchar2
      , aNazev     =>          c.S_KTGSPOLECNOST_NAZEV --varchar2
      , aUcet      =>          substr(c.s_ucet,1,10)    --;c.s_ucet                 --varchar2
      , aText      =>          c.s_text                 --varchar2
      , aCNBCastka =>          c.nd_castkacnb           --number
      , aCastka    =>          c.nd_castkamena          --number
      , aCastkaLocal =>        c.nd_castkalocal         --number
      , aMena        =>        c.s_mena                 --varchar2 
      , aRizikovost  =>        c.kategoriekoef          --number
      , aSkupina     =>        c.cust_group_code        --varchar2
      , aBanka       =>        c.c_banka                --varchar2
      , aCistaAngazovanost  => c.ND_CISTAANGAZOVANOST    --number
      );    
   END LOOP;      
else    
    null;
    --  readPoziceMenova();
end if;      

EXCEPTION
    WHEN OTHERS then
        db_jt.app.p_log_autonomous(trim('p_import_pozice_UM - ERROR::'||sqlerrm||' aIdKtgUcetniSpolecnost='||aIdKtgUcetniSpolecnost||' aDatum='||aDatum||' aTyp='||aTyp||' aUser='||aUser)) ;         

END p_import_pozice_UM;

/


PROMPT Completed P_IMPORT_POZICE_UM.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/PROCEDURES/P_IMPORT_POZICE_UM_APEX.sql: 'utf-8' codec can't decode byte 0xe8 in position 1612: invalid continuation byte


-- ============================================================================
-- Deploy: P_IMPORT_POZICE_UM_RELOAD.sql
-- Category: procedures
-- ============================================================================

PROMPT Deploying P_IMPORT_POZICE_UM_RELOAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Procedure P_IMPORT_POZICE_UM_RELOAD
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "DB_JT"."P_IMPORT_POZICE_UM_RELOAD" (p_IdKtgUcetniSpolecnost  int
                                                      ,p_Datum                  date ) AS

/* =======================================

Autor (update): Miroslav Smrecek
Pouziti:        znovuvytvoreni dokladu z dat v import_pozice_um_data pro DZA spolecnosti
Funkce:         - kontrola atributu, ze se jedna o reload DZA spolecnosti
                - zaloha dat do import_pozice_um_data_reload (pri fail moze dojst k smazani dat podle procesu)
                - spusteni importu / znovuvytvoreni dokladu
Update:

===========================================*/

  l_user        VARCHAR2(50);
  l_id_imp      NUMBER;

BEGIN
  SELECT user || '/'||sys_context('USERENV','OS_USER')
    INTO l_user
    FROM dual;

  SELECT id_imp
    INTO l_id_imp
    FROM import_pozice_um
   WHERE imp_platnost_dat = p_Datum
     AND id_ktgucetnispolecnost = p_IdKtgUcetniSpolecnost
     AND import_typ = 'U'
     AND s_soubor_cesta = 'DZA'
     AND nd_pocet_zaznamu_platnych > 0;

  db_jt.app.p_log_autonomous(trim('p_import_pozice_UM_RELOAD - START:: ID_IMPORT: '||l_id_imp||' ID_KTGUCETNISPOLECNOST:'||p_IdKtgUcetniSpolecnost||' Datum:'||p_Datum||' S_USER:'||l_User )) ;

  DELETE FROM import_pozice_um_data_reload
   WHERE id_import = l_id_imp;

  INSERT INTO import_pozice_um_data_reload
       SELECT *
         FROM import_pozice_um_data
        WHERE id_import = l_id_imp;

  COMMIT;

  P_IMPORT_POZICE_UM_APEX (p_IdKtgUcetniSpolecnost
                          ,p_Datum
                          ,'U'
                          ,'KIS_LOAD'
                          ,l_id_imp
                          ,0);

  db_jt.app.p_log_autonomous(trim('p_import_pozice_UM_RELOAD - END:: ')) ;


EXCEPTION
    WHEN OTHERS then
        db_jt.app.p_log_autonomous(trim('p_import_pozice_UM_RELOAD - ERROR::'||sqlerrm||' ID_KTGUCETNISPOLECNOST:'||p_IdKtgUcetniSpolecnost||' Datum:'||p_Datum||' S_USER:'||l_User )) ;

END p_import_pozice_um_reload;

/


PROMPT Completed P_IMPORT_POZICE_UM_RELOAD.sql
PROMPT


-- ============================================================================
-- Deploy: P_ISBANKA.sql
-- Category: procedures
-- ============================================================================

PROMPT Deploying P_ISBANKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Procedure P_ISBANKA
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "DB_JT"."P_ISBANKA" ( aIdKtgSpolecnost int, o_ret out  int  ) as
--ret number := 1;  -- -1 - nemame info 
             -- 0 BANKA   ( RKC )
             -- 1 NEBANKA ( RKC )
begin
o_ret := 1;   -- 1 NEBANKA ( RKC )

	if ( aIdKtgSpolecnost is null ) then
   	o_ret := -1;
	end if;      

app.p_log_autonomous('p_isBank: '||aIdKtgSpolecnost);

begin 

 select   0  into o_ret
  from 
       kp_ktg_spolecnost ks
  where   
      ks.id      =    aIdKtgSpolecnost and
      ( nvl(ks.s_kodkategorieprotistrana_2, s_kodkategorieprotistrana) like ('7%') 
            or nvl(ks.s_kodkategorieprotistrana_2, s_kodkategorieprotistrana)like ('860%') 
          )
      and 
      nvl(ks.s_kodkategorieprotistrana_2, s_kodkategorieprotistrana) not in ('760','765','753');

app.p_log_autonomous('p_isBank/ OK : '||aIdKtgSpolecnost||' ret='||nvl(o_ret,0));

exception
  when NO_DATA_FOUND  then 
        app.p_log_autonomous('p_isBank/ NEBANKA : '||aIdKtgSpolecnost||' o_ret='||nvl(o_ret,0));  
        o_ret := 1;

end p_isBank; 

return ;

exception
  when others   
  then 
        app.p_log_autonomous('p_isBank/ CHYBA : '|| SQLERRM|| ' - '||aIdKtgSpolecnost||' ret='||nvl(o_ret,0));  
        o_ret := -1;
end;

/*
grant execute on db_jt.p_isBank to R_APPSERVER
*/
/*
select   distinct ct.s_kod, ct.s_popis, KP_def_kategorie2typ.*
from KP_def_kategorie2typ , kp_cis_typSubject ct
where ct.id = id_cisTypSubject
and s_kodkategorieprotistrana like ('7%') 
    or s_kodkategorieprotistrana like ('860%') and s_kodkategorieprotistrana  not in ('760','765','753')
*/

/


PROMPT Completed P_ISBANKA.sql
PROMPT


-- ============================================================================
-- Deploy: P_ISGENEROVANICLOSED.sql
-- Category: procedures
-- ============================================================================

PROMPT Deploying P_ISGENEROVANICLOSED.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Procedure P_ISGENEROVANICLOSED
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "DB_JT"."P_ISGENEROVANICLOSED" ( aTyp int, aDatum date ) is
	rowGenerovaniClosed kp_dat_generovaniClosed%rowtype;
begin
	if( aDatum is null ) then
		return;
	end if;
	
	select *
	into rowGenerovaniClosed
	from kp_dat_generovaniClosed
	where id = aTyp;
	
	if( aDatum < rowGenerovaniClosed.dt_datum ) then
		rowGenerovaniClosed.s_errorMsg := replace( rowGenerovaniClosed.s_errorMsg, '?max?', to_char( rowGenerovaniClosed.dt_datum, 'dd.mm.yyyy' ) ); 
		rowGenerovaniClosed.s_errorMsg := replace( rowGenerovaniClosed.s_errorMsg, '?gen?', to_char( aDatum, 'dd.mm.yyyy' ) ); 
		raise_application_error( -20999, '***'||rowGenerovaniClosed.s_errorMsg||'***' ); 
	end if; 
end;

/


PROMPT Completed P_ISGENEROVANICLOSED.sql
PROMPT


-- ============================================================================
-- Deploy: P_ISSPOLECNOSTFEIS_DOKLAD.sql
-- Category: procedures
-- ============================================================================

PROMPT Deploying P_ISSPOLECNOSTFEIS_DOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Procedure P_ISSPOLECNOSTFEIS_DOKLAD
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "DB_JT"."P_ISSPOLECNOSTFEIS_DOKLAD" ( aIdDoklad int, o_ret out int )  is
--   je FEIS = 1
-- neni FEIS = 0
ret int :=0;

begin
     --app.p_log_autonomous('p_isSpolecnostFEIS_Doklad START : '|| aIdDoklad );
begin 

	select 1 into ret
  	from KP_Dat_doklad d, 
         KP_ktg_ucetniSpolecnost s,
         KP_CIS_databaze db
	where
		  db.s_proquestor is null     and
      db.id = s.id_cisdatabaze        and
      d.id_ktgUcetniSpolecnost = s.id and
		  d.id = aIdDoklad;
  
exception  
  when NO_DATA_FOUND then
              app.p_log_autonomous('p_isSpolecnostFEIS_Doklad NO_DATA_FOUND : '|| aIdDoklad );
              o_ret := 0;


end;

o_ret := ret;
app.p_log_autonomous('p_isSpolecnostFEIS_Doklad '|| aIdDoklad ||' / ret= '||o_ret);
return;

exception
      when others then
              app.p_log_autonomous('p_isSpolecnostFEIS_Doklad ERROR : '||  SQLERRM ||''|| aIdDoklad );
              o_ret := 0;
              
end p_isSpolecnostFEIS_Doklad;

/*grant execute on db_jt.p_isSpolecnostFEIS_Doklad to r_APPSERVER;*/

/


PROMPT Completed P_ISSPOLECNOSTFEIS_DOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: P_KONTROLAPOCSTAVCARTESIS.sql
-- Category: procedures
-- ============================================================================

PROMPT Deploying P_KONTROLAPOCSTAVCARTESIS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Procedure P_KONTROLAPOCSTAVCARTESIS
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "DB_JT"."P_KONTROLAPOCSTAVCARTESIS" as
	l_pocet int;
   l_celkem int := 0;
   l_ok int := 0;
begin
	for curDoklad in (
   	select d.id, d.id_ktgucetnispolecnost, us.s_mena, us.s_nazev from kp_dat_doklad d, kp_ktg_ucetniSpolecnost us
      where d.dt_datum = '31.12.1999' and d.c_basedoklad = '1' and d.id_ktgucetnispolecnost = us.id ) loop


      select count(*) into l_pocet
      from (
         select sum ( dp.nd_castkalocal ) c, dp.nl_poradilist l
         from kp_dat_dokladpolozka dp, kp_dat_doklad d
         where dp.id_doklad = d.id and d.Id_Ktgucetnispolecnost = curDoklad.id_ktgUcetniSpolecnost
         and d.dt_datum = '31.12.2006' and d.c_basedoklad = '1'
         and curDoklad.s_mena = dp.s_mena
         group by dp.nl_poradilist ) D1,
         (
         select sum ( dp.nd_castkalocal ) c, dp.nl_poradilist l
         from kp_dat_dokladpolozka dp
         where dp.id_doklad = curDoklad.id and curDoklad.s_mena = dp.s_mena
         group by dp.nl_poradilist ) D2
      where D1.l = D2.l and D1.c = D2.c ;

		if ( l_pocet != 5 ) then
			app.p_log ( 'Problem ' || curDoklad.id || '  ' || curDoklad.s_nazev || '    ' || l_pocet );
		else
      	app.p_log ( '         OK: ' || curDoklad.s_nazev );
         l_ok := l_ok + 1;
		end if;

      l_celkem := l_celkem + 1;

	end loop;

   app.p_log ( 'Celkem ' || l_ok || '/' || l_celkem );

end;

/


PROMPT Completed P_KONTROLAPOCSTAVCARTESIS.sql
PROMPT


-- ============================================================================
-- Deploy: P_RECOMPILEPACKAGE.sql
-- Category: procedures
-- ============================================================================

PROMPT Deploying P_RECOMPILEPACKAGE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Procedure P_RECOMPILEPACKAGE
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "DB_JT"."P_RECOMPILEPACKAGE" ( aPocetNevalidnich out int ) as
begin
	db_dsa.p_recompilePackage;
	for i in 1 .. 5 loop
		for cObject in (
			select object_name, owner
			from all_objects
			where status = 'INVALID' and object_type = 'PACKAGE BODY'
				and owner = 'DB_JT' and instr(object_name, '2') = 0 
        and object_name != 'KAP_TOPEXPORT')
		loop
			begin
				db_jt.p_executesql ( 'alter package ' || cObject.owner || '.' || cObject.object_name || ' compile body' );
			exception when others then
				dbms_output.put_line ( sqlerrm || cObject.owner || '.' || cObject.object_name );
			end;
		end loop;
	end loop;

	select count(*) into aPocetNevalidnich
			from all_objects
			where status = 'INVALID' and object_type = 'PACKAGE BODY'
				and owner in ( 'DB_DSA', 'DB_JT' ) and instr(object_name, '2') = 0
        and object_name != 'KAP_TOPEXPORT';

end;

/


PROMPT Completed P_RECOMPILEPACKAGE.sql
PROMPT


-- ============================================================================
-- Deploy: P_REPLACESPOLECNOST.sql
-- Category: procedures
-- ============================================================================

PROMPT Deploying P_REPLACESPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Procedure P_REPLACESPOLECNOST
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "DB_JT"."P_REPLACESPOLECNOST" ( aId int, aNewId int ) as begin

delete db_kostka.TOP_CIS_SPOLECNOST where id_ktgSpolecnost = aId;

update KP_ktg_FinancniInvestice set id_ktgspolecnost = aNewId where id_ktgspolecnost = aId;

update kp_dat_dokladNastroj set id_ktgSpolecnostProtistrana = aNewId where id_ktgSpolecnostProtistrana = aId;

update kp_dat_dokladNastroj set id_ktgSpolecnost = aNewId where id_ktgSpolecnost = aId;

update kp_dat_dokladNastrojCP set id_ktgSpolecnostProtistrana = aNewId where id_ktgSpolecnostProtistrana = aId;

update kp_dat_dokladNastrojCP set id_ktgSpolecnost = aNewId where id_ktgSpolecnost = aId;

update kp_dat_spolecnostListDetail set id_ktgSpolecnost = aNewId where id_ktgSpolecnost = aId;

update kp_ktg_ifrsPravidloDetail set id_ktgSpolecnost = aNewId where id_ktgSpolecnost = aId;

update kp_dat_manualnizdrojdat set id_ktgspolecnost = aNewId where id_ktgspolecnost = aId;

update kp_dat_denniagregace set id_ktgspolecnostproti = aNewId where id_ktgspolecnostproti = aId;

update kp_dat_denniagregace set id_ktgucetnispolecnostproti = aNewId where id_ktgucetnispolecnostproti = aId;

update kp_dat_dokladzdrojdatagregace set id_ktgspolecnost = aNewId where id_ktgspolecnost = aId;

update kp_dat_dokladzdrojdat set id_ktgspolecnost = aNewId where id_ktgSpolecnost = aId;

update KP_KTG_SPOLECNOST_GROUP set id_spolecnost = aNewId where id_Spolecnost = aId;

delete kp_ktg_spolecnost where id = aId;

commit;

end;

/


PROMPT Completed P_REPLACESPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: P_SAVE_SSRS_UA_RKC.sql
-- Category: procedures
-- ============================================================================

PROMPT Deploying P_SAVE_SSRS_UA_RKC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Procedure P_SAVE_SSRS_UA_RKC
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "DB_JT"."P_SAVE_SSRS_UA_RKC" (p_date IN VARCHAR2) AS

/* =======================================

Autor:          Miroslav Smrecek
Pouziti:        ukladani detailu UA RKC
Funkce:         snimek UA RKC bude drzen i v DB aby bylo mozne poustet kontroly
                ukladani probehne zavolanim procedury z SSRS
                za den zustane ulozeny pouze posledni snimek

===========================================*/

  l_date      DATE;
  l_cnt       NUMBER;

BEGIN

  SELECT dt_business_date
    INTO l_date
    FROM vw_ssrs_ua_rkc
   WHERE rownum = 1
     AND dt_business_date = TO_DATE(p_date,'dd.mm.yyyy');

  DELETE FROM SSRS_UA_RKC
   WHERE dt_business_date = l_date;

  INSERT INTO ssrs_ua_rkc
    (dt_business_date,
     s_listgroupcode,
     nazev_spolecnost,
     s_ucetunif,
     s_popis,
     nd_castkacnb,
     nd_castkalocal,
     nd_castkamena,
     s_mena,
     s_unifproti_ico,
     s_unifproti,
     s_listgroup,
     nd_kategorie_koef,
     nd_cistaangazovanost,
     c_banka,
     s_ucet,
     s_popisoriginal,
     group_code_zdroj,
     s_typ_obezretnost_portfolia,
     s_country,
     s_esa,
     s_nace,
     s_lei,
     c_konso_default_flag,
     s_shadow_bank,
     s_type_of_exposure,
     s_coll_reg_code,
     c_indiv_default_flag)
  SELECT dt_business_date,
         s_listgroupcode,
         nazev_spolecnost,
         s_ucetunif,
         s_popis,
         nd_castkacnb,
         nd_castkalocal,
         nd_castkamena,
         s_mena,
         s_unifproti_ico,
         s_unifproti,
         s_listgroup,
         nd_kategorie_koef,
         nd_cistaangazovanost,
         c_banka,
         s_ucet,
         s_popisoriginal,
         group_code_zdroj,
         s_typ_obezretnost_portfolia,
         s_country,
         s_esa,
         s_nace,
         s_lei,
         c_konso_default_flag,
         s_shadow_bank,
         s_type_of_exposure,
         s_coll_reg_code,
         c_indiv_default_flag
    FROM vw_ssrs_ua_rkc;

  l_cnt := sql%rowcount;
  db_jt.app.p_log_autonomous(trim('P_SAVE_SSRS_UA_RKC - date: '|| p_date ||' save rows: ' || l_cnt )) ;

  COMMIT;

  EXCEPTION
    WHEN no_data_found THEN
      db_jt.app.p_log_autonomous(trim('P_SAVE_SSRS_UA_RKC - date: '|| p_date ||' ERROR no_data_found: ' || sqlerrm )) ;
      raise_application_error(-20013, sqlerrm);

    WHEN OTHERS THEN
      db_jt.app.p_log_autonomous(trim('P_SAVE_SSRS_UA_RKC - date: '|| p_date ||' ERROR: ' || sqlerrm )) ;
      raise_application_error(-20013, sqlerrm);

END;

/


PROMPT Completed P_SAVE_SSRS_UA_RKC.sql
PROMPT


-- ============================================================================
-- Deploy: P_UA_RKC_RIZIKOVOST.sql
-- Category: procedures
-- ============================================================================

PROMPT Deploying P_UA_RKC_RIZIKOVOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Procedure P_UA_RKC_RIZIKOVOST
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "DB_JT"."P_UA_RKC_RIZIKOVOST" (p_date DATE) is
/* =======================================

Autor:      Miroslav Smrecek
Pouziti:    uprava vyjimky vyjmuti z limitu v UA RKC
Funkce:     rizikovost berie UA RKC defaultne z protistrany, ale je mozne vyplnit v dokladzdrojdatagregace u konkretneho zaznamu
            podla ciselniku dojde k danej uprave po importe banky, ktory sa berie za posledny import kvoli fondom v UA RKC
            ciselnik: import_pozice_ua_rkc_rizikovost
                S_UCETUNIF IS NULL - update vsetkych zaznamov pre danu protistranu
                S_UCETUNIF IS NOT NULL - porovna ho voci ucetunif a ucetoriginal a update prebehne pre konkretne zaznamy
Vytvoreno:  22.04.2025
HD:         KIS-41
Update:

===========================================*/

  l_id_doklad    NUMBER;
  l_cnt          NUMBER;

begin
--step01 - uprava rizikovosti podle ciselniku
  FOR i IN (  SELECT r.id_kis as id_ktgucetnispolecnost,
                     r.ico_protistrany as s_ico,
                     s.id as id_ktgspolecnost,
                     r.ucet_unif as s_ucetunif,
                     r.rizikovost as kategoriekoef
                FROM codebook_data_read.v_kis_ua_rkc_rizikovost_data@dwh_kis_read r
                LEFT JOIN kp_ktg_spolecnost s
                  ON r.ico_protistrany = s.s_ico 
               WHERE r.valid_time_to = to_date('31.12.2199', 'DD.MM.YYYY') -- pouze platne zaznamy
                 AND p_date BETWEEN r.bus_date_from AND r.bus_date_to -- zaznamy platne pro business date
            )
  LOOP
    IF i.id_ktgspolecnost IS NULL
      THEN
        db_jt.app.p_log_autonomous(trim('P_UA_RKC_RIZIKOVOST - FAIL:: protistrana s ICO ' ||i.s_ico|| ' neexistuje '));
        CONTINUE;
    END IF;
    
    SELECT id
      INTO l_id_doklad
      FROM kp_dat_doklad
     WHERE id_ktgucetnispolecnost = i.id_ktgucetnispolecnost
       AND s_uzivatel = 'denni'
       AND C_BASEDOKLAD = 1;

    IF i.s_ucetunif IS NULL
      THEN
        UPDATE kp_dat_dokladzdrojdatagregace
           SET KATEGORIEKOEF = i.kategoriekoef
         WHERE id_doklad = l_id_doklad
           AND id_ktgspolecnost = i.id_ktgspolecnost; 

        l_cnt := sql%rowcount;
        db_jt.app.p_log_autonomous(trim('P_UA_RKC_RIZIKOVOST - UPDATE:: ' ||l_cnt|| ' ucetni spol: ' ||i.id_ktgucetnispolecnost || ' prostistrana: ' || i.id_ktgspolecnost));
      ELSE
        UPDATE kp_dat_dokladzdrojdatagregace
           SET KATEGORIEKOEF = i.kategoriekoef
         WHERE id_doklad = l_id_doklad
           AND id_ktgspolecnost = i.id_ktgspolecnost
           AND ( s_ucetunif = i.s_ucetunif OR s_ucetoriginal = i.s_ucetunif); 

        l_cnt := sql%rowcount;
        db_jt.app.p_log_autonomous(trim('P_UA_RKC_RIZIKOVOST - UPDATE:: ' ||l_cnt|| ' ucetni spol: ' ||i.id_ktgucetnispolecnost || ' prostistrana: ' || i.id_ktgspolecnost));
      END IF;
    COMMIT;

  END LOOP;
--step02 - uprava rizikovosti pro zaznamy s hodnotou NULL (KIS-56)
  FOR j IN ( SELECT vw.ID_DOKLAD as doklad,
                    vw.id_unifproti  as id_prot,
                    vw.s_ucet as ucet,
                    vw.S_UCETUNIF as UCETORIGINAL
               FROM db_jt.vw_ext_dokladuverovapozice vw
              WHERE id_doklad IN (SELECT DISTINCT d.ID
                                    FROM db_jt.kp_rel_subkonsolidaceclen c,
                                         db_jt.kp_ktg_subkonsolidace s,
                                         db_jt.kp_ktg_ucetnispolecnost us,
                                         db_jt.kp_dat_doklad d
                                   WHERE us.ID = c.id_ktgucetnispolecnost
                                     AND s.id_ktgucetnispolecnost = c.id_ktgsubkonsolidace
                                     AND c.c_clen = '1'
                                     AND c.id_cissubtypclenstvi = 1
                                     AND s.id_ktgucetniskupina = 1
                                     AND d.id_ktgucetnispolecnost = us.ID
                                     AND d.dt_datum = p_date --TO_DATE('30.06.2025', 'DD.MM.YYYY')
                                     and s.ID_KTGUCETNISPOLECNOST  = 10344
                                     AND d.nl_krok IN (1, 2)
                                     AND d.c_basedoklad = 1 )
                AND vw.s_locale = 'cs_CZ'
                AND vw.S_UNIFPROTI_ICO IS NOT NULL
                AND vw.ND_KATEGORIE_KOEF IS NULL ) 
    LOOP
      UPDATE kp_dat_dokladzdrojdatagregace ag
         SET KATEGORIEKOEF = 1
       WHERE ID_DOKLAD = j.doklad
         AND S_UCET = j.ucet
         AND S_UCETORIGINAL = j.UCETORIGINAL
         AND ID_KTGSPOLECNOST = j.id_prot 
         AND KATEGORIEKOEF IS NULL;
      
      l_cnt := sql%rowcount;
      db_jt.app.p_log_autonomous(trim('P_UA_RKC_RIZIKOVOST - UPDATE:02: ' ||l_cnt|| ' id doklad: ' ||j.doklad || ' prostistrana: ' || j.id_prot));
    END LOOP;
  COMMIT;
 
  EXCEPTION
    WHEN OTHERS then
      db_jt.app.p_log_autonomous(trim('P_UA_RKC_RIZIKOVOST - ERROR:: ' ||sqlerrm));

end P_UA_RKC_RIZIKOVOST;

/


PROMPT Completed P_UA_RKC_RIZIKOVOST.sql
PROMPT


-- ============================================================================
-- Deploy: P_UCETNISPOLECNOSTLINK.sql
-- Category: procedures
-- ============================================================================

PROMPT Deploying P_UCETNISPOLECNOSTLINK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Procedure P_UCETNISPOLECNOSTLINK
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "DB_JT"."P_UCETNISPOLECNOSTLINK" ( id_spol int, mena varchar2 ) as
PRAGMA AUTONOMOUS_TRANSACTION;
begin

    update kp_ktg_ucetnispolecnost set kp_ktg_ucetnispolecnost.s_mena = mena where kp_ktg_ucetnispolecnost.id = id_spol;

commit;
end p_ucetnispolecnostlink;

/


PROMPT Completed P_UCETNISPOLECNOSTLINK.sql
PROMPT


-- ============================================================================
-- Deploy: RELOADCISAPPUSER.sql
-- Category: procedures
-- ============================================================================

PROMPT Deploying RELOADCISAPPUSER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Procedure RELOADCISAPPUSER
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "DB_JT"."RELOADCISAPPUSER" as
begin
	delete db_kostka.top_cis_appUser;
/*
	INSERT INTO db_kostka.top_cis_appUser (
		id, s_userId, s_krestni, s_prijmeni,
		s_titulyPred, s_titulyPo )
	SELECT U.ID,
		   U.S_USERID,
	       U.S_KRESTNI,
		   U.S_PRIJMENI,
		   U.S_TITULYPRED,
		   U.S_TITULYPO
	FROM KTG_APPUSER U
	WHERE U.C_ARCHIVNI <> '1'
	  AND U.C_OLAP = '1';
*/
	commit;
end;

/


PROMPT Completed RELOADCISAPPUSER.sql
PROMPT


-- ============================================================================
-- Deploy: SYNC_DW_CIS_ISIT_APLIKACE.sql
-- Category: procedures
-- ============================================================================

PROMPT Deploying SYNC_DW_CIS_ISIT_APLIKACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Procedure SYNC_DW_CIS_ISIT_APLIKACE
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "DB_JT"."SYNC_DW_CIS_ISIT_APLIKACE" 
is
BEGIN
  execute immediate 'delete from DW_CIS_ISIT_APLIKACE';
  INSERT
  INTO DW_CIS_ISIT_APLIKACE
    (
      ISIT_APLIKACE_KEY
      /*novy sloupec*/
      ,
      ISIT_APLIKACE_DATA_KEY
      /*novy sloupec*/
      ,
      S_NAZEV,
      S_POPIS,
      DT_PLATNOSTOD,
      DT_PLATNOSTDO
    )
  SELECT ISIT_APLIKACE_KEY,
    ISIT_APLIKACE_DATA_KEY,
    S_NAZEV,
    S_POPIS,
    BUS_DATE_FROM,
    BUS_DATE_TO
  FROM V_REF_ISIT_APLIKACE@DWH_KIS_READ;
  commit;
   exception
                when others then
                                rollback;
                                app.p_log_autonomous(SUBSTRB ('SYNC_DW_CIS_ISIT_APLIKACE err: '|| SQLCODE  ||SQLERRM,1,4000));
                                raise_application_error ( -20007,'An error was encountered'  || SQLERRM);
 
               end;

/


PROMPT Completed SYNC_DW_CIS_ISIT_APLIKACE.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/PROCEDURES/SYNC_DW_CIS_ISIT_BUDGET.sql: 'utf-8' codec can't decode byte 0x9e in position 330: invalid start byte


-- ============================================================================
-- Deploy: SYNC_DW_CIS_ISIT_DRUH_NAKLADU.sql
-- Category: procedures
-- ============================================================================

PROMPT Deploying SYNC_DW_CIS_ISIT_DRUH_NAKLADU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Procedure SYNC_DW_CIS_ISIT_DRUH_NAKLADU
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "DB_JT"."SYNC_DW_CIS_ISIT_DRUH_NAKLADU" 
AS
BEGIN
  execute immediate 'delete from DW_CIS_ISIT_DRUH_NAKLADU';
  INSERT
  INTO DW_CIS_ISIT_DRUH_NAKLADU
    (
      ISIT_DRUH_NAKLADU_KEY
      /*novy sloupec*/
      ,
      ISIT_DRUH_NAKLADU_DATA_KEY
      /*novy sloupec*/
      ,
      S_NAZEV,
      S_POPIS,
      DT_PLATNOSTOD,
      DT_PLATNOSTDO
    )
  SELECT ISIT_DRUH_NAKLADU_KEY,
    ISIT_DRUH_NAKLADU_DATA_KEY,
    S_NAZEV,
    S_POPIS,
    BUS_DATE_FROM,
    BUS_DATE_TO
  FROM V_REF_ISIT_DRUH_NAKLADU@DWH_KIS_READ;
  commit;
   exception
                when others then
                                rollback;
                                app.p_log_autonomous(SUBSTRB ('SYNC_DW_CIS_ISIT_DRUH_NAKLADU err: '|| SQLCODE  ||SQLERRM,1,4000));
                                raise_application_error ( -20007,'An error was encountered'  || SQLERRM);
 
               end;

/


PROMPT Completed SYNC_DW_CIS_ISIT_DRUH_NAKLADU.sql
PROMPT


-- ============================================================================
-- Deploy: SYNC_DW_CIS_ISIT_TYP_POLOZKY.sql
-- Category: procedures
-- ============================================================================

PROMPT Deploying SYNC_DW_CIS_ISIT_TYP_POLOZKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Procedure SYNC_DW_CIS_ISIT_TYP_POLOZKY
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "DB_JT"."SYNC_DW_CIS_ISIT_TYP_POLOZKY" 
AS
BEGIN
  execute immediate 'delete from DW_CIS_ISIT_TYP_POLOZKY';
  INSERT
  INTO DW_CIS_ISIT_TYP_POLOZKY
    (
      ISIT_TYP_POLOZKY_KEY
      /*novy sloupec*/
      ,
      ISIT_TYP_POLOZKY_DATA_KEY
      /*novy sloupec*/
      ,
      S_NAZEV,
      S_POPIS,
      DT_PLATNOSTOD,
      DT_PLATNOSTDO
    )
  SELECT ISIT_TYP_POLOZKY_KEY,
    ISIT_TYP_POLOZKY_DATA_KEY,
    S_NAZEV,
    S_POPIS,
    BUS_DATE_FROM,
    BUS_DATE_TO
  FROM V_REF_ISIT_TYP_POLOZKY@DWH_KIS_READ;
 commit;
   exception
                when others then
                                rollback;
                                app.p_log_autonomous(SUBSTRB ('SYNC_DW_CIS_ISIT_TYP_POLOZKY err: '|| SQLCODE  ||SQLERRM,1,4000));
                                raise_application_error ( -20007,'An error was encountered'  || SQLERRM);
 
               end;

/


PROMPT Completed SYNC_DW_CIS_ISIT_TYP_POLOZKY.sql
PROMPT


-- ============================================================================
-- Deploy: SYNC_DW_CIS_ISIT_TYP_SW.sql
-- Category: procedures
-- ============================================================================

PROMPT Deploying SYNC_DW_CIS_ISIT_TYP_SW.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Procedure SYNC_DW_CIS_ISIT_TYP_SW
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "DB_JT"."SYNC_DW_CIS_ISIT_TYP_SW" 
AS
BEGIN
   execute immediate 'delete from DW_CIS_ISIT_TYP_SW';

  INSERT
  INTO DW_CIS_ISIT_TYP_SW
    (
      ISIT_TYP_SW_KEY
      /*novy sloupec*/
      ,
      ISIT_TYP_SW_DATA_KEY
      /*novy sloupec*/
      ,
      S_NAZEV,
      S_POPIS,
      DT_PLATNOSTOD,
      DT_PLATNOSTDO
    )
  SELECT ISIT_TYP_SW_KEY,
    ISIT_TYP_SW_DATA_KEY,
    S_NAZEV,
    S_POPIS,
    BUS_DATE_FROM,
    BUS_DATE_TO
  FROM V_REF_ISIT_TYP_SW@DWH_KIS_READ;
 commit;
   exception
                when others then
                                rollback;
                                app.p_log_autonomous(SUBSTRB ('SYNC_DW_CIS_ISIT_TYP_SW err: '|| SQLCODE  ||SQLERRM,1,4000));
                                raise_application_error ( -20007,'An error was encountered'  || SQLERRM);
 
               end;

/


PROMPT Completed SYNC_DW_CIS_ISIT_TYP_SW.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/PROCEDURES/SYNC_ISIT_TABULKY.sql: 'utf-8' codec can't decode byte 0xe1 in position 599: invalid continuation byte


-- ============================================================================
-- PHASE: Deploy PACKAGE SPECIFICATIONS (37 files)
-- ============================================================================

PROMPT
PROMPT ============================================================================
PROMPT Deploying PACKAGE SPECIFICATIONS (37 files)
PROMPT ============================================================================
PROMPT


-- ============================================================================
-- Deploy: APP.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying APP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package APP
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."APP" as
	procedure p_setAkce ( aAkce varchar2 );
	procedure p_setUser ( aUzivatel varchar2, aAkce varchar2 );
	procedure p_setModul ( aUzivatel varchar2, aModul varchar2, aAkce varchar2 );
	procedure p_setModul ( aUzivatel varchar2, aModul varchar2, aAkce varchar2, aMerit char );
	function f_getSessionID return number;
	PRAGMA RESTRICT_REFERENCES ( f_getSessionID, RNDS, RNPS, TRUST, WNDS, WNPS );
	myModul varchar2(48) := 'KIS - generovani dokladu';

	procedure output_line (pstrText in varchar2);
	procedure p_log ( aText varchar2 );
                
   procedure p_log ( aLog boolean, aText varchar2 );
   PROCEDURE p_log_autonomous ( aText VARCHAR2 );
   procedure p_log_dwh (code number, text varchar2, business_date date);  
   
   -- cache pro uzivatele, ktery spousti z webu nejakou proceduru
   -- je to kvuli tomu, abych si pak nemusel toho uzivatele predavat z procedury do procedury pomoci parametru
   uzivatel varchar2(64);
   
end;

/


PROMPT Completed APP.sql
PROMPT


-- ============================================================================
-- Deploy: CALCNASTROJEUTIL.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying CALCNASTROJEUTIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package CALCNASTROJEUTIL
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."CALCNASTROJEUTIL" as

-- *********************************************************************************************************************
-- 			tableOpravkyNastroj : bude udrzovat info o nastrojich ktere jsem OK zaradil a kterym musim hledat nesparovane opravky
-- *********************************************************************************************************************
	TYPE tRowNastrojOpravky IS record (
		nl_poradiList int,
		nl_radek int
	);
	TYPE tTableOpravkyNastroj IS TABLE OF tRowNastrojOpravky index by binary_integer;
	tableOpravkyNastroj tTableOpravkyNastroj;

	procedure addOpravka ( aList int, aRadek int );

-- *********************************************************************************************************************
-- 			tableUcetXUcet : collection ktera cachuje definice ucetXucet podle ktere parujeme zavisle transakce (napr. opravky)
-- *********************************************************************************************************************
	TYPE tRowUcetXUcet IS record (
		s_ucet_1 kp_def_ucetvazbaucet.s_ucet_1%TYPE,
		s_ucet_2 kp_def_ucetvazbaucet.s_ucet_2%TYPE,
		id_ktgDoklad kp_def_ucetvazbaucet.id_ktgDoklad%TYPE,
		id_typ kp_def_ucetvazbaucet.id_typ%TYPE,
		id_implicitniParent KP_dat_DokladNastroj.id%TYPE
	);
	TYPE tTableUcetXUcet IS TABLE OF tRowUcetXUcet index by binary_integer;
	tableUcetXUcet tTableUcetXUcet;

	procedure p_saveUcetXUcet ( aIDTyp int, aUcet varchar2, aUcet2 varchar2, aDatum date, aIdKtgDoklad int, aIdParent int );
	function f_getCacheImplParent ( aIDTyp int, aUcet varchar2, aIdKtgDoklad int ) return int;

-- *********************************************************************************************************************
-- 			tabKtgNastroj : collection pro cache nazvu nastroju
-- *********************************************************************************************************************
	TYPE tRowKtgNastroj IS record (
		id int,
		s_popis KP_ktg_typNastroje.s_popis%TYPE
	);
	TYPE tArrayKtgNastroj is table of tRowKtgNastroj index by binary_integer;
	tabKtgNastroj tArrayKtgNastroj;



	function f_getIdTypOperace ( aIdTypNastroj int, aKind char, aTyp char, aPCID char, aCisSubjekt int, aDatum date ) return int;
	PRAGMA RESTRICT_REFERENCES (f_getIdTypOperace, RNDS, RNPS, TRUST, WNDS, WNPS );
	function f_testTypOperaceImplBan ( aId int, aIdTypNastroj int, aPlatnostOd date, aPlatnostDo date ) return int;
	PRAGMA RESTRICT_REFERENCES (f_testTypOperaceImplBan, RNDS, RNPS, TRUST, WNDS, WNPS );
	function f_testTypOperaceImplOst ( aId int, aIdTypNastroj int, aPlatnostOd date, aPlatnostDo date ) return int;
	PRAGMA RESTRICT_REFERENCES (f_testTypOperaceImplOst, RNDS, RNPS, TRUST, WNDS, WNPS );
	function f_getProduktUcet ( aN1 varchar2, aN2 varchar2 ) return varchar2;
	PRAGMA RESTRICT_REFERENCES (f_getProduktUcet, RNDS, RNPS, TRUST, WNDS, WNPS );
--	function f_getUcetVazbaUcet ( aIDTyp int, aUcet varchar2, aDatum date, aIdKtgDoklad int ) return varchar2;
--	PRAGMA RESTRICT_REFERENCES (f_getUcetVazbaUcet, RNDS, RNPS, TRUST, WNDS, WNPS );
	function f_getCharTypVykaz ( aUcet varchar2, aDatum date, aIdKtgDoklad int ) return char;
	PRAGMA RESTRICT_REFERENCES (f_getCharTypVykaz, RNDS, RNPS, TRUST, WNDS, WNPS );
	function f_getIDDokladPolozkaOpravna ( aIdPolozka int ) return kp_dat_dokladpolozka%ROWTYPE;
	PRAGMA RESTRICT_REFERENCES (f_getIDDokladPolozkaOpravna, RNDS, RNPS, TRUST, WNDS, WNPS );


	function f_getUcelUveru ( aPcId char ) return char;
	PRAGMA RESTRICT_REFERENCES ( f_getUcelUveru, RNDS, RNPS, TRUST, WNDS, WNPS );

end;

/


PROMPT Completed CALCNASTROJEUTIL.sql
PROMPT


-- ============================================================================
-- Deploy: KAP_BUDGET.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying KAP_BUDGET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package KAP_BUDGET
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."KAP_BUDGET" as
  -- mustky
  procedure p_KpDefBudgetMustek( aAkce char, aId IN OUT int, aIdCisSubject int, aIdCisTypTran int, aUcet varchar2, aUzivatel varchar2, aDatumOd date, aDatumDo date );

  -- budget
  procedure p_vytvoritBudget(aIdKtgOdbor int, aDatumOd date, aDatumDo date);

  procedure p_vytvoritBudgety(aDatumOd date, aDatumDo date);
  
  procedure p_vytvoritBudgetProjekt(aIdKtgProjekt int, aDatumOd date, aDatumDo date);
  
  procedure p_vytvoritBudgetyProjekt(aDatumOd date, aDatumDo date);

  procedure p_updateBudgetPolozka(aId in out int, aIdBudget int, aIdCisTypTran int, aCastka number, aMena varchar2,
                                  aPoznamka varchar2, aUserId int);

  procedure p_schvaleno(aAkce char, aId int, aTypOO int, aUserId int);

  procedure p_schvalenoVse(aAkce char, aIdBudget int, aTypOO int, aUserId int);
  
  procedure p_schvalenoVseTopAdmin(aAkce char, aIdBudget int, aUserId int);

  procedure p_schvalenoVseGestor(aAkce char, aIdCisTypTran int, aUserId int);
  
  procedure p_deleteBudget(aIdBudget int);
end;

/


PROMPT Completed KAP_BUDGET.sql
PROMPT


-- ============================================================================
-- Deploy: KAP_CACHE.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying KAP_CACHE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package KAP_CACHE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."KAP_CACHE" as
	procedure p_readDoklad ( aFromDB boolean, aId int, aLevel int default 0 );
	rowDoklad KP_dat_Doklad%ROWTYPE;

	procedure p_readUcetSpol ( aFromDB boolean, aId int );
	rowUcetSpol Kp_ktg_ucetniSpolecnost%ROWTYPE;

	function f_isDokladZluty return boolean;

end;

/


PROMPT Completed KAP_CACHE.sql
PROMPT


-- ============================================================================
-- Deploy: KAP_CALCULATEDOKLAD.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying KAP_CALCULATEDOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package KAP_CALCULATEDOKLAD
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."KAP_CALCULATEDOKLAD" AS

    procedure p_calculateSumace ( aIdDoklad number );
    procedure p_updatePolozka ( aId int, aMena varchar2, aCastkaMena number, aCastkaLocal number, aCastkaPrepocet number, aRelativne int );
end;

/


PROMPT Completed KAP_CALCULATEDOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: KAP_DOKLAD.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying KAP_DOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package KAP_DOKLAD
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."KAP_DOKLAD" as

	function f_getParovy ( aIdDoklad int, aIdSpolecnost int, aDokladRow KP_dat_doklad%ROWTYPE ) return int;
	function f_getIdKtgDoklad ( aCisDoklad int, aCisSubjekt int ) return int;

	procedure p_delete ( aIdDoklad int );

   procedure p_deleteDatum ( aDatumOd date, aDatumDo date, aUzivatel varchar2 );

	procedure p_create ( aIdFronta int, aHlaskaLog varchar2, aDatumMereni date default sysdate );

   procedure p_createEmpty ( aIdDoklad int, aFromDB boolean default true );
   
   procedure p_insertProtokolUcetProblem ( aCommit char, aTyp char, aIdDoklad int, aKod char, aUcet varchar2, aData varchar2  );

	procedure p_kontrolaHospVysledek ( aIdDoklad int );

	procedure p_kontrolaAktivaPasiva ( aIdDoklad int );

	procedure p_ulozPocatecniStavy ( aIdDoklad int );

   procedure p_upravyPoLoad ( aIdFronta int, aIdDoklad int );

   procedure p_doplneniTransakci ( aManualni boolean );

	procedure p_createKisIFRS ( aIdDoklad int, aIdFronta int );

	procedure p_createMisDoklad ( aIdFronta int, aIdKtgUcetniSpolecnost int, aDatum date, aUzivatel varchar2 );
   
   -- vraci pro aKod 'V' poradi vysledovky, 'A' - aktiv, 'P' - pasiv.  Kody odpovidaji hodnote sloupce report_kod z tabulky kp_cis_list
   function f_getPoradiListu ( aIdDoklad int, aKod char ) return int;

	procedure p_insertProtokol ( aCommit char, aRowProtokol KP_dat_DokladProtokol%ROWTYPE );
   procedure p_insertProtokol ( aCommit char, aIdDoklad int, aKod char, aHlaska varchar2, aVazbySkupina int, aDatum date default sysdate  );
	procedure p_insertProtokol ( aCommit char, aIdDoklad int, aKod char, aHlaska varchar2, aDatum date default sysdate  );
   procedure p_insertProtokol ( aKod char, aHlaska varchar2 );
   procedure p_commitProtokol;

	procedure p_setRowDefault ( aRow in out KP_dat_Doklad%ROWTYPE, aFull boolean default true );
end;

/


PROMPT Completed KAP_DOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: KAP_DOKLAD_CALCULATE.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying KAP_DOKLAD_CALCULATE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package KAP_DOKLAD_CALCULATE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."KAP_DOKLAD_CALCULATE" as

	-- vraci -1 v aId_1,aId_2 pokud nelze generovat a generuje jiz nekdo jiny
   -- %param aIdDoklad
   -- %param aIdDokladZdrojDat 	kvuli efektivite maji transakce v id_doklad cislo dokladu,
	--										ktery byl jako prvni vygenerovan. Takze IFRS a dalsi doklady
	--										nemaji u transakci id sveho dokladu, ale dokladu v kroku 1 - usetrim tim jeden pripravny update nad celou tabulkou transakci
   -- %param aFromDB
	procedure p_calculate ( aIdDoklad int, aIdDokladZdrojDat int, aFromDB boolean default true );

	procedure p_calculate ( aIdDoklad int, aIdDokladZdrojDat int, aInsertRelTran char, aFromDB boolean default true );

   procedure p_reCalculate ( aIdDoklad int, aFromDB boolean default true );

	-- dela ty "kamil" doklady - sumacni => mysleno z detailu dela podle predpisu strucnejsi agregovany doklad
	procedure p_createSumacni ( aId_1 in out int, aOldIdDoklad int,
			--aOldCisDoklad int, aNewCisDoklad int,
			aOldKrok int, aOldUcetniSpolecnost int, aOldDatum date, aOldSubkonsolidace int, aNewKrok int, aUzivatel varchar2 );

--	procedure p_kontrolaZarazeni ( aIdDoklad int, aFromDB boolean default true );

	function f_getTypNastroje ( aIdDokladPolozka int, aProdKind varchar2, aProdType varchar2 ) return int;

	rowDefListBunkaNastroj KP_Def_ListBunkaNastroj%ROWTYPE;
	-- bude v triggeru insert kp_dat_dokladZdrojDat pouzito k doplneni atributu transakce

	-- pro trigger, ktery pri urceni poradi protistran musi jeste dohledavat ucetniSpolecnost
	function f_getCacheUcetniSpolecnost ( aIdKtgSpolecnost int ) return int;

   -- pro zadane parametry najde v prevodovem mustku prvni "platny" ucet
   function f_getUcetFromMustek ( aDatum date, aKtgDoklad int, aZkratkaList char, aRadek int, aSloupec int ) return varchar2;

   procedure p_readCacheSpolecnost;

	x_debug boolean := false;

end;

/


PROMPT Completed KAP_DOKLAD_CALCULATE.sql
PROMPT


-- ============================================================================
-- Deploy: KAP_DOKUMENT.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying KAP_DOKUMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package KAP_DOKUMENT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."KAP_DOKUMENT" as
  procedure p_dokument(aAkce char, aId in out int, aIdCisDok int, aIdSpol int,
                       aPopis varchar2, aIdTypTran int, aTypizovana char, aTypizovanaOd date, aTypizovanaDo date,
					   aMena varchar2, aPisemne varchar2, aIdProti int, aProti varchar2, aCislo varchar2, aDtSplat date,
					   aIdZadavatel int, aIdCisStatus int, aPokladniTransakce char, aDtPozadDatumUhrady date,
					   aIdGestor int, aUserId int, aTypizLink int, aDuvodZruseni varchar2, retCheckChange out int,
					   aIdTypPreceneni int, aUcet varchar2, aUcet2 varchar2, aDPH char, aIdBudget int, aTTDeveloper int, aIdCisUhrada int,
					   aIdSpolB int, aUcetB varchar2, aUcetB2 varchar2, cerpatRezervu varchar2 default null,
              DT_NAVYSENI_SCHVALENO date, DT_NAVYSENI_ZAMITNUTO date, S_NAVYSENI_ZAMITNUTO varchar2, ID_NAVYSENI_MB number /* 07 2008 Navyseni budgetu*/                                      
              ,aCISLOFA VARCHAR2, aDATPRIJ	date, aCASTKA	number,aFEIS_PRENOS	char, aDATDPH date, aDATODES date, aTYP_FKT int, aCapex_Opex char, aDATVYSTAVENI date );   /* prenos do feis*/

  procedure p_checkBudgetPresun(aId int);

  procedure p_setUhrada(aId int, aIdCisUhrada int);

  procedure p_statusChange(aId int, aCisStatus int);

  procedure p_setRealDatumUhrady(aId int, aDtUhrady date, aIdUcSpolUhrada int);
  
  procedure p_dokumentRadek(aAkce char, aId in out int, aIdDokument int, aIdOdbor int, aIdProjekt int, aCastka number, 
                            aKomentar varchar2, aKPref char, retCheckChange out int, aIdTypTran int,aIdObjRadek int:=null, aIdBankar int:=null, aIsitBudget varchar2 :='' );
							
  procedure p_resetOO(aIdRadek int);						

  function checkBudget(aIdRadek int default null) return varchar2;

  function checkBudgetProjekt(aIdRadek int default null) return varchar2;  

  procedure p_schvaleno(aAkce char, aId int, typOO int, aUserId int);

  procedure p_sUcetni(aAkce char, aId int, aUserId int);

  procedure p_sUcetniUhrada(aAkce char, aId int, aUserId int);
    
  procedure p_sGestor(aAkce char, aId int, aUserId int);

  procedure p_prefakturovano(aAkce char, aId int, aUserId int);

  procedure p_setUserSpolTyp(aUserId int, aIdCisSpolTyp int, aIdUcSpol int, aCountry varchar2);

  procedure p_klonujRadek(aIdDoc int, aIdRadek int, aCastka number);

  procedure p_zmenaCastky(aIdRadek int, aCastka number);

  procedure p_zamitnoutRadek(aAkce varchar2, aIdRadek int, aDuvod varchar2, aUserId int);

  procedure p_zamitnoutZadavatel(aId int, aDuvod varchar2);

  procedure p_zamitnoutGestor(aAkce varchar2, aId int, aDuvod varchar2);
  
  procedure p_zamitnoutUcetni(aAkce varchar2, aId int, aDuvod varchar2, aUserId int);
  
  procedure p_klonujDokument(aId in out int, aUserId int);

  procedure p_odbor(aAkce char, aId in out int, aIdSpol int, aNazev varchar2, aKod varchar2, aOsoba int, aDatumOd date, aDatumDo date,
					aUsek int, aMngSeg int, aUroven1 number, aBudgeting char, aArchivni char, aSponzor int, aUzivatel varchar2);

  procedure p_misUrovenSchvalovani (aIdTypTransakce int, aUroven int, aUrovenSchvalovani number, aIdUcSpol int, aIdProjekt int);
  procedure p_sMB(aAkce char, aId int, aUserId int);
  procedure p_zamitnoutNavyseniBudgetu(aAkce varchar2, aId int, aDuvod varchar2);
  procedure P_SETGESTORTRANSAKCESEGMENT  (  idRow int, idSegment int, idTran int, idGestor int   );
  procedure P_SETGESTORTRANSAKCESPOLOCNOST  (  idRow int, idSpol int, idTran int, idGestor int   );
  Procedure P_Dokument2feis ( Kp_Dat_Dokumnet_Id db_jt.Kp_Dat_Dokument.Id%Type );
  Procedure P_Feis2Dokument ( Kp_Dat_Dokumnet_Id db_jt.Kp_Dat_Dokument.Id%Type );  
end;

/


PROMPT Completed KAP_DOKUMENT.sql
PROMPT


-- ============================================================================
-- Deploy: KAP_GUI.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying KAP_GUI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package KAP_GUI
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."KAP_GUI" as
	/* pomocne procedury pro front GUI rozhrani */

	/*
		procedura manipulujici s tabulkou KpTmpDefListBunkaUcet
		umoznuje provadet podle parametru aAkce I:insert, U:update, D:delete zaznamu v tabulce
		aMustekUzivatel - identifikuje s jakou sadou mustku se bude pracovat ( 'master', nebo jina )
		aUzivatel - kdo provadi zmenu
	*/
	procedure p_KpDefListBunkaUcet ( aAkce char, aId IN OUT int, aIdDefListBunka int, aUcet varchar2, aUcetSuma char,
		aValidovatMasku char, aUcetMinus varchar2, aEvidovatProtistranu varchar2, aMenovaPozice char, aUverovaPozice char,
		aMustekUzivatel varchar2, aUzivatel varchar2, aIdKtgDoklad int );

	/*
		procedura ktera ukonci zadanou definici v prevodovem mustku a to tak ze ji nastavi platnost do na
		vstupni parametr a nasledne zalozi novou shodnou kopii, kterou si muze uzivatel poeditovat
	*/
	procedure p_KpDefListBunkaUcetPlatnost ( aId int, aPlatnostDo date, aMustekUzivatel varchar2, aUzivatel varchar2, aKonecna char );

	procedure p_KpDefListBunkaUcetStart ( aId int, aPlatnostOd date, aMustekUzivatel varchar2, aUzivatel varchar2 );

	procedure p_KpInvesticeEmise (
			aAkce char, aId IN OUT int, aIdKtgFinancniInvestice int,
			aDatumOd date, aDatumDo date,
			aPocetKusu int, aNominal number, aZakladniJmeni number, aInvestice char, aNenulovy char, aUzivatel varchar2 );

	procedure p_KpInvesticeEmisePlatnost ( aId int, aPlatnostDo date, aUzivatel varchar2 );


	procedure p_KPKtgDokladMajUcastVyjimka (
			aAkce char, aId IN OUT int, aIdKtgDoklad int,
			aUcet varchar2, aPopis varchar2, aUzivatel varchar2 );


	procedure p_KpMajetkovaUcast ( aAkce char, aId IN OUT int,
		aIdKtgUcetniSpolecnost int, aIdKtgFinInvesticeEmise int,
		aDatumOd date, aDatumDo date,
		aUcet varchar2, aIdCisMUTypTransakce int, aIdCisMUZpusob int,
		aPocetKusu int, aMenaTransakce varchar2, aCenaTransakceKus number,
		aObjemTransakce number, aKurz number, aMenaUcetni varchar2, aCenaUcetniKus number,
		aObjemUcetni number, aKoupenoOd int, aUzivatel varchar2 );

	procedure p_KpMajetkovaUcastPlatnost ( aId int, aPlatnostDo date, aUzivatel varchar2 );

	procedure p_KPIfrsPravidlo ( aAkce char, aId IN OUT int, aIdKtgUcetniSpolecnost int,
		aIdPoradi int, aIdCisIfrsTypPravidlo int,
		aPoznamka varchar2, aValidaceUcet varchar2, aValidaceHodnota number,
		aDatumOd date, aDatumDo date,
		aUzivatel varchar2 );

	procedure p_KPIfrsPravidloPlatnost ( aId int, aPlatnostDo date, aUzivatel varchar2 );


	procedure p_KPIfrsPravidloDetail ( aAkce char, aId IN OUT int, aIdKtgIfrsPravidlo int,
			aIdPoradi int, aIdPoradiPodminka int, aIdCisIfrsPravDetailTyp int,
			aPoznamka varchar2, aUcetMD varchar2, aUcetD varchar2,
			aCastka number, aMena varchar2, aCastkaLokal number,
			aUcetZbytek varchar2, aPodminka varchar2, aIdKtgUcetniSpolecnost int, aIdKtgSpolecnost int,
			aIdPoradiKorekceFix int, aIdProjekt int, aIdOdbor int, aUzivatel varchar2,
			aUUMd varchar2, aUUD varchar2 );


	procedure p_KPDokladManualEditBunka ( aAkce char, aIdAgregace in out int, aIdDoklad int, aIdDokladDefBunka int,
			aUcet varchar2, aMena varchar2, aCastkaMena number,
			aCastkaLocal number, aIdKtgSpolecnost int, aUzivatel varchar2 );

	procedure p_KpDokladManualReadVazby(aIdDoklad int, aIdKtgUcetniSpolecnost int, aPoradiList int,
		  							aRadek int, aMena varchar2, aUcet varchar2, aCastkaMena number,
									aCastkaLocal number, aUzivatel varchar2);

	procedure p_KpDokladManualExport( aIdDoklad int, aPs char );

	procedure p_refreshDBLink;

	procedure p_updateSpolecnostCloseDate;

    procedure p_KpSubKonsolidace (
		aAkce char, aIdKtgUcetniSpolecnost IN OUT int, aIdKtgUcetniSkupina int,
		aPoradi int, aMena varchar2, aNazev varchar2,
		aDatumOd date, aDatumDo date, aTypKursListek varchar2, aListKR char, aUzivatel varchar2,
		aDatumArchivace date, aKrokClenu int, aExportFlag char );

	procedure p_KPRelSubKonsolidaceClen (
		aAkce char, aIdSubKonsolidace int, aIdKtgUcetniSpolecnost int, aTypClenstvi int, aPomerUcasti number, aClen char,
		aDatumOd date, aDatumDo date, aDatumVazbyOd date, aDatumVazbyDo date, aPropisujVazby char, aUzivatel varchar2, aOdOrig date, aPrestup int );

	procedure p_KPSubKonsolidacePravidlo (
		aAkce char, aId IN OUT int, aPoradi int, aIdCisIfrsTypPravidlo int,
		aIdKtgSubKonsolidace int, aIdKtgUcetniSpolecnost int, aIdKtgSubKonsolidaceEtapa int,
		aDatumOd date, aDatumDo date, aPoznamka varchar2,
		aValidaceRadek int, aValidaceList char, aValidaceHodnota number,
		aUzivatel varchar2 );

	procedure p_KPSubKonPravidloDetail (
		aAkce char, aId IN OUT int, aIdKtgSubKonsolidacePravidlo int, aPoradi int,
		aIdPoradiPodminka int, aIdCisIfrsPravDetailTyp int,
		aPoznamka varchar2, aRadek int, aPoradiList int, aCastka number, aVzorec varchar2,
		aUcetZbytek varchar2, aPodminka varchar2, aIdKtgUcetniSpolecnost int, aIdKtgSubkonsolidace int, aUzivatel varchar2,
		aIdProtistrana int );

	procedure p_dokladZamek ( aAkce char, aIdDoklad int, aKrok int, aTypeUser int, aUzivatel varchar2 );

	procedure p_KPDokladVazbyParovani(aIdDoklad int, aIdUcSkup int, aUcet varchar2, aPoradiList int, aRadek int,
                                  aUcSpolTo int, aCastkaMena number, aCastkaLocal number, aIdVazby int, aIndexPM int, aUzivatel varchar2);

    procedure p_KpDatDanoveSazby(aAkce char, aId int, aStat varchar2, aPasmoOd number, aPasmoDo number,
                                 aMena varchar2, aSazba number, aPlatnostOd date, aPlatnostDo date);


	procedure p_changeVazbyAkceptace ( aNewStav char, aIdDoklad int, aIdKtgUcetniSkupina int, aIdKtgUcetniSpolecnost int, aUzivatel varchar2 );

	-- funkce ktera pro zadany doklad a protistranu dokladu zjistuje v jakem je stavu vazba
	-- vazba je mezi SpolecnostFrom (tu si najdu s aIdDoklad, proto ji nezadavam v parametrech )
	-- a SpolecnostTo. Obe strany maji povinnost oznacit, ze akceptuji vypocitane vazby
	-- proto pro dvojici spolecnosti existuje jako by pohled ze strany 'FROM' a ze strany 'TO'
	-- pro parametr aPohled = FROM se ptam v jakem stavu je status vazeb na leve strane (viz. formular JSP stranka), tedy zda jsou akceptovane
	-- vypoctene vazby pro spolecnostFrom
	-- pokud je aPohled = TO tak se ptam jak spravce spolecnosti TO oznacil vazby smerem k spolecnosti FROM
	-- vracim :
	--    O : doklad je OLD, to znamena, ze protistrana udelala regenerovani dokladu a ja koukam na stare cisla a je potreba nechat prepocitat vazby
	--	  W : vazby zatim nejsou akceptovane, jako by ve stavu WAIT
	--	  retezec s datumem a uzivatelem, ktery provedl akceptaci

	function f_getVazbyAkceptaceInfo ( aIdDoklad int,  aIdKtgUcetniSkupina int, aIdKtgUcetniSpolecnostTo int, aPohled varchar2 ) return varchar2;
	PRAGMA RESTRICT_REFERENCES (f_getVazbyAkceptaceInfo, RNDS, RNPS, TRUST, WNDS, WNPS );

	procedure p_KpDefUcet2UcetUnif ( aAkce char, aId IN OUT int, aIdCisUcetUnif int, aUcetPrim varchar2, aIdCisSubject int,
                                 aDatumOd date, aDatumDo date, aUzivatel varchar2, aSumaTyp varchar2, 
								 aEvidovatProtistranu varchar2, aTestMajUcast char );

	procedure p_KpCisUcetUnif ( aAkce char, aId IN OUT int, aUcet varchar2, aPopis varchar2, aLocale varchar2, aUzivatel varchar2, aVazby char, aClass char, aShare char, aMulti char, aCountry char, aType char, aLimit varchar2, aMaturity char );

	procedure p_KpSubKonsolidaceSetMatka ( aIdKtgSubkonsolidace int, aIdKtgUcetniSpolecnostMatka int, aUzivatel varchar2 );

	procedure p_typSubPravidla(aIdCisTyp int, aIdSubkon int, aIdSpol int, aDtDatum date, aUzivatel varchar2);

	procedure p_KPTypSubPravidlo (
		aAkce char, aId IN OUT int, aPoradi int, aIdCisIfrsTypPravidlo int,
		aIdKtgTypSubEtapa int, aPoznamka varchar2, aIdDatumTyp int );

	procedure p_KPTypSubPravidloDetail (
		aAkce char, aId IN OUT int, aIdKtgTypSubPravidlo int, aPoradi int,
		aIdPoradiPodminka int, aIdCisIfrsPravDetailTyp int,
		aPoznamka varchar2, aRadek int, aPoradiList int, aVzorec varchar2,
		aUcetZbytek varchar2, aPodminka varchar2, aIdProtistrana int, aNulove char, aMatka char );
end;

/


PROMPT Completed KAP_GUI.sql
PROMPT


-- ============================================================================
-- Deploy: KAP_GUIV.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying KAP_GUIV.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package KAP_GUIV
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."KAP_GUIV" as

--procedure reloadBudgetTransakceDokl;
procedure reloadBudgetTransakceDokl(abudgetBanka char);
--procedure reloadBudgetProjTransakceDokl;
procedure reloadBudgetProjTransakceDokl(abudgetBanka char);
	procedure p_generovaniZamek ( aAkce char, aIdCisDoklad int, aIdKtgUcSpol int, aDatum date, aUzivatel varchar2, aIdCisZamek int, aKrok int );

	procedure p_vazbyZamek ( aAkce char, aIdDoklad int, aIdKtgUcSkup int, aIdKtgUcSpolTo int, aUzivatel varchar2 );

	function f_getGenerovaniZamek ( aIdCisDoklad int, aIdKtgUcSpol int, aDatum date, aIdCisZamek int, aKrok int ) return varchar2;

	procedure p_genZamekZamitnuti ( aAkce char, aIdCisDoklad int, aIdKtgUcSpol int, aDatum date, aUzivatel varchar2, aIdCisZamek int, aDuvod varchar2, aKrok int );

	function f_getGenZamekZamitnuti ( aIdCisDoklad int, aIdKtgUcSpol int, aDatum date, aIdCisZamek int, aKrok int ) return varchar2;

	function f_getZamekTyp ( aIdSpol int, aDatum date ) return int;

	procedure p_zamkyDoklad ( aIdDoklad int );

    procedure p_KpDatManZdrojDat(aAkce char, aId int, aIdUcSpol int, aMena varchar2, aUcet varchar2, aCastkaMena number,
                             aCastkaLocal number, aPopis varchar2, aDatum date, aIdUcSpolUnif int, aIdSpol int,
							 aIdProjekt int, aIdOdbor int, aSetNull char, aTyp char, aIdProjektOld int, aIdOdborOld int, aUzivatel varchar2,
							 aPlatnostOd date, aPlatnostDo date, aUU varchar2);

    procedure p_KpKtgUcSpolPredavani(aAkce char, aIdUcSpol int, aIdCisPriorita number, aIdCisKategorie number, aAccStatus varchar2,
                                 aUzavrUcet varchar2, aDatum date, aUzivatel varchar2);

	procedure p_predavaniSchvaleno(aAkce char, aIdUcSpol int, typOO int, aUserId int);

	procedure p_KpDefKontrolaMajetkovaUcast(aAkce char, aId int, aIdSubject int, aUcetMaska varchar2, aPlatnostOd date, aPlatnostDo date,
	                                        aUzivatel varchar2);

    procedure p_KPDefUcetVazbaUcet(aAkce char, aId int, aIdKtgDoklad int, aUcet1 varchar2, aUcet2 varchar2, aPlatnostOd date, aPlatnostDo date,
	                           aPopis varchar2, aTyp int, aUzivatel varchar2);

	procedure p_refreshBudget;

	procedure p_denniSpousteni;

	procedure p_uveryPlneni;

	procedure p_pravaNaSpolecnosti( aUser varchar2, aTypPrava int, aVcetneSPVPARCL char, aUzivatel varchar2 );

	procedure p_pravaNaSpolecnostiKategorie( aUser varchar2, aTypPrava int, aKategorie int, aVcetneSPVPARCL char, aUzivatel varchar2 );

	procedure p_pravaNaVsechnySpolecnosti( aUser varchar2, aTypPrava int, aVcetneSPVPARCL char, aUzivatel varchar2 );

	procedure p_pravaNaSpolecnostiAll( aTypPrava int, aVcetneSPVPARCL char, aUzivatel varchar2 );

	procedure p_pravaNaSpolecnostiSkupiny( aUser varchar2, aTypPrava int, aIdSkupiny int, aUzivatel varchar2 );

	procedure p_deletePravaNaSpolecnosti( aUser varchar2, aUzivatel varchar2 );

	procedure p_deletePravaNaSpolecnosti( aUser varchar2, aTypPrava int, aVcetneSPVPARCL char, aUzivatel varchar2 );

	procedure p_insertPravoNaSpolecnost( aUser varchar2, aIdSpol int, aTypPrava int, aUzivatel varchar2 );

	procedure p_quaestorProjektOdbor( aIdSpol int, aPoCode varchar2, aRsCode varchar2, aIdProjekt varchar2, aIdOdbor varchar2 );

	procedure p_reloadDataOLAP;

	procedure p_spolecnostZpravyNastaveni;
    
    --esc 13.08.2018
    procedure p_pravaNaSpolecnostiHolding( aUzivatel varchar2 , aHolding number) ;
    
end;

/


PROMPT Completed KAP_GUIV.sql
PROMPT


-- ============================================================================
-- Deploy: KAP_KONST.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying KAP_KONST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package KAP_KONST
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."KAP_KONST" as
	MAX_PLATNOST date := to_date ( '1.1.2999', 'dd.mm.yyyy' );
	function getMaxPlatnost return date;
end;

/


PROMPT Completed KAP_KONST.sql
PROMPT


-- ============================================================================
-- Deploy: KAP_LOAD.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying KAP_LOAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package KAP_LOAD
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."KAP_LOAD" as

    type t_tabId is table of number  index by pls_integer; 

	-- procedura je spustena dvakrat, poprve taha data z externiho systemu a podruhe jenom transportuje z lokalni tabulky transakce ( pokud se to neudelalo hned napoprve )
	-- je to kvuli tomu, ze nejdrive vse natahnu z externiho systemu do DSA a pak nejdriv poslu jenom PS ke zpracovani a nasledne doplnim
	-- ucetni transakce a znovu zpracuji
	-- aJenomPS int ridi zda se z externiho systemu budou natahovat jenom PS nebo PS + transakce
	-- aPS int ridi co se posle ke zpracovani 1-jenom pocatecni stavy 2-jenom transakce
/*
	procedure loadDataTopas ( currentDoklad KP_dat_Doklad%ROWTYPE, currentSpolecnost KP_ktg_UcetniSpolecnost%ROWTYPE, aJenomPS int, aPS int );
	procedure loadDataSpin ( currentDoklad KP_dat_Doklad%ROWTYPE, currentSpolecnost KP_ktg_UcetniSpolecnost%ROWTYPE, aJenomPS int, aPS int );
	procedure loadDataQuaest ( currentDoklad KP_dat_Doklad%ROWTYPE, currentSpolecnost KP_ktg_UcetniSpolecnost%ROWTYPE, aTyp varchar2, aJenomPS int, aPS int );
	procedure loadSpolecnost ( aUzivatel varchar2 );
*/

	procedure loadDataTopas ( currentDoklad KP_dat_Doklad%ROWTYPE, currentSpolecnost KP_ktg_UcetniSpolecnost%ROWTYPE, currentDokladFronta KP_dat_DokladFronta%ROWTYPE, aPS int, aTyp char );
	procedure loadDataSpin ( currentDoklad KP_dat_Doklad%ROWTYPE, currentSpolecnost KP_ktg_UcetniSpolecnost%ROWTYPE, currentDokladFronta KP_dat_DokladFronta%ROWTYPE, aPS int );
	procedure loadDataQuaest ( currentDoklad KP_dat_Doklad%ROWTYPE, currentSpolecnost KP_ktg_UcetniSpolecnost%ROWTYPE, aTyp varchar2, currentDokladFronta KP_dat_DokladFronta%ROWTYPE, aPS int );
    procedure loadDataAIX ( currentDoklad KP_dat_Doklad%ROWTYPE, currentSpolecnost KP_ktg_UcetniSpolecnost%ROWTYPE, currentDokladFronta KP_dat_DokladFronta%ROWTYPE, aPS int, aTyp char ) ;

	procedure loadSpolecnost ( aUzivatel varchar2 );

	procedure p_refreshCennyPapir;

	-- nacita s primarnich systemu katalog ucetnich uctu a jejich popisu
	procedure p_reloadUctyOriginal;

    procedure p_deleteKtgSpolecnost ( aIdKtgSpolecnost kp_ktg_spolecnost.id%type );
    procedure p_deleteKtgSpolecnost ( aTabId t_tabId );


	-- slouzi pro trigger kdy nastavuje NULL hodnoty poc. stavu z roku 2005
	DEFAULT_PROJEKT int;
	DEFAULT_ODBOR int;


	function f_getTypPortfolio ( aIdKtgUcetniSpolecnost int, aDatum date, aKind char, aUcet varchar2 ) return char;
	PRAGMA RESTRICT_REFERENCES (f_getTypPortfolio, RNDS, RNPS, TRUST, WNDS, WNPS );

	x_debug boolean;

end;

/


PROMPT Completed KAP_LOAD.sql
PROMPT


-- ============================================================================
-- Deploy: KAP_NASTROJE.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying KAP_NASTROJE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package KAP_NASTROJE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."KAP_NASTROJE" as
	procedure p_doplnVazbySubkonsolidace ( aIdSubkonsolidace int, aDatum date, aUzivatel varchar2 );
	procedure p_agregujDoklad ( aIdDoklad int, aUzivatel varchar2 );
   procedure p_agregujDoklad ( aIdKtgUcetniSpolecnost int, aDatum date, aKrok int, aUzivatel varchar2 );
	function tmpGetProduktUcet ( aIdKtgTypNastroje int, aIdExtSystem2 tmp_nastrojData.id_extSystem2%TYPE, aIdExtSystem3 tmp_nastrojData.id_extSystem3%TYPE ) return tmp_nastrojData.id_extSystem2%TYPE;
	PRAGMA RESTRICT_REFERENCES ( tmpGetProduktUcet, RNDS, RNPS, TRUST, WNDS, WNPS );
	function f_isNastrojCP ( aIdKtgTypNastroje int, aValidujNastroj boolean default true ) return boolean;
	PRAGMA RESTRICT_REFERENCES ( f_isNastrojCP, RNDS, RNPS, TRUST, WNDS, WNPS );
   TYP_VAZBA_JISTINA char := '.';
   TYP_VAZBA_AUV char := '1';
   TYP_VAZBA_CAS_ROZLISENI char := '2';
   TYP_VAZBA_PRECENENI char := '3';
   TYP_VAZBA_OPRAVNA  char := '4';
   TYP_VAZBA_REZERVA char := '5';
   TYP_VAZBA_OPRAVNA_PROTI char := '6';
   TYP_CASTKA_JISTINA int := 10;
   TYP_CASTKA_AUV int := 20;
   TYP_CASTKA_CAS_ROZLISENI int := 30;
   TYP_CASTKA_PRECENENI int := 40;

   RADEK_HOSP_VYSLEDEK int := 123;
	-- tabulky bez Cenneho papiru
		-- bez protistrany
	NASTROJ_HMOTNY_MAJETEK int := 1;
	NASTROJ_POKLADNI_HODNOTY int := 2;
	NASTROJ_FINANCNI_INKASO int := 3;
	NASTROJ_EMISE_AKCII int := 4;
	NASTROJ_PASIVA_OSTATNI int := 22;
		-- s protistranou
	NASTROJ_DLUZNE_UCTY int := 5;
	NASTROJ_ZAJISTENI_POSKYTNUTE int := 8;
	NASTROJ_OSTATNI_AKTIVA_BP int := 9;
		-- s protistranou a casovym rozlisenim
	NASTROJ_NOSTRO_DEPOZITA int := 6;
	NASTROJ_PASIVA_ZAVAZKY int := 20;
	NASTROJ_UVERY int := 7;
	NASTROJ_REZERVY_OPRAVNE_POL int := 23;
	-- tabulky c Cennym papirem
	NASTROJ_KAP_INV_CP_POZICE int := 10;
	NASTROJ_DLUHOPISY int := 21;
	NASTROJ_PASIVA_ZAJ_PRIJATE int := 19;
	NASTROJ_PUJCKA_CP int := 11;
	NASTROJ_REPO int := 12;
	NASTROJ_REVERZNI_REPO int := 13;
	NASTROJ_OPERACE_CP int := 14;
	NASTROJ_OPCE int := 15;
	NASTROJ_UROKOVE_DERIVATY int := 16;
	NASTROJ_MENOVE_DERIVATY int := 17;
	NASTROJ_UVEROVE_DERIVATY int := 18;
   -- pomocna pro testovani, ridi debug vypisy
   flagLog boolean := false;
end;

/


PROMPT Completed KAP_NASTROJE.sql
PROMPT


-- ============================================================================
-- Deploy: KAP_NASTROJEPREPARE.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying KAP_NASTROJEPREPARE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package KAP_NASTROJEPREPARE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."KAP_NASTROJEPREPARE" as
	procedure p_prepareDataDoklad ( aIdDoklad int, aUzivatel varchar2 );
   -- kvuli triggerum, tady a ne v body
	currentDoklad KP_dat_Doklad%ROWTYPE;

   -- kvuli triggerum, tady a ne v body
	currentUcetniSpolecnost KP_ktg_UcetniSpolecnost%ROWTYPE;
   -- pomocna pro testovani, ridi debug vypisy
	flagLog boolean := false;
end;

/


PROMPT Completed KAP_NASTROJEPREPARE.sql
PROMPT


-- ============================================================================
-- Deploy: KAP_OPERACNI_RIZIKO.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying KAP_OPERACNI_RIZIKO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package KAP_OPERACNI_RIZIKO
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."KAP_OPERACNI_RIZIKO" as

	procedure p_calculate (
		aIdKtgUcetniSpolecnost int, aDatumOd date, aDatumDo date, aUzivatel varchar2 );
	
	function f_getBL ( aIdCisSubject int, aUcet varchar2, aPC char  ) return int;
	PRAGMA RESTRICT_REFERENCES (f_getBL, RNDS, RNPS, TRUST, WNDS, WNPS );

	aktIdSubject int;
end;

/


PROMPT Completed KAP_OPERACNI_RIZIKO.sql
PROMPT


-- ============================================================================
-- Deploy: KAP_PRIM.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying KAP_PRIM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package KAP_PRIM
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."KAP_PRIM" as

	--procedure p_setEvidovatProtistranu ( aPoradiList int, aRadek int, aHodnota varchar2 );

	procedure p_pripravPrimarniData ( aIdFronta int, aTyp char );

	procedure p_deleteDokladZadostFronta ( aIdFronta int );

	-- vraci -1 v aId_1,aId_2 pokud nelze generovat a generuje jiz nekdo jiny
	procedure p_calculate_doklad ( aId_1 out int, aId_2 out int, aUzivatel out varchar2, aPocet out int, aIdFronta in out int, aJenomPs out int,
		aId_Kamil1 out int, aId_Kamil2 out int);

	procedure p_calculate_subKonDoklad ( aId out int, aIdSubKonsolidace int, aDatum date, aUzivatel varchar2  );

	procedure p_subDokladRegenerace ( aIdDoklad int, aUzivatel varchar2 );

	procedure p_zadost_generuj_SubDoklad (
		aIdCisDoklad int, aIdKrok int, aIdKtgUcetniSpolecnost int,
		aDatumDataOd date, aDatum date, aDatumMustek date, aUzivatelMustek varchar2, aUzivatel varchar2,
		aJenomPS int, aIdSubkonsolidace int, aIdDoklad out int );

	procedure p_zadost_generuj_doklad (
		aIdCisDoklad int, aIdKrok int, aIdKtgUcetniSpolecnost int,
		aDatum date, aDatumMustek date,
		aUzivatelMustek varchar2, aUzivatel varchar2, aJenomPS int, aGuiFlag char );

	procedure p_zadost_storno ( aId int, aUzivatel varchar2 );

	procedure p_zadost_hotovo ( aId int );

	procedure p_frontaDeleteDoklady;

	procedure p_frontaInit;

	procedure p_generuj_doklad_manual (
		aId_1 out int, --aId_2 out int,
		aIdCisDoklad int, aIdKtgUcetniSpolecnost int, aIdSubkonsolidace int, aDatum date, aUzivatel varchar2 );

	procedure p_generuj_doklad_manual (
		aId_1 out int,
		aIdCisDoklad int, aIdKtgUcetniSpolecnost int,
		aDatum date, aUzivatel varchar2 );


	procedure p_reCalculateDoklad ( aId int );

	procedure p_calculate_doklad_manual ( aIdDoklad int, aUzivatel varchar2 );

	procedure p_clone_doklad_manual ( aIdDokladVzor int, aIdSubkonsolidace int, aDtDatum date, aUzivatel varchar2 );

	procedure p_dokladMajetekUcastKontrola ( aIdDoklad int, aHlaska out varchar2 );

	procedure p_spolecMajetekUcastKontrola ( aIdKtgUcetniSpolecnost int, aDatumDoklad date, aHlaska out varchar2, aUzivatel varchar2 );


	procedure p_startGenerovaniAuto;
	procedure p_doplnekGenerovaniAuto;
	procedure p_konecGenerovaniAuto;

	procedure p_create_SubKonDoklad (
				aIdKtgUcetniSpolecnost int, aDatumPlatnostOd date, aDatumKonec date,
				aIdKtgSubKonsolidace int, aUzivatel varchar2 );

	procedure p_createSumacniDoklad ( aId_1 in out int, aOldIdDoklad int,
			--aOldCisDoklad int, aNewCisDoklad int,
			aOldKrok int, aOldUcetniSpolecnost int, aOldDatum date, aOldSubkonsolidace int, aNewKrok int, aUzivatel varchar2 );


	updateIdRowDefUcet int;

	rowDefListBunkaNastroj KP_Def_ListBunkaNastroj%ROWTYPE;
	-- bude v triggeru insert kp_dat_dokladZdrojDat pouzito k doplneni atributu transakce



end;

/


PROMPT Completed KAP_PRIM.sql
PROMPT


-- ============================================================================
-- Deploy: KAP_PROJEKT.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying KAP_PROJEKT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package KAP_PROJEKT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."KAP_PROJEKT" as
	/* pomocne procedury pro front - projekt */

	procedure p_KpProjekt (
	    aAkce char, aIdProjekt int, aNazev varchar2, aCisloOld varchar2, aIdStatus int,
		aIdNavrhuje int, aIdPManager int, 
		aIdMngSeg int, aMenaNaklady varchar2,
		aStartOceneni date, aIdFrekvence int, aPopis varchar2, aIdNavrh int, 
		aDtMDalsi date, aMMesicu int, aUzivatel varchar2, aIdTypBilance int, aSledujeBudget char, aIdTypBudgetu int,
		aKategorie int);

	procedure p_KpRelProjektUcSpol (aAkce char, aIdProjekt int, aIdUcSpol int, aUzivatel varchar2, aMatkaOd date, aMatkaDo date);
	
	procedure p_setPouzitHv(aIdProjekt int, aIdUcSpol int, aUzivatel varchar2);
		
	procedure p_KpProjektCashFlow (
	    aAkce char, aId int, aIdProjekt int, aIdTyp int, aDtDatum date, aCastka number,
		aMena varchar2, aInOut varchar2, aIdIOTyp number, aPoznamka varchar2, aUzivatel varchar2);

    procedure p_KpProjektNavrh (
        aAkce char, aIdProjektNavrh in out int, aNazev varchar2, aIdNavrhuje int, aEmail varchar2,
    	aIdSponzor int, aIdPManager int, aPopis varchar2, aVynos number, aMenaVynos varchar2,
	    aNaklad number, aMenaNaklad varchar2, aZacatek date, aKonec date, aUzivatel varchar2);
		
	procedure p_KpProjektMemoradnum(aIdProjekt int, aCil varchar2, aZacleneni varchar2, aVstup varchar2, aUzivatel varchar2);
	
    procedure p_KpProjektMemorandumZprava(aId int, aIdProjekt int, aDatum date, aZprava varchar2, aUzivatel varchar2);
	
	procedure p_memorandumNastaveni;

	procedure p_cleanUp;

    procedure p_loadNaklady;

    procedure p_processNaklady;

	procedure p_insertRowFromMs(cisloOld varchar2, popis varchar2, datum date, castka number, mena varchar2, spolecnost varchar2, dodavatele varchar2);

    procedure p_processDetailMs;
	
	procedure p_preceneniDatumy;
	
	procedure p_pravaNaProjekty( aUserId int, aTypPrava int );
	
	procedure p_pravaNaVsechnyProjekty( aUserId int, aTypPrava int );
	
	procedure p_pravaNaProjektyAll( aTypPrava int );

end;

/


PROMPT Completed KAP_PROJEKT.sql
PROMPT


-- ============================================================================
-- Deploy: KAP_PROJEKTDOKLAD.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying KAP_PROJEKTDOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package KAP_PROJEKTDOKLAD
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."KAP_PROJEKTDOKLAD" as
    -- Package pro vypocet projektovych dokladu
    -- %usage Projektove doklady se skladaji z transakci, prirazenych projektu, nezavisle 
    -- na datumu teto transakce (berou se vsechny transakce do datumu generovani). Doklady se
    -- uchovavaji v tabulce kp_dat_projektDoklad.
    -- Projektove doklady jsou vytvrareny ze standardnich dokladu tak, ze je nejprve vytvori seznam
    -- std. dokladu a to tak, ze se vezme nejaktualnejsi, pak doklad ze dne pred dnem pocatecniho stavu
    -- puvodniho dokladu atd. az dokud neni datum poc. stavu roven datu dokladu nebo NULL. Pro tyto doklady
    -- se pak zjisti transakce, prirazene k projektu.
    -- Existuji tri typy vzniku dokladu nadefinovane v tabulce kp_cis_typProjektoveBilance. 

    -- Ulozi se std. doklady do aDtDatum a projekty v nich obsazene do kp_tmp_dokladProjekt
    -- %param aDtDatum datum, do ktereho jsou vyhledavany std. doklady 
	procedure p_ulozDoklady(aDtDatum date);
	
    -- Smaze se projektovy doklad s id z parametru
    -- %param aIdDoklad id projektoveho dokladu, ktery ma byt smazan 
	procedure p_deleteProjektDoklad(aIdDoklad int);
	
    -- Vytvori se projektovy doklad pro jeden konkretni projekt a datum
    -- %return id dokladu, ktery byl vygenerovan
    -- %param aIdKtgProjekt urcuje pro ktery projekt pozadujeme vygenerovat doklad
    -- %param aDatum urcuje k jakemu datumu se bude generovat
    -- %param aIdProjektDoklad vystupni return parametr 
    -- %param aDenni boolean - jedna se o doklad k ultimu mesice nebo o denni
	procedure p_createProjektDoklad(aIdKtgProjekt int, aDtDatum date, aIdProjektDoklad out int, aDenni char := '1');
	
    -- Vytvori se projektove doklady pro vsechny projekty a datum
    -- %param aDatum urcuje k jakemu datumu se bude generovat
    -- %param aDenni boolean - jedna se o doklad k ultimu mesice nebo o denni
	procedure p_createProjektDoklady(aDtDatum date, aDenni char := '1');
	
    -- Vytvori se projektove doklady pro vsechny projekty k ultimu mesice
	procedure p_createProjektDokladyMesic;
end;

/


PROMPT Completed KAP_PROJEKTDOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: KAP_REPORT.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying KAP_REPORT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package KAP_REPORT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."KAP_REPORT" as
    -- Package pro ruzne ucely (vetsinou reporty) pro front end

    -- Ulozi se doplnujici informace (typu pocet transakci atp.) ke standardnimu dokladu
    -- %param aIdDoklad id std. dokladu, ke kteremu se maji doplnit informace
	procedure p_reportDoklad(aIdDoklad int);

	-- Nacte a ulozi informace pro report o spravcich a kontaktnich osobach pro reporty
	-- nejen pro privatni bankovnictvi
	procedure p_loadSpravceKO;
	
	procedure p_fillCartesisSpolecnost(aDatum date);
	
	procedure p_fillCartesisSpolecnost;
end;

/


PROMPT Completed KAP_REPORT.sql
PROMPT


-- ============================================================================
-- Deploy: KAP_SERVIS.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying KAP_SERVIS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package KAP_SERVIS
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."KAP_SERVIS" as
	procedure p_vazbyPregenerovatProblemove( aIdSkupina int, aDatum date);
end;

/


PROMPT Completed KAP_SERVIS.sql
PROMPT


-- ============================================================================
-- Deploy: KAP_SUBKON.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying KAP_SUBKON.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package KAP_SUBKON
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."KAP_SUBKON" as
   -- Package pro vypocet konsolidacnich dokladu
   -- %usage Jednotlive uctovane spolecnosti vytvareji stromovou strukturu (konsolidacni strom) a za jednotlive
   --	uzly konsolidacniho stromu se generuji tkz. subkonsolidacni doklady. Kazdy strom je definovan pomoci zaznamu
   -- v tabulce kp_ktg_ucetniSkupina. Jednotlive uzly stromu jsou v tabulce kp_ktg_subkonsolidace.
   -- Clenstvi a hierarchie stromu je tvorena pomoci zaznamu v tabulce kp_rel_subkonsolidaceClen.

	-- Pro zadany uzel a datum vygeneruje normalni subkonsolidacni doklad
	-- %return ID dokladu, ktery byl vygenerovan jako finalni sumacni subkonsolidacni doklad.
   -- %param aId vystupni return parametr.
   -- %param aIdSubKonsolidace urcuje pro jakou subkonsolidaci pozadujeme vygenerovat doklad
   -- %param aDatum urcuje k jakemu datumu se bude generovat
   -- %param aUzivatel kdo generuje
	procedure p_calculate_subKonDoklad ( aId out int, aIdSubKonsolidace int, aDatum date, aUzivatel varchar2 );

	-- Pro zadany uzel a datum vygeneruje modry subkonsolidacni doklad
	-- %return ID dokladu, ktery byl vygenerovan jako finalni sumacni modry subkonsolidacni doklad.
   -- %param aId vystupni return parametr.
   -- %param aIdSubKonsolidace urcuje pro jakou subkonsolidaci pozadujeme vygenerovat doklad
   -- %param aDatum urcuje k jakemu datumu se bude generovat
   -- %param aUzivatel kdo generuje
	procedure p_calculate_subKonModryDoklad ( aId out int, aIdSubKonsolidace int, aDatum date, aUzivatel varchar2  );

	-- Slouzi pro vymazani dokladu. Pouziva front pokud uzivatel potrebuje smazat, nebo pri pregenerovani dokladu, maze puvodni stary doklad k zadanemu datu
   -- a pro zadanou subkonsolidaci.
   -- %param aIdSubKonsolidace Uzel, pro ktery se bude mazat doklad.
   -- %param aDatum Rika doklad ze ktereho dne chci mazat.
   -- %param aUzivatel kdo maze
	procedure p_deleteSubKonsolidaceDoklad ( aIdSubKonsolidace int, aDatum date, aUzivatel varchar2 );

	-- Generuje "zlute" doklady.
   -- %usage Pokud se v subkonsolidacnim strome nachazeji spolecnosti, ktere nejsou v urcitem obdobi clenem
   -- subkonsolidace - tzn. ze bud do subkonsolidace vstoupily, nebo vystoupily. Tak pro takoveto spolecnosti
   -- potrebujeme specialni "zlute" doklady. Nemuzeme pouzit "normalni" doklady, ktere generujeme z ucetnictvi, ale musime
   -- si pripravit "zlute" doklady, ktere spravne reflektuji skutecnost, ze spolecnost neni po celou dobu clenem
   -- subkonsolidace ~ clenem ucetni skupiny.<br>
   -- Tato procedura tedy vygeneruje "zlute" doklady pro spolecnosti, ktere nejsou po cele zadane obdobi clenem zadane ucetni skupiny.
   -- %param aIdSkupina skupina pro kterou budeme clenstvi kontrolovat
   -- %param aDatumStart vymezeni casoveho intervalu - datum od kdy kontrolujeme
   -- %param aDatumKonec vymezeni casoveho intervalu - datum do kdy kontrolujeme
   -- %param aUzivatel kdo generuje
	procedure p_createSubKonDoklady ( aIdSkupina int, aDatumStart date, aDatumKonec date, aUzivatel varchar2 );

	-- Vraci castku, ktera byla vypoctena podle urciteho pravidla
	-- %usage Je pouzito pri praci v objektu jtbank/kapprim/utildoklad.  V konsolidacnich vzorcich se da jako soucast vypoctu
   -- napsat dotaz na drive vypocitanou hodnotu, dle nejakeho pravidla.
   -- %param aIdDoklad doklad v kterem se bude hledat
   -- %param aIdKtgSubKonPravidloDetail identifikace pravidla - ptame se jaka castka byla pomoci tohoto pravidla vypoctena
	function f_getPravidloCastka ( aIdDoklad int, aIdKtgSubKonPravidloDetail int ) return KP_dat_DokladPolozkaDenik.nd_zmena%TYPE;


   -- Pro zadane spolecnosti vrati prvni spolecnou subkonsolidaci, ktera je spojuje
   -- %param aIdKtgUcetniSpolecnost_1 prvni ucetni spolecnost, pro kterou hledame spolecny subkonsolidacni uzel
   -- %param aIdKtgUcetniSpolecnost_2 druha ucetni spolecnost, pro kterou hledame spolecny subkonsolidacni uzel
   -- %param aIdUceniSkupina v jake ucetni skupine budeme spolecny subkonsolidacni uzel hledat
   -- %param aDatum clenstvi se v case meni, proto tento parametr, ktery rika v jaky den zkoumame zarazeni v hierarchii konsolidacniho stromu
   -- %return
   --		0 - pokud nenajde spolecny subkonsolidacni uzel, tj. tyto dve spolecnosti v ramci zadanych podminek spolu nejsou v jednom konsolidacnim stromu<br>
   --		> 0 - id subkonsolidace, ktera je prvni spolecna, pro zadane dve ucetni spolecnosti
   function f_getSpolecnaSubkonsolidace ( aIdKtgUcetniSpolecnost_1 int, aIdKtgUcetniSpolecnost_2 int, aIdUcetniSkupina int, aDatum date ) return int;

   -- Pro zadane spolecnosti a subkonsolidaci vrati zda od 1.1. do datumu zadanem parametrem byly nekdy v tomto obdobi clenem
   -- %param aIdKtgSubkonsolidace subkonsolidace do ktere to budeme kontrolovat
   -- %param aIdKtgUcetniSpolecnost_1 prvni ucetni spolecnost, pro kterou hledame spolecny subkonsolidacni uzel
   -- %param aIdKtgUcetniSpolecnost_2 druha ucetni spolecnost, pro kterou hledame spolecny subkonsolidacni uzel
   -- %param aIdUceniSkupina v jake ucetni skupine budeme spolecny subkonsolidacni uzel hledat
   -- %param aDatum clenstvi se v case meni, proto tento parametr, ktery rika ze zkoumame od 1.1. do tohoto dne v ramci stejenho roku v hierarchii konsolidacniho stromu
   -- %return
   --		0 - pokud nejsou v ramci zadanych parametru oba clenem
   --		aIdKtgSubkonsolidace - vraci zadanou subkonsolidaci, jako ze ano souhlasi
   function f_isRokSpolecnaSubkonsolidace ( aIdKtgSubkonsolidace int, aIdKtgUcetniSpolecnost_1 int, aIdKtgUcetniSpolecnost_2 int, aIdUcetniSkupina int, aDatum date ) return int;


end;

/


PROMPT Completed KAP_SUBKON.sql
PROMPT


-- ============================================================================
-- Deploy: KAP_TOPEXPORT.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying KAP_TOPEXPORT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package KAP_TOPEXPORT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."KAP_TOPEXPORT" as
	procedure p_exportDoklad ( aIdDoklad int, aPresun int );
	procedure p_reloadCiselniky;
	procedure p_exportNove;
	procedure p_exportSkupina ( aIdSkupina int, aDatumOd date, aDatumDo date );
end;

/


PROMPT Completed KAP_TOPEXPORT.sql
PROMPT


-- ============================================================================
-- Deploy: KAP_VAZBY.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying KAP_VAZBY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package KAP_VAZBY
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."KAP_VAZBY" as

-- presunuto do MyUtilMyUtil
--	function f_getKodDatumInterval ( aOd date, aDo date, aVazbyPlatnostOd date, aVazbyPlatnostDo date  ) return int;

	procedure p_calculate_doklad_vazby ( aIdDoklad int, aIdKtgUcetniSkupina int, aUzivatel varchar2 );

	procedure p_calculate_doklad_vazby ( aIdDoklad int, aIdProtistrana int, aIdKtgUcetniSkupina int, aUzivatel varchar2 );

	procedure p_auto_calculate_doklad_vazby ( aDatum date, aIdKtgUcetniSkupina int, aDatumVazbyManual date );

	function f_parovaniPravidla ( aList1 int, aList2 int ) return char;
	PRAGMA RESTRICT_REFERENCES (f_parovaniPravidla, RNDS, RNPS, TRUST, WNDS, WNPS );

	function f_existsVazba ( aIdDoklad int, aIdUcetniSkupina int, aIdUcetniSpolecnostTo int, aList1 int default 1, aList2 int default 99 ) return boolean;
   
   -- vrati doklad ID kde jsou vazby
   -- aIdUcetniSkupina kdyz null tak hleda mezi normalnimi, kdyz je urceno tak mezi zlutymi subkonsolidacnimi doklady pozadovane ucetni skupiny
   function f_getDoklad ( aIdUcetniSpolecnost int, aDatum date, aIdUcetniSkupina int  ) return int;

end;

/


PROMPT Completed KAP_VAZBY.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/PACKAGES/KURZY.sql: 'utf-8' codec can't decode byte 0xc8 in position 618: invalid continuation byte


-- ============================================================================
-- Deploy: MD_META.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying MD_META.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package MD_META
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."MD_META" 
AS
FUNCTION get_next_id RETURN NUMBER;
-- Following code taken directly from wwv_flow_random from APEX
--
-- seed random function
procedure srand( new_seed in number );

function rand return number;
pragma restrict_references( rand, WNDS  );

procedure get_rand( r OUT number );

function rand_max( n IN number ) return number;
pragma restrict_references( rand_max, WNDS);

procedure get_rand_max( r OUT number, n IN number );

function quote(catalog IN VARCHAR2, schema IN VARCHAR2, object IN VARCHAR2, connid LONG) RETURN VARCHAR2;
END;

/


PROMPT Completed MD_META.sql
PROMPT


-- ============================================================================
-- Deploy: MIGRATION.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying MIGRATION.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package MIGRATION
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."MIGRATION" 
AS

-- Public functions
FUNCTION copy_connection_cascade(p_connectionid MD_CONNECTIONS.ID%TYPE, p_filter_set MIGR_FILTER_SET := NULL,p_scratchModel BOOLEAN := FALSE) RETURN NUMBER;
FUNCTION transform_all_identifiers(p_connectionid MD_CONNECTIONS.ID%TYPE, p_prefixName VARCHAR2, p_scratchModel BOOLEAN := FALSE) RETURN NAME_AND_COUNT_ARRAY;
FUNCTION transform_datatypes(p_connectionid MD_CONNECTIONS.ID%TYPE, p_mapid MIGR_DATATYPE_TRANSFORM_MAP.ID%TYPE, p_numbytesperchar INTEGER,  p_is12c VARCHAR2 := 'N') RETURN NUMBER;
FUNCTION transform_identity_columns(p_connectionid MD_CONNECTIONS.ID%TYPE, p_is12c VARCHAR2 := 'N') RETURN NUMBER;
FUNCTION transform_rewrite_trigger(p_connectionid MD_CONNECTIONS.ID%TYPE) RETURN NUMBER;
FUNCTION gatherConnectionStats(p_connectionId MD_CONNECTIONS.ID%TYPE,p_comments MD_CONNECTIONS.COMMENTS%TYPE) RETURN NUMBER;
PROCEDURE transform_clashes(p_connectionid MD_CONNECTIONS.ID%TYPE, p_scratchModel BOOLEAN := FALSE);
PROCEDURE populate_derivatives_table(p_connectionid MD_CONNECTIONS.ID%TYPE);
PROCEDURE revert_derivatives_table(p_connectionid MD_CONNECTIONS.ID%TYPE);
PROCEDURE remove_duplicate_foreignkeys(p_connectionid MD_CONNECTIONS.ID%TYPE);
PROCEDURE remove_unwanted_uniquekeys(p_connectionid MD_CONNECTIONS.ID%TYPE);
PROCEDURE uniquekey_constraint_columns(p_connectionid MD_CONNECTIONS.ID%TYPE);
END;

/


PROMPT Completed MIGRATION.sql
PROMPT


-- ============================================================================
-- Deploy: MIGRATION_REPORT.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying MIGRATION_REPORT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package MIGRATION_REPORT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."MIGRATION_REPORT" AS 
--get status
  FUNCTION getCaptureStatus(srcid IN NUMBER)  RETURN VARCHAR2;
  FUNCTION getConvertStatus(srcid IN NUMBER,convert_conn_id IN NUMBER)  RETURN VARCHAR2;
  FUNCTION getGenerateStatus(srcid IN NUMBER,convert_conn_id IN NUMBER)  RETURN VARCHAR2;
--migration details
  FUNCTION getDetails(capture_conn_id IN NUMBER,convert_conn_id IN NUMBER) RETURN MIGR_REPORT_DETAIL_TABLE PIPELINED; 
--migration summary
   FUNCTION getSum(capture_conn_id IN NUMBER,convert_conn_id IN NUMBER) RETURN MIGR_REPORT_SUM_TABLE PIPELINED;
END MIGRATION_REPORT;

/


PROMPT Completed MIGRATION_REPORT.sql
PROMPT


-- ============================================================================
-- Deploy: MIGRATION_TRANSFORMER.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying MIGRATION_TRANSFORMER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package MIGRATION_TRANSFORMER
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."MIGRATION_TRANSFORMER" AS
FUNCTION check_identifier_length(p_ident VARCHAR2) RETURN VARCHAR2;
FUNCTION add_suffix(p_work VARCHAR2, p_suffix VARCHAR2, p_maxlen NUMBER) RETURN VARCHAR2;
FUNCTION check_reserved_word(p_work VARCHAR2) RETURN VARCHAR2;
FUNCTION sys_check(p_work VARCHAR2) RETURN VARCHAR2;
FUNCTION check_allowed_chars(p_work NVARCHAR2) RETURN NVARCHAR2;
FUNCTION transform_identifier(p_identifier NVARCHAR2)  RETURN NVARCHAR2;
FUNCTION getDisallowedCharsNames(p_work NVARCHAR2) RETURN VARCHAR2;
FUNCTION getNameForNullCase(p_work NVARCHAR2) RETURN NVARCHAR2;
PROCEDURE set_oracle_long_identifier(b_flag INT);
FUNCTION get_oracle_long_identifier RETURN NUMBER;
END;

/


PROMPT Completed MIGRATION_TRANSFORMER.sql
PROMPT


-- ============================================================================
-- Deploy: MYJAVAUTIL.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying MYJAVAUTIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package MYJAVAUTIL
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."MYJAVAUTIL" AUTHID CURRENT_USER AS PROCEDURE p_deleteFiles(directory IN VARCHAR2, maska IN VARCHAR2); END MYJAVAUTIL;

/


PROMPT Completed MYJAVAUTIL.sql
PROMPT


-- ============================================================================
-- Deploy: MYLOG.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying MYLOG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package MYLOG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."MYLOG" as
	Q_IMPORT_DETAIL int := 1001;
	Q_PAROVANI_FAKTUR_TOPAS int := 1002;

	T_IMPORT_DETAIL int := 1010;
	S_IMPORT_DETAIL int := 1020;

 
	STATUS_WARRNING constant int := 1000;
	STATUS_ERROR constant int := -1;
	STATUS_OK constant int := 100;


	procedure p_startAkce (
			aUzivatel LOG_akce.s_uzivatel%TYPE,
			aIdAkce LOG_akce.id_logCisAkce%TYPE,
			aIdAkceRodic LOG_akce.id%TYPE );

	procedure p_writeAkceDetail (
			aStatus LOG_akce_Detail.id_logCisStatus%TYPE,
			aPopis LOG_akce_Detail.s_popis%TYPE );

	procedure p_konecAkce ( aIdStatus LOG_akce.id_logCisStatus%TYPE );

	procedure p_resetLog ( aUzivatel LOG_akce.s_uzivatel%TYPE );

end;

/


PROMPT Completed MYLOG.sql
PROMPT


-- ============================================================================
-- Deploy: MYUTIL.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying MYUTIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package MYUTIL
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."MYUTIL" as
	procedure p_printTableOfInt ( aTable t_tableOfInt, aLineStart varchar2 default '', aLineEnd varchar2 default '' );

	function f_getKodDatumInterval ( aOd date, aDo date, aOd2 date, aDo2 date  ) return int;
   PRAGMA RESTRICT_REFERENCES ( f_getKodDatumInterval, RNDS, RNPS, TRUST, WNDS, WNPS );
end;

/


PROMPT Completed MYUTIL.sql
PROMPT


-- ============================================================================
-- Deploy: MY_JOB.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying MY_JOB.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package MY_JOB
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."MY_JOB" as

	PIPE_PREFIX constant varchar2(10) := 'JB_MASTER_';

   function f_sendSqlRequest ( aSqlCode varchar2 ) return t_jobMsgResponse;
	procedure p_readResponse ( aResponse in out t_jobMsgResponse );

	procedure p_closeJob;

END;

/


PROMPT Completed MY_JOB.sql
PROMPT


-- ============================================================================
-- Deploy: MY_JOBSLAVE.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying MY_JOBSLAVE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package MY_JOBSLAVE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."MY_JOBSLAVE" as

	PIPE_PREFIX constant varchar2(9) := 'JB_SLAVE_';
	QUEUE_NAME constant varchar2(15) := 'db_jt.q_jobFree';

   CMD__SQL_CODE constant pls_integer := 100;
	CMD__KONEC constant pls_integer := 999;	-- slouzi pro zastaveni volneho jobu, vraci odpoved o zastaveni zpatky do roury

	-- slouzi pro zastaveni jobu, ktery pracuje, nevraci zadnou odpoved.
	-- Je to nouzove reseni, kdy do roury pracujiciho jobu zaslu tento prikaz
	-- a uz se o nic nestaram. Az job dodela svoji praci bude vybirat svoji rouru prikazu
	-- a narazi na tento stop prikaz tak se ukonci
	CMD__STOP constant pls_integer := 998;

	-- pouziva se pro vlozeni do fronty po vykonani prikazu a zpetne okamzite
	-- nacteni z fronty - protoze ve fronte muze byt zadost o STOP, ale nemam
	-- jinou moznost jak se zeptat, zda ve fronte neco je, nez dat tam ECHO
	-- a vybrat frontu. Pak mi prijde bud to vlozene ECHO nebo zadost STOP, kterou
	-- tam v prubehu provadeni jobu nekdo vlozil, aby joby ukoncil
	CMD__ECHO constant pls_integer := 1;


	procedure p_runJob( aIdJob int );

	-- vytvori a spusti aPocet novych jobu, ktere budou pak naslouchat pozadavkum paralelnich connection
	-- a budou pripraveni delat pro ne nejake sql prikazy
	procedure p_startNewJob( aPocet int );

	-- vytazene do interface jenom kvuli tomu aby pri nedostatku volnych
	-- jobu mohl provest v kap_job kod na vlastni session a nemel jsem redundatni kod
	-- jinak zasadne nopouzivat tuto proceduru
	procedure p_doSqlCode ( aSetModul boolean, aMsgRequest in out t_jobMsgRequest, aMsgResponse in out t_jobMsgResponse, b_raise boolean );

   CALL_JOB constant varchar2(32) := 'db_jt.my_JobSlave.p_runJob';

END;



/


PROMPT Completed MY_JOBSLAVE.sql
PROMPT


-- ============================================================================
-- Deploy: REP_KONS_PACKAGE.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying REP_KONS_PACKAGE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package REP_KONS_PACKAGE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."REP_KONS_PACKAGE" is
    
    -- generuje komplet data pro Excel soubor "Package.csv" co se pouziva v ramci reportingu 
    function f_getReport ( aIdDoklad int, aFlow varchar2, aPrepareData char default '1',  aDebug char default '0' ) return t_tab_rep_kons_package pipelined;
         
    /* pouze pro debug, aby pri vyvoji mohl programator koukat na zdrojova data - v ostrem muze byt zakomentovano */
    function f_preparePackageData ( aIdDoklad int, aFlow varchar2  ) return t_tab_rep_kons_package_tmp;
    

    /* protoze mame strary aplikacni server Java 1.4., ktery neumi volat vlastnosti Oracle11 tak se to musi takto "zabalit" nejdriv zavola klient z Javy tuto ulozenou proceduru a pak pouzije 
        select na vw_kp_kons_package, ktere si jako parametry bere to co je v package promennych - tj. to co tam ta Java nastavila predtim nez dela dotaz na view vw_kp_kons_package
        pokud bychom presli na novou Javu tak tyto dve procedury a vw_kp_kons_package nebudou vubec potreba - ale pak bude problem s akutalizci tabulky kp_rep_CartesisProtistrana, kterou nelze delat 
        v ramci selectu select * from table ( rep_kons_package.f_getReport ( id_doklad, null ) )
    */
    procedure p_setReportParam (  aIdDoklad int, aFlow varchar2, aDebug char default '0' );
    function f_getReport return t_tab_rep_kons_package pipelined;

end;


/


PROMPT Completed REP_KONS_PACKAGE.sql
PROMPT


-- ============================================================================
-- Deploy: SS2K5ALLPLATFORM.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying SS2K5ALLPLATFORM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package SS2K5ALLPLATFORM
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."SS2K5ALLPLATFORM" AS 
                        FUNCTION StageCapture(projectId NUMBER, pluginClassIn VARCHAR2, projExists BOOLEAN:=FALSE, p_scratchModel BOOLEAN := FALSE) RETURN VARCHAR2;
                        FUNCTION amINewid(myc clob) return number; -- public function as called from sql
                        Function getPrecision(typein varchar2 , precisionin number, scalein number) return number; -- public function as called from sql
                        Function getnewscale(typein varchar2 , precisionin number, scalein number) return number; -- public function as called from sql
                        FUNCTION printUDTDef(basename VARCHAR2, p  NUMBER, s NUMBER,m NUMBER )  RETURN VARCHAR2; --public function used from sql                       
                        FUNCTION GetStatus(iid INTEGER) RETURN VARCHAR2;
END;

/


PROMPT Completed SS2K5ALLPLATFORM.sql
PROMPT


-- ============================================================================
-- Deploy: SYB12ALLPLATFORM.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying SYB12ALLPLATFORM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package SYB12ALLPLATFORM
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."SYB12ALLPLATFORM" AS 
	                     FUNCTION StageCapture(projectId NUMBER, pluginClassIn varchar2, pjExists BOOLEAN := FALSE, p_scratchModel BOOLEAN := FALSE) RETURN VARCHAR2;
	                     FUNCTION GetStatus(iid INTEGER) RETURN varchar2;
                         FUNCTION GetDescription(basename VARCHAR2, precisionin NUMBER, scalein NUMBER, lengthin NUMBER) RETURN VARCHAR2;
                         FUNCTION LOCALSUBSTRB(vin  VARCHAR2) RETURN VARCHAR2; 
	                    END; 

/


PROMPT Completed SYB12ALLPLATFORM.sql
PROMPT


-- ============================================================================
-- Deploy: TDALLPLATFORM.sql
-- Category: package specifications
-- ============================================================================

PROMPT Deploying TDALLPLATFORM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package TDALLPLATFORM
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "DB_JT"."TDALLPLATFORM" AS 
    FUNCTION StageCapture(p_projectId NUMBER,
                          p_pluginClassIn varchar2,
                          p_jExists BOOLEAN := FALSE,
                          p_scratchModel BOOLEAN := FALSE) RETURN VARCHAR2;
    FUNCTION GetStatus(iid INTEGER) RETURN varchar2;
END TDALLPLATFORM;

/


PROMPT Completed TDALLPLATFORM.sql
PROMPT


-- ============================================================================
-- PHASE: Deploy PACKAGE BODIES (37 files)
-- ============================================================================

PROMPT
PROMPT ============================================================================
PROMPT Deploying PACKAGE BODIES (37 files)
PROMPT ============================================================================
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/PACKAGE_BODIES/APP.sql: 'utf-8' codec can't decode byte 0xe1 in position 3256: invalid continuation byte


-- ============================================================================
-- Deploy: CALCNASTROJEUTIL.sql
-- Category: package bodies
-- ============================================================================

PROMPT Deploying CALCNASTROJEUTIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package Body CALCNASTROJEUTIL
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "DB_JT"."CALCNASTROJEUTIL" as

-- *********************************************************************************************************************
-- 			tableUcetXUcet : "vnitrni" promenne
-- *********************************************************************************************************************
idx_tableUcetXUcet binary_integer; -- ukazuje na aktualni pozici co nasel



-- *********************************************************************************************************************
-- 			pomocne funkce
-- *********************************************************************************************************************

function f_getUcelUveru ( aPcId char ) return char as
	l_key char(2);
	l_ret char;
begin
	select substr( internal_comments, 1, 2 ) into l_key from tmp_q_loan_contract
	where fk_prd_contract = aPcId;

	if ( sql%rowcount = 0 ) then
		return ('0');
	end if;

	select c_komercni into l_ret
	from kp_cis_ucelUveru
	where s_extid = l_key;

	return ( NVL ( l_ret, '0' ) );
end;

function f_getProduktUcet ( aN1 varchar2, aN2 varchar2 ) return varchar2 as
	l1 int := length(aN1);
	l2 int := length(aN2);
begin

	if ( aN1 is not null and aN2 is null ) then
		return ( aN1 );
	end if;

	if ( aN1 is null and aN2 is not null ) then
		return ( aN2 );
	end if;

	-- ted potrebuji vratit ten delsi retezec
	if ( l1 = l2 ) then
		-- tak tady nevim
		return ( aN1 );
	elsif ( l1 > l2 ) then
		return ( aN1 );
	else
		return ( aN2 );
	end if;

end;

function f_testTypOperaceImplBan ( aId int, aIdTypNastroj int, aPlatnostOd date, aPlatnostDo date ) return int as
pragma autonomous_transaction;
	p int;
begin

	select NVL(count(*),0) into p from KP_Ktg_TypOperace
	where
		id != aId and
		id_typNastroje = aIdTypNastroj and
		c_implicitniBanka = '1' and
		0 != MyUtil.f_getKodDatumInterval ( aPlatnostOd, aPlatnostDo, dt_platnostOd, dt_platnostDo );

	commit;
	return p;

end;

function f_testTypOperaceImplOst ( aId int, aIdTypNastroj int, aPlatnostOd date, aPlatnostDo date ) return int as
pragma autonomous_transaction;
	p int;
begin

	select NVL(count(*),0) into p from KP_Ktg_TypOperace
	where
		id != aId and
		id_typNastroje = aIdTypNastroj and
		c_implicitniOstatni = '1' and
		0 != MyUtil.f_getKodDatumInterval ( aPlatnostOd, aPlatnostDo, dt_platnostOd, dt_platnostDo );

	commit;
	return p;

end;


function f_getIdTypOperace ( aIdTypNastroj int, aKind char, aTyp char, aPCID char, aCisSubjekt int, aDatum date ) return int as
	p int;
	c kp_ktg_typNastroje.c_urcitKodOperace%TYPE;
	i kp_ktg_typOperace.id%TYPE;
begin


	select c_urcitKodOperace into c from kp_ktg_typNastroje where id = aIdTypNastroj;

	if ( c = '0' ) then
		-- neni potreba urcovat
		return ( null );
	end if;

	if ( aCisSubjekt = 80 ) then
		select count(*), max(id) into p, i from KP_Ktg_TypOperace
		where
			id_typNastroje = aIdTypNastroj and
			c_implicitniBanka = '1' and
			aDatum between dt_platnostOd and dt_platnostDo;
	else
		select count(*), max(id) into p, i from KP_Ktg_TypOperace
		where
			id_typNastroje = aIdTypNastroj and
			c_implicitniOstatni = '1' and
			aDatum between dt_platnostOd and dt_platnostDo;
	end if;

	if ( p > 0 ) then
		return ( i );
	end if;


	select count(*), Max(id_ktgTypOperace) into p, i from KP_def_nastrojOperace
	where
		id_cisSubject = aCisSubjekt and
		id_ktgTypNastroje = aIdTypNastroj and
		s_pcProdKind = aKind and
      s_pcProdType = aTyp;

	if ( p = 1 ) then
		return ( i );
	end if;

	select count(*), Max(id_ktgTypOperace) into p, i from KP_def_nastrojOperace
	where
		id_cisSubject is null and
		id_ktgTypNastroje = aIdTypNastroj and
		s_pcProdKind = aKind and
      s_pcProdType = aTyp;

	if ( p = 1 ) then
		return ( i );
	end if;


	return ( -1 );
end;

-- vraci '.' pokud to je jistina, vraci 2 pokud to je casove rozliseni, vraci 0 pokud nenasel
function f_getCharTypVykaz ( aUcet varchar2, aDatum date, aIdKtgDoklad int ) return char as
	l_pocet int;
	l_ret int;
begin
	select count(*) into l_pocet
	from KP_def_ucetVazbaUcet
	where s_ucet_1 like aUcet || '%' and id_ktgDoklad = aIdKtgDoklad and aDatum between dt_platnostOd and dt_platnostDo;

	if ( l_pocet > 0 ) then
		return ( '.' ); -- jistina
	else
		-- tak neni to presne definovany ucet, tak zkusim jeste obracene
		-- tady by meli propadnout jenom ty co maji nastaveno "bez vazby" viz. where and id_typ = 99
		select count(*) into l_pocet
		from KP_def_ucetVazbaUcet
		where aUcet like s_ucet_1 || '%' and id_ktgDoklad = aIdKtgDoklad and aDatum between dt_platnostOd and dt_platnostDo and id_typ = 99;

		if ( l_pocet > 0 ) then
			return ( '.' ); -- jistina
		end if;

	end if;

	select NVL( max(id_typ), -99999 ) into l_pocet
	from KP_def_ucetVazbaUcet
	where s_ucet_2 like aUcet || '%' and id_ktgDoklad = aIdKtgDoklad and aDatum between dt_platnostOd and dt_platnostDo;

	if ( l_pocet > 0 ) then
		return ( to_char(l_pocet) );
	end if;

	select NVL( max(id_typ), -99999 ) into l_pocet
	from KP_def_ucetVazbaUcet
	where aUcet like s_ucet_2 || '%' and id_ktgDoklad = aIdKtgDoklad and aDatum between dt_platnostOd and dt_platnostDo;

	if ( l_pocet > 0 ) then
		return ( to_char(l_pocet) );
	end if;


	return ('0');

end;

/*
-- vraci pozici pro zarazeni do tabulky nastroju
--  a typ :TYP_VAZBA_AUV, TYP_VAZBA_CAS_ROZLISENI, TYP_VAZBA_PRECENENI, TYP_VAZBA_OPRAVNA, TYP_VAZBA_REZERVA
-- prepsano protoze tech uctu pro jednu jistinu muze byt vice
function f_getUcetVazbaUcet ( aIDTyp int, aUcet varchar2, aDatum date, aIdKtgDoklad int ) return varchar2 as
	l_ret KP_def_ucetVazbaUcet.s_ucet_2%TYPE;
begin

	select s_ucet_2 into l_ret
	from KP_def_ucetVazbaUcet
	where id_typ = aIDTyp and s_ucet_1 like aUcet || '%' and id_ktgDoklad = aIdKtgDoklad and aDatum between dt_platnostOd and dt_platnostDo;

	return ( l_ret );

end;
*/

-- *********************************************************************************************************************
-- 			implementece pro collection : tableUcetXUcet
-- *********************************************************************************************************************
-- zjistuje ID doklad polozky kde jsou ulozeny opravne polozky, pro optimalizaci vraci
function f_getIDDokladPolozkaOpravna ( aIdPolozka int ) return kp_dat_dokladpolozka%ROWTYPE as
	pN kp_dat_dokladpolozka%ROWTYPE;
	pO kp_dat_dokladpolozka%ROWTYPE;
begin
	select * into pN from kp_dat_dokladpolozka where id = aIdPolozka;
	if ( pN.nl_poradiList != 1 ) then
		return ( null );
	end if;

	-- zkusim nahodu, melo by vetsinou platit, ze je o jednu vetsi
	select * into pO from kp_dat_dokladpolozka where id = aIdPolozka+1;
	if ( pO.id_doklad = pN.id_doklad and pO.id_cisList = pN.id_cisList and pO.nl_sloupec = 3 and pO.id_cisRadektyp = pN.id_cisRadektyp ) then
		-- tak trefa
		return ( pO );
	end if;

	select * into pO from kp_dat_dokladpolozka
	where id_doklad = pN.id_doklad and id_cisList = pN.id_cisList and nl_sloupec = 3 and id_cisRadektyp = pN.id_cisRadektyp;

	return ( pO );
end;


function f_getCacheImplParent ( aIDTyp int, aUcet varchar2, aIdKtgDoklad int ) return int as
	pomUcet kp_def_ucetvazbaucet.s_ucet_1%TYPE;
begin
	for idx_tableUcetXUcet in 1 .. tableUcetXUcet.count() loop
		if ( tableUcetXUcet(idx_tableUcetXUcet).s_ucet_2 = aUcet and tableUcetXUcet(idx_tableUcetXUcet).id_ktgDoklad = aIdKtgDoklad and tableUcetXUcet(idx_tableUcetXUcet).id_typ = aIDTyp ) then
			-- nasel a vraci
			return ( tableUcetXUcet(idx_tableUcetXUcet).id_implicitniParent );
		end if;
	end loop;
	return (-1);
end;


procedure p_saveUcetXUcet ( aIDTyp int, aUcet varchar2, aUcet2 varchar2, aDatum date, aIdKtgDoklad int, aIdParent int ) as
	pomUcet kp_def_ucetvazbaucet.s_ucet_1%TYPE;
begin
	for idx_tableUcetXUcet in 1 .. tableUcetXUcet.count() loop
		if ( tableUcetXUcet(idx_tableUcetXUcet).s_ucet_1 = aUcet and tableUcetXUcet(idx_tableUcetXUcet).id_ktgDoklad = aIdKtgDoklad and tableUcetXUcet(idx_tableUcetXUcet).id_typ = aIDTyp ) then
			if ( aIdParent is not null and tableUcetXUcet(idx_tableUcetXUcet).id_implicitniParent is null ) then
				-- oprava pokud by byl implicitni dosud null, coz by ale nemelo nikdy nastat
				tableUcetXUcet(idx_tableUcetXUcet).id_implicitniParent := aIdParent;
			end if;
			return;
		end if;
	end loop;

	idx_tableUcetXUcet := tableUcetXUcet.count() + 1;

	tableUcetXUcet(idx_tableUcetXUcet).s_ucet_1 := aUcet;
	tableUcetXUcet(idx_tableUcetXUcet).s_ucet_2 := aUcet2;
	tableUcetXUcet(idx_tableUcetXUcet).id_ktgDoklad := aIdKtgDoklad;
	tableUcetXUcet(idx_tableUcetXUcet).id_typ := aIdTyp;
	-- schovam si implicitni ID parenta, ktere pouziji pro vsechny vazane transakce na uctu s_ucet_2, ktere se nepodarilo poparovat jinak
	tableUcetXUcet(idx_tableUcetXUcet).id_implicitniParent := aIdParent;

end;

-- *********************************************************************************************************************
-- 			implementece pro collection : tableOpravkyNastroj
-- *********************************************************************************************************************
procedure addOpravka ( aList int, aRadek int ) as
	p int := tableOpravkyNastroj.count() + 1;
begin
	for i IN 1 .. tableOpravkyNastroj.count() loop
		if ( tableOpravkyNastroj(i).nl_radek = aRadek and tableOpravkyNastroj(i).nl_poradiList = aList ) then
			return;
		end if;
	end loop;

	tableOpravkyNastroj(p).nl_poradiList := aList;
	tableOpravkyNastroj(p).nl_radek := aRadek;

end;



-- inicializace
begin
	for curNastroj in ( select id, s_popis from kp_ktg_typNastroje where id > 0 ) loop
		tabKtgNastroj(curNastroj.id).id := curNastroj.id;
		tabKtgNastroj(curNastroj.id).s_popis := curNastroj.s_popis;
	end loop;

end;

/


PROMPT Completed CALCNASTROJEUTIL.sql
PROMPT


-- ============================================================================
-- Deploy: KAP_BUDGET.sql
-- Category: package bodies
-- ============================================================================

PROMPT Deploying KAP_BUDGET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package Body KAP_BUDGET
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "DB_JT"."KAP_BUDGET" as
  rowDefBudgetMustek kp_def_budgetmustek%rowtype;
  currentUser varchar2(30);

  rowDatBudgetPolozka kp_dat_budgetpolozka%rowtype;

  -------------------------------------------------------------------------------------------------
  -- DEFINICE PREVODOVEHO MUSTKU PRO BUDGETING
  -------------------------------------------------------------------------------------------------
  procedure logKpDefBudgetMustek( aAkce char ) as
  begin
    insert into kp_log_budgetmustek (
	  s_akce,
	  id,
	  id_cissubject,
	  id_cistyptransakce,
	  s_ucet,
	  s_uzivatel,
	  dt_datumzmeny,
	  dt_platnostOd,
	  dt_platnostDo)
	values (
	  aAkce,
      rowDefBudgetMustek.id,
	  rowDefBudgetMustek.id_cissubject,
	  rowDefBudgetMustek.id_cistyptransakce,
	  rowDefBudgetMustek.s_ucet,
	  currentUser,
	  sysdate,
	  rowDefBudgetMustek.dt_platnostOd,
	  rowDefBudgetMustek.dt_platnostDo
	  );
  end;

  procedure insertKpDefBudgetMustek as
  begin
    select SQ_KP_DEFBUDGETMUSTEK.nextVal into rowDefBudgetMustek.id from dual;

    insert into kp_def_budgetmustek (
	  id,
	  id_cissubject,
	  id_cistyptransakce,
	  s_ucet,
	  dt_platnostOd,
	  dt_platnostDo)
	values (
      rowDefBudgetMustek.id,
	  rowDefBudgetMustek.id_cissubject,
	  rowDefBudgetMustek.id_cistyptransakce,
	  rowDefBudgetMustek.s_ucet,
	  rowDefBudgetMustek.dt_platnostOd,
	  rowDefBudgetMustek.dt_platnostDo);
  end;

  procedure deleteKpDefBudgetMustek as
  begin
    delete from kp_def_budgetmustek
	where id = rowDefBudgetMustek.id;
  end;

  procedure updateKpDefBudgetMustek as
  begin
    deleteKpDefBudgetMustek;
	commit;
	insertKpDefBudgetMustek;
  end;

  procedure p_KpDefBudgetMustek( aAkce char, aId IN OUT int, aIdCisSubject int, aIdCisTypTran int, aUcet varchar2, aUzivatel varchar2, aDatumOd date, aDatumDo date ) as
    empty kp_def_budgetMustek%rowtype;
  begin
    rowDefBudgetMustek := empty;
  
	currentUser := aUzivatel;
	rowDefBudgetMustek.id := aId;
	rowDefBudgetMustek.id_cissubject := aIdCisSubject;
	rowDefBudgetMustek.id_cistyptransakce := aIdCisTypTran;
	rowDefBudgetMustek.s_ucet := aUcet;
	rowDefBudgetMustek.dt_platnostOd := aDatumOd;
	rowDefBudgetMustek.dt_platnostDo := aDatumDo;

	logKpDefBudgetMustek ( aAkce );
	if ( aAkce = 'I' ) then
		insertKpDefBudgetMustek;
	elsif ( aAkce = 'U' ) then
		updateKpDefBudgetMustek;
	elsif ( aAkce = 'D' ) then
		deleteKpDefBudgetMustek;
	else
		raise_application_error ( -20001, 'Akce musi byt U, I, D' );
	end if;

	aId := rowDefBudgetMustek.id;
	commit;
  end;

  -------------------------------------------------------------------------------------------------
  -- VYTVORENI BUDGETU
  -------------------------------------------------------------------------------------------------

  function insertKpDatBudgetPolozka(aIdBudget int, aIdCisTypTran int) return int as
    l_pom int;
	l_newId int := -1;
	l_mena varchar2(3);
  begin
    select count(*)
	into l_pom
	from kp_dat_budgetpolozka
	where id_budget = aIdBudget
	  and id_cistyptran = aIdCisTypTran;

	-- budget pro tento typ transakce jeste neexistuje
	if(l_pom = 0) then
	  select SQ_KP_BUDGETPOLOZKA.nextVal into l_newId from dual;
	  
	  select s_mena 
	  into l_mena 
	  from (select s_mena 
	        from vw_dat_budget vb 
	        where vb.id = aIdBudget
            union
	        select s_mena 
	        from vw_dat_budgetProjekt vbp 
	        where vbp.id = aIdBudget);

	  insert into kp_dat_budgetpolozka (
	    id,
		id_budget,
		id_cistyptran,
		s_mena)
	  values (
	    l_newId,
		aIdBudget,
		aIdCisTypTran,
		l_mena
	  );
-- 	else
--       select id
-- 	  into l_newId
-- 	  from kp_dat_budgetpolozka
-- 	  where id_budget = aIdBudget
-- 	    and id_cistyptran = aIdCisTypTran;
	end if;

	return l_newId;
  end;

  --Odborove budgety
  procedure p_vytvoritBudget(aIdKtgOdbor int, aDatumOd date, aDatumDo date) as
    l_pom int;
	l_pom2 int;
	l_newId int;
	l_polId int;
  begin
    select count(*)
	into l_pom
	from kp_dat_budget
	where id_ktgodbor = aIdKtgOdbor
	  and dt_platnostod = aDatumOd
	  and dt_platnostdo = aDatumDo;

	-- budget pro toto obdobi jeste neexistuje
	if(l_pom = 0) then
	  --neprekryvaji se obdobi?
	  select count(*)
	  into l_pom2
	  from kp_dat_budget
	  where id_ktgodbor = aIdKtgOdbor
        and (aDatumOd between dt_platnostod and dt_platnostdo
	      or aDatumDo between dt_platnostod and dt_platnostdo
		  or aDatumOd < dt_platnostod and aDatumDo > dt_platnostdo);

	  if(l_pom2 > 0) then
        raise_application_error ( -20999, '***Budgety se nesmeji casove prekryvat!!! Pro toto obdobi jiz budget pro odbor '||aIdKtgOdbor||' existuje***' );
	  end if;


	  select SQ_KP_BUDGET.nextVal into l_newId from dual;

	  insert into kp_dat_budget (
	    id,
		id_ktgodbor,
		dt_platnostod,
		dt_platnostdo)
	  values (
	    l_newId,
		aIdKtgOdbor,
		aDatumOd,
		aDatumDo);

	  for r in (select id
	            from kp_cis_typtransakce tt
				where (tt.DT_PLATNOSTOD between aDatumOd and aDatumDo
				   or tt.DT_PLATNOSTDO between aDatumOd and aDatumDo)
				  and tt.C_DEVELOPER <> '1') loop

		l_polId := insertKpDatBudgetPolozka(l_newId, r.id);

	  end loop;
	end if;

	commit;
  end;

  procedure p_vytvoritBudgety(aDatumOd date, aDatumDo date) as
  begin
    for r in (select id
	          from kp_ktg_odbor
			  where c_budgeting = '1'
			    and c_archivni <> '1') loop

	  p_vytvoritBudget(r.id, aDatumOd, aDatumDo);

	end loop;
  end;

  --Projektove budgety
  procedure p_vytvoritBudgetProjekt(aIdKtgProjekt int, aDatumOd date, aDatumDo date) as
    l_pom int;
	l_pom2 int;
	l_newId int;
	l_polId int;
  begin
    select count(*)
	into l_pom
	from kp_dat_budget
	where id_ktgProjekt = aIdKtgProjekt
	  and dt_platnostod = aDatumOd
	  and dt_platnostdo = aDatumDo;

	-- budget pro toto obdobi jeste neexistuje
	if(l_pom = 0) then
	  --neprekryvaji se obdobi?
	  select count(*)
	  into l_pom2
	  from kp_dat_budget
	  where id_ktgProjekt = aIdKtgProjekt
        and (aDatumOd between dt_platnostod and dt_platnostdo
	      or aDatumDo between dt_platnostod and dt_platnostdo
		  or aDatumOd < dt_platnostod and aDatumDo > dt_platnostdo);
/*--TEST
	  if(l_pom2 > 0) then
        raise_application_error ( -20999, '***Budgety se nesmeji casove prekryvat!!! Pro toto obdobi jiz budget pro projekt '||aIdKtgProjekt||' existuje***' );
	  end if;
*/

	  select SQ_KP_BUDGET.nextVal into l_newId from dual;

	  insert into kp_dat_budget (
	    id,
		id_ktgProjekt,
		dt_platnostod,
		dt_platnostdo)
	  values (
	    l_newId,
		aIdKtgProjekt,
		aDatumOd,
		aDatumDo);

	  for r in (select id
	            from kp_cis_typtransakce tt
				where (tt.DT_PLATNOSTOD between aDatumOd and aDatumDo
				   or tt.DT_PLATNOSTDO between aDatumOd and aDatumDo)
				  and tt.C_DEVELOPER <> '1') loop

		l_polId := insertKpDatBudgetPolozka(l_newId, r.id);

	  end loop;
	end if;

	commit;
  end;

  procedure p_vytvoritBudgetyProjekt(aDatumOd date, aDatumDo date) as
  begin
    for r in (select id
	          from kp_ktg_projekt
			  where c_sledujeBudget = '1'
			    and ID_TYPBUDGETU = 1 
			    and id_status not in (5,6,7)
				and (id_kategorie is null or id_kategorie <> 4)
				and dt_platnostDo >= aDatumOd and dt_platnostOd <= aDatumDo 
			 ) loop

	  p_vytvoritBudgetProjekt(r.id, aDatumOd, aDatumDo);

	end loop;
  end;
  
  procedure p_updateBudgetPolozka(aId in out int, aIdBudget int, aIdCisTypTran int, aCastka number, aMena varchar2,
                                  aPoznamka varchar2, aUserId int) as
    l_origCastka number;
  begin
    if(aId is null or aId < 1) then
	  aId := insertKpDatBudgetPolozka(aIdBudget, aIdCisTypTran);
	end if;

	select nd_castka
	into l_origCastka
	from kp_dat_budgetpolozka
	where id = aId;

	update kp_dat_budgetpolozka
	set nd_castka = aCastka,
	    s_mena = aMena,
		s_poznamka = aPoznamka,
		id_appuser = aUserId
	where id = aId;

	if(aCastka > l_origCastka) then
      update kp_dat_budgetpolozka
	  set dt_schvalenoodbor = null,
	      dt_schvalenogestor = null,
		  dt_schvalenoucspol = null,
		  dt_schvalenotop = null
	  where id = aId;
	end if;

	commit;
  end;

  procedure p_schvaleno(aAkce char, aId int, aTypOO int, aUserId int) as
    l_datum date;
  begin
    if(aAkce = 'I') then
	  l_datum := sysdate;
	else
	  l_datum := null;
	end if;

	if(aTypOO = 1) then
	  update kp_dat_budgetpolozka
	  set dt_schvalenoodbor = l_datum,
	      id_odboroo = aUserId
	  where id = aId;
	elsif(aTypOO = 2) then
	  update kp_dat_budgetpolozka
	  set dt_schvalenogestor = l_datum,
	      id_gestor = aUserId
	  where id = aId;
	elsif(aTypOO = 3) then
	  update kp_dat_budgetpolozka
	  set dt_schvalenoucspol = l_datum,
	      id_ucspoloo = aUserId
	  where id = aId;
	elsif(aTypOO = 4) then
	  update kp_dat_budgetpolozka
	  set dt_schvalenotop = l_datum,
	      id_ucspoltop = aUserId
	  where id = aId;
	end if;

	commit;
  end;

  function checkCheckable(aIdBudget int, aIdCisTypTran int) return int as
	l_castka number;
	l_castkaZd number;
  begin
    select nd_castka
	into l_castka
	from vw_dat_budgetpolozka
	where id_budget = aIdBudget
	  and id_cistyptran = aIdCisTypTran;

    l_castkaZd := f_getCastkaLocalBudget( aIdBudget, aIdCisTypTran, sysdate );

	if(l_castkaZd > l_castka) then
	  return 1;-- -1;
	end if;

	return 1;
  end;

  procedure p_schvalenoVse(aAkce char, aIdBudget int, aTypOO int, aUserId int) as
    l_datum date;
  begin

app.p_log_autonomous('p_schvalenoVse akce:'||aAkce||' - '||'aIdBudget:'||aIdBudget||' - ''typOO:'||aTypOO||' - '||'aUserId:'||aUserId );

  if(aAkce = 'I') then
	  l_datum := sysdate;
	else
	  l_datum := null;
	end if;

	if(aTypOO = 1) then
--esc 04.02.2015	  for r in (select id, id_cistyptran from VW_DAT_BUDGETPOLOZKA
      for r in 
        (select bp.id, bp.id_cistyptran 
          from VW_DAT_BUDGETPOLOZKA bp
              , KP_CIS_TYPTRANSAKCE 
	            where bp.id_budget = aIdBudget
              --esc 
              and bp.ID_CISTYPTRAN = KP_CIS_TYPTRANSAKCE.ID 
              and KP_CIS_TYPTRANSAKCE.C_CAPEX_OPEX !='W' 
              --schvalujeme iba TT polozky ktore su pre KIS a nie iba pre DWH
              and (   bp.id_odboroo = aUserId
                      or bp.id_odboroo in 
                                  (select id_koho
                                    from kp_dat_budgetZastup
                                    where id_kdo = aUserId
                                    and sysdate between dt_platnostOd and dt_platnostDo
                                    and (id_budget is null or id_budget = aIdBudget)
                                    )
                )
          ) loop
		if(aAkce <> 'I' OR checkCheckable(aIdBudget, r.id_cistyptran) > 0) then
          update kp_dat_budgetpolozka
              set dt_schvalenoodbor = l_datum,
                  id_odboroo = aUserId
	      where id = r.id;
		end if;
	  end loop;

	elsif(aTypOO = 2) then
	  for r in 
      (select bp.id, bp.id_cistyptran 
          from VW_DAT_BUDGETPOLOZKA bp
              , KP_CIS_TYPTRANSAKCE 
	            where bp.id_budget = aIdBudget
              --esc 
              and bp.ID_CISTYPTRAN = KP_CIS_TYPTRANSAKCE.ID 
              and KP_CIS_TYPTRANSAKCE.C_CAPEX_OPEX !='W' 
              --schvalujeme iba TT polozky ktore su pre KIS a nie iba pre DWH
              and (   bp.id_gestor = aUserId
                   or bp.id_gestor in 
                      ( select id_koho
                        from kp_dat_budgetZastup
                        where id_kdo = aUserId
                        and sysdate between dt_platnostOd and dt_platnostDo
                        and (id_budget is null or id_budget = aIdBudget)
                       )
                    )
        ) loop
		if(aAkce <> 'I' OR checkCheckable(aIdBudget, r.id_cistyptran) > 0) then
          update kp_dat_budgetpolozka
              set dt_schvalenogestor = l_datum,
                  id_gestor = aUserId
	      where id = r.id;
		end if;
	  end loop;

	elsif(aTypOO = 3) then
	  for r in 
      (select bp.id, bp.id_cistyptran 
          from VW_DAT_BUDGETPOLOZKA bp
              , KP_CIS_TYPTRANSAKCE 
	            where bp.id_budget = aIdBudget
              --esc 
              and bp.ID_CISTYPTRAN = KP_CIS_TYPTRANSAKCE.ID 
              and KP_CIS_TYPTRANSAKCE.C_CAPEX_OPEX !='W' 
              --schvalujeme iba TT polozky ktore su pre KIS a nie iba pre DWH    
    				  and (     bp.id_ucspoloo = aUserId
                    or  bp.id_ucspoloo in 
                        (select id_koho
                           from kp_dat_budgetZastup
                          where id_kdo = aUserId
                          and sysdate between dt_platnostOd and dt_platnostDo
                          and (id_budget is null or id_budget = aIdBudget)
                         )
                    )
        ) loop        
		if(aAkce <> 'I' OR checkCheckable(aIdBudget, r.id_cistyptran) > 0) then
	      update kp_dat_budgetpolozka
            set dt_schvalenoucspol = l_datum,
                id_ucspoloo = aUserId
	      where id = r.id;
		end if;
	  end loop;

	elsif(aTypOO = 4) then
	  for r in 
      (select bp.id, bp.id_cistyptran 
          from VW_DAT_BUDGETPOLOZKA bp
              , KP_CIS_TYPTRANSAKCE 
	            where bp.id_budget = aIdBudget
              --esc 
              and bp.ID_CISTYPTRAN = KP_CIS_TYPTRANSAKCE.ID 
              and KP_CIS_TYPTRANSAKCE.C_CAPEX_OPEX !='W' 
              --schvalujeme iba TT polozky ktore su pre KIS a nie iba pre DWH    
              and (     bp.id_ucspoltop = aUserId
                    or  bp.id_ucspoltop in 
                        (select id_koho
                          from  kp_dat_budgetZastup
                          where id_kdo = aUserId
                            and sysdate between dt_platnostOd and dt_platnostDo
                            and (id_budget is null or id_budget = aIdBudget)
                        )
                    )
        ) loop
		if(aAkce <> 'I' OR checkCheckable(aIdBudget, r.id_cistyptran) > 0) then
	      update kp_dat_budgetpolozka
            set dt_schvalenotop = l_datum,
    	          id_ucspoltop = aUserId
	      where id = r.id;
		end if;
	  end loop;
	end if;

	commit;
  end;

  procedure p_schvalenoVseTopAdmin(aAkce char, aIdBudget int, aUserId int) as
    l_datum date;
  begin

app.p_log_autonomous('p_schvalenoVseTopAdmin akce:'||aAkce||' - '||'aIdBudget:'||aIdBudget||' - '||'aUserId:'||aUserId );
  
  if(aAkce = 'I') then
	  l_datum := sysdate;
	else
	  l_datum := null;
	end if;

	for r in 
/*esc 04.02.2015
        (select id, id_cistyptran 
          from VW_DAT_BUDGETPOLOZKA
	          where id_budget = aIdBudget
*/
      (select bp.id, bp.id_cistyptran 
          from VW_DAT_BUDGETPOLOZKA bp
              , KP_CIS_TYPTRANSAKCE 
	            where bp.id_budget = aIdBudget
              --esc 
              and bp.ID_CISTYPTRAN = KP_CIS_TYPTRANSAKCE.ID 
              and KP_CIS_TYPTRANSAKCE.C_CAPEX_OPEX !='W' 
              --schvalujeme iba TT polozky ktore su pre KIS a nie iba pre DWH    
        ) loop
	  if(aAkce <> 'I' OR checkCheckable(aIdBudget, r.id_cistyptran) > 0) then
	    update kp_dat_budgetpolozka
          set dt_schvalenotop = l_datum,
              id_ucspoltop = aUserId
	    where id = r.id;
	  end if;
	end loop;

	commit;
  end;

  procedure p_schvalenoVseGestor(aAkce char, aIdCisTypTran int, aUserId int) as
    l_datum date;
  begin

app.p_log_autonomous('p_schvalenoVseGestor akce:'||aAkce||' - '||'aIdCisTypTran:'||aIdCisTypTran||' - '||'aUserId:'||aUserId );

  if(aAkce = 'I') then
	  l_datum := sysdate;
	else
	  l_datum := null;
	end if;

    for r in 
/*esc 04.02.2015    
    (select id, id_budget from VW_DAT_BUDGETPOLOZKA
              where id_cistyptran = aIdCisTypTran
	            and id_gestor = aUserId
*/
      (select bp.id, bp.id_budget 
          from VW_DAT_BUDGETPOLOZKA bp
              , KP_CIS_TYPTRANSAKCE 
              where 
                        bp.id_cistyptran = aIdCisTypTran
                    and bp.id_gestor = aUserId            
              --esc 
              and bp.ID_CISTYPTRAN = KP_CIS_TYPTRANSAKCE.ID 
              and KP_CIS_TYPTRANSAKCE.C_CAPEX_OPEX !='W' 
              --schvalujeme iba TT polozky ktore su pre KIS a nie iba pre DWH    
    ) loop
      if(aAkce <> 'I' OR checkCheckable(r.id_budget, aIdCisTypTran) > 0) then
        update kp_dat_budgetpolozka
        set dt_schvalenogestor = l_datum,
            id_gestor = aUserId
        where id = r.id;
	  end if;
    end loop;

	commit;
  end;
  
  procedure p_deleteBudget(aIdBudget int) as
  begin
  	  delete kp_dat_budgetZastup bz
	  where bz.id_budget = aIdBudget;

  	  delete kp_dat_budgetPolozka bp
	  where bp.id_budget = aIdBudget;

  	  delete kp_dat_budget b
	  where b.id = aIdBudget;
  end;
  -------------------------------------------------------------------------------------------------
end;

/


PROMPT Completed KAP_BUDGET.sql
PROMPT


-- ============================================================================
-- Deploy: KAP_CACHE.sql
-- Category: package bodies
-- ============================================================================

PROMPT Deploying KAP_CACHE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package Body KAP_CACHE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "DB_JT"."KAP_CACHE" as


procedure p_readUcetSpol ( aFromDB boolean, aId int ) as
begin
	if ( aID = rowUcetSpol.id and not aFromDB ) then
   	return;
   end if;

   select * into rowUcetSpol from Kp_ktg_ucetniSpolecnost where id = aId;
   
   if ( rowUcetSpol.dt_unifikovaneDoklady is null ) then
   	select p.dt_unifikovaneDoklady into rowUcetSpol.dt_unifikovaneDoklady from kp_parametry p;
   end if;

end;



procedure p_readDoklad ( aFromDB boolean, aId int, aLevel int default 0 ) as
begin
	if ( aID = rowDoklad.id and not aFromDB ) then
   	goto l_konec;
   end if;

   select * into rowDoklad from kp_dat_doklad where id = aId;

<<l_konec>>null;

   if ( aLevel = 0 ) then
   	return;
   end if;

   --p_readUcetSpol ( aFromDB, rowDoklad.id_ktgUcetniSpolecnost, aLevel - 1 );
   p_readUcetSpol ( aFromDB, rowDoklad.id_ktgUcetniSpolecnost );

end;

function f_isDokladZluty return boolean as
begin
	return ( rowDoklad.id_ktgUcetniSpolecnost != rowDoklad.id_subKonsolidace and rowDoklad.nl_krok <= 2 );
end;   

end;

/


PROMPT Completed KAP_CACHE.sql
PROMPT


-- ============================================================================
-- Deploy: KAP_CALCULATEDOKLAD.sql
-- Category: package bodies
-- ============================================================================

PROMPT Deploying KAP_CALCULATEDOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package Body KAP_CALCULATEDOKLAD
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "DB_JT"."KAP_CALCULATEDOKLAD" AS

    procedure p_calculateSumace ( aIdDoklad number )
    AS LANGUAGE JAVA NAME 'com.jt.dbServer.doklad.PL_Sql.p_calculateSumace(int)';

    procedure p_updatePolozka ( aId int, aMena varchar2, aCastkaMena number, aCastkaLocal number, aCastkaPrepocet number, aRelativne int  ) as
    	rowPolozka kp_dat_dokladPolozka%ROWTYPE;
    begin
		update kp_dat_dokladPolozka set
			nd_castkaMena = nd_castkaMena*aRelativne + aCastkaMena,
			nd_castkaLocal = nd_castkaLocal*aRelativne + aCastkaLocal,
			nd_castkaMenaPrepocet = nd_castkaMenaPrepocet*aRelativne + aCastkaPrepocet
		where
			id = aId and s_mena = aMena;

		if ( sql%rowcount = 1 ) then
			return;
		end if;

		-- nactu si detail, protoze se to lisi jenom menou a bud uz tam ta jina mena je nebo ji vlozim
		select * into rowPolozka from kp_dat_dokladPolozka where id = aId;

		update kp_dat_dokladPolozka set
			nd_castkaMena = nd_castkaMena*aRelativne + aCastkaMena,
			nd_castkaLocal = nd_castkaLocal*aRelativne + aCastkaLocal,
			nd_castkaMenaPrepocet = nd_castkaMenaPrepocet*aRelativne + aCastkaPrepocet
		where
			id_doklad = rowPolozka.id_doklad and
			s_mena = aMena and
			id_defListBunka = rowPolozka.id_defListBunka;

		if ( sql%rowcount = 1 ) then
			return;
		end if;

		rowPolozka.s_mena := aMena;
		rowPolozka.nd_castkaMena := aCastkaMena*aRelativne;
		rowPolozka.nd_castkaLocal := aCastkaLocal*aRelativne;
		rowPolozka.nd_castkaMenaPrepocet := aCastkaPrepocet*aRelativne;

		insert into kp_dat_dokladpolozka (
		   id_doklad, id_deflistbunka,
		   s_mena, nd_castkamena, nd_castkalocal,
		   nd_castkamenaprepocet, id_defdoklad, id_cislist,
		   id_cisradektyp, nl_poradilist, nl_radek,
		   nl_sloupec, c_vypocteno)
		values (
		   rowPolozka.id_doklad, rowPolozka.id_deflistbunka,
		   rowPolozka.s_mena, rowPolozka.nd_castkamena, rowPolozka.nd_castkalocal,
		   rowPolozka.nd_castkamenaprepocet, rowPolozka.id_defdoklad, rowPolozka.id_cislist,
		   rowPolozka.id_cisradektyp, rowPolozka.nl_poradilist, rowPolozka.nl_radek,
		   rowPolozka.nl_sloupec, '1'
		);

    end;

END;

/


PROMPT Completed KAP_CALCULATEDOKLAD.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/PACKAGE_BODIES/KAP_DOKLAD.sql: 'utf-8' codec can't decode byte 0xed in position 28250: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/PACKAGE_BODIES/KAP_DOKLAD_CALCULATE.sql: 'utf-8' codec can't decode byte 0xf9 in position 34554: invalid start byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/PACKAGE_BODIES/KAP_DOKUMENT.sql: 'utf-8' codec can't decode byte 0xe9 in position 3164: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/PACKAGE_BODIES/KAP_GUI.sql: 'utf-8' codec can't decode byte 0xed in position 6694: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/PACKAGE_BODIES/KAP_GUIV.sql: 'utf-8' codec can't decode byte 0xed in position 1896: invalid continuation byte


-- ============================================================================
-- Deploy: KAP_KONST.sql
-- Category: package bodies
-- ============================================================================

PROMPT Deploying KAP_KONST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package Body KAP_KONST
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "DB_JT"."KAP_KONST" as

function getMaxPlatnost return date as
begin
	return ( MAX_PLATNOST );
end;

end;

/


PROMPT Completed KAP_KONST.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/PACKAGE_BODIES/KAP_LOAD.sql: 'utf-8' codec can't decode byte 0xfd in position 11330: invalid start byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/PACKAGE_BODIES/KAP_NASTROJE.sql: 'utf-8' codec can't decode byte 0xe9 in position 38899: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/PACKAGE_BODIES/KAP_NASTROJEPREPARE.sql: 'utf-8' codec can't decode byte 0xed in position 10575: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/PACKAGE_BODIES/KAP_OPERACNI_RIZIKO.sql: 'utf-8' codec can't decode byte 0xe1 in position 854: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/PACKAGE_BODIES/KAP_PRIM.sql: 'utf-8' codec can't decode byte 0xc8 in position 6287: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/PACKAGE_BODIES/KAP_PROJEKT.sql: 'utf-8' codec can't decode byte 0xc8 in position 16817: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/PACKAGE_BODIES/KAP_PROJEKTDOKLAD.sql: 'utf-8' codec can't decode byte 0xe1 in position 1790: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/PACKAGE_BODIES/KAP_REPORT.sql: 'utf-8' codec can't decode byte 0xed in position 4282: invalid continuation byte


-- ============================================================================
-- Deploy: KAP_SERVIS.sql
-- Category: package bodies
-- ============================================================================

PROMPT Deploying KAP_SERVIS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package Body KAP_SERVIS
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "DB_JT"."KAP_SERVIS" as
	procedure p_vazbyPregenerovatProblemove( aIdSkupina int, aDatum date) as
	begin
	  for cur in (
		select d.id, a.*
		from KP_dat_dokladVazbyAkcept a, kp_dat_doklad d
		where
			  d.id = a.id_doklad and
			  d.dt_datum = aDatum and 
			  a.id_ktgUcetniSkupina = aIdSkupina and 
			  id_dokladProti is null) 
	  loop
	    kap_vazby.p_calculate_doklad_vazby ( cur.id, cur.id_ktgUcetniSpolecnostTo, cur.id_ktgUcetniSkupina, 'jj' );    
	  end loop;
	end;

end;

/


PROMPT Completed KAP_SERVIS.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/PACKAGE_BODIES/KAP_SUBKON.sql: 'utf-8' codec can't decode byte 0xf8 in position 37731: invalid start byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/PACKAGE_BODIES/KAP_TOPEXPORT.sql: 'utf-8' codec can't decode byte 0x9a in position 2289: invalid start byte


-- ============================================================================
-- Deploy: KAP_VAZBY.sql
-- Category: package bodies
-- ============================================================================

PROMPT Deploying KAP_VAZBY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package Body KAP_VAZBY
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "DB_JT"."KAP_VAZBY" as

VAZBY_CELE int := -999;

-- rika jestli se maji delat vazby proti vsem protistranam, nebo jenom proti jedne
-- fiktivni hodnota VAZBY_CELE rika, ze se vazby pocitaji pro cely doklad
idVazbaProtistrana int := VAZBY_CELE;

x_delejProtokol boolean := true;

function f_parovaniPravidla ( aList1 int, aList2 int ) return char as
begin

	if ( aList1 = 1 ) then
		-- aktiva beru pouze na aktiva a pasiva
		if ( aList2 in ( 1, 2 ) ) then
			return ( '1');
		else
			return ('0');
		end if;
	end if;

	if ( aList1 = 2 ) then
		-- pasiva beru pouze na aktiva a pasiva
		if ( aList2 in ( 1, 2 ) ) then
			return ( '1');
		else
			return ('0');
		end if;
	end if;

	if ( aList1 = 3 ) then
		-- podrozvahova aktiva/pasiva
		if ( aList2 in ( 4 ) ) then
			return ( '1');
		else
			return ('0');
		end if;
	end if;

	if ( aList1 = 4 ) then
		-- podrozvahova aktiva/pasiva
		if ( aList2 in ( 3 ) ) then
			return ( '1');
		else
			return ('0');
		end if;
	end if;


	if ( aList1 = 5 ) then
		-- vysledovku beru jenom na vysledovku
		if ( aList2 in ( 5 ) ) then
			return ( '1');
		else
			return ('0');
		end if;
	end if;

	-- vse ostatni ignoruji
	return ( '0' );
end;

-- pokusi se parovat vzajemne vazby jako agregovany celek s ohledem na povolenou toleranci
-- ale rozdeli to na sumaci nakladu X vynosum
procedure calculate_doklad_vazby_vysl ( aIdDoklad int, aIdKtgUcetniSpolecnost int, aIdKtgUcetniSkupina int ) as
	nd_toleranceVazby KP_Parametry.nd_toleranceVazby%TYPE;
	nd_suma KP_dat_DokladVazby.nd_castkaMena%TYPE;
	lID int;
	cursor curVazba is
		select id_ktgUcetniSpolecnostTo, s_mena, nl_poradiList, sum(nd_castkaMena) nd_castkaMena, Max(id) id, substr(s_ucet,1,1) znakUcet
		from KP_dat_DokladVazby
		where
			id_doklad = aIdDoklad and
			id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
			nl_poradiList = 5 and
			id_par is null and
			id_ktgUcetniSpolecnostFrom = aIdKtgUcetniSpolecnost and
         ( id_ktgUcetniSpolecnostTo = idVazbaProtistrana  or idVazbaProtistrana = VAZBY_CELE )
		group by id_ktgUcetniSpolecnostTo, s_mena, nl_poradiList, substr(s_ucet,1,1);
begin

	select nd_toleranceVazby * 0.01 into nd_toleranceVazby from KP_Parametry;

--put_any_line ( 'list ' || aIdKtgUcetniSpolecnost || '  ' || aList_1 || '  ' || aList_2 );

	for cVazba in curVazba loop

		select sum(nd_castkaMena), Max(id) into nd_suma, lID
		from KP_dat_DokladVazby
		where
			id_doklad = aIdDoklad and
			id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
			id_ktgUcetniSpolecnostTo = aIdKtgUcetniSpolecnost and
			id_ktgUcetniSpolecnostFrom = cVazba.id_ktgUcetniSpolecnostTo and
			s_mena = cVazba.s_mena and
			nl_poradiList = 5 and
			id_par is null and
			substr(s_ucet,1,1) != cVazba.znakUcet;

		nd_suma := NVL ( nd_suma, 0 );
		lID := NVL ( lID, 0 );


/*
		if ( -- porovnani na procentualni rozdil
			Abs ( nd_suma + cVazba.nd_castkaMena ) <= nd_toleranceVazby * Greatest ( Abs(nd_suma), Abs(cVazba.nd_castkaMena ) )
			or -- odstraneni haleru
			Abs ( Abs ( nd_suma + cVazba.nd_castkaMena ) - Greatest ( Abs(nd_suma), Abs(cVazba.nd_castkaMena ) ) < 1
			) then  */

		if ( -- porovnani na procentualni rozdil
			Abs ( nd_suma + cVazba.nd_castkaMena ) <= nd_toleranceVazby * Greatest ( Abs(nd_suma), Abs(cVazba.nd_castkaMena ) ) ) then

			update KP_dat_DokladVazby set
				id_par = -cVazba.id
			where
				id_doklad = aIdDoklad and
				id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
				id_ktgUcetniSpolecnostTo = aIdKtgUcetniSpolecnost and
				id_ktgUcetniSpolecnostFrom = cVazba.id_ktgUcetniSpolecnostTo and
				s_mena = cVazba.s_mena and
				nl_poradiList = 5 and
				id_par is null and
				substr(s_ucet,1,1) != cVazba.znakUcet;

			update KP_dat_DokladVazby set
				id_par = -lID
			where
				id_doklad = aIdDoklad and
				id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
				nl_poradiList = 5 and
				id_par is null and
				id_ktgUcetniSpolecnostFrom = aIdKtgUcetniSpolecnost and
				s_mena = cVazba.s_mena and
				id_ktgUcetniSpolecnostTo = cVazba.id_ktgUcetniSpolecnostTo and
				substr(s_ucet,1,1) = cVazba.znakUcet;

		end if;

	end loop;

end;


-- pokusi se parovat vzajemne vazby jako agregovany celek s ohledem na povolenou toleranci
-- nikoliv tedy po jednotlivych zaznamech a castkach, ale jako sumy dosud nesparovanych aktiv x pasiv a vysledovka x vysledovka
procedure calculate_doklad_vazby_parList ( aIdDoklad int, aIdKtgUcetniSpolecnost int, aList_1 int, aList_2 int, aIdKtgUcetniSkupina int ) as
	nd_toleranceVazby KP_Parametry.nd_toleranceVazby%TYPE;
--	nd_toleranceHalere KP_Parametry.nd_toleranceVazbyHalere%TYPE;
	nd_suma KP_dat_DokladVazby.nd_castkaMena%TYPE;
	lID int;
	cursor curVazba is
		select id_ktgUcetniSpolecnostTo, s_mena, nl_poradiList, sum(nd_castkaMena) nd_castkaMena, Max(id) id
		from KP_dat_DokladVazby
		where
			id_doklad = aIdDoklad and
			id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
			nl_poradiList = aList_1 and
			id_par is null and
			id_ktgUcetniSpolecnostFrom = aIdKtgUcetniSpolecnost and
         ( id_ktgUcetniSpolecnostTo = idVazbaProtistrana  or idVazbaProtistrana = VAZBY_CELE )
		group by id_ktgUcetniSpolecnostTo, s_mena, nl_poradiList;
begin
--	select nd_toleranceVazby * 0.01, nd_toleranceHalere into nd_toleranceVazby, nd_toleranceVazbyHalere from KP_Parametry;
	select nd_toleranceVazby * 0.01 into nd_toleranceVazby from KP_Parametry;

--put_any_line ( 'list ' || aIdKtgUcetniSpolecnost || '  ' || aList_1 || '  ' || aList_2 || '   ' || aIdDoklad );

	for cVazba in curVazba loop

		select sum(nd_castkaMena), Max(id) into nd_suma, lID
		from KP_dat_DokladVazby
		where
			id_doklad = aIdDoklad and
			id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
			id_ktgUcetniSpolecnostTo = aIdKtgUcetniSpolecnost and
			id_ktgUcetniSpolecnostFrom = cVazba.id_ktgUcetniSpolecnostTo and
			s_mena = cVazba.s_mena and
			nl_poradiList = aList_2 and
			id_par is null;

		nd_suma := NVL ( nd_suma, 0 );
		lID := NVL ( lID, 0 );

--put_any_line ( ' cVazba.id_ktgUcetniSpolecnostTo  ' || cVazba.id_ktgUcetniSpolecnostTo );
--put_any_line ( ' cVazba.nd_castkaMena  ' || cVazba.nd_castkaMena );
--put_any_line ( ' nd_suma  ' || nd_suma );

/*
		if ( -- porovnani na procentualni rozdil
			Abs ( nd_suma + cVazba.nd_castkaMena ) <= nd_toleranceVazby * Greatest ( Abs(nd_suma), Abs(cVazba.nd_castkaMena ) )
			or -- odstraneni haleru
			Abs ( Abs ( nd_suma + cVazba.nd_castkaMena ) - Greatest ( Abs(nd_suma), Abs(cVazba.nd_castkaMena ) ) < 1
			) then  */

		if ( -- porovnani na procentualni rozdil
			Abs ( nd_suma + cVazba.nd_castkaMena ) <= nd_toleranceVazby * Greatest ( Abs(nd_suma), Abs(cVazba.nd_castkaMena ) ) ) then
			update KP_dat_DokladVazby set
				id_par = -cVazba.id
			where
				id_doklad = aIdDoklad and
				id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
				id_ktgUcetniSpolecnostTo = aIdKtgUcetniSpolecnost and
				id_ktgUcetniSpolecnostFrom = cVazba.id_ktgUcetniSpolecnostTo and
				s_mena = cVazba.s_mena and
				nl_poradiList = aList_2 and
				id_par is null;

			update KP_dat_DokladVazby set
				id_par = -lID
			where
				id_doklad = aIdDoklad and
				id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
				nl_poradiList = aList_1 and
				id_par is null and
				id_ktgUcetniSpolecnostFrom = aIdKtgUcetniSpolecnost and
				s_mena = cVazba.s_mena and
				id_ktgUcetniSpolecnostTo = cVazba.id_ktgUcetniSpolecnostTo;

		end if;

	end loop;

end;

procedure calculate_doklad_vazby_1_user ( aIdDoklad int, aIdKtgUcetniSpolecnost int ) as
	l_suma kp_dat_dokladvazby.nd_castkaMena%TYPE;
	l_id int;
	l_count int;
	l_sign int;
begin

	for cVUser in (
		select
			Min(id) id, id_ktgUcetniSkupina, id_ktgUcetniSpolecnostFrom, id_ktgUcetniSpolecnostTo,
			s_mena, sum(nd_castkaMena) nd_castkaMena, nl_userIndexVazba, count(*) pocet
		from
			kp_dat_dokladvazby
		where
			id_doklad = aIdDoklad and NVL(nl_userIndexVazba,0) > 0 and id_ktgUcetniSpolecnostFrom = aIdKtgUcetniSpolecnost and id_par is null
		group by
			id_ktgUcetniSkupina, id_ktgUcetniSpolecnostFrom, id_ktgUcetniSpolecnostTo, s_mena, nl_userIndexVazba )

	loop

		select NVL( Sum(-nd_castkaMena), 0 ), count(*), min(id)
		into l_suma, l_count, l_id
		from kp_dat_dokladvazby
		where id_doklad = aIdDoklad and nl_userIndexVazba = cVUser.nl_userIndexVazba and
			s_mena = cVUser.s_mena and id_ktgUcetniSkupina = cVUser.id_ktgUcetniSkupina and
			id_ktgUcetniSpolecnostFrom = cVUser.id_ktgUcetniSpolecnostTo and
			id != cVUser.id and NVL(nl_userIndexVazba,0) > 0 and id_par is null;
--put_any_line ( l_count || '  ' || l_suma || '   ' || cVUser.nd_castkaMena );
--		if ( l_count !=0 and l_suma = cVUser.nd_castkaMena ) then
		if ( l_count !=0 and Abs(l_suma) = Abs(cVUser.nd_castkaMena) ) then
--put_any_line (  'update  ' || cVUser.id || '   ' || l_id );
--put_any_line (  'update  ' || l_id || '   ' || cVUser.id );
			l_sign := 1;
			if ( l_count > 1 ) then
				l_sign := -1;
			end if;
			update kp_dat_dokladvazby set
				id_par = l_sign * l_id,
				nd_castkaVyparovat = 0
			where
				id_doklad = aIdDoklad and NVL(nl_userIndexVazba,0) > 0 and id_par is null and
				id_ktgUcetniSkupina = cVUser.id_ktgUcetniSkupina and
				id_ktgUcetniSpolecnostFrom = cVUser.id_ktgUcetniSpolecnostFrom and
				id_ktgUcetniSpolecnostTo = cVUser.id_ktgUcetniSpolecnostTo and
				s_mena = cVUser.s_mena and
				nl_userIndexVazba = cVUser.nl_userIndexVazba;


			l_sign := 1;
			if ( cVUser.pocet > 1 ) then
				l_sign := -1;
			end if;
			update kp_dat_dokladvazby set
				id_par = l_sign*cVUser.id,
				nd_castkaVyparovat = 0
			where
				id_doklad = aIdDoklad and nl_userIndexVazba = cVUser.nl_userIndexVazba and
				s_mena = cVUser.s_mena and id_ktgUcetniSkupina = cVUser.id_ktgUcetniSkupina and
				id_ktgUcetniSpolecnostFrom = cVUser.id_ktgUcetniSpolecnostTo and
				NVL(nl_userIndexVazba,0) > 0 and id_par is null;
		end if;

	end loop;
end;


procedure calculate_doklad_vazby_2_user ( aIdDoklad int ) as
	l_suma kp_dat_dokladvazby.nd_castkaMena%TYPE;
	l_id int;
	l_count int;
	l_sign int;
begin

--put_any_line ( '*********** ' || aIdDoklad || '  ' || aIdKtgUcetniSpolecnost );


	for cVUser in (
		select
			Min(id) id, id_ktgUcetniSkupina, id_ktgUcetniSpolecnostFrom, id_ktgUcetniSpolecnostTo,
			s_mena, sum(nd_castkaMena) nd_castkaMena, nl_userIndexVazba, count(*) pocet
		from
			kp_dat_dokladvazby
		where
			nd_castkaMena < 0 and id_doklad = aIdDoklad and NVL(nl_userIndexVazba,0) < 0 and
--			id_ktgUcetniSpolecnostFrom = aIdKtgUcetniSpolecnost and
			id_par is null
		group by
			id_ktgUcetniSkupina, id_ktgUcetniSpolecnostFrom, id_ktgUcetniSpolecnostTo, s_mena, nl_userIndexVazba )

	loop

		select NVL( Sum(-nd_castkaMena), 0 ), count(*), min(id)
		into l_suma, l_count, l_id
		from kp_dat_dokladvazby
		where id_doklad = aIdDoklad and nl_userIndexVazba = cVUser.nl_userIndexVazba and
			s_mena = cVUser.s_mena and id_ktgUcetniSkupina = cVUser.id_ktgUcetniSkupina and
			id_ktgUcetniSpolecnostFrom = cVUser.id_ktgUcetniSpolecnostFrom and
			id_ktgUcetniSpolecnostTo = cVUser.id_ktgUcetniSpolecnostTo and
			nd_castkaMena > 0 and
			NVL(nl_userIndexVazba,0) < 0 and id_par is null;
--put_any_line ( l_count || '  ' || l_suma || '   ' || cVUser.nd_castkaMena );
		if ( l_count !=0 and l_suma = cVUser.nd_castkaMena ) then
--put_any_line (  'update  ' || cVUser.id || '   ' || l_id );
--put_any_line (  'update  ' || l_id || '   ' || cVUser.id );
			l_sign := 1;
			if ( l_count > 1 ) then
				l_sign := -1;
			end if;
			update kp_dat_dokladvazby set
				id_par = l_sign * l_id,
				nd_castkaVyparovat = 0
			where
				id_doklad = aIdDoklad and NVL(nl_userIndexVazba,0) < 0 and id_par is null and
				nd_castkaMena < 0 and
				id_ktgUcetniSkupina = cVUser.id_ktgUcetniSkupina and
				id_ktgUcetniSpolecnostFrom = cVUser.id_ktgUcetniSpolecnostFrom and
				id_ktgUcetniSpolecnostTo = cVUser.id_ktgUcetniSpolecnostTo and
				s_mena = cVUser.s_mena and
				nl_userIndexVazba = cVUser.nl_userIndexVazba;

			l_sign := 1;
			if ( cVUser.pocet > 1 ) then
				l_sign := -1;
			end if;
			update kp_dat_dokladvazby set
				id_par = l_sign*cVUser.id,
				nd_castkaVyparovat = 0
			where
				nd_castkaMena > 0 and
				id_doklad = aIdDoklad and nl_userIndexVazba = cVUser.nl_userIndexVazba and
				s_mena = cVUser.s_mena and id_ktgUcetniSkupina = cVUser.id_ktgUcetniSkupina and
				id_ktgUcetniSpolecnostFrom = cVUser.id_ktgUcetniSpolecnostFrom and
				id_ktgUcetniSpolecnostTo = cVUser.id_ktgUcetniSpolecnostTo and
				NVL(nl_userIndexVazba,0) < 0 and id_par is null;
		end if;

	end loop;
end;


procedure calculate_doklad_vazby_user ( aIdDoklad int, aIdKtgUcetniSpolecnost int ) as
begin
	calculate_doklad_vazby_1_user ( aIdDoklad, aIdKtgUcetniSpolecnost );
	calculate_doklad_vazby_2_user ( aIdDoklad );
end;


-- pokusi se parovat vzajemne vazby jako transakce jedna ku jedne
-- na ty co se nesparuji zavola pokus o sumacni parovani
procedure calculate_doklad_vazby_par ( aIdDoklad int, aIdKtgUcetniSpolecnost int, aIdKtgUcetniSkupina int ) as
	parRow KP_dat_DokladVazby%ROWTYPE;
   cVazbyLogLevel char;
	hlaska varchar2(1024);
	cursor curVazba is
		select * from KP_dat_DokladVazby where id_doklad = aIdDoklad and id_ktgUcetniSpolecnostFrom = aIdKtgUcetniSpolecnost and id_ktgUcetniSkupina = aIdKtgUcetniSkupina
      	and ( id_ktgUcetniSpolecnostTo = idVazbaProtistrana  or idVazbaProtistrana = VAZBY_CELE );
begin
	for cVazba in curVazba loop
		begin

			select * into parRow
			from KP_dat_DokladVazby
			where
				id_doklad = aIdDoklad and
				id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
				id_ktgUcetniSpolecnostTo = aIdKtgUcetniSpolecnost and
				id_ktgUcetniSpolecnostFrom = cVazba.id_ktgUcetniSpolecnostTo and
				s_mena = cVazba.s_mena and
				nd_castkaMena = -cVazba.nd_castkaMena and
				nd_castkaVyparovat != 0 and
				f_parovaniPravidla ( nl_poradiList, cVazba.nl_poradiList ) = '1'
--				and id_par is null
			;

			update KP_dat_DokladVazby set
				id_par = cVazba.id,
				nd_castkaVyparovat = Abs(nd_castkaVyparovat) - Abs(cVazba.nd_castkaMena)
			where
				id = parRow.id;

			update KP_dat_DokladVazby set
				id_par = parRow.id,
				nd_castkaVyparovat = Abs(nd_castkaVyparovat) - Abs(cVazba.nd_castkaMena)
			where
				id = cVazba.id;

		exception
			when NO_DATA_FOUND or TOO_MANY_ROWS then
				-- tak bud nenasel nebo toho bylo vic
				parRow := null;

		end;

	end loop;

	calculate_doklad_vazby_user ( aIdDoklad, aIdKtgUcetniSpolecnost );

	calculate_doklad_vazby_parList ( aIdDoklad, aIdKtgUcetniSpolecnost, 1, 2, aIdKtgUcetniSkupina );
	calculate_doklad_vazby_parList ( aIdDoklad, aIdKtgUcetniSpolecnost, 2, 1, aIdKtgUcetniSkupina );
	calculate_doklad_vazby_parList ( aIdDoklad, aIdKtgUcetniSpolecnost, 3, 4, aIdKtgUcetniSkupina );
	calculate_doklad_vazby_parList ( aIdDoklad, aIdKtgUcetniSpolecnost, 4, 3, aIdKtgUcetniSkupina );
	calculate_doklad_vazby_parList ( aIdDoklad, aIdKtgUcetniSpolecnost, 5, 5, aIdKtgUcetniSkupina );

	calculate_doklad_vazby_parList ( aIdDoklad, aIdKtgUcetniSpolecnost, 3, 3, aIdKtgUcetniSkupina );
	calculate_doklad_vazby_parList ( aIdDoklad, aIdKtgUcetniSpolecnost, 4, 4, aIdKtgUcetniSkupina );
	calculate_doklad_vazby_parList ( aIdDoklad, aIdKtgUcetniSpolecnost, 1, 1, aIdKtgUcetniSkupina );
	calculate_doklad_vazby_parList ( aIdDoklad, aIdKtgUcetniSpolecnost, 2, 2, aIdKtgUcetniSkupina );

	calculate_doklad_vazby_vysl ( aIdDoklad, aIdKtgUcetniSpolecnost, aIdKtgUcetniSkupina );

	if ( idVazbaProtistrana = VAZBY_CELE ) then
		delete KP_dat_DokladProtokol
		where id_doklad = aIdDoklad and nl_vazbySkupina = aIdKtgUcetniSkupina;
	end if;

	select c_vazbyLogLevel into cVazbyLogLevel from kp_ktg_ucetniskupina where id = aIdKtgUcetniSkupina;

	-- vystup do logu o stavu parovani
	for cLog in ( select trunc (sum(Abs(nd_castkaLocal))) nd_castkaLocal, id_ktgUcetniSpolecnostTo, id_ktgUcetniSpolecnostFrom, count(*) pocet
		from KP_dat_DokladVazby v
			where
				id_doklad = aIdDoklad and
				id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
            ( id_ktgUcetniSpolecnostTo = idVazbaProtistrana  or idVazbaProtistrana = VAZBY_CELE ) and
				id_par is null
			group by id_ktgUcetniSpolecnostTo, id_ktgUcetniSpolecnostFrom ) loop

		select
			'Vazby[' || aIdKtgUcetniSkupina || '] - ( ' || cLog.pocet || ' / ' || cLog.nd_castkaLocal || ') : ' ||
			s1.s_zkratka || decode ( s1.c_online, '0', '[NE-onLine]', '' ) ||
			' <=> ' ||
			s2.s_zkratka || decode ( s2.c_online, '0', '[NE-onLine]', '' )
		into hlaska from Kp_ktg_ucetniSpolecnost s1, KP_ktg_ucetniSpolecnost s2
		where s1.id = cLog.id_ktgUcetniSpolecnostTo and s2.id = cLog.id_ktgUcetniSpolecnostFrom ;

--dbms_output.put_line ( hlaska );
		if ( cLog.nd_castkaLocal != 0 and x_delejProtokol ) then
			kap_doklad.p_insertProtokol ( '0', aIdDoklad, cVazbyLogLevel, hlaska, aIdKtgUcetniSkupina );
		end if;

	end loop;

end;

/*
--	0 : je uplne mimo - nebudou se vazby vubec delat
--	1 : ber bez omezeni ani nevstupuje ani nevystupuje
--	2 : spolecnost vstupuje - obdobi zadane v tmp_skupinaVazby
--	3 : spolecnost vystupuje - obdobi zadane v tmp_skupinaVazby
--	4 : spolecnost vstupuje i vystupuje - obdobi zadane v tmp_skupinaVazby
function f_getKodDatumInterval ( aOd date, aDo date, aVazbyPlatnostOd date, aVazbyPlatnostDo date  ) return int as
begin

--put_any_line ( aOd || '-' || aDo || '    ' || aVazbyPlatnostOd || '-' || aVazbyPlatnostDo );

	if ( aOd >= aVazbyPlatnostOd ) and
		(  aDo <= aVazbyPlatnostDo )  then
		-- cely doklad je uvnitr obdobi vazeb
		return ( 1 );
	end if;

	if ( aOd > aVazbyPlatnostDo ) then
		-- je mimo obdobi doklad je vetsi jak obdobi vazeb
		return (0);
	end if;

	if ( aOd < aVazbyPlatnostOd ) then
		if ( aDo < aVazbyPlatnostOd ) then
			-- je mimo obdobi doklad je mensi jak obdobi vazeb
			return (0);
		elsif ( aDo > aVazbyPlatnostDo ) then
			-- obdobi dokladu je z obou stran vetsi jak obdobi vazeb
			return (4);
		elsif ( aDo <= aVazbyPlatnostDo ) then
			-- obdobi dokladu zacina pred odbobim vazeb a pokracuje pres cele obdobi vazeb => vstupuje
			return (2);
		end if;
	end if;


	if ( aDo > aVazbyPlatnostDo ) then
		-- doklad zacina pred obdobim vazeb a konci v obdobi vazeb=> vstupuje
		return (3);
	end if;

	raise_application_error ( -20001, 'nevi');

	return(null);

end
;
*/
function f_getKodZarazeni ( aDoklad KP_dat_doklad%ROWTYPE, aIdKtgUcetniSkupina int, 
	aRowClen KP_rel_SubKonsolidaceClen%ROWTYPE ) return int as
   ret int; 
begin
	ret := MyUtil.f_getKodDatumInterval 	( aDoklad.dt_datumPocStav, aDoklad.dt_datum, 
   			NVL ( aRowClen.dt_dokladVazbyOd, aRowClen.dt_clenstviOd), 
            NVL ( aRowClen.dt_dokladVazbyDo, aRowClen.dt_clenstviDo) );
/*   
   if ( 	NVL( aRowClen.c_smerClenstviOd, '?' ) = 'P' and aDoklad.dt_datum <= aRowClen.dt_clenstviDo ) then
   	-- osetreni prestupujicich spolecnosti, aby bral vse v druhe fazi prestupu
		ret := 1;
   end if;
*/         
   return ( ret );
end;

-- pomocna chce to tabulku TMP_SkupinaVazby uplne zrusit a udelat misto toho lokalni objekt
function fffgetKodZarazeni ( aDoklad KP_dat_doklad%ROWTYPE, aIdKtgUcetniSkupina int, aRowTMPSkupinaVazby TMP_SkupinaVazby%ROWTYPE ) return int as
   aRowClen KP_rel_SubKonsolidaceClen%ROWTYPE;   
begin

	for curObdobi in ( 	
   	select * from KP_rel_SubKonsolidaceClen c 
	   where c.id_ktgucetniskupina = aIdKtgUcetniSkupina and 
   		c.id_ktgsubkonsolidace = aRowTMPSkupinaVazby.Id_Ktgsubkonsolidace and
      	c.id_ktgucetnispolecnost = aRowTMPSkupinaVazby.Id_Ktgucetnispolecnost and
         trunc ( aDoklad.dt_datum, 'year' ) between trunc ( c.dt_clenstviOd, 'year' ) and trunc ( c.dt_clenstviDo, 'year' ) 
         order by c.dt_clenstviDo desc ) 
	loop         

		aRowClen := curObdobi;
	   return ( f_getKodZarazeni ( aDoklad, aIdKtgUcetniSkupina, aRowClen ) );
   
   end loop;
   
	return ( 0 );
   
end;

procedure insertVazbyAgregovaneListy ( aIdKtgUcetniSkupina int, aIdDoklad int, aIdSpolecnostFrom int, aIdSpolecnostTo int, aIdDokladWhere int, aIdDokladProtistrana int, aPoradiListOd int, aPoradiListDo int, aPropisujVazby char, aIdSubKonsolidace int ) as
begin
--put_any_line ( '    .. insertVazbyAgregovaneListy  ' || aIdKtgUcetniSkupina || ' ' || aIdDoklad || ' ' || aIdSpolecnostFrom || ' ' || aIdSpolecnostTo || ' ' || aIdDokladWhere || ' ' || aIdDokladProtistrana  || ' ' || aPoradiListDo );
--esc 17.12.07
if ( aIdSpolecnostFrom = 6491 OR aIdSpolecnostTo = 6491 )  
then 
	app.p_log_autonomous ( '..ins_VazbyAgregovaneListy  IKUS:'|| aIdKtgUcetniSkupina || ' ID:' || aIdDoklad || ' ISF:' || aIdSpolecnostFrom || ' IST:' || aIdSpolecnostTo || ' IDW:' || aIdDokladWhere || ' IDP:' || aIdDokladProtistrana  || ' PLO:'|| aPoradiListOd || ' PLD:' || aPoradiListDo || ' PV:' || aPropisujVazby || ' ISK:' || aIdSubKonsolidace );
end if;

	insert into KP_dat_DokladVazby (
		id_doklad, id_ktgUcetniSkupina, id_ktgUcetniSpolecnostFrom, id_ktgUcetniSpolecnostTo,
		id_cisRadekText, s_ucet, s_mena, nd_castkaMenaOriginal, nd_castkaLocalOriginal,
		nd_castkaMena, nd_castkaLocal, nl_poradiList, nl_radek, 
      id_dokladProtistrana, c_propisujVazby, id_ktgSubKonsolidace, id_cisUcetUnif )
	select
		aIdDoklad, aIdKtgUcetniSkupina, aIdSpolecnostFrom, aIdSpolecnostTo,
		a.id_cisRadekText, NVL ( a.s_ucetOriginal, a.s_ucet ), a.s_mena, sum(a.nd_castkamena), sum( a.nd_castkalocal),
		sum(a.nd_castkamena), sum( a.nd_castkalocal), p.nl_poradiList, p.nl_radek, 
      aIdDokladProtistrana, aPropisujVazby, aIdSubKonsolidace, a.id_cisUcetUnif
	from
		KP_dat_DokladZdrojDatAgregace a,
		KP_dat_DokladPolozka p
	where
		a.id_dokladPolozka = p.id and
		a.id_doklad = aIdDokladWhere and
		p.id_doklad = aIdDokladWhere and
		a.id_ktgUcetniSpolecnost = aIdSpolecnostTo and
		p.nl_poradiList between aPoradiListOd and aPoradiListDo
	group by
		a.s_ucetOriginal, a.s_mena, a.id_ktgUcetniSpolecnost, a.id_cisRadekText, p.nl_poradiList, p.nl_radek, a.id_cisUcetUnif, a.s_ucet
	having
		sum(a.nd_castkaMena) != 0 or sum(a.nd_castkaLocal) != 0;
--put_any_line ( '    .. ' || sql%rowcount );
/*
if (aIdSpolecnostFrom in ( 2001,2003) or
	 aIdSpolecnostTo   in ( 2001,2003)
   ) then
	if sql%rowcount !=0 
	then 		   
		app.p_log_autonomous ( 'v_t_doklady(   )  := ( t_doklad_vazby ('|| aIdKtgUcetniSkupina || ' ,' || aIdDoklad || ' ,' || aIdSpolecnostFrom || ' ,' || aIdSpolecnostTo || ' ,' || aIdDokladWhere || ' ,' || aIdDokladProtistrana  || ' ,'|| aPoradiListOd || ' ,' || aPoradiListDo || ' ,' || aPropisujVazby || ' ,' || aIdSubKonsolidace ||' ,'||sql%rowcount||'));');
		-- v_t_doklady( 1  )  := ( t_doklad_vazby (4 , 2123639 , 2003 , 1    , 2123639 , 2080828 , 1 , 99 , 1 , 10221       , 50  ));
	end if;				
                --		app.p_log_autonomous ( '..ins_VazbyAgregovaneListy '||'    .. ' || sql%rowcount );

end if;
*/
exception
			when others then
                           app.p_log_autonomous ( '..ins_VazbyAgregovaneListy BAAAC'||' .. ' || SQLERRM );			
			   app.p_log_autonomous ( '..ins_VazbyAgregovaneListy  IKUS:'|| aIdKtgUcetniSkupina || ' ID:' || aIdDoklad || ' ISF:' || aIdSpolecnostFrom || ' IST:' || aIdSpolecnostTo || ' IDW:' || aIdDokladWhere || ' IDP:' || aIdDokladProtistrana  || ' PLO:'|| aPoradiListOd || ' PLD:' || aPoradiListDo || ' PV:' || aPropisujVazby || ' ISK:' || aIdSubKonsolidace );
			   app.p_log_autonomous ( '..ins_VazbyAgregovaneListy '||'    .. ' || sql%rowcount );
                           app.p_log_autonomous ( 'v_t_doklady(   )  := ( t_doklad_vazby ('|| aIdKtgUcetniSkupina || ' ,' || aIdDoklad || ' ,' || aIdSpolecnostFrom || ' ,' || aIdSpolecnostTo || ' ,' || aIdDokladWhere || ' ,' || aIdDokladProtistrana  || ' ,'|| aPoradiListOd || ' ,' || aPoradiListDo || ' ,' || aPropisujVazby || ' ,' || aIdSubKonsolidace ||' ,'||sql%rowcount||'));');                           
			raise;
                        
end;

procedure insertVazbyAgregovaneAll ( aIdKtgUcetniSkupina int, aIdDoklad int, aIdSpolecnostFrom int, aIdSpolecnostTo int, aIdDokladWhere int, aIdDokladProtistrana int, aPropisujVazby char, aIdKtgSubkonsolidace int ) as
begin
	insertVazbyAgregovaneListy ( aIdKtgUcetniSkupina, aIdDoklad, aIdSpolecnostFrom, aIdSpolecnostTo, aIdDokladWhere, aIdDokladProtistrana, 1, 99, aPropisujVazby, aIdKtgSubkonsolidace );
end;

procedure insertVazbyAgregovaneRozvaha ( aIdKtgUcetniSkupina int, aIdDoklad int, aIdSpolecnostFrom int, aIdSpolecnostTo int, aIdDokladWhere int, aIdDokladProtistrana int, aPropisujVazby char, aIdKtgSubkonsolidace int ) as
begin
	insertVazbyAgregovaneListy ( aIdKtgUcetniSkupina, aIdDoklad, aIdSpolecnostFrom, aIdSpolecnostTo, aIdDokladWhere, aIdDokladProtistrana, 1, 4, aPropisujVazby, aIdKtgSubkonsolidace );
end;


procedure insertVazbyVysledovka_Od_Do (
	aIdKtgUcetniSkupina int, aIdDoklad int, aDtStartVysledovka date, aDtKonecVysledovka date,
	aIdSpolecnostFrom int, aIdSpolecnostTo int, aIdDokladWhere int, aIdDokladProtistrana int, 
   aPropisujVazby char, aIdSubKonsolidace int ) as
   lIdDoklad int;
begin
app.p_log ( 'START insertVazbyVysledovka_Od_Do ');    
app.p_log ( '  vysl od-do ' || aDtStartVysledovka || ' ' || aDtKonecVysledovka || ' ' || aIdSpolecnostFrom || ' ' || aIdSpolecnostTo || ' ' || aIdDokladWhere || ' ' || aIdDokladProtistrana );
--put_any_line ( '  vysl od-do ' || aDtStartVysledovka || ' ' || aDtKonecVysledovka || ' ' || aIdSpolecnostFrom || ' ' || aIdSpolecnostTo || ' ' || aIdDokladWhere || ' ' || aIdDokladProtistrana );

	-- muzu se pokusit pouzit stare vazby pro pripad, ze je mam uz z minule vypocitane
   -- protoze kdyz vystupuje tak od toho datumu az do konce roku bude mit vazby porad stejne
app.p_log ( 'START insertVazbyVysledovka_Od_Do 1');       
   if ( aDtStartVysledovka = trunc (aDtKonecVysledovka,'year') ) then
app.p_log ( 'START insertVazbyVysledovka_Od_Do 11');    
      select NVL ( Min(d.id), 0 ) into lIdDoklad
      from kp_dat_doklad d, kp_dat_doklad o
      where
      	d.id_ktgUcetniSpolecnost = aIdSpolecnostFrom and
         d.dt_datum between aDtKonecVysledovka and aDtKonecVysledovka + 33 and
         d.id_Subkonsolidace = d.id_ktgUcetniSpolecnost and
         o.id = aIdDokladWhere and d.c_vazby = '1' and d.id != o.id and
         o.s_uzivatel != 'denni' and d.s_uzivatel != 'denni';
app.p_log ( 'START insertVazbyVysledovka_Od_Do 12 : '||lIdDoklad);    
      if ( lIdDoklad > 0  ) then
      	-- takze jsem nasel stare vazby, ktere chci pouzit
--put_any_line ( 'zkratka ' ||          lIdDoklad );
app.p_log ( 'START insertVazbyVysledovka_Od_Do  13 : INSERT');          	
        insert into KP_dat_DokladVazby (
      		id_doklad, id_ktgUcetniSkupina, id_ktgUcetniSpolecnostFrom, id_ktgUcetniSpolecnostTo,
      		id_cisRadekText, s_ucet, s_mena, nd_castkaMenaOriginal,
      		nd_castkaMena, nd_castkaLocal, nd_castkaLocalOriginal,
      		nl_poradiList, nl_radek, id_dokladProtistrana, 
            c_propisujVazby, id_ktgSubKonsolidace, id_cisUcetUnif )
      	select
      		aIdDoklad, id_ktgUcetniSkupina, id_ktgUcetniSpolecnostFrom, id_ktgUcetniSpolecnostTo,
      		id_cisRadekText, s_ucet, s_mena, nd_castkaMenaOriginal,
      		nd_castkaMena, nd_castkaLocal, nd_castkaLocalOriginal,
      		nl_poradiList, nl_radek, id_dokladProtistrana, 
            c_propisujVazby, id_ktgSubKonsolidace, id_cisUcetUnif
			from
         	KP_dat_DokladVazby
         where
         	nl_poradiList = 5 and
            id_ktgUcetniSpolecnostTo = aIdSpolecnostTo and
            id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
         	id_doklad = lIdDoklad;
			-- vzal jsem stare tak koncim
--app.p_log ( aIdSpolecnostTo || '  ' || aIdKtgUcetniSkupina || '  ' || lIdDoklad );         
app.p_log ( 'START insertVazbyVysledovka_Od_Do  14 : vzal jsem stare tak koncim');          	
	      return;
      end if;

   end if;
--app.p_log ( 'aDtStartVysledovka and aDtKonecVysledovka ' || aDtStartVysledovka || '  ' ||  aDtKonecVysledovka );
app.p_log ( 'START insertVazbyVysledovka_Od_Do 2 : InSERT  KP_dat_DokladVazby ');    
	-- stare vazby nenasel tak pocita z transakci dokladu
	insert into KP_dat_DokladVazby (
		id_doklad, id_ktgUcetniSkupina, id_ktgUcetniSpolecnostFrom, id_ktgUcetniSpolecnostTo,
		id_cisRadekText, s_ucet, s_mena, nd_castkaMenaOriginal,
		nd_castkaMena, nd_castkaLocal, nd_castkaLocalOriginal,
		nl_poradiList, nl_radek, id_dokladProtistrana, c_propisujVazby, id_ktgSubKonsolidace, id_cisUcetUnif )
	select /*+ ordered index(z pk_kpzdrojdat) */
		aIdDoklad, aIdKtgUcetniSkupina, aIdSpolecnostFrom, aIdSpolecnostTo,
		p.id_cisRadekTyp, NVL ( z.s_ucetOriginal, z.s_ucet ), z.s_mena, sum(decode ( z.c_strana, 'D', -1, 1 )*z.nd_castkaMena),
		sum(decode ( z.c_strana, 'D', -1, 1 )*z.nd_castkaMena),
		sum( decode ( z.c_strana, 'D', -1, 1 )*z.nd_castkaLocal), sum( decode ( z.c_strana, 'D', -1, 1 )*z.nd_castkaLocal),
		p.nl_poradiList, p.nl_radek, aIdDokladProtistrana, aPropisujVazby, aIdSubKonsolidace, z.id_cisUcetUnif
	from
		KP_rel_Doklad_ZdrojDat r,
		KP_dat_DokladPolozka p,
		KP_dat_DokladZdrojDat z
	where
		z.datum between aDtStartVysledovka and aDtKonecVysledovka and
		p.id = r.id_dokladPolozka and
		z.id = r.id_dokladZdrojDat and
		r.id_doklad = aIdDokladWhere and
		p.id_doklad = aIdDokladWhere and
		z.id_ktgUcetniSpolecnostUnif = aIdSpolecnostTo and
		p.nl_poradiList = 5
	group by
		z.s_mena, z.s_ucetOriginal, z.id_ktgUcetniSpolecnostUnif, p.id_cisRadekTyp, p.nl_poradiList, p.nl_radek, z.id_cisUcetUnif, z.s_ucet
	having sum(decode ( z.c_strana, 'D', -1, 1 )*z.nd_castkaMena) != 0 or sum( decode ( z.c_strana, 'D', -1, 1 )*z.nd_castkaLocal) != 0
	;
app.p_log ( 'START insertVazbyVysledovka_Od_Do 3 : KONIEC ');             
end;

procedure manualniKorekceEditovanych ( doklad KP_dat_doklad%ROWTYPE, aIdSpolecnostProti int, aIdDokladProtistrana int, aIdKtgUcetniSkupina int ) as
begin
	-- kdyz jeste neexistuje doklad vazeb tak se na natazene transakce musi pokusit aplikovat manualni korekce
	-- doklady vazeb se budou dopocitavat a tim padem nemaji aktualizovane manualne editovane protistrany coz se musi napravit
	for cManualCastkaProti in (
		select * from KP_dat_DokladVazbyParovani
		where
			id_doklad = aIdDokladProtistrana and
			id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
			id_ktgUcetniSpolecnostFrom = aIdSpolecnostProti and
			id_ktgUcetniSpolecnostTo = doklad.id_ktgUcetniSpolecnost
			)
	loop
		update KP_dat_DokladVazby set
			nd_castkaMena = cManualCastkaProti.nd_castkaMena,
			nd_castkaLocal = cManualCastkaProti.nd_castkaLocal,
			nd_castkaVyparovat = cManualCastkaProti.nd_castkaMena,
			nl_userIndexVazba = cManualCastkaProti.nl_userIndexVazba
		where
			id_doklad = doklad.id and
			id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
			s_ucet = cManualCastkaProti.s_ucet and
			nl_poradiList = cManualCastkaProti.nl_poradiList and
			nl_radek = cManualCastkaProti.nl_radek and
			s_mena = cManualCastkaProti.s_mena and
			id_ktgUcetniSpolecnostFrom = aIdSpolecnostProti;
	end loop;

end;
/*
-- hleda pripadnou korekci datumu od, pro pripad, ze spolecnost pouze zmenila pozici v ramci konsolidacni skupiny
-- ono se to na prvni pohled tvari jako by vstoupila, ale muze to byt jenom prestup z jedne subkonsolidace do jine v ramci stejne ucetni skupiny ( RKC, JTFG )
procedure testKodZarazeni ( aIdKtgUcetniSkupina int, aDtPlatnostOd date, aidKtgUcetniSpolecnostFrom int, aidKtgUcetniSpolecnostTo int,
	aKodZarazeniPrestup out int, aDtPlatnostOdPrestup out date ) as
begin
	aKodZarazeniPrestup := 2;
	aDtPlatnostOdPrestup := aDtPlatnostOd;	-- tak kdyby se to nemenilo

	-- cyklus abych nemusel testovat zaznam nenalezen, pokud tam bude tak bude prave jeden
	for cSub in (
		select id_ktgSubKonsolidace, c.dt_clenstviOd, c.c_propisujVazby, c.dt_clenstviDo
		from kp_rel_subKonsolidaceClen c, kp_ktg_subKonsolidace k
		where c.id_ktgUcetniSpolecnost = aidKtgUcetniSpolecnostFrom and k.id_ktgUcetniSkupina = aIdKtgUcetniSkupina
				and c.id_ktgSubKonsolidace = k.id_ktgUcetniSpolecnost and c.dt_clenstviDo = aDtPlatnostOd-1 )
	loop
		-- pokud se dostal sem tak je jasne ze prestoupil a musim posunout datum vstupu
		aDtPlatnostOdPrestup := cSub.dt_clenstviOd;
				if ( trunc ( adtPlatnostOd, 'YEAR') between cSub.dt_clenstviOd and cSub.dt_clenstviDo ) then
			-- tak to muzu brat rovnou jako ze je clenem po celou dobu
			aKodZarazeniPrestup := 1;
		end if;

		begin
			select Greatest ( c.dt_clenstviOd, trunc(adtPlatnostOd, 'YEAR') ) into aDtPlatnostOdPrestup
			from kp_rel_subKonsolidaceClen c, kp_ktg_subKonsolidace k
				where c.id_ktgSubKonsolidace = cSub.id_ktgSubKonsolidace and k.id_ktgUcetniSkupina = aIdKtgUcetniSkupina
				and c.id_ktgSubKonsolidace = k.id_ktgUcetniSpolecnost
				and aDtPlatnostOd-1 between c.dt_clenstviOd and c.dt_clenstviDo and c.id_ktgUcetniSpolecnost = aidKtgUcetniSpolecnostTo;

			-- tak to je spolecnost ze stejne subkonsolidace z ktere jsem prestoupil => vracim to jak to prislo
			aKodZarazeniPrestup := 2;
			aDtPlatnostOdPrestup := aDtPlatnostOd;

		exception when NO_DATA_FOUND then
			null;
		end;

	end loop;

--put_any_line ( 'testKodZarazeni ' || aidKtgUcetniSpolecnostFrom  || 'x' ||aidKtgUcetniSpolecnostTo  || '   ' ||  aKodZarazeniPrestup || '  ' || aDtPlatnostOdPrestup || '  ' ||  aDtPlatnostOd);

end;
*/


/*
	zjisti si zda spolecnost je pobocka (neci). Pokud neni tak nedela nic. Pokud je to pobocka tak
   se musi prepocitat vazby do meny centraly - ovsem jenom ty vazby mezi centralou a pobockou
*/
procedure upravVazbyPobockaVpravo ( aIdDoklad int, aIdUcetniSpolecnost int, aMena varchar2, aIdKtgUcetniSkupina int, aDatum date ) as
   type t_idPar is table of Kp_Dat_DokladVazby.id_par%TYPE index by binary_integer;
   cl_idPar t_idPar;
   rowParVazba Kp_Dat_DokladVazby%ROWTYPE;
	l_idCentrala kp_ktg_ucetniSpolecnost.id_centrala%TYPE;
   s_listek cis_banka.s_zkratka%TYPE;
   s_menaMatka KP_cis_mena.id%TYPE;
begin
	select NVL ( id_centrala, -1 ) into l_idCentrala from kp_ktg_ucetniSpolecnost where id = aIdUcetniSpolecnost;

   if ( l_idCentrala = -1 ) then
   	-- nemusim nic delat neni to pobocka
   	return;
   end if;

	select b.s_zkratka, u.s_mena into s_listek, s_menaMatka
   from cis_banka b, kp_ktg_ucetniSpolecnost u
   where b.id_cisMena = u.s_mena and u.id = l_idCentrala;

   -- tak ted se budou upravovat prepocty originalni meny pro vazby s centralou
   -- a to tak, ze se musi vzit pomerem - tak aby v pobocce bylo v sume stejne cislo jako v centrale
   select distinct id_par bulk collect into cl_idPar
   from Kp_Dat_DokladVazby
   where
   	id_doklad = aIdDoklad and
      id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
      id_ktgUcetniSpolecnostTo = l_idCentrala;

	if ( cl_idPar is null ) then
   	return;
	end if;      

	for i in 1 .. cl_idPar.count loop

   	if ( cl_idPar(i) > 0 ) then
      	-- vazba 1 : 1 nebo 1 : N
         select * into rowParVazba from Kp_Dat_DokladVazby where id = cl_idPar(i);
         update Kp_Dat_DokladVazby set
            nd_castkaLocal = rowParVazba.nd_castkaLocal * nd_castkaMena/rowParVazba.nd_castkaMena
         where
         	id_doklad = aIdDoklad and
            id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
            id_ktgUcetniSpolecnostTo = l_idCentrala and
            id_par = cl_idPar(i) and
            nl_poradiList != 5;

         update Kp_Dat_DokladVazby set
--            nd_castkaLocal = Sign(nd_castkaMena) * Abs(rowParVazba.nd_castkaMena) * kap_subKon.f_getMenaAVGKurs ( s_listek, s_menaMatka, s_mena, aDatum )
				nd_castkaLocal = nd_castkaLocaloriginal * kurzy.f_getMenaAVGKurs ( s_listek, s_menaMatka, aMena, aDatum ) * nd_castkaMena / nd_castkaMenaOriginal
         where
         	id_doklad = aIdDoklad and
            id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
            id_ktgUcetniSpolecnostTo = l_idCentrala and
            id_par = cl_idPar(i) and
            nl_poradiList = 5;


   	elsif ( cl_idPar(i) < 0 ) then

			select id_par into rowParVazba.id_par from Kp_Dat_DokladVazby where id = Abs(cl_idPar(i));
         select Nvl( sum( nd_castkaLocal) ,0 ), Nvl( sum( nd_castkaMena) ,0 ) into rowParVazba.nd_castkaLocal, rowParVazba.nd_castkaMena
         from Kp_Dat_DokladVazby
         where
         	id_doklad = aIdDoklad and
            id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
            id_ktgUcetniSpolecnostFrom = l_idCentrala and
            id_par = rowParVazba.id_par;

			if ( rowParVazba.nd_castkaMena = 0 ) then
            update Kp_Dat_DokladVazby set
               nd_castkaLocal = 0
            where
            	id_doklad = aIdDoklad and
               id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
               id_ktgUcetniSpolecnostTo = l_idCentrala and
               id_par = cl_idPar(i);
			else
            update Kp_Dat_DokladVazby set
               nd_castkaLocal = Sign(nd_castkaMena) * Abs ( rowParVazba.nd_castkaLocal * nd_castkaMena/rowParVazba.nd_castkaMena )
            where
            	id_doklad = aIdDoklad and
               id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
               id_ktgUcetniSpolecnostTo = l_idCentrala and
               id_par = cl_idPar(i) and
               nl_poradiList != 5;

            update Kp_Dat_DokladVazby set
--               nd_castkaLocal = Sign(nd_castkaMena) * Abs(rowParVazba.nd_castkaMena) * kap_subKon.f_getMenaAVGKurs ( s_listek, s_menaMatka, s_mena, aDatum )
               nd_castkaLocal = nd_castkaLocaloriginal * kurzy.f_getMenaAVGKurs ( s_listek, s_menaMatka, aMena, aDatum ) * nd_castkaMena / nd_castkaMenaOriginal
            where
            	id_doklad = aIdDoklad and
               id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
               id_ktgUcetniSpolecnostTo = l_idCentrala and
               id_par = cl_idPar(i) and
               nl_poradiList = 5;

			end if;

   	elsif ( cl_idPar(i) = 0 ) then
            null;
      end if;

   end loop;

end;

procedure upravVazbyPobockaVlevo ( aIdDoklad int, aIdUcetniSpolecnost int, aMena varchar2, aIdKtgUcetniSkupina int, aDatum date, aIdCentrala int ) as
   s_listek cis_banka.s_zkratka%TYPE;
   s_menaMatka KP_cis_mena.id%TYPE;
begin

	select b.s_zkratka, u.s_mena into s_listek, s_menaMatka
   from cis_banka b, kp_ktg_ucetniSpolecnost u
   where b.id_cisMena = u.s_mena and u.id = aIdCentrala;

   update Kp_Dat_DokladVazby set
      nd_castkaLocal = nd_castkaMena * kurzy.f_getMenaKurs ( s_listek, s_menaMatka, s_mena, aDatum )
   where
   	id_doklad = aIdDoklad and
      id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
      id_ktgUcetniSpolecnostFrom = aIdUcetniSpolecnost and
      id_ktgUcetniSpolecnostTo != aIdCentrala and
      nl_poradiList != 5;

   update Kp_Dat_DokladVazby set
      nd_castkaLocal = 
      	decode ( nd_castkaMenaOriginal, 0 , 0,
         	nd_castkaLocaloriginal * kurzy.f_getMenaAVGKurs ( s_listek, s_menaMatka, aMena, aDatum ) * nd_castkaMena / nd_castkaMenaOriginal )
   where
   	id_doklad = aIdDoklad and
      id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
      id_ktgUcetniSpolecnostFrom = aIdUcetniSpolecnost and
      id_ktgUcetniSpolecnostTo != aIdCentrala and
      nl_poradiList = 5;

   update Kp_Dat_DokladVazby set
      nd_castkaLocal = 0
   where
   	id_doklad = aIdDoklad and
      id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
      id_ktgUcetniSpolecnostFrom = aIdUcetniSpolecnost and
      id_ktgUcetniSpolecnostTo = aIdCentrala and
		nd_castkaMena = 0 and nd_castkaLocal != 0;


end;


function f_getVazbyParovyDoklad ( aIdDoklad int, aIdSpolecnost int, aDokladRow KP_dat_doklad%ROWTYPE ) return int as
	pomDoklad KP_dat_doklad%ROWTYPE := aDokladRow;
	l_idDokladProti int;
begin

	if ( NVL ( aIdDoklad, 0 ) != 0 ) then
		select * into pomDoklad from KP_dat_doklad where id = aIdDoklad;
	end if;

	if ( pomDoklad.id_ktgUcetniSpolecnost = pomDoklad.id_subKonsolidace ) then
   	-- vyhledam si parovy doklad
      select NVL ( Max( d.id ), -1 ) into l_idDokladProti
      from
      	KP_dat_Doklad d
      where
         d.id_ktgUcetniSpolecnost = aIdSpolecnost and
         d.id_ktgUcetniSpolecnost = d.id_subkonsolidace and
         d.dt_datum = pomDoklad.dt_datum and
         d.nl_krok <= 2 and
         d.c_vazby = '1';
	else
   	-- vyhledam si parovy doklad
      select NVL ( Max( d.id ), -1 ) into l_idDokladProti
      from
      	KP_dat_Doklad d
      where
         d.id_ktgUcetniSpolecnost = aIdSpolecnost and
         d.id_ktgUcetniSpolecnost != d.id_subkonsolidace and
         d.dt_datum = pomDoklad.dt_datum and
         d.nl_krok <= 2 and
         d.c_vazby = '1';
	end if;            
   
   
	return ( l_idDokladProti );
end;



procedure calculate_doklad_vazby_cast ( doklad KP_dat_doklad%ROWTYPE, rowTmpSkupinaVazby TMP_SkupinaVazby%ROWTYPE, aIdKtgUcetniSkupina int ) as
	l_kodZarazeniOrg int;
	l_kodZarazeniPrestup int;
	l_kodZarazeniProti int;
	c_spolecnostManual kp_ktg_ucetniSpolecnost.c_extSystem%TYPE;
	iddokladProtistrana int;
	c_dokladTyp char;
	l_pom int;
   l_idCentrala int;
	dt_start_vysledovka date;
	dt_konec_vysledovka date;
	dt_platnostOdPrestup date;
   b_prestup boolean;
	l_rowTmpSkupinaVazby TMP_SkupinaVazby%ROWTYPE;
	cursor curManualCastka is
		select * from
		KP_dat_DokladVazbyParovani
		where id_doklad = doklad.id and id_ktgUcetniSkupina = aIdKtgUcetniSkupina
	for update of id_dokladVazby;

	procedure promazVyjimky ( al_doklad int, al_from int, al_to int ) as
   	l_ktgDoklad int;
   begin
   
      select d.id into l_ktgDoklad from kp_ktg_doklad d, kp_ktg_ucetniSpolecnost u
      where u.id = al_from and d.id_cisDoklad = 1 and u.id_cisSubject = d.id_cisSubject;

      -- promazu ucty s vyjimkami protistran
      for cDelkaVyjimka in ( select length ( trim(v.s_ucet) ) delka from KP_Ktg_DokladMajUcastVyjimka v
            where v.id_KtgDoklad = l_ktgDoklad 
            group by length ( trim(v.s_ucet) ) )
      loop
      
         delete KP_dat_DokladVazby
         where
            id_doklad = al_doklad and
            id_ktgUcetniSpolecnostFrom = al_from and
            ( id_ktgUcetniSpolecnostTo = al_to or al_to = -1 ) and
            substr ( s_ucet, 1, cDelkaVyjimka.delka ) in (
               select v.s_ucet from KP_Ktg_DokladMajUcastVyjimka v where v.id_KtgDoklad = l_ktgDoklad );
      end loop;

		if ( aIdKtgUcetniSkupina = 8 ) then
         for cDelUnif in ( select id from KP_cis_ucetUnif where c_pocitatVazby = '0' )
         loop
         
            delete KP_dat_DokladVazby
            where
               id_doklad = al_doklad and
               id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
               id_ktgUcetniSpolecnostFrom = al_from and
               ( id_ktgUcetniSpolecnostTo = al_to or al_to = -1 ) and
               id_cisUcetUnif = cDelUnif.id;
         end loop;
		end if;         

	end;

begin

	b_prestup := doklad.id_ktgUcetniSpolecnost != doklad.id_subkonsolidace and ( rowTmpSkupinaVazby.c_smerClenstviOd = 'P' or rowTmpSkupinaVazby.c_smerClenstviDo = 'P');

	l_kodZarazeniOrg := fffgetKodZarazeni ( doklad, aIdKtgUcetniSkupina, rowTmpSkupinaVazby );

--put_any_line ( '  l_kodZarazeniOrg ' || l_kodZarazeniOrg );

/*
	if ( b_prestup ) then
app.p_log ( 'prestup true ' || rowTmpSkupinaVazby.c_smerClenstviOd || '  l_kodZarazeniOrg=' || l_kodZarazeniOrg);       
   	if ( rowTmpSkupinaVazby.c_smerClenstviOd = 'I' ) then
			l_kodZarazeniPrestup := 2;	-- jako ze vstupuje
		else
      	l_kodZarazeniPrestup := 3;  -- jako ze vystupuje       
      end if;
   else
		
		l_kodZarazeniPrestup := l_kodZarazeniOrg;
	end if;
*/   
   
   l_kodZarazeniPrestup := l_kodZarazeniOrg;
   
--put_any_line ( 'l_kodZarazeniOrg  ' || l_kodZarazeniOrg || '  ' || rowTmpSkupinaVazby.dt_platnostOd );
--put_any_line ( 'l_kodZarazeniPrestup  ' || l_kodZarazeniPrestup );

	if ( rowTmpSkupinaVazby.id_cisSubTypClenstvi = '3' or l_kodZarazeniOrg = 0 ) then
		-- tak pro tento pripad se vazby nedelaji
--put_any_line ( '=> vazby se nedelaji - return  ' || doklad.id || '   ' || l_kodZarazeniOrg || '  ' || rowTmpSkupinaVazby.id_cisSubTypClenstvi );
		return;
	end if;

	-- pokud je spolecnost manualni tak se musi brat vazby primo z dokladu, protoze transakce neexistuji - ty se pro manualni doklady nezadavaji
	select c_extSystem, NVL (id_centrala,0) into c_spolecnostManual, l_idCentrala
	from kp_ktg_ucetniSpolecnost where id = doklad.id_ktgUcetniSpolecnost;

	if ( c_spolecnostManual = 'M' ) then
   	-- manualni spolecnosti uz maji agregovane vazby ve spravne formne a navic nemaji nic ve zdroji dat, takze ce berou komplet vazby - coz je stejne jako by ani nevstupovali ani nevystupovali
   	l_kodZarazeniPrestup := 1;
   end if;

	-- zapisuji castky, ktere ja jako spolecnost na dokladu eviduji proti protistranam ve skupine
	for cProtistrana in (
		select
			NVL ( t.dt_platnostOd, doklad.dt_datumPocStav ) dt_platnostOd,
			NVL ( t.dt_platnostDo, doklad.dt_datum ) dt_platnostDo,
			t.id_ktgUcetniSpolecnost,
			t.id_cisSubTypClenstvi,
         s.c_extsystem,
         t.id_ktgSubKonsolidace,
         t.rowId t_rowId
		from TMP_SkupinaVazby t, kp_ktg_ucetniSpolecnost s
      where
      	s.id = t.id_ktgUcetniSpolecnost and
      	doklad.id_ktgUcetniSpolecnost != t.id_ktgUcetniSpolecnost )
	loop
--put_any_line ( 'cProtistrana.Id_Ktgucetnispolecnost  ' || cProtistrana.Id_Ktgucetnispolecnost );

/*
		if ( l_kodZarazeniOrg = 2 and c_spolecnostManual != 'M') then
			-- tak spolecnost vstupuje - je mozne ze nejde o vstup ale o prestup
			testKodZarazeni ( aIdKtgUcetniSkupina, rowTmpSkupinaVazby.dt_platnostOd, doklad.id_ktgUcetniSpolecnost, cProtistrana.id_ktgUcetniSpolecnost, l_kodZarazeniPrestup, dt_platnostOdPrestup );
		end if;
*/
		select * into l_rowTmpSkupinaVazby from TMP_SkupinaVazby where rowId = cProtistrana.t_rowId;

		l_kodZarazeniProti := fffgetKodZarazeni ( doklad, aIdKtgUcetniSkupina, l_rowTmpSkupinaVazby );

--put_any_line ( '  l_kodZarazeniProti ' || l_kodZarazeniProti );

if ( aIdKtgUcetniSkupina = 2 and cProtistrana.id_ktgUcetniSpolecnost in ( 5012, 5021 ) and trunc(cProtistrana.dt_platnostOd, 'year' ) = '1.1.2005' ) then
	l_kodZarazeniProti := 1;
end if;

/*
		if ( l_kodZarazeniProti = 2 ) then
			-- tak protestovat jak je na tom protistrana
			testKodZarazeni ( aIdKtgUcetniSkupina, cProtistrana.dt_platnostOd, cProtistrana.id_ktgUcetniSpolecnost, doklad.id_ktgUcetniSpolecnost, l_kodZarazeniProti, dt_platnostOdPrestup );
		end if;
*/

--put_any_line ( '   proti ' || cProtistrana.id_ktgUcetniSpolecnost || '  kod zarazeniProti: ' || l_kodZarazeniProti || '  ' || cProtistrana.dt_platnostOd || '  ' || cProtistrana.dt_platnostDo || '  dokladID:' || doklad.id || '   ' || cProtistrana.id_cisSubTypClenstvi );

		if ( cProtistrana.id_cisSubTypClenstvi = 3 or l_kodZarazeniProti = 0 ) then
			-- tak protistrana je uplne mimo nebo je equity tak ji ignorujeme
			goto l_continue;
		end if;


		--idDokladProtistrana := kap_prim.f_getParovyDoklad ( null, cProtistrana.id_ktgUcetniSpolecnost, doklad );

		idDokladProtistrana := f_getVazbyParovyDoklad ( doklad.id, cProtistrana.id_ktgUcetniSpolecnost, null );
--put_any_line ( '   idDokladProtistrana ' || idDokladProtistrana );      
/*
		if ( idDokladProtistrana < 0 and doklad.id_ktgUcetniSpolecnost != doklad.id_subkonsolidace ) then
			-- tak to je pripad generovani subkonsolidacniho dokladu a tam nemusim prochazet vsechny
			-- protistrany, protoze vim ze existuji jenom ty pro ktere jsem si udelal specialni doklad (k zlomovemu datumu)
			-- ty co doklad nemaji tak by stejne zadnou vazbu v ucetnictvi na tuto spolecnost nemely
			goto l_continue;
		end if;
*/
--put_any_line ( '   proti ' || cProtistrana.id_ktgUcetniSpolecnost || '  idDokladProtistrana: ' || idDokladProtistrana || '  dokladID:' || doklad.id );
--put_any_line ( '   proti ' || cProtistrana.id_ktgUcetniSpolecnost || '  zarazeni: ' || l_kodZarazeniPrestup || '/' || l_kodZarazeniProti || '  ' || cProtistrana.dt_platnostOd || '  ' || cProtistrana.dt_platnostDo || '  dokladID:' || doklad.id || '  ' || idDokladProtistrana);
--	1 : ber bez omezeni ani nevstupuje ani nevystupuje
--	2 : spolecnost vstupuje - obdobi zadane v tmp_skupinaVazby
--	3 : spolecnost vystupuje - obdobi zadane v tmp_skupinaVazby
--	4 : spolecnost vstupuje i vystupuje - obdobi zadane v tmp_skupinaVazby


		if ( c_spolecnostManual = 'M' ) then
         -- manualni vse a skok na konec
         insertVazbyAgregovaneAll ( aIdKtgUcetniSkupina, doklad.id, doklad.id_ktgUcetniSpolecnost, cProtistrana.id_ktgUcetniSpolecnost, doklad.id, idDokladProtistrana, rowTmpSkupinaVazby.c_propisujVazby, rowTmpSkupinaVazby.id_ktgSubKonsolidace );
         goto l_protistrana;
		end if;

--put_any_line ( '   proti ' || cProtistrana.id_ktgUcetniSpolecnost || '  zarazeni: ' || l_kodZarazeniPrestup || '/' || l_kodZarazeniProti || '  ' || cProtistrana.dt_platnostOd || '  ' || cProtistrana.dt_platnostDo || '  dokladID:' || doklad.id || '  ' || idDokladProtistrana);


		if  ( l_kodZarazeniPrestup = 1 and l_kodZarazeniProti = 1 ) then
			-- spolecnost ani protistrana nevstupuje ani nevystupuje, muzu brat agregovane hodnoty
			-- nebo je to manualni spolecnost a ta se bere cela
			if ( doklad.id_ktgUcetniSpolecnost = doklad.id_subKonsolidace ) then
				insertVazbyAgregovaneAll ( aIdKtgUcetniSkupina, doklad.id, doklad.id_ktgUcetniSpolecnost, cProtistrana.id_ktgUcetniSpolecnost, doklad.id, idDokladProtistrana, rowTmpSkupinaVazby.c_propisujVazby, cProtistrana.id_ktgSubKonsolidace );
			else
				-- je to pripad "zluteho" pomocneho dokladu a pro ten se vazby delaji jenom
				-- kdyz jedna ze spolecnosti vystupuje a pak nas zajimaji jenom vazby na vysledovce
				insertVazbyAgregovaneListy ( aIdKtgUcetniSkupina, doklad.id, doklad.id_ktgUcetniSpolecnost, cProtistrana.id_ktgUcetniSpolecnost, doklad.id, idDokladProtistrana, 5, 5, rowTmpSkupinaVazby.c_propisujVazby, cProtistrana.id_ktgSubKonsolidace );
				--insertVazbyAgregovaneRozvaha ( aIdKtgUcetniSkupina, doklad.id, doklad.id_ktgUcetniSpolecnost, cProtistrana.id_ktgUcetniSpolecnost, doklad.id, idDokladProtistrana );
			end if;

			dt_start_vysledovka := doklad.dt_datumPocStav;
			dt_konec_vysledovka := doklad.dt_datum;


		elsif ( l_kodZarazeniPrestup in ( 1, 2 ) and l_kodZarazeniProti in ( 1, 2 ) ) then
			-- jeden nebo oba vstupuji, beru od vetsiho datumu do konce (nebo do vystupu) vysledovku, bilance se bere vse
			-- rozvaha se bere vse
			dt_start_vysledovka := Greatest ( rowTmpSkupinaVazby.dt_platnostOd, cProtistrana.dt_platnostOd);
			dt_konec_vysledovka := Least ( rowTmpSkupinaVazby.dt_platnostDo, cProtistrana.dt_platnostDo);

			insertVazbyAgregovaneRozvaha ( aIdKtgUcetniSkupina, doklad.id, doklad.id_ktgUcetniSpolecnost, cProtistrana.id_ktgUcetniSpolecnost, doklad.id, idDokladProtistrana, rowTmpSkupinaVazby.c_propisujVazby, cProtistrana.id_ktgSubKonsolidace );
			insertVazbyVysledovka_Od_Do ( aIdKtgUcetniSkupina, doklad.id, dt_start_vysledovka, dt_konec_vysledovka,
											doklad.id_ktgUcetniSpolecnost, cProtistrana.id_ktgUcetniSpolecnost, doklad.id, idDokladProtistrana, rowTmpSkupinaVazby.c_propisujVazby, cProtistrana.id_ktgSubKonsolidace );
--put_any_line ( dt_start_vysledovka || '  ' || dt_konec_vysledovka );

		elsif ( l_kodZarazeniPrestup in ( 1, 3 ) and l_kodZarazeniProti in ( 1, 3 ) ) then
			-- jeden nebo oba vystupuji, beru od datumu generovani do prvniho vystupu vysledovku, bilance se nebere vubec
			-- rozvaha se bere vse
			dt_start_vysledovka := doklad.dt_datumPocStav;
			dt_konec_vysledovka := Least ( rowTmpSkupinaVazby.dt_platnostDo, cProtistrana.dt_platnostDo);

			insertVazbyVysledovka_Od_Do ( aIdKtgUcetniSkupina, doklad.id, dt_start_vysledovka, dt_konec_vysledovka,
											doklad.id_ktgUcetniSpolecnost, cProtistrana.id_ktgUcetniSpolecnost, doklad.id, idDokladProtistrana, rowTmpSkupinaVazby.c_propisujVazby, cProtistrana.id_ktgSubKonsolidace );

		elsif ( l_kodZarazeniPrestup = 3 and l_kodZarazeniProti = 2 ) then
			-- spolecnost vystupuje a protistrana vstupuje
			if ( rowTmpSkupinaVazby.dt_platnostDo < cProtistrana.dt_platnostOd ) then
				-- vystoupil driv nez druhy vstoupil takze nic
				goto l_continue;
			end if;
			-- bilance se nebere a vysledovka jenom od datumu vstupu protistrany do datumu vystupu spolecnosti
			dt_start_vysledovka := cProtistrana.dt_platnostOd;
			dt_konec_vysledovka := rowTmpSkupinaVazby.dt_platnostOd;

			insertVazbyVysledovka_Od_Do ( aIdKtgUcetniSkupina, doklad.id, dt_start_vysledovka, dt_konec_vysledovka,
											doklad.id_ktgUcetniSpolecnost, cProtistrana.id_ktgUcetniSpolecnost, doklad.id, idDokladProtistrana, rowTmpSkupinaVazby.c_propisujVazby, cProtistrana.id_ktgSubKonsolidace );

		elsif ( l_kodZarazeniPrestup = 2 and l_kodZarazeniProti = 3 ) then
			-- spolecnost vstupuje a protistrana vystupuje
			if ( cProtistrana.dt_platnostDo <  rowTmpSkupinaVazby.dt_platnostOd  ) then
				-- protistrana vystoupila driv nez spolecnost vstoupila takze nic
				goto l_continue;
			end if;
			-- bilance se nebere a vysledovka jenom od datumu vstupu spolecnosti do datumu vystupu protistrany
			dt_start_vysledovka := rowTmpSkupinaVazby.dt_platnostOd;
			dt_konec_vysledovka := cProtistrana.dt_platnostDo;

			insertVazbyVysledovka_Od_Do ( aIdKtgUcetniSkupina, doklad.id, dt_start_vysledovka, dt_konec_vysledovka,
											doklad.id_ktgUcetniSpolecnost, cProtistrana.id_ktgUcetniSpolecnost, doklad.id, idDokladProtistrana, rowTmpSkupinaVazby.c_propisujVazby, cProtistrana.id_ktgSubKonsolidace );

		else
			put_any_line ( 'X1XXXX Neni kod ' || l_kodZarazeniPrestup || '  ' || l_kodZarazeniProti );
		end if;

--put_any_line ( 'l_kodZarazeniPrestup ' || l_kodZarazeniPrestup || '  l_kodZarazeniProti ' || l_kodZarazeniProti || '  ' || iddokladProtistrana || '  ' || cProtistrana.id_ktgUcetniSpolecnost);

<<l_protistrana>> null;
--put_any_line ( 'l_kodZarazeniPrestup ' || l_kodZarazeniPrestup || '  l_kodZarazeniProti ' || l_kodZarazeniProti || '  ' || iddokladProtistrana || '  ' || cProtistrana.id_ktgUcetniSpolecnost || '  idDokladProtistrana=' || idDokladProtistrana);
		-- dohledavam transakce protistrany
		if ( idDokladProtistrana <= 0 ) then
			-- nenasel doklad protistrany takze continue v cyklu, nebo spolecnost prestupuje a pak nechci delat pravou stranu vazeb
			goto l_continue;
		end if;


		-- podivam se jestli uz je vypocitany doklad s vazbami protistrany, pokud by byl tak vezmu ty data
		-- o protistrane z toho dokladu a nemusim je hledat v DB
		select count(*) into l_pom from kp_dat_dokladvazby v where v.id_doklad = idDokladProtistrana and v.id_ktgucetniskupina = aIdKtgUcetniSkupina and rownum = 1;
--put_any_line ( 'l_pom  ' || l_pom || '  l_kodZarazeniPrestup ' || l_kodZarazeniPrestup || '  l_kodZarazeniProti ' || l_kodZarazeniProti || '  dp: ' || iddokladProtistrana || '  p:' || cProtistrana.id_ktgUcetniSpolecnost || '  sk:' || aIdKtgUcetniSkupina );
--goto l_continue;




		if ( l_pom = 0 ) then
--put_any_line ( 'neberu doklad protistrany ' || idDokladProtistrana || '  ' || aIdKtgUcetniSkupina || '  ' || doklad.id_ktgUcetniSpolecnost || '  ' || cProtistrana.id_ktgUcetniSpolecnost );			-- manualni protistrany taky vzdycky ber cele
			-- takze musim jit hledat do DB
			if  ( ( cProtistrana.c_extSystem = 'M' ) or l_kodZarazeniPrestup = 1 and l_kodZarazeniProti = 1 ) then
				-- spolecnost ani protistrana nevstupuje ani nevystupuje, muzu brat agregovane hodnoty
				-- nebo je protistrana manualni a pak ber vse
					insertVazbyAgregovaneAll ( aIdKtgUcetniSkupina, doklad.id, cProtistrana.id_ktgUcetniSpolecnost, doklad.id_ktgUcetniSpolecnost, idDokladProtistrana, idDokladProtistrana, rowTmpSkupinaVazby.c_propisujVazby, cProtistrana.id_ktgSubKonsolidace );
			elsif ( l_kodZarazeniPrestup in ( 1, 2 ) and l_kodZarazeniProti in ( 1, 2 ) ) then
				-- jeden nebo oba vstupuji, beru od vetsiho datumu do konce (nebo do vystupu) vysledovku, bilance se bere vse
				-- rozvaha se bere vse
				insertVazbyAgregovaneRozvaha ( aIdKtgUcetniSkupina, doklad.id, cProtistrana.id_ktgUcetniSpolecnost, doklad.id_ktgUcetniSpolecnost, idDokladProtistrana, idDokladProtistrana, rowTmpSkupinaVazby.c_propisujVazby, cProtistrana.id_ktgSubKonsolidace );
				insertVazbyVysledovka_Od_Do ( aIdKtgUcetniSkupina, doklad.id, dt_start_vysledovka, dt_konec_vysledovka,
												cProtistrana.id_ktgUcetniSpolecnost, doklad.id_ktgUcetniSpolecnost, idDokladProtistrana, idDokladProtistrana, rowTmpSkupinaVazby.c_propisujVazby, cProtistrana.id_ktgSubKonsolidace );

			elsif ( l_kodZarazeniPrestup in ( 1, 3 ) and l_kodZarazeniProti in ( 1, 3 ) ) then
				-- jeden nebo oba vystupuji, beru od datumu generovani do prvniho vystupu vysledovku, bilance se nebere vubec
				-- rozvaha se bere vse
				dt_start_vysledovka := doklad.dt_datumPocStav;
				dt_konec_vysledovka := Least ( rowTmpSkupinaVazby.dt_platnostDo, cProtistrana.dt_platnostDo);

				insertVazbyVysledovka_Od_Do ( aIdKtgUcetniSkupina, doklad.id, dt_start_vysledovka, dt_konec_vysledovka,
												cProtistrana.id_ktgUcetniSpolecnost, doklad.id_ktgUcetniSpolecnost, idDokladProtistrana, idDokladProtistrana, rowTmpSkupinaVazby.c_propisujVazby, cProtistrana.id_ktgSubKonsolidace);

			elsif ( l_kodZarazeniPrestup = 3 and l_kodZarazeniProti = 2 ) then
				-- bilance se nebere a vysledovka jenom od datumu vstupu protistrany do datumu vystupu spolecnosti
				dt_start_vysledovka := cProtistrana.dt_platnostOd;
				dt_konec_vysledovka := rowTmpSkupinaVazby.dt_platnostOd;

				insertVazbyVysledovka_Od_Do ( aIdKtgUcetniSkupina, doklad.id, dt_start_vysledovka, dt_konec_vysledovka,
												cProtistrana.id_ktgUcetniSpolecnost, doklad.id_ktgUcetniSpolecnost, idDokladProtistrana, idDokladProtistrana, rowTmpSkupinaVazby.c_propisujVazby, cProtistrana.id_ktgSubKonsolidace );

			elsif ( l_kodZarazeniPrestup = 2 and l_kodZarazeniProti = 3 ) then
				-- spolecnost vstupuje a protistrana vystupuje
				-- bilance se nebere a vysledovka jenom od datumu vstupu spolecnosti do datumu vystupu protistrany
				dt_start_vysledovka := rowTmpSkupinaVazby.dt_platnostOd;
				dt_konec_vysledovka := cProtistrana.dt_platnostDo;

				insertVazbyVysledovka_Od_Do ( aIdKtgUcetniSkupina, doklad.id, dt_start_vysledovka, dt_konec_vysledovka,
												cProtistrana.id_ktgUcetniSpolecnost, doklad.id_ktgUcetniSpolecnost, idDokladProtistrana, idDokladProtistrana, rowTmpSkupinaVazby.c_propisujVazby, cProtistrana.id_ktgSubKonsolidace );

			else
				put_any_line ( 'X2XXXX Neni kod ' || l_kodZarazeniPrestup || '  ' || l_kodZarazeniProti );
			end if;

			promazVyjimky ( doklad.id, cProtistrana.id_ktgUcetniSpolecnost, doklad.id_ktgUcetniSpolecnost );
/*		
   		-- promazu ucty s vyjimkami protistran
   		for cDelkaVyjimka in ( select length ( trim(v.s_ucet) ) delka from KP_Ktg_DokladMajUcastVyjimka v, KP_dat_Doklad d
   				where v.id_KtgDoklad = d.id_KtgDoklad and d.id = idDokladProtistrana 
   				group by length ( trim(v.s_ucet) ) )
   		loop
   			delete KP_dat_DokladVazby
   			where
   				id_doklad = doklad.id and
   				id_ktgUcetniSpolecnostFrom = cProtistrana.id_ktgUcetniSpolecnost and
   				id_ktgUcetniSpolecnostTo = doklad.id_ktgUcetniSpolecnost and
   				substr ( s_ucet, 1, cDelkaVyjimka.delka ) in (
   					select v.s_ucet from KP_Ktg_DokladMajUcastVyjimka v, KP_dat_Doklad d
   					where v.id_KtgDoklad = d.id_KtgDoklad and d.id = idDokladProtistrana );
   		end loop;
*/
--delete kp_dat_dokladvazby v where v.id_doklad = 1228545 and v.id_ktgucetniskupina = 2 and nl_radek = 136 and id_ktgUcetniSpolecnostFrom = 2001 and id_ktgUcetniSpolecnostTo = 5007;

   		-- pro automaticke generovani provede upravu na manualnich editacich vazeb
   		manualniKorekceEditovanych ( doklad, cProtistrana.id_ktgUcetniSpolecnost, idDokladProtistrana, aIdKtgUcetniSkupina );


		else
--put_any_line ( 'pouziji doklad protistrany ' || idDokladProtistrana || '  ' || aIdKtgUcetniSkupina || '  ' || doklad.id_ktgUcetniSpolecnost || '  ' || cProtistrana.id_ktgUcetniSpolecnost );
			-- tak ted muzu pouzit doklad protistrany
			insert into KP_dat_DokladVazby (
				id_doklad, id_ktgUcetniSkupina, id_ktgUcetniSpolecnostFrom, id_ktgUcetniSpolecnostTo,
				id_cisRadekText, s_ucet, s_mena, nd_castkaMenaOriginal,
				nd_castkaMena, nd_castkaLocal, nd_castkaLocalOriginal, id_ktgSubkonsolidace,
				nl_poradiList, nl_radek, id_dokladProtistrana, c_propisujVazby, nl_userIndexVazba, id_cisUcetUnif )
			select
				doklad.id, aIdKtgUcetniSkupina, cProtistrana.id_ktgUcetniSpolecnost, doklad.id_ktgUcetniSpolecnost,
				id_cisRadekText, s_ucet, s_mena, nd_castkaMenaOriginal,
				nd_castkaMena, nd_castkaLocal, nd_castkaLocalOriginal, id_ktgSubkonsolidace,
				nl_poradiList, nl_radek, idDokladProtistrana, c_propisujVazby, nl_userIndexVazba, id_cisUcetUnif
			from
				kp_dat_dokladvazby
			where
				id_doklad = idDokladProtistrana and
				id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
				id_ktgUcetniSpolecnostTo = doklad.id_ktgUcetniSpolecnost and
				id_ktgUcetniSpolecnostFrom = cProtistrana.id_ktgUcetniSpolecnost;

		end if;

		select count(*) into l_pom from KP_dat_DokladVazbyAkcept
		where id_doklad = doklad.id and id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
			id_ktgUcetniSpolecnostFrom = doklad.id_ktgUcetniSpolecnost and
			id_ktgUcetniSpolecnostTo = cProtistrana.id_ktgUcetniSpolecnost;

		if ( l_pom = 0 ) then
			-- ulozim si zaznamy pro akceptaci
			insert into KP_dat_DokladVazbyAkcept (
				id_doklad, id_ktgUcetniSkupina, id_ktgUcetniSpolecnostFrom,
				id_ktgUcetniSpolecnostTo, c_akceptace, s_uzivatel, id_dokladProti )
			values (
				doklad.id, aIdKtgUcetniSkupina, doklad.id_ktgUcetniSpolecnost,
				cProtistrana.id_ktgUcetniSpolecnost, '0', 'new', idDokladProtistrana );
		end if;

<<l_continue>>null;

	end loop;

	promazVyjimky ( doklad.id, doklad.id_ktgUcetniSpolecnost, -1 );
/*
   -- promazu ucty s vyjimkami
   for cDelkaVyjimka in (
      select length ( trim(v.s_ucet) ) delka from KP_Ktg_DokladMajUcastVyjimka v
            where v.id_KtgDoklad = doklad.id_KtgDoklad group by length ( trim(v.s_ucet) ) )
   loop
      
      delete KP_dat_DokladVazby
      where
         id_doklad = doklad.id and
         id_ktgUcetniSpolecnostFrom = doklad.id_ktgUcetniSpolecnost and
         substr ( s_ucet, 1, cDelkaVyjimka.delka ) in (
            select v.s_ucet from KP_Ktg_DokladMajUcastVyjimka v
            where v.id_KtgDoklad = doklad.id_KtgDoklad );
   end loop;

*/


/*
	if ( kap_cache.rowDoklad.id_ktgdoklad != 950 ) then
      -- promazu ucty s vyjimkami
      for cDelkaVyjimka in (
         select length ( trim(v.s_ucet) ) delka from KP_Ktg_DokladMajUcastVyjimka v
               where v.id_KtgDoklad = doklad.id_KtgDoklad )
      loop
      
         delete KP_dat_DokladVazby
         where
            id_doklad = doklad.id and
            id_ktgUcetniSpolecnostFrom = doklad.id_ktgUcetniSpolecnost and
            substr ( s_ucet, 1, cDelkaVyjimka.delka ) in (
               select v.s_ucet from KP_Ktg_DokladMajUcastVyjimka v
               where v.id_KtgDoklad = doklad.id_KtgDoklad );
      end loop;
	else
      delete KP_dat_DokladVazby
      where
         id_doklad = doklad.id and
         id_ktgUcetniSpolecnostFrom = doklad.id_ktgUcetniSpolecnost and
         exists ( select 1 from kp_cis_ucetUnif c where c.id = KP_dat_DokladVazby.id_cisUcetUnif and c.c_pocitatVazby = '0' );
	end if;
*/
	if ( doklad.id_ktgUcetniSpolecnost = doklad.id_subKonsolidace ) then
		c_dokladTyp := 'U';
	else
		c_dokladTyp := 'S';
	end if;

	-- pokud by existovali nejake manualni stare korekce ( stare ve smyslu, ze by se doklad generoval znovu  a tedy je potreba refreshovat id_dokladu )
	update KP_dat_DokladVazbyParovani set
		id_doklad = doklad.id
	where
		id_ktgUcetniSpolecnostFrom = doklad.id_ktgUcetniSpolecnost and
		dt_datumDoklad = doklad.dt_datum and
		id_ktgDoklad = doklad.id_ktgDoklad and
		c_typ = c_dokladTyp and
		id_doklad is null
	;

	-- opravim manualni castky co jsou k parovani
	for cManualCastka in curManualCastka loop
		for cDokladVazby in (
			select id from KP_dat_DokladVazby
				where
					id_doklad = cManualCastka.id_doklad and
					id_ktgUcetniSkupina = cManualCastka.id_ktgUcetniSkupina and
					s_ucet = cManualCastka.s_ucet and
					nl_poradiList = cManualCastka.nl_poradiList and
					nl_radek = cManualCastka.nl_radek and
					s_mena = cManualCastka.s_mena and
					id_ktgUcetniSpolecnostTo = cManualCastka.id_ktgUcetniSpolecnostTo )
		loop

			update KP_dat_DokladVazby set
				nd_castkaMena = cManualCastka.nd_castkaMena,
				nd_castkaLocal = cManualCastka.nd_castkaLocal,
				nd_castkaVyparovat = cManualCastka.nd_castkaMena,
				nl_userIndexVazba = cManualCastka.nl_userIndexVazba
			where
				id = cDokladVazby.id;

			update KP_dat_DokladVazbyParovani set id_dokladVazby = cDokladVazby.id
			where current of curManualCastka;

		end loop;

	end loop;


	-- smazu stare uz nepouzite manualni korekce
	delete KP_dat_DokladVazbyParovani
	where
		( 	id_dokladVazby is null and
			id_doklad = doklad.id and
			id_ktgUcetniSkupina = aIdKtgUcetniSkupina

		) or (

			id_ktgUcetniSpolecnostFrom = doklad.id_ktgUcetniSpolecnost and
			dt_datumDoklad = doklad.dt_datum and
			id_ktgDoklad = doklad.id_ktgDoklad and
			c_typ = c_dokladTyp and
			id_doklad is null
		)
	;

	calculate_doklad_vazby_par ( doklad.id, doklad.id_ktgUcetniSpolecnost, aIdKtgUcetniSkupina );

   upravVazbyPobockaVpravo ( doklad.id, doklad.id_ktgUcetniSpolecnost, doklad.s_mena, aIdKtgUcetniSkupina, doklad.dt_datum );
   if ( l_idCentrala > 0  ) then
   	-- zpracovavam data pobocky: pobocka je na leve strane vazeb
      upravVazbyPobockaVlevo ( doklad.id, doklad.id_ktgUcetniSpolecnost, doklad.s_mena, aIdKtgUcetniSkupina, doklad.dt_datum, l_idCentrala );
   end if;

	commit;

end;


procedure calculate_doklad_vazby ( aIdDoklad int, aIdKtgUcetniSkupina int) as
	doklad KP_dat_doklad%ROWTYPE;
	rowTmpSkupinaVazby TMP_SkupinaVazby%ROWTYPE;
	lIdLastSpol int := -987456;
begin

	select * into doklad from KP_dat_doklad where id = aIdDoklad;
	kap_cache.p_readDoklad( false, aIdDoklad);
   
	delete KP_dat_DokladVazbyAkcept where id_doklad = aIdDoklad and id_ktgUcetniSkupina = aIdKtgUcetniSkupina
   	and ( id_ktgUcetniSpolecnostTo = idVazbaProtistrana  or idVazbaProtistrana = VAZBY_CELE );

	delete KP_dat_DokladVazby where id_doklad = aIdDoklad and id_ktgUcetniSkupina = aIdKtgUcetniSkupina
   	and ( id_ktgUcetniSpolecnostFrom = idVazbaProtistrana or id_ktgUcetniSpolecnostTo = idVazbaProtistrana  or idVazbaProtistrana = VAZBY_CELE );

	update KP_dat_DokladVazbyParovani set
		id_dokladVazby = null
	where id_doklad = aIdDoklad and id_ktgUcetniSkupina = aIdKtgUcetniSkupina
	   and ( id_ktgUcetniSpolecnostTo = idVazbaProtistrana  or idVazbaProtistrana = VAZBY_CELE );

	-- bude to vyjimecne, ale i sama spolecnost muze mit v ramci generovaneho obdobi vice clenstvi
	-- v ruznych subkonsolidacich proto bude mit vice radku v TMP_SkupinaVazby
	for cSpolecnostClen in (
		select *
		from TMP_SkupinaVazby
		where doklad.id_ktgUcetniSpolecnost = id_ktgUcetniSpolecnost
		order by id_ktgUcetniSpolecnost, dt_platnostDo desc )
	loop
--put_any_line ( 'lIdLastSpol  ' || lIdLastSpol || '   ' || cSpolecnostClen.id_ktgUcetniSpolecnost );
		if ( lIdLastSpol != cSpolecnostClen.id_ktgUcetniSpolecnost) then
			lIdLastSpol := cSpolecnostClen.id_ktgUcetniSpolecnost;
			rowTmpSkupinaVazby := cSpolecnostClen;
			rowTmpSkupinaVazby.dt_platnostOd := NVL ( rowTmpSkupinaVazby.dt_platnostOd, doklad.dt_datumPocStav );
			rowTmpSkupinaVazby.dt_platnostDo := NVL ( rowTmpSkupinaVazby.dt_platnostDo, doklad.dt_datum );
			calculate_doklad_vazby_cast ( doklad, rowTmpSkupinaVazby, aIdKtgUcetniSkupina );
		end if;
	end loop;

	kap_doklad.p_commitProtokol;

end;


procedure calculateDokladVazby ( aIdDoklad int, aIdProtistrana int, aIdKtgUcetniSkupina int, aUzivatel varchar2, aRekurze boolean ) as
	type t_recVazby is record (
      id_doklad KP_dat_Doklad.id%TYPE,
   	id_ktgUcetniSpolecnost kp_ktg_ucetniSpolecnost.id%TYPE,
		dt_datum date,
		nl_krok int
   );
	type t_tabVazby is table of t_recVazby index by binary_integer;
	tabVazby t_tabVazby;

	lIdLastSpol int := -987456;
	doklad KP_dat_doklad%ROWTYPE;
begin

	select * into doklad from KP_dat_doklad where id = aIdDoklad;
   if ( aIdDoklad != kap_cache.rowDoklad.id ) then
	   kap_cache.p_readDoklad ( true, aIdDoklad );
      -- musi si vynulovat cache protokolu
      kap_doklad.p_insertProtokol ( 0, 'prepocet vazeb' );	
	end if;
         
   if ( kap_cache.f_isDokladZluty ) then
   	return;
   end if;
	

	delete TMP_SkupinaVazby;

	for curClen in (
   	select
   		c.id_ktgUcetniSpolecnost, 
   		-- zluty doklad bere vzdy c.dt_clenstviOd a normalni doklad bere bud "pomocny" c.dt_dokladVazbyOd pokud je nastaven nebo take dt_clenstviOd
         decode ( d.id_ktgucetnispolecnost, d.id_subkonsolidace, NVL ( c.dt_dokladVazbyOd, c.dt_clenstviOd ), c.dt_clenstviOd ) p_od,
         decode ( d.id_ktgucetnispolecnost, d.id_subkonsolidace, NVL ( c.dt_dokladVazbyDo, c.dt_clenstviDo ), c.dt_clenstviDo ) p_do,
         c.id_cisSubTypClenstvi, c.c_propisujVazby, c.id_ktgsubkonsolidace, 
         c.c_smerClenstviOd, c.c_smerDetailClenstviOd, c.c_smerClenstviDo, c.c_smerDetailClenstviDo
   	from
   		kp_rel_subkonsolidaceclen c,
   		kp_ktg_subkonsolidace s,
   		kp_dat_doklad d,
   		kp_ktg_ucetniSpolecnost us
   	where
   		d.id = aIdDoklad and
   		us.id = c.id_ktgUcetniSpolecnost and
   		us.id_kategorie < 300 and
   		s.id_ktgUcetniSpolecnost = c.id_ktgsubkonsolidace and
   		c.c_clen = '1' and s.id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
			c.dt_clenstviDo >= d.dt_datumPocStav and                                                                                                                                                                                                                                                                  
			c.dt_clenstviOd <= d.dt_datum and          
   		c.id_ktgUcetniSpolecnost = doklad.id_ktgUcetniSpolecnost 
		order by c.dt_clenstviDo desc ) 
	loop
   	-- vlozim od - do samu spolecnost z dokladu : snazim se tim obejit kdyz prestupuje v ramci skupiny - tam by to totiz meli byt v case plynule - nemuze byt clen leden, unor pak nebyt a pak zase prosinec byt (pry)
   	insert into TMP_SkupinaVazby (
   		id_ktgUcetniSpolecnost, dt_platnostOd, dt_platnostDo, 
         id_cisSubTypClenstvi, c_propisujVazby, id_ktgsubkonsolidace,
         c_smerClenstviOd, c_smerDetailClenstviOd, c_smerClenstviDo, c_smerDetailClenstviDo  )
		values (
   		curClen.id_ktgUcetniSpolecnost, curClen.p_od, curClen.p_do,
         curClen.id_cisSubTypClenstvi, curClen.c_propisujVazby, curClen.id_ktgsubkonsolidace,
         curClen.c_smerClenstviOd, curClen.c_smerDetailClenstviOd, curClen.c_smerClenstviDo, curClen.c_smerDetailClenstviDo 
		);
		exit;
   end loop;
--app.p_log ( 'vlozil sam ' || sql%rowcount || '  ' || aIdDoklad || '  ' || aIdKtgUcetniSkupina );
 
	for cSpolecnostClen in (
		select
			c.id_ktgUcetniSpolecnost, 
         decode ( d.id_ktgucetnispolecnost, d.id_subkonsolidace, NVL ( c.dt_dokladVazbyOd, c.dt_clenstviOd ), c.dt_clenstviOd ) dt_vazbyOd,
         decode ( d.id_ktgucetnispolecnost, d.id_subkonsolidace, NVL ( c.dt_dokladVazbyDo, c.dt_clenstviDo ), c.dt_clenstviDo ) dt_vazbyDo,
         c.id_cisSubTypClenstvi, c.c_propisujVazby, c.id_ktgsubkonsolidace,
         c.c_smerClenstviOd, c.c_smerDetailClenstviOd, c.c_smerClenstviDo, c.c_smerDetailClenstviDo
		from
			kp_rel_subkonsolidaceclen c,
			kp_ktg_subkonsolidace s,
			kp_dat_doklad d,
			kp_ktg_ucetniSpolecnost us
		where
			d.id = aIdDoklad and
			us.id = c.id_ktgUcetniSpolecnost and
			us.id_kategorie < 300 and
			s.id_ktgUcetniSpolecnost = c.id_ktgsubkonsolidace and
			c.c_clen = '1' and s.id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
			c.dt_clenstviDo >= d.dt_datumPocStav and
			c.dt_clenstviOd <= d.dt_datum and
			c.id_ktgUcetniSpolecnost != doklad.id_ktgUcetniSpolecnost and
         ( aIdProtistrana is null or aIdProtistrana = c.id_ktgUcetniSpolecnost )
		order by c.id_ktgUcetniSpolecnost, c.dt_clenstviDo desc )
	loop
--app.p_log ( '???  ' || cSpolecnostClen.id_ktgUcetniSpolecnost );
		-- kazdou potrebuji brat jenom jednou - jeji posledni zarazeni do subkonsolidaci
		if ( lIdLastSpol != cSpolecnostClen.id_ktgUcetniSpolecnost) then
			lIdLastSpol := cSpolecnostClen.id_ktgUcetniSpolecnost;
			-- nasypu vsechny cleny skupiny, tak aby se mohly vytvorit vzajemne vazby
			insert into TMP_SkupinaVazby (
				id_ktgUcetniSpolecnost, dt_platnostOd, dt_platnostDo, 
            id_cisSubTypClenstvi, c_propisujVazby, id_ktgSubKonsolidace,
            c_smerClenstviOd, c_smerDetailClenstviOd, c_smerClenstviDo, c_smerDetailClenstviDo  )
			values (
				cSpolecnostClen.id_ktgUcetniSpolecnost, cSpolecnostClen.dt_vazbyOd, cSpolecnostClen.dt_vazbyDo, 
            cSpolecnostClen.id_cisSubTypClenstvi, cSpolecnostClen.c_propisujVazby, cSpolecnostClen.id_ktgsubkonsolidace,
            cSpolecnostClen.c_smerClenstviOd, cSpolecnostClen.c_smerDetailClenstviOd, cSpolecnostClen.c_smerClenstviDo, cSpolecnostClen.c_smerDetailClenstviDo 
			);
--app.p_log ( '   vlozil ' || cSpolecnostClen.id_ktgUcetniSpolecnost );
		end if;
	end loop;

	idVazbaProtistrana  := NVL ( aIdProtistrana, VAZBY_CELE ) ;

	calculate_doklad_vazby ( aIdDoklad, aIdKtgUcetniSkupina );
--put_any_line ( 'rekurze  ********   rekurze  ********   rekurze  ********   rekurze' );
	if ( aRekurze ) then
		-- refreshovani vazeb kde jsem byl jako protistrana
		select d.id, a.id_ktgUcetniSpolecnostTo, d.dt_datum, d.nl_krok bulk collect into tabVazby
	   from KP_dat_dokladVazbyAkcept a, kp_dat_doklad d
	   where
	      d.id = a.id_doklad and
	      d.dt_datum = doklad.dt_datum and d.nl_krok < 30 and -- krok kvuli indexu
	      a.id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
	      a.id_ktgUcetniSpolecnostTo = aIdProtistrana and id_dokladProti is null;

	   for ii in 1 .. tabVazby.count() loop
			 if ( tabVazby(ii).nl_krok != 1 ) then
			 	 -- pokud existuje doklad v kroku 1 tak vazby k tomuto dokladu nedelam, vazby se delaji jenom pro krok 1, s vyjimkou manualnich
				 select count(*) into tabVazby(ii).nl_krok from kp_dat_doklad where id_ktgUcetniSpolecnost = tabVazby(ii).id_ktgUcetniSpolecnost and dt_datum = tabVazby(ii).dt_datum and nl_krok = 1;
				 if ( tabVazby(ii).nl_krok = 0 ) then
				 	 -- doklad v kroku 1 neexistuje tak vazby pocitam pro tento doklad ktery neni v kroku 1
				 	 tabVazby(ii).nl_krok := 1;
				 else
				 	  -- existuje doklad v kroku 1 takze ted nepocitam
				 	 tabVazby(ii).nl_krok := 0;
				 end if;
			 end if;
			 if ( tabVazby(ii).nl_krok = 1 ) then
			 	 calculateDokladVazby ( tabVazby(ii).id_doklad, tabVazby(ii).id_ktgUcetniSpolecnost, aIdKtgUcetniSkupina, 'auto', false );
			 end if;
	   end loop;
	end if;


/*	-- toto bylo automaticke pregenerovani vazeb protistran, ktere jsme zrusily
	for cParoveDoklady in (
		select id_doklad from KP_tmp_GUI
		where id_akce = 10 and s_uzivatel = aUzivatel and id_dokladEditace = aIdDoklad )
	loop

		select count(*) into lPocet from kp_dat_doklad where id = cParoveDoklady.id_doklad;

		if ( lPocet = 1 ) then
			calculate_doklad_vazby ( cParoveDoklady.id_doklad, aIdKtgUcetniSkupina, aUzivatel );
		end if;
	end loop;
*/
	-- parove chceme ignorovat, aby se museli delat rucne
   delete kp_tmp_gui where id_akce = 10 and s_uzivatel = aUzivatel and id_dokladEditace = aIdDoklad;
   commit;

end;

procedure p_calculate_doklad_vazby ( aIdDoklad int, aIdProtistrana int, aIdKtgUcetniSkupina int, aUzivatel varchar2 ) as
	lIdLastSpol int := -987456;
	doklad KP_dat_doklad%ROWTYPE;
begin
--	  x_delejProtokol := aIdKtgUcetniSkupina != 8;
     calculateDokladVazby ( aIdDoklad, aIdProtistrana, aIdKtgUcetniSkupina, 'auto', true );
     
end;

procedure p_calculate_doklad_vazby ( aIdDoklad int, aIdKtgUcetniSkupina int, aUzivatel varchar2 ) as
begin
	p_calculate_doklad_vazby ( aIdDoklad, null, aIdKtgUcetniSkupina, aUzivatel );
end;


procedure p_auto_calculate_doklad_vazby ( aDatum date, aIdKtgUcetniSkupina int, aDatumVazbyManual date ) as
	rowDoklad KP_dat_doklad%ROWTYPE;
	c_dokladTyp char;
begin

	if ( aDatum is not null ) then
		-- tak to je manualni zadost o pregenerovani vsech vazeb
		delete KP_tmp_dokladVazby;

		insert into KP_tmp_dokladVazby ( id_doklad, id_ktgUcetniSkupina )
		select distinct d.id, aIdKtgUcetniSkupina
		from
			kp_rel_subkonsolidaceclen c,
			kp_ktg_subkonsolidace s,
			kp_dat_doklad d,
			kp_ktg_ucetniSpolecnost us
		where
			d.dt_datum = aDatum and
         d.nl_krok = 1 and us.c_extSystem != 'M' and
         d.c_vazby = '1' and
			us.id = d.id_ktgUcetniSpolecnost and
			us.id = c.id_ktgUcetniSpolecnost and
			us.id_kategorie < 300 and
			s.id_ktgUcetniSpolecnost = c.id_ktgsubkonsolidace and
			c.c_clen = '1' and s.id_ktgUcetniSkupina = aIdKtgUcetniSkupina and
			c.dt_clenstviDo >= d.dt_datumPocStav and
			c.dt_clenstviOd <= d.dt_datum
			;
		commit;
	end if;

	if ( aDatumVazbyManual is not null ) then
   	-- uz by se to nemelo liset od normalnich ty Manualni kdyz pouziji c_baseDoklad
		insert into KP_tmp_dokladVazby ( id_doklad, id_ktgUcetniSkupina )
		select distinct d.id, s.id_ktgUcetniSkupina
		from
			kp_rel_subkonsolidaceclen c,
			kp_ktg_subkonsolidace s,
			kp_dat_doklad d,
			kp_ktg_ucetniSpolecnost us
		where
			d.dt_datum = aDatumVazbyManual and
         us.c_extSystem = 'M' and
         d.c_vazby = '1' and
			us.id = d.id_ktgUcetniSpolecnost and
			us.id = c.id_ktgUcetniSpolecnost and
			us.id_kategorie < 300 and s.id_ktgUcetniSkupina between 1 and 2 and
			s.id_ktgUcetniSpolecnost = c.id_ktgsubkonsolidace and
			c.c_clen = '1' and
			c.dt_clenstviDo >= d.dt_datumPocStav and
			c.dt_clenstviOd <= d.dt_datum
			;
		commit;
	end if;


	-- nejdriv si musim naparovat manualne editovane castky ve vzajemnych vazbach
	-- pokud by existovali nejake manualni stare korekce ( stare ve smyslu, ze by se doklad generoval znovu  a tedy je potreba refreshovat id_dokladu )
	-- tak ztratili odkaz na doklad protoze se musel smazat a ted ho musime 'obnovit'
	for cDoklad in (
		select id_doklad from KP_tmp_dokladVazby group by id_doklad )
	loop
		select * into rowDoklad from KP_dat_doklad where id = cDoklad.id_doklad;

		if ( rowDoklad.id_ktgUcetniSpolecnost = rowDoklad.id_subKonsolidace ) then
			c_dokladTyp := 'U';
		else
			c_dokladTyp := 'S';
		end if;

		update KP_dat_DokladVazbyParovani set
			id_doklad = rowDoklad.id
		where
			id_ktgUcetniSpolecnostFrom = rowDoklad.id_ktgUcetniSpolecnost and
			dt_datumDoklad = rowDoklad.dt_datum and
			id_ktgDoklad = rowDoklad.id_ktgDoklad and
			c_typ = c_dokladTyp and
			id_doklad is null
		;

	end loop;

	-- prvni centraly
	for cDoklad in ( select * from KP_tmp_dokladVazby where nl_poradi = 20 ) loop
		-- prepocti vazby pro celou skupinu bez rekurzivniho prepocitavani vazeb protistrany
		calculateDokladVazby ( cDoklad.id_doklad, null, cDoklad.id_ktgUcetniSkupina, 'automat', false );
	end loop;

	for cDoklad in ( select * from KP_tmp_dokladVazby order by nl_poradi ) loop
		-- prepocti vazby pro celou skupinu bez rekurzivniho prepocitavani vazeb protistrany
		calculateDokladVazby ( cDoklad.id_doklad, null, cDoklad.id_ktgUcetniSkupina, 'automat', false );
	end loop;

end;

function f_existsVazba ( aIdDoklad int, aIdUcetniSkupina int, aIdUcetniSpolecnostTo int, aList1 int default 1, aList2 int default 99 ) return boolean as
	l_pocet int;
begin
   select count(*) into l_pocet 
   from kp_dat_dokladVazby v 
   where 
   	rownum = 1 and
      v.id_doklad = aIdDoklad and 
      v.id_ktgucetniskupina = aIdUcetniSkupina and 
      v.id_ktgUcetniSpolecnostTo = aIdUcetniSpolecnostTo and
      v.nl_poradilist between aList1 and aList2;

	return ( l_pocet > 0 );      
      
end;

function f_getDoklad ( aIdUcetniSpolecnost int, aDatum date, aIdUcetniSkupina int  ) return int as
	ret int;
begin
	if ( aIdUcetniSkupina is null ) then
   	select id into ret from kp_dat_doklad 
      where 
      	id_ktgUcetniSpolecnost = aIdUcetniSpolecnost and 
         dt_datum = aDatum and 
         id_ktgUcetniSpolecnost = id_subKonsolidace and
         c_vazby = '1';
	else
   	select d.id into ret from kp_dat_doklad d, kp_ktg_subkonsolidace s 
      where 
      	d.id_ktgUcetniSpolecnost = aIdUcetniSpolecnost and 
         dt_datum = aDatum and 
         d.id_subkonsolidace = s.id_ktgUcetniSpolecnost and
         s.id_ktgUcetniSkupina = aIdUcetniSkupina and
         c_vazby = '1';   
	end if;
   
   return (ret);      
end;   

end;

/


PROMPT Completed KAP_VAZBY.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/PACKAGE_BODIES/KURZY.sql: 'utf-8' codec can't decode byte 0xc8 in position 2342: invalid continuation byte


-- ============================================================================
-- Deploy: MD_META.sql
-- Category: package bodies
-- ============================================================================

PROMPT Deploying MD_META.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package Body MD_META
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "DB_JT"."MD_META" AS

    multiplier constant number  := 22695477;
    increment  constant number  := 1;
    "2^32"     constant number  := 2 ** 32;
    "2^16"     constant number  := 2 ** 16;
    "0x7fff"   constant number  := 32767;
    Seed       number := 1;
    g_curr_val NUMBER DEFAULT NULL;
/*
 * Get the next available id for objectids.
 * @return the next id that can be used in objectid fields
 * This code is taken from wwv_flows
 */
FUNCTION get_next_id RETURN NUMBER
IS
BEGIN
/*
	select  to_number(
                 to_char(dbobjectid_sequence.nextval) ||
                      lpad( substr( abs(rand), 1, 5 ),5, '0' ) ||
                   ltrim(to_char(mod(abs(hsecs),1000000),'000000')))
    into    g_curr_val
    from   sys.v_$timer;

	select to_number(
				to_char(dbobjectid_sequence.nextval) ||
					lpad( substr( abs(rand), 1, 5 ), 5, '0') ||
				ltrim(to_char(mod(dbms_random.value(100000000000, 999999999999),1000000),'000000')))
    into    g_curr_val
	from dual;				
*/
	select dbobjectid_sequence.nextval
    into    g_curr_val
	from dual;	
    return g_curr_val;
END get_next_id;
-- Following code taken from wwv_flows_random 
 procedure srand( new_seed in number ) is
 begin
  Seed := new_seed;
 end srand;
--
  function rand return number is
    s number;
  begin
    seed := mod( multiplier * seed + increment, "2^32" );
    begin
       return bitand( seed/"2^16", "0x7fff" );
    --mhichwa
    exception when others then
       select dbobjectid_sequence.nextval into s from dual;
       return s||to_char(sysdate,'HH24MISS');
    end;
  end rand;
--
  procedure get_rand( r OUT number ) is
  begin
    r := rand;
  end get_rand;
--
  function rand_max( n IN number ) return number is
  begin
    return mod( rand, n ) + 1;
  end rand_max;
--
  procedure get_rand_max( r OUT number, n IN number )  is
  begin
    r := rand_max( n );
  end get_rand_max;

 FUNCTION quote(catalog IN VARCHAR2, schema IN VARCHAR2, object IN VARCHAR2, connid LONG ) RETURN VARCHAR2
  AS
  v_plugin VARCHAR2(1000);
  v_result VARCHAR2(4000) :='';
  v_ldelim VARCHAR2(1);
  v_rdelim VARCHAR2(1);
  v_isCatalogRequired BOOLEAN;
  v_isSchemaRequired BOOLEAN;
  v_maxCharsToDelim INT;
  BEGIN
  -- get database type using connid
   SELECT lower(VALUE) 
   INTO v_plugin
   FROM MD_ADDITIONAL_PROPERTIES
   WHERE PROP_KEY = 'PLUGIN_ID'
   AND connection_id_fk = connid;

    -- get the delimeter
    IF      v_plugin like '%sybase12%'   THEN
            v_ldelim := '[';
            v_rdelim := ']';     
            v_isCatalogRequired := true;
            v_isSchemaRequired := true;
            v_maxCharsToDelim := 28;
    ELSIF   v_plugin like '%sybase%'   THEN
            v_ldelim := '[';
            v_rdelim := ']';     
            v_isCatalogRequired := true;
            v_isSchemaRequired := true;    
            v_maxCharsToDelim := 300;
    ELSIF   v_plugin like '%sqlserver%' THEN 
            v_ldelim := '[';
            v_rdelim := ']';    
            v_isCatalogRequired := true;
            v_isSchemaRequired := true;
            v_maxCharsToDelim := 300;
    ELSIF  v_plugin like '%msaccess%'  THEN
            v_ldelim := '[';
            v_rdelim := ']'; 
            v_isCatalogRequired := false;
            v_isSchemaRequired :=false;
            v_maxCharsToDelim := 300;
    ELSIF v_plugin like '%mysql%'    THEN
            v_ldelim :='`'; 
            v_rdelim :='`';
            v_isCatalogRequired :=false;
            v_isSchemaRequired := true;
            v_maxCharsToDelim := 300;
    ELSIF v_plugin like '%db2%'        THEN
            v_ldelim :='"';
            v_rdelim :='"';
            v_isCatalogRequired := false;
            v_isSchemaRequired := true;
            v_maxCharsToDelim := 300;
    ELSIF v_plugin like '%teradata%'   THEN
            v_ldelim :='"';
            v_rdelim :='"';
            v_isCatalogRequired :=false;
            v_isSchemaRequired := true;
            v_maxCharsToDelim := 300;
    ELSE
            v_ldelim :='[';
            v_rdelim :=']';
            v_isCatalogRequired := true;
            v_isSchemaRequired := true;
            v_maxCharsToDelim := 300;
    END IF;

    IF LENGTH(catalog) > v_maxCharsToDelim THEN
      v_result := v_result || catalog ;-- do not quote as it is using the max amount of chars allowed 
    ELSE  
      v_result := v_result || v_ldelim || catalog ||v_rdelim;
    END IF ;

    IF LENGTH(schema) > v_maxCharsToDelim THEN
      v_result := v_result || '.' || schema ;-- do not quote as it is using the max amount of chars allowed 
    ELSE  
      v_result := v_result ||'.' || v_ldelim || schema || v_rdelim;
    END IF ;

    IF LENGTH(object) > v_maxCharsToDelim THEN
      v_result := v_result ||'.' || object ;-- do not quote as it is using the max amount of chars allowed 
    ELSE  
      v_result := v_result ||'.' || v_ldelim || object ||v_rdelim;
    END IF;      


   return v_result; 
END quote;  

--
-- One time initialisation
begin
  select to_char(sysdate,'JSSSSS')
    into seed
    from dual;
end;

/


PROMPT Completed MD_META.sql
PROMPT


-- ============================================================================
-- Deploy: MIGRATION.sql
-- Category: package bodies
-- ============================================================================

PROMPT Deploying MIGRATION.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package Body MIGRATION
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "DB_JT"."MIGRATION" AS
/**
 * The migration package contains all of the PL/SQL Procedures and functions required by the migration
 * system.
 * @author Barry McGillin
 * @author Dermot Daly.
 */
--a.id schema_id, A.name schema_name, b.id catalog_id, B.CATALOG_NAME, 
--B.DUMMY_FLAG, A.type, A.character_set, A.version_tag 
TYPE DERIVATIVE_REC IS RECORD (
     schema_id          NUMBER,
     schema_name        VARCHAR2(4000 BYTE),
     catalog_id         NUMBER,
     catalog_name       VARCHAR2(4000 BYTE),
     dummy_flag         CHAR(1 BYTE),
     cap_type           CHAR(1 BYTE),    
     character_set      VARCHAR2(4000 BYTE),
     version_tag        VARCHAR2(40 BYTE)
     ); 

TYPE DERIVATIVE_REC2 IS RECORD (
     schemaid  NUMBER, 
     newid     NUMBER
);     

v_prefixName VARCHAR2(4) :=''; --text to prefix objects with ,set using transform_all_identifiers
-- Constants that are used throughout the package body.
C_CONNECTIONTYPE_CONVERTED   CONSTANT MD_CONNECTIONS.TYPE%TYPE := 'CONVERTED';
C_CONNECTIONTYPE_SCRATCH   CONSTANT MD_CONNECTIONS.TYPE%TYPE := 'SCRATCH'; -- enterprise capture/convert
-- Supported object types.
C_OBJECTTYPE_CONNECTIONS     CONSTANT MD_DERIVATIVES.SRC_TYPE%TYPE := 'MD_CONNECTIONS';
C_OBJECTTYPE_CATALOGS        CONSTANT MD_DERIVATIVES.SRC_TYPE%TYPE := 'MD_CATALOGS';
C_OBJECTTYPE_SCHEMAS         CONSTANT MD_DERIVATIVES.SRC_TYPE%TYPE := 'MD_SCHEMAS';
C_OBJECTTYPE_TABLES          CONSTANT MD_DERIVATIVES.SRC_TYPE%TYPE := 'MD_TABLES';
C_OBJECTTYPE_COLUMNS         CONSTANT MD_DERIVATIVES.SRC_TYPE%TYPE := 'MD_COLUMNS';
C_OBJECTTYPE_CNSTRNT_DETAILS CONSTANT MD_DERIVATIVES.SRC_TYPE%TYPE := 'MD_CONSTRAINT_DETAILS';
C_OBJECTTYPE_CONSTRAINTS     CONSTANT MD_DERIVATIVES.SRC_TYPE%TYPE := 'MD_CONSTRAINTS';
C_OBJECTTYPE_INDEX_DETAILS   CONSTANT MD_DERIVATIVES.SRC_TYPE%TYPE := 'MD_INDEX_DETAILS';
C_OBJECTTYPE_INDEXES         CONSTANT MD_DERIVATIVES.SRC_TYPE%TYPE := 'MD_INDEXES';
C_OBJECTTYPE_TRIGGERS        CONSTANT MD_DERIVATIVES.SRC_TYPE%TYPE := 'MD_TRIGGERS';
C_OBJECTTYPE_VIEWS           CONSTANT MD_DERIVATIVES.SRC_TYPE%TYPE := 'MD_VIEWS';
C_OBJECTTYPE_USERS           CONSTANT MD_DERIVATIVES.SRC_TYPE%TYPE := 'MD_USERS';
C_OBJECTTYPE_GROUP_MEMBERS   CONSTANT MD_DERIVATIVES.SRC_TYPE%TYPE := 'MD_GROUPMEMBERS';
C_OBJECTTYPE_GROUPS          CONSTANT MD_DERIVATIVES.SRC_TYPE%TYPE := 'MD_GROUPS';
C_OBJECTTYPE_OTHER_OBJECTS   CONSTANT MD_DERIVATIVES.SRC_TYPE%TYPE := 'MD_OTHER_OBJECTS';
C_OBJECTTYPE_TABLESPACES     CONSTANT MD_DERIVATIVES.SRC_TYPE%TYPE := 'MD_TABLESPACES';
C_OBJECTTYPE_UDDT            CONSTANT MD_DERIVATIVES.SRC_TYPE%TYPE := 'MD_USER_DEFINED_DATA_TYPES';
C_OBJECTTYPE_STORED_PROGRAMS CONSTANT MD_DERIVATIVES.SRC_TYPE%TYPE := 'MD_STORED_PROGRAMS';
C_OBJECTTYPE_PACKAGES        CONSTANT MD_DERIVATIVES.SRC_TYPE%TYPE := 'MD_PACKAGES';
C_OBJECTTYPE_SYNONYMS        CONSTANT MD_DERIVATIVES.SRC_TYPE%TYPE := 'MD_SYNONYMS';
C_OBJECTTYPE_SEQUENCES       CONSTANT MD_DERIVATIVES.SRC_TYPE%TYPE := 'MD_SEQUENCES';
C_OBJECTTYPE_PRIVILEGES      CONSTANT MD_DERIVATIVES.SRC_TYPE%TYPE := 'MD_PRIVILEGES';
C_OBJECTTYPE_USER_PRIVILEGES CONSTANT MD_DERIVATIVES.SRC_TYPE%TYPE := 'MD_USER_PRIVILEGES';
-- Dummy flag for a dummy catalog.
C_DUMMYFLAG_TRUE             CONSTANT MD_CATALOGS.DUMMY_FLAG%TYPE := 'Y';
-- Flag in MD_DERIVATIVES to show if something has been transformed
C_TRANSFORMED_TRUE           CONSTANT MD_DERIVATIVES.TRANSFORMED%TYPE := 'Y';
-- Flag in MD_SYNONYMS.PRIVATE_VISIBILITY to highlight that a synonym is marked as private
C_SYNONYM_PRIVATE            CONSTANT MD_SYNONYMS.PRIVATE_VISIBILITY%TYPE := 'Y';
-- Flag in MD_GROUPS.GROUP_FLAG to show this is a role
C_ROLE_FLAG                  CONSTANT MD_GROUPS.GROUP_FLAG%TYPE := 'R';
-- Flag in MD_COLUMNS TO SHOW A COLUMN IS NULLABLE
C_NULLABLE_YES               CONSTANT MD_COLUMNS.NULLABLE%TYPE := 'Y';
-- Special defined additional properties.
C_PROPKEY_SEEDVALUE          CONSTANT MD_ADDITIONAL_PROPERTIES.PROP_KEY%TYPE := 'SEEDVALUE';
C_PROPKEY_INCREMENT          CONSTANT MD_ADDITIONAL_PROPERTIES.PROP_KEY%TYPE := 'INCREMENT';
C_PROPKEY_LASTVALUE          CONSTANT MD_ADDITIONAL_PROPERTIES.PROP_KEY%TYPE := 'LASTVALUE';
C_PROPKEY_EXTENDEDINDEXTYPE	 CONSTANT MD_ADDITIONAL_PROPERTIES.PROP_KEY%TYPE := 'EXTENDEDINDEXTYPE';
C_PROPKEY_SEQUENCEID	       CONSTANT MD_ADDITIONAL_PROPERTIES.PROP_KEY%TYPE := 'SEQUENCEID';
C_PROPKEY_TRIGGER_REWRITE	   CONSTANT MD_ADDITIONAL_PROPERTIES.PROP_KEY%TYPE := 'TRIGGER_REWRITE';
C_PROPKEY_REAL_IDENTITY      CONSTANT MD_ADDITIONAL_PROPERTIES.PROP_KEY%TYPE := 'REALIDENTITY';
C_PROPKEY_ALREADY_IDENTITY   CONSTANT MD_ADDITIONAL_PROPERTIES.PROP_KEY%TYPE := 'ALREADYIDENTITY';
-- Name spaces for identifiers
C_NS_SCHEMA_OBJS             CONSTANT MD_DERIVATIVES.DERIVED_OBJECT_NAMESPACE%TYPE := 'NS_SCHEMAOBJS';
C_NS_INDEXES                 CONSTANT MD_DERIVATIVES.DERIVED_OBJECT_NAMESPACE%TYPE := 'NS_INDEXES';
C_NS_CONSTRAINTS             CONSTANT MD_DERIVATIVES.DERIVED_OBJECT_NAMESPACE%TYPE := 'NS_CONSTRAINTS';
C_NS_CLUSTERS                CONSTANT MD_DERIVATIVES.DERIVED_OBJECT_NAMESPACE%TYPE := 'NS_CLUSTERS';
C_NS_DB_TRIGGERS             CONSTANT MD_DERIVATIVES.DERIVED_OBJECT_NAMESPACE%TYPE := 'NS_DB_TRIGGERS';
C_NS_PRIVATE_DBLINKS         CONSTANT MD_DERIVATIVES.DERIVED_OBJECT_NAMESPACE%TYPE := 'NS_PRIVATEDBLINKS';
C_NS_DIMENSIONS              CONSTANT MD_DERIVATIVES.DERIVED_OBJECT_NAMESPACE%TYPE := 'NS_DIMENSIONS';
C_NS_USER_ROLES              CONSTANT MD_DERIVATIVES.DERIVED_OBJECT_NAMESPACE%TYPE := 'NS_USERROLES';
C_NS_PUBLIC_SYNONYMS         CONSTANT MD_DERIVATIVES.DERIVED_OBJECT_NAMESPACE%TYPE := 'NS_PUB_SYNONYMS';
C_NS_PUBLIC_DBLINKS          CONSTANT MD_DERIVATIVES.DERIVED_OBJECT_NAMESPACE%TYPE := 'NS_PUBLICDBLINKS';
C_NS_TABLESPACES             CONSTANT MD_DERIVATIVES.DERIVED_OBJECT_NAMESPACE%TYPE := 'NS_TABLESPACES';
C_NS_PROFILES                CONSTANT MD_DERIVATIVES.DERIVED_OBJECT_NAMESPACE%TYPE := 'NS_PROFILES';
C_NS_DATABASE                CONSTANT MD_DERIVATIVES.DERIVED_OBJECT_NAMESPACE%TYPE := 'NS_DATABASE';
C_NS_USERS                   CONSTANT MD_DERIVATIVES.DERIVED_OBJECT_NAMESPACE%TYPE := 'NS_USERS';
-- Constants for Filter Types
 -- Filter Types are 0-> ALL, 1->NAMELIST, 2->WHERE CLAUSE, 3->OBJECTID LIST
C_FILTERTYPE_ALL	     CONSTANT INTEGER := 0;
C_FILTERTYPE_NAMELIST	     CONSTANT INTEGER := 1;
C_FILTERTYPE_WHERECLAUSE     CONSTANT INTEGER := 2;
C_FILTERTYPE_OBJECTIDLIST    CONSTANT INTEGER := 3;
-- Constatns for TEXT INDEX TYPES
-- see http://download-west.oracle.com/docs/cd/B10501_01/text.920/a96518/csql.htm#19446
-- Use this index type when there is one CLOB or BLOB column in the index only
C_INDEXTYPE_CONTEXT	CONSTANT MD_ADDITIONAL_PROPERTIES.VALUE%TYPE := 'ctxsys.context';
-- Use this index type when the index containst a CLOB or BLOB column.
C_INDEXTYPE_CTXCAT CONSTANT  MD_ADDITIONAL_PROPERTIES.VALUE%TYPE := 'ctxsys.ctxcat';
-- Constant for LANGUAGE - Used in MD_TRIGGERS, MD_PACKAGES, MD_STORED_PROGRAMS, MD_VIEWS, and MD_CONSTRAINTS
C_LANGUAGEID_ORACLE CONSTANT MD_TRIGGERS.LANGUAGE%TYPE := 'OracleSQL';
-- Type for a generic REF CURSOR
TYPE REF_CURSOR IS REF CURSOR;
/**
 * Find a filter element from a filter list
 */
FUNCTION find_filter_for_type(p_filterSet MIGR_FILTER_SET, p_objtype MD_DERIVATIVES.DERIVED_OBJECT_NAMESPACE%TYPE) RETURN MIGR_FILTER
IS
BEGIN
  IF p_filterset is NULL OR p_objtype is NULL then
    return NULL;
  END IF;
  FOR indx in p_filterset.FIRST .. p_filterset.LAST
  LOOP
    if p_filterset(indx).OBJTYPE = p_objtype THEN
      return p_filterset(indx);
    end if;
  END LOOP;
  return NULL;
END find_filter_for_type;

/**
 * Convert a name list from a filter into a condition for use in a where clause.
 * @param p_nameList the set of names that form part of the filter
 * @param p_nameField the name of the field to be compared against.
 * @return A condition that can be used in a where clause.
 */
FUNCTION namelist_to_where_clause(p_nameList NAMELIST, p_nameField VARCHAR2) RETURN VARCHAR2
IS
  v_ret VARCHAR2(4000);
BEGIN
  v_ret := p_nameField || ' IN (';
  FOR indx IN p_nameList.FIRST .. p_nameList.LAST
  LOOP
    v_ret := v_ret || '''' || p_nameList(indx) || '''';
    IF  indx != p_nameList.LAST THEN
      v_ret := v_ret || ', ';
    END IF;
  END LOOP;
  v_ret := v_ret || ')';
  return v_ret;
END namelist_to_where_clause;

/**
 * Convert an object id list from a filter into a condition for use in a where clause.
 * @param p_oidList The list of object ids taken from the filter.
 * @param p_idFIeld The field to be tested against.
 * @return A condition that can be used in a where clause.
 */
FUNCTION objectIdList_to_where_clause(p_oidList OBJECTIDLIST, p_idField VARCHAR2) RETURN VARCHAR2
IS
  v_ret VARCHAR2(4000);
BEGIN
  V_RET := p_idField || ' IN (';
  FOR indx IN p_oidList.FIRST .. p_oidList.LAST
  LOOP
    v_ret := v_ret || TO_CHAR(p_oidList(indx));
    IF indx != p_oidList.LAST THEN
      v_ret := v_ret || ', ';
    END IF;
  END LOOP;
  v_ret := v_ret || ')';
  return v_ret;
END objectIdList_to_where_clause;

/**
 * Convert a filter to a condition for use in a where clause.
 * @param p_filter The filter
 * @param p_nameFileld The name field that will be used in the names list or where clause.
 * @param p_idField The id field that will be used if the filter is an objectid list.
 * @return A condition that could be used in a where clause.  NULL if no additional filtering is required.
 */
FUNCTION where_clause_from_filter(p_filter MIGR_FILTER, p_nameField VARCHAR2, p_idField VARCHAR2) RETURN VARCHAR2
IS
BEGIN
	IF p_filter.FILTER_TYPE = C_FILTERTYPE_ALL THEN
	  RETURN NULL;
    ELSIF p_filter.FILTER_TYPE = C_FILTERTYPE_NAMELIST THEN
      RETURN namelist_to_where_clause(p_filter.NAMES, p_nameField);
    ELSIF p_filter.FILTER_TYPE = C_FILTERTYPE_WHERECLAUSE THEN
	  RETURN p_nameField || ' ' || p_filter.WHERECLAUSE;
    ELSE
	  RETURN objectidlist_to_where_clause(p_filter.OBJECTIDS, p_idField);
	END IF;
END where_clause_from_filter;

/**
 * Apply a filter to an existing select statement
 * @param p_filter_set The filter set.
 * @param p_filter_type The type of the object, for finding in the filter set.
 * @param p_name_field The name field of the table being filtered
 * @param p_id_field The id field of the table being filtered.
 * @param p_select_stmt The select statment to tag the new condition on to
 * @return The select statement with the new condition added to it (or the original statement if
 *         there is no applicable filter for this object type.
 */
FUNCTION apply_filter(p_filter_set MIGR_FILTER_SET,
                      p_filter_type MD_DERIVATIVES.SRC_TYPE%TYPE,
                      p_name_field VARCHAR2,
                      p_id_field VARCHAR2,
                      p_select_stmt VARCHAR2) RETURN VARCHAR2
IS
  v_filt MIGR_FILTER;
  v_condition VARCHAR2(4000);
BEGIN
  v_filt := find_filter_for_type(p_filter_set, p_filter_type);
  --if the filter is null, then we need to set a value that will fail always so nothing is moved.
  -- ie 1=2
  IF v_filt IS NOT NULL THEN
    v_condition := where_clause_from_filter(v_filt, p_name_field, p_id_field);
    IF v_condition IS NOT NULL THEN
      RETURN p_select_stmt || ' AND ' || v_condition;
    ELSE
     RETURN p_select_stmt;
    END IF;
  END IF;
  RETURN p_select_stmt ;
END apply_filter;


/**
 * Find the copy of a particular object.  This function checks for a copied object of a particular
 * type by searching the MD_DERIVATIVES table.
 * @param p_objectid The id of the object to search for.
 * @param p_objecttype The type of the object to search for.
 * @return the id of the copy object if it is present, or NULL if it is not.
 */
FUNCTION find_object_copy(p_objectid md_projects.id%TYPE, p_objecttype MD_DERIVATIVES.SRC_TYPE%TYPE, p_derivedconnectionid MD_CONNECTIONS.ID%TYPE) RETURN NUMBER
IS 
  v_ret MD_DERIVATIVES.DERIVED_ID%TYPE;
BEGIN
  SELECT /* APEX53913a */  derived_id INTO v_ret FROM MD_DERIVATIVES
    WHERE src_id = p_objectid 
     AND src_type = p_objecttype
     AND derived_type = p_objecttype 
     AND derived_connection_id_fk = p_derivedconnectionid;
  RETURN v_ret;
EXCEPTION
  WHEN NO_DATA_FOUND then
    -- Should we raise an error?
    RETURN NULL;
END find_object_copy;

/**
 * Copy additional properties. function copies the additional properties for an object.
 * @param p_refobjectid The object id whose additional properties have to be copied
 * @param p_newrefobject The id of the copied object the new properties should refer to
 * @return number of additional properties copied
 */
FUNCTION copy_additional_properties(p_refobjectid MD_ADDITIONAL_PROPERTIES.REF_ID_FK%TYPE, p_newrefobject MD_PROJECTS.ID%TYPE, p_newconnectionid MD_ADDITIONAL_PROPERTIES.CONNECTION_ID_FK%TYPE) RETURN NUMBER
IS
  CURSOR ORIGINAL_RECS IS SELECT PROPERTY_ORDER, PROP_KEY, REF_TYPE, VALUE FROM MD_ADDITIONAL_PROPERTIES WHERE REF_ID_FK=p_refobjectid;
  v_numcopied NUMBER := 0;
BEGIN
  for newrec in ORIGINAL_RECS LOOP
    INSERT INTO MD_ADDITIONAL_PROPERTIES (ref_id_fk, ref_type, property_order, prop_key, value, connection_id_fk)
      VALUES (p_newrefobject, newrec.ref_type, newrec.property_order, newrec.prop_key, newrec.value, p_newconnectionid);
    v_numcopied := v_numcopied + 1;
  END LOOP;
  commit;
  return v_numcopied;
END copy_additional_properties;

FUNCTION copy_connection(p_connectionid MD_CONNECTIONS.ID%TYPE, p_scratchModel BOOLEAN := FALSE) RETURN NUMBER
IS
  newrec MD_CONNECTIONS%ROWTYPE;
  newid MD_CONNECTIONS.ID%TYPE;
  origName MD_CONNECTIONS.NAME%TYPE;
BEGIN
  SELECT /* APEX1930d7 */  * INTO newrec from MD_CONNECTIONS WHERE id = p_connectionid;

  newrec.HOST := NULL;
  newrec.PORT := NULL;
  newrec.USERNAME := NULL;
  newrec.DBURL := NULL;
  -- TODO.  Need to do this in a more i18n friendly manner.
  origName := newrec.NAME;

  IF p_scratchModel = FALSE 
  THEN
     newrec.TYPE :=C_CONNECTIONTYPE_CONVERTED;  
     newrec.NAME := 'Converted:' || newrec.NAME;
  ELSE
     newrec.TYPE :=C_CONNECTIONTYPE_SCRATCH;  
     newrec.NAME := 'Scratch:' || newrec.NAME;     
  END IF;
  -- Let the trigger create the new ID
  newrec.ID := NULL;
  INSERT /* APEX5e30c0 */  INTO MD_CONNECTIONS VALUES newrec
  	RETURNING id into newid;
  INSERT /* APEXc1acd0 */  INTO MD_DERIVATIVES(src_id, src_type, derived_id, derived_type, derived_connection_id_fk, original_identifier, new_identifier)
    VALUES (p_connectionid, C_OBJECTTYPE_CONNECTIONS, newid, C_OBJECTTYPE_CONNECTIONS, newid, origName, newrec.NAME);
  commit;
  return newid;
END copy_connection;


FUNCTION create_dummy_catalog(p_connectionid MD_CONNECTIONS.ID%TYPE) RETURN NUMBER
IS
  newid MD_CATALOGS.ID%TYPE;
BEGIN
  INSERT /* APEXa33eb5 */  INTO MD_CATALOGS (CONNECTION_ID_FK, CATALOG_NAME, DUMMY_FLAG, NATIVE_SQL, NATIVE_KEY)
  VALUES (p_connectionid, ' ', C_DUMMYFLAG_TRUE, NULL, NULL)
  RETURNING ID INTO newid;
  RETURN newid;
END create_dummy_catalog;

FUNCTION find_or_create_dummy_catalog(p_connectionid MD_CONNECTIONS.ID%TYPE, p_catalogid MD_CATALOGS.ID%TYPE) RETURN NUMBER
IS
  newrec MD_CATALOGS%ROWTYPE;
  newid MD_CATALOGS.ID%TYPE;
BEGIN
  SELECT /* APEX6fc7e7 */  * INTO newrec from MD_CATALOGS where connection_id_fk = p_connectionid and "ID" = p_catalogid;
  return newrec.id;
EXCEPTION
  WHEN NO_DATA_FOUND THEN
  INSERT /* APEX5171b3 */  INTO MD_CATALOGS (CONNECTION_ID_FK, CATALOG_NAME, DUMMY_FLAG, NATIVE_SQL, NATIVE_KEY)
  VALUES (p_connectionid, ' ', C_DUMMYFLAG_TRUE, NULL, NULL)
  RETURNING ID INTO newid;
  INSERT /* APEXd6ad63 */  INTO MD_DERIVATIVES(src_id, src_type, derived_id, derived_type, derived_connection_id_fk, DERIVED_OBJECT_NAMESPACE)
    VALUES (p_catalogid, C_OBJECTTYPE_CATALOGS, newid, C_OBJECTTYPE_CATALOGS, p_connectionid, C_NS_DATABASE);
  commit;
  return newid;
END find_or_create_dummy_catalog;

-- Enterprise convert may have 1 catalog belonging to a given connection id
PROCEDURE create_dummy_catalogs(p_connectionid MD_CONNECTIONS.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE, p_scratchModel BOOLEAN) 
IS
  CURSOR curcats(connId MD_CONNECTIONS.ID%TYPE) IS select * from MD_CATALOGS where connection_id_fk = connId;
  cat_row MD_CATALOGS%ROWTYPE;
  newid MD_CATALOGS."ID"%TYPE;
  v_sql VARCHAR2(300);
BEGIN
   OPEN curcats(p_connectionid);
   FETCH curcats INTO cat_row;  
   LOOP
     EXIT WHEN curcats%NOTFOUND;
     newid := find_or_create_dummy_catalog(p_newconnectionid, cat_row."ID");
     v_sql := 'UPDATE MD_CATALOGS SET CATALOG_NAME = ''' || cat_row."CATALOG_NAME"  || ''' WHERE ID = ' || TO_CHAR(newid);
     EXECUTE IMMEDIATE v_sql;
     FETCH curcats INTO cat_row;  
   END LOOP;
  CLOSE curcats; 
  COMMIT;
END create_dummy_catalogs;


FUNCTION copy_individual_catalog(p_catalogid MD_CATALOGS.ID%TYPE) RETURN NUMBER
IS
  newrec MD_CATALOGS%ROWTYPE;
  newconnectionid MD_CATALOGS.CONNECTION_ID_FK%TYPE;
  dummycatalogid MD_CATALOGS.ID%TYPE;
  originalconnectionid MD_CATALOGS.CONNECTION_ID_FK%TYPE;
BEGIN
  -- Catalogs aren't copied as such. Instead, we make a single DUMMY catalog
  -- Within the new connection
  -- So..first see if one exists for the copied connection
  SELECT /* APEX4a8b0f */  CONNECTION_ID_FK INTO originalconnectionid FROM MD_CATALOGS WHERE ID = p_catalogid;
  -- For connections, we have a special case.  We can't store the new connection, but 0 is ok.
  newconnectionid := find_object_copy(originalconnectionid, C_OBJECTTYPE_CONNECTIONS, 0);
  IF newconnectionid IS NULL THEN
    newconnectionid := copy_connection(originalconnectionid);
  END IF;
  dummycatalogid := find_or_create_dummy_catalog(newconnectionid, p_catalogid);
  RETURN dummycatalogid;  
END copy_individual_catalog;

FUNCTION copy_individual_schema(p_schemaid MD_SCHEMAS.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE) RETURN NUMBER
IS
  newid MD_SCHEMAS.ID%TYPE;
  newrec MD_SCHEMAS%ROWTYPE;
  newcatalogid MD_CATALOGS.ID%TYPE;
  originalcatalogname MD_CATALOGS.CATALOG_NAME%TYPE;
  originalcatalogid MD_SCHEMAS.CATALOG_ID_FK%TYPE;
  originalschemaname MD_SCHEMAS.NAME%TYPE;
  originalisdummy CHAR;
BEGIN
  SELECT /* APEXdeeaa8 */  * INTO newrec FROM md_schemas WHERE id = p_schemaid;
  newcatalogid := find_object_copy(newrec.catalog_id_fk,   C_OBJECTTYPE_CATALOGS, p_newconnectionid);
  originalcatalogid := newrec.catalog_id_fk;
  originalschemaname := newrec.NAME;
  select /* APEX8764f4 */  CATALOG_NAME, DUMMY_FLAG into originalcatalogname, originalisdummy from MD_CATALOGS WHERE ID = originalcatalogid;
  IF newcatalogid IS NULL THEN
    newcatalogid := copy_individual_catalog(newrec.catalog_id_fk);
  END IF;

  newrec.catalog_id_fk := newcatalogid;
  if originalisdummy <> C_DUMMYFLAG_TRUE THEN
    newrec.name := originalcatalogname || '_' || newrec.name;
  end if;
  -- Let the trigger work out the new id
  newrec.ID := NULL;
  INSERT /* APEXb791c3 */  INTO MD_SCHEMAS VALUES newrec RETURNING ID INTO newid;
  INSERT /* APEX934add */  INTO MD_DERIVATIVES(src_id, src_type, derived_id, derived_type, original_identifier, new_identifier, DERIVED_OBJECT_NAMESPACE)
    VALUES (p_schemaid, C_OBJECTTYPE_SCHEMAS, newid, C_OBJECTTYPE_SCHEMAS, originalschemaname, newrec.name, C_NS_DATABASE);
  INSERT /* APEX5a0913 */  INTO MD_DERIVATIVES(src_id, src_type, derived_id, derived_type)
    VALUES (originalcatalogid, C_OBJECTTYPE_CATALOGS, newid, C_OBJECTTYPE_SCHEMAS);
  COMMIT;
  return newid;
END copy_individual_schema;

FUNCTION copy_individual_table(p_tableid MD_TABLES.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE) RETURN NUMBER
IS
  newrec MD_TABLES%rowtype;
  newid MD_TABLES.ID%TYPE;
  newschemaid MD_SCHEMAS.ID%TYPE;
BEGIN
  SELECT /* APEX674369 */  * INTO newrec FROM MD_tables WHERE id = p_tableid;
  newschemaid := find_object_copy(newrec.schema_id_fk,   C_OBJECTTYPE_SCHEMAS, p_newconnectionid);
  IF newschemaid IS NULL THEN
    newschemaid := copy_individual_schema(newrec.schema_id_fk, p_newconnectionid);
  END IF;

  newrec.schema_id_fk := newschemaid;
  -- Let the trigger work out the new id
  newrec.ID := NULL;
  INSERT /* APEXc18abc */  INTO MD_TABLES VALUES newrec RETURNING ID INTO newid;
  INSERT /* APEX21ce7a */  INTO MD_DERIVATIVES(src_id, src_type, derived_id, derived_type, derived_connection_id_fk, original_identifier, new_identifier, DERIVED_OBJECT_NAMESPACE)
    VALUES(p_tableid,   C_OBJECTTYPE_TABLES,   newid,   C_OBJECTTYPE_TABLES, p_newconnectionid, newrec.table_name, newrec.table_name, C_NS_SCHEMA_OBJS || TO_CHAR(newschemaid));
  COMMIT;
  RETURN newid;
END copy_individual_table;

FUNCTION copy_individual_column(p_columnid MD_COLUMNS.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE) RETURN NUMBER
IS
  newid MD_COLUMNS.ID%TYPE;
  newrec MD_COLUMNS%rowtype;
  newtableid MD_TABLES.ID%TYPE;
BEGIN
  SELECT /* APEX55d38b */  * INTO newrec FROM md_columns WHERE id = p_columnid;
  -- TODO: How do I check if this worked?
  -- OK. We need to fix up table id
  newtableid := find_object_copy(newrec.table_id_fk,   C_OBJECTTYPE_TABLES, p_newconnectionid);

  IF newtableid IS NULL THEN
    newtableid := copy_individual_table(newrec.table_id_fk, p_newconnectionid);
  END IF;

  newrec.table_id_fk := newtableid;
  -- Let the trigger work out the new id
  newrec.ID := NULL;
  INSERT /* APEX39b0de */  INTO md_columns VALUES newrec RETURNING ID INTO newid;
  -- Columns have their own namespace.  They must be unique within the given table.  So..we'll use the table id as the namespace
  INSERT /* APEXb60765 */  INTO md_derivatives(src_id,   src_type,   derived_id,   derived_type, derived_connection_id_fk, original_identifier, new_identifier, DERIVED_OBJECT_NAMESPACE)
    VALUES(p_columnid,   C_OBJECTTYPE_COLUMNS,   newid,   C_OBJECTTYPE_COLUMNS, p_newconnectionid, newrec.column_name, newrec.column_name, C_OBJECTTYPE_COLUMNS || TO_CHAR(newtableid));
  COMMIT;
  RETURN newid;
END copy_individual_column;

FUNCTION copy_all_tables(p_connectionid MD_CONNECTIONS.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE) RETURN NUMBER
IS
  CURSOR all_tables_cursor is select table_id from mgv_all_tables where connection_id = p_connectionid;
  v_count NUMBER := 0;
  newid MD_TABLES.ID%TYPE;
BEGIN
  FOR v_tableid IN all_tables_cursor LOOP
    newid := copy_individual_table(v_tableid.table_id, p_newconnectionid);
    v_count := v_count + 1;
  END LOOP;
  RETURN v_count;
END copy_all_tables;

FUNCTION copy_all_columns(p_connectionid MD_CONNECTIONS.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE) RETURN NUMBER
IS
  CURSOR all_columns_cursor is select id from MD_COLUMNS where table_id_fk in 
    (select table_id from MGV_ALL_TABLES where connection_id = p_connectionid);
  v_count NUMBER :=0;
  newid MD_COLUMNS.ID%TYPE;
BEGIN
  FOR v_columnid IN all_columns_cursor LOOP
    newid := copy_individual_column(v_columnid.id, p_newconnectionid);
    v_count := v_count + 1;
  END LOOP;
  return v_count;
END copy_all_columns;

FUNCTION copy_constraint_details(p_oldconsid MD_CONSTRAINTS.ID%TYPE, p_newconsid MD_CONSTRAINTS.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE) RETURN NUMBER
IS
  CURSOR curs is SELECT * FROM MD_CONSTRAINT_DETAILS WHERE CONSTRAINT_ID_FK = p_oldconsid;
  v_newid MD_CONSTRAINT_DETAILS.ID%TYPE;
  v_count NUMBER := 0;
  v_originalid MD_CONSTRAINT_DETAILS.ID%TYPE;
  v_ret NUMBER;
BEGIN
  FOR v_row IN curs LOOP
    v_originalid := v_row.ID;
    v_row.ID := NULL;
    v_row.COLUMN_ID_FK := find_object_copy(v_row.COLUMN_ID_FK , C_OBJECTTYPE_COLUMNS, p_newconnectionid);
    v_row.CONSTRAINT_ID_FK := p_newconsid;
    INSERT INTO MD_CONSTRAINT_DETAILS values v_row RETURNING ID INTO v_newid;
    v_ret := copy_additional_properties(v_originalid, v_newid, p_newconnectionid);
    v_count := v_count + 1;
	-- Constraint details don't have an identifier, so don't need a namespace.
    INSERT INTO MD_DERIVATIVES(src_id, src_type, derived_id, derived_type, DERIVED_CONNECTION_ID_FK)
      VALUES(v_originalid, C_OBJECTTYPE_CNSTRNT_DETAILS, v_newid, C_OBJECTTYPE_CNSTRNT_DETAILS, p_newconnectionid);
  END LOOP;
  return v_count;
END copy_constraint_details;

FUNCTION copy_all_constraints_cascade(p_oldschemaid MD_SCHEMAS.ID%TYPE, p_newschemaid MD_SCHEMAS.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE, p_filter_set MIGR_FILTER_SET := NULL) RETURN NUMBER
IS
  cv_curs REF_CURSOR;
   v_selectStmt VARCHAR2(4000) :=     
  'SELECT * FROM MD_CONSTRAINTS WHERE TABLE_ID_FK IN       
    (SELECT SRC_ID FROM MD_DERIVATIVES WHERE SRC_TYPE = ''' || C_OBJECTTYPE_TABLES ||''' AND DERIVED_TYPE = '''
    || C_OBJECTTYPE_TABLES || ''' AND DERIVED_ID IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE SCHEMA_ID = ' || p_newschemaid || '))';
  v_count NUMBER := 0;
  v_newid MD_CONSTRAINTS.ID%TYPE;
  v_originalid MD_CONSTRAINTS.ID%TYPE;
  v_ret NUMBER;
  v_row MD_CONSTRAINTS%ROWTYPE;
  v_storeRefTableId MD_TABLES.ID%TYPE;
BEGIN
  v_selectStmt := apply_filter(p_filter_set, C_OBJECTTYPE_CONSTRAINTS, 'NAME', 'ID', v_selectStmt);
  OPEN cv_curs FOR v_selectStmt;
  LOOP
    FETCH cv_curs INTO v_row;
    EXIT WHEN cv_curs%NOTFOUND;
    v_originalid := v_row.ID;
    v_row.ID := NULL;
    v_row.TABLE_ID_FK := find_object_copy(v_row.TABLE_ID_FK , C_OBJECTTYPE_TABLES, p_newconnectionid);
    if v_row.REFTABLE_ID_FK IS NOT NULL THEN
      v_storeRefTableId := v_row.REFTABLE_ID_FK;
      v_row.REFTABLE_ID_FK := find_object_copy(v_row.REFTABLE_ID_FK , C_OBJECTTYPE_TABLES, p_newconnectionid);
    END IF;
    INSERT /* APEX47e80e */  INTO MD_CONSTRAINTS values v_row RETURNING ID INTO v_newid;
    v_ret := copy_additional_properties(v_originalid, v_newid, p_newconnectionid);
    v_count := v_count + 1;
    INSERT /* APEX980c66 */  INTO MD_DERIVATIVES(src_id, src_type, derived_id, derived_type, DERIVED_CONNECTION_ID_FK, ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE)
      VALUES(v_originalid, C_OBJECTTYPE_CONSTRAINTS, v_newid, C_OBJECTTYPE_CONSTRAINTS, p_newconnectionid, v_row.NAME, v_row.NAME, C_NS_CONSTRAINTS|| TO_CHAR(p_newschemaid));
    v_ret := copy_constraint_details(v_originalid, v_newid, p_newconnectionid);
  END LOOP;
  CLOSE cv_curs;
  return v_count;    
END copy_all_constraints_cascade;

FUNCTION copy_all_columns_cascade(p_oldtableid MD_TABLES.ID%TYPE, p_newtableid MD_TABLES.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE, p_filter_set MIGR_FILTER_SET := NULL) RETURN NUMBER
IS
  cv_curs REF_CURSOR;
  v_selectStmt VARCHAR2(4000) := 'SELECT * FROM MD_COLUMNS WHERE TABLE_ID_FK = ' || p_oldtableid;
  v_originalId MD_COLUMNS.ID%TYPE;
  v_newid MD_COLUMNS.ID%TYPE;
  v_count NUMBER := 0;
  v_ret NUMBER;
  v_row MD_COLUMNS%ROWTYPE;
BEGIN
  v_selectStmt := apply_filter(p_filter_set, C_OBJECTTYPE_COLUMNS, 'COLUMN_NAME', 'ID', v_selectStmt);
  OPEN cv_curs FOR v_selectStmt;
  LOOP
    FETCH cv_curs INTO v_row;
    EXIT WHEN cv_curs%NOTFOUND;
    v_originalid := v_row.ID;
    v_row.ID := NULL;
    v_row.TABLE_ID_FK := p_newtableid;
    INSERT /* APEX13e8c1 */  INTO MD_COLUMNS values  v_row RETURNING ID INTO v_newid;
    v_ret := copy_additional_properties(v_originalid, v_newid, p_newconnectionid);
    v_count := v_count + 1;
	-- Columns don't need a namespace as such, they must not clash within the table.  We'll handle this
	-- As a special case.
    INSERT /* APEX6ad23f */  INTO MD_DERIVATIVES(src_id, src_type, derived_id, derived_type, DERIVED_CONNECTION_ID_FK, original_identifier, new_identifier, DERIVED_OBJECT_NAMESPACE)
    VALUES(v_originalid, C_OBJECTTYPE_COLUMNS, v_newid, C_OBJECTTYPE_COLUMNS, p_newconnectionid, v_row.column_name, v_row.column_name, C_OBJECTTYPE_COLUMNS || TO_CHAR(p_newtableid));
  END LOOP;
  CLOSE cv_curs;
  return v_count;
END copy_all_columns_cascade;

FUNCTION copy_index_details(p_oldindexid MD_INDEXES.ID%TYPE, p_newindexid MD_INDEXES.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE) RETURN NUMBER
IS
  CURSOR curs is SELECT * FROM MD_INDEX_DETAILS WHERE MD_INDEX_DETAILS.INDEX_ID_FK = p_oldindexid;
  v_originalid MD_INDEX_DETAILS.ID%TYPE;
  v_newid MD_INDEX_DETAILS.ID%TYPE;
  v_count NUMBER := 0;
  v_ret NUMBER;
BEGIN
  FOR v_row IN CURS LOOP
    v_originalid := v_row.ID;
    v_row.ID := NULL;
    v_row.INDEX_ID_FK := p_newindexid;
    v_row.COLUMN_ID_FK := find_object_copy(v_row.COLUMN_ID_FK, C_OBJECTTYPE_COLUMNS, p_newconnectionid);
    INSERT INTO MD_INDEX_DETAILS VALUES v_row RETURNING ID INTO v_newid;
    v_ret := copy_additional_properties(v_originalid, v_newid, p_newconnectionid);
    v_count := v_count + 1;
	-- Index details don't have identifiers, so don't need a namespace.
    INSERT INTO MD_DERIVATIVES(src_id, src_type, derived_id, derived_type, DERIVED_CONNECTION_ID_FK)
    VALUES(v_originalid, C_OBJECTTYPE_INDEX_DETAILS, v_newid, C_OBJECTTYPE_INDEX_DETAILS, p_newconnectionid);
  END LOOP;
  RETURN v_count;
END copy_index_details;

FUNCTION copy_all_indexes(p_oldtableid MD_TABLES.ID%TYPE, p_newtableid MD_TABLES.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE, p_newschemaid MD_SCHEMAS.ID%TYPE, p_filter_set MIGR_FILTER_SET) RETURN NUMBER
IS
  cv_curs REF_CURSOR;
  v_selectStmt VARCHAR2(4000) := 'SELECT * FROM MD_INDEXES WHERE MD_INDEXES.TABLE_ID_FK = ' || p_oldtableid;
  v_originalid MD_INDEXES.ID%TYPE;
  v_newid MD_INDEXES.ID%TYPE;
  v_count NUMBER := 0;
  v_ret NUMBER;
  v_row MD_INDEXES%ROWTYPE;
BEGIN
  v_selectStmt := apply_filter(p_filter_set, C_OBJECTTYPE_INDEXES, 'INDEX_NAME', 'ID', v_selectStmt);
  OPEN cv_curs FOR v_selectStmt;
  LOOP
    FETCH cv_curs INTO v_row;
    EXIT WHEN cv_curs%NOTFOUND;
    v_originalid := v_row.ID;

    v_row.ID := NULL;
    v_row.TABLE_ID_FK := p_newtableid;
    INSERT /* APEX97ce1b */  INTO MD_INDEXES values v_row RETURNING ID INTO v_newid;
    v_ret := copy_additional_properties(v_originalid, v_newid, p_newconnectionid);
    v_count := v_count + 1;
    INSERT /* APEXe06bd4 */  INTO MD_DERIVATIVES(src_id, src_type, derived_id, derived_type, DERIVED_CONNECTION_ID_FK, ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE)
    VALUES(v_originalid, C_OBJECTTYPE_INDEXES, v_newid, C_OBJECTTYPE_INDEXES, p_newconnectionid, v_row.INDEX_NAME, v_row.INDEX_NAME, C_NS_INDEXES || p_newschemaid);
    v_ret := copy_index_details(v_originalid, v_newid, p_newconnectionid);
  END LOOP;
  CLOSE cv_curs;
  return v_count;
END copy_all_indexes;

FUNCTION copy_all_table_triggers(p_oldtableid MD_TABLES.ID%TYPE, p_newtableid MD_TABLES.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE, p_filter_set MIGR_FILTER_SET := NULL) RETURN NUMBER
IS
  cv_curs REF_CURSOR;
  v_selectStmt VARCHAR2(4000) := 'SELECT * FROM MD_TRIGGERS WHERE MD_TRIGGERS.TABLE_OR_VIEW_ID_FK = ' || p_oldtableid;
  v_originalid MD_TRIGGERS.ID%TYPE;
  v_newid MD_TRIGGERS.ID%TYPE;
  v_count NUMBER := 0;
  v_ret NUMBER;
  v_row MD_TRIGGERS%ROWTYPE;
BEGIN
  v_selectStmt := apply_filter(p_filter_set, C_OBJECTTYPE_TRIGGERS, 'TRIGGER_NAME', 'ID', v_selectStmt);
  OPEN cv_curs FOR v_selectStmt;
  LOOP
    FETCH cv_curs INTO v_row;
    EXIT WHEN cv_curs%NOTFOUND;
    v_originalid := v_row.ID;
    v_row.ID := NULL;
    v_row.TABLE_OR_VIEW_ID_FK := p_newtableid;
    INSERT /* APEX4ced8d */  INTO MD_TRIGGERS VALUES v_row RETURNING ID INTO v_newid;
    v_ret := copy_additional_properties(v_originalid, v_newid, p_newconnectionid);
    v_count := v_count + 1;
    INSERT /* APEX2ea386 */  INTO MD_DERIVATIVES(src_id, src_type, derived_id, derived_type, DERIVED_CONNECTION_ID_FK, ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE)
    VALUES(v_originalid, C_OBJECTTYPE_TRIGGERS, v_newid, C_OBJECTTYPE_TRIGGERS, p_newconnectionid, v_row.TRIGGER_NAME, v_row.TRIGGER_NAME, C_NS_DB_TRIGGERS);
  END LOOP;
  CLOSE cv_curs;
  return v_count;
END copy_all_table_triggers;

FUNCTION copy_all_tables_cascade(p_oldschemaid MD_SCHEMAS.ID%TYPE, p_newschemaid MD_SCHEMAS.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE, p_filter_set MIGR_FILTER_SET :=NULL) RETURN NUMBER
IS
  cv_curs REF_CURSOR;
  /*CURSOR curs IS SELECT * FROM MD_TABLES where SCHEMA_ID_FK = p_oldschemaid; */
  v_newid MD_TABLES.ID%TYPE := NULL;
  v_originalid MD_TABLES.ID%TYPE := NULL;
  v_count NUMBER := 0;
  v_ret NUMBER;
  v_row MD_TABLES%ROWTYPE;
  v_filt MIGR_FILTER;
  v_condition VARCHAR2(4000);
  v_selectStmt VARCHAR2(4000) := 'SELECT * FROM MD_TABLES where SCHEMA_ID_FK = ' || p_oldschemaid;
BEGIN
  v_selectStmt := apply_filter(p_filter_set, C_OBJECTTYPE_TABLES, 'TABLE_NAME', 'ID', v_selectStmt);
  OPEN cv_curs FOR v_selectStmt;
  LOOP
    FETCH cv_curs INTO v_row;
    EXIT WHEN cv_curs%NOTFOUND;
    v_originalid := v_row.ID;
    v_row.ID := NULL;
    v_row.SCHEMA_ID_FK := p_newschemaid;
    INSERT /* APEXdc6972 */  INTO MD_TABLES values v_row RETURNING ID INTO v_newid;
    v_ret := copy_additional_properties(v_originalid, v_newid, p_newconnectionid);
    v_count := v_count + 1;
    INSERT /* APEXcd0659 */  INTO MD_DERIVATIVES(src_id, src_type, derived_id, derived_type, DERIVED_CONNECTION_ID_FK, ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE)
      VALUES(v_originalid, C_OBJECTTYPE_TABLES, v_newid, C_OBJECTTYPE_TABLES, p_newconnectionid, v_row.TABLE_NAME, v_row.TABLE_NAME,  C_NS_SCHEMA_OBJS || TO_CHAR(p_newschemaid));
    v_ret := copy_all_columns_cascade(v_originalid, v_newid, p_newconnectionid, p_filter_set);
    v_ret := copy_all_indexes(v_originalid, v_newid, p_newconnectionid, p_newschemaid, p_filter_set);
    v_ret := copy_all_table_triggers(v_originalid, v_newid, p_newconnectionid, p_filter_set);
  END LOOP;
  CLOSE cv_curs;
  return v_count;
END copy_all_tables_cascade;

FUNCTION copy_all_view_triggers(p_oldviewid MD_VIEWS.ID%TYPE, p_newviewid MD_VIEWS.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE) RETURN NUMBER
IS
  CURSOR curs IS SELECT * FROM MD_TRIGGERS WHERE MD_TRIGGERS.TABLE_OR_VIEW_ID_FK = p_oldviewid;
  v_originalid MD_TRIGGERS.ID%TYPE;
  v_newid MD_TRIGGERS.ID%TYPE;
  v_count NUMBER := 0;
  v_ret NUMBER;
BEGIN
  FOR v_row IN curs LOOP
    v_originalid := v_row.ID;
    v_row.ID := NULL;
    v_row.TABLE_OR_VIEW_ID_FK := p_newviewid;
    INSERT INTO MD_TRIGGERS VALUES v_row RETURNING ID INTO v_newid;
    v_ret := copy_additional_properties(v_originalid, v_newid, p_newconnectionid);
    v_count := v_count + 1;
    INSERT INTO MD_DERIVATIVES(src_id, src_type, derived_id, derived_type, DERIVED_CONNECTION_ID_FK, ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE)
    VALUES(v_originalid, C_OBJECTTYPE_TRIGGERS, v_newid, C_OBJECTTYPE_TRIGGERS, p_newconnectionid, v_row.TRIGGER_NAME, v_row.TRIGGER_NAME, C_NS_DB_TRIGGERS);
  END LOOP;
  return v_count;
END copy_all_view_triggers;

FUNCTION copy_all_views_cascade(p_oldschemaid MD_SCHEMAS.ID%TYPE, p_newschemaid MD_SCHEMAS.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE, p_filter_set MIGR_FILTER_SET) RETURN NUMBER
IS
  cv_curs REF_CURSOR;
  v_selectStmt VARCHAR2(4000) := 'SELECT * FROM MD_VIEWS WHERE SCHEMA_ID_FK = ' || p_oldschemaid;
  v_newid MD_VIEWS.ID%TYPE := NULL;
  v_originalid MD_VIEWS.ID%TYPE := NULL;
  v_count NUMBER := 0;
  v_ret NUMBER;
  v_row MD_VIEWS%ROWTYPE;
BEGIN
  v_selectStmt := apply_filter(p_filter_set, C_OBJECTTYPE_VIEWS, 'VIEW_NAME' ,'ID', v_selectStmt);
  OPEN cv_curs FOR v_selectStmt;
  LOOP
    FETCH cv_curs into v_row;
    EXIT WHEN cv_curs%NOTFOUND;
    v_originalid := v_row.ID;
    v_row.ID := NULL;
    v_row.SCHEMA_ID_FK := p_newschemaid;
    INSERT /* APEX82b502 */  INTO MD_VIEWS VALUES v_row RETURNING ID INTO v_newid;
    v_ret := copy_additional_properties(v_originalid, v_newid, p_newconnectionid);
    v_count := v_count + 1;
    INSERT /* APEX97cda7 */  INTO MD_DERIVATIVES(src_id, src_type, derived_id, derived_type, DERIVED_CONNECTION_ID_FK, ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE)
      VALUES(v_originalid,   C_OBJECTTYPE_VIEWS,   v_newid,   C_OBJECTTYPE_VIEWS, p_newconnectionid, v_row.VIEW_NAME, v_row.VIEW_NAME, C_NS_SCHEMA_OBJS || TO_CHAR(p_newschemaid));
    v_ret := copy_all_view_triggers(v_originalid, v_newid, p_newconnectionid);
  END LOOP;
  CLOSE cv_curs;
  RETURN v_count;
END copy_all_views_cascade;

FUNCTION copy_group_members(p_oldgroupid MD_GROUPS.ID%TYPE, p_newgroupid MD_GROUPS.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE) RETURN NUMBER
IS
  CURSOR curs IS SELECT * FROM MD_GROUP_MEMBERS WHERE GROUP_ID_FK = p_oldgroupid;
  v_newid MD_GROUP_MEMBERS.ID%TYPE := NULL;
  v_originalid MD_GROUP_MEMBERS.ID%TYPE := NULL;
  v_count NUMBER := 0;
  v_ret NUMBER;
BEGIN
  FOR v_row IN curs LOOP
    v_originalid := v_row.ID;
    v_row.ID := NULL;
    v_row.GROUP_ID_FK := p_newgroupid;
    v_row.USER_ID_FK := find_object_copy(v_row.USER_ID_FK, C_OBJECTTYPE_USERS, p_newconnectionid);
    INSERT INTO MD_GROUP_MEMBERS VALUES v_row RETURNING ID INTO v_newid;
    v_ret := copy_additional_properties(v_originalid, v_newid, p_newconnectionid);
    v_count := v_count + 1;
	-- Group members do not have identifiers, so don't need a namespace
    INSERT INTO MD_DERIVATIVES(src_id, src_type, derived_id, derived_type, DERIVED_CONNECTION_ID_FK)
      VALUES(v_originalid,   C_OBJECTTYPE_GROUP_MEMBERS,   v_newid,   C_OBJECTTYPE_GROUP_MEMBERS, p_newconnectionid);
  END LOOP;
  return v_count;
END copy_group_members;

FUNCTION copy_all_groups_cascade(p_oldschemaid MD_SCHEMAS.ID%TYPE, p_newschemaid MD_SCHEMAS.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE, p_filter_set MIGR_FILTER_SET := NULL) RETURN NUMBER
IS
  cv_curs REF_CURSOR;
  v_selectStmt VARCHAR2(4000) := 'SELECT * FROM MD_GROUPS WHERE SCHEMA_ID_FK = ' || p_oldschemaid;
  v_newid MD_GROUPS.ID%TYPE := NULL;
  v_originalid MD_GROUPS.ID%TYPE := NULL;
  v_count NUMBER := 0;
  v_ret NUMBER;
  v_namespace MD_DERIVATIVES.DERIVED_OBJECT_NAMESPACE%TYPE := NULL;
  v_row MD_GROUPS%ROWTYPE;
  v_catalogname MD_CATALOGS.CATALOG_NAME%TYPE;
  v_catalogdummy MD_CATALOGS.DUMMY_FLAG%TYPE;
  v_oldname MD_GROUPS.GROUP_NAME%TYPE;
BEGIN
  v_selectStmt := apply_filter(p_filter_set, C_OBJECTTYPE_GROUPS, 'GROUP_NAME', 'ID', v_selectStmt);
  OPEN cv_curs FOR v_selectStmt;
  LOOP
    FETCH cv_curs INTO v_row;
    EXIT WHEN cv_curs%NOTFOUND;
    v_originalid := v_row.ID;
    v_row.ID := NULL;
    v_row.SCHEMA_ID_FK := p_newschemaid;
    SELECT /* APEXf67838 */  CATALOG_NAME, DUMMY_FLAG INTO v_catalogname, v_catalogdummy
      FROM MD_CATALOGS, MD_SCHEMAS WHERE MD_CATALOGS.ID = MD_SCHEMAS.CATALOG_ID_FK 
      AND MD_SCHEMAS.ID = p_oldschemaid;
    v_oldname := v_row.GROUP_NAME;
    if v_catalogdummy <> C_DUMMYFLAG_TRUE then
      v_row.GROUP_NAME := v_row.GROUP_NAME || '_' || v_catalogname;
    END IF;
    INSERT /* APEX590cc8 */  INTO MD_GROUPS values v_row RETURNING ID INTO v_newid;
    v_ret := copy_additional_properties(v_originalid, v_newid, p_newconnectionid);
    v_count := v_count + 1;
	IF v_row.GROUP_FLAG = C_ROLE_FLAG THEN
		v_namespace := C_NS_USER_ROLES;
	ELSE
		v_namespace := C_NS_DATABASE;
	END IF;
    INSERT /* APEX5af855 */  INTO MD_DERIVATIVES(src_id, src_type, derived_id, derived_type, DERIVED_CONNECTION_ID_FK, ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE)
      VALUES(v_originalid, C_OBJECTTYPE_GROUPS, v_newid, C_OBJECTTYPE_GROUPS, p_newconnectionid, v_oldname, v_row.GROUP_NAME, v_namespace);
    v_ret := copy_group_members(v_originalid, v_newid, p_newconnectionid);   
  END LOOP;
  CLOSE cv_curs;
  return v_count;
END copy_all_groups_cascade;

FUNCTION copy_all_users_cascade(p_oldschemaid MD_SCHEMAS.ID%TYPE, p_newschemaid MD_SCHEMAS.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE, p_filter_set MIGR_FILTER_SET := NULL) RETURN NUMBER
IS
  cv_curs REF_CURSOR;
  v_selectStmt VARCHAR2(4000) := 'SELECT * FROM MD_USERS WHERE SCHEMA_ID_FK = ' || p_oldschemaid;
  v_newid MD_USERS.ID%TYPE := NULL;
  v_originalid MD_USERS.ID%TYPE := NULL;
  v_count NUMBER := 0;
  v_ret NUMBER;
  v_row MD_USERS%ROWTYPE;
BEGIN
  v_selectStmt := apply_filter(p_filter_set, C_OBJECTTYPE_USERS, 'USERNAME', 'ID', v_selectStmt);
  OPEN cv_curs FOR v_selectStmt;
  LOOP
    FETCH cv_curs INTO v_row;
    EXIT WHEN cv_curs%NOTFOUND;
    v_originalid := v_row.ID;
    v_row.ID := NULL;
    v_row.SCHEMA_ID_FK := p_newschemaid;
    INSERT /* APEX0fe45d */  INTO MD_USERS VALUES v_row RETURNING ID INTO v_newid;
    v_ret := copy_additional_properties(v_originalid, v_newid, p_newconnectionid);
    v_count := v_count + 1;
    INSERT /* APEX0e5fd5 */  INTO MD_DERIVATIVES(src_id, src_type, derived_id, derived_type, DERIVED_CONNECTION_ID_FK, ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE)
      VALUES(v_originalid,   C_OBJECTTYPE_USERS,   v_newid,   C_OBJECTTYPE_USERS, p_newconnectionid, v_row.USERNAME, v_row.USERNAME, C_NS_USERS);
  END LOOP;
  CLOSE cv_curs;
  return v_count;
END copy_all_users_cascade;

FUNCTION copy_all_other_objects_cascade(p_oldschemaid MD_SCHEMAS.ID%TYPE, p_newschemaid MD_SCHEMAS.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE, p_filter_set MIGR_FILTER_SET) RETURN NUMBER
IS
  cv_curs REF_CURSOR;
  v_selectStmt VARCHAR2(4000) := 'SELECT * FROM MD_OTHER_OBJECTS WHERE SCHEMA_ID_FK = ' || p_oldschemaid;
  v_newid MD_OTHER_OBJECTS.ID%TYPE := NULL;
  v_originalid MD_OTHER_OBJECTS.ID%TYPE := NULL;
  v_count NUMBER := 0;
  v_ret NUMBER;
  v_row MD_OTHER_OBJECTS%ROWTYPE;
BEGIN
  v_selectStmt := apply_filter(p_filter_set, C_OBJECTTYPE_OTHER_OBJECTS, 'NAME', 'ID', v_selectStmt);
  OPEN cv_curs FOR v_selectStmt;
  LOOP
    FETCH cv_curs INTO v_row;
    EXIT WHEN cv_curs%NOTFOUND;
    v_originalid := v_row.ID;
    v_row.ID := NULL;
    v_row.SCHEMA_ID_FK := p_newschemaid;
    INSERT /* APEXa579b1 */  INTO MD_OTHER_OBJECTS VALUES v_row RETURNING ID INTO v_newid;
    v_ret := copy_additional_properties(v_originalid, v_newid, p_newconnectionid);
    v_count := v_count + 1;
    INSERT /* APEX16da27 */  INTO MD_DERIVATIVES(src_id, src_type, derived_id, derived_type, DERIVED_CONNECTION_ID_FK, ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE)
      VALUES(v_originalid,   C_OBJECTTYPE_OTHER_OBJECTS,   v_newid,   C_OBJECTTYPE_OTHER_OBJECTS, p_newconnectionid, v_row.NAME, v_row.NAME, C_NS_SCHEMA_OBJS || TO_CHAR(p_newschemaid));
  END LOOP;
  CLOSE cv_curs;
  return v_count;
END copy_all_other_objects_cascade;

FUNCTION copy_all_tablespaces_cascade(p_oldschemaid MD_SCHEMAS.ID%TYPE, p_newschemaid MD_SCHEMAS.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE, p_filter_set MIGR_FILTER_SET := NULL) RETURN NUMBER
IS
  cv_curs REF_CURSOR;
  v_selectStmt VARCHAR2(4000) := 'SELECT * FROM MD_TABLESPACES WHERE SCHEMA_ID_FK = ' || p_oldschemaid;
  v_newid MD_TABLESPACES.ID%TYPE := NULL;
  v_originalid MD_TABLESPACES.ID%TYPE := NULL;
  v_count NUMBER := 0;
  v_ret NUMBER;
  v_row MD_TABLESPACES%ROWTYPE;
BEGIN
  v_selectStmt := apply_filter(p_filter_set, C_OBJECTTYPE_TABLESPACES, 'TABLESPACE_NAME', 'ID', v_selectStmt);
  OPEN cv_curs FOR v_selectStmt;
  LOOP
    FETCH cv_curs INTO v_row;
    EXIT WHEN cv_curs%NOTFOUND;
    v_originalid := v_row.ID;
    v_row.ID := NULL;
    v_row.SCHEMA_ID_FK := p_newschemaid;
    INSERT /* APEXcc0cda */  INTO MD_TABLESPACES VALUES v_row RETURNING ID INTO v_newid;
    v_ret := copy_additional_properties(v_originalid, v_newid, p_newconnectionid);
    v_count := v_count + 1;
    INSERT /* APEX9d43e8 */  INTO MD_DERIVATIVES(src_id, src_type, derived_id, derived_type, DERIVED_CONNECTION_ID_FK, ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE)
      VALUES(v_originalid,   C_OBJECTTYPE_TABLESPACES,   v_newid,   C_OBJECTTYPE_TABLESPACES, p_newconnectionid, v_row.TABLESPACE_NAME, v_row.TABLESPACE_NAME, C_NS_TABLESPACES);
  END LOOP;
  CLOSE cv_curs;
  return v_count;
END copy_all_tablespaces_cascade;

FUNCTION copy_all_udds_cascade(p_oldschemaid MD_SCHEMAS.ID%TYPE, p_newschemaid MD_SCHEMAS.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE, p_filter_set MIGR_FILTER_SET := NULL) RETURN NUMBER
IS
  cv_curs REF_CURSOR;
  v_selectStmt VARCHAR2(4000) := 'SELECT * FROM MD_USER_DEFINED_DATA_TYPES WHERE SCHEMA_ID_FK = ' || p_oldschemaid;
  v_newid MD_USER_DEFINED_DATA_TYPES.ID%TYPE := NULL;
  v_originalid MD_USER_DEFINED_DATA_TYPES.ID%TYPE := NULL;
  v_count NUMBER := 0;
  v_ret NUMBER;
  v_row MD_USER_DEFINED_DATA_TYPES%ROWTYPE;
BEGIN
  v_selectStmt := apply_filter(p_filter_set, C_OBJECTTYPE_UDDT, 'DATA_TYPE_NAME', 'ID', v_selectStmt);
  OPEN cv_curs FOR v_selectStmt;
  LOOP
    FETCH cv_curs INTO v_row;
    EXIT WHEN cv_curs%NOTFOUND;
    v_originalid := v_row.ID;
    v_row.ID := NULL;
    v_row.SCHEMA_ID_FK := p_newschemaid;
    INSERT /* APEX6f21bc */  INTO MD_USER_DEFINED_DATA_TYPES VALUES v_row RETURNING ID INTO v_newid;
    v_ret := copy_additional_properties(v_originalid, v_newid, p_newconnectionid);
    v_count := v_count + 1;
    INSERT /* APEX10196b */  INTO MD_DERIVATIVES(src_id, src_type, derived_id, derived_type, DERIVED_CONNECTION_ID_FK, ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE)
      VALUES(v_originalid,   C_OBJECTTYPE_UDDT,   v_newid,   C_OBJECTTYPE_UDDT, p_newconnectionid, v_row.DATA_TYPE_NAME, v_row.DATA_TYPE_NAME, C_NS_SCHEMA_OBJS || TO_CHAR(p_newschemaid));
  END LOOP;
  CLOSE cv_curs;
  return v_count;
END copy_all_udds_cascade;

FUNCTION copy_child_procedures(p_oldpackageid MD_PACKAGES.ID%TYPE, p_newpackageid MD_PACKAGES.ID%TYPE, p_newschemaid MD_SCHEMAS.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE, p_filter_set MIGR_FILTER_SET := NULL) RETURN NUMBER
IS
  cv_curs REF_CURSOR;
  v_selectStmt VARCHAR2(4000) := 'SELECT * FROM MD_STORED_PROGRAMS WHERE PACKAGE_ID_FK = ' || p_oldpackageid;
  v_newid MD_STORED_PROGRAMS.ID%TYPE := NULL;
  v_originalid MD_STORED_PROGRAMS.ID%TYPE := NULL;
  v_count NUMBER := 0;
  v_ret NUMBER;
  v_row MD_STORED_PROGRAMS%ROWTYPE;
BEGIN
  v_selectStmt := apply_filter(p_filter_set, C_OBJECTTYPE_STORED_PROGRAMS, 'NAME', 'ID', v_selectStmt);
  OPEN cv_curs FOR v_selectStmt;
  LOOP
    FETCH cv_curs INTO v_row;
    EXIT WHEN cv_curs%NOTFOUND;
    v_originalid := v_row.ID;
    v_row.ID := NULL;
    v_row.PACKAGE_ID_FK := p_newpackageid;
    v_row.SCHEMA_ID_FK := p_newschemaid;
    INSERT /* APEXdf6e6a */  INTO MD_STORED_PROGRAMS VALUES v_row RETURNING ID INTO v_newid;
    v_ret := copy_additional_properties(v_originalid, v_newid, p_newconnectionid);
    v_count := v_count + 1;
	-- No need for namespace here, the namespace is the package itself.
    INSERT /* APEXc32b1c */  INTO MD_DERIVATIVES(src_id, src_type, derived_id, derived_type, DERIVED_CONNECTION_ID_FK, ORIGINAL_IDENTIFIER, NEW_IDENTIFIER)
      VALUES(v_originalid,   C_OBJECTTYPE_STORED_PROGRAMS,   v_newid,   C_OBJECTTYPE_STORED_PROGRAMS, p_newconnectionid, v_row.NAME, v_row.NAME);
  END LOOP;
  CLOSE cv_curs;
  return v_count;
END copy_child_procedures;

FUNCTION copy_all_packages_cascade(p_oldschemaid MD_SCHEMAS.ID%TYPE, p_newschemaid MD_SCHEMAS.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE, p_filter_set MIGR_FILTER_SET := NULL) RETURN NUMBER
IS
  cv_curs REF_CURSOR;
  v_selectStmt VARCHAR2(4000) := 'SELECT * FROM MD_PACKAGES WHERE SCHEMA_ID_FK = ' || p_oldschemaid;
  v_newid MD_PACKAGES.ID%TYPE := NULL;
  v_originalid MD_PACKAGES.ID%TYPE := NULL;
  v_count NUMBER := 0;
  v_ret NUMBER;
  v_row MD_PACKAGES%ROWTYPE;
BEGIN
  v_selectStmt := apply_filter(p_filter_set, C_OBJECTTYPE_PACKAGES, 'NAME', 'ID', v_selectStmt);
  OPEN cv_curs FOR v_selectStmt;
  LOOP
    FETCH cv_curs INTO v_row;
    EXIT WHEN cv_curs%NOTFOUND;
    v_originalid := v_row.ID;
    v_row.ID := NULL;
    v_row.SCHEMA_ID_FK := p_newschemaid;
    INSERT /* APEX261d79 */  INTO MD_PACKAGES VALUES v_row RETURNING ID INTO v_newid;
    v_ret := copy_additional_properties(v_originalid, v_newid, p_newconnectionid);
    v_count := v_count + 1;
    INSERT /* APEX71aa11 */  INTO MD_DERIVATIVES(src_id, src_type, derived_id, derived_type, DERIVED_CONNECTION_ID_FK, ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE)
      VALUES(v_originalid,   C_OBJECTTYPE_PACKAGES,   v_newid,   C_OBJECTTYPE_PACKAGES, p_newconnectionid, v_row.NAME, v_row.NAME, C_NS_SCHEMA_OBJS || TO_CHAR(p_newschemaid));
    v_ret := copy_child_procedures(v_originalid, v_newid, p_newschemaid, p_newconnectionid, p_filter_set);
  END LOOP;
  CLOSE cv_curs;
  return v_count;
END copy_all_packages_cascade;

FUNCTION copy_all_unpackaged_sps(p_oldschemaid MD_SCHEMAS.ID%TYPE, p_newschemaid MD_SCHEMAS.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE, p_filter_set MIGR_FILTER_SET := NULL) RETURN NUMBER
IS
  cv_curs REF_CURSOR;
  v_selectStmt VARCHAR2(4000) := 'SELECT * FROM MD_STORED_PROGRAMS WHERE SCHEMA_ID_FK = ' || p_oldschemaid ||' AND PACKAGE_ID_FK IS NULL';
  v_newid MD_STORED_PROGRAMS.ID%TYPE := NULL;
  v_originalid MD_STORED_PROGRAMS.ID%TYPE := NULL;
  v_count NUMBER := 0;
  v_ret NUMBER;
  v_row MD_STORED_PROGRAMS%ROWTYPE;
BEGIN
  v_selectStmt := apply_filter(p_filter_set, C_OBJECTTYPE_STORED_PROGRAMS, 'NAME', 'ID', v_selectStmt);
  OPEN cv_curs FOR v_selectStmt;
  LOOP
    FETCH cv_curs INTO v_row;
    EXIT WHEN cv_curs%NOTFOUND;
    v_originalid := v_row.ID;
    v_row.ID := NULL;
    v_row.schema_id_fk := p_newschemaid;
    INSERT /* APEXb512c3 */  INTO MD_STORED_PROGRAMS VALUES v_row RETURNING ID INTO v_newid;
    v_ret := copy_additional_properties(v_originalid, v_newid, p_newconnectionid);
    v_count := v_count + 1;
	-- Non-packaged procedures belong in the schema objects namespace.
    INSERT /* APEX5a765e */  INTO MD_DERIVATIVES(src_id, src_type, derived_id, derived_type, DERIVED_CONNECTION_ID_FK, ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE)
      VALUES(v_originalid, C_OBJECTTYPE_STORED_PROGRAMS, v_newid, C_OBJECTTYPE_STORED_PROGRAMS, p_newconnectionid, v_row.NAME, v_row.NAME, C_NS_SCHEMA_OBJS || TO_CHAR(p_newschemaid));
  END LOOP;
  CLOSE cv_curs;
  return v_count;
END copy_all_unpackaged_sps;

FUNCTION copy_all_synonyms_cascade(p_oldschemaid MD_SCHEMAS.ID%TYPE, p_newschemaid MD_SCHEMAS.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE, p_filter_set MIGR_FILTER_SET := NULL) RETURN NUMBER
IS
  cv_curs REF_CURSOR;
  v_selectStmt VARCHAR2(4000) := 'SELECT * FROM MD_SYNONYMS WHERE SCHEMA_ID_FK = ' || p_oldschemaid;
  v_newid MD_SYNONYMS.ID%TYPE := NULL;
  v_originalid MD_SYNONYMS.ID%TYPE := NULL;
  v_count NUMBER := 0;
  v_ret NUMBER;
  v_namespace MD_DERIVATIVES.DERIVED_OBJECT_NAMESPACE%TYPE;
  v_row MD_SYNONYMS%ROWTYPE;
BEGIN
  v_selectStmt := apply_filter(p_filter_set, C_OBJECTTYPE_SYNONYMS, 'NAME', 'ID', v_selectStmt);
  OPEN cv_curs FOR v_selectStmt;
  LOOP
    FETCH cv_curs INTO v_row;
    EXIT WHEN cv_curs%NOTFOUND;
    v_originalid := v_row.ID;
    v_row.ID := NULL;
    v_row.SYNONYM_FOR_ID := find_object_copy(v_row.SYNONYM_FOR_ID, v_row.FOR_OBJECT_TYPE, p_newconnectionid);
    INSERT /* APEX847b11 */  INTO MD_SYNONYMS VALUES v_row RETURNING ID INTO v_newid;
    v_ret := copy_additional_properties(v_originalid, v_newid, p_newconnectionid);
    v_count := v_count + 1;
	-- Synonyms have two potential name spaces:  Private synonyms belong in the schema objects, while public 
	-- synonyms belong in their own namespace.
	IF v_row.PRIVATE_VISIBILITY = C_SYNONYM_PRIVATE THEN
		v_namespace := C_NS_SCHEMA_OBJS || TO_CHAR(p_newschemaid);
	ELSE
		v_namespace := C_NS_PUBLIC_SYNONYMS;
        END IF;
    INSERT /* APEX77a859 */  INTO MD_DERIVATIVES(src_id, src_type, derived_id, derived_type, DERIVED_CONNECTION_ID_FK, ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE)
      VALUES(v_originalid, C_OBJECTTYPE_SYNONYMS, v_newid, C_OBJECTTYPE_SYNONYMS, p_newconnectionid, v_row.NAME, v_row.NAME, v_namespace);
  END LOOP;
  CLOSE cv_curs;
  return v_count;
END copy_all_synonyms_cascade;

FUNCTION copy_all_sequences_cascade(p_oldschemaid MD_SCHEMAS.ID%TYPE, p_newschemaid MD_SCHEMAS.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE, p_filter_set MIGR_FILTER_SET := NULL) RETURN NUMBER
IS
  cv_curs REF_CURSOR;
  v_selectStmt VARCHAR2(4000) := 'SELECT * FROM MD_SEQUENCES WHERE SCHEMA_ID_FK = ' || p_oldschemaid;
  v_newid MD_SEQUENCES.ID%TYPE := NULL;
  v_originalid MD_SEQUENCES.ID%TYPE := NULL;
  v_count NUMBER := 0;
  v_ret NUMBER;
  v_row MD_SEQUENCES%ROWTYPE;
BEGIN
  v_selectStmt := apply_filter(p_filter_set, C_OBJECTTYPE_SEQUENCES, 'NAME', 'ID', v_selectStmt);
  OPEN cv_curs FOR v_selectStmt;
  LOOP
    FETCH cv_curs INTO v_row;
    EXIT WHEN cv_curs%NOTFOUND;
    v_originalid := v_row.ID;
    v_row.ID := NULL;
    INSERT /* APEX8dc51f */  INTO MD_SEQUENCES VALUES v_row RETURNING ID INTO v_newid;
    v_ret := copy_additional_properties(v_originalid, v_newid, p_newconnectionid);
    v_count := v_count + 1;
    INSERT /* APEX8995e0 */  INTO MD_DERIVATIVES(src_id, src_type, derived_id, derived_type, derived_connection_id_fk, ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE)
      VALUES(v_originalid, C_OBJECTTYPE_SEQUENCES, v_newid, C_OBJECTTYPE_SEQUENCES, p_newconnectionid, v_row.NAME, v_row.NAME, C_NS_SCHEMA_OBJS || TO_CHAR(p_newschemaid));
  END LOOP;
  CLOSE cv_curs;
  return v_count;
END copy_all_sequences_cascade;

FUNCTION copy_user_privileges(p_olduserid MD_PRIVILEGES.ID%TYPE, p_newuserid MD_PRIVILEGES.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE) RETURN NUMBER
IS
  CURSOR curs is SELECT * FROM MD_USER_PRIVILEGES WHERE PRIVILEGE_ID_FK = p_olduserid;
  v_newid MD_USER_PRIVILEGES.ID%TYPE;
  v_count NUMBER := 0;
  v_originalid MD_USER_PRIVILEGES.ID%TYPE;
  v_ret NUMBER;
BEGIN
  FOR v_row IN curs LOOP
    v_originalid := v_row.ID;
    v_row.ID := NULL;
    v_row.USER_ID_FK := find_object_copy(v_row.USER_ID_FK , C_OBJECTTYPE_USERS, p_newconnectionid);
    v_row.PRIVILEGE_ID_FK := p_newuserid;
    INSERT INTO MD_USER_PRIVILEGES values v_row RETURNING ID INTO v_newid;
    v_ret := copy_additional_properties(v_originalid, v_newid, p_newconnectionid);
    v_count := v_count + 1;
    INSERT INTO MD_DERIVATIVES(src_id, src_type, derived_id, derived_type, DERIVED_CONNECTION_ID_FK)
      VALUES(v_originalid, C_OBJECTTYPE_USER_PRIVILEGES, v_newid, C_OBJECTTYPE_USER_PRIVILEGES, p_newconnectionid);
  END LOOP;
  return v_count;
END copy_user_privileges;

FUNCTION copy_all_privileges_cascade(p_oldschemaid MD_SCHEMAS.ID%TYPE, p_newschemaid MD_SCHEMAS.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE, p_filter_set MIGR_FILTER_SET) RETURN NUMBER
IS
  cv_curs REF_CURSOR;
  v_selectStmt VARCHAR2(4000) := 'SELECT * FROM MD_PRIVILEGES WHERE SCHEMA_ID_FK = ' || p_oldschemaid;
  v_newid MD_PRIVILEGES.ID%TYPE := NULL;
  v_originalid MD_PRIVILEGES.ID%TYPE := NULL;
  v_count NUMBER := 0;
  v_ret NUMBER;
  v_row MD_PRIVILEGES%ROWTYPE;
BEGIN
  v_selectStmt := apply_filter(p_filter_set, C_OBJECTTYPE_PRIVILEGES, 'PRIVILEGE_NAME' ,'ID', v_selectStmt);
  OPEN cv_curs FOR v_selectStmt;
  LOOP
    FETCH cv_curs into v_row;
    EXIT WHEN cv_curs%NOTFOUND;
    v_originalid := v_row.ID;
    v_row.ID := NULL;
    v_row.PRIVELEGE_OBJECT_ID := find_object_copy(v_row.PRIVELEGE_OBJECT_ID , v_row.PRIVELEGEOBJECTTYPE, p_newconnectionid);
    v_row.SCHEMA_ID_FK := p_newschemaid;
    INSERT /* APEX77d54d */  INTO MD_PRIVILEGES VALUES v_row RETURNING ID INTO v_newid;
    v_ret := copy_additional_properties(v_originalid, v_newid, p_newconnectionid);
    v_count := v_count + 1;
    -- No need to pass on the identifiers to the derivatives as no need to worry about the clashes for the same.
    INSERT /* APEX0ce3d5 */  INTO MD_DERIVATIVES(src_id, src_type, derived_id, derived_type, DERIVED_CONNECTION_ID_FK, DERIVED_OBJECT_NAMESPACE)
      VALUES(v_originalid,   C_OBJECTTYPE_PRIVILEGES,   v_newid,   C_OBJECTTYPE_PRIVILEGES, p_newconnectionid, C_NS_SCHEMA_OBJS || TO_CHAR(p_newschemaid));
    v_ret := copy_user_privileges(v_originalid, v_newid, p_newconnectionid);
  END LOOP;
  CLOSE cv_curs;
  RETURN v_count;
END copy_all_privileges_cascade;

FUNCTION copy_all_cross_schema_objects(p_oldschemaid MD_SCHEMAS.ID%TYPE, p_newschemaid MD_SCHEMAS.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE, p_filter_set MIGR_FILTER_SET := NULL) RETURN NUMBER
IS
  v_ret NUMBER;
BEGIN
-- DD; Can't do this until all schema tables are done
-- There may be foreign keys between schema
  v_ret := copy_all_constraints_cascade(p_oldschemaid, p_newschemaid, p_newconnectionid, p_filter_set);
  v_ret := copy_all_groups_cascade(p_oldschemaid, p_newschemaid, p_newconnectionid, p_filter_set);
  v_ret := copy_all_other_objects_cascade(p_oldschemaid, p_newschemaid, p_newconnectionid, p_filter_set);
  v_ret := copy_all_privileges_cascade(p_oldschemaid, p_newschemaid, p_newconnectionid, p_filter_set);
  -- Do synonyms last: This way, we can be sure that the oject for which it is a synonym
  -- has already been copied.
  v_ret := copy_all_synonyms_cascade(p_oldschemaid, p_newschemaid, p_newconnectionid, p_filter_set);
  return v_ret;
END copy_all_cross_schema_objects;

FUNCTION copy_all_schema_objects(p_oldschemaid MD_SCHEMAS.ID%TYPE, p_newschemaid MD_SCHEMAS.ID%TYPE, p_newconnectionid MD_CONNECTIONS.ID%TYPE, p_filter_set MIGR_FILTER_SET := NULL) RETURN NUMBER
IS
  v_ret NUMBER;
BEGIN
  v_ret := copy_all_tables_cascade(p_oldschemaid, p_newschemaid, p_newconnectionid, p_filter_set);
  v_ret := copy_all_views_cascade(p_oldschemaid, p_newschemaid, p_newconnectionid, p_filter_set);
  v_ret := copy_all_users_cascade(p_oldschemaid, p_newschemaid, p_newconnectionid, p_filter_set);
  v_ret := copy_all_tablespaces_cascade(p_oldschemaid, p_newschemaid, p_newconnectionid, p_filter_set);
  v_ret := copy_all_udds_cascade(p_oldschemaid, p_newschemaid, p_newconnectionid, p_filter_set);
  v_ret := copy_all_packages_cascade(p_oldschemaid, p_newschemaid, p_newconnectionid, p_filter_set);
  v_ret := copy_all_unpackaged_sps(p_oldschemaid, p_newschemaid, p_newconnectionid, p_filter_set);
  v_ret := copy_all_sequences_cascade(p_oldschemaid, p_newschemaid, p_newconnectionid, p_filter_set);
  -- TODO: Roles are wrong in the model right now.  I need to fix these up.
  --v_ret := copy_all_roles_cascade(p_oldschemaid, p_newschemaid);
  return v_ret;  
END copy_all_schema_objects;


FUNCTION CREATE_SCHEMANAME(p_schemaName VARCHAR2,p_catalogName VARCHAR2) RETURN VARCHAR2
IS
BEGIN
IF UPPER(p_schemaName)  = 'DBO' THEN
  RETURN p_catalogName;
ELSE
 RETURN p_schemaName || '_' || p_catalogName;
 END IF;
END CREATE_SCHEMANAME;

FUNCTION copy_catalogs_cascade(p_connectionid MD_CONNECTIONS.ID%TYPE, 
                                   p_catalogid MD_CATALOGS.ID%TYPE, 
                                   p_newcatalogid MD_CATALOGS.ID%TYPE, 
                                   p_newconnectionid MD_CONNECTIONS.ID%TYPE, 
                                   p_filter_set MIGR_FILTER_SET :=NULL) RETURN NUMBER
IS
  cv_curs REF_CURSOR;
  v_newid NUMBER;
  v_count NUMBER := 0;
  v_ret NUMBER;
  v_newName MD_SCHEMAS.NAME%TYPE;
  v_filt MIGR_FILTER;
  v_selectStmt VARCHAR2(4000) := 'SELECT a.id schema_id, A.name schema_name, b.id catalog_id, B.CATALOG_NAME, B.DUMMY_FLAG, A.type, A.character_set, A.version_tag 
      FROM MD_SCHEMAS A, MD_CATALOGS B
      WHERE 
      	A.CATALOG_ID_FK = B.ID 
        AND B.ID =' || p_catalogid  || 
        ' AND CONNECTION_ID_FK = ' || p_connectionid ;
--  v_schemaid MD_SCHEMAS.ID%TYPE;
--  v_schemaname MD_SCHEMAS.NAME%TYPE;
--  v_catalogid MD_CATALOGS.ID%TYPE;
--  v_catalogname MD_CATALOGS.CATALOG_NAME%TYPE;
--  v_catalogdummy MD_CATALOGS.DUMMY_FLAG%TYPE;
--  v_schematype MD_SCHEMAS.TYPE%TYPE;
--  v_schemacharset MD_SCHEMAS.CHARACTER_SET%TYPE;
--  v_schemaversiontag MD_SCHEMAS.VERSION_TAG%TYPE;

  v_derivedRec  DERIVATIVE_REC;
  v_derivedRec2 DERIVATIVE_REC2;
BEGIN
  --v_selectStmt := apply_filter(p_filter_set, C_OBJECTTYPE_CATALOGS, 'B.CATALOG_NAME', 'B.ID', v_selectStmt);
  -- NOTE: May need to apply a schema filter here too
  --v_selectStmt := apply_filter(p_filter_set, C_OBJECTTYPE_SCHEMAS, 'A.NAME', 'A.ID', v_selectStmt);
  OPEN cv_curs FOR v_selectStmt;
  LOOP
    --FETCH cv_curs INTO v_schemaid, v_schemaname, v_catalogid, v_catalogname, v_catalogdummy, v_schematype, v_schemacharset, v_schemaversiontag;
    FETCH cv_curs INTO v_derivedRec;
    EXIT WHEN cv_curs%NOTFOUND;

    /*
     schema_id          NUMBER,
     schema_name        VARCHAR2(4000 BYTE),
     catalog_id         NUMBER,
     catalog_name       VARCHAR2(4000 BYTE),
     dummy_flag         CHAR(1 BYTE),
     character_set      VARCHAR2(4000 BYTE),
     version_tag        VARCHAR2(40 BYTE)

    */
    -- TODO: Handle wrapping here.
    if v_derivedRec.dummy_flag  <> C_DUMMYFLAG_TRUE then
      v_newName := CREATE_SCHEMANAME(v_derivedRec.schema_name,v_derivedRec.catalog_name);
	else
	  v_newName := v_derivedRec.schema_name;
	end if;
    INSERT /* APEXabce74 */  INTO MD_SCHEMAS(CATALOG_ID_FK, NAME, TYPE, CHARACTER_SET, VERSION_TAG)
    VALUES (p_newcatalogid,  v_newName, v_derivedRec.cap_type, v_derivedRec.character_set, v_derivedRec.version_tag)
    RETURNING ID INTO v_newid;
    -- Here's and interesting situation.  What will we do with the additional properties?
    -- I can coalesce them such that they are in the condensed catalog/schema pair
    -- But their order could (will) contain duplicates.....
    v_ret := copy_additional_properties(p_catalogid, v_newid, p_newconnectionid);
    v_ret := copy_additional_properties(v_derivedRec.schema_id, v_newid, p_newconnectionid);
	-- No Need for namespace stuff for catalogs.
    INSERT /* APEX057955 */  INTO MD_DERIVATIVES(SRC_ID, SRC_TYPE, DERIVED_ID, DERIVED_TYPE, DERIVED_CONNECTION_ID_FK,
      ORIGINAL_IDENTIFIER, NEW_IDENTIFIER)
    VALUES (v_derivedRec.schema_id, C_OBJECTTYPE_SCHEMAS, v_newid, C_OBJECTTYPE_SCHEMAS, p_newconnectionid, v_derivedRec.schema_name, v_newName);
    INSERT /* APEX06931c */  INTO MD_DERIVATIVES(SRC_ID, SRC_TYPE, DERIVED_ID, DERIVED_TYPE, DERIVED_CONNECTION_ID_FK, ORIGINAL_IDENTIFIER, NEW_IDENTIFIER)
    VALUES (v_derivedRec.catalog_id, C_OBJECTTYPE_CATALOGS, v_newid, C_OBJECTTYPE_SCHEMAS, p_newconnectionid, v_derivedRec.catalog_name, v_newName);
    -- TODO: ADD THE FILTER TO THE PARAMETERS BELOW
    v_ret := copy_all_schema_objects(v_derivedRec.schema_id, v_newid, p_newconnectionid, p_filter_set);
    v_count := v_count + 1;
    v_newName :='';
  END LOOP;
  CLOSE cv_curs;
  -- Now...Once all of the schema objects have been done, we have to copy all of those objects that could cross
  -- schema boundaries.  So we need to loop through them again
v_selectStmt := 'SELECT SRC_ID, DERIVED_ID FROM MD_DERIVATIVES WHERE SRC_TYPE = ' 
  					|| '''' || C_OBJECTTYPE_SCHEMAS || ''' AND DERIVED_TYPE = ''' || C_OBJECTTYPE_SCHEMAS ||''''
  					--|| ' AND DERIVED_CONNECTION_ID_FK = ' || p_newconnectionid
                      || ' AND DERIVED_ID IN (SELECT SCHEMA_ID FROM MGV_ALL_SCHEMA WHERE CATALOG_ID = ' || p_newcatalogid || ' AND CONNECTION_ID = ' || p_newconnectionid || ')';
  OPEN cv_curs FOR v_selectStmt;
  LOOP
    FETCH cv_curs into v_derivedRec2;
    EXIT when cv_curs%NOTFOUND;
    v_ret := copy_all_cross_schema_objects(v_derivedRec2.schemaid, v_derivedRec2.newid, p_newconnectionid, p_filter_set);
  END LOOP;
  CLOSE cv_curs;  					
  return v_count;
END copy_catalogs_cascade;

FUNCTION remove_duplicate_indexes(p_connectionid MD_CONNECTIONS.ID%TYPE) RETURN NUMBER
IS
  CURSOR v_curs IS select  index_id_fk, sum(md_index_details.column_id_fk * md_index_details.detail_order) simplehash from md_index_details 
    where index_id_fk in (select id from md_indexes where table_id_fk in (select table_id from mgv_all_tables where connection_id = p_connectionid)) 
    group by index_id_fk
    order by simplehash, index_id_fk;
  v_lasthash NUMBER :=0;
  v_currenthash NUMBER :=0;
  v_currentid MD_INDEX_DETAILS.INDEX_ID_FK%TYPE;
  v_lastid MD_INDEX_DETAILS.INDEX_ID_FK%TYPE;
  v_count NUMBER := 0;
  v_sql VARCHAR(255);
BEGIN
  OPEN v_curs;
  LOOP
    FETCH v_curs into v_currentid, v_currenthash;
    EXIT WHEN v_curs%NOTFOUND;
    if v_currenthash = v_lasthash THEN
      -- dbms_output.put_line('Index ' || TO_CHAR(v_currentid) || ' is a duplicate');
      v_sql := 'DELETE FROM MD_INDEXES WHERE ID = ' || v_currentid;
      EXECUTE IMMEDIATE v_sql;
      --dbms_output.put_line('DELETE FROM MD_INDEXES WHERE ID = ' || v_currentid);
      v_sql := 'UPDATE MD_DERIVATIVES SET DERIVATIVE_REASON = ''DUPIND'', DERIVED_ID = ' || TO_CHAR(v_lastid)  || ' WHERE DERIVED_ID = ' || TO_CHAR(v_currentid);
      EXECUTE IMMEDIATE v_sql;
      -- dbms_output.put_line('UPDATE MD_DERIVATIVES SET DERIVED_ID = ' || TO_CHAR(v_lastid)  || ' WHERE DERIVED_ID = ' || TO_CHAR(v_currentid));
      v_count := v_count + 1;
    else
      v_lasthash := v_currenthash;
      v_lastid := v_currentid;
    end if;
  END LOOP;
  CLOSE v_curs;
  return v_count;    
END remove_duplicate_indexes;

FUNCTION remove_indexes_used_elsewhere(p_connectionid MD_CONNECTIONS.ID%TYPE) RETURN NUMBER
IS
  CURSOR v_curs IS
    select INDEX_ID_FK from 
      (select  index_id_fk, sum(md_index_details.column_id_fk * md_index_details.detail_order) simplehash from md_index_details 
       where index_id_fk in (select id from md_indexes where table_id_fk in (select table_id from mgv_all_tables where connection_id = p_connectionid)) 
       group by index_id_fk
       order by simplehash) a
    WHERE A.SIMPLEHASH 
    IN
    (
      SELECT b.simplehash FROM 
      (
        SELECT SUM(MD_CONSTRAINT_DETAILS.COLUMN_ID_FK * MD_CONSTRAINT_DETAILS.DETAIL_ORDER) simplehash from md_constraint_details
        where constraint_id_fk in (select id from md_constraints where table_id_fk in (select table_id from mgv_all_tables where connection_id = p_connectionid))
        group by constraint_id_fk
        order by simplehash
      ) b
     );
  v_currentId MD_INDEX_DETAILS.INDEX_ID_FK%TYPE;     
  v_sql VARCHAR2(255);
  v_count NUMBER := 0;
BEGIN
  OPEN v_curs;
  LOOP
    FETCH v_curs into v_currentid;
    EXIT WHEN v_curs%NOTFOUND;
      v_sql := 'DELETE FROM MD_INDEXES WHERE ID = ' || v_currentid;
      EXECUTE IMMEDIATE v_sql;
      --dbms_output.put_line('DELETE FROM MD_INDEXES WHERE ID = ' || v_currentid);
      v_sql := 'DELETE FROM MD_DERIVATIVES WHERE DERIVED_ID = ' || TO_CHAR(v_currentid);
      EXECUTE IMMEDIATE v_sql;
      -- dbms_output.put_line('UPDATE MD_DERIVATIVES SET DERIVED_ID = ' || TO_CHAR(v_lastid)  || ' WHERE DERIVED_ID = ' || TO_CHAR(v_currentid));
      v_count := v_count + 1;
  END LOOP;
  CLOSE v_curs;
  RETURN v_count;
END remove_indexes_used_elsewhere;    

PROCEDURE cut_lob_indexes_to_25(p_connectionId MD_CONNECTIONS.ID%TYPE)
IS
  CURSOR v_curs (context MD_ADDITIONAL_PROPERTIES.VALUE%TYPE, ctxcat MD_ADDITIONAL_PROPERTIES.VALUE%TYPE) is 
    SELECT * FROM MD_INDEXES WHERE 
    TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid)
    AND LENGTH(INDEX_NAME) > 25 AND  
    ( EXISTS (SELECT 1 FROM MD_ADDITIONAL_PROPERTIES WHERE ( VALUE = context 
    OR VALUE = ctxcat ) AND REF_ID_FK = MD_INDEXES.ID ) )
    FOR UPDATE OF INDEX_NAME;
  v_numIndexCount INTEGER := 1;
  v_newName MD_INDEXES.INDEX_NAME%TYPE;
  v_row MD_INDEXES%ROWTYPE;
BEGIN
-- totierne: for each lob index cut to 23 or 22 or 21 to put _XXX up to 25 chars (should be bytes)
  OPEN v_curs (C_INDEXTYPE_CONTEXT, C_INDEXTYPE_CTXCAT);
  LOOP
    FETCH v_curs INTO v_row;
    EXIT WHEN v_curs%NOTFOUND;
    v_newName := MIGRATION_TRANSFORMER.add_suffix(v_row.INDEX_NAME, '_' || TO_CHAR(v_numIndexCount), 25);
    update /* APEXa5c421 */  MD_INDEXES SET index_name = v_newName where current of v_curs;
    v_numIndexCount := v_numIndexCount + 1;
  END LOOP;
  CLOSE v_curs;
  commit;
END cut_lob_indexes_to_25;

FUNCTION fixupTextIndexes(p_connectionId MD_CONNECTIONS.ID%TYPE) return NUMBER
IS
  CURSOR v_curs is
    select index_id_fk, count(*) numcols from md_index_details where
    index_id_fk in (
      select c.id
      from md_columns a, md_index_details b, md_indexes c
      where b.column_id_fk = a.id
      and column_type in ('BLOB', 'CLOB')
      and b.index_id_fk = c.id
      and c.table_id_fk in (select table_id from mgv_all_tables where connection_id = p_connectionid)
    ) group by index_id_fk;
  v_indexId MD_INDEXES.ID%TYPE;
  v_numCols INTEGER;
  v_extendedIndexType MD_ADDITIONAL_PROPERTIES.VALUE%TYPE;
BEGIN        
  OPEN v_curs;
  LOOP
    FETCH v_curs into v_indexId, v_numCols;
    EXIT WHEN v_curs%NOTFOUND;
    IF v_numCols = 1 THEN
      v_extendedIndexType := C_INDEXTYPE_CONTEXT;
    ELSE
      v_extendedIndexType := C_INDEXTYPE_CTXCAT;
    END IF;
    INSERT /* APEX0325eb */  INTO MD_ADDITIONAL_PROPERTIES(CONNECTION_ID_FK ,REF_ID_FK, REF_TYPE, PROP_KEY, VALUE)
    VALUES (p_connectionId, v_indexId, C_OBJECTTYPE_INDEXES, C_PROPKEY_EXTENDEDINDEXTYPE, v_extendedIndexType);
    COMMIT;
  END LOOP;
  -- NCLOBs cannot be indexed.  They aren't allowed in normal indexes, and they aren't allowed in TEXT 
  -- indexes.   The only thing to do here is to remove it.
  -- TODO: We can't just do this silently.
   -- Mark THE derivative RECORD AS DELETEd.
  UPDATE /* APEX411608 */  md_derivatives SET DERIVATIVE_REASON = 'NCLOBIND' WHERE DERIVED_TYPE = 'MD_INDEXES' AND DERIVED_CONNECTION_ID_FK = p_connectionid
      AND  DERIVED_ID IN 
             (SELECT C.ID   FROM MD_COLUMNS A, MD_INDEX_DETAILS B, MD_INDEXES C, MGV_ALL_TABLES D
                 WHERE B.COLUMN_ID_FK = A.ID AND COLUMN_TYPE ='NCLOB' AND B.INDEX_ID_FK = C.ID
                  AND C.TABLE_ID_FK = D.TABLE_ID AND D.CONNECTION_ID = p_connectionid);
  DELETE /* APEXe4da0a */  FROM MD_INDEXES WHERE ID IN
             (SELECT C.ID   FROM MD_COLUMNS A, MD_INDEX_DETAILS B, MD_INDEXES C, MGV_ALL_TABLES D
                 WHERE B.COLUMN_ID_FK = A.ID AND COLUMN_TYPE ='NCLOB' AND B.INDEX_ID_FK = C.ID
                  AND C.TABLE_ID_FK = D.TABLE_ID AND D.CONNECTION_ID = p_connectionid);
  -- cut blob/clob index string to 25 characters with _nn incrementing marker
  cut_lob_indexes_to_25(p_connectionId);
  CLOSE v_curs;
  return 0;
END fixupTextIndexes;

PROCEDURE createDummyScrTblPerSchema_ee(schemaId MD_SCHEMAS."ID"%TYPE, 
                                 new_schemaId MD_SCHEMAS."ID"%TYPE,
                                 p_scratchConn MD_CONNECTIONS."ID"%TYPE)
IS                               
  v_qualified_native_name VARCHAR2(300);
  n_newtblid NUMBER;
  tbltrigRec MD_TRIGGERS%ROWTYPE;
  n_newtrigId MD_TRIGGERS."ID"%TYPE;
  origtrigId MD_TRIGGERS."ID"%TYPE;
  CURSOR curtblTrig(schId MD_SCHEMAS."ID"%TYPE) IS SELECT * FROM MD_TRIGGERS 
                                       WHERE TRIGGER_ON_FLAG = 'T'
                                           AND TABLE_OR_VIEW_ID_FK IN (
                                                SELECT "ID" 
                                                FROM MD_TABLES
                                                WHERE SCHEMA_ID_FK = schId);

BEGIN
   SELECT /* APEX7ee71a */  A.catalog_name || '.' || B."NAME" || 'DUMMY' INTO v_qualified_native_name
             FROM MD_CATALOGS A, MD_SCHEMAS B
             WHERE A."ID" = B.catalog_id_fk
                   AND B."ID" = schemaId;

   -- insert 1 DUMMY table per schema.  We don't want to create peer records in md_tables for each table entry
   INSERT /* APEXc8bf9a */  INTO MD_TABLES(schema_id_fk, table_name, qualified_native_name)
                  VALUES(new_schemaId, 'DUMMY', v_qualified_native_name)
                  RETURNING "ID" INTO n_newtblid;
   -- There is no additional property to copy as this is a dummy table with no src peer
   -- This table is used to attached all the translated triggers

   -- insert corresponding row into md_derivatives
   INSERT /* APEX8dc967 */  INTO MD_DERIVATIVES(SRC_ID, SRC_TYPE, DERIVED_ID, DERIVED_TYPE, DERIVED_CONNECTION_ID_FK,
               ORIGINAL_IDENTIFIER, NEW_IDENTIFIER)
                   VALUES (n_newtblid, C_OBJECTTYPE_TABLES, n_newtblId, C_OBJECTTYPE_TABLES, p_scratchConn, 'DUMMY', 'DUMMY');  

   --copy_all_tbl_trigs_ee
   OPEN curtblTrig(schemaId);
   FETCH curtblTrig INTO tbltrigRec;
   LOOP
      EXIT WHEN curtblTrig%NOTFOUND;
      origtrigId := tbltrigRec."ID";
      tbltrigRec."ID" := NULL;
      tbltrigRec.table_or_view_id_fk := n_newtblid;
      INSERT /* APEXeb2a18 */  INTO MD_TRIGGERS VALUES tbltrigRec RETURNING "ID" INTO n_newtrigId;

      -- insert corresponding row into md_derivatives
      INSERT /* APEXd4c5e7 */  INTO MD_DERIVATIVES(SRC_ID, SRC_TYPE, DERIVED_ID, DERIVED_TYPE, DERIVED_CONNECTION_ID_FK,
               ORIGINAL_IDENTIFIER, NEW_IDENTIFIER)
                   VALUES (origtrigId, C_OBJECTTYPE_TRIGGERS, n_newtrigId, C_OBJECTTYPE_TRIGGERS, p_scratchConn, tbltrigRec.TRIGGER_NAME, tbltrigRec.TRIGGER_NAME);  


      FETCH curtblTrig INTO tbltrigRec;
   END LOOP;
   CLOSE curtblTrig;

END createDummyScrTblPerSchema_ee;

PROCEDURE copy_all_views_ee(schemaId MD_SCHEMAS."ID"%TYPE, 
                                 new_schemaId MD_SCHEMAS."ID"%TYPE,
                                 p_scratchConn MD_CONNECTIONS."ID"%TYPE)
IS                         
   CURSOR curViews(schId MD_SCHEMAS."ID"%TYPE) IS SELECT * FROM MD_VIEWS WHERE SCHEMA_ID_FK = schId;
   viewRec MD_VIEWS%ROWTYPE;
   n_newVwid MD_VIEWS."ID"%TYPE;
   norigVwid MD_VIEWS."ID"%TYPE;
   n_ret NUMBER;

  vwtrigRec MD_TRIGGERS%ROWTYPE;
  n_newtrigId MD_TRIGGERS."ID"%TYPE;
  origtrigId MD_TRIGGERS."ID"%TYPE;
  CURSOR curvwTrig(schId MD_SCHEMAS."ID"%TYPE) IS SELECT * FROM MD_TRIGGERS 
                                       WHERE TRIGGER_ON_FLAG = 'V'
                                           AND TABLE_OR_VIEW_ID_FK IN (
                                                SELECT "ID" 
                                                FROM MD_TABLES
                                                WHERE SCHEMA_ID_FK = schId);   
BEGIN
   OPEN curViews(schemaId);
   FETCH curViews INTO viewRec;
   LOOP
      EXIT WHEN curViews%NOTFOUND;
      norigVwid := viewRec."ID";
      viewRec."ID" := NULL;
      viewRec.SCHEMA_ID_FK := new_schemaId;
      INSERT /* APEX9a24c0 */  INTO MD_VIEWS VALUES viewRec RETURNING "ID" INTO n_newVwId;
      n_ret := copy_additional_properties(viewRec."ID", n_newVwId, p_scratchConn);

      INSERT /* APEX047d7e */  INTO MD_DERIVATIVES(src_id, 
                                 src_type, 
                                 derived_id, 
                                 derived_type, 
                                 DERIVED_CONNECTION_ID_FK, 
                                 ORIGINAL_IDENTIFIER, 
                                 NEW_IDENTIFIER, 
                                 DERIVED_OBJECT_NAMESPACE)
                           VALUES(norigVwid,   
                                  C_OBJECTTYPE_VIEWS,   
                                  n_newVwId,   
                                  C_OBJECTTYPE_VIEWS, 
                                  p_scratchConn, viewRec.VIEW_NAME, viewRec.VIEW_NAME, C_NS_SCHEMA_OBJS || TO_CHAR(new_schemaId));

      -- Handle view triggers
      OPEN curvwTrig(schemaId);
      FETCH curvwTrig INTO vwtrigRec;
      LOOP
         EXIT WHEN curvwTrig%NOTFOUND;
         origtrigId := vwtrigRec."ID";
         vwtrigRec."ID" := NULL;
         vwtrigRec.table_or_view_id_fk := n_newVwId;

         INSERT /* APEX174e8d */  INTO MD_TRIGGERS VALUES vwtrigRec RETURNING "ID" INTO n_newtrigId;

         INSERT /* APEXc04ef5 */  INTO MD_DERIVATIVES(SRC_ID, SRC_TYPE, DERIVED_ID, DERIVED_TYPE, DERIVED_CONNECTION_ID_FK,
               ORIGINAL_IDENTIFIER, NEW_IDENTIFIER)
                   VALUES (origtrigId, C_OBJECTTYPE_TRIGGERS, n_newtrigId, C_OBJECTTYPE_TRIGGERS, p_scratchConn, vwtrigRec.TRIGGER_NAME, vwtrigRec.TRIGGER_NAME);           

         FETCH curvwTrig INTO vwtrigRec;         
      END LOOP; -- end vw trigger loop
      CLOSE curvwTrig;

      FETCH curViews INTO viewRec;
      --copy_all_tbl_trigs_ee      
   END LOOP; -- end vw loop
   CLOSE curViews;
END copy_all_views_ee;

PROCEDURE copy_all_unpackaged_sps_ee(schemaId MD_SCHEMAS."ID"%TYPE, 
                                 new_schemaId MD_SCHEMAS."ID"%TYPE,
                                 p_scratchConn MD_CONNECTIONS."ID"%TYPE)
IS              
   CURSOR curSps(schId MD_SCHEMAS."ID"%TYPE) IS SELECT * FROM MD_STORED_PROGRAMS WHERE SCHEMA_ID_FK = schId;
   spRec MD_STORED_PROGRAMS%ROWTYPE;
   n_newSpid MD_STORED_PROGRAMS."ID"%TYPE;
   norigSpid MD_STORED_PROGRAMS."ID"%TYPE;
   n_ret NUMBER;
BEGIN
   OPEN curSps(schemaId);
   FETCH curSps INTO spRec;
   LOOP
      EXIT WHEN curSps%NOTFOUND;
      norigSpid := spRec."ID";
      spRec."ID" := NULL;
      spRec.schema_id_fk := new_schemaId;

      INSERT /* APEX11b4d7 */  INTO MD_STORED_PROGRAMS VALUES spRec RETURNING "ID" INTO n_newSpid;
      n_ret := copy_additional_properties(spRec."ID", n_newSpid, p_scratchConn);

      INSERT /* APEX20b0a4 */  INTO MD_DERIVATIVES(src_id, 
                                 src_type, 
                                 derived_id, 
                                 derived_type, 
                                 DERIVED_CONNECTION_ID_FK, 
                                 ORIGINAL_IDENTIFIER, 
                                 NEW_IDENTIFIER, 
                                 DERIVED_OBJECT_NAMESPACE)
                           VALUES(norigSpid,   
                                  C_OBJECTTYPE_STORED_PROGRAMS,   
                                  n_newSpid,   
                                  C_OBJECTTYPE_STORED_PROGRAMS, 
                                  p_scratchConn, spRec."NAME", spRec."NAME", C_NS_SCHEMA_OBJS || TO_CHAR(new_schemaId));
      FETCH curSps INTO spRec;
   END LOOP;
   CLOSE curSps;
END copy_all_unpackaged_sps_ee;

PROCEDURE copy_all_tbl_trigs_ee(schemaId MD_SCHEMAS."ID"%TYPE, 
                                 new_schemaId MD_SCHEMAS."ID"%TYPE,
                                 p_scratchConn MD_CONNECTIONS."ID"%TYPE)
IS                                 
BEGIN
   NULL;
END copy_all_tbl_trigs_ee;

PROCEDURE copy_all_vw_trigs_ee(schemaId MD_SCHEMAS."ID"%TYPE, 
                                 new_schemaId MD_SCHEMAS."ID"%TYPE,
                                 p_scratchConn MD_CONNECTIONS."ID"%TYPE)
IS                                 
BEGIN
   NULL;
END copy_all_vw_trigs_ee;

PROCEDURE createIndexEntry(tableId MD_TABLES."ID"%TYPE, 
                                 p_scratchConn MD_CONNECTIONS."ID"%TYPE)
IS
   CURSOR curIndexes(tableId MD_TABLES."ID"%TYPE) IS SELECT * FROM md_indexes WHERE table_id_fk = tableId;
   idxRow MD_INDEXES%ROWTYPE;

BEGIN
   OPEN curIndexes(tableId);
   FETCH curIndexes INTO idxRow;

   LOOP
      EXIT WHEN curIndexes%NOTFOUND;

      INSERT /* APEX5aa9ac */  INTO MD_DERIVATIVES(src_id, 
                                 src_type, 
                                 derived_id, 
                                 derived_type, 
                                 DERIVED_CONNECTION_ID_FK, 
                                 ORIGINAL_IDENTIFIER, 
                                 NEW_IDENTIFIER, 
                                 DERIVED_OBJECT_NAMESPACE)
                           VALUES
                           (
                              idxRow."ID",
                              C_OBJECTTYPE_INDEXES,
                              idxRow."ID",
                              'MD_INDEXES',
                              p_scratchConn,
                              idxRow.index_name,
                              idxRow.index_name,
                              C_OBJECTTYPE_INDEXES || TO_CHAR(tableId)         
                           );      
      FETCH curIndexes INTO idxRow;
   END LOOP;
   CLOSE curIndexes;

END;

PROCEDURE createColumnEntry(tableId MD_TABLES."ID"%TYPE, 
                                 p_scratchConn MD_CONNECTIONS."ID"%TYPE)
IS
   CURSOR curColumns(tableId MD_TABLES."ID"%TYPE) IS SELECT * FROM md_columns WHERE table_id_fk = tableId;
   colRow MD_COLUMNS%ROWTYPE;
BEGIN
   OPEN curColumns(tableId);
   FETCH curColumns INTO colRow;

   LOOP
      EXIT WHEN curColumns%NOTFOUND;

      INSERT /* APEX37caa8 */  INTO MD_DERIVATIVES(src_id, 
                                 src_type, 
                                 derived_id, 
                                 derived_type, 
                                 DERIVED_CONNECTION_ID_FK, 
                                 ORIGINAL_IDENTIFIER, 
                                 NEW_IDENTIFIER, 
                                 DERIVED_OBJECT_NAMESPACE)
                           VALUES
                           (
                              colRow."ID",
                              C_OBJECTTYPE_COLUMNS,
                              colRow."ID",
                              'MD_COLUMNS',
                              p_scratchConn,
                              colRow.column_name,
                              colRow.column_name,
                              C_OBJECTTYPE_COLUMNS || TO_CHAR(tableId)         
                           );      
      FETCH curColumns INTO colRow;
   END LOOP;
   CLOSE curColumns;
END;


PROCEDURE createTableEntry(schemaId MD_SCHEMAS."ID"%TYPE, 
                                 new_schemaId MD_SCHEMAS."ID"%TYPE,
                                 p_scratchConn MD_CONNECTIONS."ID"%TYPE)
IS
   CURSOR curTables(schemaId MD_SCHEMAS."ID"%TYPE) IS SELECT * FROM md_tables WHERE schema_id_fk = schemaId;
   tblRow MD_TABLES%ROWTYPE;
BEGIN
   OPEN curTables(schemaId);
   FETCH curTables INTO tblRow;

   LOOP
      EXIT WHEN curTables%NOTFOUND;

      INSERT /* APEXf0d835 */  INTO MD_DERIVATIVES(src_id, 
                                 src_type, 
                                 derived_id, 
                                 derived_type, 
                                 DERIVED_CONNECTION_ID_FK, 
                                 ORIGINAL_IDENTIFIER, 
                                 NEW_IDENTIFIER, 
                                 DERIVED_OBJECT_NAMESPACE)
                           VALUES
                           (
                              tblRow."ID",
                              C_OBJECTTYPE_TABLES,
                              tblRow."ID",
                              'MD_TABLES',
                              p_scratchConn,
                              tblRow.table_name,
                              tblRow.table_name,
                              C_NS_SCHEMA_OBJS || TO_CHAR(new_schemaid)         
                           );      
      createColumnEntry(tblRow."ID", p_scratchConn);      
      createIndexEntry(tblRow."ID", p_scratchConn);      
      FETCH curTables INTO tblRow;
   END LOOP;
   CLOSE curTables;
END;


PROCEDURE createConstraintEntry(schemaId MD_SCHEMAS."ID"%TYPE, 
                                 new_schemaId MD_SCHEMAS."ID"%TYPE,
                                 p_scratchConn MD_CONNECTIONS."ID"%TYPE)
IS
BEGIN
   NULL;
END;


PROCEDURE copy_schema_objects_ee(schemaId MD_SCHEMAS."ID"%TYPE, 
                                 new_schemaId MD_SCHEMAS."ID"%TYPE,
                                 p_scratchConn MD_CONNECTIONS."ID"%TYPE)
IS                                 
BEGIN
    --This create scratch model for table triggers as well
    createDummyScrTblPerSchema_ee(schemaId,   
                                 new_schemaId,
                                 p_scratchConn);
    -- Make md_derivatives entry only for the following objects -- begin 
    createTableEntry(schemaId, new_schemaId, p_scratchConn);
    createConstraintEntry(schemaId, new_schemaId, p_scratchConn);    
    -- Make md_derivatives entry only for the following objects -- end

    --This create scratch model for view triggers as well                                 
    copy_all_views_ee(schemaId, 
                   new_schemaId,
                   p_scratchConn);

    copy_all_unpackaged_sps_ee(schemaId, 
                 new_schemaId,
                 p_scratchConn);                                    
END copy_schema_objects_ee;

-- p_connectionid -- scratch model connection id
PROCEDURE copy_catalogs_cascade_ee(p_connectionid MD_CONNECTIONS.ID%TYPE)
IS
   CURSOR curDerivatives(conId MD_CONNECTIONS."ID"%TYPE) IS
                SELECT *
                       FROM MD_DERIVATIVES 
                       WHERE DERIVED_CONNECTION_ID_FK = conId
                       AND SRC_TYPE = C_OBJECTTYPE_CATALOGS;
   recDerived MD_DERIVATIVES%ROWTYPE;

   CURSOR curSchemas(catId MD_SCHEMAS.CATALOG_ID_FK%TYPE) IS
                SELECT * FROM MD_SCHEMAS WHERE CATALOG_ID_FK = catId;
   recSchema MD_SCHEMAS%ROWTYPE;

   ncatId MD_SCHEMAS.CATALOG_ID_FK%TYPE;
   n_newschId MD_SCHEMAS."ID"%TYPE;
   v_ret NUMBER;
   v_catalogdummy MD_CATALOGS.DUMMY_FLAG%TYPE;
   v_catalogname VARCHAR2(300);
   v_newName VARCHAR2(300); 
BEGIN
   OPEN curDerivatives(p_connectionid);
   FETCH curDerivatives INTO recDerived;
   LOOP -- for each of the catalog process its schemas
      EXIT WHEN curDerivatives%NOTFOUND;
      SELECT /* APEXa213de */  dummy_flag, catalog_name INTO v_catalogdummy, v_catalogname FROM MD_CATALOGS WHERE "ID" = recDerived.src_id;
      ncatId := recDerived.src_id;
      OPEN curSchemas(ncatId);
      FETCH curSchemas INTO recSchema;
      LOOP
         EXIT WHEN curSchemas%NOTFOUND;

         v_newName := CREATE_SCHEMANAME(recSchema."NAME",v_catalogname);

         INSERT /* APEXc5ddfb */  INTO MD_SCHEMAS(CATALOG_ID_FK, "NAME", "TYPE", CHARACTER_SET, VERSION_TAG)
                          VALUES (recDerived.derived_id, 
                                  v_newName, 
                                  recSchema."TYPE",
                                  recSchema.CHARACTER_SET, 
                                  recSchema.VERSION_TAG)
                          RETURNING "ID" INTO n_newschId;
         v_ret := copy_additional_properties(ncatId, n_newschId, p_connectionid);                          
         v_ret := copy_additional_properties(recSchema."ID", n_newschId, p_connectionid);

	       -- No Need for namespace stuff for catalogs.
         INSERT /* APEXbc229f */  INTO MD_DERIVATIVES(SRC_ID, SRC_TYPE, DERIVED_ID, DERIVED_TYPE, DERIVED_CONNECTION_ID_FK,
               ORIGINAL_IDENTIFIER, NEW_IDENTIFIER)
                   VALUES (recSchema."ID", C_OBJECTTYPE_SCHEMAS, n_newschId, C_OBJECTTYPE_SCHEMAS, p_connectionid, recSchema."NAME", v_newName);

         INSERT /* APEX3b1b2b */  INTO MD_DERIVATIVES(SRC_ID, SRC_TYPE, DERIVED_ID, DERIVED_TYPE, DERIVED_CONNECTION_ID_FK, ORIGINAL_IDENTIFIER, NEW_IDENTIFIER)
                   VALUES (recDerived.src_id, C_OBJECTTYPE_CATALOGS, n_newschId, C_OBJECTTYPE_SCHEMAS, p_connectionid, v_catalogname, v_newName);         

         copy_schema_objects_ee(recSchema."ID", n_newschId, p_connectionId);
         FETCH curSchemas INTO recSchema;
      END LOOP; -- end schema loop
      CLOSE curSchemas;

      FETCH curDerivatives INTO recDerived;
   END LOOP;  -- end catalog loop
   CLOSE curDerivatives;
END copy_catalogs_cascade_ee;

FUNCTION copy_connection_cascade(p_connectionid MD_CONNECTIONS.ID%TYPE, p_filter_set MIGR_FILTER_SET := NULL, p_scratchModel BOOLEAN := FALSE) RETURN NUMBER
IS
  v_newConnectionId MD_CONNECTIONS.ID%TYPE;
  v_numProps NUMBER;
  v_catalogId MD_CATALOGS.ID%TYPE;
  v_catalogName MD_CATALOGS.CATALOG_NAME%TYPE;
  v_numCatalogs NUMBER;
  v_numDuplicateIndexes NUMBER;
  v_sql VARCHAR(255);   

  CURSOR curDerivatives(conId MD_CONNECTIONS."ID"%TYPE) IS
                SELECT distinct 
                           id,
                           src_id,
                           src_type,
                           derived_id,
                           derived_type,
                           derived_connection_id_fk,
                           transformed,
                           original_identifier,
                           new_identifier,
                           derived_object_namespace,
                           derivative_reason,
                           security_group_id,
                           created_on,
                           created_by,
                           last_updated_on,
                           last_updated_by,
                           enabled
                       FROM MD_DERIVATIVES 
                       WHERE DERIVED_CONNECTION_ID_FK = conId
                       AND SRC_TYPE = C_OBJECTTYPE_CATALOGS;

   recDerived MD_DERIVATIVES%ROWTYPE;


BEGIN

  --DROP ANY EXISTING CONVERTED MODEL, AS WE ONLY HAVE A ONE TO ONE RELATIONSHIP WITH CAPTURED AND CONVERTED MODELS NOW
  DELETE /* APEXaa078e */  FROM Md_Connections C 
  WHERE C.Type = 'CONVERTED' --only want to delete CONVERTED MODELS
  AND C.Id IN ( -- delete all converted models associated with this captured model
  SELECT d.derived_id FROM md_derivatives d WHERE d.src_id =  p_connectionid
  );

  -- The connection doesn't use the filter, because it is called for a single connection.
  v_newConnectionId := copy_connection(p_connectionid, p_scratchModel);
  -- Don't forget its additional props
  v_numProps := copy_additional_properties(p_connectionid, v_newConnectionId, v_newConnectionId);
  -- OK - Next coalesce the schema/catalogs

  IF p_scratchModel = FALSE 
  THEN
      --v_catalogId := create_dummy_catalog(v_newConnectionId);
      --select CATALOG_NAME INTO v_catalogName FROM MD_CATALOGS WHERE CONNECTION_ID_FK = p_connectionid;
      --v_sql := 'UPDATE MD_CATALOGS SET CATALOG_NAME = ''' || v_catalogName  || ''' WHERE ID = ' || TO_CHAR(v_catalogId);
      --EXECUTE IMMEDIATE v_sql;
      create_dummy_catalogs(p_connectionid, v_newConnectionId, FALSE);

      OPEN curDerivatives(v_newConnectionId);

      LOOP
            FETCH curDerivatives INTO recDerived;
            EXIT WHEN curDerivatives%NOTFOUND;
           --v_numCatalogs := copy_catalogs_cascade(p_connectionid, v_catalogid, v_newConnectionId, p_filter_set);
           v_numCatalogs := copy_catalogs_cascade(p_connectionid, recDerived.src_id, recDerived.derived_id, v_newConnectionId, p_filter_set);
           --FETCH curDerivatives INTO recDerived;
      END LOOP;
      CLOSE curDerivatives;
      v_numDuplicateIndexes := remove_duplicate_indexes(v_newConnectionId);
      v_numDuplicateIndexes := v_numDuplicateIndexes + remove_indexes_used_elsewhere(v_newConnectionId);
  ELSE -- enterprise capture
      create_dummy_catalogs(p_connectionid, v_newConnectionId, TRUE);
      copy_catalogs_cascade_ee(v_newConnectionId);
  END IF;
  COMMIT;
  return v_newConnectionId;
END copy_connection_cascade;

PROCEDURE update_derivative_record(p_orig VARCHAR2, p_new VARCHAR2, p_derivedid MD_DERIVATIVES.DERIVED_ID%TYPE,
p_derivedtype MD_DERIVATIVES.DERIVED_TYPE%TYPE, p_connectionid MD_DERIVATIVES.DERIVED_CONNECTION_ID_FK%TYPE)
IS	
BEGIN
    UPDATE /* APEX46913a */  MD_DERIVATIVES SET TRANSFORMED = C_TRANSFORMED_TRUE, ORIGINAL_IDENTIFIER = p_orig, NEW_IDENTIFIER = p_new
      WHERE DERIVED_ID = p_derivedid
      AND DERIVED_TYPE = p_derivedtype
      AND DERIVED_CONNECTION_ID_FK = p_connectionid;
END update_derivative_record;

/*
 * This procedure is like update_derivative_record except it should be used at name clash stage
 * basically, this will work the same as update_derivative_record except in those cases where
 * there is already a derivative record.  In this latter case, we want ORIGINAL_IDENTIFIER preserved
 * (this is called when there is a possiblity that we've carried out a second transformation
 */
PROCEDURE second_update_derivative(p_orig VARCHAR2, p_new VARCHAR2, p_derivedid MD_DERIVATIVES.DERIVED_ID%TYPE,
p_derivedtype MD_DERIVATIVES.DERIVED_TYPE%TYPE, p_connectionid MD_DERIVATIVES.DERIVED_CONNECTION_ID_FK%TYPE)
IS
  v_firstOriginal MD_DERIVATIVES.ORIGINAL_IDENTIFIER%TYPE;
BEGIN
  -- see if p_orig is already the new identifier
  select /* APEX3d4c8f */  ORIGINAL_IDENTIFIER INTO v_firstOriginal FROM MD_DERIVATIVES
      WHERE DERIVED_ID = p_derivedid
      AND DERIVED_TYPE = p_derivedtype
      AND NEW_IDENTIFIER = p_orig
      AND DERIVED_CONNECTION_ID_FK = p_connectionid;
  if v_firstOriginal IS NULL then
    update_derivative_record(p_orig, p_new, p_derivedid, p_derivedtype, p_connectionid);
  else
    update_derivative_record(v_firstOriginal, p_new, p_derivedid, p_derivedtype, p_connectionid);
  end if;
EXCEPTION
  when NO_DATA_FOUND THEN
    update_derivative_record(p_orig, p_new, p_derivedid, p_derivedtype, p_connectionid);
  WHEN TOO_MANY_ROWS THEN
    dbms_output.put_line(TO_CHAR(p_derivedid) || ' ' || TO_CHAR(p_derivedtype) || ' '|| TO_CHAR(p_connectionid));

END second_update_derivative;

FUNCTION transform_column_identifiers(p_connectionid MD_CONNECTIONS.ID%TYPE,
                                 p_scratchModel BOOLEAN := FALSE) RETURN NAME_AND_COUNT_T
IS
/*
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
    SELECT * FROM MD_COLUMNS
    WHERE TABLE_ID_FK IN
    (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = connid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(COLUMN_NAME) != COLUMN_NAME 
    FOR UPDATE OF COLUMN_NAME;
*/    
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
    SELECT c.*, d.NEW_IDENTIFIER FROM MD_COLUMNS c, MD_DERIVATIVES d
    WHERE (c.ID, d.SRC_ID) IN
    (SELECT DERIVED_ID, SRC_ID FROM MD_DERIVATIVES 
       WHERE SRC_TYPE= C_OBJECTTYPE_COLUMNS AND DERIVED_CONNECTION_ID_FK = connid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(d.NEW_IDENTIFIER) != COLUMN_NAME
    AND d.DERIVATIVE_REASON = C_CONNECTIONTYPE_SCRATCH
    FOR UPDATE OF COLUMN_NAME;
  v_rec v_curs%ROWTYPE;
  v_count INTEGER := 0;
  v_ret NAME_AND_COUNT_T;
  v_newName MD_DERIVATIVES.NEW_IDENTIFIER%TYPE;
BEGIN
  OPEN v_curs(p_connectionid);
  LOOP
    FETCH v_curs INTO v_rec;
    EXIT WHEN v_curs%NOTFOUND;
    v_count := v_count + 1;
    v_newName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_rec.NEW_IDENTIFIER);

    update_derivative_record(v_rec.COLUMN_NAME, v_newName, v_rec.ID, C_OBJECTTYPE_COLUMNS, p_connectionid);    
    IF p_scratchModel = FALSE -- Update md_columns only for non migration estimation models
    THEN
        UPDATE /* APEXb1b33a */  MD_COLUMNS SET COLUMN_NAME = v_newName WHERE CURRENT OF v_curs;
    END IF;

  END LOOP;
  CLOSE v_curs;
  commit;
  return NAME_AND_COUNT_T(C_OBJECTTYPE_COLUMNS, v_count);
  --return v_count;
END transform_column_identifiers;

FUNCTION transform_constraint_idents(p_connectionid MD_CONNECTIONS.ID%TYPE, 
                                     p_scratchModel BOOLEAN := FALSE) RETURN NAME_AND_COUNT_T
IS
/*
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
  SELECT * FROM MD_CONSTRAINTS
  WHERE TABLE_ID_FK IN
    (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = connid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(NAME) != NAME
    FOR UPDATE OF NAME;
*/    
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
  SELECT c.*, d.NEW_IDENTIFIER FROM MD_CONSTRAINTS c, MD_DERIVATIVES d
  WHERE (c.ID, d.SRC_ID) IN
    (SELECT DERIVED_ID, SRC_ID FROM MD_DERIVATIVES 
       WHERE SRC_TYPE = C_OBJECTTYPE_CONSTRAINTS AND DERIVED_CONNECTION_ID_FK = connid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(d.NEW_IDENTIFIER) != c.NAME
    AND d.DERIVATIVE_REASON = C_CONNECTIONTYPE_SCRATCH 
    FOR UPDATE OF NAME;
  v_rec v_curs%ROWTYPE;
  v_count INTEGER := 0;
  v_ret NAME_AND_COUNT_T;
  v_newName MD_DERIVATIVES.NEW_IDENTIFIER%TYPE;
BEGIN
  OPEN v_curs(p_connectionid);
  LOOP
    FETCH v_curs INTO v_rec;
    EXIT WHEN v_curs%NOTFOUND;
    v_count := v_count + 1;
    v_newName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_rec.NEW_IDENTIFIER);

    update_derivative_record(v_rec.NAME, v_newName, v_rec.ID, C_OBJECTTYPE_CONSTRAINTS, p_connectionid);    
    IF p_scratchModel = FALSE
    THEN    
       UPDATE /* APEXf3bef4 */  MD_CONSTRAINTS SET NAME = v_newName WHERE CURRENT OF v_curs;
    END IF;

  END LOOP;
  CLOSE v_curs;
  commit;
  return NAME_AND_COUNT_T(C_OBJECTTYPE_CONSTRAINTS, v_count);
END transform_constraint_idents;

FUNCTION transform_group_identifiers(p_connectionid MD_CONNECTIONS.ID%TYPE,
                          p_scratchModel BOOLEAN := FALSE) RETURN NAME_AND_COUNT_T
IS
/*
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
  SELECT * FROM MD_GROUPS WHERE
   SCHEMA_ID_FK IN
    (SELECT SCHEMA_ID FROM MGV_ALL_SCHEMA WHERE CONNECTION_ID = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(GROUP_NAME) != GROUP_NAME
    FOR UPDATE OF GROUP_NAME;
*/    

  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
  SELECT * FROM MD_GROUPS WHERE
   ID IN
    (SELECT DERIVED_ID FROM MD_DERIVATIVES 
       WHERE SRC_TYPE = C_OBJECTTYPE_GROUPS AND DERIVED_CONNECTION_ID_FK = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(GROUP_NAME) != GROUP_NAME
    FOR UPDATE OF GROUP_NAME;
  v_rec MD_GROUPS%ROWTYPE;
  v_count INTEGER := 0;
  v_ret NAME_AND_COUNT_T;
  v_newName MD_DERIVATIVES.NEW_IDENTIFIER%TYPE;
BEGIN
  OPEN v_curs(p_connectionid);
  LOOP
    FETCH v_curs INTO v_rec;
    EXIT WHEN v_curs%NOTFOUND;
    v_count := v_count + 1;
    v_newName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_rec.GROUP_NAME);

    update_derivative_record(v_rec.GROUP_NAME, v_newName, v_rec.ID, C_OBJECTTYPE_GROUPS, p_connectionid);    
    IF p_scratchModel = FALSE
    THEN    
       UPDATE /* APEX09ecb8 */  MD_GROUPS SET GROUP_NAME = v_newName WHERE CURRENT OF v_curs;
    END IF;

  END LOOP;
  CLOSE v_curs;
  commit;
  return NAME_AND_COUNT_T(C_OBJECTTYPE_GROUPS, v_count);
END transform_group_identifiers;

FUNCTION transform_index_identifiers(p_connectionid MD_CONNECTIONS.ID%TYPE,
                                     p_scratchModel BOOLEAN := FALSE) RETURN NAME_AND_COUNT_T
IS
/*
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
  SELECT * FROM MD_INDEXES WHERE TABLE_ID_FK IN
    (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||INDEX_NAME) != INDEX_NAME
    FOR UPDATE OF INDEX_NAME;
*/    
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
  SELECT i.*, d.NEW_IDENTIFIER FROM MD_INDEXES i, MD_DERIVATIVES d WHERE (i.ID, d.SRC_ID) IN
    (SELECT DERIVED_ID, SRC_ID FROM MD_DERIVATIVES 
      WHERE SRC_TYPE = C_OBJECTTYPE_INDEXES AND DERIVED_CONNECTION_ID_FK = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||d.NEW_IDENTIFIER) != i.INDEX_NAME
    AND d.DERIVATIVE_REASON = C_CONNECTIONTYPE_SCRATCH 
    FOR UPDATE OF INDEX_NAME;
  v_rec v_curs%ROWTYPE;
  v_count INTEGER := 0;
  v_ret NAME_AND_COUNT_T;
  v_newName MD_DERIVATIVES.NEW_IDENTIFIER%TYPE;
BEGIN
  OPEN v_curs(p_connectionid);
  LOOP
    FETCH v_curs INTO v_rec;
    EXIT WHEN v_curs%NOTFOUND;
    v_count := v_count + 1;
    v_newName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||v_rec.NEW_IDENTIFIER);

    update_derivative_record(v_rec.INDEX_NAME, v_newName, v_rec.ID, C_OBJECTTYPE_INDEXES, p_connectionid);    
    IF p_scratchModel = FALSE
    THEN    
        UPDATE /* APEXc5eeb3 */  MD_INDEXES SET INDEX_NAME = v_newName WHERE CURRENT OF v_curs;
    END IF;

  END LOOP;
  commit;
  CLOSE v_curs;
  return NAME_AND_COUNT_T(C_OBJECTTYPE_INDEXES, v_count);
END transform_index_identifiers;

FUNCTION transform_othobj_identifiers(p_connectionid MD_CONNECTIONS.ID%TYPE,
                                          p_scratchModel BOOLEAN := FALSE) RETURN NAME_AND_COUNT_T
IS
/*
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
  SELECT * FROM MD_OTHER_OBJECTS  WHERE SCHEMA_ID_FK IN
    (SELECT SCHEMA_ID FROM MGV_ALL_SCHEMA WHERE CONNECTION_ID = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||NAME) != NAME
    FOR UPDATE OF NAME;
*/    
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
  SELECT * FROM MD_OTHER_OBJECTS  WHERE ID IN
    (SELECT DERIVED_ID FROM MD_DERIVATIVES 
      WHERE SRC_TYPE = C_OBJECTTYPE_OTHER_OBJECTS AND DERIVED_CONNECTION_ID_FK = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||NAME) != NAME
    FOR UPDATE OF NAME;
  v_rec MD_OTHER_OBJECTS%ROWTYPE;
  v_count INTEGER := 0;
  v_ret NAME_AND_COUNT_T;
  v_newName MD_DERIVATIVES.NEW_IDENTIFIER%TYPE;
BEGIN
  OPEN v_curs(p_connectionid);
  LOOP
    FETCH v_curs INTO v_rec;
    EXIT WHEN v_curs%NOTFOUND;
    v_count := v_count + 1;
    v_newName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||v_rec.NAME);

    update_derivative_record(v_rec.NAME, v_newName, v_rec.ID, C_OBJECTTYPE_OTHER_OBJECTS, p_connectionid);    
    IF p_scratchModel = FALSE
    THEN        
       UPDATE /* APEXb71a65 */  MD_OTHER_OBJECTS SET NAME = v_newName WHERE CURRENT OF v_curs;
    END IF;

  END LOOP;
  CLOSE v_curs;
  commit;
  return NAME_AND_COUNT_T(C_OBJECTTYPE_OTHER_OBJECTS, v_count);
END transform_othobj_identifiers;

FUNCTION transform_package_identifiers(p_connectionid MD_CONNECTIONS.ID%TYPE,
                                        p_scratchModel BOOLEAN := FALSE) RETURN NAME_AND_COUNT_T
IS
/*
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
  SELECT * FROM MD_PACKAGES  WHERE SCHEMA_ID_FK IN
    (SELECT SCHEMA_ID FROM MGV_ALL_SCHEMA WHERE CONNECTION_ID = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||NAME) != NAME
    FOR UPDATE OF NAME;
*/    
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
  SELECT * FROM MD_PACKAGES  WHERE ID IN
    (SELECT DERIVED_ID FROM MD_DERIVATIVES 
    WHERE SRC_TYPE = C_OBJECTTYPE_PACKAGES AND DERIVED_CONNECTION_ID_FK = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||NAME) != NAME
    FOR UPDATE OF NAME;
  v_rec MD_PACKAGES%ROWTYPE;
  v_count INTEGER := 0;
  v_ret NAME_AND_COUNT_T;
  v_newName MD_DERIVATIVES.NEW_IDENTIFIER%TYPE;
BEGIN
  OPEN v_curs(p_connectionid);
  LOOP
    FETCH v_curs INTO v_rec;
    EXIT WHEN v_curs%NOTFOUND;
    v_count := v_count + 1;
    v_newName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||v_rec.NAME);

    update_derivative_record(v_rec.NAME, v_newName, v_rec.ID, C_OBJECTTYPE_PACKAGES, p_connectionid);    
    IF p_scratchModel = FALSE
    THEN        
       UPDATE /* APEX7aeacf */  MD_PACKAGES SET NAME = v_newName WHERE CURRENT OF v_curs;
    END IF;

  END LOOP;
  CLOSE v_curs;
  commit;
  return NAME_AND_COUNT_T(C_OBJECTTYPE_PACKAGES, v_count);
END transform_package_identifiers;

FUNCTION transform_schema_identifiers(p_connectionid MD_CONNECTIONS.ID%TYPE,
                                         p_scratchModel BOOLEAN := FALSE) RETURN NAME_AND_COUNT_T
IS
/*
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
  SELECT * FROM MD_SCHEMAS WHERE ID IN
    (SELECT SCHEMA_ID FROM MGV_ALL_SCHEMA WHERE CONNECTION_ID = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(NAME) != NAME
    FOR UPDATE OF NAME;
*/    
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
  SELECT s.*, d.NEW_IDENTIFIER FROM MD_SCHEMAS s, MD_DERIVATIVES d WHERE (s.ID, d.SRC_ID) IN
    (SELECT DERIVED_ID, SRC_ID FROM MD_DERIVATIVES 
      WHERE SRC_TYPE = C_OBJECTTYPE_SCHEMAS AND DERIVED_CONNECTION_ID_FK = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(d.NEW_IDENTIFIER) != NAME 
    AND d.DERIVATIVE_REASON = C_CONNECTIONTYPE_SCRATCH 
    FOR UPDATE OF NAME;
  v_rec v_curs%ROWTYPE;
  v_count INTEGER := 0;
  v_ret NAME_AND_COUNT_T;
  v_newName MD_DERIVATIVES.NEW_IDENTIFIER%TYPE;
BEGIN
  OPEN v_curs(p_connectionid);
  LOOP
    FETCH v_curs INTO v_rec;
    EXIT WHEN v_curs%NOTFOUND;
    v_count := v_count + 1;
    v_newName:= MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_rec.NEW_IDENTIFIER);

    update_derivative_record(v_rec.NAME, v_newName, v_rec.ID, C_OBJECTTYPE_SCHEMAS, p_connectionid);    
    IF p_scratchModel = FALSE
    THEN        
       UPDATE /* APEX29798d */  MD_SCHEMAS SET NAME = v_newName WHERE CURRENT OF v_curs;
    END IF;

  END LOOP;
  CLOSE v_curs;
  commit;
  return NAME_AND_COUNT_T(C_OBJECTTYPE_SCHEMAS, v_count);
END transform_schema_identifiers;

FUNCTION transform_sequence_identifiers(p_connectionid MD_CONNECTIONS.ID%TYPE,
                                           p_scratchModel BOOLEAN := FALSE) RETURN NAME_AND_COUNT_T
IS
/*
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
  SELECT * FROM MD_SEQUENCES WHERE SCHEMA_ID_FK IN
    (SELECT SCHEMA_ID FROM MGV_ALL_SCHEMA WHERE CONNECTION_ID = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||NAME) != NAME
    FOR UPDATE OF NAME;
*/    
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
  SELECT s.*, d.NEW_IDENTIFIER FROM MD_SEQUENCES s, MD_DERIVATIVES d WHERE (s.ID, d.SRC_ID) IN
    (SELECT DERIVED_ID, SRC_ID FROM MD_DERIVATIVES 
      WHERE SRC_TYPE = C_OBJECTTYPE_SEQUENCES AND DERIVED_CONNECTION_ID_FK = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||d.NEW_IDENTIFIER) != NAME
    AND d.DERIVATIVE_REASON = C_CONNECTIONTYPE_SCRATCH
    FOR UPDATE OF NAME;
  v_rec v_curs%ROWTYPE;
  v_count INTEGER := 0;
  v_ret NAME_AND_COUNT_T;
  v_newName MD_DERIVATIVES.NEW_IDENTIFIER%TYPE;
BEGIN
  OPEN v_curs(p_connectionid);
  LOOP
    FETCH v_curs INTO v_rec;
    EXIT WHEN v_curs%NOTFOUND;
    v_count := v_count + 1;
    v_newName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||v_rec.NEW_IDENTIFIER);

    update_derivative_record(v_rec.NAME, v_newName, v_rec.ID, C_OBJECTTYPE_SEQUENCES, p_connectionid);    
    IF p_scratchModel = FALSE
    THEN        
       UPDATE /* APEXb2479c */  MD_SEQUENCES SET NAME = v_newName WHERE CURRENT OF v_curs;
    END IF;

  END LOOP;
  CLOSE v_curs;
  commit;
  return NAME_AND_COUNT_T(C_OBJECTTYPE_SEQUENCES, v_count);
END transform_sequence_identifiers;

FUNCTION transform_sproc_identifiers(p_connectionid MD_CONNECTIONS.ID%TYPE,
                                         p_scratchModel BOOLEAN := FALSE) RETURN NAME_AND_COUNT_T
IS
/*
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
  SELECT * FROM MD_STORED_PROGRAMS WHERE SCHEMA_ID_FK IN
    (SELECT SCHEMA_ID FROM MGV_ALL_SCHEMA WHERE CONNECTION_ID = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||NAME) != NAME
    FOR UPDATE OF NAME;
*/    
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
  SELECT sp.*, d.NEW_IDENTIFIER FROM MD_STORED_PROGRAMS sp, MD_DERIVATIVES d WHERE (sp.ID, d.SRC_ID) IN
    (SELECT DERIVED_ID, SRC_ID FROM MD_DERIVATIVES WHERE SRC_TYPE = C_OBJECTTYPE_STORED_PROGRAMS AND DERIVED_CONNECTION_ID_FK = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||d.NEW_IDENTIFIER) != sp.NAME 
    AND d.DERIVATIVE_REASON = C_CONNECTIONTYPE_SCRATCH 
    FOR UPDATE OF NAME;
  v_rec v_curs%ROWTYPE;
  v_count INTEGER := 0;
  v_ret NAME_AND_COUNT_T;
  v_newName MD_DERIVATIVES.NEW_IDENTIFIER%TYPE;
BEGIN
  OPEN v_curs(p_connectionid);
  LOOP
    FETCH v_curs INTO v_rec;
    EXIT WHEN v_curs%NOTFOUND;
    v_count := v_count + 1;
    v_newName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||v_rec.NEW_IDENTIFIER);

    update_derivative_record(v_rec.NAME, v_newName, v_rec.ID, C_OBJECTTYPE_STORED_PROGRAMS, p_connectionid);    
    IF p_scratchModel = FALSE
    THEN        
       UPDATE /* APEX62fa1b */  MD_STORED_PROGRAMS SET NAME = v_newName WHERE CURRENT OF v_curs;
    END IF;

  END LOOP;
  CLOSE v_curs;
  commit;
  return NAME_AND_COUNT_T(C_OBJECTTYPE_STORED_PROGRAMS, v_count);
END transform_sproc_identifiers;

FUNCTION transform_synonym_identifiers(p_connectionid MD_CONNECTIONS.ID%TYPE,
                                       p_scratchModel BOOLEAN := FALSE) RETURN NAME_AND_COUNT_T
IS
/*
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
  SELECT * FROM MD_SYNONYMS WHERE SCHEMA_ID_FK IN
    (SELECT SCHEMA_ID FROM MGV_ALL_SCHEMA WHERE CONNECTION_ID = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||NAME) != NAME
    FOR UPDATE OF NAME;
*/    
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
  SELECT * FROM MD_SYNONYMS WHERE ID IN
    (SELECT DERIVED_ID FROM MD_DERIVATIVES 
       WHERE SRC_TYPE =  C_OBJECTTYPE_SYNONYMS AND DERIVED_CONNECTION_ID_FK = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||NAME) != NAME
    FOR UPDATE OF NAME;
  v_rec MD_SYNONYMS%ROWTYPE;
  v_count INTEGER := 0;
  v_ret NAME_AND_COUNT_T;
  v_newName MD_DERIVATIVES.NEW_IDENTIFIER%TYPE;
BEGIN
  OPEN v_curs(p_connectionid);
  LOOP
    FETCH v_curs INTO v_rec;
    EXIT WHEN v_curs%NOTFOUND;
    v_count := v_count + 1;
    v_newName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||v_rec.NAME);

    update_derivative_record(v_rec.NAME, v_newName, v_rec.ID, C_OBJECTTYPE_SYNONYMS, p_connectionid);    
    IF p_scratchModel = FALSE
    THEN        
       UPDATE /* APEX294351 */  MD_SYNONYMS SET NAME = v_newName WHERE CURRENT OF v_curs;
    END IF;

  END LOOP;
  CLOSE v_curs;
  commit;
  return NAME_AND_COUNT_T(C_OBJECTTYPE_SYNONYMS, v_count);
END transform_synonym_identifiers;

FUNCTION transform_table_identifiers(p_connectionid MD_CONNECTIONS.ID%TYPE,
                                     p_scratchModel BOOLEAN := FALSE) RETURN NAME_AND_COUNT_T
IS
/*
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
  SELECT * FROM MD_TABLES WHERE SCHEMA_ID_FK IN
    (SELECT SCHEMA_ID FROM MGV_ALL_SCHEMA WHERE CONNECTION_ID = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||TABLE_NAME) != TABLE_NAME
    FOR UPDATE OF TABLE_NAME;
*/    
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
  SELECT t.*, d.NEW_IDENTIFIER FROM MD_TABLES t, MD_DERIVATIVES d WHERE (t.ID, d.SRC_ID) IN
    (SELECT DERIVED_ID, SRC_ID FROM MD_DERIVATIVES 
      WHERE SRC_TYPE = C_OBJECTTYPE_TABLES AND DERIVED_CONNECTION_ID_FK = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||d.NEW_IDENTIFIER) != TABLE_NAME 
    AND d.DERIVATIVE_REASON = C_CONNECTIONTYPE_SCRATCH 
    FOR UPDATE OF TABLE_NAME;
  v_rec v_curs%ROWTYPE;
  v_count INTEGER := 0;
  v_ret NAME_AND_COUNT_T;
  v_newName MD_DERIVATIVES.NEW_IDENTIFIER%TYPE;
BEGIN
  OPEN v_curs(p_connectionid);
  LOOP
    FETCH v_curs INTO v_rec;
    EXIT WHEN v_curs%NOTFOUND;
    v_count := v_count + 1;
    v_newName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||v_rec.NEW_IDENTIFIER);

    update_derivative_record(v_rec.TABLE_NAME, v_newName, v_rec.ID, C_OBJECTTYPE_TABLES, p_connectionid);    
    IF p_scratchModel = FALSE
    THEN        
       UPDATE /* APEX2d2098 */  MD_TABLES SET TABLE_NAME = v_newName WHERE CURRENT OF v_curs;
    END IF;

  END LOOP;
  CLOSE v_curs;
  commit;
  return NAME_AND_COUNT_T(C_OBJECTTYPE_TABLES, v_count);
END transform_table_identifiers;

FUNCTION transform_view_identifiers(p_connectionid MD_CONNECTIONS.ID%TYPE,
                                     p_scratchModel BOOLEAN := FALSE) RETURN NAME_AND_COUNT_T
IS
/*
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
  SELECT * FROM MD_VIEWS WHERE SCHEMA_ID_FK IN
    (SELECT SCHEMA_ID FROM MGV_ALL_SCHEMA WHERE CONNECTION_ID = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||VIEW_NAME) != VIEW_NAME
    FOR UPDATE OF VIEW_NAME;
*/    
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
  SELECT v.*, d.NEW_IDENTIFIER FROM MD_VIEWS v, MD_DERIVATIVES d WHERE (v.ID, d.SRC_ID) IN
    (SELECT DERIVED_ID, SRC_ID FROM MD_DERIVATIVES WHERE SRC_TYPE = C_OBJECTTYPE_VIEWS AND DERIVED_CONNECTION_ID_FK = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||d.NEW_IDENTIFIER) != VIEW_NAME
    AND d.DERIVATIVE_REASON = C_CONNECTIONTYPE_SCRATCH 
    FOR UPDATE OF VIEW_NAME;
  v_rec v_curs%ROWTYPE;
  v_count INTEGER := 0;
  v_ret NAME_AND_COUNT_T;
  v_newName MD_DERIVATIVES.NEW_IDENTIFIER%TYPE;
BEGIN
  OPEN v_curs(p_connectionid);
  LOOP
    FETCH v_curs INTO v_rec;
    EXIT WHEN v_curs%NOTFOUND;
    v_count := v_count + 1;
    v_newName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||v_rec.NEW_IDENTIFIER);

    update_derivative_record(v_rec.VIEW_NAME, v_newName, v_rec.ID, C_OBJECTTYPE_VIEWS, p_connectionid);    
    IF p_scratchModel = FALSE
    THEN        
       UPDATE /* APEXba7a16 */  MD_VIEWS SET VIEW_NAME = v_newName WHERE CURRENT OF v_curs;
    END IF;

  END LOOP;
  CLOSE v_curs;
  commit;
  return NAME_AND_COUNT_T(C_OBJECTTYPE_VIEWS, v_count);
END transform_view_identifiers;

FUNCTION transform_tablespace_idents(p_connectionid MD_CONNECTIONS.ID%TYPE,
                                     p_scratchModel BOOLEAN := FALSE) RETURN NAME_AND_COUNT_T
IS
/*
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
  SELECT * FROM MD_TABLESPACES WHERE SCHEMA_ID_FK IN
    (SELECT SCHEMA_ID FROM MGV_ALL_SCHEMA WHERE CONNECTION_ID = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(TABLESPACE_NAME) != TABLESPACE_NAME
    FOR UPDATE OF TABLESPACE_NAME;
*/    
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
  SELECT * FROM MD_TABLESPACES WHERE ID IN
    (SELECT DERIVED_ID FROM MD_DERIVATIVES 
      WHERE SRC_TYPE = C_OBJECTTYPE_TABLESPACES AND DERIVED_CONNECTION_ID_FK = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(TABLESPACE_NAME) != TABLESPACE_NAME
    FOR UPDATE OF TABLESPACE_NAME;
  v_rec MD_TABLESPACES%ROWTYPE;
  v_count INTEGER := 0;
  v_ret NAME_AND_COUNT_T;
  v_newName MD_DERIVATIVES.NEW_IDENTIFIER%TYPE;
BEGIN
  OPEN v_curs(p_connectionid);
  LOOP
    FETCH v_curs INTO v_rec;
    EXIT WHEN v_curs%NOTFOUND;
    v_count := v_count + 1;
    v_newName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_rec.TABLESPACE_NAME);

    update_derivative_record(v_rec.TABLESPACE_NAME, v_newName, v_rec.ID, C_OBJECTTYPE_TABLESPACES, p_connectionid);    
    IF p_scratchModel = FALSE
    THEN        
       UPDATE /* APEXf7e330 */  MD_TABLESPACES SET TABLESPACE_NAME = v_newName WHERE CURRENT OF v_curs;
    END IF;

  END LOOP;
  CLOSE v_curs;
  commit;
  return NAME_AND_COUNT_T(C_OBJECTTYPE_TABLESPACES, v_count);
END transform_tablespace_idents;

FUNCTION transform_trigger_identifiers(p_connectionid MD_CONNECTIONS.ID%TYPE,
                                       p_scratchModel BOOLEAN := FALSE) RETURN NAME_AND_COUNT_T
IS
/*
  CURSOR v_curs IS 
  SELECT * FROM MD_TRIGGERS  WHERE TABLE_OR_VIEW_ID_FK IN
    (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||TRIGGER_NAME) != TRIGGER_NAME
    FOR UPDATE OF TRIGGER_NAME;
  CURSOR v_view_trigger_curs IS 
    SELECT * FROM MD_TRIGGERS  WHERE TABLE_OR_VIEW_ID_FK IN
    (SELECT VIEW_ID FROM MGV_ALL_VIEWS WHERE CONNECTION_ID =  p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||TRIGGER_NAME) != TRIGGER_NAME
    FOR UPDATE OF TRIGGER_NAME;
*/    
  CURSOR v_curs IS 
  SELECT t.*, d.NEW_IDENTIFIER FROM MD_TRIGGERS t, MD_DERIVATIVES d WHERE (t.ID, d.SRC_ID) IN
    (SELECT DERIVED_ID, SRC_ID FROM MD_DERIVATIVES 
      WHERE SRC_TYPE =  C_OBJECTTYPE_TRIGGERS AND DERIVED_CONNECTION_ID_FK = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||d.NEW_IDENTIFIER) != t.TRIGGER_NAME
    AND d.DERIVATIVE_REASON = C_CONNECTIONTYPE_SCRATCH
    FOR UPDATE OF TRIGGER_NAME;

  v_rec v_curs%ROWTYPE;
  v_count INTEGER := 0;
  v_ret NAME_AND_COUNT_T;
  v_newName MD_DERIVATIVES.NEW_IDENTIFIER%TYPE;
BEGIN
  OPEN v_curs;
  LOOP
    FETCH v_curs INTO v_rec;
    EXIT WHEN v_curs%NOTFOUND;
    v_count := v_count + 1;
    v_newName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||v_rec.NEW_IDENTIFIER);

    update_derivative_record(v_rec.TRIGGER_NAME, v_newName, v_rec.ID, C_OBJECTTYPE_TRIGGERS, p_connectionid);
    IF p_scratchModel = FALSE
    THEN        
       UPDATE /* APEX1343ad */  MD_TRIGGERS SET TRIGGER_NAME = v_newName WHERE CURRENT OF v_curs;
    END IF;       

  END LOOP;
  CLOSE v_curs;
  /*
  OPEN v_view_trigger_curs;
  LOOP
    FETCH v_view_trigger_curs INTO v_rec;
    EXIT WHEN v_view_trigger_curs%NOTFOUND;
    v_count := v_count + 1;
    v_newName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||v_rec.TRIGGER_NAME);

    IF p_scratchModel = FALSE
    THEN        
       UPDATE MD_TRIGGERS SET TRIGGER_NAME = v_newName WHERE CURRENT OF v_view_trigger_curs;
    END IF;

    update_derivative_record(v_rec.TRIGGER_NAME, v_newName, v_rec.ID, C_OBJECTTYPE_TRIGGERS, p_connectionid);
  END LOOP;
  CLOSE v_view_trigger_curs;
  */
  commit;
  return NAME_AND_COUNT_T(C_OBJECTTYPE_TRIGGERS, v_count);
END transform_trigger_identifiers;

FUNCTION transform_uddt_identifiers(p_connectionid MD_CONNECTIONS.ID%TYPE,
                      p_scratchModel BOOLEAN := FALSE) RETURN NAME_AND_COUNT_T
IS
/*
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
  SELECT * FROM MD_USER_DEFINED_DATA_TYPES WHERE SCHEMA_ID_FK IN
    (SELECT SCHEMA_ID FROM MGV_ALL_SCHEMA WHERE CONNECTION_ID = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||DATA_TYPE_NAME) != DATA_TYPE_NAME
    FOR UPDATE OF DATA_TYPE_NAME;
*/    
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
  SELECT * FROM MD_USER_DEFINED_DATA_TYPES WHERE ID IN
    (SELECT DERIVED_ID FROM MD_DERIVATIVES WHERE SRC_TYPE = C_OBJECTTYPE_UDDT AND DERIVED_CONNECTION_ID_FK = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||DATA_TYPE_NAME) != DATA_TYPE_NAME
    FOR UPDATE OF DATA_TYPE_NAME;
  v_rec MD_USER_DEFINED_DATA_TYPES%ROWTYPE;
  v_count INTEGER := 0;
  v_ret NAME_AND_COUNT_T;
  v_newName MD_DERIVATIVES.NEW_IDENTIFIER%TYPE;
BEGIN
  OPEN v_curs(p_connectionid);
  LOOP
    FETCH v_curs INTO v_rec;
    EXIT WHEN v_curs%NOTFOUND;
    v_count := v_count + 1;
    v_newName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_prefixName||v_rec.DATA_TYPE_NAME);

    update_derivative_record(v_rec.DATA_TYPE_NAME, v_newName, v_rec.ID, C_OBJECTTYPE_UDDT, p_connectionid);    
    IF p_scratchModel = FALSE
    THEN        
       UPDATE /* APEX656142 */  MD_USER_DEFINED_DATA_TYPES SET DATA_TYPE_NAME = v_newName WHERE CURRENT OF v_curs;
    END IF;

  END LOOP;
  CLOSE v_curs;
  commit;
  return NAME_AND_COUNT_T(C_OBJECTTYPE_UDDT, v_count);
END transform_uddt_identifiers;

FUNCTION transform_user_identifiers(p_connectionid MD_CONNECTIONS.ID%TYPE,
                                    p_scratchModel BOOLEAN := FALSE) RETURN NAME_AND_COUNT_T
IS
/*
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
  SELECT * FROM MD_USERS WHERE SCHEMA_ID_FK IN
    (SELECT SCHEMA_ID FROM MGV_ALL_SCHEMA WHERE CONNECTION_ID = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(USERNAME) != USERNAME
    FOR UPDATE OF USERNAME;
*/    
  CURSOR v_curs(connid MD_CONNECTIONS.ID%TYPE) IS 
  SELECT * FROM MD_USERS WHERE ID IN
    (SELECT DERIVED_ID FROM MD_DERIVATIVES WHERE SRC_TYPE = C_OBJECTTYPE_USERS AND DERIVED_CONNECTION_ID_FK = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(USERNAME) != USERNAME
    FOR UPDATE OF USERNAME;
  v_rec MD_USERS%ROWTYPE;
  v_count INTEGER := 0;
  v_ret NAME_AND_COUNT_T;
  v_newName MD_DERIVATIVES.NEW_IDENTIFIER%TYPE;
BEGIN
  OPEN v_curs(p_connectionid);
  LOOP
    FETCH v_curs INTO v_rec;
    EXIT WHEN v_curs%NOTFOUND;
    v_count := v_count + 1;
    v_newName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_rec.USERNAME);

    update_derivative_record(v_rec.USERNAME, v_newName, v_rec.ID, C_OBJECTTYPE_USERS, p_connectionid);    
    IF p_scratchModel = FALSE
    THEN        
       UPDATE /* APEXf2ee88 */  MD_USERS SET USERNAME = v_newName WHERE CURRENT OF v_curs;
    END IF;

  END LOOP;
  CLOSE v_curs;
  commit;
  return NAME_AND_COUNT_T(C_OBJECTTYPE_USERS, v_count);
END transform_user_identifiers;

PROCEDURE rename_duplicate_index_names(p_connectionid MD_CONNECTIONS.ID%TYPE, p_scratchModel BOOLEAN := FALSE)
IS
    CURSOR v_curs IS
    select * from md_derivatives a 
          where a.derived_connection_id_fk = p_connectionid
                and 1 < (select count(*) 
                          from md_derivatives b 
                              where a.new_identifier = b.new_identifier 
                                  and a.derived_type='MD_INDEXES'
                                      and a.derived_connection_id_fk = b.derived_connection_id_fk)
                                      order by new_identifier;

  v_row MD_DERIVATIVES%ROWTYPE;
  v_newName MD_INDEXES.INDEX_NAME%TYPE;

  v_id MD_DERIVATIVES.DERIVED_ID%TYPE;

  v_curName MD_DERIVATIVES.NEW_IDENTIFIER%TYPE;
  v_count NUMBER := 1;
  v_maxIdentLen NUMBER := 30;
BEGIN
  v_curName := 'dsa;lkjsd;alskj;';
  v_maxIdentLen := MIGRATION_TRANSFORMER.GET_ORACLE_LONG_IDENTIFIER();
  OPEN v_curs;
  LOOP
    FETCH v_curs INTO v_row;
    EXIT WHEN v_curs%NOTFOUND;


   IF UPPER(v_row.NEW_IDENTIFIER) = UPPER(v_curName) THEN
      v_newName := MIGRATION_TRANSFORMER.ADD_SUFFIX(v_row.NEW_IDENTIFIER, '_' || TO_CHAR(v_count), v_maxIdentLen);
      v_count := v_count + 1;

      if p_scratchModel = FALSE
      THEN
         update /* APEX6007dc */  MD_INDEXES SET index_name = v_newName where id = v_row.DERIVED_ID;
      END IF;
      second_update_derivative(v_row.NEW_IDENTIFIER, v_newName, v_row.DERIVED_ID, C_OBJECTTYPE_INDEXES, p_connectionid);
    else
      v_curName := v_row.NEW_IDENTIFIER;
      v_count := 1;
    END IF;
  END LOOP;
  CLOSE v_curs;
  commit;
END rename_duplicate_index_names;

PROCEDURE fixup_duplicate_identifier(p_connectionid MD_CONNECTIONS.ID%TYPE, 
                                      p_mdrec_id MD_DERIVATIVES.ID%TYPE,
                                      p_derived_type MD_DERIVATIVES.DERIVED_TYPE%TYPE,
                                      p_derived_id MD_DERIVATIVES.DERIVED_ID%TYPE,
                                      p_new_identifier MD_DERIVATIVES.NEW_IDENTIFIER%TYPE,
                                      p_suffix INTEGER, 
                                      p_scratchModel BOOLEAN := FALSE)
IS
	v_transform_identifier MD_DERIVATIVES.NEW_IDENTIFIER%TYPE;
	v_did_a_transform CHAR(1) := 'Y';
	v_maxIdentLen NUMBER := 30;
	--v_underscoresuffixsize NUMBER;
	--v_underscoresuffix VARCHAR2(100);
  --v_sizebeforeprefix NUMBER;
BEGIN
  --v_underscoresuffix := '_' || TO_CHAR(p_suffix);
  --v_underscoresuffixsize := LENGTH(v_underscoresuffix);
  --v_sizebeforeprefix := 30 - v_underscoresuffixsize;
  v_maxIdentLen := MIGRATION_TRANSFORMER.GET_ORACLE_LONG_IDENTIFIER();
  v_transform_identifier := MIGRATION_TRANSFORMER.ADD_SUFFIX(p_new_identifier, '_' || TO_CHAR(p_suffix) , v_maxIdentLen);

  IF p_scratchModel = FALSE
  THEN
     CASE p_derived_type
      WHEN C_OBJECTTYPE_CONNECTIONS THEN
        UPDATE /* APEXe75c92 */  MD_CONNECTIONS SET NAME = v_transform_identifier WHERE ID = p_derived_id;
      WHEN C_OBJECTTYPE_CATALOGS THEN
        UPDATE /* APEX9d59e6 */  MD_CATALOGS SET CATALOG_NAME = v_transform_identifier WHERE ID = p_derived_id;
      WHEN C_OBJECTTYPE_SCHEMAS THEN
        UPDATE /* APEXf18c9c */  MD_SCHEMAS SET NAME = v_transform_identifier WHERE ID = p_derived_id;
      WHEN C_OBJECTTYPE_TABLES THEN
        UPDATE /* APEX4e4a3a */  MD_TABLES SET TABLE_NAME = v_transform_identifier WHERE ID = p_derived_id;
      WHEN C_OBJECTTYPE_CONSTRAINTS THEN
        UPDATE /* APEXacb055 */  MD_CONSTRAINTS SET NAME = v_transform_identifier WHERE ID = p_derived_id;
      WHEN C_OBJECTTYPE_INDEXES THEN
        UPDATE /* APEX9a6ec3 */  MD_INDEXES SET INDEX_NAME = v_transform_identifier WHERE ID = p_derived_id;
      WHEN C_OBJECTTYPE_TRIGGERS THEN
        UPDATE /* APEXbfe20a */  MD_TRIGGERS SET TRIGGER_NAME = v_transform_identifier WHERE ID = p_derived_id;
      WHEN C_OBJECTTYPE_VIEWS THEN
        UPDATE /* APEXf05c07 */  MD_VIEWS SET VIEW_NAME = v_transform_identifier WHERE ID = p_derived_id;
      WHEN C_OBJECTTYPE_USERS THEN
        UPDATE /* APEX21fb2b */  MD_USERS SET USERNAME = v_transform_identifier WHERE ID = p_derived_id;
      WHEN C_OBJECTTYPE_GROUPS THEN
        UPDATE /* APEX3bb2ec */  MD_GROUPS SET GROUP_NAME  = v_transform_identifier WHERE ID = p_derived_id;
      WHEN C_OBJECTTYPE_OTHER_OBJECTS THEN
        UPDATE /* APEXee949f */  MD_OTHER_OBJECTS SET NAME = v_transform_identifier WHERE ID = p_derived_id;
      WHEN C_OBJECTTYPE_TABLESPACES THEN
        UPDATE /* APEX601b91 */  MD_TABLESPACES SET TABLESPACE_NAME  = v_transform_identifier WHERE ID = p_derived_id;
      WHEN C_OBJECTTYPE_UDDT THEN
        UPDATE /* APEXa954ee */  MD_USER_DEFINED_DATA_TYPES SET DATA_TYPE_NAME  = v_transform_identifier WHERE ID = p_derived_id;
      WHEN C_OBJECTTYPE_STORED_PROGRAMS THEN
        UPDATE /* APEX58551f */  MD_STORED_PROGRAMS SET NAME = v_transform_identifier WHERE ID = p_derived_id;
      WHEN C_OBJECTTYPE_PACKAGES THEN
        UPDATE /* APEX4639d1 */  MD_PACKAGES SET NAME = v_transform_identifier WHERE ID = p_derived_id;
      WHEN C_OBJECTTYPE_SYNONYMS THEN
        UPDATE /* APEXa96fbb */  MD_SYNONYMS SET NAME = v_transform_identifier WHERE ID = p_derived_id;
      WHEN C_OBJECTTYPE_SEQUENCES THEN
        UPDATE /* APEX9aa6b2 */  MD_SEQUENCES SET NAME = v_transform_identifier WHERE ID = p_derived_id;
      ELSE
        -- Handle column namespace here.
        IF SUBSTR(P_DERIVED_TYPE,1, LENGTH(C_OBJECTTYPE_COLUMNS)) = C_OBJECTTYPE_COLUMNS THEN
          UPDATE /* APEXb3a512 */  MD_COLUMNS SET COLUMN_NAME = v_transform_identifier WHERE ID = p_derived_id;
        ELSE
          v_did_a_transform := 'N';
        END IF;
      END CASE;
  END IF; -- end if scratch model

	IF v_did_a_transform = 'Y' THEN
	  UPDATE /* APEX247405 */  MD_DERIVATIVES SET NEW_IDENTIFIER = v_transform_identifier WHERE ID = p_mdrec_id;
	  commit;
    END IF;
    commit;
END fixup_duplicate_identifier;

FUNCTION getClashCount(p_connectionid MD_CONNECTIONS.ID%TYPE) RETURN INTEGER 
IS
  v_clashCount INTEGER;
BEGIN
  SELECT /* APEXf4178c */  COUNT(*) INTO v_clashCount FROM md_derivatives a
    where rowid > (
      select min(rowid) from md_derivatives b
      where
        b.derived_connection_id_fk = p_connectionid
        AND b.derived_connection_id_fk = a.derived_connection_id_fk
        AND UPPER(b.new_identifier) = UPPER(a.new_identifier)--  Uppercasing the name so that case sensitve names are caught (see bug 6922052)
        AND b.derived_object_namespace = a.derived_object_namespace);
  RETURN v_clashCount;
END getClashCount;

PROCEDURE transform_clashes(p_connectionid MD_CONNECTIONS.ID%TYPE, p_scratchModel BOOLEAN := FALSE)
IS
  CURSOR v_curs IS
    select id,derived_type, derived_id, UPPER(new_identifier) --  Uppercasing the name so that case sensitve names are caught (see bug 6922052)
    from md_derivatives a
    where rowid > (
      select min(rowid) from md_derivatives b
      where
        b.derived_connection_id_fk = p_connectionid
        AND b.derived_connection_id_fk = a.derived_connection_id_fk
        AND UPPER(b.new_identifier) = UPPER(a.new_identifier) --  Uppercasing the name so that case sensitve names are caught (see bug 6922052)
        AND b.derived_object_namespace = a.derived_object_namespace)
        ORDER BY new_identifier, derived_type;
  v_derived_type MD_DERIVATIVES.DERIVED_TYPE%TYPE;
  v_curr_type v_derived_type%TYPE := '~~dasdddfl;';
  v_derived_id MD_DERIVATIVES.DERIVED_ID%TYPE;
  v_new_identifier MD_DERIVATIVES.NEW_IDENTIFIER%TYPE;
  v_curr_identifier v_new_identifier%TYPE := '~~~~asdasnc';
  v_suffix INTEGER := 0;
  v_innerSuffix INTEGER;
  v_clashCount INTEGER;
  v_mdrec_id MD_DERIVATIVES.ID%TYPE;
BEGIN

  rename_duplicate_index_names(p_connectionid, p_scratchModel);

  v_clashCount := getClashCount(p_connectionid);
  WHILE v_clashCount > 0 
  LOOP
	v_suffix := v_suffix + 1;
	v_innerSuffix := v_suffix; 
    -- Now lets see if there are any identifier clashes
    OPEN v_curs;
    LOOP 
      FETCH v_curs into v_mdrec_id, v_derived_type, v_derived_id, v_new_identifier;
      EXIT WHEN v_curs%NOTFOUND;
 	  IF v_derived_type = v_curr_type AND v_new_identifier = v_curr_identifier THEN
		  v_innerSuffix := v_innerSuffix + 1;
	  else
		  v_curr_type := v_derived_type;
		  v_curr_identifier := v_new_identifier;
	  END IF;
      -- We have to fix up all of these identifiers
      fixup_duplicate_identifier(p_connectionid, v_mdrec_id, v_derived_type, v_derived_id, v_new_identifier, v_innerSuffix, p_scratchModel);
    END LOOP;
	CLOSE v_curs;
    v_clashCount := getClashCount(p_connectionid);
  END LOOP;
END transform_clashes;

FUNCTION getDuplicateIdentifierID(p_connectionid MD_CONNECTIONS.ID%TYPE, v_duplicateIdentifier md_derivatives.new_identifier%TYPE) RETURN NUMBER 
IS 
  v_md_derivative_id NUMBER;
BEGIN
 select a.id into v_md_derivative_id from md_derivatives a, mgv_all_details m
      where
        a.derived_connection_id_fk = p_connectionid    
         AND m.objname = a.original_identifier
         and a.derived_connection_id_fk = m.connid
         and m.capturedorconverted = 'CONVERTED'
          AND m.objtype = a.derived_type 
        and m.objid = a.derived_id 
        AND a.original_identifier = v_duplicateIdentifier
        and a.derived_type not in ('MD_COLUMNS')
        and rownum = 1;
return v_md_derivative_id;
end getDuplicateIdentifierID;

FUNCTION isDuplicateIdentifier(p_connectionid MD_CONNECTIONS.ID%TYPE, v_duplicateIdentifier md_derivatives.new_identifier%TYPE) RETURN CHAR 
IS 
  v_recordExists CHAR;
BEGIN

 select case 
            when exists (select 1 
                         from md_derivatives a, mgv_all_details m 
                         where a.new_identifier = v_duplicateIdentifier and a.derived_connection_id_fk = p_connectionid    
         AND m.objname = a.original_identifier
         and a.derived_connection_id_fk = m.connid
         and m.capturedorconverted = 'CONVERTED'
        and a.derived_type not in ('MD_COLUMNS') )
            then 'Y' 
            else 'N' 
        end as rec_exists
into v_recordExists from dual;
return v_recordExists;
end isDuplicateIdentifier;


PROCEDURE remove_duplicate_id_objecttype(p_connectionid MD_CONNECTIONS.ID%TYPE, p_scratchModel BOOLEAN := FALSE)
IS
CURSOR v_duplicateIdentifier_cur
  IS SELECT New_identifier FROM (
select a.new_identifier,a.DERIVED_OBJECT_NAMESPACE from md_derivatives a, mgv_all_details m
      where
        a.derived_connection_id_fk = p_connectionid
         AND m.objname = a.original_identifier
         and a.derived_connection_id_fk = m.connid
         and m.capturedorconverted = 'CONVERTED'
          AND m.objtype = a.derived_type
        and m.objid = a.derived_id
        and a.derived_type not in ('MD_COLUMNS')
       GROUP BY a.new_identifier,a.DERIVED_OBJECT_NAMESPACE
       HAVING COUNT(*) > 1)X ;

  v_duplicateIdentifier md_derivatives.new_identifier%TYPE;
  v_transform_identifier MD_DERIVATIVES.NEW_IDENTIFIER%TYPE;
  v_derived_type MD_DERIVATIVES.DERIVED_TYPE%TYPE;
  v_derived_id MD_DERIVATIVES.DERIVED_ID%TYPE;

  v_recordExists CHAR(1) := 'N';
  v_suffix INTEGER := 0;
  p_mdrec_id NUMBER := 0;
  v_mdDerivativeRow MD_DERIVATIVES%ROWTYPE;
  v_maxIdentLen NUMBER := 30;

BEGIN
  v_maxIdentLen := MIGRATION_TRANSFORMER.GET_ORACLE_LONG_IDENTIFIER();
  OPEN v_duplicateIdentifier_cur;
  FETCH v_duplicateIdentifier_cur INTO v_duplicateIdentifier;
  LOOP
    EXIT WHEN v_duplicateIdentifier_cur%NOTFOUND;
       LOOP
       v_suffix := v_suffix + 1;
       v_transform_identifier := MIGRATION_TRANSFORMER.ADD_SUFFIX(v_duplicateIdentifier, '_' || TO_CHAR(v_suffix) , v_maxIdentLen);
       v_recordExists := isDuplicateIdentifier(p_connectionid, v_transform_identifier);
       exit when v_recordExists = 'N';
       END LOOP;    
       p_mdrec_id := getDuplicateIdentifierID(p_connectionid, v_duplicateIdentifier);

       SELECT * INTO v_mdDerivativeRow from MD_DERIVATIVES WHERE "ID" = p_mdrec_id;     
       v_derived_type := v_mdDerivativeRow.DERIVED_TYPE;
       v_derived_id := v_mdDerivativeRow.DERIVED_ID;

       fixup_duplicate_identifier(p_connectionid, p_mdrec_id, v_derived_type, v_derived_id, v_duplicateIdentifier, v_suffix, p_scratchModel);         
       v_suffix := 0;

    FETCH v_duplicateIdentifier_cur INTO v_duplicateIdentifier;
  END LOOP;
  CLOSE v_duplicateIdentifier_cur;
  COMMIT;
END remove_duplicate_id_objecttype;

FUNCTION transform_all_identifiers_x(p_connectionid MD_CONNECTIONS.ID%TYPE,
                                             p_scratchModel BOOLEAN := FALSE) RETURN NAME_AND_COUNT_ARRAY
IS
  v_count INTEGER := 0;
  v_ret NAME_AND_COUNT_ARRAY;
  v_rec NAME_AND_COUNT_T;
BEGIN
  v_ret := NAME_AND_COUNT_ARRAY();
  -- We need to update identifiers on pretty much the whole schema
  -- MD_COLUMNS
  v_rec := transform_column_identifiers(p_connectionid, p_scratchModel);
  v_ret.EXTEND;
  v_ret(v_ret.count) := v_rec;
  dbms_output.put_line(v_rec.UPDATE_COUNT || v_rec.OBJECT_NAME || ' names udpates');

  -- MD_CONSTRAINTS
  v_rec := transform_constraint_idents(p_connectionid, p_scratchModel);
  v_ret.EXTEND;
  v_ret(v_ret.count) := v_rec;
  dbms_output.put_line(v_rec.UPDATE_COUNT || v_rec.OBJECT_NAME || ' names udpates');
  -- MD_GROUPS
  v_rec := transform_group_identifiers(p_connectionid, p_scratchModel);
  v_ret.EXTEND;
  v_ret(v_ret.count) := v_rec;
  dbms_output.put_line(v_rec.UPDATE_COUNT || v_rec.OBJECT_NAME || ' names udpates');
  -- MD_INDEXES
  v_rec := transform_index_identifiers(p_connectionid, p_scratchModel);
  v_ret.EXTEND;
  v_ret(v_ret.count) := v_rec;
  dbms_output.put_line(v_rec.UPDATE_COUNT || v_rec.OBJECT_NAME || ' names udpates');
  -- MD_OTHER_OBJECTS
  v_rec := transform_othobj_identifiers(p_connectionid, p_scratchModel);
  v_ret.EXTEND;
  v_ret(v_ret.count) := v_rec;
  dbms_output.put_line(v_rec.UPDATE_COUNT || v_rec.OBJECT_NAME || ' names udpates');
  -- MD_PACKAGES
  v_rec := transform_package_identifiers(p_connectionid, p_scratchModel);
  v_ret.EXTEND;
  v_ret(v_ret.count) := v_rec;
  dbms_output.put_line(v_rec.UPDATE_COUNT || v_rec.OBJECT_NAME || ' names udpates');
  -- MD_SCHEMAS
  v_rec := transform_schema_identifiers(p_connectionid, p_scratchModel);
  v_ret.EXTEND;
  v_ret(v_ret.count) := v_rec;
  dbms_output.put_line(v_rec.UPDATE_COUNT || v_rec.OBJECT_NAME || ' names udpates');
  -- MD_SEQUENCES
  v_rec := transform_sequence_identifiers(p_connectionid, p_scratchModel);
  v_ret.EXTEND;
  v_ret(v_ret.count) := v_rec;
  dbms_output.put_line(v_rec.UPDATE_COUNT || v_rec.OBJECT_NAME || ' names udpates');
  -- MD_STORED_PROGRAMS
  v_rec := transform_sproc_identifiers(p_connectionid, p_scratchModel);
  v_ret.EXTEND;
  v_ret(v_ret.count) := v_rec;
  dbms_output.put_line(v_rec.UPDATE_COUNT || v_rec.OBJECT_NAME || ' names udpates');
  -- MD_SYNONYMS
  v_rec := transform_synonym_identifiers(p_connectionid, p_scratchModel);
  v_ret.EXTEND;
  v_ret(v_ret.count) := v_rec;
  dbms_output.put_line(v_rec.UPDATE_COUNT || v_rec.OBJECT_NAME || ' names udpates');
  -- MD_TABLES
  v_rec := transform_table_identifiers(p_connectionid, p_scratchModel);
  v_ret.EXTEND;
  v_ret(v_ret.count) := v_rec;
  dbms_output.put_line(v_rec.UPDATE_COUNT || v_rec.OBJECT_NAME || ' names udpates');
  -- MD_TABLESPACES
  v_rec := transform_tablespace_idents(p_connectionid, p_scratchModel);
  v_ret.EXTEND;
  v_ret(v_ret.count) := v_rec;
  dbms_output.put_line(v_rec.UPDATE_COUNT || v_rec.OBJECT_NAME || ' names udpates');
  -- MD_TRIGGERS
  v_rec := transform_trigger_identifiers(p_connectionid, p_scratchModel);
  v_ret.EXTEND;
  v_ret(v_ret.count) := v_rec;
  dbms_output.put_line(v_rec.UPDATE_COUNT || v_rec.OBJECT_NAME || ' names udpates');
  -- MD_USER_DEFINED_DATA_TYPES
  v_rec := transform_uddt_identifiers(p_connectionid, p_scratchModel);
  v_ret.EXTEND;
  v_ret(v_ret.count) := v_rec;
  dbms_output.put_line(v_rec.UPDATE_COUNT || v_rec.OBJECT_NAME || ' names udpates');
  -- MD_USERS
  v_rec := transform_user_identifiers(p_connectionid, p_scratchModel);
  v_ret.EXTEND;
  v_ret(v_ret.count) := v_rec;
  dbms_output.put_line(v_rec.UPDATE_COUNT || v_rec.OBJECT_NAME || ' names udpates');
  /*
  UPDATE MD_USERS SET USERNAME = MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(USERNAME) WHERE SCHEMA_ID_FK IN
    (SELECT SCHEMA_ID FROM MGV_ALL_SCHEMA WHERE CONNECTION_ID = p_connectionid)
    AND MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(USERNAME) != USERNAME;
  dbms_output.put_line(SQL%ROWCOUNT || ' USER names updated');
  */
  -- MD_VIEWS
  v_rec := transform_view_identifiers(p_connectionid, p_scratchModel);
  v_ret.EXTEND;
  v_ret(v_ret.count) := v_rec;
  dbms_output.put_line(v_rec.UPDATE_COUNT || v_rec.OBJECT_NAME || ' names udpates');
  transform_clashes(p_connectionid, p_scratchModel);
  -- TODO: Something meaningful if all goes wrong

  -- The following call will remove Duplicate Identifiers across the all objects types
  remove_duplicate_id_objecttype(p_connectionid, p_scratchModel); 

  return v_ret;
  COMMIT;
END transform_all_identifiers_x;

FUNCTION transform_all_identifiers(p_connectionid MD_CONNECTIONS.ID%TYPE, p_prefixName VARCHAR2, p_scratchModel BOOLEAN := FALSE) RETURN NAME_AND_COUNT_ARRAY
IS
BEGIN
v_prefixName := p_prefixName;
RETURN  transform_all_identifiers_x(p_connectionid, p_scratchModel);
END transform_all_identifiers;

FUNCTION rule_specificity(p_precision MIGR_DATATYPE_TRANSFORM_RULE.SOURCE_PRECISION%TYPE, p_scale MIGR_DATATYPE_TRANSFORM_RULE.SOURCE_SCALE%TYPE) RETURN INTEGER
IS
BEGIN
  IF p_precision is NULL then 
    return 1;
  END IF;
  IF p_scale is NULL then
    return 2;
  END IF;
  return 3;
END rule_specificity;

FUNCTION addToWhereClause(p_whereclause VARCHAR2, p_toAdd VARCHAR2) return VARCHAR2
IS
BEGIN
  IF p_whereclause is NULL then
    return p_toAdd;
  else
    return p_whereclause || ' AND ' || p_toAdd;
  END IF;
END addToWhereClause;

FUNCTION precision_val(p_srcPrecision MD_COLUMNS.PRECISION%TYPE, p_newDataType VARCHAR2) RETURN VARCHAR2
IS
  v_newDataType VARCHAR2(255);
  v_ret VARCHAR2(255);
BEGIN
  v_newDataType := UPPER(to_char(p_newDataType));
  -- Assume that no precision should be present
  v_ret := 'NULL';
  -- No see what the new data type is and ensure that a precision is required
  IF v_newDataType = 'VARCHAR2' OR
     v_newDataType = 'NVARCHAR2' OR
     v_newDataType = 'NUMBER' OR
     v_newDataType = 'DECIMAL' OR
     v_newDataType = 'TIMESTAMP' OR
     v_newDataType = 'INTERVAL YEAR' OR
     v_newDataType = 'INTERVAL DAY' OR
     v_newDataType = 'UROWID' OR
     v_newDataType = 'CHAR' OR
     v_newDataType = 'RAW' OR
     v_newDataType = 'NCHAR' THEN
     v_ret := p_srcPrecision;
  END IF;
  return v_ret;
END precision_val;

FUNCTION scale_val(p_srcPrecision MD_COLUMNS.SCALE%TYPE, p_newDataType VARCHAR2) RETURN VARCHAR2
IS
  v_newDataType VARCHAR2(255);
  v_ret VARCHAR2(255);
BEGIN
  v_newDataType := UPPER(to_char(p_newDataType));
  v_ret := 'NULL';
  IF v_newDataType = 'NUMBER'  OR v_newDataType = 'DECIMAL' THEN
    v_ret := p_srcPrecision;
  END IF;
  return v_ret;
END scale_val;

FUNCTION check_for_invalid_data_types(p_connectionid MD_CONNECTIONS.ID%TYPE, p_numbytesperchar INTEGER, p_is12c CHAR:= 'N') RETURN NUMBER
IS
    --make limits that vary in 12c variables
    v_limitVarchar2 MD_COLUMNS.PRECISION%TYPE :=4000;
    v_limitChar MD_COLUMNS.PRECISION%TYPE := 2000;
    v_limitNChar MD_COLUMNS.PRECISION%TYPE := 2000;
    v_limitNChar_2 MD_COLUMNS.PRECISION%TYPE := 1000;
    v_limitNVarchar2 MD_COLUMNS.PRECISION%TYPE := 4000;
    v_limitNVarchar2_2 MD_COLUMNS.PRECISION%TYPE := 2000;
    v_limitRaw MD_COLUMNS.PRECISION%TYPE := 2000;
BEGIN
    IF (p_is12c = 'Y') THEN
    	--Note: CHAR and NCHAR are not effected
        v_limitVarchar2 :=32767;
        v_limitNVarchar2 := 32767;
        v_limitNVarchar2_2 := 16383;
        v_limitRaw := 32767;
    END IF;
    -- First, for char(n) columns, drop back to varchar2 - this could go up to 4k.
    -- If its even greater than this, it will be caught later on and made into a CLOB.
    UPDATE /* APEXa70168 */  MD_DERIVATIVES SET DERIVATIVE_REASON = 'INVDTTYPE' WHERE DERIVED_CONNECTION_ID_FK = p_connectionid
        AND DERIVED_TYPE = 'MD_COLUMNS' AND DERIVED_ID IN (SELECT ID FROM MD_COLUMNS WHERE COLUMN_TYPE = 'CHAR' AND PRECISION > v_limitChar
        AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid));
    UPDATE /* APEX0d0107 */  MD_COLUMNS SET COLUMN_TYPE = 'VARCHAR2' WHERE COLUMN_TYPE = 'CHAR' AND PRECISION > v_limitChar
        AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid);
    -- We'll do something similar for NCHARs
    IF p_numbytesperchar = 1 THEN
        UPDATE /* APEX785abf */  MD_DERIVATIVES SET DERIVATIVE_REASON = 'INVDTTYPE' WHERE DERIVED_CONNECTION_ID_FK = p_connectionid
          AND DERIVED_TYPE = 'MD_COLUMNS' AND DERIVED_ID IN (SELECT ID FROM MD_COLUMNS WHERE COLUMN_TYPE = 'NCHAR' AND PRECISION > v_limitNChar 
            AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid));
        UPDATE /* APEXbcc963 */  MD_COLUMNS SET COLUMN_TYPE = 'NVARCHAR2' WHERE COLUMN_TYPE = 'NCHAR' AND PRECISION > v_limitNChar 
            AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid);
    ELSE   
        -- 2 bytes per char - max is actually 1k          
        UPDATE /* APEX02dfc9 */  MD_DERIVATIVES SET DERIVATIVE_REASON = 'INVDTTYPE' WHERE DERIVED_CONNECTION_ID_FK = p_connectionid
          AND DERIVED_TYPE = 'MD_COLUMNS' AND DERIVED_ID IN (SELECT ID FROM MD_COLUMNS WHERE COLUMN_TYPE = 'NCHAR' AND PRECISION > v_limitNChar_2 
            AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid));
        UPDATE /* APEXe5183d */  MD_COLUMNS SET COLUMN_TYPE = 'NVARCHAR2' WHERE COLUMN_TYPE = 'NCHAR' AND PRECISION > v_limitNChar_2 
            AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid);
    END IF;            
    -- VARCHAR or VARCHAR2 can't go above 4000 (32767 in 12c).  If they do, they need to fallback to a CLOB
    UPDATE /* APEX8b4b3d */  MD_DERIVATIVES SET DERIVATIVE_REASON = 'INVDTTYPE' WHERE DERIVED_CONNECTION_ID_FK = p_connectionid
      AND DERIVED_TYPE = 'MD_COLUMNS' AND DERIVED_ID IN (SELECT ID FROM MD_COLUMNS WHERE COLUMN_TYPE = 'VARCHAR' AND PRECISION > v_limitVarchar2 
        AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid));
    UPDATE /* APEX096a2c */  MD_COLUMNS SET COLUMN_TYPE = 'CLOB', PRECISION = NULL, SCALE = NULL WHERE COLUMN_TYPE = 'VARCHAR' AND PRECISION > v_limitVarchar2 
        AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid);

    UPDATE /* APEXf2a9a1 */  MD_DERIVATIVES SET DERIVATIVE_REASON = 'INVDTTYPE' WHERE DERIVED_CONNECTION_ID_FK = p_connectionid
      AND DERIVED_TYPE = 'MD_COLUMNS' AND DERIVED_ID IN (SELECT ID FROM MD_COLUMNS  WHERE COLUMN_TYPE = 'VARCHAR2' AND PRECISION > v_limitVarchar2 
        AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid));
    UPDATE /* APEX69c07f */  MD_COLUMNS SET COLUMN_TYPE = 'CLOB', PRECISION = NULL, SCALE = NULL WHERE COLUMN_TYPE = 'VARCHAR2' AND PRECISION > v_limitVarchar2 
        AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid);
    -- NUMBER has a max precision of 38, and scale must be between -84 and 127
    -- We can only narrow this.  

    UPDATE /* APEX3d0724 */  MD_DERIVATIVES SET DERIVATIVE_REASON = 'INVDTTYPE' WHERE DERIVED_CONNECTION_ID_FK = p_connectionid
      AND DERIVED_TYPE = 'MD_COLUMNS' AND DERIVED_ID IN (SELECT ID FROM MD_COLUMNS WHERE COLUMN_TYPE = 'NUMBER' AND PRECISION > 38
        AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid));
    UPDATE /* APEX10b202 */  MD_COLUMNS SET PRECISION = 38 WHERE COLUMN_TYPE = 'NUMBER' AND PRECISION > 38
        AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid);

    UPDATE /* APEX9ffcee */  MD_DERIVATIVES SET DERIVATIVE_REASON = 'INVDTTYPE' WHERE DERIVED_CONNECTION_ID_FK = p_connectionid
      AND DERIVED_TYPE = 'MD_COLUMNS' AND DERIVED_ID IN (SELECT ID FROM MD_COLUMNS WHERE COLUMN_TYPE = 'NUMBER' AND SCALE < -84
        AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid));
    UPDATE /* APEX596ca6 */  MD_COLUMNS SET SCALE = -84 WHERE COLUMN_TYPE = 'NUMBER' AND SCALE < -84
        AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid);

    UPDATE /* APEX91ec93 */  MD_DERIVATIVES SET DERIVATIVE_REASON = 'INVDTTYPE' WHERE DERIVED_CONNECTION_ID_FK = p_connectionid
      AND DERIVED_TYPE = 'MD_COLUMNS' AND DERIVED_ID IN (SELECT ID FROM MD_COLUMNS WHERE COLUMN_TYPE = 'NUMBER' AND SCALE > 127
        AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid));
    UPDATE /* APEX4b7717 */  MD_COLUMNS SET SCALE = 127 WHERE COLUMN_TYPE = 'NUMBER' AND SCALE > 127
        AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid);
    -- NVARCHAR has a max of 4000 (32767 in 12c) bytes.  But its definition depends on the character set in use.
    IF  p_numbytesperchar = 1 THEN
        UPDATE /* APEX21479a */  MD_DERIVATIVES SET DERIVATIVE_REASON = 'INVDTTYPE' WHERE DERIVED_CONNECTION_ID_FK = p_connectionid
          AND DERIVED_TYPE = 'MD_COLUMNS' AND DERIVED_ID IN (SELECT ID FROM MD_COLUMNS WHERE COLUMN_TYPE = 'NVARCHAR2' AND PRECISION > v_limitNVarchar2 
            AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid));
        UPDATE /* APEXa6699b */  MD_COLUMNS SET COLUMN_TYPE = 'NCLOB', PRECISION = NULL, SCALE = NULL WHERE COLUMN_TYPE = 'NVARCHAR2' AND PRECISION > v_limitNVarchar2 
            AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid);
    ELSE
        UPDATE /* APEX7efb4a */  MD_DERIVATIVES SET DERIVATIVE_REASON = 'INVDTTYPE' WHERE DERIVED_CONNECTION_ID_FK = p_connectionid
          AND DERIVED_TYPE = 'MD_COLUMNS' AND DERIVED_ID IN (SELECT ID FROM MD_COLUMNS WHERE COLUMN_TYPE = 'NVARCHAR2' AND PRECISION > v_limitNVarchar2_2 
            AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid));
        UPDATE /* APEX222907 */  MD_COLUMNS SET COLUMN_TYPE = 'NCLOB', PRECISION = NULL, SCALE = NULL WHERE COLUMN_TYPE = 'NVARCHAR2' AND PRECISION > v_limitNVarchar2_2
            AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid);
    END IF;            
    -- TIMESTAMP has a max size of 9

    UPDATE /* APEXbe9787 */  MD_DERIVATIVES SET DERIVATIVE_REASON = 'INVDTTYPE' WHERE DERIVED_CONNECTION_ID_FK = p_connectionid
      AND DERIVED_TYPE = 'MD_COLUMNS' AND DERIVED_ID IN (SELECT ID FROM MD_COLUMNS WHERE COLUMN_TYPE = 'TIMESTAMP' AND PRECISION > 9
        AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid));
    UPDATE /* APEX2972c8 */  MD_COLUMNS SET PRECISION = 9 WHERE COLUMN_TYPE = 'TIMESTAMP' AND PRECISION > 9
        AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid);

    UPDATE /* APEXd90649 */  MD_DERIVATIVES SET DERIVATIVE_REASON = 'INVDTTYPE' WHERE DERIVED_CONNECTION_ID_FK = p_connectionid
      AND DERIVED_TYPE = 'MD_COLUMNS' AND DERIVED_ID IN (SELECT ID FROM MD_COLUMNS WHERE COLUMN_TYPE = 'INTERVAL YEAR' AND PRECISION > 9
        AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid));
    UPDATE /* APEXe6819d */  MD_COLUMNS SET PRECISION = 9 WHERE COLUMN_TYPE = 'INTERVAL YEAR' AND PRECISION > 9
        AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid);

    UPDATE /* APEX0f2de6 */  MD_DERIVATIVES SET DERIVATIVE_REASON = 'INVDTTYPE' WHERE DERIVED_CONNECTION_ID_FK = p_connectionid
      AND DERIVED_TYPE = 'MD_COLUMNS' AND DERIVED_ID IN (SELECT ID FROM MD_COLUMNS WHERE COLUMN_TYPE = 'INTERVAL DAY' AND PRECISION > 9
        AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid));
    UPDATE /* APEX80e93f */  MD_COLUMNS SET PRECISION = 9 WHERE COLUMN_TYPE = 'INTERVAL DAY' AND PRECISION > 9
        AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid);

    UPDATE /* APEX52de60 */  MD_DERIVATIVES SET DERIVATIVE_REASON = 'INVDTTYPE' WHERE DERIVED_CONNECTION_ID_FK = p_connectionid
      AND DERIVED_TYPE = 'MD_COLUMNS' AND DERIVED_ID IN (SELECT ID FROM MD_COLUMNS WHERE COLUMN_TYPE = 'INTERVAL DAY' AND SCALE > 9
        AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid));
    UPDATE /* APEXc299dd */  MD_COLUMNS SET SCALE = 9 WHERE COLUMN_TYPE = 'INTERVAL DAY' AND SCALE > 9
        AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid);

    UPDATE /* APEX1b3ace */  MD_DERIVATIVES SET DERIVATIVE_REASON = 'INVDTTYPE' WHERE DERIVED_CONNECTION_ID_FK = p_connectionid
      AND DERIVED_TYPE = 'MD_COLUMNS' AND DERIVED_ID IN (SELECT ID FROM MD_COLUMNS WHERE COLUMN_TYPE = 'UROWID' AND PRECISION > 4000
        AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid));
    UPDATE /* APEX7f22a3 */  MD_COLUMNS SET PRECISION = 4000 WHERE COLUMN_TYPE = 'UROWID' AND PRECISION > 4000
        AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid);
    -- Too large RAW?  Make it a CLOB        

    UPDATE /* APEXa72390 */  MD_DERIVATIVES SET DERIVATIVE_REASON = 'INVDTTYPE' WHERE DERIVED_CONNECTION_ID_FK = p_connectionid
      AND DERIVED_TYPE = 'MD_COLUMNS' AND DERIVED_ID IN (SELECT ID FROM MD_COLUMNS WHERE COLUMN_TYPE = 'RAW' AND PRECISION > v_limitRaw
        AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid));
    UPDATE /* APEX2119b7 */  MD_COLUMNS SET COLUMN_TYPE = 'BLOB', PRECISION = NULL WHERE COLUMN_TYPE = 'RAW' AND PRECISION > v_limitRaw
        AND TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid);
    commit;
    RETURN 0;        
END check_for_invalid_data_types;

FUNCTION transform_datatypes(p_connectionid MD_CONNECTIONS.ID%TYPE, p_mapid MIGR_DATATYPE_TRANSFORM_MAP.ID%TYPE, p_numbytesperchar INTEGER, p_is12c VARCHAR2 :=  'N') RETURN NUMBER
IS
  v_projectid MD_PROJECTS.ID%TYPE;
  v_mapProjectid MD_PROJECTS.ID%TYPE;
  CURSOR v_curs(mapid MIGR_DATATYPE_TRANSFORM_MAP.ID%TYPE) IS
    SELECT * FROM MIGR_DATATYPE_TRANSFORM_RULE WHERE map_ID_fk = mapid
    ORDER BY     DECODE(source_precision,
            NULL, 0,
            1) +
    DECODE(source_scale,
            NULL, 0,
            1)  DESC;
  v_rule MIGR_DATATYPE_TRANSFORM_RULE%ROWTYPE;
  v_whereClause VARCHAR2(4000);
  v_updateClause VARCHAR2(4000);
  v_count NUMBER := 0;
  v_ret NUMBER;
BEGIN
  -- We should only work with our "own" maps.  I.e. The map should be part of this project.
  SELECT /* APEX276ceb */  project_id_fk into v_projectid from MD_CONNECTIONS where id = p_connectionid;
  SELECT /* APEXd9efb1 */  project_id_fk into v_mapProjectid from MIGR_DATATYPE_TRANSFORM_MAP where id = p_mapid;
  IF v_projectid != v_mapProjectid then 
    -- TODO.  Some nice RAISE_APPLICATION_ERROR stuff here.
    return 0;
  END IF;
  -- OK We can work with our map
  OPEN v_curs(p_mapid);
  LOOP
    fetch v_curs INTO v_rule;
    EXIT WHEN v_curs%NOTFOUND;
    v_whereClause := 'UPPER(COLUMN_TYPE) = ''' || UPPER(v_rule.SOURCE_DATA_TYPE_NAME) || '''';
    if v_rule.SOURCE_PRECISION is not NULL then
      v_whereClause := addToWhereClause(v_whereClause, 'PRECISION = ' || to_char(v_rule.source_precision));
      IF v_rule.SOURCE_SCALE is not NULL then
        v_whereClause := addToWhereClause(v_whereClause, 'SCALE = ' || to_char(v_rule.source_scale));
      end IF;
    END IF;
    v_whereClause := addToWhereClause(v_whereClause, 'table_id_fk in (SELECT table_id from MGV_ALL_TABLES WHERE connection_id = ' || to_char(p_connectionid) || ')');
    v_whereClause := addTowhereclause(v_whereClause, 'DATATYPE_TRANSFORMED_FLAG IS NULL');
    v_updateClause := 'UPDATE MD_COLUMNS SET COLUMN_TYPE = ''' || v_rule.TARGET_DATA_TYPE_NAME || ''', DATATYPE_TRANSFORMED_FLAG=''Y''';
    IF v_rule.TARGET_PRECISION is not NULL then
      v_updateClause := v_updateClause || ', PRECISION = ' || precision_val(v_rule.TARGET_PRECISION, v_rule.TARGET_DATA_TYPE_NAME);
      IF v_rule.TARGET_SCALE is not NULL then
        -- The rule says change it to a specific scale, but we may override this is the data type shouldn't have a scale
        v_updateClause := v_updateClause || ', SCALE = ' || scale_val(v_rule.TARGET_SCALE, v_rule.TARGET_DATA_TYPE_NAME);
      ELSE
        -- There was no mention on the rule to touch the scale, so we should leave it alone...
        -- ..unless of course the data type forbids having it.
        IF scale_val(1, v_rule.TARGET_DATA_TYPE_NAME) = 'NULL' THEN
          v_updateClause := v_updateClause || ', SCALE = NULL';
        END IF;
      END IF;
    ELSE
      -- There was no metion on the rul to touch the precision, so we should leave it alone...
      -- ..unless of course the data type forbids having it.
      IF precision_val(1, v_rule.TARGET_DATA_TYPE_NAME) = 'NULL' THEN
        v_updateClause := v_updateClause || ', PRECISION = NULL';
      END IF;
      IF scale_val(1, v_rule.TARGET_DATA_TYPE_NAME) = 'NULL' THEN
        v_updateClause := v_updateClause || ', SCALE = NULL';
      END IF;
    END IF;
    v_updateClause := v_updateClause || ' WHERE ' || v_whereClause;
    dbms_output.put_line(v_updateClause);
    EXECUTE IMMEDIATE v_updateClause;
    v_count := v_count + SQL%ROWCOUNT;
  END LOOP;
  CLOSE v_curs;
  COMMIT;
  -- OK.  Lets see if we've made any columns invalid.
  v_ret := check_for_invalid_data_types(p_connectionid, p_numbytesperchar, p_is12c);  
  -- Now that we know the data types of the index columns, we may have flag some of the indexes
  -- as text indexes.
  v_ret := fixupTextIndexes(p_connectionid);

  RETURN v_count;
END transform_datatypes;

FUNCTION GET_SIMPLE_IDENTITY_TRIGGER(v_triggerName VARCHAR2 , v_tableName VARCHAR2  , 
v_ColumnName VARCHAR2,v_emulationPkgNamePrefix VARCHAR2 ) RETURN VARCHAR2
as
 v_identityClause VARCHAR2(200);
BEGIN

IF (v_emulationpkgnameprefix = 'mysql_utilities.') THEN
  v_identityclause := '  --used to emulate LAST_INSERT_ID()'|| chr(10) || '  --'||v_emulationpkgnameprefix || 'identity := v_newVal; '|| chr(10) ;
ELSIF (v_emulationpkgnameprefix = 'utils.') THEN --sqlserver and sybase use identity_value
  v_identityclause := '  -- save this to emulate @@identity'|| chr(10) || '  '||v_emulationpkgnameprefix || 'identity_value := v_newVal; '|| chr(10) ;
ELSE
  v_identityclause := '  --used to help get last identity value '|| chr(10) || '  '||v_emulationpkgnameprefix || 'identity := v_newVal; '|| chr(10) ;
END IF;

return 'CREATE OR REPLACE TRIGGER ' || v_triggerName || ' AFTER INSERT ON ' || v_tableName || CHR(10) ||
       'FOR EACH ROW' || CHR(10) ||
       'DECLARE ' || CHR(10)||
       'v_newVal NUMBER(12) := 0;' ||CHR(10) ||
       'BEGIN' || CHR(10) ||
       '  v_newVal := :new.' || v_ColumnName || ';' || CHR(10) ||
       v_identityClause
      ||
       'END;' || CHR(10);
END GET_SIMPLE_IDENTITY_TRIGGER;

FUNCTION GET_IDENTITY_TRIGGER(v_triggerName VARCHAR2 , v_tableName VARCHAR2  , 
v_ColumnName VARCHAR2  ,v_seqName VARCHAR2 ,v_emulationPkgNamePrefix VARCHAR2 ) RETURN VARCHAR2
as
 v_identityClause VARCHAR2(200);
BEGIN

IF (v_emulationpkgnameprefix = 'mysql_utilities.') THEN
  v_identityclause := '    --used to emulate LAST_INSERT_ID()'|| chr(10) || '    --'||v_emulationpkgnameprefix || 'identity := v_newVal; '|| chr(10) ;
ELSIF (v_emulationpkgnameprefix = 'utils.') THEN --sqlserver and sybase use identity_value
  v_identityclause := '  -- save this to emulate @@identity'|| chr(10) || '  '||v_emulationpkgnameprefix || 'identity_value := v_newVal; '|| chr(10) ;
ELSE
  v_identityclause := '  --used to help get last identity value '|| chr(10) || '  '||v_emulationpkgnameprefix || 'identity := v_newVal; '|| chr(10) ;
END IF;

return 'CREATE OR REPLACE TRIGGER ' || v_triggerName || ' BEFORE INSERT ON ' || v_tableName || CHR(10) ||
       'FOR EACH ROW' || CHR(10) ||
       'DECLARE ' || CHR(10)||
       'v_newVal NUMBER(12) := 0;' ||CHR(10) ||
	   'v_incval NUMBER(12) := 0;'||CHR(10) ||
       'BEGIN' || CHR(10) ||
       '  IF INSERTING AND :new.' || v_ColumnName || ' IS NULL THEN' || CHR(10) ||
       '    SELECT  ' || v_seqName || '.NEXTVAL INTO v_newVal FROM DUAL;' || CHR(10) ||
	   '    -- If this is the first time this table have been inserted into (sequence == 1)' || CHR(10) ||
	   '    IF v_newVal = 1 THEN ' || CHR(10) ||
	   '      --get the max indentity value from the table' || CHR(10) ||
	   '      SELECT NVL(max(' || v_ColumnName || '),0) INTO v_newVal FROM ' || v_tableName || ';'|| CHR(10) || 
	   '      v_newVal := v_newVal + 1;' || CHR(10) || 
	   '      --set the sequence to that value'|| CHR(10) || 
	   '      LOOP'|| CHR(10) || 
	   '           EXIT WHEN v_incval>=v_newVal;'|| CHR(10) || 
	   '           SELECT ' || v_seqName || '.nextval INTO v_incval FROM dual;'|| CHR(10) || 
       '      END LOOP;'|| CHR(10) || 
       '    END IF;'|| chr(10) ||    
       v_identityClause
      ||
       '   -- assign the value from the sequence to emulate the identity column'|| CHR(10) || 
       '   :new.' || v_ColumnName || ' := v_newVal;'|| CHR(10) || 
       '  END IF;' || CHR(10) ||
       'END;' || CHR(10);
END GET_IDENTITY_TRIGGER;

FUNCTION get_plugin_name(p_connectionid MD_CONNECTIONS.ID%TYPE) RETURN VARCHAR2
IS
  CURSOR v_pluginNameCur IS SELECT value FROM MD_ADDITIONAL_PROPERTIES WHERE prop_key='PLUGIN_ID' AND connection_id_fk = p_connectionid;
  v_pluginName MD_ADDITIONAL_PROPERTIES.VALUE%TYPE;
  BEGIN
	  OPEN v_pluginNameCur;
	  FETCH v_pluginNameCur INTO v_pluginName;
	  CLOSE v_pluginNameCur;
	  RETURN v_pluginName;
END get_plugin_name;	  

FUNCTION get_emulation_pkg_name(p_connectionid MD_CONNECTIONS.ID%TYPE) RETURN VARCHAR2
AS
v_pkgName VARCHAR2(1000);
v_pluginName MD_ADDITIONAL_PROPERTIES.VALUE%TYPE;
BEGIN
	v_pluginName := get_plugin_name(p_connectionid);
	IF LOWER(v_pluginName) LIKE '%sqlserver%'THEN
	  	v_pkgName := 'utils.';
	  ELSIF LOWER(v_pluginName) LIKE '%access%'THEN
	    v_pkgName := 'msaccess_utilities.';
	  ELSIF LOWER(v_pluginName) LIKE '%sybase%'THEN
	    v_pkgName := 'utils.';
	  ELSIF LOWER(v_pluginName) LIKE '%mysql%' THEN
	    v_pkgName := 'mysql_utilities.';
	  ELSIF LOWER(v_pluginName) LIKE '%db2%' THEN
	    v_pkgName := 'db2_utilities.';
	END IF;
  RETURN v_pkgName;
END get_emulation_pkg_name;

FUNCTION transform_identity_columns(p_connectionid MD_CONNECTIONS.ID%TYPE, p_is12c VARCHAR2) RETURN NUMBER
IS
  CURSOR v_curs IS SELECT a.schema_id_fk, a.id tableid, a.TABLE_NAME, b.id, b.column_name, b.NULLABLE
                   FROM md_tables a, md_columns b WHERE b.id IN
                     (SELECT ref_id_fk FROM md_additional_properties WHERE prop_key = C_PROPKEY_SEEDVALUE)
                   AND table_id_fk IN (SELECT table_id FROM mgv_all_tables WHERE connection_id = p_connectionid)
                   AND a.id = b.table_id_fk
                   AND b.id NOT IN (SELECT SRC_ID FROM MD_DERIVATIVES WHERE SRC_TYPE = C_OBJECTTYPE_COLUMNS AND DERIVED_TYPE = C_OBJECTTYPE_SEQUENCES AND 
                                    DERIVED_CONNECTION_ID_FK = p_connectionid);  
  	v_schemaId MD_SCHEMAS.ID%TYPE;
	v_tableId MD_TABLES.ID%TYPE;
        v_tableName MD_TABLES.TABLE_NAME%TYPE;
	v_columnId MD_COLUMNS.ID%TYPE;
	v_columnName MD_COLUMNS.COLUMN_NAME%TYPE;
	v_row MD_ADDITIONAL_PROPERTIES%ROWTYPE;
	v_seedValue NUMBER;
	-- Default the increment to 1 if it is not supplied.
	v_increment NUMBER := 1;
	v_lastVal NUMBER := NULL;
	v_retId MD_SEQUENCES.ID%TYPE;
	v_retSeqId MD_SEQUENCES.ID%TYPE;
	v_seqName MD_SEQUENCES.NAME%TYPE;
        v_trgName MD_TRIGGERS.TRIGGER_NAME%TYPE;
	v_triggerText VARCHAR2(4000);
        v_lob CLOB;
	v_transRet NAME_AND_COUNT_T;
	v_dbTypeCurs VARCHAR2(1000);
	v_emulationPkgNamePrefix VARCHAR2(100) := '';
	v_nullable MD_COLUMNS.NULLABLE%TYPE;
    v_alreadyDone NUMBER;
    v_continueTriggered BOOLEAN := FALSE;
    v_identityClause VARCHAR2(4000);
BEGIN
  -- Auxillary, get the emulation package name
  v_emulationPkgNamePrefix := get_emulation_pkg_name(p_connectionid);

  OPEN v_curs;
  LOOP
    v_continueTriggered := FALSE;
  	FETCH v_curs into v_schemaId, v_tableId, v_tableName, v_columnId, v_columnName, v_nullable;
  	EXIT WHEN v_curs%NOTFOUND;
  	-- The above query excludes already created sequences, so we should be ok.
  	-- create the sequence:
  	-- 1. Get the seedvalue, increment, lastvalue if present
    v_alreadyDone := 0;
    BEGIN
      IF (p_is12c = 'Y') THEN
        SELECT /* APEX34db74 */  1 INTO  v_alreadyDone FROM MD_ADDITIONAL_PROPERTIES
        WHERE CONNECTION_ID_FK = p_connectionid 
        AND REF_ID_FK = v_tableId 
        AND REF_TYPE = C_OBJECTTYPE_TABLES 
        AND PROP_KEY = C_PROPKEY_ALREADY_IDENTITY;
      ELSE
        v_alreadyDone:=0;
      END IF;
    EXCEPTION
      WHEN NO_DATA_FOUND THEN v_alreadyDone :=0;
    END;

    IF (v_nullable = 'N' AND p_is12c = 'Y' AND v_alreadyDone != 1) THEN
	    FOR v_row in (SELECT * FROM MD_ADDITIONAL_PROPERTIES WHERE REF_ID_FK = v_columnId)
	  	LOOP
	  	  IF v_row.PROP_KEY = C_PROPKEY_SEEDVALUE THEN
	  	    v_seedValue := TO_NUMBER(v_row.VALUE);
	      END IF;
	  	  IF v_row.PROP_KEY = C_PROPKEY_INCREMENT THEN
	  	    v_increment := TO_NUMBER(v_row.VALUE);
	      END IF;
	  	END LOOP;
      -- Bug 29230132 - MIGRATE AUTO_INCREMENT COLUMN GET ORA-04006
      v_identityClause := 'GENERATED BY DEFAULT ON NULL AS IDENTITY START WITH '||v_seedValue||' INCREMENT BY '||v_increment||' MINVALUE '||v_seedValue||' NOMAXVALUE';
      INSERT /* APEXe30c52 */  INTO MD_ADDITIONAL_PROPERTIES ( CONNECTION_ID_FK, REF_ID_FK, REF_TYPE, PROP_KEY, VALUE )
      VALUES (p_connectionid, v_columnId, C_OBJECTTYPE_COLUMNS, C_PROPKEY_REAL_IDENTITY, v_identityClause);
      INSERT /* APEX5242f6 */  INTO MD_ADDITIONAL_PROPERTIES ( CONNECTION_ID_FK, REF_ID_FK, REF_TYPE, PROP_KEY, VALUE )
      VALUES (p_connectionid, v_tableId, C_OBJECTTYPE_TABLES, C_PROPKEY_ALREADY_IDENTITY, '');

      v_continueTriggered:=FALSE; -- no need to have Trigger Created 

      --DONE do it in create table/ enable - 
      --ISSUES: DONE can be ascending or decending 
      --        DONE top (bottom) value has to be set at end (along with enable constraints)
      --ISSUE   If no entries sequence next val will be 0+increment - there was some work by Indian integrator to recapture current sequence,
      --            if capture convert generate is not done at the same time, or the sequence is otherwise above max/min value.

  	END IF; -- IF (v_nullable = 'N' AND p_is12c = 'Y' AND v_alreadyDone != 1)

    IF (p_is12c = 'N' ) THEN
	  	IF (v_continueTriggered = TRUE) THEN /* need simple trigger to fill @@identity */
	      v_trgName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_tableName || '_' || v_columnName || '_TRG');
	      v_triggerText := GET_SIMPLE_IDENTITY_TRIGGER(v_trgName, v_tableName , v_ColumnName ,v_emulationPkgNamePrefix);
	      -- Note: I'm adding _TRG to the column name for now.We'll have to use the collsion manager in the futre.
	  	  INSERT /* APEX66f507 */  INTO MD_TRIGGERS(TABLE_OR_VIEW_ID_FK, TRIGGER_ON_FLAG, TRIGGER_NAME, TRIGGER_TIMING, TRIGGER_OPERATION, NATIVE_SQL, LANGUAGE)
	      VALUES(v_tableId, 'T', v_trgName, 'AFTER', 'INSERT OR UPDATE', EMPTY_CLOB(), C_LANGUAGEID_ORACLE)
	      RETURNING ID INTO v_retId;
	      INSERT /* APEX61327d */  INTO MD_ADDITIONAL_PROPERTIES ( CONNECTION_ID_FK, REF_ID_FK, REF_TYPE, PROP_KEY, VALUE )
	        VALUES (p_connectionid, v_retId, C_OBJECTTYPE_TRIGGERS, C_PROPKEY_TRIGGER_REWRITE, '');
	      --INSERT INTO MD_ADDITIONAL_PROPERTIES ( CONNECTION_ID_FK, REF_ID_FK, REF_TYPE, PROP_KEY, VALUE )
	      --  VALUES (p_connectionid, v_retId, C_OBJECTTYPE_TRIGGERS, C_PROPKEY_SEQUENCEID, TO_CHAR(v_retSeqId));  
	      INSERT /* APEX6120aa */  INTO MD_DERIVATIVES(SRC_ID, SRC_TYPE, DERIVED_ID, DERIVED_TYPE, DERIVED_CONNECTION_ID_FK, TRANSFORMED, ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE)
	        VALUES(v_columnId, C_OBJECTTYPE_COLUMNS, v_retId, C_OBJECTTYPE_TRIGGERS, p_connectionId, C_TRANSFORMED_TRUE, NULL, v_trgName, C_NS_SCHEMA_OBJS || TO_CHAR(v_schemaId));
	      SELECT /* APEXec4ee7 */  NATIVE_SQL INTO v_lob FROM MD_TRIGGERS WHERE ID = v_retId;          
	        DBMS_LOB.OPEN(v_lob, DBMS_LOB.LOB_READWRITE);
	        DBMS_LOB.WRITE(v_lob, LENGTH(v_triggerText), 1, v_triggerText);
	        DBMS_LOB.CLOSE(v_lob);
	  	ELSE	
	  	 FOR v_row in (SELECT /* APEXc1c83e */  * FROM MD_ADDITIONAL_PROPERTIES WHERE REF_ID_FK = v_columnId)
	  	LOOP
	  	  IF v_row.PROP_KEY = C_PROPKEY_SEEDVALUE THEN
	  	    v_seedValue := TO_NUMBER(v_row.VALUE);
	          END IF;
	  	  IF v_row.PROP_KEY = C_PROPKEY_INCREMENT THEN
	  	    v_increment := TO_NUMBER(v_row.VALUE);
	          END IF;
	  	  IF v_row.PROP_KEY = C_PROPKEY_LASTVALUE THEN
	  	    v_lastVal := TO_NUMBER(v_row.VALUE);
	  	  END IF;
	  	END LOOP;
	  	-- Note: We'll start our sequence where the source left off.
	  	IF v_lastVal IS NOT NULL THEN
	  	  v_seedValue := v_lastVal;
	  	END IF;

	  	-- 2. Create the sequence
	  	-- Note: I'm adding _SEQ to the column name for now. We'll have to use the collision manager in the
	  	-- future.
	  	v_seqName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_tableName || '_' || v_columnName || '_SEQ');
	  	INSERT /* APEX5f9e5e */  INTO MD_SEQUENCES(SCHEMA_ID_FK, NAME, SEQ_START, INCR)
	  	  VALUES (v_schemaId, v_seqName, v_seedValue, v_increment)
	  	  RETURNING ID INTO v_retId;
	  	v_retSeqId := v_retId;
	  	-- And of course a new derivative record
	  	INSERT /* APEX51180d */  INTO MD_DERIVATIVES(SRC_ID, SRC_TYPE, DERIVED_ID, DERIVED_TYPE, DERIVED_CONNECTION_ID_FK, TRANSFORMED, ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE)
	  	  VALUES(v_columnId, C_OBJECTTYPE_COLUMNS, v_retId, C_OBJECTTYPE_SEQUENCES, p_connectionId, C_TRANSFORMED_TRUE, NULL, v_seqName, C_NS_SCHEMA_OBJS || TO_CHAR(v_schemaId));
	  	-- Create the trigger
	        v_trgName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_tableName || '_' || v_columnName || '_TRG');
	  	v_triggerText := GET_IDENTITY_TRIGGER(v_trgName, v_tableName , v_ColumnName ,v_seqName ,v_emulationPkgNamePrefix);
	  	-- Note: I'm adding _TRG to the column name for now.We'll have to use the collsion manager in the futre.
	  	INSERT /* APEX7c7756 */  INTO MD_TRIGGERS(TABLE_OR_VIEW_ID_FK, TRIGGER_ON_FLAG, TRIGGER_NAME, TRIGGER_TIMING, TRIGGER_OPERATION, NATIVE_SQL, LANGUAGE)
	  	  VALUES(v_tableId, 'T', v_trgName, 'BEFORE', 'INSERT OR UPDATE', EMPTY_CLOB(), C_LANGUAGEID_ORACLE)
	  	  RETURNING ID INTO v_retId;
	  	INSERT /* APEXce94e3 */  INTO MD_ADDITIONAL_PROPERTIES ( CONNECTION_ID_FK, REF_ID_FK, REF_TYPE, PROP_KEY, VALUE )
	       VALUES (p_connectionid, v_retId, C_OBJECTTYPE_TRIGGERS, C_PROPKEY_TRIGGER_REWRITE, '');
	    INSERT /* APEXcf7d69 */  INTO MD_ADDITIONAL_PROPERTIES ( CONNECTION_ID_FK, REF_ID_FK, REF_TYPE, PROP_KEY, VALUE )
	       VALUES (p_connectionid, v_retId, C_OBJECTTYPE_TRIGGERS, C_PROPKEY_SEQUENCEID, TO_CHAR(v_retSeqId));	
	  	INSERT /* APEX2740dd */  INTO MD_DERIVATIVES(SRC_ID, SRC_TYPE, DERIVED_ID, DERIVED_TYPE, DERIVED_CONNECTION_ID_FK, TRANSFORMED, ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE)
	  	  VALUES(v_columnId, C_OBJECTTYPE_COLUMNS, v_retId, C_OBJECTTYPE_TRIGGERS, p_connectionId, C_TRANSFORMED_TRUE, NULL, v_trgName, C_NS_SCHEMA_OBJS || TO_CHAR(v_schemaId));
	        SELECT /* APEX58d98d */  NATIVE_SQL INTO v_lob FROM MD_TRIGGERS WHERE ID = v_retId;          
	        DBMS_LOB.OPEN(v_lob, DBMS_LOB.LOB_READWRITE);
	        DBMS_LOB.WRITE(v_lob, LENGTH(v_triggerText), 1, v_triggerText);
	        DBMS_LOB.CLOSE(v_lob);
	    END IF;
   END IF; -- if (p_is12c = 'N' )
  END LOOP;
  COMMIT;
  CLOSE v_curs;
  RETURN 0;
END transform_identity_columns;

FUNCTION transform_rewrite_trigger(p_connectionid MD_CONNECTIONS.ID%TYPE) RETURN NUMBER
IS
  CURSOR v_curs is SELECT ID, TABLE_OR_VIEW_ID_FK, TRIGGER_ON_FLAG, TRIGGER_NAME,
    TRIGGER_TIMING, TRIGGER_OPERATION, TRIGGER_EVENT, NATIVE_SQL, NATIVE_KEY,
    LANGUAGE, COMMENTS from MD_TRIGGERS where ID in
    (SELECT REF_ID_FK from MD_ADDITIONAL_PROPERTIES
    WHERE CONNECTION_ID_FK = p_connectionid and PROP_KEY = C_PROPKEY_TRIGGER_REWRITE);

  v_rowTriggers MD_TRIGGERS%ROWTYPE;
  v_tableName MD_TABLES.TABLE_NAME%TYPE;
	v_columnName MD_COLUMNS.COLUMN_NAME%TYPE;
	v_retId MD_SEQUENCES.ID%TYPE;
  v_retSeqId MD_SEQUENCES.ID%TYPE;
	v_seqName MD_SEQUENCES.NAME%TYPE;
  v_seqName2 MD_SEQUENCES.NAME%TYPE;
	v_triggerText VARCHAR2(4000);
  v_lob CLOB;
  v_projectName VARCHAR2(100);
  v_emulationPkgNamePrefix VARCHAR2(100) := '';
BEGIN
  -- Auxillary, get the emulation package name
  v_emulationPkgNamePrefix := get_emulation_pkg_name(p_connectionid);

  open v_curs;
  loop
    fetch v_curs into v_rowTriggers.ID, v_rowTriggers.TABLE_OR_VIEW_ID_FK, v_rowTriggers.TRIGGER_ON_FLAG, v_rowTriggers.TRIGGER_NAME,
    v_rowTriggers.TRIGGER_TIMING, v_rowTriggers.TRIGGER_OPERATION, v_rowTriggers.TRIGGER_EVENT, v_rowTriggers.NATIVE_SQL, v_rowTriggers.NATIVE_KEY,
    v_rowTriggers.LANGUAGE, v_rowTriggers.COMMENTS ;
    EXIT WHEN v_curs%NOTFOUND;
    update /* APEXab31cc */  MD_TRIGGERS set native_sql = empty_clob() where id = v_rowTriggers.ID;

    -- get table and column name from the derivative of this trigger
    select /* APEX5cc7d2 */  T.TABLE_NAME, C.COLUMN_NAME into v_tableName, v_columnName from MD_TABLES T,
      MD_COLUMNS C where C.TABLE_ID_FK = T.ID and C.ID =
      (select SRC_ID from MD_DERIVATIVES where DERIVED_ID =  v_rowTriggers.ID and SRC_TYPE =
      C_OBJECTTYPE_COLUMNS and DERIVED_CONNECTION_ID_FK = p_connectionid);
    -- get sequence name from id got from additional property
    BEGIN
      select /* APEX83cfe5 */  s.NAME into v_seqName from MD_SEQUENCES s where s.ID =
        (select TO_NUMBER(VALUE) from MD_ADDITIONAL_PROPERTIES where CONNECTION_ID_FK = p_connectionid
        AND REF_ID_FK = v_rowTriggers.ID and PROP_KEY = C_PROPKEY_SEQUENCEID);
      v_triggerText := GET_IDENTITY_TRIGGER(v_rowTriggers.TRIGGER_NAME, v_tableName , v_ColumnName ,v_seqName ,v_emulationPkgNamePrefix);
    EXCEPTION WHEN NO_DATA_FOUND THEN
      --no sequence known (its 12 c identity)
      v_triggerText := GET_SIMPLE_IDENTITY_TRIGGER(v_rowTriggers.TRIGGER_NAME, v_tableName , v_ColumnName ,v_emulationPkgNamePrefix);
    END;
    SELECT /* APEXa55231 */  NATIVE_SQL INTO v_lob FROM MD_TRIGGERS WHERE ID = v_rowTriggers.ID;          
    DBMS_LOB.OPEN(v_lob, DBMS_LOB.LOB_READWRITE);
    DBMS_LOB.WRITE(v_lob, LENGTH(v_triggerText), 1, v_triggerText);
    DBMS_LOB.CLOSE(v_lob);
  END LOOP;
  COMMIT;
  CLOSE v_curs;
  return 0;
END transform_rewrite_trigger;

-- Remove all ForeignKeys that are created on the same table with same referenced Table columns
PROCEDURE remove_duplicate_foreignkeys(p_connectionid MD_CONNECTIONS.ID%TYPE)
IS
  CURSOR v_reftableidfk_cur
  IS
    SELECT CONSTRAINT_ID, TABLE_ID_FK, REFTABLE_ID_FK, COL_ID_FK FROM 
	(
	    SELECT ROW_NUMBER() OVER (PARTITION BY A.COL_ID_FK ORDER BY A.CONSTRAINT_ID) rn, A.CONSTRAINT_ID, A.TABLE_ID_FK, A.REFTABLE_ID_FK, A.COL_ID_FK FROM 
	    (
	        (
	            SELECT
	                mc.id CONSTRAINT_ID,
	                mc.table_id_fk TABLE_ID_FK,
	                mc.reftable_id_fk REFTABLE_ID_FK,
	                LISTAGG(mcd.column_id_fk, ',') WITHIN GROUP (ORDER BY mc.id) COL_ID_FK,
	                COUNT(*)
	            FROM
	                md_constraints   mc,
	                md_constraint_details mcd,
	                mgv_all_constraints_details macd
	            WHERE
	                mc.constraint_type = 'FOREIGN KEY'
	                AND mc.id = macd.objid
	                AND mcd.constraint_id_fk = mc.id
	                AND mc.table_id_fk = macd.mainobjid
	                AND macd.connid = p_connectionid
	            GROUP BY
	                mc.id,
	                mc.table_id_fk,
	                mc.reftable_id_fk
	            ORDER BY
	                CONSTRAINT_ID
	        ) A   
	    )
	)
	WHERE RN > 1; 

  v_reftable_id_fk_id md_constraints.reftable_id_fk%TYPE;
  v_temprow MD_CONSTRAINTS%ROWTYPE;
  v_tableName VARCHAR(4000);
  v_record v_reftableidfk_cur%rowtype;
  v_constraint_id md_constraints.id%TYPE;
  row_num        INTEGER;
  single_quote   CHAR(1) := '''';
  n_char         CHAR(1) := 'N';
  delete_command VARCHAR(1000);

BEGIN
  OPEN v_reftableidfk_cur;
  LOOP
    FETCH v_reftableidfk_cur INTO v_record;
    EXIT
  WHEN v_reftableidfk_cur%NOTFOUND;
  delete_command := 'DELETE from md_constraints where id = :constraint_id and table_id_fk = :table_id and reftable_id_fk = :reftable_id' ;
  EXECUTE IMMEDIATE delete_command USING v_record.constraint_id, v_record.table_id_fk, v_record.reftable_id_fk ;

  delete_command := 'DELETE FROM md_constraint_details WHERE constraint_id_fk = :constraint_id AND ref_flag = ' ||single_quote||n_char||single_quote ;
  EXECUTE IMMEDIATE delete_command USING v_record.constraint_id;

  delete_command := 'DELETE FROM md_derivatives WHERE derived_id = :constraint_id' ;
  EXECUTE IMMEDIATE delete_command USING v_record.constraint_id;

  END LOOP; 
  CLOSE v_reftableidfk_cur;
  COMMIT;

END remove_duplicate_foreignkeys;

-- Remove all UniqueKeys that are created on the same table columns that has Primary keys created. 
PROCEDURE remove_unwanted_uniquekeys(p_connectionid MD_CONNECTIONS.ID%TYPE) 
IS  
  CURSOR v_tableidfk_cur
  IS
    SELECT uk_c.table_id_fk
    FROM md_constraints uk_c,
      md_constraints pk_c,
      mgv_all_tables mt
    WHERE pk_c.constraint_type = 'PK'
    AND uk_c.constraint_type   = 'UNIQUE'
    AND pk_c.table_id_fk       = uk_c.table_id_fk
    AND uk_c.TABLE_ID_FK       = mt.table_id
    AND mt.CONNECTION_ID       = p_connectionid;
  CURSOR v_uk_constraint_id_cur(table_id_fk_id md_constraints.table_id_fk%TYPE)
  IS
    SELECT cd.constraint_id_fk,
      cd.column_id_fk
    FROM md_constraint_details cd
    WHERE cd.constraint_id_fk IN
      (SELECT ID
      FROM md_constraints mc,
        mgv_all_tables mt
      WHERE mc.table_id_fk   = table_id_fk_id
      AND mc.constraint_type = 'UNIQUE'
      AND mc.table_id_fk     = mt.table_id
      AND mt.CONNECTION_ID   = p_connectionid
      )
  ORDER BY column_id_fk;
  CURSOR v_pk_constraint_id_cur(table_id_fk_id md_constraints.table_id_fk%TYPE)
  IS
    SELECT cd.constraint_id_fk,
      cd.column_id_fk
    FROM md_constraint_details cd
    WHERE cd.constraint_id_fk IN
      (SELECT ID
      FROM md_constraints mc,
        mgv_all_tables mt
      WHERE table_id_fk    = table_id_fk_id
      AND constraint_type  = 'PK'
      AND mc.table_id_fk   = mt.table_id
      AND mt.CONNECTION_ID = p_connectionid
      )
  ORDER BY column_id_fk;
TYPE ukColListType
IS
  TABLE OF NUMBER;
  ukColList ukColListType := ukColListType();
TYPE pkColListType
IS
  TABLE OF NUMBER;
  pkColList pkColListType := pkColListType();
  v_record v_tableidfk_cur%rowtype;
  v_record_uk_constraint v_uk_constraint_id_cur%rowtype;
  v_record_pk_constraint v_pk_constraint_id_cur%rowtype;
  counter        INTEGER;
  ukpkFlag       BOOLEAN;
  n_char         CHAR(1) := 'N';
  single_quote   CHAR(1) := '''';
  uniquekey      CHAR(6) := 'UNIQUE';
  delete_command VARCHAR(1000);
BEGIN
  OPEN v_tableidfk_cur;
  FETCH v_tableidfk_cur INTO v_record;
  LOOP
    EXIT
  WHEN v_tableidfk_cur%NOTFOUND;
    counter := 1;
    OPEN v_uk_constraint_id_cur(v_record.table_id_fk);
    FETCH v_uk_constraint_id_cur INTO v_record_uk_constraint;
    LOOP
      EXIT
    WHEN v_uk_constraint_id_cur%NOTFOUND;
      ukColList.extend(1) ;
      ukColList(counter) := v_record_uk_constraint.column_id_fk;
      counter            := counter + 1;
      FETCH v_uk_constraint_id_cur INTO v_record_uk_constraint;
    END LOOP;
    CLOSE v_uk_constraint_id_cur;
    counter := 1;
    OPEN v_pk_constraint_id_cur(v_record.table_id_fk);
    FETCH v_pk_constraint_id_cur INTO v_record_pk_constraint;
    LOOP
      EXIT
    WHEN v_pk_constraint_id_cur%NOTFOUND;
      pkColList.extend(1) ;
      pkColList(counter) := v_record_pk_constraint.column_id_fk;
      counter            := counter + 1;
      FETCH v_pk_constraint_id_cur INTO v_record_pk_constraint;
    END LOOP;
    CLOSE v_pk_constraint_id_cur;
    ukpkFlag := FALSE;
    FOR i IN ukColList.FIRST .. ukColList.LAST
    LOOP
      FOR j IN pkColList.FIRST .. pkColList.LAST
      LOOP
        IF ukColList(i) = pkColList(j) THEN
          ukpkFlag     := TRUE;
        END IF;
      END LOOP; -- j
    END LOOP;   -- i
    IF ukpkFlag THEN
      delete_command := 'DELETE from md_constraints where id = :constraint_id and table_id_fk = :table_id and constraint_type = ' ||single_quote||uniquekey||single_quote ;
      EXECUTE IMMEDIATE delete_command USING v_record_uk_constraint.constraint_id_fk,
      v_record.table_id_fk;
      delete_command := 'DELETE FROM md_constraint_details WHERE constraint_id_fk = :constraint_id AND ref_flag = ' ||single_quote||n_char||single_quote ;
      EXECUTE IMMEDIATE delete_command USING v_record_uk_constraint.constraint_id_fk;
      delete_command := 'DELETE FROM md_derivatives WHERE derived_id = :constraint_id' ;
      EXECUTE IMMEDIATE delete_command USING v_record_uk_constraint.constraint_id_fk;
    END IF;
    FETCH v_tableidfk_cur INTO v_record;
  END LOOP; -- v_tableidfk_cur LOOP
  CLOSE v_tableidfk_cur;
  COMMIT;
END remove_unwanted_uniquekeys;

-- create Uniquekeys where Foreign keys has referened table column does not have UniqueKey
PROCEDURE uniquekey_constraint_columns(p_connectionid MD_CONNECTIONS.ID%TYPE) 
IS  
  CURSOR v_reftableidfk_cur
  IS
    SELECT DISTINCT (fk_con.reftable_id_fk)
    FROM md_constraints fk_con
    WHERE fk_con.name NOT IN
      (SELECT fk_con.name
      FROM md_constraints pk_con
      WHERE fk_con.reftable_id_fk = pk_con.table_id_fk
      AND fk_con.constraint_type  = 'FOREIGN KEY'
      AND pk_con.constraint_type  = 'UNIQUE'
      )
  AND fk_con.name NOT IN
    (SELECT fk_con.name
    FROM md_constraints pk_con
    WHERE fk_con.reftable_id_fk = pk_con.table_id_fk
    AND fk_con.constraint_type  = 'FOREIGN KEY'
    AND pk_con.constraint_type  = 'PK'
    )
  AND fk_con.reftable_id_fk != 0
  AND fk_con.TABLE_ID_FK    IN
    (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid
    );

  CURSOR v_uk_columns_cur(reftable_id_fk_id md_constraints.reftable_id_fk%TYPE)
  IS
    SELECT DISTINCT(con_det.column_id_fk)
    FROM md_constraints fk_con,
      md_constraint_details con_det,
      md_columns col
    WHERE fk_con.reftable_id_fk  = reftable_id_fk_id
    AND con_det.constraint_id_fk = fk_con.id
    AND con_det.ref_flag         ='Y'
    AND con_det.column_id_fk     = col.id
    AND fk_con.TABLE_ID_FK    IN
    (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionid
    );

  CURSOR v_md_constraint_cur(reftable_id_fk_id md_constraints.reftable_id_fk%TYPE)
  IS
    SELECT *
    FROM md_constraints
    WHERE MD_CONSTRAINTS.reftable_id_fk = reftable_id_fk_id and rownum = 1;

   CURSOR v_table_name_cur(reftable_id_fk_id md_constraints.reftable_id_fk%TYPE)
  IS
    SELECT TABLE_NAME FROM MGV_ALL_TABLES WHERE MGV_ALL_TABLES.CONNECTION_ID = p_connectionid and table_id = reftable_id_fk_id ;

  v_newid MD_CONSTRAINTS.ID%TYPE;
  v_newrow MD_CONSTRAINTS%ROWTYPE;
  v_uk_column_id md_constraint_details.column_id_fk%TYPE;
  v_reftable_id_fk_id md_constraints.reftable_id_fk%TYPE;
  v_temprow MD_CONSTRAINTS%ROWTYPE;
  v_tableName VARCHAR(4000);
BEGIN
  --  DBMS_OUTPUT.PUT_LINE(' p_connectionid : ' ||p_connectionid);
  OPEN v_reftableidfk_cur;
  FETCH v_reftableidfk_cur INTO v_reftable_id_fk_id;
  LOOP    
    EXIT WHEN v_reftableidfk_cur%NOTFOUND;
--    DBMS_OUTPUT.PUT_LINE(' LOOP1 refTable_id_fk Starts  : REFTABLE_ID_FK = ' || v_reftable_id_fk_id);  
    OPEN v_table_name_cur(v_reftable_id_fk_id);
    FETCH v_table_name_cur INTO v_tableName;
    LOOP
      EXIT WHEN v_table_name_cur%NOTFOUND;
--    DBMS_OUTPUT.PUT_LINE('Table Name = ' || v_tableName);
     FETCH v_table_name_cur INTO v_tableName;
    END LOOP; -- v_reftableidfk_cur LOOP
    CLOSE v_table_name_cur;

    -- create existing temp row of MD_CONSTRAINTS
    OPEN v_md_constraint_cur(v_reftable_id_fk_id);
    FETCH v_md_constraint_cur INTO v_temprow;
    LOOP  
      EXIT WHEN v_md_constraint_cur%NOTFOUND;
      DBMS_OUTPUT.PUT_LINE(' LOOP2 : MD_Constraints Starts');
      v_newrow.ID              := NULL;
      v_newrow.LANGUAGE        := v_temprow.LANGUAGE;
      v_newrow.TABLE_ID_FK     := v_reftable_id_fk_id;
      v_newrow.REFTABLE_ID_FK  := NULL;
      v_newrow.CONSTRAINT_TYPE := 'UNIQUE';
      v_newrow.NAME            := 'UK_' || SUBSTR(v_tableName, 1, 27) ;
      --   INSERT INTO MD_CONSTRAINT values v_newrow RETURNING ID INTO v_newid;
      INSERT INTO MD_CONSTRAINTS ( id,NAME,CONSTRAINT_TYPE,TABLE_ID_FK,REFTABLE_ID_FK, LANGUAGE)
             VALUES (v_newrow.ID,v_newrow.NAME,v_newrow.CONSTRAINT_TYPE,v_newrow.TABLE_ID_FK,v_newrow.REFTABLE_ID_FK, v_newrow.LANGUAGE)
             RETURNING ID INTO v_newid;

--      DBMS_OUTPUT.PUT_LINE('New Constraints Name ' || v_newrow.NAME|| ' v_newid = ' || v_newid);   
      OPEN v_uk_columns_cur(v_reftable_id_fk_id);
      FETCH v_uk_columns_cur INTO v_uk_column_id;
      LOOP
        EXIT WHEN v_uk_columns_cur%NOTFOUND;
--       DBMS_OUTPUT.PUT_LINE(' LOOP3 : MD_Constraints_Details Starts');
--       DBMS_OUTPUT.PUT_LINE('v_uk_column_id = ' || v_uk_column_id);

        INSERT INTO MD_CONSTRAINT_DETAILS (CONSTRAINT_ID_FK,REF_FLAG,COLUMN_ID_FK,DETAIL_ORDER)
               VALUES (v_newid,'N',v_uk_column_id,1);
    FETCH v_uk_columns_cur INTO v_uk_column_id;
--    DBMS_OUTPUT.PUT_LINE(' LOOP3 : MD_Constraints_Details Ends');
      END LOOP;
      CLOSE v_uk_columns_cur;

      INSERT INTO MD_DERIVATIVES (SRC_ID,SRC_TYPE,DERIVED_ID,DERIVED_TYPE,DERIVED_CONNECTION_ID_FK,ORIGINAL_IDENTIFIER,NEW_IDENTIFIER,DERIVED_OBJECT_NAMESPACE,DERIVATIVE_REASON,ENABLED)
             VALUES (v_newid,'MD_CONSTRAINTS',v_newid,'MD_CONSTRAINTS',p_connectionid,v_newrow.NAME, v_newrow.NAME,C_NS_CONSTRAINTS || TO_CHAR(p_connectionid),C_CONNECTIONTYPE_SCRATCH,'Y');

      FETCH v_md_constraint_cur INTO v_temprow;
--      DBMS_OUTPUT.PUT_LINE(' LOOP2 : MD_Constraints Ends');
    END LOOP;
    CLOSE v_md_constraint_cur;
    FETCH v_reftableidfk_cur INTO v_reftable_id_fk_id;
--      DBMS_OUTPUT.PUT_LINE(' LOOP1 refTable_id_fk Ends');
  COMMIT;
  END LOOP; -- v_reftableidfk_cur LOOP
  CLOSE v_reftableidfk_cur;
  COMMIT;
END uniquekey_constraint_columns;


PROCEDURE RefreshLineCountViews(p_connectionId MD_CONNECTIONS.ID%TYPE DEFAULT NULL)
IS
BEGIN
	 	UPDATE (select s.*, ltrim(rtrim(s.native_sql,' ' ||'  '|| chr(10)||chr(13)),' ' ||'  '|| chr(10)||chr(13)) trimmed from md_stored_programs s)  x
	 	SET LINECOUNT = LENGTH(trimmed) -  LENGTH(replace(trimmed,chr(10))) +1
	 	WHERE linecount IS NULL;

	 	UPDATE (select s.*, ltrim(rtrim(s.native_sql,' ' ||'  '|| chr(10)||chr(13)),' ' ||'  '|| chr(10)||chr(13)) trimmed from md_views s)  x
	 	SET LINECOUNT = LENGTH(trimmed) -  LENGTH(replace(trimmed,chr(10))) +1
	 	WHERE linecount IS NULL;

	 	UPDATE (select s.*, ltrim(rtrim(s.native_sql,' ' ||'  '|| chr(10)||chr(13)),' ' ||'  '|| chr(10)||chr(13)) trimmed from md_triggers s)  x
	 	SET LINECOUNT = LENGTH(trimmed) -  LENGTH(replace(trimmed,chr(10))) +1 
	 	WHERE linecount IS NULL;
END;

FUNCTION gatherConnectionStats(p_connectionId MD_CONNECTIONS.ID%TYPE,p_comments MD_CONNECTIONS.COMMENTS%TYPE) RETURN NUMBER
IS
	v_numCatalogs INTEGER := 0;
	v_numColumns INTEGER := 0;
	v_numConstraints INTEGER := 0;
	v_numGroups INTEGER := 0;
	v_numRoles INTEGER := 0;
	v_numIndexes INTEGER := 0;
	v_numOtherObjects INTEGER := 0;
	v_numPackages INTEGER := 0;
	v_numPrivileges INTEGER := 0;
	v_numSchemas INTEGER := 0;
	v_numSequences INTEGER := 0;
	v_numStoredPrograms INTEGER := 0;
	v_numSynonyms INTEGER := 0;
	v_numTables INTEGER := 0;
	v_numTableSpaces INTEGER := 0;
	v_numTriggers INTEGER := 0;
	v_numUserDefinedDataTypes INTEGER := 0;
	v_numUsers INTEGER := 0;
	v_numViews INTEGER := 0;
BEGIN
	SELECT /* APEX684f1a */  COUNT(*) INTO v_numCatalogs FROM MD_CATALOGS  WHERE CONNECTION_ID_FK = p_connectionId;
	SELECT /* APEXbcefbc */  COUNT(*) INTO v_numColumns FROM MD_COLUMNS WHERE TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionId);
	SELECT /* APEX904862 */  COUNT(*) INTO v_numConstraints FROM MD_CONSTRAINTS WHERE  TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionId);
	SELECT /* APEX4f89b0 */  COUNT(*) INTO v_numGroups FROM MD_GROUPS WHERE GROUP_FLAG = 'G' AND SCHEMA_ID_FK IN (SELECT SCHEMA_ID FROM MGV_ALL_SCHEMA WHERE CONNECTION_ID = p_connectionId); 
	SELECT /* APEXbfdab1 */  COUNT(*) INTO v_numRoles FROM MD_GROUPS WHERE GROUP_FLAG = 'R' AND SCHEMA_ID_FK IN (SELECT SCHEMA_ID FROM MGV_ALL_SCHEMA WHERE CONNECTION_ID = p_connectionId);
	SELECT /* APEXba0b46 */  COUNT(*) INTO v_numIndexes FROM MD_INDEXES  WHERE TABLE_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionId);
	SELECT /* APEXca8c7c */  COUNT(*) INTO v_numOtherObjects FROM MD_OTHER_OBJECTS WHERE SCHEMA_ID_FK IN (SELECT SCHEMA_ID FROM MGV_ALL_SCHEMA WHERE CONNECTION_ID = p_connectionId);
	SELECT /* APEX7b197e */  COUNT(*) INTO v_numPackages FROM MD_PACKAGES WHERE SCHEMA_ID_FK IN (SELECT SCHEMA_ID FROM MGV_ALL_SCHEMA WHERE CONNECTION_ID = p_connectionId);  
	SELECT /* APEX3f3821 */  COUNT(*) INTO v_numPrivileges FROM MD_PRIVILEGES WHERE SCHEMA_ID_FK IN (SELECT SCHEMA_ID FROM MGV_ALL_SCHEMA WHERE CONNECTION_ID = p_connectionId);
	SELECT /* APEXa9bb8b */  COUNT(*) INTO v_numSchemas FROM MD_SCHEMAS WHERE CATALOG_ID_FK IN (SELECT CATALOG_ID FROM MGV_ALL_CATALOGS WHERE CONNECTION_ID = p_connectionId);
	SELECT /* APEXa0cce3 */  COUNT(*) INTO v_numSequences FROM MD_SEQUENCES WHERE SCHEMA_ID_FK IN (SELECT SCHEMA_ID FROM MGV_ALL_SCHEMA WHERE CONNECTION_ID = p_connectionId);
	SELECT /* APEXa3dbd9 */  COUNT(*) INTO v_numStoredPrograms FROM MD_STORED_PROGRAMS WHERE SCHEMA_ID_FK IN (SELECT SCHEMA_ID FROM MGV_ALL_SCHEMA WHERE CONNECTION_ID = p_connectionId);
	SELECT /* APEXf14b61 */  COUNT(*) INTO v_numSynonyms FROM MD_SYNONYMS WHERE SCHEMA_ID_FK IN (SELECT SCHEMA_ID FROM MGV_ALL_SCHEMA WHERE CONNECTION_ID = p_connectionId);
	SELECT /* APEX552ab8 */  COUNT(*) INTO v_numTables FROM MD_TABLES WHERE SCHEMA_ID_FK IN (SELECT SCHEMA_ID FROM MGV_ALL_SCHEMA WHERE CONNECTION_ID = p_connectionId);
	SELECT /* APEX133fb1 */  COUNT(*) INTO v_numTableSpaces FROM MD_TABLESPACES WHERE SCHEMA_ID_FK IN (SELECT SCHEMA_ID FROM MGV_ALL_SCHEMA WHERE CONNECTION_ID = p_connectionId);
	SELECT /* APEX659902 */  COUNT(*) INTO v_numTriggers FROM MD_TRIGGERS WHERE TABLE_OR_VIEW_ID_FK IN (SELECT TABLE_ID FROM MGV_ALL_TABLES WHERE CONNECTION_ID = p_connectionId
                                                                                          UNION SELECT VIEW_ID FROM MGV_ALL_VIEWS WHERE CONNECTION_ID = p_connectionId);
	SELECT /* APEX0c1a9d */  COUNT(*) INTO v_numUserDefinedDataTypes FROM MD_USER_DEFINED_DATA_TYPES WHERE SCHEMA_ID_FK IN (SELECT SCHEMA_ID FROM MGV_ALL_SCHEMA WHERE CONNECTION_ID = p_connectionId);
	SELECT /* APEX1c2846 */  COUNT(*) INTO v_numUsers FROM MD_USERS WHERE SCHEMA_ID_FK IN (SELECT SCHEMA_ID FROM MGV_ALL_SCHEMA WHERE CONNECTION_ID = p_connectionId);
	SELECT /* APEXcaa4e7 */  COUNT(*) INTO v_numViews FROM MD_VIEWS WHERE SCHEMA_ID_FK IN (SELECT SCHEMA_ID FROM MGV_ALL_SCHEMA WHERE CONNECTION_ID = p_connectionId);
  	UPDATE /* APEX26ec73 */  MD_CONNECTIONS SET  
		NUM_CATALOGS = v_numCatalogs,
		NUM_COLUMNS = v_numColumns,
		NUM_CONSTRAINTS = v_numConstraints,
		NUM_GROUPS = v_numGroups,
		NUM_ROLES = v_numRoles,
		NUM_INDEXES = v_numIndexes,
		NUM_OTHER_OBJECTS = v_numOtherObjects,
		NUM_PACKAGES = v_numPackages,
		NUM_PRIVILEGES = v_numPrivileges,
		NUM_SCHEMAS = v_numSchemas,
		NUM_SEQUENCES = v_numSequences,
		NUM_STORED_PROGRAMS = v_numStoredPrograms,
		NUM_SYNONYMS = v_numSynonyms,
		NUM_TABLES = v_numTables,
		NUM_TABLESPACES = v_numTableSpaces,
		NUM_TRIGGERS = v_numTriggers,
		NUM_USER_DEFINED_DATA_TYPES = v_numUserDefinedDataTypes,
		num_users = v_numusers,
        num_views = v_numviews,
        COMMENTS = COMMENTS || p_comments    
	WHERE ID = p_connectionId;
	COMMIT;
    RefreshLineCountViews(p_connectionId);
	COMMIT;
	RETURN 0;
END gatherConnectionStats;

--
-- Procedures that start with "insert_*" insert a copy of MD_* values into MD_DERIVATIVES table.
-- MD_* are MD_COLUMNS, MD_CONSTRAINTS, MD_TABLES, MD_TRIGGERS, MD_INDEXES, MD_SEQUENCES, MD_STORED_PROGRAMS 
-- AND MD_VIEWS
--
PROCEDURE insert_all_columns(p_connectionid MD_CONNECTIONS.ID%TYPE,
                                     p_tableid MD_TABLES.ID%TYPE)
IS
  cv_curs REF_CURSOR;
  v_row MD_COLUMNS%ROWTYPE;
  v_selectStmt VARCHAR2(4000) := 'SELECT * FROM MD_COLUMNS WHERE TABLE_ID_FK = ' || p_tableid;
  v_newName MD_COLUMNS.COLUMN_NAME%TYPE;
  v_transformed MD_DERIVATIVES.TRANSFORMED%TYPE := NULL;
BEGIN
  OPEN cv_curs FOR v_selectStmt;
  LOOP
    FETCH cv_curs INTO v_row;
    EXIT WHEN cv_curs%NOTFOUND;

    v_newName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_row.COLUMN_NAME);
    if v_row.COLUMN_NAME <> v_newName then
       v_transformed := C_TRANSFORMED_TRUE;
    end if;

    INSERT /* APEXabeb00 */  INTO 
          MD_DERIVATIVES(SRC_ID, SRC_TYPE, DERIVED_ID, DERIVED_TYPE, DERIVED_CONNECTION_ID_FK, TRANSFORMED,
                  ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE, DERIVATIVE_REASON)
          VALUES(v_row.id, C_OBJECTTYPE_COLUMNS, v_row.id, C_OBJECTTYPE_COLUMNS, p_connectionid, v_transformed,
                  v_row.COLUMN_NAME, v_newName, C_OBJECTTYPE_COLUMNS || TO_CHAR(p_tableid), C_CONNECTIONTYPE_SCRATCH);

  END LOOP;
  close cv_curs;
END insert_all_columns;

PROCEDURE insert_all_indexes(p_connectionid MD_CONNECTIONS.ID%TYPE,
                                     p_tableid MD_TABLES.ID%TYPE)
IS
  cv_curs REF_CURSOR;
  v_row MD_INDEXES%ROWTYPE;
  v_selectStmt VARCHAR2(4000) := 'SELECT * FROM MD_INDEXES WHERE MD_INDEXES.TABLE_ID_FK = ' || p_tableid;
  v_newName MD_INDEXES.INDEX_NAME%TYPE;
  v_transformed MD_DERIVATIVES.TRANSFORMED%TYPE := NULL;
BEGIN
  OPEN cv_curs FOR v_selectStmt;
  LOOP
    FETCH cv_curs INTO v_row;
    EXIT WHEN cv_curs%NOTFOUND;

    v_newName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_row.INDEX_NAME);
    if v_row.INDEX_NAME <> v_newName then
       v_transformed := C_TRANSFORMED_TRUE;
    end if;

    INSERT /* APEXb29adb */  INTO 
          MD_DERIVATIVES(SRC_ID, SRC_TYPE, DERIVED_ID, DERIVED_TYPE, DERIVED_CONNECTION_ID_FK, TRANSFORMED,
                  ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE, DERIVATIVE_REASON)
          VALUES(v_row.id, C_OBJECTTYPE_INDEXES, v_row.id, C_OBJECTTYPE_INDEXES, p_connectionid, v_transformed,
                  v_row.INDEX_NAME, v_newName, C_OBJECTTYPE_INDEXES || TO_CHAR(p_tableid), C_CONNECTIONTYPE_SCRATCH);

  END LOOP;
  close cv_curs;
END insert_all_indexes;

PROCEDURE insert_all_table_triggers(p_connectionid MD_CONNECTIONS.ID%TYPE,
                                     p_tableid MD_TABLES.ID%TYPE)
IS
  cv_curs REF_CURSOR;
  v_row MD_TRIGGERS%ROWTYPE;
  v_selectStmt VARCHAR2(4000) := 'SELECT * FROM MD_TRIGGERS WHERE MD_TRIGGERS.TABLE_OR_VIEW_ID_FK = ' || p_tableid;
  v_newName MD_TRIGGERS.TRIGGER_NAME%TYPE;
  v_transformed MD_DERIVATIVES.TRANSFORMED%TYPE := NULL;
BEGIN
  OPEN cv_curs FOR v_selectStmt;
  LOOP
    FETCH cv_curs INTO v_row;
    EXIT WHEN cv_curs%NOTFOUND;

    v_newName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_row.TRIGGER_NAME);
    if v_row.TRIGGER_NAME <> v_newName then
       v_transformed := C_TRANSFORMED_TRUE;
    end if;

    INSERT /* APEXc6009e */  INTO 
          MD_DERIVATIVES(SRC_ID, SRC_TYPE, DERIVED_ID, DERIVED_TYPE, DERIVED_CONNECTION_ID_FK, TRANSFORMED,
                  ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE, DERIVATIVE_REASON)
          VALUES(v_row.id, C_OBJECTTYPE_TRIGGERS, v_row.id, C_OBJECTTYPE_TRIGGERS, p_connectionid, v_transformed,
                  v_row.TRIGGER_NAME, v_newName, C_NS_DB_TRIGGERS || TO_CHAR(p_tableid), C_CONNECTIONTYPE_SCRATCH);

  END LOOP;
  close cv_curs;
END insert_all_table_triggers;

PROCEDURE insert_all_constraints(p_connectionid MD_CONNECTIONS.ID%TYPE,
                                 p_tableid MD_TABLES.ID%TYPE)
IS
  cv_curs REF_CURSOR;
  v_row MD_CONSTRAINTS%ROWTYPE;
  v_selectStmt VARCHAR2(4000) := 'SELECT * FROM MD_CONSTRAINTS WHERE MD_CONSTRAINTS.TABLE_ID_FK = ' || p_tableid;
  v_newName MD_CONSTRAINTS.NAME%TYPE;
  v_transformed MD_DERIVATIVES.TRANSFORMED%TYPE := NULL;
BEGIN
  OPEN cv_curs FOR v_selectStmt;
  LOOP
    FETCH cv_curs INTO v_row;
    EXIT WHEN cv_curs%NOTFOUND;

    v_newName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_row.NAME);
    if v_row.NAME <> v_newName then
       v_transformed := C_TRANSFORMED_TRUE;
    end if;

    INSERT /* APEXc6056b */  INTO 
          MD_DERIVATIVES(SRC_ID, SRC_TYPE, DERIVED_ID, DERIVED_TYPE, DERIVED_CONNECTION_ID_FK, TRANSFORMED,
                  ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE, DERIVATIVE_REASON)
          VALUES(v_row.id, C_OBJECTTYPE_CONSTRAINTS, v_row.id, C_OBJECTTYPE_CONSTRAINTS, p_connectionid, v_transformed,
                  v_row.NAME, v_newName, C_NS_CONSTRAINTS || TO_CHAR(p_tableid), C_CONNECTIONTYPE_SCRATCH);

  END LOOP;
  close cv_curs;
END insert_all_constraints;


PROCEDURE insert_all_tables_cascade(p_connectionid MD_CONNECTIONS.ID%TYPE,
                                    p_schemaid MD_SCHEMAS.ID%TYPE)
IS
  cv_curs REF_CURSOR;
  v_row MD_TABLES%ROWTYPE;
  v_selectStmt VARCHAR2(4000) := 'SELECT * FROM MD_TABLES where SCHEMA_ID_FK = ' || p_schemaid;
  v_newName MD_TABLES.TABLE_NAME%TYPE;
  v_transformed MD_DERIVATIVES.TRANSFORMED%TYPE := NULL;

BEGIN
  OPEN cv_curs FOR v_selectStmt;
  LOOP
    FETCH cv_curs INTO v_row;
    EXIT WHEN cv_curs%NOTFOUND;

    v_newName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_row.TABLE_NAME);
    if v_row.TABLE_NAME <> v_newName then
       v_transformed := C_TRANSFORMED_TRUE;
    end if;

    INSERT /* APEXa42d18 */  INTO 
          MD_DERIVATIVES(SRC_ID, SRC_TYPE, DERIVED_ID, DERIVED_TYPE, DERIVED_CONNECTION_ID_FK, TRANSFORMED,
                  ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE, DERIVATIVE_REASON)
          VALUES(v_row.id, C_OBJECTTYPE_TABLES, v_row.id, C_OBJECTTYPE_TABLES, p_connectionid, v_transformed,
                  v_row.TABLE_NAME, v_newName, C_NS_SCHEMA_OBJS || TO_CHAR(p_schemaid), C_CONNECTIONTYPE_SCRATCH);

     insert_all_columns(p_connectionid, v_row.id);
     insert_all_indexes(p_connectionid, v_row.id);
     insert_all_table_triggers(p_connectionid, v_row.id);
     insert_all_constraints(p_connectionid, v_row.id);

  END LOOP;
  close cv_curs;	
END insert_all_tables_cascade;

PROCEDURE insert_all_views(p_connectionid MD_CONNECTIONS.ID%TYPE,
                                    p_schemaid MD_SCHEMAS.ID%TYPE)
IS
  cv_curs REF_CURSOR;
  v_row MD_VIEWS%ROWTYPE;
  v_selectStmt VARCHAR2(4000) := 'SELECT * FROM MD_VIEWS WHERE SCHEMA_ID_FK = ' || p_schemaid;
  v_newName MD_VIEWS.VIEW_NAME%TYPE;
  v_transformed MD_DERIVATIVES.TRANSFORMED%TYPE := NULL;

BEGIN
  OPEN cv_curs FOR v_selectStmt;
  LOOP
    FETCH cv_curs INTO v_row;
    EXIT WHEN cv_curs%NOTFOUND;

    v_newName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_row.VIEW_NAME);
    if v_row.VIEW_NAME <> v_newName then
       v_transformed := C_TRANSFORMED_TRUE;
    end if;

    INSERT /* APEX367c5b */  INTO 
          MD_DERIVATIVES(SRC_ID, SRC_TYPE, DERIVED_ID, DERIVED_TYPE, DERIVED_CONNECTION_ID_FK, TRANSFORMED,
                  ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE, DERIVATIVE_REASON)
          VALUES(v_row.id, C_OBJECTTYPE_VIEWS, v_row.id, C_OBJECTTYPE_VIEWS, p_connectionid, v_transformed,
                  v_row.VIEW_NAME, v_newName, C_NS_SCHEMA_OBJS || TO_CHAR(p_schemaid), C_CONNECTIONTYPE_SCRATCH);

  END LOOP;
  close cv_curs;	
END insert_all_views;

PROCEDURE insert_all_sequences(p_connectionid MD_CONNECTIONS.ID%TYPE,
                                    p_schemaid MD_SCHEMAS.ID%TYPE)
IS
  cv_curs REF_CURSOR;
  v_row MD_SEQUENCES%ROWTYPE;
  v_selectStmt VARCHAR2(4000) := 'SELECT * FROM MD_SEQUENCES WHERE SCHEMA_ID_FK = ' || p_schemaid;
  v_newName MD_SEQUENCES.NAME%TYPE;
  v_transformed MD_DERIVATIVES.TRANSFORMED%TYPE := NULL;

BEGIN
  OPEN cv_curs FOR v_selectStmt;
  LOOP
    FETCH cv_curs INTO v_row;
    EXIT WHEN cv_curs%NOTFOUND;

    v_newName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_row.NAME);
    if v_row.NAME <> v_newName then
       v_transformed := C_TRANSFORMED_TRUE;
    end if;

    INSERT /* APEX898986 */  INTO 
          MD_DERIVATIVES(SRC_ID, SRC_TYPE, DERIVED_ID, DERIVED_TYPE, DERIVED_CONNECTION_ID_FK, TRANSFORMED,
                  ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE, DERIVATIVE_REASON)
          VALUES(v_row.id, C_OBJECTTYPE_SEQUENCES, v_row.id, C_OBJECTTYPE_SEQUENCES, p_connectionid, v_transformed,
                  v_row.NAME, v_newName, C_NS_SCHEMA_OBJS || TO_CHAR(p_schemaid), C_CONNECTIONTYPE_SCRATCH);

  END LOOP;
  close cv_curs;	
END insert_all_sequences;

PROCEDURE insert_all_unpackaged_sps(p_connectionid MD_CONNECTIONS.ID%TYPE,
                                    p_schemaid MD_SCHEMAS.ID%TYPE)
IS
  cv_curs REF_CURSOR;
  v_row MD_STORED_PROGRAMS%ROWTYPE;
  v_selectStmt VARCHAR2(4000) := 'SELECT * FROM MD_STORED_PROGRAMS WHERE SCHEMA_ID_FK = ' || p_schemaid || ' AND PACKAGE_ID_FK IS NULL';
  v_newName MD_STORED_PROGRAMS.NAME%TYPE;
  v_transformed MD_DERIVATIVES.TRANSFORMED%TYPE := NULL;

BEGIN
  OPEN cv_curs FOR v_selectStmt;
  LOOP
    FETCH cv_curs INTO v_row;
    EXIT WHEN cv_curs%NOTFOUND;

    v_newName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_row.NAME);
    if v_row.NAME <> v_newName then
       v_transformed := C_TRANSFORMED_TRUE;
    end if;

    INSERT /* APEX5765e9 */  INTO 
          MD_DERIVATIVES(SRC_ID, SRC_TYPE, DERIVED_ID, DERIVED_TYPE, DERIVED_CONNECTION_ID_FK, TRANSFORMED,
                  ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE, DERIVATIVE_REASON)
          VALUES(v_row.id, C_OBJECTTYPE_STORED_PROGRAMS, v_row.id, C_OBJECTTYPE_STORED_PROGRAMS, p_connectionid, v_transformed,
                  v_row.NAME, v_newName, C_NS_SCHEMA_OBJS || TO_CHAR(p_schemaid), C_CONNECTIONTYPE_SCRATCH);

  END LOOP;
  close cv_curs;	
END insert_all_unpackaged_sps;


PROCEDURE insert_all_schobjs_cascade(p_connectionid MD_CONNECTIONS.ID%TYPE,
                                            p_schemaid MD_SCHEMAS.ID%TYPE)
IS 
BEGIN
  insert_all_tables_cascade(p_connectionid, p_schemaid);
  insert_all_views(p_connectionid, p_schemaid);
  insert_all_sequences(p_connectionid, p_schemaid);
  insert_all_unpackaged_sps(p_connectionid, p_schemaid);
END insert_all_schobjs_cascade;	  


PROCEDURE insert_catalogs_cascade(p_connectionid MD_CONNECTIONS.ID%TYPE,
                                  p_catalogid MD_CATALOGS.ID%TYPE)
IS
  cv_curs REF_CURSOR; 
  v_selectStmt VARCHAR2(4000) := 'SELECT a.id schema_id, A.name schema_name, b.id catalog_id, B.CATALOG_NAME, B.DUMMY_FLAG, A.type, A.character_set, A.version_tag 
      FROM MD_SCHEMAS A, MD_CATALOGS B
      WHERE 
      	A.CATALOG_ID_FK = B.ID 
        AND B.ID =' || p_catalogid  || 
        ' AND CONNECTION_ID_FK = ' || p_connectionid ;
  v_derivedRec  DERIVATIVE_REC;
  v_newName MD_SCHEMAS.NAME%TYPE;
  v_transformed MD_DERIVATIVES.TRANSFORMED%TYPE := NULL;
BEGIN
   OPEN cv_curs FOR v_selectStmt;
   LOOP
     FETCH cv_curs INTO v_derivedRec;
     EXIT WHEN cv_curs%NOTFOUND;

     if v_derivedRec.dummy_flag  <> C_DUMMYFLAG_TRUE then
        v_newName := CREATE_SCHEMANAME(v_derivedRec.schema_name , v_derivedRec.catalog_name);
        v_transformed := C_TRANSFORMED_TRUE;
     else
	    v_newName := v_derivedRec.schema_name;
     end if;

     if v_newName <> MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_newName) then
        v_newName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_newName);
        v_transformed := C_TRANSFORMED_TRUE;
     end if;

     INSERT /* APEXd903b8 */  INTO 
          MD_DERIVATIVES(SRC_ID, SRC_TYPE, DERIVED_ID, DERIVED_TYPE, DERIVED_CONNECTION_ID_FK, TRANSFORMED,
                  ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE, DERIVATIVE_REASON)
          VALUES (v_derivedRec.schema_id, C_OBJECTTYPE_SCHEMAS, v_derivedRec.schema_id, C_OBJECTTYPE_SCHEMAS, p_connectionid, v_transformed,
                  v_derivedRec.schema_name, v_newName, C_NS_DATABASE, C_CONNECTIONTYPE_SCRATCH);

     INSERT /* APEXaf596d */  INTO 
          MD_DERIVATIVES(SRC_ID, SRC_TYPE, DERIVED_ID, DERIVED_TYPE, DERIVED_CONNECTION_ID_FK, TRANSFORMED,
                  ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE, DERIVATIVE_REASON)
          VALUES(v_derivedRec.catalog_id, C_OBJECTTYPE_CATALOGS, v_derivedRec.catalog_id, C_OBJECTTYPE_SCHEMAS, p_connectionid, v_transformed, 
                  v_derivedRec.catalog_name, v_newName, NULL, C_CONNECTIONTYPE_SCRATCH);

     insert_all_schobjs_cascade(p_connectionid, v_derivedRec.schema_id);

   END LOOP;
   close cv_curs;
END insert_catalogs_cascade;


PROCEDURE insert_connection_cascade(p_connectionid MD_CONNECTIONS.ID%TYPE)
IS
  v_connectionsRow MD_CONNECTIONS%ROWTYPE;
  v_origName MD_CONNECTIONS.NAME%TYPE;
  v_newName MD_CONNECTIONS.NAME%TYPE;
  v_id MD_CONNECTIONS.ID%TYPE;
  v_catid MD_CATALOGS.ID%TYPE;
  v_transformed MD_DERIVATIVES.TRANSFORMED%TYPE := NULL;
  cv_curs REF_CURSOR;

BEGIN
  SELECT /* APEX953cea */  * INTO v_connectionsRow from MD_CONNECTIONS WHERE "ID" = p_connectionid;
      v_origName := v_connectionsRow.NAME;
      v_newName := v_origName;
      v_id := v_connectionsRow.ID;

      if v_newName <> MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_newName) then
        v_newName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_newName);
        v_transformed := C_TRANSFORMED_TRUE;
      end if;

      INSERT /* APEXda2f55 */  INTO 
          MD_DERIVATIVES(SRC_ID, SRC_TYPE, DERIVED_ID, DERIVED_TYPE, DERIVED_CONNECTION_ID_FK, TRANSFORMED,
                      ORIGINAL_IDENTIFIER, NEW_IDENTIFIER, DERIVED_OBJECT_NAMESPACE, DERIVATIVE_REASON)
          VALUES(v_id , C_OBJECTTYPE_CONNECTIONS, v_id, C_OBJECTTYPE_CONNECTIONS, v_id, v_transformed, 
                      v_origName, v_newName, '', C_CONNECTIONTYPE_SCRATCH);

  OPEN cv_curs FOR 'SELECT id from MD_CATALOGS where connection_id_fk ='|| v_connectionsRow.id;
  LOOP
    FETCH cv_curs INTO v_catid;
    EXIT WHEN cv_curs%NOTFOUND;

      insert_catalogs_cascade(v_id, v_catid);
   END LOOP;   
END insert_connection_cascade;

PROCEDURE populate_derivatives_table(p_connectionid MD_CONNECTIONS.ID%TYPE)
IS
BEGIN
  insert_connection_cascade(p_connectionid);
END populate_derivatives_table;

--
-- reverts NEW_IDENTIFIER values back to their default(derived) values in MD_DERIVATIVES table.
--
PROCEDURE revert_derivatives_table(p_connectionid MD_CONNECTIONS.ID%TYPE)
IS
  cv_curs REF_CURSOR;  
  v_row MD_DERIVATIVES%ROWTYPE;
  v_origName MD_DERIVATIVES.ORIGINAL_IDENTIFIER%TYPE;
  v_derivedName MD_DERIVATIVES.NEW_IDENTIFIER%TYPE;
  v_transformed MD_DERIVATIVES.TRANSFORMED%TYPE;
  v_selectStmt VARCHAR2(4000) := 'SELECT * FROM MD_DERIVATIVES 
         WHERE DERIVED_CONNECTION_ID_FK = ' || p_connectionid ;
BEGIN
  OPEN cv_curs FOR v_selectStmt;
  LOOP
    FETCH cv_curs INTO v_row;
    EXIT WHEN cv_curs%NOTFOUND;

    v_transformed := NULL;
    v_derivedName := MIGRATION_TRANSFORMER.TRANSFORM_IDENTIFIER(v_row.ORIGINAL_IDENTIFIER);
    if v_row.NEW_IDENTIFIER <> v_derivedName then
      if v_row.ORIGINAL_IDENTIFIER <> v_derivedName then
         v_transformed := C_TRANSFORMED_TRUE;
      end if;

      UPDATE /* APEX5a1f31 */  MD_DERIVATIVES SET TRANSFORMED = v_transformed, NEW_IDENTIFIER = v_derivedName WHERE 
         SRC_ID = v_row.SRC_ID and DERIVED_CONNECTION_ID_FK = p_connectionid ;
    end if;
  END LOOP;
  CLOSE cv_curs;
END revert_derivatives_table;


-- One time initialisation
begin
NULL;
end;

/


PROMPT Completed MIGRATION.sql
PROMPT


-- ============================================================================
-- Deploy: MIGRATION_REPORT.sql
-- Category: package bodies
-- ============================================================================

PROMPT Deploying MIGRATION_REPORT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package Body MIGRATION_REPORT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "DB_JT"."MIGRATION_REPORT" AS
--Function getCaptureStatus
FUNCTION getCaptureStatus(srcid IN NUMBER)  RETURN VARCHAR2 IS
status VARCHAR(20) default ' ';
BEGIN
  select decode((select count(*) from migrlog where ref_object_id=srcid and severity>800),0,'Passed','Failed') into status from dual;
  return status;
END getCaptureStatus;
--Function getConvertStatus
FUNCTION getConvertStatus(srcid IN NUMBER,convert_conn_id IN NUMBER)  RETURN VARCHAR2 IS
status VARCHAR(20) default ' ';
ifconvert NUMBER default 0;
BEGIN
  SELECT count(*) into ifconvert FROM md_derivatives WHERE src_id=srcid and derived_connection_id_fk=convert_conn_id;
  IF ifconvert=0 THEN
      RETURN 'NotConverted';
  ELSIF getCaptureStatus(srcid)='Failed' THEN
     RETURN 'Failed';
  ELSE
   BEGIN
    SELECT 
   decode((SELECT DISTINCT severity from migrlog 
                  WHERE  ref_object_id IN (SELECT derived_id FROM md_derivatives WHERE src_id=srcid and derived_connection_id_fk= convert_conn_id) 
                         and severity=1000
           UNION
           SELECT DISTINCT severity from migrlog 
                  WHERE ref_object_id IN (SELECT derived_id FROM md_derivatives where src_id=srcid and derived_connection_id_fk=convert_conn_id)
                  AND severity=900 
                  AND logtext like '%limitation%'),
                  null,'Passed',1000,'Failed',900,'Limitation',' ') 
  into status from dual;
  return status;
  END;
  END IF;
END getConvertStatus;
--Function getGenerateStatus
FUNCTION getGenerateStatus(srcid IN number,convert_conn_id IN NUMBER)  RETURN VARCHAR2 IS
status VARCHAR(20) default ' ';

BEGIN
   status:=getConvertStatus(srcid,convert_conn_id);   
   IF status='NotConverted' THEN
      RETURN 'NotGenerated';
   ELSIF  status='Failed'  THEN
      RETURN 'Failed';      
   ELSE
     BEGIN
        SELECT 
           decode((SELECT count(*) FROM migrlog 
                   WHERE ref_object_id IN (SELECT derived_id FROM md_derivatives WHERE src_id=srcid and derived_connection_id_fk=convert_conn_id) 
                         AND phase='Generate'
                         AND severity>800),
                    0,'Passed','Failed')
             INTO status FROM dual;
        RETURN status;
    END;
   END IF;
END getGenerateStatus;
--migration details for each objects
FUNCTION getDetails(capture_conn_id IN NUMBER,convert_conn_id IN NUMBER) RETURN migr_report_detail_table PIPELINED IS
BEGIN
FOR cur IN (
    select allobjs.ObjID captured_id,
           allobjs.ObjName captured_name,
           md.new_identifier converted_name,
           allobjs.ObjType captured_type,
           decode(md.derived_type,'MD_INDEXES', substr(md.derived_type,4, length(md.derived_type)-5),substr(md.derived_type,4, length(md.derived_type)-4)) converted_type,
           allobjs.CaptureStatus capture_status,
           allobjs.ConvertStatus convert_status,
           allobjs.GenerateStatus generate_status,
           decode(mlog.logtext,null,' ',mlog.logtext) logtext from (
 --schema
     SELECT md_schemas.id ObjID,md_schemas.name ObjName,'SCHEMA' ObjType,
          MIGRATION_REPORT.getCaptureStatus(md_schemas.id) CaptureStatus,
          MIGRATION_REPORT.getConvertStatus(md_schemas.id,convert_conn_id) ConvertStatus,
          MIGRATION_REPORT.getGenerateStatus(md_schemas.id,convert_conn_id) GenerateStatus
       FROM md_schemas,md_catalogs
       WHERE md_schemas.catalog_id_fk= md_catalogs.id
            AND md_catalogs.connection_id_fk=capture_conn_id
--table
UNION ALL
      SELECT md_tables.id ObjID,md_tables.table_name ObjName,'TABLE' ObjType,
          MIGRATION_REPORT.getCaptureStatus(md_tables.id) CaptureStatus,
          MIGRATION_REPORT.getConvertStatus(md_tables.id,convert_conn_id) ConvertStatus,
          MIGRATION_REPORT.getGenerateStatus(md_tables.id,convert_conn_id) GenerateStatus
       FROM md_tables,md_schemas,md_catalogs
       WHERE md_tables.schema_id_fk=md_schemas.id
            AND md_schemas.catalog_id_fk= md_catalogs.id
            AND md_catalogs.connection_id_fk=capture_conn_id
--view
UNION ALL
      SELECT md_views.id ObjID,md_views.view_name ObjName,'View' ObjType,
          MIGRATION_REPORT.getCaptureStatus(md_views.id) CaptureStatus,
          MIGRATION_REPORT.getConvertStatus(md_views.id,convert_conn_id) ConvertStatus,
          MIGRATION_REPORT.getGenerateStatus(md_views.id,convert_conn_id) GenerateStatus
       FROM md_views,md_schemas,md_catalogs
       WHERE md_views.schema_id_fk=md_schemas.id
            AND md_schemas.catalog_id_fk= md_catalogs.id
            AND md_catalogs.connection_id_fk=capture_conn_id
--storedprogram
UNION ALL
      SELECT md_stored_programs.id ObjID,md_stored_programs.name ObjName,'STORED_PROGRAM' ObjType,
          MIGRATION_REPORT.getCaptureStatus(md_stored_programs.id) CaptureStatus,
          MIGRATION_REPORT.getConvertStatus(md_stored_programs.id,convert_conn_id) ConvertStatus,
          MIGRATION_REPORT.getGenerateStatus(md_stored_programs.id,convert_conn_id) GenerateStatus
       FROM md_stored_programs,md_schemas,md_catalogs
       WHERE md_stored_programs.schema_id_fk=md_schemas.id
            AND md_schemas.catalog_id_fk= md_catalogs.id
            AND md_catalogs.connection_id_fk=capture_conn_id
--index
UNION ALL
      SELECT md_indexes.id ObjID,md_indexes.index_name ObjName,'INDEX' ObjType,
          MIGRATION_REPORT.getCaptureStatus(md_indexes.id) CaptureStatus,
          MIGRATION_REPORT.getConvertStatus(md_indexes.id,convert_conn_id) ConvertStatus,
          MIGRATION_REPORT.getGenerateStatus(md_indexes.id,convert_conn_id) GenerateStatus
       FROM md_indexes, md_tables,md_schemas,md_catalogs
       WHERE md_indexes.table_id_fk= md_tables.id
            AND md_tables.schema_id_fk=md_schemas.id
            AND md_schemas.catalog_id_fk= md_catalogs.id
            AND md_catalogs.connection_id_fk=capture_conn_id
UNION ALL
      SELECT md_constraints.id ObjID,md_constraints.name ObjName,'CONSTRAINT' ObjType,
          MIGRATION_REPORT.getCaptureStatus(md_constraints.id) CaptureStatus,
          MIGRATION_REPORT.getConvertStatus(md_constraints.id,convert_conn_id) ConvertStatus,
          MIGRATION_REPORT.getGenerateStatus(md_constraints.id,convert_conn_id) GenerateStatus
       FROM md_constraints, md_tables,md_schemas,md_catalogs
       WHERE md_constraints.table_id_fk= md_tables.id
            AND md_tables.schema_id_fk=md_schemas.id
            AND md_schemas.catalog_id_fk= md_catalogs.id
            AND md_catalogs.connection_id_fk=capture_conn_id  
UNION ALL
      SELECT md_triggers.id ObjID,md_triggers.trigger_name ObjName,'TRIGGER' ObjType,
          MIGRATION_REPORT.getCaptureStatus(md_triggers.id) CaptureStatus,
          MIGRATION_REPORT.getConvertStatus(md_triggers.id,convert_conn_id) ConvertStatus,
          MIGRATION_REPORT.getGenerateStatus(md_triggers.id,convert_conn_id) GenerateStatus
       FROM md_triggers, md_tables,md_schemas,md_catalogs
       WHERE md_triggers.table_or_view_id_fk=md_tables.id
            AND md_tables.schema_id_fk=md_schemas.id
            AND md_schemas.catalog_id_fk= md_catalogs.id
            AND md_catalogs.connection_id_fk=capture_conn_id 
UNION ALL
       SELECT md_triggers.id ObjID,md_triggers.trigger_name ObjName,'TRIGGER' ObjType,
          MIGRATION_REPORT.getCaptureStatus(md_triggers.id) CaptureStatus,
          MIGRATION_REPORT.getConvertStatus(md_triggers.id,convert_conn_id) ConvertStatus,
          MIGRATION_REPORT.getGenerateStatus(md_triggers.id,convert_conn_id) GenerateStatus
       FROM md_triggers, md_views,md_schemas,md_catalogs
       WHERE md_triggers.table_or_view_id_fk=md_views.id
            AND md_views.schema_id_fk=md_schemas.id
            AND md_schemas.catalog_id_fk= md_catalogs.id
            AND md_catalogs.connection_id_fk=capture_conn_id
  ) allobjs left join (select md_derivatives.src_id,migrlog.logtext 
                        from migrlog,md_derivatives 
                        where migrlog.ref_object_id = md_derivatives.derived_id or migrlog.ref_object_id=md_derivatives.src_id) mlog 
                                on allobjs.objid=mlog.src_id  left join md_derivatives md on allobjs.objid=md.src_id
    ) 
  LOOP
     PIPE ROW(MIGR_REPORT_DETAIL_ROW(cur.captured_id,
                              cur.captured_name,
                              cur.converted_name,
                              cur.captured_type,
                              cur.converted_type,
                              cur.capture_status,
                              cur.convert_status,
                              cur.generate_status,
                              cur.logtext
                              ));       

  END LOOP;  
  RETURN;
 END getDetails; 

--migration summary
FUNCTION getSum(capture_conn_id IN NUMBER,convert_conn_id IN NUMBER) RETURN migr_report_sum_table PIPELINED IS
--
capture_passed_schema number default 0;
capture_passed_table number default 0;
capture_passed_view number default 0;
capture_passed_sp number default 0;
capture_passed_index number default 0;
capture_passed_constraint number default 0;
capture_passed_trigger number default 0;
--
capture_failed_schema number default 0;
capture_failed_table number default 0;
capture_failed_view number default 0;
capture_failed_sp number default 0;
capture_failed_index number default 0;
capture_failed_constraint number default 0;
capture_failed_trigger number default 0;
--
convert_passed_schema number default 0;
convert_passed_table number default 0;
convert_passed_view number default 0;
convert_passed_sp number default 0;
convert_passed_index number default 0;
convert_passed_constraint number default 0;
convert_passed_trigger number default 0;
--
convert_limit_schema number default 0;
convert_limit_table number default 0;
convert_limit_view number default 0;
convert_limit_sp number default 0;
convert_limit_index number default 0;
convert_limit_constraint number default 0;
convert_limit_trigger number default 0;
--
convert_failed_schema number default 0;
convert_failed_table number default 0;
convert_failed_view number default 0;
convert_failed_sp number default 0;
convert_failed_index number default 0;
convert_failed_constraint number default 0;
convert_failed_trigger number default 0;
--
convert_not_schema number default 0;
convert_not_table number default 0;
convert_not_view number default 0;
convert_not_sp number default 0;
convert_not_index number default 0;
convert_not_constraint number default 0;
convert_not_trigger number default 0;
--
generate_passed_schema number default 0;
generate_passed_table number default 0;
generate_passed_view number default 0;
generate_passed_sp number default 0;
generate_passed_index number default 0;
generate_passed_constraint number default 0;
generate_passed_trigger number default 0;
--
generate_failed_schema number default 0;
generate_failed_table number default 0;
generate_failed_view number default 0;
generate_failed_sp number default 0;
generate_failed_index number default 0;
generate_failed_constraint number default 0;
generate_failed_trigger number default 0;
--
generate_not_schema number default 0;
generate_not_table number default 0;
generate_not_view number default 0;
generate_not_sp number default 0;
generate_not_index number default 0;
generate_not_constraint number default 0;
generate_not_trigger number default 0;
--CURSORS
--SCHEMAS CURSOR
CURSOR schema_status(cid IN NUMBER,did IN NUMBER) IS
      SELECT 
          MIGRATION_REPORT.getCaptureStatus(md_schemas.id) CaptureStatus,
          MIGRATION_REPORT.getConvertStatus(md_schemas.id,did) ConvertStatus,
          MIGRATION_REPORT.getGenerateStatus(md_schemas.id,did) GenerateStatus
       FROM md_schemas,md_catalogs
       WHERE md_schemas.catalog_id_fk= md_catalogs.id
            AND md_catalogs.connection_id_fk=cid;
--TABLES CURSOR
CURSOR table_status(cid IN NUMBER,did IN NUMBER) IS
      SELECT 
          MIGRATION_REPORT.getCaptureStatus(md_tables.id) CaptureStatus,
          MIGRATION_REPORT.getConvertStatus(md_tables.id,did) ConvertStatus,
          MIGRATION_REPORT.getGenerateStatus(md_tables.id,did) GenerateStatus
       FROM md_tables,md_schemas,md_catalogs
       WHERE md_tables.schema_id_fk=md_schemas.id
            AND md_schemas.catalog_id_fk= md_catalogs.id
            AND md_catalogs.connection_id_fk=cid;
--VIEWS CURSOR
CURSOR view_status(cid IN NUMBER,did IN NUMBER) IS
      SELECT 
          MIGRATION_REPORT.getCaptureStatus(md_views.id) CaptureStatus,
          MIGRATION_REPORT.getConvertStatus(md_views.id,did) ConvertStatus,
          MIGRATION_REPORT.getGenerateStatus(md_views.id,did) GenerateStatus
       FROM md_views,md_schemas,md_catalogs
       WHERE md_views.schema_id_fk=md_schemas.id
            AND md_schemas.catalog_id_fk= md_catalogs.id
            AND md_catalogs.connection_id_fk=cid;
--STORED_PROGRAMS CURSOR
CURSOR sp_status(cid IN NUMBER,did IN NUMBER) IS
      SELECT 
          MIGRATION_REPORT.getCaptureStatus(md_stored_programs.id) CaptureStatus,
          MIGRATION_REPORT.getConvertStatus(md_stored_programs.id,did) ConvertStatus,
          MIGRATION_REPORT.getGenerateStatus(md_stored_programs.id,did) GenerateStatus
       FROM md_stored_programs,md_schemas,md_catalogs
       WHERE md_stored_programs.schema_id_fk=md_schemas.id
            AND md_schemas.catalog_id_fk= md_catalogs.id
            AND md_catalogs.connection_id_fk=cid;
--INDEXES CURSOR
CURSOR index_status(cid IN NUMBER,did IN NUMBER) IS
      SELECT 
          MIGRATION_REPORT.getCaptureStatus(md_indexes.id) CaptureStatus,
          MIGRATION_REPORT.getConvertStatus(md_indexes.id,did) ConvertStatus,
          MIGRATION_REPORT.getGenerateStatus(md_indexes.id,did) GenerateStatus
       FROM md_indexes, md_tables,md_schemas,md_catalogs
       WHERE md_indexes.table_id_fk= md_tables.id
            AND md_tables.schema_id_fk=md_schemas.id
            AND md_schemas.catalog_id_fk= md_catalogs.id
            AND md_catalogs.connection_id_fk=cid;
--CONSTRAINTS CURSOR
CURSOR constraint_status(cid IN NUMBER,did IN NUMBER) IS
      SELECT 
          MIGRATION_REPORT.getCaptureStatus(md_constraints.id) CaptureStatus,
          MIGRATION_REPORT.getConvertStatus(md_constraints.id,did) ConvertStatus,
          MIGRATION_REPORT.getGenerateStatus(md_constraints.id,did) GenerateStatus
       FROM md_constraints, md_tables,md_schemas,md_catalogs
       WHERE md_constraints.table_id_fk= md_tables.id
            AND md_tables.schema_id_fk=md_schemas.id
            AND md_schemas.catalog_id_fk= md_catalogs.id
            AND md_catalogs.connection_id_fk=cid;  
--TRIGGERS CURSOR
CURSOR trigger_status(cid IN NUMBER,did IN NUMBER) IS
      SELECT 
          MIGRATION_REPORT.getCaptureStatus(md_triggers.id) CaptureStatus,
          MIGRATION_REPORT.getConvertStatus(md_triggers.id,did) ConvertStatus,
          MIGRATION_REPORT.getGenerateStatus(md_triggers.id,did) GenerateStatus
       FROM md_triggers, md_tables,md_schemas,md_catalogs
       WHERE md_triggers.table_or_view_id_fk=md_tables.id
            AND md_tables.schema_id_fk=md_schemas.id
            AND md_schemas.catalog_id_fk= md_catalogs.id
            AND md_catalogs.connection_id_fk=cid 
       UNION ALL
       SELECT 
          MIGRATION_REPORT.getCaptureStatus(md_triggers.id) CaptureStatus,
          MIGRATION_REPORT.getConvertStatus(md_triggers.id,did) ConvertStatus,
          MIGRATION_REPORT.getGenerateStatus(md_triggers.id,did) GenerateStatus
       FROM md_triggers, md_views,md_schemas,md_catalogs
       WHERE md_triggers.table_or_view_id_fk=md_views.id
            AND md_views.schema_id_fk=md_schemas.id
            AND md_schemas.catalog_id_fk= md_catalogs.id
            AND md_catalogs.connection_id_fk=cid;
BEGIN
 --count
 --schemas
 FOR cur IN schema_status(capture_conn_id,convert_conn_id)
 LOOP
                IF cur.capturestatus='Failed' 
                 THEN capture_failed_schema:=capture_failed_schema+1;
                ELSE capture_passed_schema:=capture_passed_schema+1;
                END IF;

                 IF cur.convertstatus='Failed' 
                    THEN convert_failed_schema:=convert_failed_schema+1;
                 ELSIF cur.convertstatus='Limitation' 
                    THEN convert_limit_schema:=convert_limit_schema+1;
                 ELSIF cur.convertstatus='Passed'
                    THEN  convert_passed_schema:=convert_passed_schema+1;
                 ELSE   convert_not_schema:=convert_not_schema+1;
                 END IF;

                IF cur.generatestatus='Failed' 
                 THEN generate_failed_schema:=generate_failed_schema+1;
                ELSIF cur.generatestatus='Passed' 
                 THEN generate_passed_schema:=generate_passed_schema+1;
                ELSE  generate_not_schema:=generate_not_schema+1;
                END IF;            
 END LOOP;
 --tables
 FOR cur IN table_status(capture_conn_id,convert_conn_id)
 LOOP
                IF cur.capturestatus='Failed' 
                 THEN capture_failed_table:=capture_failed_table+1;
                ELSE capture_passed_table:=capture_passed_table+1;
                END IF;

                 IF cur.convertstatus='Failed' 
                    THEN convert_failed_table:=convert_failed_table+1;
                 ELSIF cur.convertstatus='Limitation' 
                    THEN convert_limit_table:=convert_limit_table+1;
                 ELSIF cur.convertstatus='Passed'
                    THEN  convert_passed_table:=convert_passed_table+1;
                 ELSE   convert_not_table:=convert_not_table+1;
                 END IF;

                IF cur.generatestatus='Failed' 
                 THEN generate_failed_table:=generate_failed_table+1;
                ELSIF cur.generatestatus='Passed' 
                 THEN generate_passed_table:=generate_passed_table+1;
                ELSE  generate_not_table:=generate_not_table+1;
                END IF;            
 END LOOP;
 --views
 FOR cur IN view_status(capture_conn_id,convert_conn_id)
 LOOP
                IF cur.capturestatus='Failed' 
                 THEN capture_failed_view:=capture_failed_view+1;
                ELSE capture_passed_view:=capture_passed_view+1;
                END IF;

                 IF cur.convertstatus='Failed' 
                    THEN convert_failed_view:=convert_failed_view+1;
                 ELSIF cur.convertstatus='Limitation' 
                    THEN convert_limit_view:=convert_limit_view+1;
                 ELSIF cur.convertstatus='Passed'
                    THEN  convert_passed_view:=convert_passed_view+1;
                 ELSE   convert_not_view:=convert_not_view+1;
                 END IF;

                IF cur.generatestatus='Failed' 
                 THEN generate_failed_view:=generate_failed_view+1;
                ELSIF cur.generatestatus='Passed' 
                 THEN generate_passed_view:=generate_passed_view+1;
                ELSE  generate_not_view:=generate_not_view+1;
                END IF;            
 END LOOP;
 --stored programs
 FOR cur IN sp_status(capture_conn_id,convert_conn_id)
 LOOP
                IF cur.capturestatus='Failed' 
                 THEN capture_failed_sp:=capture_failed_sp+1;
                ELSE capture_passed_sp:=capture_passed_sp+1;
                END IF;

                 IF cur.convertstatus='Failed' 
                    THEN convert_failed_sp:=convert_failed_sp+1;
                 ELSIF cur.convertstatus='Limitation' 
                    THEN convert_limit_sp:=convert_limit_sp+1;
                 ELSIF cur.convertstatus='Passed'
                    THEN  convert_passed_sp:=convert_passed_sp+1;
                 ELSE   convert_not_sp:=convert_not_sp+1;
                 END IF;

                IF cur.generatestatus='Failed' 
                 THEN generate_failed_sp:=generate_failed_sp+1;
                ELSIF cur.generatestatus='Passed' 
                 THEN generate_passed_sp:=generate_passed_sp+1;
                ELSE  generate_not_sp:=generate_not_sp+1;
                END IF;            
 END LOOP;
 --index
 FOR cur IN index_status(capture_conn_id,convert_conn_id)
 LOOP
                IF cur.capturestatus='Failed' 
                 THEN capture_failed_index:=capture_failed_index+1;
                ELSE capture_passed_index:=capture_passed_index+1;
                END IF;

                 IF cur.convertstatus='Failed' 
                    THEN convert_failed_index:=convert_failed_index+1;
                 ELSIF cur.convertstatus='Limitation' 
                    THEN convert_limit_index:=convert_limit_index+1;
                 ELSIF cur.convertstatus='Passed'
                    THEN  convert_passed_index:=convert_passed_index+1;
                 ELSE   convert_not_index:=convert_not_index+1;
                 END IF;

                IF cur.generatestatus='Failed' 
                 THEN generate_failed_index:=generate_failed_index+1;
                ELSIF cur.generatestatus='Passed' 
                 THEN generate_passed_index:=generate_passed_index+1;
                ELSE  generate_not_index:=generate_not_index+1;
                END IF;            
 END LOOP;
 --constraints
 FOR cur IN constraint_status(capture_conn_id,convert_conn_id)
 LOOP
                IF cur.capturestatus='Failed' 
                 THEN capture_failed_constraint:=capture_failed_constraint+1;
                ELSE capture_passed_constraint:=capture_passed_constraint+1;
                END IF;

                 IF cur.convertstatus='Failed' 
                    THEN convert_failed_constraint:=convert_failed_constraint+1;
                 ELSIF cur.convertstatus='Limitation' 
                    THEN convert_limit_constraint:=convert_limit_constraint+1;
                 ELSIF cur.convertstatus='Passed'
                    THEN  convert_passed_constraint:=convert_passed_constraint+1;
                 ELSE   convert_not_constraint:=convert_not_constraint+1;
                 END IF;

                IF cur.generatestatus='Failed' 
                 THEN generate_failed_constraint:=generate_failed_constraint+1;
                ELSIF cur.generatestatus='Passed' 
                 THEN generate_passed_constraint:=generate_passed_constraint+1;
                ELSE  generate_not_constraint:=generate_not_constraint+1;
                END IF;            
 END LOOP;
 --triggers
 FOR cur IN trigger_status(capture_conn_id,convert_conn_id)
 LOOP
                IF cur.capturestatus='Failed' 
                 THEN capture_failed_trigger:=capture_failed_trigger+1;
                ELSE capture_passed_trigger:=capture_passed_trigger+1;
                END IF;

                 IF cur.convertstatus='Failed' 
                    THEN convert_failed_trigger:=convert_failed_trigger+1;
                 ELSIF cur.convertstatus='Limitation' 
                    THEN convert_limit_trigger:=convert_limit_trigger+1;
                 ELSIF cur.convertstatus='Passed'
                    THEN  convert_passed_trigger:=convert_passed_trigger+1;
                 ELSE   convert_not_trigger:=convert_not_trigger+1;
                 END IF;

                IF cur.generatestatus='Failed' 
                 THEN generate_failed_trigger:=generate_failed_trigger+1;
                ELSIF cur.generatestatus='Passed' 
                 THEN generate_passed_trigger:=generate_passed_trigger+1;
                ELSE  generate_not_trigger:=generate_not_trigger+1;
                END IF;            
 END LOOP; 
 --source exists row
  FOR cur IN (  
      SELECT 
        'Source Exists' Label,
         num_schemas,
         num_tables,
         num_indexes,
         num_constraints,
         num_views,
         num_stored_programs,        
         num_triggers
         FROM  md_connections
         WHERE type IS NULL and id=capture_conn_id
 )
 LOOP
   PIPE ROW(MIGR_REPORT_SUM_ROW(
           cur.Label, 
           cur.num_schemas,
           cur.num_tables,
           cur.num_indexes,
           cur.num_constraints,
           cur.num_views,
           cur.num_triggers,
           cur.num_stored_programs
             ));
 END LOOP; 
   PIPE ROW(MIGR_REPORT_SUM_ROW(
           'Capture Passed', 
           capture_passed_schema,
           capture_passed_table,
           capture_passed_index,
           capture_passed_constraint,
           capture_passed_view,
           capture_passed_trigger,
           capture_passed_sp
             ));
  PIPE ROW(MIGR_REPORT_SUM_ROW(
           'Capture Failed', 
           capture_failed_schema,
           capture_failed_table,
           capture_failed_index,
           capture_failed_constraint,
           capture_failed_view,
           capture_failed_trigger,
           capture_failed_sp
             ));

  PIPE ROW(MIGR_REPORT_SUM_ROW(
           'Convert Passed', 
           convert_passed_schema,
           convert_passed_table,
           convert_passed_index,
           convert_passed_constraint,
           convert_passed_view,
           convert_passed_trigger,
           convert_passed_sp
             ));
  PIPE ROW(MIGR_REPORT_SUM_ROW(
           'Convert Limitation', 
           convert_limit_schema,
           convert_limit_table,
           convert_limit_index,
           convert_limit_constraint,
           convert_limit_view,
           convert_limit_trigger,
           convert_limit_sp
             ));
  PIPE ROW(MIGR_REPORT_SUM_ROW(
           'Convert Failed', 
           convert_failed_schema,
           convert_failed_table,
           convert_failed_index,
           convert_failed_constraint,
           convert_failed_view,
           convert_failed_trigger,
           convert_failed_sp
             ));

  PIPE ROW(MIGR_REPORT_SUM_ROW(
           'Generate Passed', 
           generate_passed_schema,
           generate_passed_table,
           generate_passed_index,
           generate_passed_constraint,
           generate_passed_view,
           generate_passed_trigger,
           generate_passed_sp
             ));
  PIPE ROW(MIGR_REPORT_SUM_ROW(
           'Generate Failed', 
           generate_failed_schema,
           generate_failed_table,
           generate_failed_index,
           generate_failed_constraint,
           generate_failed_view,
           generate_failed_trigger,
           generate_failed_sp
             )); 
  RETURN;
END getSum;
END MIGRATION_REPORT;

/


PROMPT Completed MIGRATION_REPORT.sql
PROMPT


-- ============================================================================
-- Deploy: MIGRATION_TRANSFORMER.sql
-- Category: package bodies
-- ============================================================================

PROMPT Deploying MIGRATION_TRANSFORMER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package Body MIGRATION_TRANSFORMER
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "DB_JT"."MIGRATION_TRANSFORMER" AS
  -- Maximum length of an identifier
  MAX_IDENTIFIER_LEN NUMBER:=30;
C_DISALLOWED_CHARS   CONSTANT NVARCHAR2(100) := ' .@`!\\"%^&*()-+=[]{};:,.<>?/~'''||UNISTR('\00A3');

--PRIVATE FUNCTION
FUNCTION truncateStringByteSize(p_work VARCHAR2, p_bsize NUMBER) RETURN VARCHAR2
IS
v_work VARCHAR2(4000);
v_bsize NUMBER(10);
BEGIN
 IF LENGTHB(p_work) <= p_bsize THEN
    return p_work;
  END IF;
  v_work := p_work;
  v_work := SUBSTRB(v_work, 1, p_bsize);
  WHILE INSTRC(p_work, v_work , 1, 1) <> 1 LOOP -- a character has been cut in half or in 2/3 or 3/4 by substrb (multibyte can have up to 4 bytes) 
  --note each left over corrupt byte can be a single character
   BEGIN
     v_bsize := LENGTHB(v_work);
  	 v_work := SUBSTRB(v_work, 1, v_bsize-1);
   END;
  END LOOP; 
  return v_work;
END;

FUNCTION add_suffix(p_work VARCHAR2, p_suffix VARCHAR2, p_maxlen NUMBER) RETURN VARCHAR2
IS
  v_suflen NUMBER := LENGTHB(p_suffix);
  v_truncamount NUMBER;
BEGIN
  IF LENGTHB(p_work) < p_maxlen - v_suflen THEN
    RETURN p_work || p_suffix;
  END IF;
  v_truncamount := LENGTHB(p_work) + v_suflen - p_maxlen;
  RETURN truncateStringByteSize(p_work, LENGTHB(p_work)-v_truncamount) || p_suffix;
END add_suffix;


FUNCTION check_identifier_length(p_ident VARCHAR2) RETURN VARCHAR2
IS
  v_work VARCHAR2(4000);
BEGIN
  return truncateStringByteSize(p_ident,  MAX_IDENTIFIER_LEN);
END;

FUNCTION check_reserved_word(p_work VARCHAR2) RETURN VARCHAR2
IS
  v_count NUMBER := 0;
BEGIN
  SELECT COUNT(*) INTO v_count FROM MIGRATION_RESERVED_WORDS WHERE KEYWORD = UPPER(p_work);
  IF v_count > 0 THEN
    -- It is a reserved word
    RETURN add_suffix(p_work, '_', MAX_IDENTIFIER_LEN);
  END IF;
  RETURN p_work;
END check_reserved_word;

FUNCTION sys_check(p_work VARCHAR2) RETURN VARCHAR2
IS
BEGIN
  IF LENGTH(p_work) < 4 THEN
    return p_work;
  END IF;
  IF SUBSTR(p_work, 1, 4) <> 'SYS_' THEN
    return p_work;
  END IF;
  RETURN 'SIS_' || SUBSTR(p_work, 5);
END sys_check;

FUNCTION first_char_check(p_work NVARCHAR2) RETURN NVARCHAR2
/**
 * Never want to start with anything but AlphaNumeri
 */
IS
  v_firstChar NCHAR(1);
  v_allowed NCHAR(200);
BEGIN
  v_allowed := C_DISALLOWED_CHARS || '0123456789_$#';
  v_firstChar := SUBSTR(p_work,1,1);
  if INSTR(v_allowed, v_firstChar) > 0 THEN
    return 'A' ||p_work;
  END IF;
  return p_work;
END first_char_check;



FUNCTION lTrimNonAlphaNumeric(p_work NVARCHAR2) RETURN NVARCHAR2
/**
 *Remove all non alphanumeric characters from the start 
 */
IS
  v_testChar VARCHAR2(2000);
  v_index NUMBER;
  v_work NVARCHAR2(4000):=p_work;
  v_forbiddenChars VARCHAR2(100);
  v_firstgoodchar NUMBER;
BEGIN
  v_forbiddenChars := C_DISALLOWED_CHARS ||'_$#';
  IF v_work IS NULL THEN
    RETURN 'UNKNOWN';
  END IF;
   FOR v_index in 1..LENGTH(v_work) LOOP
    v_testChar := SUBSTR(p_work, v_index, 1);
    IF INSTR(v_forbiddenChars, v_testChar) <= 0 THEN
      v_firstgoodchar := v_index;
      EXIT;--make sure to leave loop now as first real char reached
    END IF;
  END LOOP;
  return substr(p_work,v_firstgoodchar);
END lTrimNonAlphaNumeric;

FUNCTION removeQuotes(p_work NVARCHAR2) RETURN NVARCHAR2
/**
 * Removed Quotes around a identifier name
 */
IS
  v_firstChar NCHAR(1);
  v_lastChar NCHAR(1);
  v_quote NCHAR(200):= '"[]'; -- strip these from start and end;
  v_work NVARCHAR2(4000) := p_work;
BEGIN
  v_firstChar := SUBSTR(v_work,1,1);
  v_lastChar  := SUBSTR(v_work,LENGTH(v_work),1);
  if INSTR(v_quote, v_firstChar) > 0 THEN
  	v_work := SUBSTR(v_work, 2);
  	if INSTR(v_quote, v_lastChar) > 0 THEN
  	  v_work := SUBSTR(v_work,0,LENGTH(v_work)-1);
      return v_work;
    END IF;
      return v_work;
  END IF;
  return v_work;
END removeQuotes;


FUNCTION check_allowed_chars(p_work NVARCHAR2) RETURN NVARCHAR2
/* The documentation states 
 * "Nonquoted identifiers can contain only alphanumeric characters from your database character set and the
 *  underscore (_), dollar sign ($), and pound sign (#). Database links can also contain periods (.) and "at" signs (@).
 *  Oracle strongly discourages you from using $ and # in nonquoted identifiers."
 *  Heres a couple of gotchas
 *  1) We don't know where we will be generated to, so dunno what that database character set will be
 *  2) We've now way of knowing if a character is alphanumeric on the character set.
 * So... Here's what we'll do
 *  1) given that its come from a database, we'll assume with was alphanumeric
 *  2) We'll remove any "regular" symbol characters (i.e. one's on my keyboard!)
 *  3) We'll be storing in NVARCHAR2 in the hope that this will preserve everything.
 * 
 */
IS
  v_testChar VARCHAR2(2000);
  v_index NUMBER;
  -- Folowing syntax is a workaround for a problem with wrap.  Do not change it.
  v_forbiddenChars NVARCHAR2(100) := C_DISALLOWED_CHARS;
  v_work VARCHAR2(4000) := p_work;
  v_endswithunderscore boolean := FALSE;
BEGIN
  IF INSTR('_',SUBSTR(p_work, LENGTH(p_work))) >0 THEN
    v_endswithunderscore := TRUE;
  END IF;


  FOR v_index in 1..LENGTH(v_work) LOOP
    v_testChar := SUBSTR(p_work, v_index, 1);

    --check for existing underscores.these existed in the original and should be preserved as later we remove multiple underscores
    --bug:10405027
    IF v_testChar = '_' THEN
    	v_work :=SUBSTR(v_work,1,v_index-1)||'!' || SUBSTR(v_work,v_index+1);
    ELSIF INSTR(v_forbiddenChars, v_testChar) > 0 THEN
      v_work := SUBSTR(v_work, 1, v_index-1) || '_' || SUBSTR(v_work, v_index+1);
    END IF;
  END LOOP;

  --NOW REMOVE DOUBLE UNDERSCORES see bug 6647397
  v_work := replace(replace (replace (v_work,'__','_'),'__','_'),'__','_');--replace 2 underscores with 1 underscore

  --bug:10405027 , original underscore and a new one
  v_work := replace(v_work,'!_','_');
  v_work := replace(v_work,'_!','_'); 

  --NOW ADD BACK IN EXISTING ORGINAL UNDERSCORES bug:10405027
  v_work := replace(v_work,'!','_');

  --REMOVE THE LT CHAR IF IT IS AN UNDERSCORE
  IF v_endswithunderscore=false AND INSTR('_',SUBSTR(v_Work,LENGTH(v_work))) > 0 THEN
    v_work := SUBSTR(v_work,0,LENGTH(v_work)-1);
  END IF;
  return v_work;
END check_allowed_chars;

FUNCTION transform_identifier(p_identifier NVARCHAR2)  RETURN NVARCHAR2
IS
  v_work VARCHAR2(4000);
BEGIN
  v_work := p_identifier;
  BEGIN
	  -- There are 10 rules defined for identifier naming:
	  -- See http://st-doc.us.oracle.com/10/102/server.102/b14200/sql_elements008.htm#i27570

	  v_work := removeQuotes(v_work);
	  v_work := lTrimNonAlphaNumeric(v_work);
	  IF v_work is null THEN
	    v_work := getNameForNullCase(p_identifier);	 ---bug no. 8904200 
	  END IF;

	  --moving this to first as we can shrink the size of the name if they have more than 1 invalid char in a row.
	  --see bug 6647397
	   -- 5. Must begin withan alpha character from your character set
	  v_work := first_char_check(v_work);
	   -- 6. Alphanumeric characters from your database charset plus '_', '$', '#' only
	  v_work := check_allowed_chars(v_work);
	  -- 1. Length
	  v_work := check_identifier_length(v_work);
	  -- 2. Reserved words
	  v_work := check_reserved_word(v_work);
	  -- 3. "Special words" -I've handled these in reserved words, but still have to check if it starts with SYS
	  v_work := sys_check(v_work);
	  -- 4. "You should use ASCII characters in database names, global database names, and database link names,
	  --    because ASCII characters provide optimal compatibility across different platforms and operating systems."
	  -- This doesn't apply as we are not doing anything with DB names
	  -- 7. Name collisions; we'll handle this at a higher level.
	  -- 8. Nonquoted identifiers are case insensitive.  This is a doubl edged sword: If we use quoted, we can possible
	  --    Keep it similar to the source platform.  However this is not how it is typically done in Oracle.
	  -- 9. Columns in the same table.  See point 7. above.
	  -- 10. All about overloading for functions and parameters.  We don't have to handle this here either, at this
	  --     Should all be done by parsing technology.
  EXCEPTION WHEN OTHERS THEN
   v_work := p_identifier;
  END;  
  return v_work;
END transform_identifier;
FUNCTION fix_all_schema_identifiers(p_connectionid MD_CONNECTIONS.ID%TYPE) RETURN NUMBER
IS
  v_ret NUMBER;
BEGIN
  v_ret := 0;
  -- First, we transform all identifiers to meet our rules
  -- Then, we need to see if we've caused any collisions in the process
  -- And if so, fix them
  -- Right now, this is a dummy stub.
  return v_ret;
END fix_all_schema_identifiers;

FUNCTION fix_all_identifiers(p_connectionid MD_CONNECTIONS.ID%TYPE) RETURN NUMBER
IS
  v_ret NUMBER;
BEGIN
  v_ret := fix_all_schema_identifiers(p_connectionid);
  return v_ret;
END fix_all_identifiers;  

FUNCTION getNameForNullCase(p_work NVARCHAR2) RETURN NVARCHAR2
IS
  v_work VARCHAR2(4000);
  v_testChar VARCHAR2(2000);
  v_index NUMBER;
BEGIN
  FOR v_index in 1..LENGTH(p_work) LOOP
    v_testchar := SUBSTR(p_work,v_index,1);
    v_work := v_work || getDisallowedCharsNames(v_testchar);
  END LOOP;
  return v_work;
END;

FUNCTION getDisallowedCharsNames(p_work NVARCHAR2) RETURN VARCHAR2
IS
  v_work VARCHAR2(4000) := p_work;
BEGIN
  ----' .@`!"%^&*()-+=[]{};:,.<>?/~''' 
    v_work := ( CASE p_work
    WHEN '.' THEN 'DOT'
    WHEN '@' THEN 'AT'
    WHEN '`' THEN 'APOSTROPHE'
    WHEN '!' THEN 'EXCLAMATION'
    WHEN '"' THEN 'D_QUOTE'
    WHEN '%' THEN 'PERCENT'
    WHEN '^' THEN 'CARET'
    WHEN '&' THEN 'AMPERSAND'
    WHEN '*' THEN 'STAR'
    WHEN '(' THEN 'LEFTPARENTHESIS'
    WHEN ')' THEN 'RIGHTPARANTHESIS'
    WHEN '-' THEN 'MINUS'
    WHEN '+' THEN 'PLUS'
    WHEN '=' THEN 'EQUAL'
    WHEN '[' THEN 'LEFTSQUARE_B'
    WHEN ']' THEN 'RIGHTSQUARE_B'
    WHEN '{' THEN 'LEFTCURLY_B'
    WHEN '}' THEN 'RIGHTCURLY_B'
    WHEN ';' THEN 'COLON'
    WHEN ':' THEN 'SEMICOLON'
    WHEN ',' THEN 'COMMA'
    WHEN '<' THEN 'LESSTHAN'
    WHEN '>' THEN 'GREATERTHAN'
    WHEN '?' THEN 'QUESTIONMARK'
    WHEN '~' THEN 'TILDE'
    WHEN '/' THEN 'BACKSLASH'
    WHEN '''' THEN 'S_QUOTE'
    WHEN '$' THEN 'DOLLAR'
    ELSE 'UNKNOWN'
    END);
    return v_work;
END;

PROCEDURE set_oracle_long_identifier(b_flag INT)
/**
 * Setting for usage of 12.2 Database 128 bytes Long identifier
 */
IS
BEGIN
  if (b_flag = 1) then
    MAX_IDENTIFIER_LEN := 128;
  elsif (b_flag = 0) then
    MAX_IDENTIFIER_LEN := 30;
  END IF;
END set_oracle_long_identifier;

FUNCTION get_oracle_long_identifier RETURN NUMBER
/**
 * Get the setting for usage of 12.2 Database 128 byte Long identifier
 */
IS
BEGIN
  IF MAX_IDENTIFIER_LEN = 0 THEN
     MAX_IDENTIFIER_LEN := 30;
    return 30;
  END IF;

  IF MAX_IDENTIFIER_LEN = 30 THEN
    return 30;
  END IF;

  IF (MAX_IDENTIFIER_LEN = 128) THEN
    return 128;
  END IF;
  return 0;
END get_oracle_long_identifier;

END;

/


PROMPT Completed MIGRATION_TRANSFORMER.sql
PROMPT


-- ============================================================================
-- Deploy: MYJAVAUTIL.sql
-- Category: package bodies
-- ============================================================================

PROMPT Deploying MYJAVAUTIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package Body MYJAVAUTIL
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "DB_JT"."MYJAVAUTIL" AS PROCEDURE p_deleteFiles(directory IN VARCHAR2, maska IN VARCHAR2) 
AS LANGUAGE JAVA NAME 'com.jt.util.io.Directory.deleteFiles(java.lang.String, java.lang.String)'; END MYJAVAUTIL;

/


PROMPT Completed MYJAVAUTIL.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/PACKAGE_BODIES/MYLOG.sql: 'utf-8' codec can't decode byte 0xf8 in position 1612: invalid start byte


-- ============================================================================
-- Deploy: MYUTIL.sql
-- Category: package bodies
-- ============================================================================

PROMPT Deploying MYUTIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package Body MYUTIL
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "DB_JT"."MYUTIL" as

--	0 : je uplne mimo - nebudou se vazby vubec delat
--	1 : ber bez omezeni ani nevstupuje ani nevystupuje
--	2 : spolecnost vstupuje - obdobi zadane v tmp_skupinaVazby
--	3 : spolecnost vystupuje - obdobi zadane v tmp_skupinaVazby
--	4 : spolecnost vstupuje i vystupuje - obdobi zadane v tmp_skupinaVazby
function f_getKodDatumInterval ( aOd date, aDo date, aOd2 date, aDo2 date  ) return int as
begin

--put_any_line ( aOd || '-' || aDo || '    ' || aOd2 || '-' || aDo2 );

	if ( aOd >= aOd2 ) and
		(  aDo <= aDo2 )  then
		-- cely doklad je uvnitr obdobi vazeb
		return ( 1 );
	end if;

	if ( aOd > aDo2 ) then
		-- je mimo obdobi doklad je vetsi jak obdobi vazeb
		return (0);
	end if;

	if ( aOd < aOd2 ) then
		if ( aDo < aOd2 ) then
			-- je mimo obdobi doklad je mensi jak obdobi vazeb
			return (0);
		elsif ( aDo > aDo2 ) then
			-- obdobi dokladu je z obou stran vetsi jak obdobi vazeb
			return (4);
		elsif ( aDo <= aDo2 ) then
			-- obdobi dokladu zacina pred odbobim vazeb a pokracuje pres cele obdobi vazeb => vstupuje
			return (2);
		end if;
	end if;


	if ( aDo > aDo2 ) then
		-- doklad zacina pred obdobim vazeb a konci v obdobi vazeb=> vstupuje
		return (3);
	end if;

	raise_application_error ( -20001, 'nevi ' || aOd || '-' || aDo || '    ' || aOd2 || '-' || aDo2);

	return(null);

end
;


procedure p_printTableOfInt ( aTable t_tableOfInt, aLineStart varchar2 default '', aLineEnd varchar2 default '' ) as
begin
	if ( length (aLineStart) > 0 ) then
   	put_any_line ( aLineStart );
   end if;
	for i in 1 .. aTable.count() loop
	   put_any_line ( '(' || i || ')  '  || aTable(i) );
	end loop;
	if ( length (aLineEnd) > 0 ) then
   	put_any_line ( aLineEnd );
   end if;



end;


end;

/


PROMPT Completed MYUTIL.sql
PROMPT


-- ============================================================================
-- Deploy: MY_JOB.sql
-- Category: package bodies
-- ============================================================================

PROMPT Deploying MY_JOB.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package Body MY_JOB
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "DB_JT"."MY_JOB" as

x_freeJob t_jobQueue;

type t_tabResponse is table of t_jobMsgResponse;
tabCacheResponse t_tabResponse := t_tabResponse();

no_freeJob exception;
pragma exception_init (no_freeJob, -25228);

procedure setFreeJob ( aWait int ) as
   dequeue_options     dbms_aq.dequeue_options_t;
   message_properties  dbms_aq.message_properties_t;
   message_handle      RAW(16);
pom int;
begin
/*
select count(*) into pom  from qt_Job j where q_name = my_jobSlave.QUEUE_NAME;
app.p_log ( 'setFreeJob '||pom ||'  ' || app.f_getSessionID || ' wait ' || aWait);
*/
	dequeue_options.visibility := dbms_aq.immediate;
	dequeue_options.wait := aWait;
   dequeue_options.consumer_name := null;
   dequeue_options.dequeue_mode := dbms_aq.remove;
   dequeue_options.navigation := dbms_aq.first_message;
   dequeue_options.msgid := null;

   dbms_aq.dequeue(queue_name => my_JobSlave.QUEUE_NAME,
           dequeue_options    => dequeue_options,
           message_properties => message_properties,
           payload            => x_freeJob,
           msgid              => message_handle);

end;

function f_sendSqlRequest ( aSqlCode varchar2 ) return t_jobMsgResponse as
	ret t_jobMsgResponse := t_jobMsgResponse ( null, null, null, null, null, null, null, null, null);
	msgRequest t_jobMsgRequest := t_jobMsgRequest ( null, null, null, null, null, null);
begin

--app.p_log ( 'f_sendSqlRequest ' || aSqlCode || '  ' || app.f_getSessionID);

	ret.s_pipeName := PIPE_PREFIX || app.f_getSessionID;
	msgRequest.action := my_jobSlave.CMD__SQL_CODE;
	msgRequest.sql_statement := aSqlCode;
	msgRequest.pipeNameResponse := ret.s_pipeName;

if ( kap_konst.MAX_PLATNOST != '1.1.1999' ) then

		my_jobSlave.p_doSqlCode ( false, msgRequest, ret, true );
		ret.o_job := t_jobQueue ( '', - app.f_getSessionID );
--app.p_log ( 'sss ' || ret.s_pipeName || '  ' || msgRequest.sql_statement || '  ' || app.f_getSessionID);
		ret.put(ret.s_pipeName);
		return ( ret );
end if;


	setFreeJob ( dbms_aq.NO_WAIT );
	ret.o_job := x_freeJob;

	msgRequest.put ( x_freeJob.s_pipeName );

   ret.t_request := msgRequest;

	return ( ret );

exception
   when no_freeJob then
		-- neni volny job, tak si to udelam v teto connection a nasimuluji
		-- vysledek do roury v ktere si to vyzvednu. => tim programator nemusi
		-- resit zda se mu kod udelal paralelne nebo 'nouzove' neparalelne v ramci vlastni session
		my_jobSlave.p_doSqlCode ( false, msgRequest, ret, true );
		ret.o_job := t_jobQueue ( '', - app.f_getSessionID );
--app.p_log ( 'sss ' || ret.s_pipeName || '  ' || msgRequest.sql_statement || '  ' || app.f_getSessionID);
		ret.put(ret.s_pipeName);
		return ( ret );

end;

/* klient musi pouzivat tuto funkci protoze jinak by mohl cist zpravy krizem
	jde o to, ze vsechny paralelni procesy zapisuji do teze fronty, z ktere klient cte
	a pokud chci odpoved na moji udalost z parametru, tak musim kontrolovat zda
	v roure ctu data urcena pro tento parametr, nebo zda to nejsou navratove kody
	pro nejake konkurenctni paralelni zpracovani */
procedure p_readResponse ( aResponse in out t_jobMsgResponse ) as
	msg t_jobMsgResponse := t_jobMsgResponse ( null, null, null, null, null, null, null, null, null );

   function isInCache return boolean as
   	l_pozice int;
   begin

   	if ( tabCacheResponse is null ) then
      	return ( false );
      end if;

   	l_pozice := tabCacheResponse.first;

   	while ( l_pozice is not null ) loop
      	if ( tabCacheResponse(l_pozice).o_job.id_job = aResponse.o_job.id_job ) then
         	aResponse := tabCacheResponse(l_pozice);
            tabCacheResponse.delete(l_pozice);
            return (true);  -- nasel v cache
         end if;
         l_pozice := tabCacheResponse.next (l_pozice);
      end loop;

   	return (false);
   end;

begin
	-- budu se tocit tak dlouho, dokud neprectu zpravu na kterou se pta
	while ( true ) loop

   	if ( isInCache ) then
   		return;
   	end if;

   	msg.s_pipeName := aResponse.s_pipeName;

		for ii in 1 .. 3 loop
      	msg.get;
   		if ( msg.sql_code = -4061 ) then
         	-- osetrit pokud je package vyrazena
            -- vytvorim novy job, protoze stary se automaticky v tomto pripade ukoncil
            my_jobSlave.p_startNewJob(1);
            -- opakovana zadost o provedeni prikazu
            setFreeJob ( dbms_aq.FOREVER );
				aResponse.o_job := x_freeJob;
--app.p_log ( 'opakovana zadost na ' || x_freeJob.s_pipeName || '  ' || aResponse.s_pipeName || '  ' || aResponse.t_request.sql_statement );
            aResponse.t_request.put ( x_freeJob.s_pipeName );
         else
            exit;
         end if;
      end loop;

   	if ( msg.o_job.id_job = aResponse.o_job.id_job ) then
   		-- je to response zprava na ocekavany job
         msg.t_request := aResponse.t_request;
   		aResponse := msg;
   		return;
   	end if;

   	-- byla to jina zprava
   	tabCacheResponse.extend();
   	tabCacheResponse( tabCacheResponse.count ) := msg;
	end loop;
end;

procedure p_closeJob as
   procedure stopFreeJob as
   	ret t_jobMsgResponse := t_jobMsgResponse ( null, null, null, null, null, null, null, null, null);
   	msgRequest t_jobMsgRequest := t_jobMsgRequest ( null, null, null, null, null, null);
   begin

   	ret.s_pipeName := PIPE_PREFIX || app.f_getSessionID;
   	msgRequest.action := my_jobSlave.CMD__KONEC;
   	msgRequest.pipeNameResponse := ret.s_pipeName;

   	setFreeJob ( dbms_aq.NO_WAIT );
   	ret.o_job := x_freeJob;

   	msgRequest.put ( x_freeJob.s_pipeName );

   	-- pockam si na odpoved
		ret.get;

	end;

	procedure sendStopRequestToRunningJob as
		msgStopRequest t_jobMsgRequest := t_jobMsgRequest ( null, null, null, null, null, null);
	begin
		msgStopRequest.action := my_jobSlave.CMD__STOP;
   	for curPipe in ( select name from sys.v_$db_pipes where name like my_JobSlave.PIPE_PREFIX ||'%' ) loop
			msgStopRequest.put ( curPipe.name );
      end loop;
	end;


	procedure closePipe as
		ret int;
	begin
--   	for curPipe in ( select name from sys.v_$db_pipes where substr(name,1,3) =  ('JB_') ) loop
   	for curPipe in ( select name from sys.v_$db_pipes where name like  PIPE_PREFIX || '%' ) loop
         dbms_pipe.purge(curPipe.name);
         ret := dbms_pipe.remove_pipe(curPipe.name);
      end loop;
      commit;
	end;

begin
	while ( true ) loop
		begin
			stopFreeJob;
		exception
      	when no_freeJob then
				exit;
		end;
	end loop;
	sendStopRequestToRunningJob;
	closePipe;
end;

end;

/


PROMPT Completed MY_JOB.sql
PROMPT


-- ============================================================================
-- Deploy: MY_JOBSLAVE.sql
-- Category: package bodies
-- ============================================================================

PROMPT Deploying MY_JOBSLAVE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package Body MY_JOBSLAVE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "DB_JT"."MY_JOBSLAVE" as

-- identifikace jobu v kterem tento kod bezi
-- identifikace roury z ktere tento proces bude nacitat prikazy
x_slaveInfo t_jobQueue;

-- info do view do uzivatelskeho sloupce v prehledu sessions
x_modul varchar2(128);

ex_packageVyrazena exception;
pragma exception_init (ex_packageVyrazena, -4061);

msgRequest t_jobMsgRequest := t_jobMsgRequest( null, null, null, null, null, null);
msgResponse t_jobMsgResponse := t_jobMsgResponse( null, null, null, null, null, null, null, null, null);

procedure getMsgRequest as
begin
	app.p_setAkce ( 'read pipe: ' || x_slaveInfo.s_pipeName );
	msgRequest.action := null;
   while ( msgRequest.action is null ) loop
   	msgRequest.get ( x_slaveInfo.s_pipeName );
   end loop;
end;

procedure sendResponse as
begin
	app.p_setAkce ( 'send response: ' || msgRequest.pipeNameResponse );
	msgResponse.o_job := x_slaveInfo;
	msgResponse.put ( msgRequest.pipeNameResponse );
end;

procedure p_doSqlCode ( aSetModul boolean, aMsgRequest in out t_jobMsgRequest, aMsgResponse in out t_jobMsgResponse, b_raise boolean ) as
begin
	if ( aSetModul ) then
	   app.p_setModul ( 'kis', x_modul || 'sqlCode', aMsgRequest.sql_statement );
	end if;

   begin
--app.p_log ( 'exec: ' ||  aMsgRequest.sql_statement  ); 
	   --p_executeSQL ( 'begin ' ||  aMsgRequest.sql_statement || ' end;' );
      execute immediate ( 'begin ' ||  aMsgRequest.sql_statement || ' end;' );

      aMsgResponse.sql_code := 0;
      aMsgResponse.sql_errMsg := '';
		aMsgResponse.finish := '1';
--app.p_log ( '   exec OK ' ||  aMsgRequest.sql_statement );      

	exception
		when ex_packageVyrazena then
			if ( b_raise ) then
				raise;
			end if;
         aMsgResponse.sql_code := SQLCODE;
         aMsgResponse.sql_errMsg := 'zachyceno nevalidni package';
--app.p_log ( '   exec ' || aMsgResponse.sql_errMsg );               

		when others then
			if ( b_raise ) then
				raise;
			end if;
         aMsgResponse.sql_code := SQLCODE;
         aMsgResponse.sql_errMsg := SQLERRM;
--app.p_log ( '   exec ' || aMsgResponse.sql_errMsg );                        
         rollback;

	end;
   
end;

procedure cmd_sqlCode ( aSetModul boolean ) as
begin
	p_doSqlCode ( aSetModul, msgRequest, msgResponse, false );
end;

procedure cmd_konec as
begin
   msgResponse.sql_code := 0;
   msgResponse.sql_errMsg := '';
   msgResponse.finish := '1';
	app.p_setAkce ( 'konec' );
end;

procedure insertToJobQueue as
   enqueue_options     dbms_aq.enqueue_options_t;
   message_properties  dbms_aq.message_properties_t;
   message_handle      RAW(16);
	pom int;
begin

	-- zkontroluji si zda
	select count(*) into pom
	from qt_job t
	where
		t.q_name = QUEUE_NAME and
		t.user_data = x_slaveInfo;

	if ( pom > 0 ) then
		-- tak ve fronte uz je (prezilo to restart databaze) tak nemusim vkladat
		return;
	end if;

	enqueue_options.visibility := dbms_aq.immediate;

   dbms_aq.enqueue(queue_name => QUEUE_NAME,
         enqueue_options      => enqueue_options,
         message_properties   => message_properties,
         payload              => x_slaveInfo,
         msgid                => message_handle);
end;

procedure jobCykle as
   pokracuj boolean := true;
	procedure sendAutoEcho as
		msgEchoRequest t_jobMsgRequest := t_jobMsgRequest( null, null, null, null, null, null);
	begin
		msgEchoRequest.action := CMD__ECHO;
		msgEchoRequest.pipeNameResponse := x_slaveInfo.s_pipeName;
--app.p_log( 'send auto ' || x_slaveInfo.s_pipeName );
		msgEchoRequest.put(x_slaveInfo.s_pipeName);
	end;
begin

	msgRequest.action := null;

--execute immediate ( 'begin db_jt.tt_ppp; end;' );

	while ( pokracuj ) loop

		insertToJobQueue;
  		getMsgRequest;

      case msgRequest.action
			when CMD__SQL_CODE then
         	cmd_sqlCode (true);
			when CMD__STOP then
				exit;	-- uplne ukonci smycku
         when CMD__KONEC then
            cmd_konec;
         	pokracuj := false;
      else
--app.p_log ( 'necekany prikaz ' || msgRequest.action || '   ' || x_pipeRequest);
            msgResponse.sql_code := -1;
            msgResponse.sql_errMsg := 'necekana akce ' || msgRequest.action || ' v mySlaveJob.jobCykle';
         	--app.p_log ( 'necekany prikaz ' || msg.myJobName || ' v mySlaveJob.p_deleteDoklad' );
      end case;
		-- zprava pro cekajici proces
      sendResponse;
		-- ukoncim job pokud hlasi ze je package vyrazena, protoze se z toho uz nevzpamatovava
	   if ( msgResponse.sql_code = -4061 ) then
	      exit;
      end if;

		-- test na Echo, zda neprisla zadost STOP
		sendAutoEcho;
		getMsgRequest;

      case msgRequest.action
			when CMD__ECHO then
				null;
			when CMD__STOP then
				exit;	-- uplne ukonci smycku
			else
				raise_application_error ( -20001, 'Necekana akce ' || msgRequest.action || '  ' || msgRequest.sql_statement );
		end case;

	end loop;

end;

procedure p_startNewJob( aPocet int ) as

   procedure createJob as
   	idJob binary_integer;
      sJob varchar2(256);
   begin
   	dbms_job.submit ( idJob, 'begin null; end;', sysdate+1 );
   	sJob := CALL_JOB || ' ( ' || idJob || ' );';
   	dbms_job.change ( idJob, sJob, sysdate, null );
   	commit;
   end;

begin
	for i in 1 .. aPocet loop
		createJob;
	end loop;
end;

procedure p_runJob( aIdJob int ) as
	l_idJob int := aIdJob;
begin

	x_slaveInfo := t_jobQueue ( PIPE_PREFIX || aIdJob, l_idJob );

  	x_modul := 'mySlaveJob (' || x_slaveInfo.id_job || ')';
	app.p_setModul ( 'kis', x_modul, '' );

   jobCykle;
	l_idJob := dbms_pipe.remove_pipe(x_slaveInfo.s_pipeName);
	if ( l_idJob !=  l_idJob ) then null; end if;

end;


end;

/


PROMPT Completed MY_JOBSLAVE.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/PACKAGE_BODIES/REP_KONS_PACKAGE.sql: 'utf-8' codec can't decode byte 0xc8 in position 835: invalid continuation byte


-- ============================================================================
-- Deploy: SS2K5ALLPLATFORM.sql
-- Category: package bodies
-- ============================================================================

PROMPT Deploying SS2K5ALLPLATFORM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package Body SS2K5ALLPLATFORM
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "DB_JT"."SS2K5ALLPLATFORM" 
AS
TYPE split_varray_type IS VARRAY(255) OF VARCHAR2(32767);
TYPE ref_cur_type
IS
  REF

  CURSOR;
  TYPE key_array IS VARRAY(20) OF NUMBER(38,0);
TYPE str_array_type
IS
  TABLE OF       VARCHAR2(32767) INDEX BY BINARY_INTEGER;
  nProjectId     NUMBER(38,0);
  sev_err CONSTANT NUMBER :=2;
  sev_warn CONSTANT NUMBER :=4;
  sev_others CONSTANT NUMBER :=8;
  bProjectExists BOOLEAN;
  exceptionOccurred BOOLEAN :=FALSE;
  nSvrId         NUMBER(38,0) := NULL;
  RawToNumberFMT constant CHAR(12)     := 'XXXXXXXXXXXX';
  NumberToRawFMT constant CHAR(14)     := 'FM' || RawToNumberFMT;
  NewID          constant CHAR(9 CHAR) := '(newid())';
  NewIDClob CLOB                       :=NewID;--does this string to clob shortcut work in 9ir2?
  NewIDClobLength NUMBER(38,0)         := 9;
  MAX_LEN         NUMBER(38,0)         :=-999;
  pluginClass     VARCHAR2(500)        := NULL;
  CaptureNotClean EXCEPTION;
FUNCTION LOCALSUBSTRB(
    vin        VARCHAR2)
  RETURN VARCHAR2
AS
  v VARCHAR2(4000 CHAR):=SUBSTR(vin, 1, 4000);
  l NUMBER;
BEGIN
  l               := LENGTH(v);
  WHILE (lengthb(v)>4000)
  LOOP
    l := l-1;
    v := SUBSTR(v,1,l);
  END LOOP;
  RETURN v;
END;
FUNCTION GetStatus(iid INTEGER) RETURN varchar2
IS
   status VARCHAR2(4000);
   errMsg VARCHAR2(2000);
BEGIN
   SELECT logtext INTO status FROM migrlog WHERE severity = 666 AND phase = 'CAPTURE' AND connection_id_fk = iid;    
   RETURN status; 
EXCEPTION 
  WHEN OTHERS THEN
     errMsg := SQLERRM;  
     dbms_output.put_line('Status Message : ' || errMsg);
  RETURN ' ';
END GetStatus;

PROCEDURE SetStatus(msg VARCHAR2)
IS
PRAGMA AUTONOMOUS_TRANSACTION;
BEGIN
   --dbms_output.put_line(msg);
   --commit;
   --progressStatus := msg;
   --dbms_lock.sleep(2);
   UPDATE migrlog SET logtext = msg,
                  log_date = systimestamp
                  WHERE severity = 666 
                      AND phase = 'CAPTURE'
                      AND connection_id_fk = nProjectId;                   
   COMMIT;
END SetStatus; 

PROCEDURE LogInfo( parent_log_id NUMBER,
                   severity NUMBER,
                   logtextin VARCHAR2,
                   ref_obj_id NUMBER,
                   ref_obj_typein VARCHAR2,
                   connection_id NUMBER)
 IS
 PRAGMA AUTONOMOUS_TRANSACTION;
   errMsg  VARCHAR2(4000) := NULL;
   logtext varchar2(4000) := null;
   ref_obj_type varchar2(4000) := null;
 BEGIN
   IF (severity = sev_err)
   THEN
       exceptionOccurred :=TRUE;
   END IF;
   logtext := LOCALSUBSTRB (logtextin);
   ref_obj_type := LOCALSUBSTRB (ref_obj_typein);
   IF (connection_id is NULL) THEN
          BEGIN
              INSERT INTO STAGE_MIGRLOG ( "SVRID_FK", "DBID_GEN_FK",
                  ID, REF_OBJECT_ID,
                  REF_OBJECT_TYPE, LOG_DATE,
                  SEVERITY, LOGTEXT, PHASE)
              VALUES(null,null,null,ref_obj_id,ref_obj_type,null/* trigger will put in SYSTIMESTAMP */, 1000, logtext,'Capture');
              COMMIT;
          EXCEPTION
             WHEN OTHERS THEN
                 DBMS_OUTPUT.PUT_LINE('Capture:LogInfo Failed: ['  || logtext ||  
                 '] insert exception: ' || LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || 
                 LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE)));
          END;
    ELSE
        INSERT INTO MIGRLOG(parent_log_id, 
                       log_date, 
                       severity, 
                       logtext, 
                       phase, 
                       ref_object_id, 
                       ref_object_type, 
                       connection_id_fk) 
         VALUES(parent_log_id, 
                sysdate, 
                severity, 
                logtext, 
                'Capture', 
                ref_obj_id, 
                ref_obj_type, 
                connection_id) ;
    END IF;
    COMMIT;
 EXCEPTION
 WHEN OTHERS THEN
   errMsg := SQLERRM;
   DBMS_OUTPUT.put_line('Log Err: ['  || errMsg       || ']'
                                    || parent_log_id   || ':' 
                                    || severity     || ':'
                                    || logtext      || ':Capture:'
                                    || ref_obj_id   || ':'
                                    || ref_obj_type || ':'
                                    || connection_id);
 END LogInfo;
FUNCTION amINewid
  (
    myc CLOB
  )

  RETURN NUMBER
IS
BEGIN

  IF
    (
      myc IS NULL
    )
    THEN

    RETURN 0;

  END IF;

  IF
    (
      dbms_lob.getlength(myc) != NewIDClobLength
    )
    THEN

    RETURN 0;

  END IF;

  IF
    (
      instr (myc,NewIDClob)!=0
    )--starting at char 1 would be a match
    THEN

    RETURN 1;

  END IF;

  RETURN 0;

END amINewid;

FUNCTION getPrecision
  (
    typein      VARCHAR2 ,
    precisionin NUMBER,
    scalein     NUMBER
  )

  RETURN NUMBER
IS
  lowerType VARCHAR2
  (
    1000
  )
  :=lower
  (
    typein
  )
  ;
BEGIN

  IF
    (
      lowerType='bigint'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='int'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='smallint'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='money'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='tinyint'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='smallmoney'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='bit'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType ='float'
    )
    THEN

    IF
      (
        (precisionin IS NOT NULL) AND ( precisionin = 0 )
      )
      THEN

      RETURN NULL;

    END IF;

  END IF;

  IF
    (
      lowerType='real'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='datetime'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='smalldatetime'
    )
    THEN

    RETURN NULL;

  END IF;
  IF
    (
      lowerType='date'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='time'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='datetime2'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='datetimeoffset'
    )
    THEN

    RETURN NULL;

  END IF;

  --if (lowerType='char')
  --then
  --  scale = null;
  --end if

  IF
    (
      lowerType='text'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType ='varbinary'
    )
    THEN

    IF
      (
        precisionin=-1
      )
      THEN

      RETURN MAX_LEN;

    END IF;

  END IF;

  IF
    (
      lowerType ='nvarchar'
    )
    THEN

    IF
      (
        precisionin=-1
      )
      THEN

      RETURN MAX_LEN;

    END IF;

    RETURN precisionin/2;

  END IF;

  IF
    (
      lowerType ='varchar'
    )
    THEN

    IF
      (
        precisionin=-1
      )
      THEN

      RETURN MAX_LEN;

    END IF;

  END IF;

  IF
    (
      lowerType='nchar'
    )
    THEN

    RETURN precisionin/2;

  END IF;

  IF
    (
      lowerType='sysname'
    )
    THEN

    RETURN NULL;

  END IF;
  --if (lowerType='nchar')
  --then
  --  scale = null;
  --end if;

  IF
    (
      lowerType='ntext'
    )
    THEN

    RETURN NULL;

  END IF;
  --if (lowerType='nvarchar')
  --then
  --  scale = null;
  --end if;
  --if (lowerType='binary')
  -- then
  --  scale = null;
  --end if;

  IF
    (
      lowerType='image'
    )
    THEN

    RETURN NULL;

  END IF;
  --if (lowerType='varbinary')
  --then
  --  scale = null;
  --end if;

  IF
    (
      lowerType='cursor'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='timestamp'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='sql_variant'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='uniqueidentifier'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='table'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='xml'
    )
    THEN

    RETURN NULL;

  END IF;

  RETURN precisionin;

END getPrecision;

FUNCTION getnewscale
  (
    typein      VARCHAR2 ,
    precisionin NUMBER,
    scalein     NUMBER
  )

  RETURN NUMBER
IS
  lowerType VARCHAR2
  (
    1000
  )
  :=lower
  (
    typein
  )
  ;
BEGIN

  IF
    (
      lowerType='bigint'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='int'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='smallint'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='money'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='tinyint'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='smallmoney'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='bit'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='float'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='real'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='datetime'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='smalldatetime'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='date'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='time'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='datetime2'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='datetimeoffset'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='char'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='text'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='varchar'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='sysname'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='nchar'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='ntext'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='nvarchar'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='binary'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='image'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='varbinary'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='cursor'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='timestamp'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='sql_variant'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='uniqueidentifier'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='table'
    )
    THEN

    RETURN NULL;

  END IF;

  IF
    (
      lowerType='xml'
    )
    THEN

    RETURN NULL;

  END IF;

  RETURN scalein;

END getnewscale;


PROCEDURE CaptureConnections
IS
errMsg VARCHAR2(4000) := NULL;
BEGIN

  IF bProjectExists = FALSE
  THEN
  INSERT
  INTO md_projects
    (
      "ID",
      project_name,
      comments
    )
    (SELECT project_id,
        project_name,
        comments
      FROM STAGE_SERVERDETAIL
      WHERE project_id = nProjectId
      AND NOT EXISTS
        ( SELECT 1 FROM md_projects WHERE "ID" = nProjectId
        )
    ) ;
  END IF;

  INSERT
  INTO md_connections
    (
      "ID",
      project_id_fk,
      username,
      dburl,
      "NAME"
    )
    (SELECT SVRID,
        nProjectId,
        username,
        dburl,
        db_name
      FROM STAGE_SERVERDETAIL
      WHERE project_id = nProjectId
    ) ;
EXCEPTION
     WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
        LogInfo(NULL, sev_err, 'Capture Connections: ['  || errMsg ||  '] ' || 'nSvrId:Project Id : ' || nSvrId || ' : '|| nProjectId, NULL, NULL, nSvrId);  
END CaptureConnections;

PROCEDURE CaptureDatabases
IS
  errMsg VARCHAR2(4000) := NULL;
BEGIN

  INSERT
  INTO md_catalogs
    (
      "ID",
      connection_id_fk,
      catalog_name,
      dummy_flag,
      comments
    )
    (SELECT d.dbid_gen,
        d.svrid_fk,
        d."NAME",
        'N',
        p.VALUE
      FROM STAGE_SS2K5_DATABASES d,
        STAGE_SS2K5_SYSPROPERTIES p
      WHERE d.svrid_fk  = nSvrId
      AND p.class(+)    = 0
      AND p.svrid_fk(+) = nSvrId
      AND p.MAJOR_ID(+) = 0
      AND p.MINOR_ID(+) = 0
      AND d.dbid_gen    =p.dbid_gen_fk(+)
    );
EXCEPTION
      WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
        LogInfo(NULL, sev_err, 
                'CaptureDatabases Failed: [' || errMsg || '] ' || 'Server Id : ' || nSvrId, 
                NULL, NULL, nSvrId);        
END CaptureDatabases;

PROCEDURE CaptureSchemas
IS
  errMsg VARCHAR2(4000) := NULL;
BEGIN

  INSERT
  INTO md_schemas
    (
      "ID",
      catalog_id_fk,
      "NAME",
      comments
    )
    (SELECT A.suid_gen,
        A.dbid_gen_fk,
        A."NAME",
        p.VALUE
      FROM STAGE_SS2K5_SCHEMAS A,
        STAGE_SS2K5_SYSPROPERTIES p
      WHERE A.svrid_fk = nSvrId
      AND a.schema_id  <16384
      AND a.NAME       !='INFORMATION_SCHEMA'
      AND a.name       !='sys'
      AND EXISTS
        (SELECT 1
        FROM STAGE_SS2K5_OBJECTS o
        WHERE o.schema_id = a.schema_id
        AND o.svrid_fk    = nSvrId
        AND o.dbid_gen_fk = a.dbid_gen_fk
        )
      AND p.class(+) = 3
        /* schema */
      AND p.svrid_fk(+)    = nSvrId
      AND p.MAJOR_ID(+)    = a.schema_id
      AND p.MINOR_ID(+)    = 0
      AND p.dbid_gen_fk(+) = a.dbid_gen_fk
    );
EXCEPTION
      WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
        LogInfo(NULL, sev_err, 
                'CaptureSchemas Failed: [' || errMsg || '] ' || 'Server Id : ' || nSvrId, 
                NULL, NULL, nSvrId);           
END;

PROCEDURE CaptureTables
IS
  errMsg VARCHAR2(4000) := null;
BEGIN
 -- SetStatus('Capturing Tables');
  INSERT
  INTO md_tables
    (
      "ID",
      schema_id_fk,
      table_name,
      qualified_native_name,
      comments
    )
    (SELECT objid_gen,
        a.schema_id_fk,
        A."NAME",
        C."NAME"
        || '.'
        || B."NAME"
        || '.'
        || A."NAME",
        p.value comments
      FROM stage_ss2k5_tables A,
        stage_ss2k5_schemas B,
        stage_ss2k5_databases C,
        STAGE_SS2K5_SYSPROPERTIES p
      WHERE A.SCHEMA_ID_FK = B.SUID_GEN
        --probably better to use concrete nSvrid where possible.
      AND A.NAME NOT IN ('sysdiagrams')
      AND A.svrid_fk    = nSvrId
      AND B.svrid_fk    = nSvrId
      AND C.svrid_fk    = nSvrId
      AND A.dbid_gen_fk = B.dbid_gen_fk
      AND B.dbid_gen_fk = C.dbid_gen
      AND p.class(+)    = 1
        /* object or column */
      AND p.svrid_fk(+)    = nSvrId
      AND p.MAJOR_ID(+)    = a.object_id
      AND p.MINOR_ID(+)    = 0
      AND p.dbid_gen_fk(+) = a.dbid_gen_fk
    );
EXCEPTION 
      WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
        LogInfo(NULL, sev_err, 
                'CaptureTables Failed: [' || errMsg || '] ' || 'Server Id : ' || nSvrId, 
                NULL, NULL, nSvrId);
END CaptureTables;
/**
* look up to see if base type is valid.
* @param baseTypeIn the text of a type got from sql server
* @return true if base type is not handled.
*/

FUNCTION baseTypeIsNotHandled
  (
    baseTypeIn VARCHAR2
  )

  RETURN BOOLEAN
IS
  baseTypeUpper VARCHAR2
  (
    1000 CHAR
  )
  ;
  returnValue BOOLEAN := true;
  errMsg VARCHAR2(4000) := NULL;
BEGIN

  IF
    (
      baseTypeIn IS NULL
    )
    THEN

    RETURN true;

  END IF;
  baseTypeUpper := Upper
  (
    baseTypeIn
  )
  ;

  IF
    (
      baseTypeUpper='VARCHAR'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='BIGINT'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='DECIMAL'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='INT'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='NUMERIC'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='SMALLINT'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='MONEY'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='TINYINT'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='SMALLMONEY'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='BIT'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='FLOAT'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='REAL'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='DATETIME'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='SMALLDATETIME'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='DATETIME2'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='DATETIMEOFFSET'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='DATE'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='TIME'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='CHAR'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='TEXT'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='SYSNAME'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='NCHAR'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='NTEXT'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='NVARCHAR'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='NVARCHAR'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='BINARY'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='IMAGE'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='VARBINARY'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='VARBINARY'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='CURSOR'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='TIMESTAMP'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='SQL_VARIANT'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='UNIQUEIDENTIFIER'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='TABLE'
    )
    THEN

    RETURN false;

  END IF;

  IF
    (
      baseTypeUpper='XML'
    )
    THEN

    RETURN false;

  END IF;

  RETURN returnValue;
EXCEPTION
     WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
        LogInfo(NULL, sev_err, 'baseTypeIsNotHandled: ['  || errMsg ||  '] nSvrId:baseTypeIn = ' || nSvrId || ': ' || baseTypeIn, NULL, NULL, nSvrId);
END baseTypeIsNotHandled;

FUNCTION ProcessForUserDefinedDatatype
(
   default_defn VARCHAR2
)
 RETURN VARCHAR2 
IS
   hasAs NUMBER;
   default_txt VARCHAR2(1000);
   errMsg VARCHAR2(4000) := NULL;
BEGIN   
   IF default_defn IS NULL THEN
      RETURN default_defn;
   ELSE
      default_txt := default_defn;
      hasAs := INSTR(LOWER(default_defn), ' as ');
      IF hasAs > 0 THEN
         default_txt := SUBSTR(default_defn, hasAS + 4);
      END IF;
   END IF;
   RETURN default_txt;
EXCEPTION
     WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
        LogInfo(NULL, sev_err, 'ProcessForUserDefinedDatatype: ['  || errMsg ||  '] nSvrId:default_defn = ' || nSvrId || ': '|| default_defn, NULL, NULL, nSvrId);
END ProcessForUserDefinedDatatype;

PROCEDURE CaptureColumns
IS
  functionreturn BOOLEAN := false;
  curcolint      NUMBER
  (
    38,0
  )
  ;

  CURSOR curTab
  IS

    SELECT objid_gen,
      object_id,
      DBID_GEN_FK
    FROM stage_ss2k5_tables
    WHERE svrid_fk = nSvrId
    AND NAME NOT IN ('sysdiagrams');

  CURSOR curCol (thisTab NUMBER)
  IS

    SELECT r_c1.colid_gen mycolid,
      r_c1.id_gen_fk myid,
      r_c1."NAME" myname,
      base_type.base_name mybasename,
      CASE
        WHEN ( ( r_c1."PRECISION" = 0 )
        OR ( r_c1."PRECISION"    IS NULL ) )
        THEN SS2K5AllPlatform.getPrecision(base_type.base_name,r_c1. "MAX_LENGTH",r_c1."SCALE")
        ELSE SS2K5AllPlatform.getPrecision(base_type.base_name,r_c1. "PRECISION",r_c1."SCALE")
      END myprecision,
      SS2K5AllPlatform.getnewscale(base_type.base_name,
      CASE
        WHEN ( ( r_c1."PRECISION" = 0 )
        OR ( r_c1."PRECISION"    IS NULL ) )
        THEN r_c1."MAX_LENGTH"
        ELSE r_c1."PRECISION"
      END,r_c1."SCALE")
      --r_c1."SCALE"
      myscale ,
      CASE
        WHEN r_c1.is_Nullable=1
        THEN 'Y'
        ELSE 'N'
      END mynullable,
      dc.definition mydefinition,
      p.value comments
    FROM stage_ss2k5_columns r_c1 ,
      stage_ss2k5_tables tabst,
      (SELECT
        (SELECT tt.name
        FROM stage_ss2k5_types tt
        WHERE tt.user_type_id = t.system_type_id
        AND tt.svrid_fk       = nSvrId
        AND tt.dbid_gen_fk    =t.dbid_gen_fk
        ) base_name,
      t.user_type_id t_user_type_id,
      t.dbid_gen_fk t_dbid_gen_fk
    FROM stage_ss2k5_types t
    WHERE t.svrid_fk = nSvrId
      ) base_type,
      (SELECT *
      FROM stage_ss2k5_dt_constraints x
      WHERE x.object_id != 0
      AND x.object_id   IS NOT NULL
      AND x.svrid_fk     =nSvrId
      ) dc,
      STAGE_SS2K5_SYSPROPERTIES p
    WHERE tabst.objid_gen        = r_c1.id_gen_fk
    AND base_type.t_user_type_id = r_c1.user_type_id
      -- i.e. just table clolumns
      -- r_c1.id_gen_fk is not null --I think there must be some system tables
      -- column in here which are not loaded - so they are null and void. I may
      -- be wrong actually they may be views for example.!!!
    AND dc.object_id (+)        = r_c1.DEFAULT_OBJECT_ID
    AND ( ( dc.dbid_gen_fk      =r_c1.dbid_gen_fk )
    OR ( dc.dbid_gen_fk        IS NULL ) )
    AND tabst.svrid_fk          = nSvrId
    AND tabst.dbid_gen_fk       =r_c1.dbid_gen_fk
    AND base_type.t_dbid_gen_fk =r_c1.dbid_gen_fk
    AND r_c1.svrid_fk           = nSvrId -- want to do it for all database but
      -- join back to this database for secondary tables do not want  cross
      -- database ids.
    AND r_c1.id_gen_fk = thistab
    AND p.class(+)     = 1
      /* object or column */
    AND p.svrid_fk(+)    = nSvrId
    AND p.MAJOR_ID(+)    = r_c1.object_id
    AND p.MINOR_ID(+)    = r_c1.column_id
    AND p.dbid_gen_fk(+) = r_c1.dbid_gen_fk
    ORDER BY r_c1.column_id;
    default_defn VARCHAR2(2000);
    errMsg VARCHAR2(4000) := NULL;
  BEGIN
    --SetStatus('Capturing Columns');
    FOR r_c1 IN curTab
    LOOP
      curcolint := 0;   
      FOR r_c2 IN curcol(r_c1.objid_gen)
      LOOP
        curcolint := curcolint + 1;
        -- assuming 1 to 1 correspondance between suid and uid within a
        -- database
        default_defn := ProcessForUserDefinedDatatype(r_c2.mydefinition);
        functionreturn:=baseTypeIsNotHandled(r_c2.mybasename);

        IF (functionreturn = true) THEN
          BEGIN
          --TODO write to log that basename is not valid - might be a CLR so punting to varbinary(8000)
          INSERT
          INTO MD_COLUMNS
            (
              "ID",
              table_id_fk,
              column_name,
              column_order,
              column_type,
              "PRECISION",
              "SCALE",
              nullable,
              default_value,
              comments
            )
            VALUES
            (
              r_c2.mycolid,
              r_c2.myid,
              r_c2.myname,
              curcolint,
              'varbinary',
              8000,
              NULL,
              'Y',
              default_defn,
              r_c2.comments
            );
        EXCEPTION
          WHEN OTHERS THEN
             errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
             LogInfo(NULL, sev_err, 'CaptureColumns:punting type to varbinary ['  || errMsg ||  
             ']   nSvrId:table_id_fk,column_name:column_order =' || nSvrId||': '||r_c2.myid || ': ' || r_c2.myname || ': ' ||curcolint, NULL, NULL, nSvrId);          
        END;
        ELSE
          BEGIN
          INSERT
          INTO MD_COLUMNS
            (
              "ID",
              table_id_fk,
              column_name,
              column_order,
              column_type,
              "PRECISION",
              "SCALE",
              nullable,
              default_value,
              comments
            )
            VALUES
            (
              r_c2.mycolid,
              r_c2.myid,
              r_c2.myname,
              curcolint,
              r_c2.mybasename,
              r_c2.myprecision,
              r_c2.myscale,
              r_c2.mynullable,
              default_defn,
              r_c2.comments
            );
                EXCEPTION
          WHEN OTHERS THEN
             errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
             LogInfo(NULL, sev_err, 'CaptureColumns:inserting column ['  || errMsg ||  
             ']   nSvrId:table_id_fk:column_name:column_order =' || nSvrId||': '||r_c2.myid || ': ' || r_c2.myname || ': ' ||curcolint, NULL, NULL, nSvrId);          
           END;
        END IF;

      END LOOP; -- column loop

    END LOOP; -- tables loop
    BEGIN
    INSERT
    INTO MD_ADDITIONAL_PROPERTIES
      (
        connection_id_fk,
        ref_id_fk,
        ref_type,
        property_order,
        prop_key,
        "VALUE"
      )
      (SELECT c.svrid_fk,
          c.colid_gen,
          'MD_COLUMNS' ,
          NULL,
          NewID,
          'Y'
        FROM stage_ss2k5_columns c,
          stage_ss2k5_dt_constraints dc
        WHERE c.svrid_fk                             = nSvrId
        AND dc.svrid_fk                              = nSvrId
        AND dc.dbid_gen_fk                           = c.dbid_gen_fk
        AND c.DEFAULT_OBJECT_ID                      = dc.object_id
        AND ss2k5allplatform.amINewid(dc.definition) = 1
        AND EXISTS
          ( SELECT 1 FROM md_tables WHERE id=c.id_gen_fk
          )
      );

    -- handle identity columns
    -- not sure if I should have an is not null on these properties.
    INSERT
    INTO MD_ADDITIONAL_PROPERTIES
      (
        connection_id_fk,
        ref_id_fk,
        ref_type,
        property_order,
        prop_key,
        "VALUE"
      )
      (--note this is broken in 2000 to 2005 upgrades that have not been
        -- rebuilt in some was -> becomes ordinary int column may need
        -- is_identity flag
        SELECT c.svrid_fk,
          c.colid_gen,
          'MD_COLUMNS' ,
          NULL,
          'SEEDVALUE',
          seed_value
        FROM stage_ss2k5_columns c,
          stage_ss2k5_identity_columns i ,
          stage_ss2k5_tables tabst
        WHERE tabst.svrid_fk = nSvrId
        AND tabst.objid_gen  = c.id_gen_fk
        AND c.id_gen_fk     IS NOT NULL
        AND c.id_gen_fk     != 0
        AND c.svrid_fk       = nSvrId
        AND i.svrid_fk       = nSvrId
        AND c.dbid_gen_fk    = i.dbid_gen_fk
        AND i.column_id      = c.column_id
        AND i.object_id      = c.object_id
        AND seed_value      IS NOT NULL
        AND EXISTS
          ( SELECT 1 FROM md_tables t WHERE t.id=c.id_gen_fk
          )
      );

    INSERT
    INTO MD_ADDITIONAL_PROPERTIES
      (
        connection_id_fk,
        ref_id_fk,
        ref_type,
        property_order,
        prop_key,
        "VALUE"
      )
      (--note this is broken in 2000 to 2005 upgrades that have not been
        -- rebuilt in some was -> becomes ordinary int column may need
        -- is_identity flag
        SELECT c.svrid_fk,
          c.colid_gen,
          'MD_COLUMNS' ,
          NULL,
          'INCREMENT',
          increment_value
        FROM stage_ss2k5_columns c,
          stage_ss2k5_identity_columns i ,
          stage_ss2k5_tables tabst
        WHERE tabst.svrid_fk = nSvrId
        AND tabst.objid_gen  = c.id_gen_fk
        AND c.id_gen_fk     IS NOT NULL
        AND c.id_gen_fk     != 0
        AND c.svrid_fk       = nSvrId
        AND i.svrid_fk       = nSvrId
        AND c.dbid_gen_fk    = i.dbid_gen_fk
        AND i.column_id      = c.column_id
        AND i.object_id      = c.object_id
        AND seed_value      IS NOT NULL
        AND increment_value IS NOT NULL
        AND EXISTS
          ( SELECT 1 FROM md_tables t WHERE t.id=c.id_gen_fk
          )
      );

    INSERT
    INTO MD_ADDITIONAL_PROPERTIES
      (
        connection_id_fk,
        ref_id_fk,
        ref_type,
        property_order,
        prop_key,
        "VALUE"
      )
      (--note this is broken in 2000 to 2005 upgrades that have not been
        -- rebuilt in some was -> becomes ordinary int column may need
        -- is_identity flag
        SELECT c.svrid_fk,
          c.colid_gen,
          'MD_COLUMNS' ,
          NULL,
          'LASTVALUE',
          last_value
        FROM stage_ss2k5_columns c,
          stage_ss2k5_identity_columns i ,
          stage_ss2k5_tables tabst
        WHERE tabst.svrid_fk = nSvrId
        AND tabst.objid_gen  = c.id_gen_fk
        AND c.id_gen_fk     IS NOT NULL
        AND c.id_gen_fk     != 0
        AND c.svrid_fk       = nSvrId
        AND i.svrid_fk       = nSvrId
        AND c.dbid_gen_fk    = i.dbid_gen_fk
        AND i.column_id      = c.column_id
        AND i.object_id      = c.object_id
        AND seed_value      IS NOT NULL
        AND last_value      IS NOT NULL
        AND EXISTS
          ( SELECT 1 FROM md_tables t WHERE t.id=c.id_gen_fk
          )
      );
        EXCEPTION
        WHEN OTHERS THEN
             errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
             LogInfo(NULL, sev_err, 'CaptureColumns:Group insert of additional properties for identity ['  || errMsg ||  
             ']   nSvrId: ' || nSvrId, NULL, NULL, nSvrId);          
        END;
EXCEPTION
     WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
        LogInfo(NULL, sev_err, 'CaptureColumns: Unable to Open master cursor:['  || errMsg ||  '] nSvrId: ' || nSvrId,  NULL, NULL, nSvrId);          
END CaptureColumns;

PROCEDURE CapturePrimaryAndUniqueKeys
IS
  curorder NUMBER
  (
    38,0
  )
  ;

  CURSOR curConst
  IS

    SELECT a.objid_gen myid,
      TRIM(a.name) myname,
      CASE
        WHEN a.type = 'UQ'
        THEN 'UNIQUE'
        ELSE 'PK'
      END mytype,
      t.objid_gen mytable,
      'MSTSQL' mylanguage,
      p.VALUE comments
    FROM STAGE_SS2K5_objects a,
      stage_ss2k5_objects a2,
      stage_ss2k5_tables t,
      STAGE_SS2K5_SYSPROPERTIES p
    WHERE ( a.type    ='PK'
    OR a.type         ='UQ' )
    AND a2.type      IN ('U', 'U ')
    AND a2.object_id  = a.parent_object_id
    AND t.object_id   = a2.object_id
    AND a.svrid_fk    = nSvrId
    AND a2.svrid_fk   = nSvrId
    AND t.svrid_fk    = nSvrId
    AND t.dbid_gen_fk = a2.dbid_gen_fk
    AND a.dbid_gen_fk = a2.dbid_gen_fk
    AND t.NAME NOT IN ('sysdiagrams')
    AND EXISTS
      ( SELECT 1 FROM md_tables WHERE id = t.objid_gen
      ) --might be a sys table for example
  AND p.class(+) = 1
    /* object or column */
  AND p.svrid_fk(+)    = nSvrId
  AND p.MAJOR_ID(+)    = a.object_id
  AND p.MINOR_ID(+)    = 0
  AND p.dbid_gen_fk(+) = a.dbid_gen_fk ;

  CURSOR curConstDetails(thisConst NUMBER)
  IS

    SELECT d.colid_gen myid
    FROM STAGE_SS2K5_OBJECTS a2,
      STAGE_SS2K5_OBJECTS a,
      STAGE_SS2K5_INDEXES b,
      STAGE_SS2K5_INDEX_COLUMNS c,
      STAGE_SS2K5_COLUMNS d,
      STAGE_SS2K5_OBJECTS e
    WHERE ( a.objid_gen = thisConst )
    AND ( a.type        ='PK'
    OR a.type           ='UQ' )
    AND a2.object_id    = a.parent_object_id
    AND a.name          =b.name
    AND c.object_id     = b.object_id
    AND c.index_id      = b.index_id
    AND b.object_id     =a.parent_object_id
    AND d.object_id     = c.object_id
    AND d.column_id     = c.column_id
    AND e.object_id     = a.object_id
    AND a2.type        IN ('U', 'U ')
    AND a.svrid_fk      = nSvrId
    AND b.svrid_fk      = nSvrId
    AND c.svrid_fk      = nSvrId
    AND d.svrid_fk      = nSvrId
    AND e.svrid_fk      = nSvrId
    AND a.dbid_gen_fk   = a2.dbid_gen_fk
    AND b.dbid_gen_fk   = a2.dbid_gen_fk
    AND c.dbid_gen_fk   = a2.dbid_gen_fk
    AND d.dbid_gen_fk   = a2.dbid_gen_fk
    AND e.dbid_gen_fk   = a2.dbid_gen_fk
    AND EXISTS
      ( SELECT 1 FROM md_tables WHERE id = d.id_gen_fk
      ) --might be a sys table for example
  ORDER BY c.column_id;
  errMsg VARCHAR2(4000) := NULL;
BEGIN
  --create the constraints
  --SetStatus('Capturing Primary and Unique keys');
  FOR r_c1 IN curConst
  LOOP
    BEGIN
    INSERT
    INTO MD_CONSTRAINTS
      (
        ID,
        "NAME",
        constraint_type,
        table_id_fk,
        "LANGUAGE",
        comments
      )
      VALUES
      (
        r_c1.myid,
        r_c1.myname,
        r_c1.mytype,
        r_c1.mytable,
        r_c1.mylanguage,
        r_c1.comments
      );

    curorder :=0;

    FOR r_c2 IN curConstDetails
    (
      r_c1.myid
    )
    LOOP
      curorder := curorder + 1;

      --fill in the columns

      INSERT
      INTO MD_CONSTRAINT_DETAILS
        (
          constraint_id_fk,
          column_id_fk,
          detail_order
        )
        VALUES
        (
          r_c1.myid,
          r_c2.myid,
          curorder
        );

    END LOOP;--details
    EXCEPTION
     WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
        LogInfo(NULL, sev_err, 'CapturePrimaryAndUniqueKeys: single constraint faied ['  || errMsg ||  
        ']         nSvrId:NAME:constraint_type:table_id_fk  =' || nSvrId || ': '|| r_c1.myname ||': '|| r_c1.mytype||': '|| r_c1.mytable, NULL, NULL, nSvrId);          
    END;
  END LOOP; --constraints
EXCEPTION
     WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
        LogInfo(NULL, sev_err, 'CapturePrimaryAndUniqueKeys: main outer loop failure ['  || errMsg ||  
        '] nSvrId = '|| nSvrId|| ': ', NULL, NULL, nSvrId);          
END CapturePrimaryAndUniqueKeys;

PROCEDURE CaptureForeignKeys
IS
  curorder NUMBER
  (
    38,0
  )
  ;

  CURSOR curConst
  IS

    SELECT fk.object_id myid,
      o.objid_gen mdid,
      p.value comments,
      fk.dbid_gen_fk theDatabaseGen
    FROM STAGE_SS2K5_FN_KEYS fk,
      STAGE_SS2K5_TABLES lt,
      STAGE_SS2K5_OBJECTS o,
      STAGE_SS2K5_SYSPROPERTIES p
    WHERE o.parent_object_id!=0
    AND o.parent_object_id   =lt.object_id
    AND fk.svrid_fk          = nSvrId
    AND lt.svrid_fk          = nSvrId
    AND o.svrid_fk           = nSvrId
    AND lt.dbid_gen_fk       = fk.dbid_gen_fk
    AND o.dbid_gen_fk        = fk.dbid_gen_fk
    AND o.object_id          = fk.object_id
    AND lt.NAME NOT IN ('sysdiagrams')
    AND EXISTS
      (SELECT 1 FROM md_tables mdt WHERE mdt.id=lt.objid_gen
      )
    --need to put in the server and database checks so there are no false positives
  AND p.class(+) = 1
    /* object or column */
  AND p.svrid_fk(+)       = nSvrId
  AND p.MAJOR_ID(+)    = fk.object_id
  AND p.MINOR_ID(+)    = 0
  AND p.dbid_gen_fk(+) = fk.dbid_gen_fk ;

  CURSOR curConstDetails(constId NUMBER, thedb NUMBER)
  IS

    SELECT
      (SELECT COUNT(1) FROM md_tables mdt2 WHERE mdt2.id=rt.objid_gen
      ) oneIfRtCaptured,
    fk.name fk_name,
    fkc.constraint_object_id fkc_constraint_object_id,
    lc.name lc_name,
    (SELECT s.name
    FROM STAGE_SS2K5_SCHEMAS s
    WHERE s.schema_id = rt.schema_id
    AND s.svrid_fk    = nSvrId
    AND s.dbid_gen_fk = fk.dbid_gen_fk
    AND s.dbid_gen_fk = thedb
    ) schemaname,
    rt.name reftablename,
    rc.name refcolumnname,
    fkc.constraint_column_id fkc_constraint_column_id ,
    lc.colid_gen lc_colid_gen,
    rc.colid_gen rc_colid_gen,
    lt.objid_gen lt_objid_gen,
    rt.objid_gen rt_objid_gen
  FROM STAGE_SS2K5_FN_KEYS fk,
    STAGE_SS2K5_FN_KEY_COLUMNS fkc,
    STAGE_SS2K5_COLUMNS lc,
    STAGE_SS2K5_COLUMNS rc,
    STAGE_SS2K5_TABLES rt,
    STAGE_SS2K5_TABLES lt
  WHERE fk.object_id           = constId
  AND fk.object_id             = fkc.constraint_object_id
  AND lc.object_id             = fkc.parent_object_id
  AND lc.column_id             = fkc.parent_column_id
  AND rc.object_id             = fkc.referenced_object_id
  AND rc.column_id             = fkc.referenced_column_id
  AND fkc.referenced_object_id = rt.object_id
  AND fkc.parent_object_id     = lt.object_id
  AND fk.svrid_fk              = nSvrId
  AND fkc.svrid_fk             = nSvrId
  AND lc.svrid_fk              = nSvrId
  AND rc.svrid_fk              = nSvrId
  AND rt.svrid_fk              = nSvrId
  AND lt.svrid_fk              = nSvrId
  AND fkc.dbid_gen_fk          = fk.dbid_gen_fk
  AND lc.dbid_gen_fk           = fk.dbid_gen_fk
  AND rc.dbid_gen_fk           = fk.dbid_gen_fk
  AND rt.dbid_gen_fk           = fk.dbid_gen_fk
  AND lt.dbid_gen_fk           = fk.dbid_gen_fk
  AND fk.dbid_gen_fk           = thedb
  AND EXISTS
    (SELECT 1 FROM md_tables mdt WHERE mdt.id=lt.objid_gen
    )
  ORDER BY fkc.constraint_column_id ;
  errMsg VARCHAR2(4000) := NULL;
BEGIN
  --('Capturing Foreign Keys');
  --use commit/rollback to commit or back out of a dodgy foreign key constraint
  --create the constraints

  FOR r_c1 IN curConst
  LOOP
    BEGIN
    COMMIT;
    curorder :=0;
    FOR r_c2 IN curConstDetails ( r_c1.myid , r_c1.theDatabaseGen)
    LOOP
      --rc2 contains: oneIfRtCaptured, fk_name, fkc_constraint_object_id, lc_name,
      --schemaname, reftablename,refcolumnname, fkc_constraint_column_id,
      --lc_colid_gen, rc_colid_gen, lt_objid_gen, rt_objid_gen
      --looks like I have selected too many columns
      curorder := curorder + 1;
      --fill in the columns

      --can loop back on itself for a non self referencial example on a different column.
      IF ((r_c2.oneIfRtCaptured!=1)) THEN
        DBMS_OUTPUT.put_line('Skipping foreign key that references table not in repository');
        ROLLBACK;
        EXIT;

      END IF;

      IF (curorder=1) THEN
        INSERT
        INTO MD_CONSTRAINTS
          (
            ID,
            "NAME",
            constraint_type,
            table_id_fk,
            reftable_id_fk,
            "LANGUAGE",
            comments
          )
          VALUES
          (
            r_c1.mdid,
            r_c2.fk_name,
            'FOREIGN KEY',
            r_c2.lt_objid_gen,
            r_c2.rt_objid_gen,
            'MSTSQL',
            r_c1.comments
          );

      END IF;

      INSERT
      INTO MD_CONSTRAINT_DETAILS
        (
          constraint_id_fk,
          column_id_fk,
          detail_order
        )
        VALUES
        (
          r_c1.mdid,
          r_c2.lc_colid_gen,
          curorder
        );

      INSERT
      INTO MD_CONSTRAINT_DETAILS
        (
          ref_flag,
          constraint_id_fk,
          column_id_fk,
          detail_order
        )
        VALUES
        (
          'Y',
          r_c1.mdid,
          r_c2.rc_colid_gen,
          curorder
        );
      --rollback on error
      COMMIT;
      --need to commit correct foreign keys before loopback reference wipes the insert.
    END LOOP;--details
    COMMIT;
    EXCEPTION
     WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
        LogInfo(NULL, sev_err, 'CaptureForeignKeys:Single constraint failure ['  || errMsg ||  
        ']  nSvrId:type:sourceObjectId =' || nSvrId || ': FOREIGN KEY: ' || r_c1.myid, NULL, NULL, nSvrId);          
    END;
  END LOOP; --constraints
EXCEPTION
  WHEN OTHERS THEN
     errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
     LogInfo(NULL, sev_err, 'CaptureForeignKeys:Outer loop failure ['  || errMsg ||  
     ']  nSvrId = '||nSvrId, NULL, NULL, nSvrId);
END CaptureForeignKeys;

PROCEDURE CaptureTableLevelCkConstraints
IS
  errMsg VARCHAR2(4000) := NULL;
BEGIN
  --SetStatus('Capturing Table Level Check Constraints');
  INSERT
  INTO md_constraints
    (
      name,
      constraint_type,
      table_id_fk,
      constraint_text,
      LANGUAGE,
      comments
    )
    (SELECT c."NAME",
        'CHECK',
        lt.objid_gen,
        d."DEFINITION" ,
        'MSTSQL',
        p.value comments
      FROM STAGE_SS2K5_OBJECTS a,
        STAGE_SS2K5_OBJECTS a2,
        STAGE_SS2K5_OBJECTS c,
        STAGE_SS2K5_CHECK_CONSTRAINTS d,
        STAGE_SS2K5_TABLES lt,
        STAGE_SS2K5_SYSPROPERTIES p
      WHERE a."TYPE"           ='C'
      AND a.object_id          = c.object_id
      AND d."OBJECT_ID"        = a."OBJECT_ID"
      AND d."PARENT_COLUMN_ID" = 0
      AND a.parent_object_id   = a2.object_id
      AND lt.object_id         = a2.object_id
      AND a.svrid_fk           = nSvrId
      AND a2.svrid_fk          = nSvrId
      AND c.svrid_fk           = nSvrId
      AND d.svrid_fk           = nSvrId
      AND lt.svrid_fk          = nSvrId
      AND a2.dbid_gen_fk       = a.dbid_gen_fk
      AND c.dbid_gen_fk        = a.dbid_gen_fk
      AND d.dbid_gen_fk        = a.dbid_gen_fk
      AND lt.dbid_gen_fk       = a.dbid_gen_fk
      AND lt.NAME NOT IN ('sysdiagrams')
      AND EXISTS
        (SELECT 1 FROM md_tables mdt WHERE mdt.id=lt.objid_gen
        )
      AND p.class(+) = 1
        /* object or column */
      AND p.svrid_fk(+)    = nSvrId
      AND p.MAJOR_ID(+)    = a.object_id
      AND p.MINOR_ID(+)    = 0
      AND p.dbid_gen_fk(+) = a.dbid_gen_fk
    );
EXCEPTION
     WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
        LogInfo(NULL, sev_err, 'CaptureTableLevelCkConstraints Failed: ['  || errMsg ||  '] nSvrId =' || nSvrId ,NULL, NULL, nSvrId);
END CaptureTableLevelCkConstraints;

PROCEDURE CaptureColLevelCkConstraints
IS
  errMsg VARCHAR2(4000) := NULL;
  curconstid NUMBER
  (
    38,0
  )
  ;

  CURSOR curConst
  IS

    SELECT c."NAME" myname,
      'CHECK' mycheck,
      lt.objid_gen mytable,
      d."DEFINITION" mydefinition,
      'MSTSQL' mylanguage,
      col.colid_gen mycolid,
      p.value comments
    FROM STAGE_SS2K5_OBJECTS a,
      STAGE_SS2K5_OBJECTS a2,
      STAGE_SS2K5_OBJECTS c,
      STAGE_SS2K5_CHECK_CONSTRAINTS d,
      STAGE_SS2K5_TABLES lt,
      STAGE_SS2K5_COLUMNS col,
      STAGE_SS2K5_SYSPROPERTIES p
    WHERE a."TYPE"            ='C'
    AND a.object_id           = c.object_id
    AND d."OBJECT_ID"         = a."OBJECT_ID"
    AND d."PARENT_COLUMN_ID" <> 0
    AND a.parent_object_id    = a2.object_id
    AND lt.object_id          = a2.object_id
    AND a.svrid_fk            = nSvrId
    AND col.object_id         = lt.object_id
    AND d."PARENT_COLUMN_ID"  = col.column_id
    AND col.svrid_fk          = nSvrId
    AND a2.svrid_fk           = nSvrId
    AND c.svrid_fk            = nSvrId
    AND d.svrid_fk            = nSvrId
    AND lt.svrid_fk           = nSvrId
    AND col.dbid_gen_fk       = a.dbid_gen_fk
    AND a2.dbid_gen_fk        = a.dbid_gen_fk
    AND c.dbid_gen_fk         = a.dbid_gen_fk
    AND d.dbid_gen_fk         = a.dbid_gen_fk
    AND lt.dbid_gen_fk        = a.dbid_gen_fk
    AND lt.NAME NOT IN ('sysdiagrams')
    AND EXISTS
      (SELECT 1 FROM md_tables mdt WHERE mdt.id=lt.objid_gen
      )
  AND p.class(+) = 1
    /* object or column */
  AND p.svrid_fk(+)    = nSvrId
  AND p.MAJOR_ID(+)    = a.object_id
  AND p.MINOR_ID(+)    = 0
  AND p.dbid_gen_fk(+) = a.dbid_gen_fk ;
BEGIN
  --SetStatus('Capturing Column Level Check Constraints');
  FOR r_c1 IN curConst
  LOOP
    BEGIN
    INSERT
    INTO md_constraints
      (
        name,
        constraint_type,
        table_id_fk,
        LANGUAGE,
        comments
      )
      VALUES
      (
        r_c1.myname,
        r_c1.mycheck,
        r_c1.mytable,
        r_c1.mylanguage,
        r_c1.comments
      )
    RETURNING id
    INTO curConstid;

    INSERT
    INTO md_constraint_details
      (
        constraint_id_fk,
        column_id_fk,
        detail_order,
        constraint_text
      )
      VALUES
      (
        curConstid,
        r_c1.mycolid,
        1,
        r_c1.mydefinition
      );
      EXCEPTION
      WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
        LogInfo(NULL, sev_err, 'CaptureColLevelCkConstraints Failed: single constraint failure['  || errMsg ||  
        ']   nSvrId:name:constraint_type:table_id_fk = '
        ||nSvrId|| ': ' ||r_c1.myname|| ': ' ||
        r_c1.mycheck|| ': ' ||
        r_c1.mytable, NULL, NULL, nSvrId);          
      END;
  END LOOP;
EXCEPTION
      WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
        LogInfo(NULL, sev_err, 'CaptureColLevelCkConstraints Failed: outer loop failure['  || errMsg ||  
        ']  nSvrId = '|| nSvrId, NULL, NULL, nSvrId);          
END CaptureColLevelCkConstraints;

PROCEDURE CaptureRules
IS
  errMsg VARCHAR2(4000) := NULL;
  curconstid NUMBER
  (
    38,0
  )
  ;

  CURSOR curConst
  IS

    SELECT a.svrid_fk mysvrid,
      t.objid_gen mytableid,
      a."NAME" mytablename,
      b."NAME" mycolumnname,
      b.colid_gen mycolid,
      b."RULE_OBJECT_ID" myruleid,
      m.definition mymoduledefinition,
      p.value comments
    FROM STAGE_SS2K5_OBJECTS a,
      STAGE_SS2K5_COLUMNS b,
      STAGE_SS2K5_OBJECTS c ,
      STAGE_SS2K5_TABLES t,
      STAGE_ss2k5_sql_modules m,
      STAGE_SS2K5_SYSPROPERTIES p
    WHERE a."TYPE"         = 'U'
    AND b."OBJECT_ID"      = a."OBJECT_ID"
    AND c.object_id        = a."OBJECT_ID"
    AND b."RULE_OBJECT_ID" > 0
    AND m.object_id        =b.rule_object_id
    AND t.object_id        = a.object_id
    AND a.svrid_fk         = nSvrId
    AND t.svrid_fk         = nSvrId
    AND b.svrid_fk         = nSvrId
    AND c.svrid_fk         = nSvrId
    AND m.svrid_fk         = nSvrId
    AND a.dbid_gen_fk      = b.dbid_gen_fk
    AND c.dbid_gen_fk      = a.dbid_gen_fk
    AND t.dbid_gen_fk      = a.dbid_gen_fk
    AND m.dbid_gen_fk      = a.dbid_gen_fk
    AND t.NAME NOT IN ('sysdiagrams')
    AND EXISTS
      (SELECT 1 FROM md_tables mdt WHERE mdt.id=t.objid_gen
      )
  AND p.class(+)       = 1
  AND p.svrid_fk(+)    = nSvrId
  AND p.MAJOR_ID(+)    = a.object_id
  AND p.MINOR_ID(+)    = 0
  AND p.dbid_gen_fk(+) = a.dbid_gen_fk ;
BEGIN
  --SetStatus('Capturing Roles');
  FOR r_c1 IN curConst
  LOOP
    BEGIN
    INSERT
    INTO md_constraints
      (
        name,
        constraint_type,
        table_id_fk,
        LANGUAGE,
        comments
      )
      VALUES
      (
        'rul_'
        || r_c1.mytablename
        || '_'
        || r_c1.mycolumnname,
        'CHECK',
        r_c1.mytableid,
        'MSTSQL',
        r_c1.comments
      )
    RETURNING id
    INTO curConstid;

    INSERT
    INTO MD_ADDITIONAL_PROPERTIES
      (
        connection_id_fk,
        ref_id_fk,
        ref_type,
        property_order,
        prop_key,
        "VALUE"
      )
      VALUES
      (
        r_c1.mysvrid,
        curConstid,
        'MD_CONSTRAINTS',
        1,
        'TYPE',
        'RULE'
      );

    /*TODO check additional properties againt a proper capture */

    INSERT
    INTO md_constraint_details
      (
        constraint_id_fk,
        column_id_fk,
        detail_order,
        constraint_text
      )
      VALUES
      (
        curConstid,
        r_c1.mycolid,
        1,
        r_c1.mymoduledefinition
      );
   EXCEPTION
     WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
        LogInfo(NULL, sev_err, 'CaptureRules Failed: single rule failure ['  || errMsg ||  ']         nSvrid:name:constraint_type:table_id_fk = '
        || nSvrId ||': '||
        'rul_'
        || r_c1.mytablename
        || '_'
        || r_c1.mycolumnname||': '||
        'CHECK'||': '||
        r_c1.mytableid, NULL, NULL, nSvrId);          
   END;
  END LOOP;
EXCEPTION
  WHEN OTHERS THEN
     errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
     LogInfo(NULL, sev_err, 'CaptureRules Failed: outer loop failure ['  || errMsg ||  ']         nSvrid = '
     || nSvrId, NULL, NULL, nSvrId);          
END CaptureRules;

PROCEDURE CaptureConstraints
IS
  errMsg VARCHAR2(4000) := NULL;
BEGIN
  --SetStatus('Capturing Constraints');
  CapturePrimaryAndUniqueKeys;
  CaptureForeignKeys;
  CaptureTableLevelCkConstraints;
  CaptureColLevelCkConstraints;
  CaptureRules;
EXCEPTION
  WHEN OTHERS THEN
     errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
     LogInfo(NULL, sev_err, 'CaptureConstraints Failed: ['  || errMsg ||  ']         nSvrid = '
     || nSvrId, NULL, NULL, nSvrId); 
END CaptureConstraints;

PROCEDURE CaptureIndexes
IS
  errMsg VARCHAR2(4000) := NULL;
  curtableid NUMBER
  (
    38,0
  )
  ;
  curindexid NUMBER
  (
    38,0
  )
  ;
  detailCounter NUMBER
  (
    38,0
  )
  ;
  nIdxDetailId NUMBER
  (
    38,0
  )
  ;
  vIdxtype VARCHAR2
  (
    100
  )
  ;
  vc_Unique CONSTANT VARCHAR2
  (
    100
  )
  := 'unique';
  vc_IndexUnique CONSTANT VARCHAR2
  (
    100
  )
  := 'UNIQUE';
  vc_IndexNonUnique CONSTANT VARCHAR2
  (
    100
  )
  := 'NON_UNIQUE';

  CURSOR getIndex
  IS

    SELECT i.object_id_gen
      /* should really be named different - as object_id is the table id */
      ,
      i."OBJECT_ID" mytableid,
      i."INDEX_ID" myindexid,
      i."NAME" myindexname,
      i."IS_UNIQUE" myisunique,
      o."NAME" mytablename,
      lt.objid_gen mygentableid,
      P.Value Comments,
      i.dbid_gen_fk dbidgenfk
    FROM STAGE_SS2K5_INDEXES i,
      STAGE_SS2K5_OBJECTS o,
      STAGE_SS2K5_TABLES lt,
      STAGE_SS2K5_SYSPROPERTIES p
    WHERE o.type     IN ('U', 'V', 'U ', 'V ')
    AND o."OBJECT_ID" = i."OBJECT_ID"
    AND i.name NOT LIKE '_WA_Sys%'
    AND i.is_primary_key = 0
    AND EXISTS
      (SELECT 1 FROM md_tables mdt WHERE mdt.id=lt.objid_gen
      )
  AND lt.object_id     = o.object_id
  AND i.svrid_fk       = nSvrId
  AND o.svrid_fk       = nSvrId
  AND lt.svrid_fk      = nSvrId
  AND i.dbid_gen_fk    = o.dbid_gen_fk
  AND o.dbid_gen_fk    = lt.dbid_gen_fk
  AND p.class(+)       = 7
  AND p.svrid_fk(+)    = nSvrId
  AND p.MAJOR_ID(+)    = i.object_id
  AND p.MINOR_ID(+)    = i.index_id
  AND p.dbid_gen_fk(+) = i.dbid_gen_fk 
  AND lt.NAME NOT IN ('sysdiagrams');

  CURSOR getDetails(thedatabaseid NUMBER,thetableid NUMBER, theindexid NUMBER)
  IS

    SELECT a.index_column_id,
      b.name,
      a.is_descending_key is_descending_key,
      B.COLID_GEN
    FROM STAGE_SS2K5_INDEX_COLUMNS a ,
      STAGE_SS2K5_COLUMNS b
    WHERE a.index_id = theindexid
    AND b.column_id  = a.column_id
    AND b.object_id  = a.object_id
    AND a.object_id  = thetableid
    AND
      -- tableid exists in md_tables checked in initial query
      a.svrid_fk      = nSvrId
    AND b.svrid_fk    = nSvrId
    And A.Dbid_Gen_Fk = B.Dbid_Gen_Fk
    and a.dbid_gen_fk=thedatabaseid;
BEGIN
  --SetStatus('Capturing Indexes');
  FOR r_c1 IN getIndex
  LOOP
    BEGIN
    --create index

    IF (r_c1.myisunique = 1) THEN
      vIdxType         :=vc_IndexUnique;

    ELSE
      vIdxType:=vc_IndexNonUnique;

    END IF;

    INSERT
    INTO MD_INDEXES
      (
        "ID",
        index_type,
        table_id_fk,
        index_name,
        comments
      )
      VALUES
      (
        r_c1.object_id_gen ,
        vIdxType,
        r_c1.mygentableid,
        r_c1.myindexname,
        r_c1.comments
      );

    detailCounter := 0;

    FOR r_c2 IN getDetails
    (
      r_c1.dbidgenfk,r_c1.mytableid, r_c1.myindexid
    )
    LOOP
      detailcounter := detailcounter + 1;
      --create index details

      INSERT
      INTO MD_INDEX_DETAILS
        (
          index_id_fk,
          column_id_fk,
          detail_order
        )
        VALUES
        (
          r_c1.object_id_gen,
          r_c2.colid_gen,
          detailCounter
        )
      RETURNING "ID"
      INTO nIdxDetailId;

      IF
        (
          r_c2.is_descending_key = 1
        )
        THEN

        INSERT
        INTO MD_ADDITIONAL_PROPERTIES
          (
            connection_id_fk,
            ref_id_fk,
            ref_type,
            property_order,
            prop_key,
            "VALUE"
          )
          VALUES
          (
            nSvrId,
            nIdxDetailId,
            'MD_INDEX_DETAIL',
            detailCounter,
            'IS_INDEXDETAIL_DESCENDING',
            'Y'
          );

      END IF;

    END LOOP;
    EXCEPTION
     WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
        LogInfo(NULL, sev_err, 'CaptureIndexes Failed: Single index failure ['  || errMsg ||  '] nSvrId:myindexname = ' || nSvrId ||': '||r_c1.myindexname, NULL, NULL, nSvrId);          
    END;
  END LOOP;
EXCEPTION
    WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
        LogInfo(NULL, sev_err, 'CaptureIndexes Failed: Outer loop failure ['  || errMsg ||  '] nSvrId = ' || nSvrId , NULL, NULL, nSvrId);          
END CaptureIndexes;

PROCEDURE CaptureViews
IS
  errMsg VARCHAR2(4000) := NULL;
BEGIN
  SetStatus('Capturing Views');
  INSERT
  INTO MD_VIEWS
    (
      id,
      schema_id_fk,
      view_name,
      native_sql,
      "LANGUAGE",
      comments
    )
    (SELECT a.objid_gen,
        s.suid_gen,
        a."NAME",
        b.DEFINITION,
        'MSTSQL',
        p.value comments
      FROM STAGE_SS2K5_OBJECTS a,
        STAGE_SS2K5_SQL_MODULES b,
        stage_SS2K5_schemas s,
        STAGE_SS2K5_SYSPROPERTIES p
      WHERE a."TYPE"     ='V'
      AND a."OBJECT_ID"  = b."OBJECT_ID"
      AND a.is_ms_shipped=0
      AND s.schema_id    = a.schema_id
      AND EXISTS
        (SELECT 1 FROM md_schemas mds WHERE mds.id=s.suid_gen
        )
      AND a.svrid_fk       = nSvrId
      AND b.svrid_fk       = nSvrId
      AND s.svrid_fk       = nSvrId
      AND a.dbid_gen_fk    = b.dbid_gen_fk
      AND s.dbid_gen_fk    = b.dbid_gen_fk
      AND p.class(+)       = 1
      AND p.svrid_fk(+)    = nSvrId
      AND p.MAJOR_ID(+)    = a.object_id
      AND p.MINOR_ID(+)    = 0
      AND p.dbid_gen_fk(+) = a.dbid_gen_fk
    ) ;
EXCEPTION
    WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
        LogInfo(NULL, sev_err, 'CaptureViews Failed: ['  || errMsg ||  '] nSvrId = ' || nSvrId , NULL, NULL, nSvrId);
END CaptureViews;

PROCEDURE CaptureStoredPrograms
IS
  errMsg VARCHAR2(4000) := NULL;
BEGIN
  SetStatus('Capturing Stored Programs');
  INSERT
  INTO MD_STORED_PROGRAMS
    (
      id,
      schema_id_fk,
      programtype,
      name,
      native_sql,
      "LANGUAGE",
      comments
    )
    (SELECT a.objid_gen,
        s.suid_gen,
        CASE
          WHEN a.type = 'P'
          THEN 'PROCEDURE'
          ELSE 'FUNCTION'
        END,
        a."NAME",
        b.DEFINITION,
        'MSTSQL',
        p.value comments
      FROM STAGE_SS2K5_OBJECTS a,
        STAGE_SS2K5_SQL_MODULES b,
        stage_SS2K5_schemas s,
        STAGE_SS2K5_SYSPROPERTIES p
      WHERE ( a.type     = 'P'
      OR a.type          = 'FN'
      OR a.type          = 'TF'
      OR a.type          = 'IF')
      AND a."OBJECT_ID"  = b."OBJECT_ID"
      AND a.is_ms_shipped=0
      AND s.schema_id    = a.schema_id
      AND EXISTS
        (SELECT 1 FROM md_schemas mds WHERE mds.id=s.suid_gen
        )
      AND a.svrid_fk       = nSvrId
      AND b.svrid_fk       = nSvrId
      AND s.svrid_fk       = nSvrId
      AND a.dbid_gen_fk    = b.dbid_gen_fk
      AND s.dbid_gen_fk    = b.dbid_gen_fk
      AND p.class(+)       = 1
      AND p.svrid_fk(+)    = nSvrId
      AND p.MAJOR_ID(+)    = a.object_id
      AND p.MINOR_ID(+)    = 0
      AND p.dbid_gen_fk(+) = a.dbid_gen_fk
    ) ;

  INSERT
  INTO MD_ADDITIONAL_PROPERTIES
    (
      connection_id_fk,
      ref_id_fk,
      ref_type,
      property_order,
      prop_key,
      "VALUE"
    )
    (SELECT a.svrid_fk,
        a.objid_gen,
        'MD_STORED_PROGRAMS',
        1,
        'TYPE',
        CASE
          WHEN (a.type = 'FN')
          THEN 'SCALAR FUNCTION'
          WHEN (a.type = 'TF')
          THEN 'TABLE FUNCTION'
          ELSE
            /* IF */
            'INLINED T. FUNCTION'
        END
      FROM STAGE_SS2K5_OBJECTS a,
        stage_SS2K5_schemas s
      WHERE ( a.type     = 'FN'
      OR a.type          = 'TF'
      OR a.type          = 'IF')
      AND a.is_ms_shipped=0
      AND s.schema_id    = a.schema_id
      AND EXISTS
        (SELECT 1 FROM md_schemas mds WHERE mds.id=s.suid_gen
        )
      AND a.svrid_fk    = nSvrId
      AND s.svrid_fk    = nSvrId
      AND s.dbid_gen_fk = a.dbid_gen_fk
    ) ;
EXCEPTION
    WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
        LogInfo(NULL, sev_err, 'CaptureStoredPrograms Failed: ['  || errMsg ||  '] nSvrId = ' || nSvrId , NULL, NULL, nSvrId);
END CaptureStoredPrograms;

PROCEDURE CaptureTriggers
IS
      errMsg VARCHAR2(4000) := NULL;
BEGIN
  SetStatus('Capturing Triggers');
  INSERT
  INTO MD_TRIGGERS
    (
      "ID",
      table_or_view_id_fk,
      trigger_on_flag,
      trigger_name,
      native_sql,
      "LANGUAGE",
      comments
    )
    (SELECT a.objid_gen,
        (
        CASE
          WHEN (v.type = 'V')
          THEN v.objid_gen
          ELSE
            (SELECT t.objid_gen
            FROM stage_ss2k5_tables t
            WHERE t.object_id = a.parent_object_id
            AND t.svrid_fk    = nSvrId
            AND t.dbid_gen_fk = a.dbid_gen_fk
            )
        END),
        CASE
          WHEN (v.type = 'V')
          THEN 'V'
          ELSE 'T'
        END,
        a."NAME",
        b.DEFINITION,
        'MSTSQL',
        p.value comments
      FROM STAGE_SS2K5_OBJECTS a,
        STAGE_SS2K5_SQL_MODULES b,
        STAGE_SS2K5_objects v,
        STAGE_SS2K5_SYSPROPERTIES p
      WHERE a."TYPE"     ='TR'
      AND v.object_id    = a.parent_object_id
      AND a."OBJECT_ID"  = b."OBJECT_ID"
      AND a.is_ms_shipped=0
      AND ((EXISTS
        (SELECT 1 FROM md_views v WHERE v.id = v.objid_gen
        ))
      OR (EXISTS
        (SELECT 1
        FROM md_tables tt,
          stage_ss2k5_tables ts
        WHERE tt.id       = ts.objid_gen
        AND ts.object_id  = v.object_id
        AND a.dbid_gen_fk = ts.dbid_gen_fk
        AND ts.svrid_fk   = nSvrId
        AND ts.NAME NOT IN ('sysdiagrams')
        ) ) )
      AND a.svrid_fk       = nSvrId
      AND b.svrid_fk       = nSvrId
      AND v.svrid_fk       = nSvrId
      AND a.dbid_gen_fk    = b.dbid_gen_fk
      AND v.dbid_gen_fk    = b.dbid_gen_fk
      AND p.class(+)       = 1
      AND p.svrid_fk(+)    = nSvrId
      AND p.MAJOR_ID(+)    = a.object_id
      AND p.MINOR_ID(+)    = 0
      AND p.dbid_gen_fk(+) = a.dbid_gen_fk
    ) ;
EXCEPTION
    WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
        LogInfo(NULL, sev_err, 'CaptureTriggers Failed: ['  || errMsg ||  '] nSvrId = ' || nSvrId , NULL, NULL, nSvrId);
END CaptureTriggers;
--actually drill down to the base type in column creation
--need to get UDT name mapping for procedure translation.

FUNCTION printUDTDef
  (
    basename VARCHAR2,
    p        NUMBER,
    s        NUMBER,
    m        NUMBER
  )

  RETURN VARCHAR2
IS
  StringOut VARCHAR2
  (
    200 CHAR
  )
  ;
  myPRECISION NUMBER
  (
    38,0
  )
  ;
  myscale NUMBER
  (
    38,0
  )
  ;
BEGIN
  StringOut:=basename;
  myPRECISION:=

  CASE

  WHEN ( ( p = 0 ) OR ( p IS NULL ) ) THEN
    SS2K5AllPlatform.getPrecision
    (
      basename,m,s
    )

  ELSE
    SS2K5AllPlatform.getPrecision
    (
      basename,p,s
    )

  END;
  myscale:=SS2K5AllPlatform.getnewscale
  (
    basename,

    CASE

    WHEN ( (p = 0 ) OR ( p IS NULL ) ) THEN
      m

    ELSE
      p

    END,s
  )
  ;

  IF
    (
      myscale IS NOT NULL
    )
    THEN
    StringOut:=StringOut||'('||myprecision||','||myscale||')';

  ELSE

    IF
      (
        (myPRECISION IS NOT NULL) AND (myPRECISION != -1 )
      )
      THEN --decision display max_len as a known value
      StringOut:=StringOut||'('||myprecision||')';

    END IF;

  END IF;

  RETURN StringOut;

END;

PROCEDURE CaptureUDT
IS
  errMsg VARCHAR2(4000) := NULL;
BEGIN
  SetStatus(' UDT');
  INSERT
  INTO MD_USER_DEFINED_DATA_TYPES
    (
      SCHEMA_ID_FK,
      DATA_TYPE_NAME,
      DEFINITION,
      NATIVE_SQL,
      NATIVE_KEY,
      COMMENTS,
      SECURITY_GROUP_ID,
      CREATED_ON,
      CREATED_BY,
      LAST_UPDATED_ON,
      LAST_UPDATED_BY
    )
    (SELECT ss.id,
        b.name,
        SS2K5ALLPLATFORM.printUDTDef(a.name, b.precision, b.scale, b."MAX_LENGTH"),
        SS2K5ALLPLATFORM.printUDTDef(a.name, b.precision, b.scale, b."MAX_LENGTH"),
        '0',
        pp.value,
        0,
        SYSDATE,
        NULL,
        NULL,
        NULL
      FROM STAGE_SS2K5_types a,
        STAGE_SS2K5_types b,
        STAGE_SS2K5_SCHEMAS s,
        md_schemas ss,
        STAGE_SS2K5_SYSPROPERTIES pp
      WHERE a.user_type_id = b.system_type_id
      AND b.user_type_id  != b.system_type_id
      AND b.schema_id      = s.schema_id
      AND s.suid_gen       = ss.id
      AND a.svrid_fk       = nSvrId
      AND b.svrid_fk       = nSvrId
      AND s.svrid_fk       = nSvrId
      AND a.dbid_gen_fk    = b.dbid_gen_fk
      AND s.dbid_gen_fk    = b.dbid_gen_fk
      AND pp.class(+)       = 6
      AND pp.svrid_fk(+)    = nSvrId
      AND pp.MAJOR_ID(+)    = b.user_type_id
      AND pp.MINOR_ID(+)    = 0
      AND pp.dbid_gen_fk(+) = b.dbid_gen_fk
    );
EXCEPTION
     WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
        LogInfo(NULL, sev_err, 'CaptureUDT Failed: ['  || errMsg ||  '] nSvrId: ' || nSvrId, NULL, NULL, nSvrId); 
END CaptureUDT;

PROCEDURE CaptureEntireStage
IS
  errMsg VARCHAR2(4000) := NULL;
BEGIN
  CaptureConnections;
  COMMIT;
  CaptureDatabases;
  COMMIT;
  CaptureSchemas;
  COMMIT;
  CaptureTables;
  COMMIT;
  CaptureColumns;
  COMMIT;
  CaptureConstraints;
  COMMIT;
  CaptureIndexes;
  COMMIT;
  CaptureViews;
  COMMIT;
  CaptureStoredPrograms;
  COMMIT;
  CaptureTriggers;
  COMMIT;
  CaptureUDT;
  COMMIT;
EXCEPTION
     WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
        LogInfo(NULL, sev_err, 'CaptureEntireStage Failed: ['  || errMsg ||  '] nSvrId: ' || nSvrId, NULL, NULL, nSvrId); 
END CaptureEntireStage;

PROCEDURE FixSysDatabases
IS
BEGIN
  NULL;

END FixSysDatabases;

PROCEDURE FixSysUsers
IS
BEGIN
  NULL;

END FixSysUsers;

PROCEDURE FixTables
IS
  errMsg VARCHAR2(4000) := NULL; 
  CURSOR curDb
  IS

    SELECT schema_id,
      DBID_GEN_FK,
      suid_gen
    FROM stage_ss2k5_schemas
    WHERE svrid_fk = nSvrId ;
BEGIN

  FOR r_c1 IN curDb
  LOOP
    BEGIN
    -- assuming 1 to 1 correspondance between suid and uid within a database

    UPDATE stage_ss2k5_tables
    SET schema_id_fk  = r_c1.suid_gen
    WHERE dbid_gen_fk = r_c1.dbid_gen_fk
    AND svrid_fk      = nSvrId
    AND schema_id     = r_c1.schema_id;
    EXCEPTION
       WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
        LogInfo(NULL, sev_err, 'FixTables Failed: individual schema fail ['  || errMsg ||  '] nSvrId:schema_id_fk = ' || nSvrId || ': ' || r_c1.suid_gen, NULL, NULL, nSvrId);
    END;
  END LOOP; -- schemas loop

EXCEPTION
WHEN OTHERS THEN
  DBMS_OUTPUT.put_line('Exception in FixTables');
  errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
  LogInfo(NULL, sev_err, 'FixTables Failed: Outer Loop Fail ['  || errMsg ||  '] nSvrId = ' || nSvrId , NULL, NULL, nSvrId);
END FixTables;

PROCEDURE FixColumns
IS
  errMsg VARCHAR2(4000) := NULL;
  CURSOR curDb
  IS

    SELECT objid_gen,
      object_id,
      DBID_GEN_FK
    FROM stage_ss2k5_tables
    WHERE svrid_fk = nSvrId ;
BEGIN

  FOR r_c1 IN curDb
  LOOP
    BEGIN
    -- assuming 1 to 1 correspondance between suid and uid within a database

    UPDATE stage_ss2k5_columns
    SET id_gen_fk   = r_c1.objid_gen
    WHERE object_id = r_c1.object_id --object_id is parent object, column_id is
      -- this ibject
    AND dbid_gen_fk = r_c1.dbid_gen_fk
    AND svrid_fk    = nSvrId;
    EXCEPTION
       WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
        LogInfo(NULL, sev_err, 'FixColumns Failed: individual column fail ['  || errMsg ||  '] nSvrId:id_gen_fk = ' || nSvrId || ': ' || r_c1.objid_gen , NULL, NULL, nSvrId);
    END;
  END LOOP; -- tables loop

EXCEPTION

WHEN OTHERS THEN
  DBMS_OUTPUT.put_line('Exception in FixColumns');
  errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
  LogInfo(NULL, sev_err, 'FixColumns Failed: outside loop fail ['  || errMsg ||  '] nSvrId = ' || nSvrId, NULL, NULL, nSvrId);
END FixColumns;

PROCEDURE FixIndexes
IS
  errMsg VARCHAR2(4000) := NULL;
BEGIN
NULL;
EXCEPTION

WHEN OTHERS THEN
  DBMS_OUTPUT.put_line('Exception in FixIndexes');
  errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
  LogInfo(NULL, sev_err, 'FixIndexes Failed: outside loop fail ['  || errMsg ||  '] nSvrId = ' || nSvrId, NULL, NULL, nSvrId);
END FixIndexes;

PROCEDURE UpdateScratchModel
IS

  CURSOR curDerived
  IS

    SELECT *
    FROM MD_DERIVATIVES
    WHERE DERIVED_TYPE      IN ('MD_VIEWS', 'MD_STORED_PROGRAMS', 'MD_TRIGGERS')
    AND ( derivative_reason IS NULL
    OR derivative_reason    <> 'SCRATCH' );

  v_TransSQL CLOB;
  v_SourceSQL CLOB;
BEGIN
  NULL;

END;

PROCEDURE FixStageKeyReferences
IS
  errMsg VARCHAR2(4000) := NULL;
BEGIN
  FixSysDatabases;
  FixSysUsers;
  FixTables;
  FixColumns;
  FixIndexes;
EXCEPTION
  WHEN OTHERS THEN
     errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
     LogInfo(NULL, sev_err, 'FixStageKeyReferences Failed: ['  || errMsg ||  '] nSvrId = ' || nSvrId , NULL, NULL, nSvrId);
END;

Procedure DoAndWriteError(execvarchar varchar2)
is
  errMsg VARCHAR2(4000) := NULL;
BEGIN
execute immediate execvarchar;
EXCEPTION

WHEN OTHERS THEN
  DBMS_OUTPUT.put_line('Exception in DoAndWriteError:'||execvarchar);
  errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
  LogInfo(NULL, sev_warn, 'DoAndWriteError Failed: ['  || errMsg ||  '] nSvrId:execvarchar = ' || nSvrId || ': '|| execvarchar , NULL, NULL, nSvrId);
END DoAndWriteError;

PROCEDURE RegisterSQLServerPlugin
IS
  errMsg VARCHAR2(4000) := NULL;
BEGIN

  INSERT
  INTO md_additional_properties
    (
      connection_id_fk,
      ref_id_fk,
      ref_type,
      property_order,
      prop_key,
      "VALUE"
    )
    VALUES
    (
      nSvrId,
      nSvrId,
      'MD_CONNECTIONS',
      0,
      'PLUGIN_ID',
      pluginClass -- could be 2005 or 2008 
    );
  COMMIT;
EXCEPTION
     WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
        LogInfo(NULL, sev_err, 'RegisterSQLServerPlugin Failed: ['  || errMsg ||  '] nSvrId: ' || nSvrId, NULL, NULL, nSvrId); 
END;

FUNCTION StageCapture
  (
    projectId      NUMBER,
    pluginClassIn   varchar2,
    projExists BOOLEAN:=FALSE,
    p_scratchModel BOOLEAN := FALSE
  )

  RETURN VARCHAR2
IS
  ret_val NAME_AND_COUNT_ARRAY;
  scratchConnId         NUMBER :=0;
  connectionStatsResult NUMBER;
  errMsg VARCHAR2(4000) := NULL;
BEGIN
  nSvrId := NULL;
  pluginClass := pluginClassIn;--could be 2005 or 2008
  nProjectId := projectId;
  bProjectExists:=projExists;
  SELECT svrid INTO nSvrId FROM STAGE_SERVERDETAIL WHERE project_id = projectId;
  -- Initialize the log status table
  INSERT INTO migrlog(parent_log_id, log_date, severity, logtext, phase, ref_object_id, ref_object_type, connection_id_fk) 
  VALUES(NULL, systimestamp, 666, 'Capture Started', 'CAPTURE', NULL, NULL, projectId);
  COMMIT; 
  FixStageKeyReferences;
  CaptureEntireStage;
  RegisterSQLServerPlugin;
  connectionStatsResult:=MIGRATION.gatherConnectionStats(nSvrId, 'This is a capture model created using the enterprise estimation cmd tool');
  COMMIT;
  MIGRATION.POPULATE_DERIVATIVES_TABLE(nSvrId);
  COMMIT;

  IF p_scratchModel = TRUE THEN
    scratchConnId  := MIGRATION.copy_connection_cascade(p_connectionid => nSvrId, p_scratchModel => TRUE);
    ret_val        := migration.transform_all_identifiers(scratchConnId, '', TRUE);
    UpdateScratchModel;
    connectionStatsResult:=MIGRATION.gatherConnectionStats(scratchConnId, 'This is a scratch model used for analysis and estimation');
    COMMIT;

  END IF;
  DELETE migrlog WHERE phase='CAPTURE' AND severity = 666 AND connection_id_fk = projectId;
  COMMIT; 
  --IF exceptionOccurred = TRUE THEN
  --  RAISE CaptureNotClean;
  --END IF;
  RETURN ''|| nSvrId||'/'||scratchConnId;
EXCEPTION
  WHEN CaptureNotClean THEN
      RAISE CaptureNotClean;
  WHEN OTHERS THEN
      errMsg := LOCALSUBSTRB(LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_STACK) || ' ' || LOCALSUBSTRB(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE));
      LogInfo(NULL, sev_err, 'StageCapture Failed: ['  || errMsg ||  '] nSvrId: ' ||nSvrId, NULL, NULL, nSvrId);
      RAISE CaptureNotClean;
END StageCapture;

END SS2K5ALLPLATFORM;

/


PROMPT Completed SS2K5ALLPLATFORM.sql
PROMPT


-- ============================================================================
-- Deploy: SYB12ALLPLATFORM.sql
-- Category: package bodies
-- ============================================================================

PROMPT Deploying SYB12ALLPLATFORM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package Body SYB12ALLPLATFORM
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "DB_JT"."SYB12ALLPLATFORM" AS   
  -- TYPE split_tbl_type IS TABLE OF VARCHAR2(32767);
   TYPE split_varray_type IS VARRAY(255) OF VARCHAR2(32767);
   TYPE ref_cur_type IS REF CURSOR;
   TYPE key_array is VARRAY(20) OF NUMBER;
   TYPE str_array_type IS TABLE OF VARCHAR2(32767) INDEX BY BINARY_INTEGER;
   nProjectId  NUMBER;
   sev_err CONSTANT NUMBER :=2;
   sev_warn CONSTANT NUMBER :=4;
   sev_others CONSTANT NUMBER :=8;
   projectExist BOOLEAN;
   exceptionOccurred BOOLEAN :=FALSE;
   nSvrId NUMBER; -- This is the captured connection id
   pluginClass varchar2(500) := null;
   progressStatus varchar2(1000) := null;
   CaptureNotClean EXCEPTION;

----------------------- bitwise operation util begin ---------

   BaseFmt constant char(12) := 'XXXXXXXXXXXX';
   RawToNumberFMT constant char(14) := 'XX' || BaseFmt;
   NumberToRawFMT constant char(14) := '0X' || BaseFmt;

FUNCTION LOCALSUBSTRB(
    vin  VARCHAR2)  RETURN VARCHAR2
AS
  v VARCHAR2(4000 CHAR):=SUBSTR(vin,1,4000);
  l NUMBER;
BEGIN
  l               := LENGTH(v);
  WHILE (lengthb(v)>4000)
  LOOP
    l := l-1;
    v := SUBSTR(v,1,l);
  END LOOP;
  RETURN v;
END;


PROCEDURE LogInfo( parent_log_id NUMBER,
                   severity NUMBER,
                   logtext VARCHAR2,
                   ref_obj_id NUMBER,
                   ref_obj_type VARCHAR2,
                   connection_id NUMBER)
 IS
   PRAGMA AUTONOMOUS_TRANSACTION;
   errmsg  varchar2(4000) := null;
   fit_logtext varchar2(4000) := LOCALSUBSTRB(logtext);
 BEGIN
   exceptionOccurred :=TRUE;
   INSERT INTO MIGRLOG(parent_log_id, 
                       log_date, 
                       severity, 
                       logtext, 
                       phase, 
                       ref_object_id, 
                       ref_object_type, 
                       connection_id_fk) 
         VALUES(parent_log_id, 
                sysdate, 
                severity, 
                fit_logtext, 
                'Capture', 
                ref_obj_id, 
                ref_obj_type, 
                connection_id) ;
   COMMIT;
 EXCEPTION
 when others then
   errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
   DBMS_OUTPUT.put_line('Log Err: ['  || errMsg       || ']'
                                    || parent_log_id   || ':' 
                                    || severity     || ':'
                                    || logtext      || ':Capture:'
                                    || ref_obj_id   || ':'
                                    || ref_obj_type || ':'
                                    || connection_id);
 END LogInfo;


   FUNCTION ToRaw(p_Value NUMBER) RETURN RAW 
   IS
     errMsg VARCHAR2(4000) := NULL;
   BEGIN
   IF(P_VALUE < 0) THEN
    RETURN HexToRaw(LTRIM(To_Char(0, NumberToRawFMT)));
   END IF;
     RETURN HexToRaw(LTRIM(To_Char(p_Value, NumberToRawFMT)));
   EXCEPTION
     when others then
        errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
        LogInfo(NULL, sev_err, 'ToRaw Failed: ['  || errMsg || '] ' || p_Value, NULL, NULL, nSvrId);
   END;

   FUNCTION BitOr(p_Value1 NUMBER, p_Value2 NUMBER) RETURN NUMBER
   IS
     errMsg VARCHAR2(4000) := NULL;
   BEGIN
     RETURN To_Number(UTL_RAW.bit_or(ToRaw(p_Value1), ToRaw(p_Value2)), RawToNumberFMT);
   EXCEPTION
     when others then
        errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
        LogInfo(NULL, sev_err, 'BitOr Failed: ['  || errMsg || '] ' || p_Value1 || ': ' || p_Value2, NULL, NULL, nSvrId);     
   END;

   FUNCTION BitAnd(p_Value1 number, p_Value2 number) RETURN NUMBER
   IS
      errMsg VARCHAR2(4000) := NULL;
   BEGIN
     return To_Number(UTL_RAW.bit_and(ToRaw(p_Value1), ToRaw(p_Value2)), RawToNumberFMT);
   EXCEPTION
     WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
        LogInfo(NULL, sev_err, 'BitAnd Failed: ['  || errMsg ||  '] ' || p_Value1 || ': ' || p_Value2, NULL, NULL, nSvrId);          
   END;

----------------------- bitwise operation util end ---------
----------------------- n type convert util begin ----------------

   FUNCTION ConvertFromNType(nType VARCHAR2) RETURN VARCHAR2
   IS
     errMsg VARCHAR2(4000) := NULL;
   BEGIN
      IF 'INTN' = UPPER(nType) THEN
         RETURN 'int';
      ELSIF 'FLOATN' = UPPER(nType) THEN
         RETURN 'float';
      ELSIF 'DATETIMN' = UPPER(nType) THEN
         RETURN 'date'; 
      ELSIF 'MONEYN' = UPPER(nType) THEN         
         RETURN 'money';
      ELSIF 'DECIMALN' = UPPER(nType) THEN   
         RETURN 'decimal';
      ELSIF 'NUMERICN' = UPPER(nType) THEN   
         RETURN 'numeric';
      ELSIF 'DATEN' = UPPER(nType) THEN
         RETURN 'date';
      ELSIF 'TIMEEN' = UPPER(nType) THEN
         RETURN 'time';
      ELSIF 'UINTN' = UPPER(nType) THEN
         RETURN 'unit';
      END IF ;      
         RETURN nType;
   EXCEPTION
     WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
        LogInfo(NULL, sev_err, 'ConvertFromNType Failed: [' || errMsg || '] ' || nType, NULL, NULL, nSvrId);              
   END ConvertFromNType;

----------------------------- n type convert util end ---------------     

   FUNCTION GetDescription(basename VARCHAR2, precisionin NUMBER, scalein NUMBER, lengthin NUMBER) RETURN VARCHAR2 
   is
     basenameNoN VARCHAR2(200);
     errMsg VARCHAR2(4000) := NULL;
     precision NUMBER := null;
     scale NUMBER := null;
     retDef VARCHAR2(400);
   BEGIN
     basenameNoN := ConvertFromNType(LOWER(basename));
     --need to handle the 
     --precision scale types:numeric (p, s) decimal (p, s)
     --precision types:float (precision)
     --length types: char(n)varchar(n)binary(n)varbinary(n)
     --length /1 types (best estimate): nchar(n) nvarchar(n) might oversize nchar & nvarche - checked @@NCHARSIZE on our iso machines = 1
     IF ((basenameNoN = 'numeric') OR (basenameNoN = 'decimal')) THEN
       precision := precisionin;
       scale := scalein;
     ELSIF (basenameNoN = 'float') THEN
       precision := precisionin;
     ELSIF ((basenameNoN = 'char') OR (basenameNoN = 'varchar') OR (basenameNoN = 'binary') OR (basenameNoN = 'varbinary')) THEN
       precision := lengthin;
     ELSIF ((basenameNoN = 'nchar') OR (basenameNoN = 'nvarchar')) THEN
       IF (lengthin IS NOT NULL) THEN
         precision := lengthin;-- /2;
       END IF;
     END IF;
     retDef:=basename;
     IF (precision is not null) THEN 
       IF (scale is not null) THEN
         retDef := retDef || '(' || precision || ',' || scale || ')';
       ELSE
         retDef := retDef || '(' || precision || ')';
       END IF;
     END IF;
     RETURN retDef;
   EXCEPTION
     WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
        LogInfo(NULL, sev_err, 
                'GetDescription Failed: [' || errMsg || '] ' || basename || ':' || 
                precisionin || ':' || scalein || ':' || lengthin, 
                NULL, NULL, nSvrId);                   
   END GetDescription;

 PROCEDURE SetStatus(msg VARCHAR2)
 IS
 BEGIN
    --dbms_output.put_line(msg);
    --commit;
    --progressStatus := msg;
    --dbms_lock.sleep(2);
    UPDATE migrlog SET logtext = msg,
                   log_date = systimestamp
                   WHERE severity = 666 
                       AND phase = 'CAPTURE'
                       AND connection_id_fk = nProjectId;                   
    COMMIT;
 END SetStatus; 

/*
FUNCTION GetLogIdForObject(obj_id NUMBER) RETURN NUMBER
IS
  log_id NUMBER;
  errMsg VARCHAR2(4000);
BEGIN
   SELECT id INTO log_id FROM migrlog WHERE ref_object_id = obj_id;
   RETURN log_id;
EXCEPTION
   WHEN NO_DATA_FOUND THEN
      NULL;
   WHEN OTHERS THEN
         errMsg := SQLERRM;
         DBMS_OUTPUT.put_line('Unable to GetLogIdForObject: ['  || errMsg       || ']'
                               || 'Object Id = ' || obj_id);         
END GetLogIdForObject;
*/

 FUNCTION GetStatus(iid INTEGER) RETURN varchar2
 IS
    status VARCHAR2(4000);
    errMsg VARCHAR2(2000);
 BEGIN
    SELECT logtext INTO status FROM migrlog WHERE severity = 666 AND phase = 'CAPTURE' AND connection_id_fk = iid;    
    RETURN status; 
EXCEPTION 
  when others then
     errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
     dbms_output.put_line('Status Message : ' || errMsg);
 END GetStatus;

   FUNCTION split_str2(srcStr VARCHAR2, delim CHAR := ',') RETURN split_varray_type
   IS
     nIdx    pls_integer;
     errMsg VARCHAR2(4000) := NULL;
     vlist    varchar2(32767) := srcStr;
     myvarray split_varray_type;
     cnt pls_integer := 1;
   BEGIN
      myvarray := split_varray_type();
      LOOP
      BEGIN
         IF  cnt < myvarray.limit 
         THEN
             myvarray.EXTEND;
         END IF;

         nIdx := INSTR(vlist,delim);
         IF nIdx > 0 THEN
            myvarray(myvarray.last) := SUBSTR(vlist,1,nIdx-1);
            vlist := SUBSTR(vlist,nIdx + LENGTH(delim));
         ELSE
            myvarray(myvarray.last) := vlist;
            EXIT;
         END IF;         
         cnt := cnt+1;
      EXCEPTION
      WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
        LogInfo(NULL, sev_err, 
                'split_str2 Failed: [' || errMsg || '] '|| srcStr || ':' || 
                delim, 
                NULL, NULL, nSvrId); 
         cnt :=cnt + 1;         
      END;
      END LOOP;
      RETURN myvarray;
   END split_str2;

----------------------- split util begin -------------------
/*
   FUNCTION split_str(srcStr VARCHAR2, delim CHAR := ',') RETURN split_tbl_type PIPELINED
   IS
     nIdx    pls_integer;
     vlist    varchar2(32767) := srcStr;
   BEGIN
      LOOP      
         nIdx := INSTR(vlist,delim);
         IF nIdx > 0 THEN
            PIPE ROW (SUBSTR(vlist,1,nIdx-1));
            vlist := SUBSTR(vlist,nIdx + LENGTH(delim));
         ELSE
            PIPE ROW (vlist);
            EXIT;
         END IF;
      END LOOP;
   END split_str;
*/
----------------------- split util end ---------------------


----------------------------- EndsWith string util begin -------------

   FUNCTION EndsWithStr(srcStr CHAR, tgtStr CHAR) RETURN INTEGER
   IS
     errMsg VARCHAR2(4000);
     nPatPos INTEGER :=0; --Doesn't end with the str
     nSrcStrLen INTEGER := LENGTH(srcStr);
     nTgtStrLen INTEGER := LENGTH(tgtStr);
   BEGIN
      IF nSrcStrLen != 0 
         AND nTgtStrLen != 0 
         AND nSrcStrLen IS NOT NULL 
         AND nTgtStrLen IS NOT NULL THEN         
           nPatPos := InStr(srcStr, tgtStr, (nSrcStrLen - nTgtStrLen));
      END IF;
      RETURN nPatPos;
  EXCEPTION
      WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
        LogInfo(NULL, sev_err, 
                'EndsWithStr Failed: [' || errMsg || '] ' || srcStr || ':' || 
                tgtStr, 
                NULL, NULL, nSvrId);          

   END;
----------------------------- EndsWith string util end ---------------


   FUNCTION GetColIdFromName(svrId NUMBER, dbId NUMBER, tblId NUMBER, colName VARCHAR2) RETURN INTEGER
   IS
      curColId ref_cur_type;
      nColId INTEGER;
      errMsg VARCHAR2(4000) := NULL;
      --upperName VARCHAR2(300);
   BEGIN
      --upperName := UPPER(colName);
      OPEN curColId FOR 'SELECT COLID_GEN FROM stage_syb12_syscolumns
             WHERE SVRID_FK = :1 
                AND DBID_GEN_FK = :2 
                AND ID_GEN_FK = :3
                AND LOWER(NAME) = LOWER(:4)' USING svrId, dbId, tblId, colName;
      FETCH curColId INTO nColId;
      CLOSE curColId;
      RETURN nColId;
  EXCEPTION
      WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
        LogInfo(NULL, sev_err, 
                'GetColIdFromName Failed: [' || errMsg || '] ' || svrId || ':' || 
                dbId || ':' || tblId || ':' || colName, 
                NULL, NULL, nSvrId);          
   END GetColIdFromName;

   PROCEDURE CaptureConnections
   IS
      errMsg VARCHAR2(4000) := NULL;
   BEGIN
      -- create project

      if (projectExist = FALSE)
      THEN            
      INSERT INTO md_projects("ID", project_name, comments)
           (
              SELECT project_id, project_name, comments FROM
                 stage_serverdetail WHERE project_id = nProjectId
                 AND NOT EXISTS (SELECT 1 FROM md_projects WHERE "ID" = nProjectId)
           ) ; 
      END IF;
      --capture connections
      INSERT INTO md_connections("ID", project_id_fk, username, dburl, "NAME")
      (
         SELECT SVRID, nProjectId, username, dburl, db_name 
         FROM stage_serverdetail WHERE project_id = nProjectId
      ) ;
  EXCEPTION
      WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
        LogInfo(NULL, sev_err, 
                'CaptureConnections Failed: [' || errMsg || '] ' || 'Project Id : ' || nProjectId, 
                NULL, NULL, nSvrId);                
   END CaptureConnections;

   PROCEDURE CaptureDatabases
   IS 
     errMsg VARCHAR2(4000) := NULL;
   BEGIN
      INSERT INTO md_catalogs("ID", connection_id_fk, catalog_name,
        dummy_flag)
      (
         SELECT dbid_gen, svrid_fk, "NAME", 'N' 
           FROM stage_syb12_sysdatabases
             WHERE svrid_fk = nSvrId
      );
  EXCEPTION
      WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
        LogInfo(NULL, sev_err, 
                'CaptureDatabases Failed: [' || errMsg || '] ' || 'Server Id : ' || nSvrId, 
                NULL, NULL, nSvrId);        
   END CaptureDatabases;

   PROCEDURE CaptureSchemas
   IS
     errMsg VARCHAR2(4000) := NULL;
   BEGIN
      INSERT INTO md_schemas("ID", catalog_id_fk, "NAME")
          (
            -- Capture only those users who own atleast 1 object in the database
            -- Consciously ignoring users with on owned objects during schema capture
             SELECT A.suid_gen, A.dbid_gen_fk, A."NAME"
             FROM stage_syb12_sysusers A
             WHERE A.svrid_fk = nSvrId 
               AND A.suid>0 
               AND A.db_uid IN (SELECT DISTINCT db_uid FROM stage_syb12_sysobjects)             
          );
  EXCEPTION
      WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
        LogInfo(NULL, sev_err, 
                'CaptureSchemas Failed: [' || errMsg || '] ' || 'Server Id : ' || nSvrId, 
                NULL, NULL, nSvrId);           
   END;

   PROCEDURE CaptureTables
   IS 
         errMsg VARCHAR2(4000) := null;
   BEGIN
      --SetStatus('Capturing Tables');
      INSERT INTO md_tables("ID", schema_id_fk, table_name, qualified_native_name)
          (
             SELECT objid_gen, suid_gen_fk, A."NAME", C."NAME" || '.' || B."NAME" || '.' || A."NAME"
             FROM stage_syb12_sysobjects A, stage_syb12_sysusers B, stage_syb12_sysdatabases C
             WHERE A.db_type = 'U '
                 AND A.db_uid = B.db_uid
                 AND A.svrid_fk = B.svrid_fk
                 AND A.dbid_gen_fk = B.dbid_gen_fk
                 AND B.svrid_fk = C.svrid_fk
                 AND B.dbid_gen_fk = C.dbid_gen
                 AND B.suid>0 
                 AND A.svrid_fk = nSvrId
          );           	
    EXCEPTION 
      WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
        LogInfo(NULL, sev_err, 
                'CaptureTables Failed: [' || errMsg || '] ' || 'Server Id : ' || nSvrId, 
                NULL, NULL, nSvrId);
   END CaptureTables;

   PROCEDURE CaptureColumns
   IS
     --curObjCols ref_cur_type;
     --objColSql VARCHAR2(4000) := '';
     CURSOR curObjCols IS SELECT B.svrid_fk, B.dbid_gen_fk, B.id_gen_fk, B.colid_gen,B."LENGTH",
           C."NAME" coltypename, B."NAME", B."PREC", B."SCALE",  B.status nullable, B.cdefault, B.status, B.db_type, B.usertype, B.colid
        FROM stage_syb12_sysobjects A, stage_syb12_syscolumns B, stage_syb12_systypes C, stage_syb12_sysusers D  
        WHERE A.objid_gen = B.id_gen_fk 
        AND A.dbid_gen_fk = B.dbid_gen_fk
        AND A.svrid_fk = B.svrid_fk
        AND A.dbid_gen_fk = C.dbid_gen_fk
        AND A.svrid_fk = C.svrid_fk
        AND B.usertype = C.usertype
        AND A.db_uid = D.db_uid
        AND A.svrid_fk = D.svrid_fk
        AND A.dbid_gen_fk = D.dbid_gen_fk
        AND D.suid>0         
        AND A.svrid_fk = nSvrId
        AND A.DB_TYPE = 'U '
        ORDER BY B.colid;

     --nColOrder INTEGER :=1; -- column index is 1 based.
     cNullable CHAR(1) := 'Y';
     vDefaultValue VARCHAR2(4000);
     vDefaultValPiece VARCHAR2(300);
     vColType VARCHAR2(4000);

     curDefaultVal ref_cur_type;
     defaultStart  pls_integer;
     defaultEnd pls_integer;

     errMsg VARCHAR2(4000);
   BEGIN
     -- Need to work the loop as there is procedural logic involved in using the length vs precision
     -- and generating the column order
         --SetStatus('Capturing Table columns');
      FOR r_c1 IN curObjCols 
      LOOP

          IF BitAnd(r_c1.nullable, 8) = 8 THEN
             cNullable := 'Y';
          ELSE
             cNullable := 'N';
          END IF;

          IF r_c1.usertype > 100 THEN  -- Handle user defined types
          BEGIN
                SELECT MAX("NAME") INTO vColType FROM STAGE_SYB12_SYSTYPES 
                 WHERE usertype < 100 -- SUSPECIOUS: condition reversed from above.  Check java code 
                     AND db_type = r_c1.db_type
                     AND "NAME" NOT IN ('longsysname', 'sysname', 'nchar', 'nvarchar', 'timestamp')
                     AND dbid_gen_fk = r_c1.dbid_gen_fk;      

         EXCEPTION
              WHEN OTHERS THEN
                 errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
                 LogInfo(NULL, sev_err, 'CaptureColumns: Unable to Handle UDT: ['  || errMsg ||  '] db_type:dbid_gen_fk ' 
                                                               || r_c1.db_type || ': ' || r_c1.dbid_gen_fk , NULL, NULL, nSvrId);          
          END;               
          ELSE
             vColType := ConvertFromNType(r_c1.coltypename);
             -- TODO: Need to log conversion of type as a warning in the log table
          END IF;

          IF r_c1.cdefault != 0 THEN
           BEGIN --USE THE STAGE_TRANSLATED_SQL as it rollsup the text
              OPEN curDefaultVal FOR  SELECT text  
                  FROM stage_syb12_syscomments 
                     WHERE "ID" = r_c1.cdefault
                  AND dbid_gen_fk = r_c1.dbid_gen_fk   ORDER BY colid; -- delebrately using IS in the WHERE caluse as it is easy to work with syb generated id here
                  FETCH curDefaultVal INTO vDefaultValPiece;
              LOOP
                 EXIT WHEN curDefaultVal%NOTFOUND;
                 vDefaultValue := CONCAT(vDefaultValue, ' ');
                 vDefaultValue := CONCAT(vDefaultValue, vDefaultValPiece);
                 FETCH curDefaultVal INTO vDefaultValPiece;
              END LOOP;
              CLOSE curDefaultVal;
              defaultStart := INSTR(vDefaultValue,'"',1,1);
              defaultEnd := INSTR(vDefaultValue,'"',-1,1);
              IF defaultStart <= 0 THEN
              defaultStart := INSTR(vDefaultValue,'''',1,1);
              defaultEnd := INSTR(vDefaultValue,'''',-1,1);
              END IF;
              IF defaultStart <= 0 THEN
                vDefaultValue := TRIM(vDefaultValue);
                defaultStart := INSTR(vDefaultValue,' ',-1,1);  
                IF defaultStart > 0 THEN
                  vDefaultValue:= SUBSTR(vDefaultValue,defaultStart+1,LENGTH(vDefaultValue)-defaultStart);
                END IF;
              ELSE
                vDefaultValue := SUBSTR(vDefaultValue,defaultStart+1,defaultEnd -defaultStart -1);
              END IF;

              -- LENGTH('') Result: NULL :  defaultvalue is ''
              -- Bug 20353103 - EMPTY STRING NOT CONVERTED TO SINGLE SPACE DURING MIGRATION 
              IF length(vDefaultValue) is NULL THEN
                        vDefaultValue := CONCAT(vDefaultValue, ' ');
              END IF;

           EXCEPTION  
              WHEN NO_DATA_FOUND THEN
               NULL;  -- dont do anything
              when others then
                 errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
                 LogInfo(NULL, sev_err, 'CaptureColumns: stage_syb12_syscomments cursor issue: ['  || errMsg ||  ']  r_c1.cdefault:r_c1.dbid_gen_fk:vDefaultValue: ' 
                                                         || r_c1.cdefault || ':' || r_c1.dbid_gen_fk || ':' || vDefaultValue, NULL, NULL, nSvrId);          
           END;
          END IF;

          BEGIN
            IF BitAnd(r_c1.status, 128) = 128 THEN -- Handle identity column capture
               INSERT INTO MD_ADDITIONAL_PROPERTIES(connection_id_fk, 
                     ref_id_fk, ref_type, property_order, prop_key, "VALUE")
                     VALUES(r_c1.svrid_fk, r_c1.colid_gen, 'MD_COLUMNS', r_c1.colid, 'SEEDVALUE', 1);
            END IF;
          EXCEPTION
             when others then
                 errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
                 LogInfo(NULL, sev_err, 'CaptureColumns: Identity column issue: ['  || errMsg ||  ']  r_c1.svrid_fk:r_c1.colid_gen:r_c1.colid ' 
                                                                   || r_c1.svrid_fk || ':' || r_c1.colid_gen || ':' || r_c1.colid, NULL, NULL, nSvrId);          
          END;

          BEGIN
            IF r_c1."PREC" = 0 OR r_c1."PREC" IS NULL THEN -- use length
                INSERT INTO MD_COLUMNS("ID", table_id_fk, column_name, 
                       column_order, column_type, "PRECISION", "SCALE", nullable, default_value)
                       VALUES
                       ( r_c1.colid_gen, r_c1.id_gen_fk, r_c1."NAME", r_c1.colid, 
                           vColType, r_c1."LENGTH", r_c1."SCALE", cNullable, vDefaultValue
                       );
            ELSE -- use precision
                INSERT INTO MD_COLUMNS("ID", table_id_fk, column_name, 
                       column_order, column_type, "PRECISION", "SCALE", nullable, default_value)
                       VALUES
                       ( r_c1.colid_gen, r_c1.id_gen_fk, r_c1."NAME", r_c1.colid, 
                           vColType, r_c1."PREC", r_c1."SCALE", cNullable, vDefaultValue
                       );          
            END IF;
          EXCEPTION
             WHEN OTHERS THEN
                 errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
                 LogInfo(NULL, sev_err, 'CaptureColumns: md_columns insert issue: ['  || errMsg ||  ']  r_c1."PREC":r_c1.colid_gen:r_c1.id_gen_fk:r_c1."NAME":r_c1.colid:vColType:r_c1."SCALE":cNullable:vDefaultValue:r_c1."LENGTH" ' 
                                                                   || r_c1."PREC" || ':' || r_c1.colid_gen || ':' || r_c1.id_gen_fk || ':' || r_c1."NAME" || ':' || r_c1.colid
                                                                   || ':' || vColType || ':' || r_c1."SCALE" || ':' || cNullable || ':' || vDefaultValue || ':' || r_c1."LENGTH", NULL, NULL, nSvrId);          
          END;
          vDefaultValue :=''; -- reset it for the next iteration.
          --nColOrder := nColOrder + 1;
      END LOOP;
    EXCEPTION 
              WHEN OTHERS THEN
                 errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
                 LogInfo(NULL, sev_err, 'CaptureColumns Failed: Unable to Open master cursor: ['  || errMsg ||  ']  nSvrId: ' ||  nSvrId, NULL, NULL, nSvrId);          
   END CaptureColumns;

   /*
   PROCEDURE ProcessCheckConstraint(svrId NUMBER, 
               dbId NUMBER, tblId NUMBER, 
               constraint_name VARCHAR2, db_definition VARCHAR2)
   IS
      vConstText VARCHAR2(4000);
   BEGIN
            SetStatus('Capturing check constraints');
      vConstText := SUBSTR(db_definition, INSTR(db_definition, '(')+1,LENGTH(db_definition)-1);
      INSERT INTO MD_CONSTRAINTS("NAME", constraint_type, table_id_fk, "LANGUAGE", constraint_text)
      VALUES(constraint_name, 'CHECK', tblId, 'STSQL', vConstText);
   END ProcessCheckConstraint;

   PROCEDURE ProcessPkConstraint(svrId NUMBER, 
               dbId NUMBER, tblId NUMBER, 
               constraint_name VARCHAR2, db_definition VARCHAR2)
   IS
      curConsCols ref_cur_type;
      vConsId NUMBER;
      vConsCol VARCHAR2(300);
      nColId NUMBER;
      nColPos NUMBER :=1;
      consCols split_varray_type; 
   BEGIN
            SetStatus('Capturing Primary key constraint');
        INSERT INTO MD_CONSTRAINTS("NAME", constraint_type, table_id_fk, "LANGUAGE")
             VALUES(TRIM(constraint_name), 'PK' , tblId, 'STSQL') RETURNING "ID" INTO vConsId;
        --For each of the column shread the detail into the MD_CONSTRAINT_DETAILS
        --OPEN curConsCols FOR 'SELECT * FROM table(split_str(:1))' USING db_definition;
        --FETCH curConsCols INTO vConsCol;  
        consCols := split_str2(db_definition);
        LOOP
           EXIT WHEN nColPos > consCols.count;
           nColId := GetColIdFromName(svrId, dbId, tblId, TRIM(consCols(nColPos)));

           INSERT INTO MD_CONSTRAINT_DETAILS(constraint_id_fk, column_id_fk, detail_order) 
                 VALUES(vConsId, nColId, nColPos);
           nColPos := nColPos + 1;
        END LOOP;
        -- CLOSE curConsCols;
   END ProcessPkConstraint;

   PROCEDURE ProcessFkConstraint(svrId NUMBER, 
               dbId NUMBER, tblId NUMBER, 
               constraint_name VARCHAR2, db_definition VARCHAR2)
   IS
      nRefTblId NUMBER;
      nSchemaId NUMBER;
      nColId NUMBER;
      curConsCols ref_cur_type;
      vConsCol VARCHAR2(300);
      vRefTblName VARCHAR2(300);
      vTblName VARCHAR2(300);
      vConsDef_1 VARCHAR2(4000);
      vConsDef_2 VARCHAR2(4000);
      vRefColList VARCHAR2(4000);
      vColList VARCHAR2(4000);
      nPos NUMBER;
      nPos2 NUMBER;
      nConsId NUMBER;
      nColCnt NUMBER:=1;
      consCols split_varray_type;       
   BEGIN
            SetStatus('Capturing fk constraints');
      nPos := INSTR(db_definition, 'REFERENCES');

      IF nPos > 0 THEN
        vConsDef_1 := SUBSTR(db_definition, 1, nPos);       
        vConsDef_2 := SUBSTR(db_definition, nPos + LENGTH('REFERENCES'));

        nPos := INSTR(vConsDef_1, '(');
        nPos2 := INSTR(vConsDef_1, ')');
        vColList := SUBSTR(vConsDef_1, nPos +1, nPos2 - (nPos + 1)); 

        nPos := INSTR(vConsDef_2, '(');
        nPos2 := INSTR(vConsDef_2, ')');
        vRefTblName := TRIM(SUBSTR(vConsDef_2, 1, nPos));
        vRefColList := SUBSTR(vConsDef_2, nPos + 1, nPos2-(nPos + 1));

      ELSE
        RETURN; -- This should never happen
      END IF;

      SELECT suid_gen_fk INTO nSchemaId FROM stage_syb12_sysobjects A, 
                                             stage_syb12_sysconstraints B 
                            WHERE A.svrid_fk = B.svrid_fk 
                               AND B.svrid_fk = nSvrId 
                               AND A.dbid_gen_fk = B.dbid_gen_fk 
                               AND A."ID" = tblId;

      SELECT "NAME" INTO vTblName FROM stage_syb12_sysobjects A
                            WHERE A.svrid_fk = nSvrId
                               AND A.dbid_gen_fk = dbId
                               AND A."ID" = tblId;

      SELECT "ID" INTO nRefTblId FROM stage_syb12_sysobjects A
                            WHERE A.svrid_fk = nSvrid
                               AND A.dbid_gen_fk = dbId
                               AND A.SUID_GEN_FK = nSchemaId;

      -- Weed out self referencing foreign keys

      IF tblId = nRefTblId THEN
         RETURN;
      END IF;

      INSERT INTO MD_CONSTRAINTS("NAME", constraint_type, table_id_fk, reftable_id_fk,
                                   "LANGUAGE")                         
               VALUES (constraint_name, 'FOREIGN KEY', tblId, nRefTblId, 'STSQL')
                 RETURNING "ID" INTO nConsId;

      -- open the cursor for source columns          
      --OPEN curConsCols FOR 'SELECT * FROM table(split_str(:1))' USING vColList;               
      --FETCH curConsCols INTO vConsCol;
      consCols := split_str2(vColList); 
      -- source columns loop
      LOOP
        --EXIT WHEN curConsCols%NOTFOUND;
        EXIT WHEN nColCnt > consCols.count;
        nColId := GetColIdFromName(svrId, dbId, tblId, TRIM(consCols(nColCnt)));

        INSERT INTO MD_CONSTRAINT_DETAILS(constraint_id_fk, column_id_fk, detail_order) 
                VALUES ( nConsId, nColId, nColCnt);

        --FETCH curConsCols INTO vConsCol;
        nColCnt := nColCnt + 1;
      END LOOP;  
      -- CLOSE curConsCols;

      -- open the cursor for referenced columns
      --OPEN curConsCols FOR 'SELECT * FROM table(split_str(:1))' USING vRefColList;               
      --FETCH curConsCols INTO vConsCol;
      consCols := split_str2(vRefColList);
      nColCnt := 1; --re-initialize the counter for the ref columns loop
      LOOP
        --EXIT WHEN curConsCols%NOTFOUND;
       EXIT WHEN nColCnt > consCols.count;
        nColId := GetColIdFromName(svrId, dbId, tblId, TRIM(consCols(nColCnt)));

        INSERT INTO MD_CONSTRAINT_DETAILS(ref_flag, constraint_id_fk, column_id_fk, detail_order) 
                VALUES ('Y',  nConsId, nColId, nColCnt);

        --FETCH curConsCols INTO vConsCol;
        nColCnt := nColCnt + 1;
      END LOOP;  
      CLOSE curConsCols;                                    
   END ProcessFkConstraint;   

   PROCEDURE ProcessUkConstraint(svrId NUMBER, 
               dbId NUMBER, tblId NUMBER, 
               constraint_name VARCHAR2, db_definition VARCHAR2)
   IS
      curConsCols ref_cur_type;
      vConsId NUMBER;
      vConsCol VARCHAR2(300);
      nColId NUMBER;
      nColPos NUMBER :=1; 
      consCols split_varray_type;       
   BEGIN
            SetStatus('Capturing unique key constraint');
        INSERT INTO MD_CONSTRAINTS("NAME", constraint_type, table_id_fk, "LANGUAGE")
             VALUES(TRIM(constraint_name), 'UNIQUE' , tblId, 'STSQL') RETURNING "ID" INTO vConsId;
        --For each of the column shread the detail into the MD_CONSTRAINT_DETAILS
        --OPEN curConsCols FOR 'SELECT * FROM table(split_str(:1))' USING db_definition;
        --FETCH curConsCols INTO vConsCol;  
        consCols := split_str2(db_definition);
        LOOP
           EXIT WHEN nColPos > consCols.count;
           nColId := GetColIdFromName(svrId, dbId, tblId, TRIM(consCols(nColPos)));

           INSERT INTO MD_CONSTRAINT_DETAILS(constraint_id_fk, column_id_fk, detail_order) 
                 VALUES(vConsId, nColId, nColPos);
           nColPos := nColPos + 1;
        END LOOP;
        CLOSE curConsCols;
   END ProcessUkConstraint;   
   */

   PROCEDURE ProcessCheckConstraints(svrid NUMBER, db_id NUMBER, objid NUMBER)
   IS
      vConstText VARCHAR2(4000) := '';
      vIndex NUMBER(10) := 0;
      TYPE ConstraintRec IS RECORD
                        (
                            constraint_id NUMBER,
                            constraint_name varchar2(300)
                        );
      v_constRow ConstraintRec;
      v_commentRow stage_syb12_syscomments%ROWTYPE;
      CURSOR curConst(svrid NUMBER, db_id NUMBER, o_id NUMBER) IS SELECT a.constraint_gen constriant_id, b.name constraint_name 
                                    FROM stage_syb12_sysconstraints a, stage_syb12_sysobjects b
                                             WHERE a.table_id_gen_fk = o_id
                                                   AND a.svrid_fk = svrid
                                                   AND a.dbid_gen_fk = db_id
                                                   AND a.constraint_gen = b.objid_gen
                                                   AND BitAnd(b.sysstat, 15) = 7; -- last condition is some internal stuff copied from offline capture

      CURSOR curComment(svrid NUMBER, db_id NUMBER, constr_id NUMBER) IS SELECT * FROM stage_syb12_syscomments 
                                             WHERE id_gen_fk = constr_id
                                                   AND svrid_fk = svrid
                                                   AND dbid_gen_fk = db_id;

      errMsg VARCHAR2(4000);                                                   
   BEGIN
            --SetStatus('Capturing check constraint');
      OPEN curConst(svrid, db_id, objid);

      LOOP  -- Provision for multiple check constraints on a given table
        BEGIN
         FETCH curConst INTO v_constRow;
         EXIT WHEN curConst%NOTFOUND;

         --fetch all the constraint text and build the constraint
         OPEN curComment(svrid, db_id, v_constRow.constraint_id);

         LOOP
         BEGIN
            FETCH curComment INTO v_commentRow;
            EXIT WHEN curComment%NOTFOUND;
            vConstText := vConstText || v_commentRow.text || ' ';
         EXCEPTION
            WHEN OTHERS THEN
            errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
            LogInfo(NULL, sev_err, 'ProcessCheckConstraints: constraint text processing issue: ['  || errMsg ||  ']  svrid:db_id:objid:vConstText: ' ||  svrid || ':' || db_id || ':' || objid || ':' || vConstText, NULL, NULL, nSvrId);          
         END;
         END LOOP; --comment loop
         CLOSE curComment;
         vConstText := TRIM(vConstText);
         vIndex :=INSTR(vConstText, '(');
         IF vIndex >0 THEN
         	vConstText := SUBSTR(vConstText,vIndex+1,LENGTH(vConstText)-vIndex -1);
         END IF;
         INSERT INTO MD_CONSTRAINTS("NAME", constraint_type, table_id_fk, "LANGUAGE", constraint_text)
              VALUES(v_constRow.constraint_name, 'CHECK', objid, 'STSQL', vConstText);         

         vConstText := ''; -- reset the const text for next iteration.
        EXCEPTION
          WHEN OTHERS THEN
            errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
            LogInfo(NULL, sev_err, 'ProcessCheckConstraints: Individual constraint processing issue: ['  || errMsg ||  ']  svrid:db_id:objid:v_constRow.constraint_id: ' ||  svrid || ':' || db_id || ':' || objid || ':' || vConstText || ':' || v_constRow.constraint_id, NULL, NULL, nSvrId);
            vConstText := '';                                
        END;
      END LOOP; -- constraint loop
      CLOSE curConst;
    EXCEPTION 
      WHEN OTHERS THEN
         errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
         LogInfo(NULL, sev_err, 'ProcessCheckConstraints Failed: Unable to Open master cursor: ['  || errMsg ||  ']  svrid:db_id:objid: ' ||  svrid || ':' || db_id || ':' || objid, NULL, NULL, nSvrId);          
   END ProcessCheckConstraints;

   PROCEDURE ProcessPkUkConstraints(svrid NUMBER, db_id NUMBER, objid NUMBER)
   IS
        TYPE IndexRec IS RECORD
                (
                   keycnt  NUMBER, 
                   indid  NUMBER, 
                   status NUMBER, 
                   status2 NUMBER,
                   index_keys VARCHAR2(1000),
                   index_name VARCHAR2(300)
                );
        amIClustered BOOLEAN := FALSE;        
        idxRec IndexRec;
        v_constName VARCHAR2(300);

        v_consType VARCHAR2(300);

        v_constCols split_varray_type;

        vConsId  NUMBER;

        nColId  NUMBER;

        nColPos NUMBER;

        prop_cnt   pls_integer;
        CURSOR curIndex(svrid NUMBER, db_id NUMBER, objid NUMBER) IS SELECT keycnt, indid, status, status2, index_keys, index_name
            FROM stage_syb12_sysindexes
              WHERE  id_gen_fk = objid 
                  AND svrid_fk = svrid
                  AND dbid_gen_fk = db_id 
	                AND indid > 0  -- indicates that this is an index and not a table entry
	                 AND BitAnd(status2, 2) = 2 ;  -- Index supports primary key/unique declarative constraint

       errMsg VARCHAR2(4000);   
   BEGIN
      OPEN curIndex(svrid, db_id, objid);   
      LOOP
         BEGIN
           FETCH curIndex INTO idxRec;
           EXIT WHEN curIndex%NOTFOUND;
           IF ((idxRec.indid = 1) OR ((idxRec.indid > 1) AND (BitAnd(idxRec.status2, 512)=512)))
           THEN
             amIClustered := TRUE;
           ELSE
             amIClustered := FALSE;
           END IF;
           v_constName := idxRec.index_name;
           v_constCols := split_str2(idxRec.index_keys);

           IF BitAnd(idxRec.status, 2048) = 2048 -- Index on primary key
           THEN
              v_consType :='PK';
           ELSE
              v_consType := 'UNIQUE';
           END IF;
           --insert into constraints table
           INSERT INTO MD_CONSTRAINTS("NAME", constraint_type, table_id_fk, "LANGUAGE")
                VALUES(TRIM(v_constName), v_consType, objid, 'STSQL') RETURNING "ID" INTO vConsId; 
           IF (amIClustered = TRUE) --might want to use this to write out a comment
           THEN
                INSERT INTO MD_ADDITIONAL_PROPERTIES(connection_id_fk, 
                    ref_id_fk, ref_type, property_order, prop_key, "VALUE")
                    VALUES(svrid, vConsId, 'MD_CONSTRAINTS', 1, 'IS_CLUSTERED_INDEX', 'Y');
           END IF;
           if (amIClustered = TRUE)-- AND (v_consType = 'UNIQUE')) also want to mark primary keysto say --was clustered 
           THEN --mark table as IndexOrganisedTable
                select count(*) into prop_cnt from MD_ADDITIONAL_PROPERTIES
                where connection_id_fk = svrid and ref_id_fk =  objid 
                and prop_key = 'IS_INDEX_ORGANIZED_TABLE';
                IF (prop_cnt = 0) 
                THEN
                INSERT INTO MD_ADDITIONAL_PROPERTIES(connection_id_fk, 
                    ref_id_fk, ref_type, property_order, prop_key, "VALUE")
                    VALUES(svrid, objid , 'MD_TABLES', 1, 'IS_INDEX_ORGANIZED_TABLE', 'Y');
                END IF;
           END IF;
           --insert into constraints detail table
           nColPos := 1;
           LOOP
              BEGIN
                EXIT WHEN nColPos > v_constCols.count;
                nColId := GetColIdFromName(svrid, db_id, objid, TRIM(v_constCols(nColPos)));

                INSERT INTO MD_CONSTRAINT_DETAILS(constraint_id_fk, column_id_fk, detail_order) 
                     VALUES(vConsId, nColId, nColPos);
                nColPos := nColPos + 1;           
              EXCEPTION
                WHEN OTHERS THEN
                  errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
                  LogInfo(NULL, sev_err, 'ProcessPkUkConstraints: Constraint detail capture issue: ['  || errMsg ||  ']  svrid:db_id:objid:vConsId:nColPos ' ||  svrid 
                                                                    || ':' || db_id || ':' || objid || ':' || vConsId || ':' || nColPos, NULL, NULL, nSvrId);
                  nColPos := nColPos + 1;                                                                                        
              END;
           END LOOP;  
         EXCEPTION
         WHEN OTHERS THEN
         errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
         LogInfo(NULL, sev_err, 'ProcessCheckConstraints: idxRec ['  || errMsg ||  '] idxRec.indid:idxRec.status:idxRec.status2:idxRec.index_keys:idxRec.index_name:vConsId' ||  idxRec.keycnt
                                                    || ':' || idxRec.indid
                                                    || ':' || idxRec.status
                                                    || ':' || idxRec.status2
                                                    || ':' || idxRec.index_keys
                                                    || ':' || idxRec.index_name
                                                    || ':' || vConsId, NULL, NULL, nSvrId);  
         END;   
      END LOOP;
      CLOSE curIndex;
    EXCEPTION 
          WHEN OTHERS THEN
            errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
            LogInfo(NULL, sev_err, 'ProcessPkUkConstraints: Master cursor open issue: ['  || errMsg ||  ']  svrid:db_id:objid: ' ||  svrid || ':' || db_id || ':' || objid, NULL, NULL, nSvrId);                    
   END ProcessPkUkConstraints;   

   FUNCTION GetGenIdForColumnId(svrid NUMBER, dbid NUMBER, tblid NUMBER, col_id NUMBER) RETURN NUMBER
   IS
      v_genColId NUMBER;
      errMsg VARCHAR2(4000);      
   BEGIN
      SELECT colid_gen INTO v_genColId FROM STAGE_SYB12_SYSCOLUMNS 
          WHERE svrid_fk = svrid 
             AND dbid_gen_fk = dbid
             AND id_gen_fk = tblid
             AND colid = col_id;

      RETURN v_genColId;
    EXCEPTION 
      WHEN OTHERS THEN
            errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
            LogInfo(NULL, sev_err, 'GetGenIdForColumnId: ['  || errMsg ||  ']  svrid:dbid:tblid:col_id ' ||  svrid || ':' || dbid 
                                                                                 || ':' || tblid || ':' || col_id, NULL, NULL, nSvrId);                    
   END GetGenIdForColumnId;

   -- fk -- true returns referencing keys
   -- fk -- false returns referenced keys
   FUNCTION GetKeysFromRecord(refRow STAGE_SYB12_SYSREFERENCES%ROWTYPE, fk BOOLEAN) RETURN key_array
   IS
      v_keys key_array;
      errMsg VARCHAR2(4000);      
   BEGIN
      v_keys := key_array();      
      IF fk = TRUE
      THEN
         IF refRow.fokey1 IS NOT NULL AND refRow.fokey1 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.foKey1;
         END IF;

         IF refRow.fokey2 IS NOT NULL AND refRow.fokey2 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.foKey2;
         END IF;

         IF refRow.fokey3 IS NOT NULL AND refRow.fokey3 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.foKey3;
         END IF;

         IF refRow.fokey4 IS NOT NULL AND refRow.fokey4 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.foKey4;
         END IF;

         IF refRow.fokey5 IS NOT NULL AND refRow.fokey5 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.foKey5;
         END IF;

         IF refRow.fokey6 IS NOT NULL AND refRow.fokey6 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.foKey6;
         END IF;

         IF refRow.fokey7 IS NOT NULL AND refRow.fokey7 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.foKey7;
         END IF;

         IF refRow.fokey8 IS NOT NULL AND refRow.fokey8 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.foKey8;
         END IF;

         IF refRow.fokey9 IS NOT NULL AND refRow.fokey9 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.foKey9;
         END IF;

         IF refRow.fokey10 IS NOT NULL AND refRow.fokey10 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.foKey10;
         END IF;

         IF refRow.fokey11 IS NOT NULL AND refRow.fokey11 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.foKey11;
         END IF;

         IF refRow.fokey12 IS NOT NULL AND refRow.fokey12 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.foKey12;
         END IF;

         IF refRow.fokey13 IS NOT NULL AND refRow.fokey13 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.foKey13;
         END IF;

         IF refRow.fokey14 IS NOT NULL AND refRow.fokey14 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.foKey14;
         END IF;

         IF refRow.fokey15 IS NOT NULL AND refRow.fokey15 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.foKey15;
         END IF;

         IF refRow.fokey16 IS NOT NULL AND refRow.fokey16 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.foKey16;
         END IF;

      ELSE
         IF refRow.refkey1 IS NOT NULL AND refRow.refkey1 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.refKey1;
         END IF;

         IF refRow.refkey2 IS NOT NULL AND refRow.refkey2 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.refKey2;
         END IF;

         IF refRow.refkey3 IS NOT NULL AND refRow.refkey3 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.refKey3;
         END IF;

         IF refRow.refkey4 IS NOT NULL AND refRow.refkey4 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.refKey4;
         END IF;

         IF refRow.refkey5 IS NOT NULL AND refRow.refkey5 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.refKey5;
         END IF;

         IF refRow.refkey6 IS NOT NULL AND refRow.refkey6 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.refKey6;
         END IF;

         IF refRow.refkey7 IS NOT NULL AND refRow.refkey7 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.refKey7;
         END IF;

         IF refRow.fokey8 IS NOT NULL AND refRow.refkey8 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.foKey8;
         END IF;

         IF refRow.refkey9 IS NOT NULL AND refRow.refkey9 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.refKey9;
         END IF;

         IF refRow.refkey10 IS NOT NULL AND refRow.refkey10 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.refKey10;
         END IF;

         IF refRow.refkey11 IS NOT NULL AND refRow.refkey11 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.refKey11;
         END IF;

         IF refRow.refkey12 IS NOT NULL AND refRow.refkey12 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.refKey12;
         END IF;

         IF refRow.refkey13 IS NOT NULL AND refRow.refkey13 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.refKey13;
         END IF;

         IF refRow.refkey14 IS NOT NULL AND refRow.refkey14 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.refKey14;
         END IF;

         IF refRow.refkey15 IS NOT NULL AND refRow.refkey15 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.refKey15;
         END IF;

         IF refRow.refkey16 IS NOT NULL AND refRow.refkey16 >0
         THEN
            v_keys.EXTEND;
            v_keys(v_keys.count) := refRow.refKey16;
         END IF;
      END IF;
      RETURN v_keys;
    EXCEPTION 
      WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
        IF fk = TRUE
        THEN
            LogInfo(NULL, sev_err, 'GetKeysFromRecord: ['  || errMsg ||  ']  refRow:fk ' ||  refRow.foKey1 || ':' || refRow.foKey2 ||
                                                                                  ':' || refRow.foKey3 || ':' || refRow.foKey4
                                                                                 || ':' || refRow.foKey5 || ':' || refRow.foKey6
                                                                                 || ':' || refRow.foKey7 || ':' || refRow.foKey8
                                                                                 || ':' || refRow.foKey9 || ':' || refRow.foKey10
                                                                                 || ':' || refRow.foKey11 || ':' || refRow.foKey12
                                                                                 || ':' || refRow.foKey13 || ':' || refRow.foKey14
                                                                                 || ':' || refRow.foKey15 || ':' || refRow.foKey16
                                                                                 || ':' || 'TRUE', NULL, NULL, nSvrId);  
        ELSE
            LogInfo(NULL, sev_err, 'GetKeysFromRecord: ['  || errMsg ||  ']  refRow:fk ' ||  refRow.refKey1 || ':' || refRow.refKey2 ||
                                                                                  ':' || refRow.refKey3 || ':' || refRow.refKey4
                                                                                 || ':' || refRow.refKey5 || ':' || refRow.refKey6
                                                                                 || ':' || refRow.refKey7 || ':' || refRow.refKey8
                                                                                 || ':' || refRow.refKey9 || ':' || refRow.refKey10
                                                                                 || ':' || refRow.refKey11 || ':' || refRow.refKey12
                                                                                 || ':' || refRow.refKey13 || ':' || refRow.refKey14
                                                                                 || ':' || refRow.refKey15 || ':' || refRow.refKey16
                                                                                 || ':' || 'FALSE', NULL, NULL, nSvrId);            
        END IF;
   END;

   PROCEDURE ProcessFkConstraints(svrid NUMBER, dbid NUMBER, objid NUMBER)
   IS
       CURSOR curReferences(svrid NUMBER, dbid NUMBER, objid NUMBER) IS SELECT * 
                                   FROM stage_syb12_sysreferences 
                                      WHERE svrid_fk = svrid
                                         AND dbid_gen_fk = dbid
                                         AND table_id_gen_fk = objid;

       v_refRow STAGE_SYB12_SYSREFERENCES%ROWTYPE;
       v_constName VARCHAR2(300):=null;
       v_colOrder NUMBER;
       nConsId NUMBER;
       v_keys key_array;
       nColId NUMBER;
       errMsg VARCHAR2(4000);       
   BEGIN
      OPEN curReferences(svrid, dbid, objid);

      LOOP
        BEGIN
         FETCH curReferences INTO v_refRow;
         EXIT WHEN curReferences%NOTFOUND;

         BEGIN
            SELECT "NAME" INTO v_constName 
                    FROM stage_syb12_sysobjects 
                      WHERE objid_gen = v_refRow.constraint_gen_fk;
         EXCEPTION WHEN OTHERS THEN
            errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
            LogInfo(NULL, sev_err, 'ProcessFkConstraints: Unable to get constraint name ['  || errMsg ||  ']  svrid:dbid:objid:v_refRow.constraint_gen_fk ' ||  svrid || ':' || dbid 
                                                                                 || ':' || objid || ':' || v_refRow.constraint_gen_fk, NULL, NULL, nSvrId);             
           v_constName := 'UNKNOWN'	;
         END;      
          -- TODO: Cross database references for tableid and reftableid needs to be handled
          -- should we add this information into MD_ADDITIONAL properties?

         INSERT INTO MD_CONSTRAINTS("NAME", constraint_type, table_id_fk, reftable_id_fk,
                                   "LANGUAGE")                         
                  VALUES (v_constName, 'FOREIGN KEY', v_refRow.table_id_gen_fk, 
                               v_refRow.ref_table_id_gen_fk, 'STSQL')
                     RETURNING "ID" INTO nConsId;

        v_keys := GetKeysFromRecord(v_refRow, TRUE);
        v_colOrder :=1;

               LOOP
                 BEGIN
                   EXIT WHEN v_colOrder > v_keys.count;
                   -- insert the referencing constraint detail here ...
                   --nColId := v_keys(v_colOrder);

                   SELECT colid_gen INTO nColId FROM stage_syb12_syscolumns 
                                    WHERE svrid_fk = svrid
                                       AND dbid_gen_fk = dbid
                                       AND id_gen_fk = v_refRow.table_id_gen_fk
                                       AND colid = v_keys(v_colOrder);

                   INSERT INTO MD_CONSTRAINT_DETAILS(constraint_id_fk, column_id_fk, detail_order) 
                      VALUES ( nConsId, nColId, v_colOrder);
                   v_colOrder := v_colOrder + 1;
                 EXCEPTION
                   WHEN OTHERS THEN
                     errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
                     LogInfo(NULL, sev_err, 'ProcessFkConstraints: Unable process referencing constraint details ['  
                                                || errMsg ||  ']  svrid:dbid:objid:v_refRow.table_id_gen_fk:v_colOrder:v_keys(v_colOrder): ' 
                                                ||  svrid || ':' || dbid 
                                                || ':' || objid || ':' || v_refRow.table_id_gen_fk
                                                || ':' || v_colOrder || ':' || v_keys(v_colOrder), NULL, NULL, nSvrId); 
                    v_colOrder := v_colOrder + 1;                       
                 END;
              END LOOP; -- end of fk keys loop

              v_keys := GetKeysFromRecord(v_refRow, FALSE);
              v_colOrder :=1;
              LOOP
                EXIT WHEN v_colOrder > v_keys.count;
                --insert the referenced constraint detail here ...
                --nColId := v_keys(v_colOrder);
                BEGIN
                    SELECT colid_gen INTO nColId FROM stage_syb12_syscolumns 
                                        WHERE svrid_fk = svrid
                                           AND dbid_gen_fk = dbid
                                           AND id_gen_fk = v_refRow.ref_table_id_gen_fk
                                           AND colid = v_keys(v_colOrder);          

                    INSERT INTO MD_CONSTRAINT_DETAILS(ref_flag, constraint_id_fk, column_id_fk, detail_order) 
                          VALUES ('Y',  nConsId, nColId, v_colOrder);      
                    v_colOrder := v_colOrder + 1;
                EXCEPTION WHEN OTHERS THEN
                  errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
                  LogInfo(NULL, sev_err, 'ProcessFkConstraints: Unable process referenced constraint details ['  
                                                || errMsg ||  ']  svrid:dbid:objid:v_refRow.ref_table_id_gen_fk:v_colOrder:v_keys(v_colOrder): ' 
                                                ||  svrid || ':' || dbid 
                                                || ':' || objid || ':' || v_refRow.ref_table_id_gen_fk
                                                || ':' || v_colOrder || ':' || v_keys(v_colOrder), NULL, NULL, nSvrId);  
                   v_colOrder := v_colOrder + 1;                      
                END;            
              END LOOP; -- end of ref keys loop 
        EXCEPTION 
           WHEN OTHERS THEN
                  errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
                  LogInfo(NULL, sev_err, 'ProcessFkConstraints: sysreferences loop issue ['  
                                                || errMsg ||  ']  svrid:dbid:objid:v_refRow.table_id_gen_fk:v_refRow.ref_table_id_gen_fk: ' 
                                                ||  svrid || ':' || dbid 
                                                || ':' || objid
                                                || ':' || v_refRow.table_id_gen_fk
                                                || ':' || v_refRow.ref_table_id_gen_fk, NULL, NULL, nSvrId);                                   
        END;
      END LOOP; -- end of sysreferences loop
      CLOSE curReferences;
    EXCEPTION 
      WHEN OTHERS THEN
            errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
            LogInfo(NULL, sev_err, 'ProcessFkConstraints: ['  || errMsg ||  ']  svrid:dbid:objid ' ||  svrid || ':' || dbid 
                                                                                 || ':' || objid, NULL, NULL, nSvrId);    
   END ProcessFkConstraints;

   PROCEDURE CaptureConstraints
   IS
      CURSOR curObjs IS SELECT A.* FROM stage_syb12_sysobjects A, stage_syb12_sysusers B  
                 WHERE A.db_type = 'U ' 
                 AND A.db_uid = B.db_uid 
                 AND A.svrid_fk = B.svrid_fk 
                 AND A.dbid_gen_fk = B.dbid_gen_fk 
                 AND B.suid>0;   
      v_tblcolcnt NUMBER :=0; 
      v_no_const_cols NUMBER :=0;
      v_clust  NUMBER :=0; -- flag for clustered index
      v_nonclust NUMBER :=0; -- flag for non clustered index
      v_constrid NUMBER :=0; -- flag for table check constraint
      v_keycnt NUMBER :=0;  -- more than one check constraint
      v_pmytabid NUMBER :=0; -- flag for fk constraint
      v_reftabid NUMBER :=0; -- flag for ref table constraint      
      errMsg VARCHAR2(4000);      
   BEGIN
       FOR r_c1 IN curObjs
       LOOP

          v_clust := BitAnd(r_c1.sysstat, 16);
          v_nonclust := BitAnd(r_c1.sysstat, 32);
          v_constrid := r_c1.ckfirst;  -- table check constraint
          v_keycnt := BitAnd(r_c1.sysstat2, 4);
          v_pmytabid := BitAnd(r_c1.sysstat2, 2);
          v_reftabid := BitAnd(r_c1.sysstat2, 1);

          IF v_constrid != 0
          THEN
             NULL;
             --Process check constraint here
             ProcessCheckConstraints(r_c1.svrid_fk, r_c1.dbid_gen_fk, r_c1.objid_gen);
          END IF;

          IF v_clust > 0 OR v_nonclust > 0
          THEN
             -- Process Unique and Primary constraints
             ProcessPkUkConstraints(r_c1.svrid_fk, r_c1.dbid_gen_fk, r_c1.objid_gen);
          END IF;

          IF v_pmytabid > 0 OR v_reftabid > 0
          THEN
             -- Process FK constraints
             ProcessFkConstraints(r_c1.svrid_fk, r_c1.dbid_gen_fk, r_c1.objid_gen);
             NULL;
          END IF;
       END LOOP;
    EXCEPTION 
      WHEN OTHERS THEN
        errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
        LogInfo(NULL, sev_err, 'CaptureConstraints Failed [' || errMsg ||  '] ', NULL, NULL, nSvrId);                        
   END;
   /*
     CURSOR curConstr IS SELECT svrid_fk, dbid_gen_fk, table_id_gen_fk,
                           constraint_name,db_definition FROM stage_syb12_sysconstraints;
     vDbDef VARCHAR2(4000);     
   BEGIN
      FOR r_c1 IN curConstr 
      LOOP
         vDbDef := r_c1.db_definition;
         IF INSTR(vDbDef, ' CHECK ') != 0 THEN  -- Insert a row into MD_Constraints
            ProcessCheckConstraint(r_c1.svrid_fk, r_c1.dbid_gen_fk, 
                   r_c1.table_id_gen_fk, r_c1.constraint_name, r_c1.db_definition);
         ELSIF INSTR(vDbDef, 'PRIMARY KEY ') != 0 THEN
            ProcessPkConstraint(r_c1.svrid_fk, r_c1.dbid_gen_fk, 
                   r_c1.table_id_gen_fk, r_c1.constraint_name, r_c1.db_definition);
         ELSIF INSTR(vDbDef, 'UNIQUE ') != 0 THEN
            ProcessUkConstraint(r_c1.svrid_fk, r_c1.dbid_gen_fk, 
                   r_c1.table_id_gen_fk, r_c1.constraint_name, r_c1.db_definition);
         ELSIF INSTR(vDbDef, ' FOREIGN KEY ') !=0 THEN
            ProcessFkConstraint(r_c1.svrid_fk, r_c1.dbid_gen_fk, 
                   r_c1.table_id_gen_fk, r_c1.constraint_name, r_c1.db_definition);
         END IF;
      END LOOP;
   END CaptureConstraints;
   */
   PROCEDURE CaptureIndexes
   IS 
     vIdxName VARCHAR2(255);
     vIdxKeys VARCHAR2(4000);
     vIdxDesc VARCHAR2(4000);
     vIdxType VARCHAR2(100);
     curIdxCols ref_cur_type;
     nIdxColId INTEGER;
     vIdxCol VARCHAR2(300);
     vc_Unique CONSTANT VARCHAR2(100) := 'unique';
     vc_IndexUnique CONSTANT VARCHAR2(100) := 'UNIQUE';
     vc_IndexNonUnique CONSTANT VARCHAR2(100) := 'NON_UNIQUE';

     inString  INTEGER;
     nDetailOrder NUMBER :=1;
     vlcColName VARCHAR2(300);
     bDescIdx BOOLEAN;
     nIdxDetailId NUMBER;
     nsuid NUMBER;
     idxKeyCols split_varray_type; 
     len pls_integer;
     CURSOR curIndexes IS SELECT A.svrid_fk, A.dbid_gen_fk, A.indid_gen, A.id_gen_fk,
                                    A.index_name, A."INDEX_DESC", A.index_keys, A.indid, A.status2,  B.sysstat 
                                    FROM stage_syb12_sysindexes A, stage_syb12_sysobjects B, stage_syb12_sysusers C  
                              WHERE A.dbid_gen_fk = B.dbid_gen_fk
                                  AND A.svrid_fk = B.svrid_fk
                                --  AND A.suid_gen_fk = B.suid_gen_fk
                                  AND A.id_gen_fk = B.OBJID_GEN
                                  AND A.svrid_fk = nSvrId
                                  AND C.db_uid = B.db_uid 
                                  AND C.svrid_fk = B.svrid_fk 
                                  AND C.dbid_gen_fk = B.dbid_gen_fk 
                                  AND C.suid>0                                       
                                  AND A.KEYCNT >0;--Have to filter this as we capture constraint info into stage_syb12_sysindexes as well

      errMsg VARCHAR2(4000); 
      v_clust NUMBER := 0;
      amIClustered BOOLEAN := TRUE;
      prop_cnt   pls_integer;

   BEGIN
     --SetStatus('Capturing Indexes');
     FOR r_c1 IN curIndexes 
     LOOP
        BEGIN
        v_clust := BitAnd(r_c1.sysstat, 16);
        vIdxName := r_c1.index_name;
        vIdxKeys := TRIM(r_c1.index_keys);
        vIdxDesc := r_c1."INDEX_DESC";
        --nsuid := r_c1.suid_gen_fk;

        inString := InStr(vIdxDesc, vc_Unique);

        IF inString = 0 THEN -- Unique Index
           vIdxType := vc_IndexNonUnique;
        ELSE  -- Non-unique Index
           vIdxType := vc_IndexUnique;
        END IF;        

        --For each of the column shread the detail into the MD_INDEX_DETAILS and MD_ADDITIONAL_PROPERTIES
        --OPEN curIdxCols FOR 'SELECT * FROM table(split_str(:1))' USING vIdxKeys;
        --FETCH curIdxCols INTO vIdxCol;
        IF vIdxKeys IS NOT NULL THEN
             nDetailOrder :=1; -- set it each time before you commence the loop.
            idxKeyCols := split_str2(vIdxKeys);
            len := idxKeyCols.count;

            -- insert index core attributes in md_indexes
            INSERT INTO MD_INDEXES("ID", index_type, table_id_fk, index_name) 
                 VALUES(r_c1.indid_gen, vIdxType, r_c1.id_gen_fk, vIdxName);
             IF ((r_c1.indid = 1) OR ((r_c1.indid > 1) AND (BitAnd(r_c1.status2, 512)=512)))
            THEN
              amIClustered := TRUE;
              INSERT INTO MD_ADDITIONAL_PROPERTIES(connection_id_fk, 
                  ref_id_fk, ref_type, property_order, prop_key, "VALUE")
                  VALUES(r_c1.svrid_fk,r_c1.indid_gen , 'MD_INDEXES', 1, 'IS_CLUSTERED_INDEX', 'Y');
            ELSE 
              amIClustered := FALSE;
            END IF;
            if (amIClustered = TRUE) -- AND (vIdxType = vc_IndexUnique)) want to mark all indexes cluster to say 'was clustered' 
            THEN --mark table as IndexOrganisedTable
              select count(*) into prop_cnt from MD_ADDITIONAL_PROPERTIES
              where connection_id_fk = r_c1.svrid_fk and ref_id_fk =  r_c1.id_gen_fk 
              and prop_key = 'IS_INDEX_ORGANIZED_TABLE';
              IF (prop_cnt = 0) 
              THEN
                INSERT INTO MD_ADDITIONAL_PROPERTIES(connection_id_fk, 
                  ref_id_fk, ref_type, property_order, prop_key, "VALUE")
                  VALUES(r_c1.svrid_fk, r_c1.id_gen_fk , 'MD_TABLES', 1, 'IS_INDEX_ORGANIZED_TABLE', 'Y');
              END IF;
            END IF;

            LOOP
               BEGIN
                 EXIT WHEN nDetailOrder > len;
                 vIdxCol := idxKeyCols(nDetailOrder);

                 --EXIT WHEN curIdxCols%NOTFOUND;
                 vlcColName := LOWER(TRIM(vIdxCol));
                 vIdxCol := TRIM(vIdxCol);
                 IF EndsWithStr(vlcColName, ' desc') != 0 THEN
                    vIdxCol := SUBSTR(vlcColName, 1, INSTR(vlcColName, ' desc'));  -- not sure if lower casing will affect the ensuing query
                    bDescIdx := TRUE;
                 ELSE
                    bDescIdx := FALSE;
                 END IF;

                 nIdxColId := GetColIdFromName(r_c1.svrid_fk, r_c1.dbid_gen_fk, r_c1.id_gen_fk, TRIM(vIdxCol));           

                 INSERT INTO MD_INDEX_DETAILS(index_id_fk, column_id_fk, detail_order) 
                        VALUES(r_c1.indid_gen, nIdxColId, nDetailOrder) RETURNING "ID" INTO nIdxDetailId;

                 IF bDescIdx THEN
                      INSERT INTO MD_ADDITIONAL_PROPERTIES(connection_id_fk, 
                         ref_id_fk, ref_type, property_order, prop_key, "VALUE")
                         VALUES(r_c1.svrid_fk, nIdxDetailId, 'MD_INDEX_DETAIL', nDetailOrder, 'IS_INDEXDETAIL_DESCENDING', 'Y');
                 END IF;

                 --FETCH curIdxCols INTO vIdxCol;
                 nDetailOrder := nDetailOrder + 1;
               EXCEPTION
                  WHEN OTHERS THEN
                  errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
                  LogInfo(NULL, sev_err, 'CaptureIndexes: Index detail capture loop issue [' || errMsg ||  '] v_clust:vIdxName:vIdxKeys:vIdxDesc:r_c1.indid_gen:nIdxColId:nDetailOrder: '
                                                               || v_clust || ':'
                                                               || vIdxKeys || ':'
                                                               || vIdxDesc || ':'
                                                               || r_c1.indid_gen || ':'
                                                               || nIdxColId || ':'
                                                               || nDetailOrder, NULL, NULL, nSvrId);
                  IF bDescIdx THEN
                    LogInfo(NULL, sev_err, 'CaptureIndexes: Index detail capture loop issue(DESC) [' || errMsg ||  '] v_clust:vIdxName:vIdxKeys:vIdxDesc:r_c1.svrid_fk:nIdxDetailId:nDetailOrder: '
                                                                 || v_clust || ':'
                                                                 || vIdxKeys || ':'
                                                                 || vIdxDesc || ':'
                                                                 || r_c1.svrid_fk || ':'
                                                                 || nIdxDetailId || ':'
                                                                 || nDetailOrder, NULL, NULL, nSvrId);                                      
                  END IF;
                  nDetailOrder := nDetailOrder + 1;
               END;
            END LOOP;
          END IF; -- vIdxKeys IS NOT NULL
--        CLOSE curIdxCols;
        EXCEPTION 
           WHEN OTHERS THEN
              errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
              LogInfo(NULL, sev_err, 'CaptureIndexes: Master cursor loop issue [' || errMsg ||  '] v_clust:vIdxName:vIdxKeys:vIdxDesc: '
                                                           || v_clust || ':'
                                                           || vIdxKeys || ':'
                                                           || vIdxDesc, NULL, NULL, nSvrId);                
        END;    
     END LOOP;
    EXCEPTION 
      WHEN OTHERS THEN
              errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
              LogInfo(NULL, sev_err, 'CaptureIndexes Failed [' || errMsg ||  '] ', NULL, NULL, nSvrId);                        
   END CaptureIndexes;

   PROCEDURE CaptureViews
   IS
      CURSOR curViews IS SELECT DISTINCT A.objid_gen, A."NAME", a.suid_gen_fk, a.dbid_gen_fk 
                            FROM stage_syb12_sysobjects A, stage_syb12_sysusers B 
                            WHERE A.db_type='V '
                                  AND A.db_uid = B.db_uid 
                                  AND A.svrid_fk = B.svrid_fk 
                                  AND A.dbid_gen_fk = B.dbid_gen_fk 
                                  AND B.suid>0                                                                  
                                 AND A.svrid_fk = nSvrId AND A.name <> 'sysquerymetrics';  -- process every view object pulled from this server

      curViewSql ref_cur_type;
      clbNativeSql CLOB := TO_CLOB(' ');
      vNativeSqlPiece VARCHAR2(4000);
      errMsg VARCHAR2(4000);      
   BEGIN
            --SetStatus('Capturing Views');
      FOR r_c1 IN curViews
      LOOP
          BEGIN
             OPEN curViewSql FOR 'SELECT B."TEXT" FROM stage_syb12_sysobjects A, stage_syb12_syscomments B         
                     WHERE A."OBJID_GEN" = B."ID_GEN_FK" 
                       AND A."OBJID_GEN"=:1 
                       AND A.dbid_gen_fk = B.dbid_gen_fk
                       AND B.dbid_gen_fk = :2
                       AND A.svrid_fk = B.svrid_fk
                       AND A.svrid_fk = :3
                       ORDER BY colid' USING r_c1."OBJID_GEN", r_c1.dbid_gen_fk, nSvrId;
             FETCH curViewSql INTO vNativeSqlPiece;
             LOOP
                EXIT WHEN curViewSql%NOTFOUND;
                IF vNativeSqlPiece IS NULL
                THEN
                   vNativeSqlPiece := ' ';
                END IF;
                DBMS_LOB.writeappend(clbNativeSql, LENGTH(vNativeSqlPiece), vNativeSqlPiece);            
                FETCH curViewSql INTO vNativeSqlPiece;
             END LOOP; -- inner ref cursor loop
             CLOSE curViewSql;
             INSERT INTO MD_VIEWS("ID", schema_id_fk, view_name, native_sql, "LANGUAGE") 
                      VALUES(r_c1.objid_gen, r_c1.suid_gen_fk, r_c1."NAME", clbNativeSql, 'STSQL');
             clbNativeSql  := TO_CLOB(' ');    -- reset clob              
          EXCEPTION
             WHEN OTHERS THEN
              errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
              LogInfo(NULL, sev_err, 'CaptureViews: Issue opening sql text cursor [' || errMsg ||  '] r_c1."OBJID_GEN":r_c1.dbid_gen_fk:nSvrId: ' ||
                                                                               r_c1."OBJID_GEN" || ':' 
                                                                            || r_c1.dbid_gen_fk || ':'
                                                                            || nSvrId, NULL, NULL, nSvrId);  
              clbNativeSql := TO_CLOB(' '); --reset clob                      
          END;
      END LOOP;
    EXCEPTION 
      WHEN OTHERS THEN
              errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
              LogInfo(NULL, sev_err, 'CaptureViews Failed [' || errMsg ||  '] ', NULL, NULL, nSvrId);                        
   END CaptureViews;

   PROCEDURE CaptureStoredPrograms
   IS
      -- In Sybase Grouped Procedures C.db_number can have values >= 1.
      CURSOR curSP IS SELECT DISTINCT A.svrid_fk, A.dbid_gen_fk, A.objid_gen, A.db_type, A."NAME", a.suid_gen_fk, C.db_number
                            FROM stage_syb12_sysobjects A, stage_syb12_sysusers B, stage_syb12_syscomments C
                            WHERE ( A.db_type='P ' 
                                 OR A.db_type = 'SF' 
                                 OR A.db_type = 'FN' 
                                 OR A.db_type = 'TF' 
                                 OR A.db_type = 'IF' )
                                  AND A.db_uid = B.db_uid 
                                  AND A.svrid_fk = B.svrid_fk 
                                  AND C.svrid_fk = A.svrid_fk
                                  AND A.dbid_gen_fk = B.dbid_gen_fk 
                                  AND C.dbid_gen_fk = A.dbid_gen_fk
                                  AND C.id = A.id 
                                  AND B.suid>0                                                                       
                                  AND A.svrid_fk = nSvrId;  -- process every SP object pulled from this server

      curSPSql ref_cur_type;
      vType VARCHAR2(100);
      vSPType VARCHAR2(100);
      vAdditionalProp VARCHAR2 (200) :=NULL;
      clbNativeSql CLOB := TO_CLOB(' ');
      vNativeSqlPiece VARCHAR2(4000);
      errMsg VARCHAR2(4000);      
   BEGIN
            --SetStatus('Capturing Stored Programs');
      FOR r_c1 IN curSP
      LOOP
      BEGIN
         --TODO: Handle Encryped SQL case where we may get an exception.
         OPEN curSPSql FOR 'SELECT B."TEXT" FROM stage_syb12_sysobjects A, stage_syb12_syscomments B        
 		             WHERE A."OBJID_GEN" = B."ID_GEN_FK" 
                 AND B."ID_GEN_FK"=:1 
                 AND A.dbid_gen_fk = B.dbid_gen_fk
                 AND A.dbid_gen_fk = :2
                 AND A.svrid_fk = B.svrid_fk
                 AND A.svrid_fk = :3
                 AND B.db_number = :4
                 ORDER BY colid' USING r_c1."OBJID_GEN", r_c1.dbid_gen_fk, nSvrId, r_c1.db_number;

         FETCH curSPSql INTO vNativeSqlPiece;
         LOOP
         BEGIN
            EXIT WHEN curSPSql%NOTFOUND;
            IF vNativeSqlPiece IS NULL
            THEN
               vNativeSqlPiece := ' ';
            END IF;
            DBMS_LOB.writeappend(clbNativeSql, LENGTH(vNativeSqlPiece), vNativeSqlPiece);            
            FETCH curSPSql INTO vNativeSqlPiece;
         EXCEPTION 
            WHEN OTHERS THEN
              errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
              LogInfo(NULL, sev_err, 'CaptureStoredPrograms : Issue building the sp text lob [' || errMsg ||  '] r_c1."OBJID_GEN":r_c1.dbid_gen_fk:nSvrId: '
                                                                || r_c1."OBJID_GEN" || ':'
                                                                || r_c1.dbid_gen_fk || ':'
                                                                || nSvrId, NULL, NULL, nSvrId);                        
         END;         
         END LOOP; -- inner ref cursor loop
         CLOSE curSPSql;

         vType := TRIM(r_c1.db_type);

         IF vType = 'FN'  THEN
           vSPType := 'FUNCTION';
           vAdditionalProp := 'SCALAR FUNCTION';
         ELSIF vType = 'SF'  THEN
           vSPType := 'FUNCTION';
           vAdditionalProp := 'FUNCTION';  
         ELSIF  vType = 'IF' THEN
           vSPType := 'FUNCTION'; 
           vAdditionalProp := 'INLINED T. FUNCTION';
         ELSIF vType = 'TF' THEN
           vSPType := 'FUNCTION';
           vAdditionalProp := 'TABLE FUNCTION';
         ELSE
           vSPType := 'PROCEDURE';
         END IF;

         IF r_c1.db_number > 1 THEN -- for grouped procedures db_number will be > 1.
           INSERT INTO md_stored_programs(schema_id_fk, programtype, 
                                         "NAME", native_sql, "LANGUAGE") 
                VALUES(r_c1.suid_gen_fk, vSPType, r_c1."NAME", clbNativeSql, 'STSQL');
         ELSE       
           INSERT INTO md_stored_programs("ID", 
                                         schema_id_fk, programtype, 
                                         "NAME", native_sql, "LANGUAGE") 
                VALUES(r_c1.objid_gen, r_c1.suid_gen_fk, vSPType, r_c1."NAME", clbNativeSql, 'STSQL');
         END IF;

         IF vAdditionalProp IS NOT NULL THEN
            INSERT INTO MD_ADDITIONAL_PROPERTIES(connection_id_fk, 
                                                 ref_id_fk, 
                                                 ref_type,
                                                 property_order,
                                                 prop_key,
                                                 "VALUE")
                   VALUES(r_c1.svrid_fk, r_c1.objid_gen, 'MD_STORED_PROGRAMS', 1,'TYPE', vAdditionalProp);
         END IF;
         clbNativeSql := TO_CLOB(' ');        -- reset clob
         EXCEPTION
            WHEN OTHERS THEN
              errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
              LogInfo(NULL, sev_err, 'CaptureStoredPrograms : Issue opening master cursor or capturing sp list [' || errMsg ||  '] r_c1."OBJID_GEN":r_c1.dbid_gen_fk:nSvrId: '
                                                                || r_c1."OBJID_GEN" || ':'
                                                                || r_c1.dbid_gen_fk || ':'
                                                                || nSvrId, NULL, NULL, nSvrId);                        
         END;
      END LOOP;
    EXCEPTION 
      WHEN OTHERS THEN
              errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
              LogInfo(NULL, sev_err, 'CaptureStoredPrograms Failed [' || errMsg ||  '] ', NULL, NULL, nSvrId);                        
   END CaptureStoredPrograms;      

   PROCEDURE CaptureTriggers
   IS
      CURSOR curObjTrig IS SELECT A.svrid_fk, A.dbid_gen_fk, A.objid_gen, A.deltrig triggerID, A.db_type 
                               FROM stage_syb12_sysobjects A, stage_syb12_sysusers B 
                               WHERE (A.db_type = 'U ' OR A.db_type = 'V ') 
                                  AND   (A.DELTRIG IS NOT NULL AND A.DELTRIG>0) --DELETE triggers
                                  AND A.db_uid = B.db_uid 
                                  AND A.svrid_fk = B.svrid_fk 
                                  AND A.dbid_gen_fk = B.dbid_gen_fk 
                                  AND B.suid>0
                                  AND A.svrid_fk = nSvrId 
UNION
SELECT A.svrid_fk, A.dbid_gen_fk, A.objid_gen,A.updtrig triggerID, A.db_type 
                               FROM stage_syb12_sysobjects A, stage_syb12_sysusers B 
                               WHERE (A.db_type = 'U ' OR A.db_type = 'V ') 
                                AND   (A.UPDTRIG IS NOT NULL AND A.UPDTRIG >0) --UPDATE TRIGGERS    
                                  AND A.db_uid = B.db_uid 
                                  AND A.svrid_fk = B.svrid_fk 
                                  AND A.dbid_gen_fk = B.dbid_gen_fk 
                                  AND B.suid>0
     							  AND A.svrid_fk = nSvrId	 	                              
UNION
SELECT A.svrid_fk, A.dbid_gen_fk, A.objid_gen, A.instrig triggerID, A.db_type 
                               FROM stage_syb12_sysobjects A, stage_syb12_sysusers B 
                               WHERE (A.db_type = 'U ' OR A.db_type = 'V ') 
                                AND   (A.INSTRIG IS NOT NULL AND A.INSTRIG>0) --INSERT TRIGGERS
                                  AND A.db_uid = B.db_uid 
                                  AND A.svrid_fk = B.svrid_fk 
                                  AND A.dbid_gen_fk = B.dbid_gen_fk 
                                  AND B.suid>0                                                                   
                                  AND A.svrid_fk = nSvrId;


      curTrigSql ref_cur_type;
      curTrigText ref_cur_type;
      clbNativeSql CLOB := TO_CLOB(' ');
      vNativeSqlPiece VARCHAR2(4000);   
      nTrigSvrId NUMBER;
      nTrigDbId NUMBER;
      nTrigId NUMBER;
      vTrigName VARCHAR2(300);
      vTriggerOn VARCHAR2(300);
      nTableOrViewId NUMBER;
      errMsg VARCHAR2(4000);
   BEGIN
            --SetStatus('Capturing Triggers');
      FOR r_c1 IN curObjTrig
      LOOP
        BEGIN
           OPEN curTrigSql FOR 'SELECT A.svrid_fk, A.dbid_gen_fk, A.objid_gen, A."NAME"
                                         FROM stage_syb12_sysobjects A, stage_syb12_sysusers B 
                                         WHERE A."ID" = :1
                                           AND A.dbid_gen_fk = :2
                                           AND A.svrid_fk = :3
                                           AND A.db_uid = B.db_uid 
                                           AND A.svrid_fk = B.svrid_fk 
                                           AND A.dbid_gen_fk = B.dbid_gen_fk 
                                           AND B.suid>0'                                                                                                                 
                                           USING r_c1.triggerID, 
                                                 r_c1.dbid_gen_fk,
                                                 r_c1.svrid_fk;
           FETCH curTrigSql INTO nTrigSvrId, nTrigDbId, nTrigId, vTrigName;

           LOOP
             BEGIN
                EXIT WHEN curTrigSql%NOTFOUND;            
                OPEN curTrigText FOR 'SELECT B."TEXT" FROM stage_syb12_sysobjects A, stage_syb12_syscomments B        
                     WHERE A.svrid_fk = B.svrid_fk
                          AND A.svrid_fk = :1
                          AND A.dbid_gen_fk = B.dbid_gen_fk
                          AND A.dbid_gen_fk = :2
                          AND A."OBJID_GEN" = B."ID_GEN_FK"
                          AND B."ID_GEN_FK" = :3
                     ORDER BY colid'  USING nTrigSvrId, nTrigDbId, nTrigId;
                FETCH curTrigText INTO vNativeSqlPiece;
                --TODO: Handle Encryped trigger text case where we may get an exception.
                LOOP
                  BEGIN
                     EXIT WHEN curTrigText%NOTFOUND;
                     IF vNativeSqlPiece IS NULL
                     THEN
                        vNativeSqlPiece := ' ';
                     END IF;
                     DBMS_LOB.writeappend(clbNativeSql, LENGTH(vNativeSqlPiece), vNativeSqlPiece);               
                     FETCH curTrigText INTO vNativeSqlPiece; 
                  EXCEPTION
                     WHEN OTHERS THEN
                        errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
                        LogInfo(NULL, sev_err, 'CaptureTriggers : Issue building trigger text blob [' || errMsg ||  '] nTrigSvrId:nTrigDbId:nTrigId: '
                                                                          || nTrigSvrId || ':'
                                                                          || nTrigDbId || ':'
                                                                          || nTrigId, NULL, NULL, nSvrId); 
                       FETCH curTrigText INTO vNativeSqlPiece; 
                  END;
                END LOOP; -- end of trig text loop

                IF r_c1.db_type = 'U ' THEN
                   vTriggerOn :='T';
                ELSIF r_c1.db_type = 'V ' THEN
                   vTriggerOn :='V';
                END IF;

                nTableOrViewId := r_c1.objid_gen; --id of view or table object

                INSERT INTO MD_TRIGGERS("ID", 
                                        table_or_view_id_fk, 
                                        trigger_on_flag,
                                        trigger_name,
                                        native_sql,
                                        "LANGUAGE")
                                 VALUES(nTrigId, 
                                        nTableOrViewId,
                                        vTriggerOn,
                                        vTrigName,
                                        clbNativeSql,
                                        'STSQL');

                FETCH curTrigSql INTO nTrigSvrId, nTrigDbId, nTrigId, vTrigName;
                clbNativeSql := TO_CLOB(' ');
             EXCEPTION
                WHEN OTHERS THEN
                  errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
                  LogInfo(NULL, sev_err, 'CaptureTriggers : Issue capturing trigger detail [' || errMsg ||  '] nTrigSvrId:nTrigDbId:nTrigId: '
                                                                    || nTrigSvrId || ':'
                                                                    || nTrigDbId || ':'
                                                                    || nTrigId, NULL, NULL, nSvrId); 
                  clbNativeSql := TO_CLOB(' '); 
             END;
           END LOOP; -- end of trigger selection loop
           CLOSE curTrigSql;
        EXCEPTION
           WHEN OTHERS THEN
              errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
              LogInfo(NULL, sev_err, 'CaptureTriggers : Issue opening master cursor or capturing trigger list [' || errMsg ||  '] r_c1.triggerID:r_c1.dbid_gen_fk:r_c1.svrid_fk: '
                                                                || r_c1.triggerID || ':'
                                                                || r_c1.dbid_gen_fk || ':'
                                                                || r_c1.svrid_fk, NULL, NULL, nSvrId);  
        END;
      END LOOP; -- end of trigger base object selection loop
    EXCEPTION 
      WHEN OTHERS THEN
              errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
              LogInfo(NULL, sev_err, 'CaptureTriggers Failed [' || errMsg ||  '] ', NULL, NULL, nSvrId);                        
   END;

   PROCEDURE CaptureUDT
   IS
         errMsg VARCHAR2(4000);   
   BEGIN
           -- SetStatus('Capturing UDT');
	   INSERT INTO MD_USER_DEFINED_DATA_TYPES (
		SCHEMA_ID_FK,
		DATA_TYPE_NAME,
		DEFINITION,
		NATIVE_SQL,
		NATIVE_KEY,
		COMMENTS,
		SECURITY_GROUP_ID,
		CREATED_ON,
		CREATED_BY,
		LAST_UPDATED_ON,
		LAST_UPDATED_BY)
		WITH lowestType AS ( SELECT DISTINCT db_type ,MIN(usertype) usertypex FROM stage_syb12_systypes x GROUP BY db_type ),
		     lowestSchema AS ( SELECT min(A.suid_gen) MIN_SUID_GEN FROM stage_syb12_sysusers A WHERE A.svrid_fk = nSvrId AND A.suid>0 AND A.db_uid IN (SELECT DISTINCT db_uid FROM stage_syb12_sysobjects)    )
		SELECT DISTINCT
		(SELECT MIN_SUID_GEN FROM lowestSchema), 
		y.NAME UDTNAME,
                SYB12ALLPLATFORM.GetDescription(x.NAME, y.prec, y.scale, y.length) definition,
	        SYB12ALLPLATFORM.GetDescription(x.NAME, y.prec, y.scale, y.length),
		'0',
		NULL,
		0,
		SYSDATE,
		NULL,
		NULL,
		NULL
		FROM stage_syb12_systypes y, stage_syb12_systypes x, lowestType l
		WHERE y.db_type = l.db_type
		AND x.usertype = l.usertypex
		AND y.usertype > 100;
    EXCEPTION 
      WHEN OTHERS THEN
              errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
              LogInfo(NULL, sev_err, 'CaptureUDT Failed [' || errMsg ||  '] ', NULL, NULL, nSvrId);  
    END CaptureUDT;

   PROCEDURE CaptureEntireStage
   IS
   BEGIN
      CaptureConnections;
      COMMIT;
      CaptureDatabases;
       COMMIT;
      CaptureSchemas;
       COMMIT;
      CaptureTables;
       COMMIT;
      CaptureColumns;
       COMMIT;
      CaptureConstraints;
       COMMIT;
      CaptureIndexes;
       COMMIT;
      CaptureViews;
       COMMIT;
      CaptureStoredPrograms;
       COMMIT;
      CaptureTriggers;
       COMMIT;
      CaptureUDT;
       COMMIT;
   END CaptureEntireStage;

   PROCEDURE FixSysDatabases  -- nothing to do for databases
   IS
   BEGIN
      NULL;
   END FixSysDatabases;

   PROCEDURE FixSysUsers  -- nothing to do for schemas
   IS
   BEGIN
      NULL;
   END FixSysUsers;

   PROCEDURE FixSysObjects
   IS
     curObjs ref_cur_type;
     nSuid NUMBER;
     nDbuid NUMBER;
     objSql VARCHAR2(4000) := 'SELECT distinct db_uid FROM stage_syb12_sysobjects
          WHERE svrid_fk = :1 and dbid_gen_fk=:2';

     CURSOR curDb IS SELECT dbid_gen FROM stage_syb12_sysdatabases WHERE svrid_fk = nSvrId;
     errMsg VARCHAR2(4000);
   BEGIN

      FOR r_c1 IN curDb
      LOOP
      BEGIN
         OPEN curObjs FOR objSql USING nsvrid, r_c1.dbid_gen;
         FETCH curObjs INTO nDbuid;
         LOOP  -- loop through sysobjects for each of the distinct uid & fix the generated suid
         BEGIN
             EXIT WHEN curObjs%NOTFOUND;

             -- assuming 1 to 1 correspondance between suid and uid within a database
             SELECT suid_gen INTO nSuid 
               FROM stage_syb12_sysusers 
               WHERE db_uid = nDbuid
               AND dbid_gen_fk = r_c1.dbid_gen;

             UPDATE stage_syb12_sysobjects
               SET suid_gen_fk = nSuid 
                 WHERE db_uid = nDbuid 
                 AND dbid_gen_fk = r_c1.dbid_gen
                 and svrid_fk = nSvrId;

             FETCH curObjs INTO nDbuid;
        EXCEPTION 
          WHEN OTHERS THEN
                  errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
                  LogInfo(NULL, sev_err, 'FixSysObjects Inner cursor issue [' || errMsg ||  '] nsvrid:r_c1.dbid_gen:nDbuid:nSuid: ' || nsvrid || ':' 
                                               || r_c1.dbid_gen || ':' || nDbuid || ':' || nSuid, NULL, NULL, nSvrId); 
                  FETCH curObjs INTO nDbuid;                                
         END;    
         END LOOP; -- sysobjects loop
         CLOSE curObjs;
      EXCEPTION 
        WHEN OTHERS THEN
                errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
                LogInfo(NULL, sev_err, 'FixSysObjects Master cursor issue [' || errMsg ||  '] nsvrid:r_c1.dbid_gen: ' || nsvrid || ':' || r_c1.dbid_gen, NULL, NULL, nSvrId);                    
      END;
      END LOOP; -- sysdatabases loop      
   END FixSysObjects;

   PROCEDURE FixSysIndexes
   IS
     CURSOR curIndexRec IS SELECT distinct B."TABLE_ID", A.objid_gen, A.svrid_fk, A.dbid_gen_fk
                  FROM STAGE_SYB12_SYSOBJECTS A, STAGE_SYB12_SYSINDEXES B
                  WHERE A.dbid_gen_fk = B.dbid_gen_fk
                    AND A.svrid_fk = B.svrid_fk
                    AND B.svrid_fk = nSvrId
                    AND A."ID" = B."TABLE_ID";
    errMsg VARCHAR2(4000) := NULL;
   BEGIN
      FOR r_c1 IN curIndexRec
      LOOP
      BEGIN
         UPDATE STAGE_SYB12_SYSINDEXES SET id_gen_fk = r_c1.objid_gen WHERE "TABLE_ID" = r_c1."TABLE_ID" AND svrid_fk = r_c1.svrid_fk AND dbid_gen_fk = r_c1.dbid_gen_fk;
      EXCEPTION 
        WHEN OTHERS THEN
                errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
                LogInfo(NULL, sev_err, 'FixSysIndexes Master cursor issue [' || errMsg ||  '] r_c1."TABLE_ID":r_c1.svrid_fk:r_c1.dbid_gen_fk: ' || r_c1."TABLE_ID" || ':' || r_c1.svrid_fk || ':'
                                                                               || r_c1.dbid_gen_fk, NULL, NULL, nSvrId);                             
      END;
      END LOOP;
   END FixSysIndexes;

   PROCEDURE FixSysColumns
   IS
     CURSOR curColRec IS SELECT A.svrid_fk svrid_fk,A.dbid_gen_fk,  B."ID", A.objid_gen 
                  FROM STAGE_SYB12_SYSOBJECTS A, STAGE_SYB12_SYSCOLUMNS B
                  WHERE A.dbid_gen_fk = B.dbid_gen_fk
                    AND A.svrid_fk = B.svrid_fk
                    AND B.svrid_fk = nSvrId
                    AND A."ID" = B."ID";  
      errMsg VARCHAR2(4000) := NULL;
   BEGIN
      FOR r_c1 IN curColRec
      LOOP
      BEGIN
         UPDATE STAGE_SYB12_SYSCOLUMNS SET id_gen_fk = r_c1.objid_gen WHERE "ID" = r_c1."ID" AND svrid_fk = r_c1.svrid_fk AND dbid_gen_fk = r_c1.dbid_gen_fk;
      EXCEPTION
        WHEN OTHERS THEN
                errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
                LogInfo(NULL, sev_err, 'FixSysColumns Master cursor issue [' || errMsg ||  '] r_c1."ID":r_c1.svrid_fk:r_c1.dbid_gen_fk: ' || r_c1."ID" || ':' || r_c1.svrid_fk || ':'
                                                                               || r_c1.dbid_gen_fk, NULL, NULL, nSvrId);                                   
      END;
      END LOOP;
   END FixSysColumns;

   PROCEDURE FixSysComments
   IS
     CURSOR curCommentsRec IS SELECT distinct B."ID", A.objid_gen, A.dbid_gen_fk, A.svrid_fk  
                  FROM STAGE_SYB12_SYSOBJECTS A, STAGE_SYB12_SYSCOMMENTS B
                  WHERE A.dbid_gen_fk = B.dbid_gen_fk
                    AND A.svrid_fk = B.svrid_fk
                    AND B.svrid_fk = nSvrId
                    AND A."ID" = B."ID";      
     errMsg VARCHAR2(4000) := NULL;
   BEGIN
      FOR r_c1 IN curCommentsRec
      LOOP
      BEGIN
         UPDATE STAGE_SYB12_SYSCOMMENTS SET id_gen_fk = r_c1.objid_gen WHERE "ID" = r_c1."ID" AND svrid_fk = r_c1.svrid_fk AND dbid_gen_fk = r_c1.dbid_gen_fk;
      EXCEPTION 
        WHEN OTHERS THEN
                errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
                LogInfo(NULL, sev_err, 'FixSysComments Master cursor issue [' || errMsg ||  '] r_c1."ID":r_c1.svrid_fk:r_c1.dbid_gen_fk: ' || r_c1."ID" || ':' || r_c1.svrid_fk || ':'
                                                                               || r_c1.dbid_gen_fk, NULL, NULL, nSvrId);                                            
      END;
      END LOOP;
   END FixSysComments;

   PROCEDURE FixSysConstraints
   IS
      CURSOR curObjs IS SELECT * FROM stage_syb12_sysobjects;
      CURSOR curDB IS SELECT * FROM stage_syb12_sysdatabases;
   BEGIN
       --FixSysConstraints & FixSysReferences
       FOR r_c1 IN curDB
       LOOP
          BEGIN
             UPDATE stage_syb12_sysreferences
                SET frgn_dbid_gen_fk = r_c1.dbid_gen
                WHERE svrid_fk = r_c1.svrid_fk
                AND frgndbid = r_c1.dbid;

             UPDATE stage_syb12_sysreferences
                SET pmry_dbid_gen_fk = r_c1.dbid_gen
                WHERE svrid_fk = r_c1.svrid_fk
                AND pmrydbid = r_c1.dbid; 

          EXCEPTION WHEN NO_DATA_FOUND THEN
                 NULL;
          END;                    
       END LOOP;

       FOR r_c1 IN curObjs
       LOOP
          BEGIN
             UPDATE stage_syb12_sysconstraints
                 SET table_id_gen_fk = r_c1.objid_gen
                 WHERE svrid_fk = r_c1.svrid_fk
                     AND dbid_gen_fk = r_c1.dbid_gen_fk
                     AND tableid = r_c1."ID";  

             UPDATE stage_syb12_sysconstraints
                 SET constraint_gen = r_c1.objid_gen
                 WHERE svrid_fk = r_c1.svrid_fk
                     AND dbid_gen_fk = r_c1.dbid_gen_fk
                     AND constrid = r_c1."ID";  

             UPDATE STAGE_SYB12_SYSREFERENCES
                 SET constraint_gen_fk = r_c1.objid_gen
                 WHERE svrid_fk = r_c1.svrid_fk
                     AND dbid_gen_fk = r_c1.dbid_gen_fk
                     AND constrid = r_c1."ID";  

             UPDATE STAGE_SYB12_SYSREFERENCES
                 SET table_id_gen_fk = r_c1.objid_gen
                 WHERE svrid_fk = r_c1.svrid_fk
                     AND dbid_gen_fk = r_c1.dbid_gen_fk
                     AND tableid = r_c1."ID";  

             UPDATE STAGE_SYB12_SYSREFERENCES
                 SET ref_table_id_gen_fk = r_c1.objid_gen
                 WHERE svrid_fk = r_c1.svrid_fk
                     AND dbid_gen_fk = r_c1.dbid_gen_fk
                     AND reftabid = r_c1."ID";  

          EXCEPTION WHEN NO_DATA_FOUND THEN
                 NULL;
          END;          
       END LOOP;
       NULL;
   END;
   /*
     CURSOR curConstraintRec IS SELECT distinct B."TABLE_ID", A.objid_gen, A.dbid_gen_fk, A.svrid_fk   
                  FROM STAGE_SYB12_SYSOBJECTS A, STAGE_SYB12_SYSCONSTRAINTS B
                  WHERE A.dbid_gen_fk = B.dbid_gen_fk
                    AND A.svrid_fk = B.svrid_fk
                    AND B.svrid_fk = nSvrId
                    AND A."ID" = B."TABLE_ID";         
   BEGIN
      FOR r_c1 IN curConstraintRec
      LOOP
         UPDATE STAGE_SYB12_SYSCONSTRAINTS SET table_id_gen_fk = r_c1.objid_gen WHERE "TABLE_ID" = r_c1."TABLE_ID" AND svrid_fk = r_c1.svrid_fk AND dbid_gen_fk = r_c1.dbid_gen_fk;
      END LOOP;
   END FixSysConstraints;
   */
   PROCEDURE FixSysTypes
   IS
   BEGIN
      NULL;
   END FixSysTypes;

   PROCEDURE FixTranslatedSQL
   IS
      CURSOR curObjs IS SELECT * FROM STAGE_SYB12_SYSOBJECTS;
      errMsg VARCHAR2(4000) := NULL;
   BEGIN
      FOR r_c1 IN curObjs
      LOOP
      BEGIN
         UPDATE STAGE_TRANSLATEDSQL 
            SET OBJ_ID_FK = r_c1.OBJID_GEN
            WHERE SERVER_ID_FK = r_c1.SVRID_FK
               AND DB_ID_FK = r_c1.DBID_GEN_FK
               --AND SCHEMA_ID_FK = r_c1.DB_UID
               AND OBJ_ID_FK = r_c1.ID;
      EXCEPTION
        WHEN OTHERS THEN
                errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
                LogInfo(NULL, sev_err, 'FixTranslatedSQL Master cursor issue [' || errMsg ||  '] r_c1.OBJID_GEN:r_c1.svrid_fk:r_c1.dbid_gen_fk: ' || r_c1.OBJID_GEN || ':' || r_c1.svrid_fk || ':'
                                                                               || r_c1.dbid_gen_fk, NULL, NULL, nSvrId);                                                  
      END;
      END LOOP;
      COMMIT;
   END FixTranslatedSQL;

   PROCEDURE UpdateScratchModel
   IS
      CURSOR curDerived IS SELECT * FROM MD_DERIVATIVES WHERE DERIVED_TYPE IN ('MD_VIEWS', 
                                                   'MD_STORED_PROGRAMS', 'MD_TRIGGERS') AND (derivative_reason IS NULL OR derivative_reason <> 'SCRATCH');
      v_TransSQL CLOB;
      v_SourceSQL CLOB;
      errMsg VARCHAR2(4000);
   BEGIN
      FOR r_c1 IN curDerived
      LOOP
         BEGIN
           SELECT trans_sql,native_sql INTO v_TransSQL,v_SourceSQL 
                             FROM STAGE_TRANSLATEDSQL
                             WHERE OBJ_ID_FK = r_c1.SRC_ID;
           IF v_TransSQL IS NOT NULL 
           THEN  
             IF r_c1.DERIVED_TYPE = 'MD_VIEWS'
             THEN
                UPDATE MD_VIEWS 
                   SET NATIVE_SQL = v_TransSQL, "LANGUAGE" = 'OracleSQL'
                      WHERE ID = r_c1.DERIVED_ID;
             ELSIF r_c1.DERIVED_TYPE = 'MD_STORED_PROGRAMS' THEN
                UPDATE MD_STORED_PROGRAMS 
                   SET NATIVE_SQL = v_TransSQL, "LANGUAGE" = 'OracleSQL'
                      WHERE ID = r_c1.DERIVED_ID;
             ELSIF r_c1.DERIVED_TYPE = 'MD_TRIGGERS' THEN
                UPDATE MD_TRIGGERS 
                   SET NATIVE_SQL = v_TransSQL, "LANGUAGE" = 'OracleSQL'
                      WHERE ID = r_c1.DERIVED_ID;
             END IF;
          ELSE   
              IF r_c1.DERIVED_TYPE = 'MD_VIEWS'
             THEN
                UPDATE MD_VIEWS 
                   SET NATIVE_SQL = v_sourceSQL
                      WHERE ID = r_c1.DERIVED_ID;
             ELSIF r_c1.DERIVED_TYPE = 'MD_STORED_PROGRAMS' THEN
                UPDATE MD_STORED_PROGRAMS 
                   SET NATIVE_SQL = v_sourceSQL
                      WHERE ID = r_c1.DERIVED_ID;
             ELSIF r_c1.DERIVED_TYPE = 'MD_TRIGGERS' THEN
                UPDATE MD_TRIGGERS 
                   SET NATIVE_SQL = v_sourceSQL
                      WHERE ID = r_c1.DERIVED_ID;
             END IF;
          END IF;   
         EXCEPTION 
            WHEN NO_DATA_FOUND THEN
               NULL;
            WHEN OTHERS THEN
                errMsg := LOCALSUBSTRB(dbms_utility.format_error_stack || ' : ' || dbms_utility.format_error_backtrace);
                LogInfo(NULL, sev_err, 'UpdateScratchModel Master cursor issue [' || errMsg ||  '] r_c1.SRC_ID:r_c1.DERIVED_ID:r_c1.DERIVED_TYPE: ' || r_c1.SRC_ID || ':' || r_c1.DERIVED_ID || ':'
                                                                               || r_c1.DERIVED_TYPE, NULL, NULL, nSvrId);                                                              
         END;
      END LOOP;

   END;

   PROCEDURE FixStageKeyReferences
   IS
   BEGIN
       FixSysDatabases;
       FixSysUsers;
       FixSysObjects;
       FixTranslatedSQL;
       FixSysColumns;       
       FixSysComments;       
       FixSysConstraints;       
       FixSysIndexes;
       FixSysTypes;
   END;

   PROCEDURE RegisterSybasePlugin
   IS
   BEGIN
      INSERT INTO md_additional_properties(
                                            connection_id_fk, 
                                            ref_id_fk, 
                                            ref_type,
                                            property_order,
                                            prop_key,
                                            "VALUE"
                                          ) 
                                          VALUES
                                          (
                                             nSvrId,
                                             nSvrId,
                                             'MD_CONNECTIONS',
                                             0,
                                             'PLUGIN_ID',
                                             pluginClass -- might be 12 or 15
                                          );
      COMMIT;                                          
   END;


 FUNCTION StageCapture(projectId NUMBER, pluginClassIn varchar2, pjExists BOOLEAN := FALSE, p_scratchModel BOOLEAN := FALSE) RETURN VARCHAR2
   IS
     ret_val NAME_AND_COUNT_ARRAY;
     scratchConnId NUMBER :=0;
     connectionStatsResult NUMBER;
     n number:=0;
   BEGIN
      -- What should be done when the project with this id is already captured??
      exceptionOccurred :=FALSE;
      nProjectId := projectId;
      projectExist := pjExists;
      pluginClass := pluginClassIn;

      -- NOTE that nSvrId is the capture connection id (with a really bad name)
      SELECT svrid into nSvrId FROM STAGE_SERVERDETAIL
          WHERE project_id = projectId;

      -- Initialize the log status table
       INSERT INTO migrlog(parent_log_id, log_date, severity, logtext, phase, ref_object_id, ref_object_type, connection_id_fk) 
             VALUES(NULL, systimestamp, 666, 'Capture Started', 'CAPTURE', NULL, NULL, projectId);

       COMMIT;          
      --SetStatus('Capture processing started');          
      FixStageKeyReferences;      
      CaptureEntireStage;
      RegisterSybasePlugin;  -- pre-requisite for conversion to work correctly. e.g data type mapping.

      connectionStatsResult:=MIGRATION.gatherConnectionStats(nSvrId,'This is a capture model created using the enterprise estimation cmd tool');
      COMMIT;
      MIGRATION.POPULATE_DERIVATIVES_TABLE(nSvrId); --new identifier mapping setup
      COMMIT;      
      IF p_scratchModel = TRUE
      THEN
	      scratchConnId := MIGRATION.copy_connection_cascade(p_connectionid =>  nSvrId, p_scratchModel =>  TRUE);            
	      ret_val := migration.transform_all_identifiers(scratchConnId, '',  TRUE);
	      UpdateScratchModel;
        connectionStatsResult:=MIGRATION.gatherConnectionStats(scratchConnId,'This is a scratch model used for analysis and estimation');
        COMMIT;
      END IF;
      DELETE migrlog WHERE phase='CAPTURE' AND severity = 666 AND connection_id_fk = projectId;
      COMMIT; 

      --IF exceptionOccurred = TRUE THEN
      --   RAISE CaptureNotClean;
      --END IF;

      RETURN ''|| nSvrId||'/'||scratchConnId;
      EXCEPTION
      WHEN OTHERS THEN
        RAISE;
   END StageCapture;

END SYB12ALLPLATFORM;

/


PROMPT Completed SYB12ALLPLATFORM.sql
PROMPT


-- ============================================================================
-- Deploy: TDALLPLATFORM.sql
-- Category: package bodies
-- ============================================================================

PROMPT Deploying TDALLPLATFORM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Package Body TDALLPLATFORM
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "DB_JT"."TDALLPLATFORM" AS   

    TYPE IDMAP is table of number index by varchar2(512);
    TYPE CHECKIDMAP is table of number index by varchar2(4000);
    TYPE UDTMAP is table of varchar2(4000) index by varchar2(512);
    TYPE NAMEMAP is table of varchar2(512) index by varchar2(512);


    DATABASEIDS IDMAP;
    TABLEIDS IDMAP;
    VIEWIDS IDMAP;
    COLUMNIDS IDMAP;
    CONSTRAINTIDS IDMAP;
    PKEYIDS IDMAP;
    CHECKIDS CHECKIDMAP;
    UDTNAMEMAP UDTMAP;
    PKEYNAMEMAP NAMEMAP;

    logLine NUMBER := 1;
    uniqueId NUMBER := 1;
    nProjectId  NUMBER;
    projectExist BOOLEAN;
    nSvrId NUMBER; -- This is the captured connection id
    nDummyCatalogId NUMBER;  --  Teradata does not have catalogs so insert a dummy one
    pluginClass varchar2(500) := null;

    PROCEDURE SetStatus(msg VARCHAR2, sev NUMBER := 666);

--    PROCEDURE DisableRepositoryTriggers IS
--    BEGIN
--        EXECUTE IMMEDIATE 'ALTER TRIGGER md_projects_trg DISABLE';
--        EXECUTE IMMEDIATE 'ALTER TRIGGER md_catalogs_trg DISABLE';
--        EXECUTE IMMEDIATE 'ALTER TRIGGER md_schemas_trg DISABLE';
--        EXECUTE IMMEDIATE 'ALTER TRIGGER md_tables_trg DISABLE';
--        EXECUTE IMMEDIATE 'ALTER TRIGGER md_views_trg DISABLE';
--        EXECUTE IMMEDIATE 'ALTER TRIGGER md_indexes_trg DISABLE';
--        EXECUTE IMMEDIATE 'ALTER TRIGGER md_stored_programs_trg DISABLE';
--        EXECUTE IMMEDIATE 'ALTER TRIGGER md_triggers_trg DISABLE';
--        --EXECUTE IMMEDIATE 'ALTER TRIGGER md_constraints_trg DISABLE';      
--        EXECUTE IMMEDIATE 'ALTER TRIGGER md_columns_trg DISABLE';      
--    END DisableRepositoryTriggers;

--    PROCEDURE EnableRepositoryTriggers IS
--    BEGIN
--        EXECUTE IMMEDIATE 'ALTER TRIGGER md_projects_trg ENABLE';
--        EXECUTE IMMEDIATE 'ALTER TRIGGER md_catalogs_trg ENABLE';
--        EXECUTE IMMEDIATE 'ALTER TRIGGER md_schemas_trg ENABLE';
--        EXECUTE IMMEDIATE 'ALTER TRIGGER md_tables_trg ENABLE';
--        EXECUTE IMMEDIATE 'ALTER TRIGGER md_views_trg ENABLE';
--        EXECUTE IMMEDIATE 'ALTER TRIGGER md_indexes_trg ENABLE';
--        EXECUTE IMMEDIATE 'ALTER TRIGGER md_stored_programs_trg ENABLE';
--        EXECUTE IMMEDIATE 'ALTER TRIGGER md_triggers_trg ENABLE';
--        --EXECUTE IMMEDIATE 'ALTER TRIGGER md_constraints_trg ENABLE';      
--        EXECUTE IMMEDIATE 'ALTER TRIGGER md_columns_trg ENABLE';      
--    END EnableRepositoryTriggers;

    FUNCTION getTypeLenCode(type VARCHAR2, COLUMNLENGTH NUMBER, DECIMALTOTALDIGITS NUMBER, DECIMALFRACTIONALDIGITS NUMBER) RETURN NUMBER IS
    BEGIN
        if (type IS NULL) THEN
            return 0;
        END IF;
        RETURN CASE TRIM(type)
                   WHEN 'AT' THEN  26 -- ANSITIME
                   WHEN 'BF' THEN  COLUMNLENGTH -- BYTEFIXED
                   WHEN 'BO' THEN -8 -- BYTELARGEOBJECT
                   WHEN 'BS' THEN  0 -- BINARYSTRING
                   WHEN 'BV' THEN -2 -- BYTEVARYING
                   WHEN 'CF' THEN  COLUMNLENGTH -- CHARFIXEDLATIN
                   WHEN 'CO' THEN -8 -- CHARLARGEOBJECT
                   WHEN 'CS' THEN  0 -- CHARSTRING
                   WHEN 'CV' THEN  0 -- CHARVARYINGLATIN
                   WHEN 'D ' THEN  4 -- DECIMAL
                   WHEN 'D'  THEN  4 -- DECIMAL
                   WHEN 'DA' THEN 10 -- DATE
                   WHEN 'DH' THEN  DECIMALTOTALDIGITS + 10 -- DAYHOUR
                   WHEN 'DI' THEN  0 -- DAYINTERVAL
                   WHEN 'DM' THEN  DECIMALTOTALDIGITS + 10 -- DAYMINUTE
                   WHEN 'DS' THEN  CASE DECIMALFRACTIONALDIGITS > 0
                                       WHEN TRUE THEN DECIMALTOTALDIGITS + 10
                                       ELSE DECIMALTOTALDIGITS + DECIMALFRACTIONALDIGITS + 11
                                   END -- DAYSECOND
                   WHEN 'DT' THEN  0 -- DATETAG
                   WHEN 'DY' THEN  DECIMALTOTALDIGITS + 10 -- DAY
                   WHEN 'F ' THEN  0 -- REAL
                   WHEN 'F'  THEN  0 -- REAL
                   WHEN 'HM' THEN  CASE DECIMALTOTALDIGITS
                                       WHEN 4 THEN 10 + 3
                                       WHEN 3 THEN 10 + 2
                                       ELSE 10 + 1
                                   END -- HOURMINUTE
                   WHEN 'HR' THEN  CASE DECIMALTOTALDIGITS
                                       WHEN 4 THEN 10 + 3
                                       WHEN 3 THEN 10 + 2
                                       ELSE 10 + 1
                                   END -- HOUR
                   WHEN 'HS' THEN  CASE DECIMALTOTALDIGITS
                                       WHEN 4 THEN CASE DECIMALFRACTIONALDIGITS > 0
                                                       WHEN TRUE THEN 11 + 3
                                                       ELSE 10 + 3
                                                   END
                                       WHEN 3 THEN CASE DECIMALFRACTIONALDIGITS > 0
                                                       WHEN TRUE THEN 11 + 2
                                                       ELSE 10 + 2
                                                   END
                                       ELSE CASE DECIMALFRACTIONALDIGITS > 0
                                                WHEN TRUE THEN 11 + 1
                                                ELSE 10 + 1
                                            END
                                   END -- HOURSECOND
                   WHEN 'I ' THEN  4 -- INTEGER
                   WHEN 'I'  THEN  4 -- INTEGER
                   WHEN 'I1' THEN  1 -- BYTEINT
                   WHEN 'I2' THEN  2 -- SMALLINT
                   WHEN 'I8' THEN  8 -- BIGINTEGER
                   WHEN 'LF' THEN  0 -- CHARFIXEDLOCALE
                   WHEN 'LV' THEN  0 -- CHARVARYINGLOCALE
                   WHEN 'MI' THEN  11 -- MINUTE
                   WHEN 'MO' THEN  CASE DECIMALTOTALDIGITS
                                       WHEN 4 THEN 3 + 4
                                       WHEN 3 THEN 2 + 4
                                       ELSE 1 + 4
                                   END -- MONTH
                   WHEN 'MS' THEN  CASE DECIMALFRACTIONALDIGITS > 0
                                       WHEN TRUE THEN 12 + DECIMALFRACTIONALDIGITS
                                       ELSE 11
                                   END -- MINUTETOSECOND
                   WHEN 'NM' THEN  0 -- NUMBERTAG
                   WHEN 'PD' THEN  28 -- must match oracle.dbtools.migration.workbench.plugin.Teradata13Plugin.PERIOD_DATE_LENGTH
                   WHEN 'PM' THEN  72 -- must match oracle.dbtools.migration.workbench.plugin.Teradata13Plugin.PERIOD_TIMESTAMP_WITH_TZ_LENGTH
                   WHEN 'PS' THEN  60 -- must match oracle.dbtools.migration.workbench.plugin.Teradata13Plugin.PERIOD_TIMESTAMP_LENGTH
                   WHEN 'PT' THEN  38 -- must match oracle.dbtools.migration.workbench.plugin.Teradata13Plugin.PERIOD_TIME_LENGTH
                   WHEN 'PZ' THEN  50 -- must match oracle.dbtools.migration.workbench.plugin.Teradata13Plugin.PERIOD_TIME_WITH_TZ_LENGTH
                   WHEN 'SC' THEN  CASE DECIMALFRACTIONALDIGITS > 0
                                       WHEN TRUE THEN 12 + DECIMALFRACTIONALDIGITS
                                       ELSE 11
                                   END -- SECOND
                   WHEN 'SZ' THEN 31 -- TIMESTAMPWITHTIMEZONE
                   WHEN 'TM' THEN  0 -- TIMETAG
                   WHEN 'TS' THEN 26 -- TIMESTAMPWITHOUTTIMEZONE
                   WHEN 'TZ' THEN 21 -- ANSITIMEWITHTIMEZONE
                   WHEN 'UF' THEN  0 -- CHARFIXEDUNICODE
                   WHEN 'UT' THEN  0 -- USERDEFINEDTYPE
                   WHEN 'UV' THEN  0 -- CHARVARYINGUNICODE
                   WHEN 'YI' THEN  0 -- YEARINTERVAL
                   WHEN 'YM' THEN  DECIMALTOTALDIGITS + 4 -- YEARMONTH
                   WHEN 'YR' THEN  DECIMALTOTALDIGITS + 4 -- YEAR
                   ELSE 0
               END;
    END getTypeLenCode;

    FUNCTION getTypeLenCode(type VARCHAR2) RETURN NUMBER IS
    BEGIN
        if (type IS NULL) THEN
            return 0;
        END IF;
        RETURN CASE TRIM(type)
                   WHEN 'AT' THEN  0 -- ANSITIME
                   WHEN 'BF' THEN  0 -- BYTEFIXED
                   WHEN 'BO' THEN -8 -- BYTELARGEOBJECT
                   WHEN 'BS' THEN  0 -- BINARYSTRING
                   WHEN 'BV' THEN -2 -- BYTEVARYING
                   WHEN 'CF' THEN  0 -- CHARFIXEDLATIN
                   WHEN 'CO' THEN -8 -- CHARLARGEOBJECT
                   WHEN 'CS' THEN  0 -- CHARSTRING
                   WHEN 'CV' THEN  0 -- CHARVARYINGLATIN
                   WHEN 'D ' THEN  4 -- DECIMAL
                   WHEN 'D'  THEN  4 -- DECIMAL
                   WHEN 'DA' THEN  0 -- DATE
                   WHEN 'DH' THEN  0 -- DAYHOUR
                   WHEN 'DI' THEN  0 -- DAYINTERVAL
                   WHEN 'DM' THEN  0 -- DAYMINUTE
                   WHEN 'DS' THEN  0 -- DAYSECOND
                   WHEN 'DT' THEN  0 -- DATETAG
                   WHEN 'DY' THEN  0 -- DAY
                   WHEN 'F ' THEN  0 -- REAL
                   WHEN 'F'  THEN  0 -- REAL
                   WHEN 'HM' THEN  0 -- HOURMINUTE
                   WHEN 'HR' THEN  0 -- HOUR
                   WHEN 'HS' THEN  0 -- HOURSECOND
                   WHEN 'I ' THEN  4 -- INTEGER
                   WHEN 'I'  THEN  4 -- INTEGER
                   WHEN 'I1' THEN  1 -- BYTEINT
                   WHEN 'I2' THEN  2 -- SMALLINT
                   WHEN 'I8' THEN  8 -- BIGINTEGER
                   WHEN 'LF' THEN  0 -- CHARFIXEDLOCALE
                   WHEN 'LV' THEN  0 -- CHARVARYINGLOCALE
                   WHEN 'MI' THEN  0 -- MINUTE
                   WHEN 'MO' THEN  0 -- MONTH
                   WHEN 'MS' THEN  0 -- MINUTETOSECOND
                   WHEN 'NM' THEN  0 -- NUMBERTAG
                   WHEN 'PD' THEN  28 -- must match oracle.dbtools.migration.workbench.plugin.Teradata13Plugin.PERIOD_DATE_LENGTH
                   WHEN 'PM' THEN  72 -- must match oracle.dbtools.migration.workbench.plugin.Teradata13Plugin.PERIOD_TIMESTAMP_WITH_TZ_LENGTH
                   WHEN 'PS' THEN  60 -- must match oracle.dbtools.migration.workbench.plugin.Teradata13Plugin.PERIOD_TIMESTAMP_LENGTH
                   WHEN 'PT' THEN  38 -- must match oracle.dbtools.migration.workbench.plugin.Teradata13Plugin.PERIOD_TIME_LENGTH
                   WHEN 'PZ' THEN  50 -- must match oracle.dbtools.migration.workbench.plugin.Teradata13Plugin.PERIOD_TIME_WITH_TZ_LENGTH
                   WHEN 'SC' THEN  0 -- SECOND
                   WHEN 'SZ' THEN  0 -- TIMESTAMPWITHTIMEZONE
                   WHEN 'TM' THEN  0 -- TIMETAG
                   WHEN 'TS' THEN  0 -- TIMESTAMPWITHOUTTIMEZONE
                   WHEN 'TZ' THEN  0 -- ANSITIMEWITHTIMEZONE
                   WHEN 'UF' THEN  0 -- CHARFIXEDUNICODE
                   WHEN 'UT' THEN  0 -- USERDEFINEDTYPE
                   WHEN 'UV' THEN  0 -- CHARVARYINGUNICODE
                   WHEN 'YI' THEN  0 -- YEARINTERVAL
                   WHEN 'YM' THEN  0 -- YEARMONTH
                   WHEN 'YR' THEN  0 -- YEAR
                   ELSE 0
               END;
    END getTypeLenCode;

    FUNCTION getTypeName(type VARCHAR2, charType NUMBER, udtName VARCHAR2) RETURN VARCHAR2;

    PROCEDURE registerUDTS IS
        moreToDo BOOLEAN := TRUE;
        countUDTs NUMBER := 0;
    BEGIN
        UDTNAMEMAP('ST_GEOMETRY') := 'ST_GEOMETRY';
        UDTNAMEMAP('MBR') := 'MBR';
        WHILE (moreToDo) LOOP
            countUDTs := UDTNAMEMAP.COUNT;
            FOR field IN
            (
                SELECT
                    "MDID",
                    "TYPEKIND",
                    "TYPENAME",
                    "FIELDNAME",
                    "FIELDID",
                    "FIELDTYPE",
                    "UDTNAME",
                    "CHARTYPE",
                    "MAXLENGTH",
                    "DECIMALTOTALDIGITS",
                    "DECIMALFRACTIONALDIGITS",
                    "INSTANTIABLE",
                    "FINAL"
                FROM
                    STAGE_TERADATA_UDTS
                ORDER BY
                    TYPENAME,
                    FIELDID
            )
            LOOP
                IF (field.TYPEKIND = 'D') THEN
                    IF NOT (UDTNAMEMAP.EXISTS(field.TYPENAME)) THEN
                        IF (field.FIELDTYPE = 'UT') THEN
                            IF (UDTNAMEMAP.EXISTS(field.UDTNAME)) THEN
                                -- copy definition to this one
                                UDTNAMEMAP(field.TYPENAME) := UDTNAMEMAP(field.UDTNAME);
                            END IF;
                        ELSE
                            UDTNAMEMAP(field.TYPENAME) := getTypeName(field.FIELDTYPE, field.CHARTYPE, field.UDTNAME);
                        END IF;
                    END IF;
                END IF;
            END LOOP;
            moreToDo := countUDTS <> UDTNAMEMAP.COUNT;
        END LOOP;
    END registerUDTs;

    FUNCTION getTypeName(type VARCHAR2, charType NUMBER, udtName VARCHAR2) RETURN VARCHAR2 IS
    BEGIN
        SetStatus('getTypeName: ' || type || ', ' || udtName);
        IF (type IS NULL) THEN
            RETURN NULL;
        END IF;
--        IF (type = 'UT' AND udtName = 'ST_GEOMETRY') THEN
--            RETURN 'ST_GEOMETRY';
--        END IF;
        RETURN CASE TRIM(type)
                   WHEN 'AT' THEN 'ANSITIME'
                   WHEN 'BF' THEN 'BYTEFIXED'
                   WHEN 'BO' THEN 'BYTELARGEOBJECT'
                   WHEN 'BS' THEN 'BINARYSTRING'
                   WHEN 'BV' THEN 'BYTEVARYING'
                   WHEN 'CF' THEN 'CHARFIXED' || ( CASE charType WHEN 1 THEN 'LATIN' WHEN 2 THEN 'UNICODE' WHEN 3 THEN 'KANJISJIS' WHEN 4 THEN 'GRAPHIC' WHEN 5 THEN 'KANJI1' ELSE 'LATIN' END)
                   WHEN 'CO' THEN 'CHARLARGEOBJECT' || ( CASE charType WHEN 1 THEN 'LATIN' WHEN 2 THEN 'UNICODE' WHEN 3 THEN 'KANJISJIS' WHEN 4 THEN 'GRAPHIC' WHEN 5 THEN 'KANJI1' ELSE 'LATIN' END)
                   WHEN 'CS' THEN 'CHARSTRING'
                   WHEN 'CV' THEN 'CHARVARYING' || ( CASE charType WHEN 1 THEN 'LATIN' WHEN 2 THEN 'UNICODE' WHEN 3 THEN 'KANJISJIS' WHEN 4 THEN 'GRAPHIC' WHEN 5 THEN 'KANJI1' ELSE 'LATIN' END)
                   WHEN 'D'  THEN 'DECIMAL'
                   WHEN 'DA' THEN 'DATE'
                   WHEN 'DH' THEN 'DAYHOUR'
                   WHEN 'DI' THEN 'DAYINTERVAL'
                   WHEN 'DM' THEN 'DAYMINUTE'
                   WHEN 'DS' THEN 'DAYSECOND'
                   WHEN 'DT' THEN 'DATETAG'
                   WHEN 'DY' THEN 'DAY'
                   WHEN 'F'  THEN 'REAL'
                   WHEN 'HM' THEN 'HOURMINUTE'
                   WHEN 'HR' THEN 'HOUR'
                   WHEN 'HS' THEN 'HOURSECOND'
                   WHEN 'I'  THEN 'INTEGER'
                   WHEN 'I1' THEN 'BYTEINT'
                   WHEN 'I2' THEN 'SMALLINT'
                   WHEN 'I8' THEN 'BIGINTEGER'
                   WHEN 'LF' THEN 'CHARFIXEDLOCALE'
                   WHEN 'LV' THEN 'CHARVARYINGLOCALE'
                   WHEN 'MI' THEN 'MINUTE'
                   WHEN 'MO' THEN 'MONTH'
                   WHEN 'MS' THEN 'MINUTETOSECOND'
                   WHEN 'NM' THEN 'NUMBERTAG'
                   WHEN 'PD' THEN 'PERIODDATE'
                   WHEN 'PM' THEN 'PERIODTIMESTAMPWITHTIMEZONE'
                   WHEN 'PS' THEN 'PERIODTIMESTAMP'
                   WHEN 'PT' THEN 'PERIODTIME'
                   WHEN 'PZ' THEN 'PERIODTIMEWITHTIMEZONE'
                   WHEN 'SC' THEN 'SECOND'
                   WHEN 'SZ' THEN 'TIMESTAMPWITHTIMEZONE'
                   WHEN 'TM' THEN 'TIMETAG'
                   WHEN 'TS' THEN 'TIMESTAMPWITHOUTTIMEZONE'
                   WHEN 'TZ' THEN 'ANSITIMEWITHTIMEZONE'
                   WHEN 'UF' THEN 'CHARFIXEDUNICODE'
                   WHEN 'UT' THEN ( case UDTNAMEMAP.EXISTS(udtName) WHEN TRUE THEN UDTNAMEMAP(udtName) WHEN FALSE THEN NULL END )
                   WHEN 'UV' THEN 'CHARVARYINGUNICODE'
                   WHEN 'YI' THEN 'YEARINTERVAL'
                   WHEN 'YM' THEN 'YEARMONTH'
                   WHEN 'YR' THEN 'YEAR'
                   else TRIM(type)
               END;
    END getTypeName;

    FUNCTION getProcFunc(prgType VARCHAR2) RETURN VARCHAR2 IS
    BEGIN
        return CASE 
                   WHEN prgType in ('F', 'A', 'B', 'R', 'S') THEN 'FUNCTION'
                   WHEN prgType in ('P', 'E') THEN 'PROCEDURE'
                   ELSE 'NONE'
               END;
    END getProcFunc;

    PROCEDURE CaptureConnections IS
    BEGIN
        -- create project
        SetStatus('CaptureConnections');
        IF (projectExist = FALSE) THEN            
            INSERT INTO md_projects("ID", project_name, comments)
            (
                SELECT
                    project_id, project_name, comments
                FROM
                    stage_serverdetail WHERE project_id = nProjectId
                    AND NOT EXISTS (SELECT 1 FROM md_projects WHERE "ID" = nProjectId)
            ); 
        END IF;
        -- capture connections
        INSERT INTO md_connections("ID", project_id_fk, username, dburl, "NAME")
        (
            SELECT SVRID, nProjectId, username, dburl, db_name 
            FROM stage_serverdetail WHERE project_id = nProjectId
        );
    END CaptureConnections;

    PROCEDURE CaptureDatabases IS
    BEGIN
        SetStatus('CaptureDatabases');
        nDummyCatalogId := MD_META.get_next_id;
        INSERT INTO md_catalogs("ID", connection_id_fk, catalog_name, dummy_flag)
        VALUES ( nDummyCatalogId, nSvrId, 'Teradata', 'Y' );
    END CaptureDatabases;

    PROCEDURE CaptureSchemas IS
    BEGIN
        SetStatus('CaptureSchemas');
        FOR db IN
        (
            SELECT
                SVRID,
                MDID,
                DATABASENAME,
                COMMENTSTRING,
                OWNERNAME
            FROM STAGE_TERADATA_DATABASES
        )
        LOOP
            --DBMS_OUTPUT.PUT_LINE('Name = ' || db.DATABASENAME || ', ID = ' || db.MDID);
            INSERT
                INTO md_schemas("ID", "CATALOG_ID_FK", "NAME")
                VALUES ( db.MDID, nDummyCatalogId, db.DATABASENAME );
            DATABASEIDS(TRIM(db.databasename)) := db.mdid;
        END LOOP;
    END;

    PROCEDURE CaptureTablesAndViews IS 
        errMsg VARCHAR2(4000);
        clbNativeSql CLOB := TO_CLOB(' ');
    BEGIN
        SetStatus('CaptureTablesAndViews');
        FOR tab IN
        (
            SELECT
                MDID,
                DATABASENAME,
                TABLENAME,
                TABLEKIND,
                CREATORNAME,
                REQUESTTEXT,
                COMMENTSTRING,
                COMMITOPT
            FROM STAGE_TERADATA_TABLES
        )
        LOOP
            --DBMS_OUTPUT.put_line('TABLE:' || tab.DATABASENAME || '.' || tab.TABLENAME);
            IF (tab.TABLEKIND = 'T') THEN
                INSERT
                    INTO md_tables("ID", schema_id_fk, table_name, qualified_native_name)
                    VALUES (tab.MDID, DATABASEIDS(TRIM(tab.DATABASENAME)), tab.TABLENAME, tab.DATABASENAME || '.' || tab.TABLENAME);
                TABLEIDS(TRIM(tab.DATABASENAME) || '.' || TRIM(tab.TABLENAME)) := tab.mdid;
                --SetStatus('CaptureTables: ' || TRIM(tab.DATABASENAME) || '.' || TRIM(tab.TABLENAME) || ' - ' || TABLEIDS(TRIM(tab.DATABASENAME) || '.' || TRIM(tab.TABLENAME)));

            END IF;
            IF (tab.TABLEKIND = 'V') THEN
                clbNativeSql  := TO_CLOB(tab.REQUESTTEXT);
                INSERT
                    INTO md_views("ID", schema_id_fk, view_name, "LANGUAGE", native_sql, comments)
                    VALUES (tab.MDID, DATABASEIDS(TRIM(tab.DATABASENAME)), tab.TABLENAME, 'Teradata', clbNativeSql, tab.COMMENTSTRING);
                VIEWIDS(TRIM(tab.DATABASENAME) || '.' || TRIM(tab.TABLENAME)) := tab.mdid;
            END IF;
        END LOOP;
    EXCEPTION 
        WHEN OTHERS THEN
            errMsg := SQLERRM;  
            --DBMS_OUTPUT.put_line('Exception:' || errMsg);
            RAISE;
    END CaptureTablesAndViews;

    PROCEDURE CaptureColumns IS
        errMsg VARCHAR2(4000);
        typeName VARCHAR2(64);
        id NUMBER;
        dumpLenCode NUMBER;
        prec NUMBER;
    BEGIN
        SetStatus('CaptureColumns');
        FOR col IN
        (
            SELECT
                MDID,
                DATABASENAME,
                TABLENAME,
                COLUMNNAME,
                COLUMNFORMAT,
                COLUMNTITLE,
                COLUMNTYPE,
                COLUMNUDTNAME,
                COLUMNLENGTH,
                DEFAULTVALUE,
                NULLABLE,
                COMMENTSTRING,
                DECIMALTOTALDIGITS,
                DECIMALFRACTIONALDIGITS,
                COLUMNID,
                UPPERCASEFLAG,
                COLUMNCONSTRAINT,
                CONSTRAINTCOUNT,
                CREATORNAME,
                CHARTYPE,
                IDCOLTYPE
            FROM STAGE_TERADATA_COLUMNS
        )
        LOOP
            IF (TABLEIDS.EXISTS(TRIM(col.DATABASENAME) || '.' || TRIM(col.TABLENAME))) THEN
                id := TABLEIDS(TRIM(col.DATABASENAME) || '.' || TRIM(col.TABLENAME));
                prec := CASE
                            WHEN ((col.DECIMALTOTALDIGITS IS NOT NULL)/*OR(col.DECIMALFRACTIONALDIGITS IS NOT NULL) */) then (col.DECIMALTOTALDIGITS)
                            ELSE (col.COLUMNLENGTH) 
                        END;

                --DBMS_OUTPUT.put_line('COLUMN:' || col.DATABASENAME || '.' || col.TABLENAME || '.' || col.COLUMNNAME || ' ID: ' || id);
                --insert into STAGE_TERADATA_LOG (LINE, LOGSTRING) VALUES (logLine, 'ROB-COLUMN:' || col.DATABASENAME || '.' || col.TABLENAME || '.' || col.COLUMNNAME || ' ID: ' || id);
                --logLine := logLine + 1;

                typeName := getTypeName(col.COLUMNTYPE, col.CHARTYPE, col.COLUMNUDTNAME);
                IF (col.COLUMNTYPE IS NOT NULL) THEN
                    IF (col.COLUMNTYPE = 'PD') THEN
                        prec := 28;-- must match oracle.dbtools.migration.workbench.plugin.Teradata13Plugin.PERIOD_DATE_LENGTH
                    END IF;
                    IF (col.COLUMNTYPE = 'PM') THEN
                        prec := 72; -- must match oracle.dbtools.migration.workbench.plugin.Teradata13Plugin.PERIOD_TIMESTAMP_WITH_TZ_LENGTH
                    END IF;
                    IF (col.COLUMNTYPE = 'PS') THEN
                        prec := 60; -- must match oracle.dbtools.migration.workbench.plugin.Teradata13Plugin.PERIOD_TIMESTAMP_LENGTH
                    END IF;
                    IF (col.COLUMNTYPE = 'PT') THEN
                        prec := 38; -- must match oracle.dbtools.migration.workbench.plugin.Teradata13Plugin.PERIOD_TIME_LENGTH
                    END IF;
                    IF (col.COLUMNTYPE = 'PZ') THEN
                        prec := 50; -- must match oracle.dbtools.migration.workbench.plugin.Teradata13Plugin.PERIOD_TIME_WITH_TZ_LENGTH
                    END IF;
                END IF;
                INSERT
                    INTO MD_COLUMNS
                    (
                        "ID",
                        table_id_fk,
                        column_name,
                        column_order,
                        column_type,
                        "PRECISION",
                        "SCALE",
                        nullable,
                        default_value,
                        comments
                    )
                    VALUES
                    (
                        col.MDID,
                        id,
                        col.COLUMNNAME,
                        col.COLUMNID,
                        typeName,
                        prec,
                        col.DECIMALFRACTIONALDIGITS,
                        col.NULLABLE,
                        CASE 
                            WHEN col.COLUMNTYPE in ('BV', 'BF', 'BO', 'BS') THEN  NULL
                            ELSE col.DEFAULTVALUE
                        END,
                        col.COMMENTSTRING
                    );
                IF (col.COLUMNTYPE IS NOT NULL) THEN
                    dumpLenCode := getTypeLenCode(col.COLUMNTYPE, col.COLUMNLENGTH, col.DECIMALTOTALDIGITS, col.DECIMALFRACTIONALDIGITS);
                    IF (col.COLUMNTYPE = 'PD') THEN
                        INSERT
                            INTO MD_ADDITIONAL_PROPERTIES(connection_id_fk, ref_id_fk, ref_type, property_order, prop_key, "VALUE")
                            VALUES(nSvrId, col.MDID, 'MD_COLUMNS', col.COLUMNID, 'TERADATA_PERIODDATE_COLUMN', 'needconverting');
                    END IF;
                    IF (col.COLUMNTYPE = 'PM') THEN
                        INSERT
                            INTO MD_ADDITIONAL_PROPERTIES(connection_id_fk, ref_id_fk, ref_type, property_order, prop_key, "VALUE")
                            VALUES(nSvrId, col.MDID, 'MD_COLUMNS', col.COLUMNID, 'TERADATA_PERIODTIMESTAMPWITHTIMEZONE_COLUMN', 'needconverting');
                    END IF;
                    IF (col.COLUMNTYPE = 'PS') THEN
                        INSERT
                            INTO MD_ADDITIONAL_PROPERTIES(connection_id_fk, ref_id_fk, ref_type, property_order, prop_key, "VALUE")
                            VALUES(nSvrId, col.MDID, 'MD_COLUMNS', col.COLUMNID, 'TERADATA_PERIODTIMESTAMP_COLUMN', 'needconverting');
                    END IF;
                    IF (col.COLUMNTYPE = 'PT') THEN
                        INSERT
                            INTO MD_ADDITIONAL_PROPERTIES(connection_id_fk, ref_id_fk, ref_type, property_order, prop_key, "VALUE")
                            VALUES(nSvrId, col.MDID, 'MD_COLUMNS', col.COLUMNID, 'TERADATA_PERIODTIME_COLUMN', 'needconverting');
                    END IF;
                    IF (col.COLUMNTYPE = 'PZ') THEN
                        INSERT
                            INTO MD_ADDITIONAL_PROPERTIES(connection_id_fk, ref_id_fk, ref_type, property_order, prop_key, "VALUE")
                            VALUES(nSvrId, col.MDID, 'MD_COLUMNS', col.COLUMNID, 'TERADATA_PERIODTIMEWITHTIMEZONE_COLUMN', 'needconverting');
                    END IF;
                    IF ((col.COLUMNTYPE = 'UT') AND (col.COLUMNUDTNAME = 'ST_GEOMETRY')) THEN
                        INSERT
                            INTO MD_ADDITIONAL_PROPERTIES(connection_id_fk, ref_id_fk, ref_type, property_order, prop_key, "VALUE")
                            VALUES(nSvrId, col.MDID, 'MD_COLUMNS', col.COLUMNID, 'TERADATA_ST_GEOMETRY_COLUMN', 'needconverting');
                        dumpLenCode := -2;
                    END IF;
                    IF ((col.COLUMNTYPE = 'UT') AND (col.COLUMNUDTNAME = 'MBR')) THEN
                        INSERT
                            INTO MD_ADDITIONAL_PROPERTIES(connection_id_fk, ref_id_fk, ref_type, property_order, prop_key, "VALUE")
                            VALUES(nSvrId, col.MDID, 'MD_COLUMNS', col.COLUMNID, 'TERADATA_MBR_COLUMN', 'needconverting');
                    END IF;
                    IF (dumpLenCode = 0) THEN
                        dumpLenCode := prec;
                    END IF;
                    INSERT
                        INTO MD_ADDITIONAL_PROPERTIES(connection_id_fk, ref_id_fk, ref_type, property_order, prop_key, "VALUE")
                        VALUES(nSvrId, col.MDID, 'MD_COLUMNS', col.COLUMNID, 'TERADATA_DUMPLENDECODE', TO_CHAR(dumpLenCode));
                END IF;
                IF (col.COLUMNFORMAT IS NOT NULL) THEN
                    INSERT
                        INTO MD_ADDITIONAL_PROPERTIES(connection_id_fk, ref_id_fk, ref_type, property_order, prop_key, "VALUE")
                        VALUES(nSvrId, col.MDID, 'MD_COLUMNS', col.COLUMNID, 'TERADATA_COLUMNFORMAT', col.COLUMNFORMAT);
                END IF;
                IF (col.COLUMNFORMAT IS NOT NULL) THEN
                    INSERT
                        INTO MD_ADDITIONAL_PROPERTIES(connection_id_fk, ref_id_fk, ref_type, property_order, prop_key, "VALUE")
                        VALUES(nSvrId, col.MDID, 'MD_COLUMNS', col.COLUMNID, 'TERADATA_MAXLENGTH', col.COLUMNLENGTH);
                END IF;
                IF (col.DEFAULTVALUE IS NOT NULL) THEN
                    IF ((typeName = 'ANSITIME') OR (typeName = 'ANSITIMEWITHTIMEZONE')) THEN
                        INSERT
                            INTO MD_ADDITIONAL_PROPERTIES(connection_id_fk, ref_id_fk, ref_type, property_order, prop_key, "VALUE")
                            VALUES(nSvrId, col.MDID, 'MD_COLUMNS', col.COLUMNID, 'TERADATA_CHECK_TIME_DEFAULT', col.DEFAULTVALUE);
                    END IF;
                    IF ((typeName = 'TIMESTAMPWITHTIMEZONE') OR (typeName = 'TIMESTAMPWITHOUTTIMEZONE')) THEN
                        INSERT
                            INTO MD_ADDITIONAL_PROPERTIES(connection_id_fk, ref_id_fk, ref_type, property_order, prop_key, "VALUE")
                            VALUES(nSvrId, col.MDID, 'MD_COLUMNS', col.COLUMNID, 'TERADATA_CHECK_TIMESTAMP_DEFAULT', col.DEFAULTVALUE);
                    END IF;
                    IF (typeName = 'DATE') THEN
                        INSERT
                            INTO MD_ADDITIONAL_PROPERTIES(connection_id_fk, ref_id_fk, ref_type, property_order, prop_key, "VALUE")
                            VALUES(nSvrId, col.MDID, 'MD_COLUMNS', col.COLUMNID, 'TERADATA_CHECK_DATE_DEFAULT', col.DEFAULTVALUE);
                    END IF;
                END IF;
            END IF;
            COLUMNIDS(TRIM(col.DATABASENAME) || '.' || TRIM(col.TABLENAME) || '.' || TRIM(col.COLUMNNAME)) := col.mdid;
        END LOOP;
    EXCEPTION 
        WHEN OTHERS THEN
            errMsg := SQLERRM;  
            --DBMS_OUTPUT.put_line('Exception:' || errMsg);
            RAISE;
    END CaptureColumns;

    PROCEDURE CaptureIndexes IS
        errMsg VARCHAR2(4000);
        indexId NUMBER;
        indexType VARCHAR(16);
        indexShortName VARCHAR2(128 CHAR);
        indexFullName VARCHAR2(270 CHAR); -- DATABASENAME || '.' || TABLENAME || '.' || INDEXNUMBER
        nextIndexName VARCHAR2(270 CHAR); -- DATABASENAME || '.' || TABLENAME || '.' || INDEXNUMBER
        columnId NUMBER;
        tableId NUMBER;
    BEGIN
        SetStatus('CaptureIndexes');
        indexId := NULL;
        FOR indexCol IN
        (
            SELECT
                MDID,
                DATABASENAME,
                TABLENAME,
                INDEXNUMBER,
                INDEXTYPE,
                UNIQUEFLAG,
                INDEXNAME,
                COLUMNNAME,
                COLUMNPOSITION,
                CREATORNAME,
                INDEXMODE
            FROM
                STAGE_TERADATA_INDICES
            WHERE
                INDEXTYPE = 'S' -- IN ('S', 'P', 'Q') -- includes partitioned/non partitioned primary indexes
            ORDER BY
                DATABASENAME,
                TABLENAME,
                INDEXNUMBER,
                COLUMNPOSITION
        )
        LOOP
            IF TABLEIDS.EXISTS(TRIM(indexCol.DATABASENAME) || '.' || TRIM(indexCol.TABLENAME)) THEN
                tableId := TABLEIDS(TRIM(indexCol.DATABASENAME) || '.' || TRIM(indexCol.TABLENAME));
                nextIndexName := indexCol.DATABASENAME || '.' || indexCol.TABLENAME || '.' || indexCol.INDEXNUMBER;
                IF (indexFullName IS NULL) OR (nextIndexName != indexFullName) THEN
                    IF (indexCol.UNIQUEFLAG = 'Y') THEN
                        indexType := 'UNIQUE';
                    ELSE
                        indexType := 'NON_UNIQUE';
                    END IF;
                    indexId := MD_META.get_next_id;
                    indexFullName := nextIndexName;
                    IF (indexCol.INDEXNAME IS NULL) THEN
                        indexShortName := indexCol.TABLENAME || indexCol.INDEXTYPE || indexCol.INDEXNUMBER; -- can't have a NULL index name
                    ELSE
                        indexShortName := indexCol.INDEXNAME;
                    END IF;
                    INSERT
                        INTO MD_INDEXES(id, table_id_fk, index_name, index_type)
                        VALUES(indexId, tableId, indexShortName, indexType);
                END IF;
                IF COLUMNIDS.EXISTS(TRIM(indexCol.DATABASENAME) || '.' || TRIM(indexCol.TABLENAME) || '.' || TRIM(indexCol.COLUMNNAME)) THEN
                    columnId := COLUMNIDS(TRIM(indexCol.DATABASENAME) || '.' || TRIM(indexCol.TABLENAME) || '.' || TRIM(indexCol.COLUMNNAME));
                    INSERT
                        INTO MD_INDEX_DETAILS(id, index_id_fk, column_id_fk, detail_order)
                        VALUES(indexCol.MDID, indexId, columnId, indexCol.COLUMNPOSITION);
                END IF;
            END IF;
        END LOOP;
    EXCEPTION 
        WHEN OTHERS THEN
            errMsg := SQLERRM;  
            --DBMS_OUTPUT.put_line('Exception(CaptureIndexes):' || errMsg);
            RAISE;
    END CaptureIndexes;

    PROCEDURE CapturePrimaryKeys IS
        errMsg VARCHAR2(4000);
        pKeyId NUMBER;
        pKeyType VARCHAR(16);
        pKeyName VARCHAR2(270 CHAR);
        tableName VARCHAR2(270 CHAR);
        nextPKeyName VARCHAR2(270 CHAR);
        nextTableName VARCHAR2(270 CHAR);
        shortConstraintName VARCHAR2(270 CHAR);
        columnId NUMBER;
        tableId NUMBER;
    BEGIN
        SetStatus('CapturePrimaryKeys');
        pKeyId := NULL;
        pKeyName := NULL;
        FOR pKeyCol IN
        (
            SELECT
                COALESCE(INDEXNAME, TRIM(TABLENAME) || '_' || TRIM(INDEXTYPE) || TRIM(INDEXNUMBER)) CONSTRAINTNAME,
                MDID,
                DATABASENAME,
                TABLENAME,
                INDEXNUMBER,
                INDEXTYPE,
                UNIQUEFLAG,
                INDEXNAME,
                COLUMNNAME,
                COLUMNPOSITION,
                CREATORNAME,
                INDEXMODE
            FROM
                STAGE_TERADATA_INDICES
            WHERE
                IndexType in ('K', 'P', 'Q', 'U')
            ORDER BY DATABASENAME, TABLENAME, CONSTRAINTNAME, INDEXNUMBER, COLUMNPOSITION
        )
        LOOP
            SetStatus('CapturePrimaryKeys: ** ' || TRIM(pkeyCol.DATABASENAME) || '.' || TRIM(pkeyCol.TABLENAME) || '.' || TRIM(pKeyCol.CONSTRAINTNAME));
            IF TABLEIDS.EXISTS(TRIM(pkeyCol.DATABASENAME) || '.' || TRIM(pkeyCol.TABLENAME)) THEN
                tableId := TABLEIDS(TRIM(pkeyCol.DATABASENAME) || '.' || TRIM(pkeyCol.TABLENAME));
                IF (PKEYNAMEMAP.EXISTS(TRIM(pkeyCol.DATABASENAME) || '.' || TRIM(pkeyCol.TABLENAME) || '.' || TRIM(pKeyCol.CONSTRAINTNAME))) THEN
                    shortConstraintName := PKEYNAMEMAP(TRIM(pkeyCol.DATABASENAME) || '.' || TRIM(pkeyCol.TABLENAME) || '.' || TRIM(pKeyCol.CONSTRAINTNAME));
                ELSE
                    shortConstraintName := TRIM(pKeyCol.CONSTRAINTNAME);
                END IF;
                SetStatus('CapturePrimaryKeys: ++ ' || shortConstraintName || '<==>' || TRIM(pKeyCol.CONSTRAINTNAME));
                nextPKeyName := TRIM(pkeyCol.DATABASENAME) || '.' || shortConstraintName;
                nextTableName := TRIM(pkeyCol.TABLENAME);
                IF (pKeyName IS NULL) OR (nextPKeyName != pKeyName) OR
                   (tableName IS NULL) OR (nextTableName != tableName) THEN
                    -- new Primary Key
                    pKeyId := MD_META.get_next_id;
                    IF (trim(pKeyCol.INDEXTYPE) = 'K') THEN
                        pKeyType := 'PK';
                    ELSE
                        IF (trim(pKeyCol.INDEXTYPE) = 'U') THEN
                            pKeyType := 'UNIQUE';
                        ELSE
                            IF (((trim(pKeyCol.INDEXTYPE) = 'Q') OR (trim(pKeyCol.INDEXTYPE) = 'P')) AND
                                ((pKeyCol.UNIQUEFLAG IS NOT NULL) AND (TRIM(pKeyCol.UNIQUEFLAG) = 'Y'))) THEN
                                pKeyType := 'UNIQUE';
                            ELSE
                                pKeyName := NULL; -- ignore and continue around loop
                                pKeyType := NULL;
                            END IF;
                        END IF;
                    END IF;
                    SetStatus('CapturePrimaryKeys: ## ' || TRIM(pkeyCol.DATABASENAME) || '.' || TRIM(pkeyCol.TABLENAME) || '.' || TRIM(pKeyCol.CONSTRAINTNAME) || ' - ' || pKeyType || '-' || pKeyName || '-' || TRIM(pKeyCol.INDEXTYPE) || '-' || nextPKeyName);
                    IF (pKeyType IS NOT NULL) THEN
                        SetStatus('CapturePrimaryKeys: -- ' || TRIM(pkeyCol.DATABASENAME) || '.' || TRIM(pkeyCol.TABLENAME) || '.' || TRIM(pKeyCol.CONSTRAINTNAME));
                        WHILE (PKEYIDS.EXISTS(nextPKeyName)) LOOP -- ensure unique
                            shortConstraintName := TRIM(pKeyCol.CONSTRAINTNAME) || uniqueId;
                            nextPKeyName := TRIM(pkeyCol.DATABASENAME) || '.' || shortConstraintName;
                            uniqueId := uniqueId + 1;
                        END LOOP;
                        SetStatus('CapturePrimaryKeys: == ' || nextPKeyName || ', ' || shortConstraintName || ', ' || pKeyType);
                        PKEYIDS(nextPKeyName) := pKeyId;
                        pKeyName := nextPKeyName;
                        tableName := nextTableName;
                        PKEYNAMEMAP(TRIM(pkeyCol.DATABASENAME) || '.' || TRIM(pkeyCol.TABLENAME) || '.' || TRIM(pKeyCol.CONSTRAINTNAME)) := shortConstraintName;
                        INSERT
                            INTO MD_CONSTRAINTS (ID, NAME, CONSTRAINT_TYPE, TABLE_ID_FK, "LANGUAGE")
                            VALUES (pKeyId, shortConstraintName, pKeyType, tableId, 'TERADATALANG');
                            CONSTRAINTIDS(UPPER(pKeyName)) := pKeyId;
                    END IF;
                END IF;
                IF (pKeyName IS NOT NULL) THEN
                    IF COLUMNIDS.EXISTS(TRIM(pKeyCol.DATABASENAME) || '.' || TRIM(pKeyCol.TABLENAME) || '.' || TRIM(pKeyCol.COLUMNNAME)) THEN
                        columnId := COLUMNIDS(TRIM(pKeyCol.DATABASENAME) || '.' || TRIM(pKeyCol.TABLENAME) || '.' || TRIM(pKeyCol.COLUMNNAME));
                        INSERT
                            INTO MD_CONSTRAINT_DETAILS(id, constraint_id_fk, column_id_fk, detail_order)
                            VALUES(MD_META.get_next_id, pKeyId, columnId, pKeyCol.COLUMNPOSITION);
                    END IF;
                END IF;
            END IF;
        END LOOP;
    EXCEPTION 
        WHEN OTHERS THEN
            errMsg := SQLERRM;  
            --DBMS_OUTPUT.put_line('Exception(CapturePrimaryKeys):' || errMsg);
            RAISE;
    END CapturePrimaryKeys;

    PROCEDURE CaptureForeignKeys IS
        errMsg VARCHAR2(4000);
        fKeyId NUMBER;
        fKeyType VARCHAR(16);
        fKeyName VARCHAR2(270 CHAR);
        currentReferenceIdx NUMBER;
        currentTableId NUMBER;
        columnId NUMBER;
        refColumnId NUMBER;
        tableId NUMBER;
        refTableId NUMBER;
        seq NUMBER;
    BEGIN
        SetStatus('CaptureForeignKeys');
        fKeyId := NULL;
        fKeyName := NULL;
        currentReferenceIdx := NULL;
        currentTableId := NULL;
        FOR fKeyCol IN
        (
            SELECT DISTINCT
                "MDID1",
                "MDID2",
                "TABLESCHEMA",
                "TABLENAME",
                "REFTABLESCHEMA",
                "REFTABLENAME",
                "CONSTRAINTNAME",
                "COLUMNNAME",
                "REFCOLUMNNAME",
                "REFKEYNAME",
                "COLUMNSEQ",
                "REFERENCEIDX",
                "FKEYID",
                "PARENTKEYID"
            FROM
                STAGE_TERADATA_FKEYS
            order by "TABLESCHEMA", "TABLENAME", "REFERENCEIDX", "COLUMNSEQ"
        )
        LOOP
--            SetStatus('CaptureForeignKeys: Row Read');
--            IF (TABLEIDS.EXISTS(TRIM(fKeyCol.TABLESCHEMA) || '.' || TRIM(fKeyCol.TABLENAME))) THEN
--                SetStatus('CaptureForeignKeys: ' || TRIM(fKeyCol.TABLESCHEMA) || '.' || TRIM(fKeyCol.TABLENAME) || ' - EXISTS');
--            ELSE
--                SetStatus('CaptureForeignKeys: ' || TRIM(fKeyCol.TABLESCHEMA) || '.' || TRIM(fKeyCol.TABLENAME) || ' - DOES NOT EXIST');
--            END IF;
--            IF (TABLEIDS.EXISTS(TRIM(fKeyCol.REFTABLESCHEMA) || '.' || TRIM(fKeyCol.REFTABLENAME))) THEN
--                SetStatus('CaptureForeignKeys: ' || TRIM(fKeyCol.REFTABLESCHEMA) || '.' || TRIM(fKeyCol.REFTABLENAME) || ' - EXISTS');
--            ELSE
--                SetStatus('CaptureForeignKeys: ' || TRIM(fKeyCol.REFTABLESCHEMA) || '.' || TRIM(fKeyCol.REFTABLENAME) || ' - DOES NOT EXIST');
--            END IF;
            IF TABLEIDS.EXISTS(TRIM(fKeyCol.TABLESCHEMA) || '.' || TRIM(fKeyCol.TABLENAME)) AND
               TABLEIDS.EXISTS(TRIM(fKeyCol.REFTABLESCHEMA) || '.' || TRIM(fKeyCol.REFTABLENAME)) THEN
                tableId := TABLEIDS(TRIM(fKeyCol.TABLESCHEMA) || '.' || TRIM(fKeyCol.TABLENAME));
                refTableId := TABLEIDS(TRIM(fKeyCol.REFTABLESCHEMA) || '.' || TRIM(fKeyCol.REFTABLENAME));
--                SetStatus('CaptureForeignKeys: SRC/TGT Tables - ' || tableId || ', ' || refTableId);
                fKeyName := fKeyCol.CONSTRAINTNAME;
                IF ((currentTableId IS NULL) OR (currentTableId != tableId)) THEN
                    -- new table
--                    SetStatus('CaptureForeignKeys: New Table');
                    currentTableId := tableId;
                    currentReferenceIdx := NULL;
                END IF;
                IF ((currentReferenceIdx IS NULL) OR (currentReferenceIdx != fKeyCol.REFERENCEIDX)) THEN
                    -- new Foreign Key
--                    SetStatus('CaptureForeignKeys: New FKey');

                    fKeyId := MD_META.get_next_id;
                    currentReferenceIdx := fKeyCol.REFERENCEIDX;
                    IF (fKeyName IS NULL) THEN
                        fKeyName := TRIM(fKeyCol.TABLENAME) || 'FK' || uniqueId;
                        uniqueId := uniqueId + 1;
                    END IF;
                    INSERT
                        INTO MD_CONSTRAINTS (ID, NAME, CONSTRAINT_TYPE, TABLE_ID_FK, REFTABLE_ID_FK, "LANGUAGE")
                        VALUES (fKeyId, fKeyName , 'FOREIGN KEY', tableId, refTableId, 'TERADATALANG');
                        CONSTRAINTIDS(UPPER(fKeyName)) := fKeyId;
                END IF;
                seq := ((fKeyCol.COLUMNSEQ - 1) * 2) + 1;
                IF COLUMNIDS.EXISTS(TRIM(fKeyCol.TABLESCHEMA) || '.' || TRIM(fKeyCol.TABLENAME) || '.' || TRIM(fKeyCol.COLUMNNAME)) THEN
                    columnId := COLUMNIDS(TRIM(fKeyCol.TABLESCHEMA) || '.' || TRIM(fKeyCol.TABLENAME) || '.' || TRIM(fKeyCol.COLUMNNAME));
--                    SetStatus('CaptureForeignKeys: SEQ - ' || seq);
                    INSERT
                        INTO MD_CONSTRAINT_DETAILS(id, constraint_id_fk, column_id_fk, detail_order)
                        VALUES(fKeyCol.MDID1, fKeyId, columnId, seq);
                END IF;
                seq := seq + 1;
                IF COLUMNIDS.EXISTS(TRIM(fKeyCol.REFTABLESCHEMA) || '.' || TRIM(fKeyCol.REFTABLENAME) || '.' || TRIM(fKeyCol.REFCOLUMNNAME)) THEN
                    refColumnId := COLUMNIDS(TRIM(fKeyCol.REFTABLESCHEMA) || '.' || TRIM(fKeyCol.REFTABLENAME) || '.' || TRIM(fKeyCol.REFCOLUMNNAME));
--                    SetStatus('CaptureForeignKeys: SEQ - ' || seq);
                    INSERT
                        INTO MD_CONSTRAINT_DETAILS(id, constraint_id_fk, column_id_fk, detail_order, ref_flag)
                        VALUES(fKeyCol.MDID2, fKeyId, refColumnId, seq, 'Y');
                END IF;
            END IF;
        END LOOP;
    EXCEPTION 
        WHEN OTHERS THEN
            errMsg := SQLERRM;  
            --DBMS_OUTPUT.put_line('Exception(CaptureForeignKeys):' || errMsg);
            RAISE;
    END CaptureForeignKeys;

    PROCEDURE CaptureChecks IS 
        errMsg VARCHAR2(4000);
        clbNativeSql CLOB := TO_CLOB(' ');
        tableId NUMBER;
        columnId NUMBER;
        chkUniqueId NUMBER;
        chkName VARCHAR2(512);
    BEGIN
        SetStatus('CaptureChecks');
        FOR chk IN
        (
            SELECT
                MDID,
                DATABASENAME,
                TABLENAME,
                CHECKNAME,
                CHECKTYPE,
                TABLECHECK,
                COLUMNNAME,
                CREATORNAME
            FROM
                STAGE_TERADATA_SHOWTBLCHECKS
        )
        LOOP
--            SetStatus('CaptureChecks: 1:');
            IF chk.COLUMNNAME IS NOT NULL THEN
                IF (TABLEIDS.EXISTS(TRIM(chk.DATABASENAME) || '.' || TRIM(chk.TABLENAME))) THEN
                    tableId := TABLEIDS(TRIM(chk.DATABASENAME) || '.' || TRIM(chk.TABLENAME));
                    columnId := COLUMNIDS(TRIM(chk.DATABASENAME) || '.' || TRIM(chk.TABLENAME) || '.' || TRIM(chk.COLUMNNAME));
                    IF (chk.CHECKNAME IS NULL) THEN
                        IF (CHECKIDS.EXISTS(chk.TABLECHECK)) THEN
                            chkUniqueId := CHECKIDS(chk.TABLECHECK);
                        ELSE
                            chkUniqueId := uniqueId;
                            uniqueId := uniqueId + 1;
                            CHECKIDS(chk.TABLECHECK) := chkUniqueId;
                        END IF;
                        chkName := chk.TABLENAME || '_C' || chkUniqueId;
                    ELSE
                        chkName := chk.CHECKNAME;
                    END IF;
                    INSERT
                        INTO MD_CONSTRAINTS (ID, NAME, CONSTRAINT_TYPE, TABLE_ID_FK, "LANGUAGE")
                        VALUES (chk.MDID, chkName, 'CHECK', tableId, 'TERADATALANG');
                    CONSTRAINTIDS(TRIM(chk.DATABASENAME) || '.' || TRIM(chk.TABLENAME) || '.' || TRIM(chkName)) := chk.MDID;
                    INSERT
                        INTO MD_ADDITIONAL_PROPERTIES(connection_id_fk, ref_id_fk, ref_type, property_order, prop_key, "VALUE")
                        VALUES(nSvrId, chk.MDID, 'MD_CONSTRAINTS', 1, 'TERADATA_CHECKCONSTRAINT', 'needconverting');
                    INSERT
                        INTO MD_CONSTRAINT_DETAILS(id, constraint_id_fk, column_id_fk, detail_order, constraint_text)
                        VALUES(MD_META.get_next_id, chk.mdid, columnId, 1, TO_CLOB(REGEXP_SUBSTR(chk.TABLECHECK, '\((.)*\)', 1, 1, 'i')));
                        -- SetStatus('CaptureChecks: ' || TRIM(chk.DATABASENAME) || '.' || TRIM(chk.TABLENAME) || '.' || TRIM(chkName) || ' - ' || CONSTRAINTIDS(TRIM(chk.DATABASENAME) || '.' || TRIM(chk.TABLENAME) || '.' || TRIM(chkName)));
                END IF;
            END IF;
        END LOOP;
    EXCEPTION 
        WHEN OTHERS THEN
            errMsg := SQLERRM;  
            --DBMS_OUTPUT.put_line('Exception:' || errMsg);
            RAISE;
    END CaptureChecks;

    PROCEDURE CaptureConstraints IS
    BEGIN
        CapturePrimaryKeys;
        CaptureForeignKeys;
        CaptureChecks;
    END CaptureConstraints;

    PROCEDURE CaptureStoredPrograms IS
        errMsg VARCHAR2(4000);
        clbNativeSql CLOB := TO_CLOB(' ');
    BEGIN
        SetStatus('CaptureStoredPrograms');
        FOR proc IN
        (
            SELECT
                MDID,
                DATABASENAME,
                PROCNAME,
                PROCTYPE,
                REQUESTTEXT,
                COMMENTSTRING
            FROM STAGE_TERADATA_PROCEDURES
        )
        LOOP
            SetStatus('STORED PROGRAM:' || proc.DATABASENAME || '.' || proc.PROCNAME);
            IF (proc.PROCTYPE = 'E') THEN
                NULL;
            END IF;
        END LOOP;
    EXCEPTION 
        WHEN OTHERS THEN
            errMsg := SQLERRM;  
            --DBMS_OUTPUT.put_line('Exception:' || errMsg);
            RAISE;
    END CaptureStoredPrograms;

    PROCEDURE CaptureTriggers IS
        errMsg VARCHAR2(4000);
        tableOrViewId NUMBER;
        tableOrView CHAR(1);
    BEGIN
        SetStatus('CaptureTriggers');
        FOR trig IN
        (
            SELECT
                MDID,
                DATABASENAME,
                SUBJECTTABLEDATABASENAME,
                TABLENAME,
                TRIGGERNAME,
                ENABLEDFLAG,
                EVENT,
                KIND,
                ORDERNUMBER,
                TRIGGERCOMMENT,
                REQUESTTEXT,
                CREATORNAME
            FROM
                STAGE_TERADATA_TRIGGERS
            ORDER BY
                SUBJECTTABLEDATABASENAME,
                TABLENAME,
                TRIGGERNAME
        )
        LOOP
            tableOrViewId := NULL;
            IF TABLEIDS.EXISTS(TRIM(trig.SUBJECTTABLEDATABASENAME) || '.' || TRIM(trig.TABLENAME)) THEN
                tableOrViewId := TABLEIDS(TRIM(trig.SUBJECTTABLEDATABASENAME) || '.' || TRIM(trig.TABLENAME));
                tableOrView := 'T';
            ELSE
                IF VIEWIDS.EXISTS(TRIM(trig.SUBJECTTABLEDATABASENAME) || '.' || TRIM(trig.TABLENAME)) THEN
                    tableOrViewId := VIEWIDS(TRIM(trig.SUBJECTTABLEDATABASENAME) || '.' || TRIM(trig.TABLENAME));
                    tableOrView := 'V';
                END IF;
            END IF;
            IF tableOrViewId IS NOT NULL THEN
                INSERT
                    INTO MD_TRIGGERS(id, table_or_view_id_fk, trigger_on_flag, trigger_name, comments, native_sql, "LANGUAGE")
                    VALUES(trig.MDID, tableOrViewId, tableOrView, trig.TRIGGERNAME, trig.TRIGGERCOMMENT, TO_CLOB(trig.REQUESTTEXT), 'TERADATALANG');
            END IF;
        END LOOP;
    EXCEPTION 
        WHEN OTHERS THEN
            errMsg := SQLERRM;  
            --DBMS_OUTPUT.put_line('Exception(CaptureTriggers):' || errMsg);
            RAISE;
    END CaptureTriggers;

    PROCEDURE CaptureUDT IS
        errMsg VARCHAR2(4000);
        typeId NUMBER;
        sysUDTLibId NUMBER;
        typeName VARCHAR2(270 CHAR);
        nativeSql CLOB := NULL;
        nativeSqlPiece VARCHAR2(4000);
        fieldCount NUMBER := 0;
    BEGIN
        SetStatus('CaptureUDT');
        typeId := NULL;
        typeName := NULL;
        IF NOT DATABASEIDS.EXISTS('SYSUDTLIB') THEN
            sysUDTLibId := MD_META.get_next_id;
            INSERT
                INTO md_schemas("ID", "CATALOG_ID_FK", "NAME")
                VALUES ( sysUDTLibId, nDummyCatalogId, 'SYSUDTLIB' );
            DATABASEIDS('SYSUDTLIB') := sysUDTLibId;
        ELSE
            sysUDTLibId := DATABASEIDS('SYSUDTLIB');
        END IF;
        FOR field IN
        (
            SELECT
                "MDID",
                "TYPEKIND",
                "TYPENAME",
                "FIELDNAME",
                "FIELDID",
                "FIELDTYPE",
                "UDTNAME",
                "CHARTYPE",
                "MAXLENGTH",
                "DECIMALTOTALDIGITS",
                "DECIMALFRACTIONALDIGITS",
                "INSTANTIABLE",
                "FINAL"
            FROM
                STAGE_TERADATA_UDTS
            ORDER BY
                TYPENAME,
                FIELDID
        )
        LOOP
            IF (typeName IS NULL OR typeName <> field.TYPENAME) THEN
                if (typeName IS NOT NULL) THEN
                    -- write out TYPE
                    DBMS_LOB.writeappend(nativeSql, 2, ') ');
                    IF (field.INSTANTIABLE = 'Y') THEN
                        DBMS_LOB.writeappend(nativeSql, 13, 'INSTANTIABLE ');
                    END IF;
                    IF (field.FINAL <> 'Y') THEN
                        DBMS_LOB.writeappend(nativeSql, 4, 'NOT ');
                    END IF;
                    DBMS_LOB.writeappend(nativeSql, 5, 'FINAL');
                    INSERT INTO MD_USER_DEFINED_DATA_TYPES
                    (
                        SCHEMA_ID_FK,
                        DATA_TYPE_NAME,
                        DEFINITION,
                        NATIVE_SQL,
                        NATIVE_KEY,
                        COMMENTS,
                        SECURITY_GROUP_ID,
                        CREATED_ON,
                        CREATED_BY,
                        LAST_UPDATED_ON,
                        LAST_UPDATED_BY
                    )
                    VALUES
                    (
                        sysUDTLibId,
                        typeName,
                        ' <UDT> ',
                        nativeSql,
                        '0',
                        NULL,
                        0,
                        SYSDATE,
                        NULL,
                        NULL,
                        NULL
                    );
                END IF;
                fieldCount := 0;
                typeName := field.TYPENAME;
                nativeSql := TO_CLOB('CREATE TYPE ' || typeName || ' AS ');
                typeId := field.MDID;
                IF (field.TYPEKIND = 'S') THEN
                    DBMS_LOB.writeappend(nativeSql, 2, '( ');
                END IF;
            END IF;
            fieldCount := fieldCount + 1;
            IF (field.TYPEKIND = 'D') THEN
                nativeSqlPiece := getTypeName(field.FIELDTYPE, field.CHARTYPE, field.UDTNAME) || ' ';
            END IF;
            IF (field.TYPEKIND = 'S') THEN
                nativeSqlPiece := field.FIELDNAME || ' ' || getTypeName(field.FIELDTYPE, field.CHARTYPE, field.UDTNAME) || ' ';
                IF (fieldCount > 1) THEN
                    nativeSqlPiece := ', ' || nativeSqlPiece;
                END IF;
            END IF;
            DBMS_LOB.writeappend(nativeSql, LENGTH(nativeSqlPiece), nativeSqlPiece);
            IF (field.TYPEKIND = 'D') THEN
                IF (field.INSTANTIABLE = 'Y') THEN
                    DBMS_LOB.writeappend(nativeSql, 13, 'INSTANTIABLE ');
                END IF;
                IF (field.FINAL <> 'Y') THEN
                    DBMS_LOB.writeappend(nativeSql, 4, 'NOT ');
                END IF;
                DBMS_LOB.writeappend(nativeSql, 5, 'FINAL');
                INSERT INTO MD_USER_DEFINED_DATA_TYPES
                (
                    SCHEMA_ID_FK,
                    DATA_TYPE_NAME,
                    DEFINITION,
                    NATIVE_SQL,
                    NATIVE_KEY,
                    COMMENTS,
                    SECURITY_GROUP_ID,
                    CREATED_ON,
                    CREATED_BY,
                    LAST_UPDATED_ON,
                    LAST_UPDATED_BY
                )
                VALUES
                (
                    sysUDTLibId,
                    typeName,
                    ' ',
                    nativeSql,
                    '0',
                    NULL,
                    0,
                    SYSDATE,
                    NULL,
                    NULL,
                    NULL
                );
                typeName := NULL;
            END IF;
        END LOOP;
    EXCEPTION 
        WHEN OTHERS THEN
            errMsg := SQLERRM;  
            DBMS_OUTPUT.put_line('Exception(CaptureUDT):' || errMsg);
            RAISE;
    END CaptureUDT;

    PROCEDURE CapturePartitionInfo IS
        errMsg VARCHAR2(4000);
        tableId NUMBER;
    BEGIN
        SetStatus('CapturePartitionInfo');
        FOR partExp IN
        (
            SELECT
                MDID,
                DATABASENAME,
                TABLENAME,
                IndexName,
                IndexNumber,
                CONSTRAINTTYPE,
                CONSTRAINTTEXT
            FROM
                STAGE_TERADATA_IDXCONSTRAINTS
        )
        LOOP
            IF (partExp.CONSTRAINTTYPE = 'Q') THEN
                IF TABLEIDS.EXISTS(TRIM(partExp.DATABASENAME) || '.' || TRIM(partExp.TABLENAME)) THEN
                    tableId := TABLEIDS(TRIM(partExp.DATABASENAME) || '.' || TRIM(partExp.TABLENAME));
                    INSERT
                        INTO md_partitions
                        (
                            id,
                            table_id_fk,
                            native_sql
                        )
                        VALUES
                        (
                            partExp.MDID,
                            tableId,
                            partExp.CONSTRAINTTEXT
                        );
                END IF;
            END IF;
        END LOOP;
    EXCEPTION 
        WHEN OTHERS THEN
            errMsg := SQLERRM;  
            --DBMS_OUTPUT.put_line('Exception:' || errMsg);
            RAISE;
    END CapturePartitionInfo;

   PROCEDURE CaptureEntireStage IS
    BEGIN
        CaptureConnections;
        COMMIT;
        CaptureDatabases;
        COMMIT;
        CaptureSchemas;
        COMMIT;
        CaptureTablesAndViews;
        COMMIT;
        CaptureColumns;
        COMMIT;
        CaptureConstraints;
        COMMIT;
        CaptureIndexes;
        COMMIT;
        CaptureStoredPrograms;
        COMMIT;
        CaptureTriggers;
        COMMIT;
        CaptureUDT;
        COMMIT;
        CapturePartitionInfo;
        COMMIT;
    END CaptureEntireStage;

    PROCEDURE RegisterPlugin IS
    BEGIN
        INSERT
        INTO md_additional_properties
        (
            connection_id_fk,
            ref_id_fk,
            ref_type,
            property_order,
            prop_key,
            "VALUE"
        )
        VALUES
        (
            nSvrId,
            nSvrId,
            'MD_CONNECTIONS',
            0,
            'PLUGIN_ID',
            pluginClass
        );
        COMMIT;
    END;

    PROCEDURE initialise IS
    BEGIN
        DATABASEIDS.DELETE;
        TABLEIDS.DELETE;
        VIEWIDS.DELETE;
        COLUMNIDS.DELETE;
        CONSTRAINTIDS.DELETE;
        PKEYIDS.DELETE;
        CHECKIDS.DELETE;
        UDTNAMEMAP.DELETE;
        PKEYNAMEMAP.DELETE;
        logLine := 1;
        uniqueId := 1;
        registerUDTs;
    END INITIALISE;

    FUNCTION StageCapture(p_projectId NUMBER,
                          p_pluginClassIn varchar2,
                          p_jExists BOOLEAN := FALSE,
                          p_scratchModel BOOLEAN := FALSE) RETURN VARCHAR2 IS
        ret_val NAME_AND_COUNT_ARRAY;
        scratchConnId NUMBER :=0;
        connectionStatsResult NUMBER;
        errmsg VARCHAR(4000);
    BEGIN
        delete from STAGE_TERADATA_LOG;
        -- initialise globals
        initialise;
        -- save parameters
        nProjectId := p_projectId;
        projectExist := p_jExists;
        pluginClass := p_pluginClassIn;
        -- NOTE that nSvrId is the capture connection id (with a really bad name)
        SELECT svrid into nSvrId FROM STAGE_SERVERDETAIL WHERE project_id = nProjectId;

        -- Initialize the log status table
        INSERT INTO
            migrlog(parent_log_id, log_date, severity, logtext, phase, ref_object_id, ref_object_type, connection_id_fk) 
            VALUES (NULL, systimestamp, 666, 'Capture Started', 'CAPTURE', NULL, NULL, p_projectId);
        COMMIT;          

        SetStatus('Capture processing started');          

        --DisableRepositoryTriggers;      
        SetStatus('Disabled Triggers');
        CaptureEntireStage;
        SetStatus('CapturedEntireStage completed');
        COMMIT;
        RegisterPlugin;
        --EnableRepositoryTriggers;
        MIGRATION.POPULATE_DERIVATIVES_TABLE(nSvrId); --new identifier mapping setup
        COMMIT;      
        SetStatus('Finished');          

        RETURN '' || nSvrId || '/' || scratchConnId;
    EXCEPTION
        WHEN OTHERS THEN
            errMsg := SQLERRM;
            --DBMS_OUTPUT.put_line('Exception:' || errMsg);
            SetStatus('Ex:' || errMsg);          
            --EnableRepositoryTriggers;
            RAISE;
    END StageCapture;

    PROCEDURE SetStatus(msg VARCHAR2, sev NUMBER := 666) IS
    BEGIN
        --dbms_output.put_line(msg);
        --commit;
        --progressStatus := msg;
        --dbms_lock.sleep(2);
        --insert into STAGE_TERADATA_LOG (LINE, LOGSTRING) VALUES (logLine, msg);
        logLine := logLine + 1;
        UPDATE migrlog SET logtext = msg,
            log_date = systimestamp
        WHERE
            severity = 666 
            AND phase = 'CAPTURE'
            AND connection_id_fk = nProjectId;                   
        COMMIT;
    END SetStatus;  

    FUNCTION GetStatus(iid INTEGER) RETURN varchar2 IS
        status VARCHAR2(4000);
        errMsg VARCHAR2(2000);
    BEGIN
        SELECT logtext INTO status FROM migrlog WHERE severity = 666 AND phase = 'CAPTURE' AND connection_id_fk = iid;    
        RETURN status; 
    EXCEPTION 
        WHEN OTHERS THEN
            errMsg := SQLERRM;  
            --dbms_output.put_line('Status Message : ' || errMsg);
    END GetStatus;
END TDALLPLATFORM;

/


PROMPT Completed TDALLPLATFORM.sql
PROMPT


-- ============================================================================
-- PHASE: Deploy TRIGGERS (293 files)
-- ============================================================================

PROMPT
PROMPT ============================================================================
PROMPT Deploying TRIGGERS (293 files)
PROMPT ============================================================================
PROMPT


-- ============================================================================
-- Deploy: DDDD.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying DDDD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger DDDD
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."DDDD" BEFORE INSERT ON "DB_JT"."KP_DAT_DOKLAD" FOR EACH ROW DECLARE
tmpVar NUMBER;
BEGIN
/*
	 if ( :old.id_ktgUcetniSpolecnost = 1031 and :old.nl_krok < 100 and :old.id_subkonsolidace = 1031 ) then
	 	raise_application_error ( -20003, 'nesmi mazat' );
	 end if;

	 if ( :old.id in ( 161274, 161275 ) ) then
	 	raise_application_error ( -20003, 'nesmi mazat id' );
	 end if;
	 */
	 if ( :new.nl_krok = 300 and :new.id_ktgUcetniSpolecnost = 5000 ) then
	 	raise_application_error ( -20003, 'nesmi mazat id' );
	 end if;

	 
END ;



/
ALTER TRIGGER "DB_JT"."DDDD" DISABLE;


PROMPT Completed DDDD.sql
PROMPT


-- ============================================================================
-- Deploy: DEL_MD_TRIGGERS_T_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying DEL_MD_TRIGGERS_T_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger DEL_MD_TRIGGERS_T_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."DEL_MD_TRIGGERS_T_TRG" AFTER DELETE ON MD_TABLES 
FOR EACH ROW 
BEGIN
  DELETE FROM MD_TRIGGERS WHERE MD_TRIGGERS.TABLE_OR_VIEW_ID_FK = :OLD.ID AND MD_TRIGGERS.TRIGGER_ON_FLAG = 'T';
END;

/
ALTER TRIGGER "DB_JT"."DEL_MD_TRIGGERS_T_TRG" ENABLE;


PROMPT Completed DEL_MD_TRIGGERS_T_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: DEL_MD_TRIGGERS_V_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying DEL_MD_TRIGGERS_V_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger DEL_MD_TRIGGERS_V_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."DEL_MD_TRIGGERS_V_TRG" AFTER DELETE ON MD_VIEWS
FOR EACH ROW 
BEGIN
  DELETE FROM MD_TRIGGERS WHERE MD_TRIGGERS.TABLE_OR_VIEW_ID_FK = :OLD.ID AND MD_TRIGGERS.TRIGGER_ON_FLAG = 'V';
END;

/
ALTER TRIGGER "DB_JT"."DEL_MD_TRIGGERS_V_TRG" ENABLE;


PROMPT Completed DEL_MD_TRIGGERS_V_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: GENCOLUMNKEYTRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying GENCOLUMNKEYTRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger GENCOLUMNKEYTRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."GENCOLUMNKEYTRIG" 
					BEFORE INSERT ON stage_syb12_syscolumns
					FOR EACH ROW 
					BEGIN
					  IF :new.colid_gen is null THEN
					     :new.colid_gen := MD_META.get_next_id;
					  END IF;
					END GenColumnKeyTrig;

/
ALTER TRIGGER "DB_JT"."GENCOLUMNKEYTRIG" ENABLE;


PROMPT Completed GENCOLUMNKEYTRIG.sql
PROMPT


-- ============================================================================
-- Deploy: GENCONNKEYTRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying GENCONNKEYTRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger GENCONNKEYTRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."GENCONNKEYTRIG" 
					BEFORE INSERT ON stage_serverdetail 
					FOR EACH ROW 
					BEGIN
					  IF :new.project_id is null THEN
					     :new.project_id := MD_META.get_next_id;
					  END IF;
					  IF :new.svrid is null THEN
					     :new.svrid := MD_META.get_next_id;     
					  END IF;    
					END GenConnKeyTrig;

/
ALTER TRIGGER "DB_JT"."GENCONNKEYTRIG" ENABLE;


PROMPT Completed GENCONNKEYTRIG.sql
PROMPT


-- ============================================================================
-- Deploy: GENDBKEYTRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying GENDBKEYTRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger GENDBKEYTRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."GENDBKEYTRIG" 
					BEFORE INSERT ON stage_syb12_sysdatabases 
					FOR EACH ROW 
					BEGIN
					  IF :new.dbid_gen is null THEN
					     :new.dbid_gen := MD_META.get_next_id;
					  END IF;
					END GenDbKeyTrig;

/
ALTER TRIGGER "DB_JT"."GENDBKEYTRIG" ENABLE;


PROMPT Completed GENDBKEYTRIG.sql
PROMPT


-- ============================================================================
-- Deploy: GENINDEXKEYTRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying GENINDEXKEYTRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger GENINDEXKEYTRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."GENINDEXKEYTRIG" 
					BEFORE INSERT ON stage_syb12_sysindexes
					FOR EACH ROW 
					BEGIN
					  IF :new.indid_gen is null THEN
					     :new.indid_gen := MD_META.get_next_id;
					  END IF;
                    END GenIndexKeyTrig;

/
ALTER TRIGGER "DB_JT"."GENINDEXKEYTRIG" ENABLE;


PROMPT Completed GENINDEXKEYTRIG.sql
PROMPT


-- ============================================================================
-- Deploy: GENOBJECTKEYTRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying GENOBJECTKEYTRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger GENOBJECTKEYTRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."GENOBJECTKEYTRIG" 
					BEFORE INSERT ON stage_syb12_sysobjects
					FOR EACH ROW 
					BEGIN
					  IF :new.objid_gen is null THEN
					     :new.objid_gen := MD_META.get_next_id;
					  END IF;
					END GenObjectKeyTrig;

/
ALTER TRIGGER "DB_JT"."GENOBJECTKEYTRIG" ENABLE;


PROMPT Completed GENOBJECTKEYTRIG.sql
PROMPT


-- ============================================================================
-- Deploy: GENSCHEMAKEYTRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying GENSCHEMAKEYTRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger GENSCHEMAKEYTRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."GENSCHEMAKEYTRIG" 
					BEFORE INSERT ON stage_syb12_sysusers
					FOR EACH ROW 
					BEGIN
					  IF :new.suid_gen is null THEN
					     :new.suid_gen := MD_META.get_next_id;
					  END IF;
					END GenSchemaKeyTrig;

/
ALTER TRIGGER "DB_JT"."GENSCHEMAKEYTRIG" ENABLE;


PROMPT Completed GENSCHEMAKEYTRIG.sql
PROMPT


-- ============================================================================
-- Deploy: GENSS2K5CHKCONSTTRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying GENSS2K5CHKCONSTTRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger GENSS2K5CHKCONSTTRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."GENSS2K5CHKCONSTTRIG" BEFORE
  INSERT ON STAGE_SS2K5_TABLES FOR EACH ROW BEGIN IF :new.objid_gen IS NULL THEN :new.objid_gen := MD_META.get_next_id;
END IF;
END Genss2k5ChkConstTrig;

/
ALTER TRIGGER "DB_JT"."GENSS2K5CHKCONSTTRIG" ENABLE;


PROMPT Completed GENSS2K5CHKCONSTTRIG.sql
PROMPT


-- ============================================================================
-- Deploy: GENSS2K5COLUMNKEYTRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying GENSS2K5COLUMNKEYTRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger GENSS2K5COLUMNKEYTRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."GENSS2K5COLUMNKEYTRIG" BEFORE
  INSERT ON STAGE_SS2K5_COLUMNS FOR EACH ROW BEGIN IF :new.colid_gen IS NULL THEN :new.colid_gen := MD_META.get_next_id;
END IF;
END Genss2k5ColumnKeyTrig;

/
ALTER TRIGGER "DB_JT"."GENSS2K5COLUMNKEYTRIG" ENABLE;


PROMPT Completed GENSS2K5COLUMNKEYTRIG.sql
PROMPT


-- ============================================================================
-- Deploy: GENSS2K5DATABASEPRINCIPALTRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying GENSS2K5DATABASEPRINCIPALTRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger GENSS2K5DATABASEPRINCIPALTRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."GENSS2K5DATABASEPRINCIPALTRIG" BEFORE
  INSERT ON STAGE_SS2K5_DB_PRINCIPALS FOR EACH ROW BEGIN IF :new.prinid_gen IS NULL THEN :new.prinid_gen := MD_META.get_next_id;
END IF;
END Genss2k5DatabasePrincipalTrig;

/
ALTER TRIGGER "DB_JT"."GENSS2K5DATABASEPRINCIPALTRIG" ENABLE;


PROMPT Completed GENSS2K5DATABASEPRINCIPALTRIG.sql
PROMPT


-- ============================================================================
-- Deploy: GENSS2K5DB2KEYTRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying GENSS2K5DB2KEYTRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger GENSS2K5DB2KEYTRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."GENSS2K5DB2KEYTRIG" BEFORE
  INSERT ON STAGE_SS2K5_DATABASES FOR EACH ROW BEGIN IF :new.dbid_gen IS NULL THEN :new.dbid_gen := MD_META.get_next_id;
END IF;
END Genss2k5Db2KeyTrig;

/
ALTER TRIGGER "DB_JT"."GENSS2K5DB2KEYTRIG" ENABLE;


PROMPT Completed GENSS2K5DB2KEYTRIG.sql
PROMPT


-- ============================================================================
-- Deploy: GENSS2K5DEFCONSTTRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying GENSS2K5DEFCONSTTRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger GENSS2K5DEFCONSTTRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."GENSS2K5DEFCONSTTRIG" BEFORE
  INSERT ON STAGE_SS2K5_DT_CONSTRAINTS FOR EACH ROW BEGIN IF :new.OBJID_GEN IS NULL THEN :new.OBJID_GEN := MD_META.get_next_id;
END IF;
END Genss2k5DefConstTrig;

/
ALTER TRIGGER "DB_JT"."GENSS2K5DEFCONSTTRIG" ENABLE;


PROMPT Completed GENSS2K5DEFCONSTTRIG.sql
PROMPT


-- ============================================================================
-- Deploy: GENSS2K5FORKEYRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying GENSS2K5FORKEYRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger GENSS2K5FORKEYRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."GENSS2K5FORKEYRIG" BEFORE
  INSERT ON STAGE_SS2K5_FN_KEYS FOR EACH ROW BEGIN IF :new.OBJECT_ID_gen IS NULL THEN :new.OBJECT_ID_gen := MD_META.get_next_id;
END IF;
END Genss2k5ForKeyTrig;

/
ALTER TRIGGER "DB_JT"."GENSS2K5FORKEYRIG" ENABLE;


PROMPT Completed GENSS2K5FORKEYRIG.sql
PROMPT


-- ============================================================================
-- Deploy: GENSS2K5IDENTCOLRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying GENSS2K5IDENTCOLRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger GENSS2K5IDENTCOLRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."GENSS2K5IDENTCOLRIG" BEFORE
  INSERT ON STAGE_SS2K5_IDENTITY_COLUMNS FOR EACH ROW BEGIN IF :new.OBJECT_ID_gen IS NULL THEN :new.OBJECT_ID_gen := MD_META.get_next_id;
END IF;
END Genss2k5IdentColTrig;

/
ALTER TRIGGER "DB_JT"."GENSS2K5IDENTCOLRIG" ENABLE;


PROMPT Completed GENSS2K5IDENTCOLRIG.sql
PROMPT


-- ============================================================================
-- Deploy: GENSS2K5INDEXTRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying GENSS2K5INDEXTRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger GENSS2K5INDEXTRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."GENSS2K5INDEXTRIG" BEFORE
  INSERT ON STAGE_SS2K5_INDEXES FOR EACH ROW BEGIN IF :new.object_id_gen IS NULL THEN :new.object_id_gen := MD_META.get_next_id;
END IF;
END Genss2k5IndexTrig;

/
ALTER TRIGGER "DB_JT"."GENSS2K5INDEXTRIG" ENABLE;


PROMPT Completed GENSS2K5INDEXTRIG.sql
PROMPT


-- ============================================================================
-- Deploy: GENSS2K5OBJECTKEYTRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying GENSS2K5OBJECTKEYTRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger GENSS2K5OBJECTKEYTRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."GENSS2K5OBJECTKEYTRIG" BEFORE
  INSERT ON STAGE_SS2K5_OBJECTS FOR EACH ROW BEGIN IF :new.objid_gen IS NULL THEN :new.objid_gen := MD_META.get_next_id;
END IF;
END Genss2k5ObjectKeyTrig;

/
ALTER TRIGGER "DB_JT"."GENSS2K5OBJECTKEYTRIG" ENABLE;


PROMPT Completed GENSS2K5OBJECTKEYTRIG.sql
PROMPT


-- ============================================================================
-- Deploy: GENSS2K5SCHEMAKEYTRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying GENSS2K5SCHEMAKEYTRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger GENSS2K5SCHEMAKEYTRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."GENSS2K5SCHEMAKEYTRIG" BEFORE
  INSERT ON STAGE_SS2K5_SCHEMAS FOR EACH ROW BEGIN IF :new.suid_gen IS NULL THEN :new.suid_gen := MD_META.get_next_id;
END IF;
END Genss2k5SchemaKeyTrig;

/
ALTER TRIGGER "DB_JT"."GENSS2K5SCHEMAKEYTRIG" ENABLE;


PROMPT Completed GENSS2K5SCHEMAKEYTRIG.sql
PROMPT


-- ============================================================================
-- Deploy: GENSS2K5SCHEMATAKEYTRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying GENSS2K5SCHEMATAKEYTRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger GENSS2K5SCHEMATAKEYTRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."GENSS2K5SCHEMATAKEYTRIG" BEFORE
  INSERT ON STAGE_SS2K5_SCHEMATA FOR EACH ROW BEGIN IF :new.suid_gen IS NULL THEN :new.suid_gen := MD_META.get_next_id;
END IF;
END Genss2k5SchemayaKeyTrig;

/
ALTER TRIGGER "DB_JT"."GENSS2K5SCHEMATAKEYTRIG" ENABLE;


PROMPT Completed GENSS2K5SCHEMATAKEYTRIG.sql
PROMPT


-- ============================================================================
-- Deploy: GENSS2K5SQLMODTRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying GENSS2K5SQLMODTRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger GENSS2K5SQLMODTRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."GENSS2K5SQLMODTRIG" BEFORE
  INSERT ON STAGE_SS2K5_SQL_MODULES FOR EACH ROW BEGIN IF :new.OBJID_GEN IS NULL THEN :new.OBJID_GEN := MD_META.get_next_id;
END IF;
END Genss2k5SqlModTrig;

/
ALTER TRIGGER "DB_JT"."GENSS2K5SQLMODTRIG" ENABLE;


PROMPT Completed GENSS2K5SQLMODTRIG.sql
PROMPT


-- ============================================================================
-- Deploy: GENSS2K5SQLTABTRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying GENSS2K5SQLTABTRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger GENSS2K5SQLTABTRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."GENSS2K5SQLTABTRIG" BEFORE
  INSERT ON STAGE_SS2K5_SQL_MODULES FOR EACH ROW BEGIN IF :new.OBJID_GEN IS NULL THEN :new.OBJID_GEN := MD_META.get_next_id;
END IF;
END Genss2k5SqlTabTrig;

/
ALTER TRIGGER "DB_JT"."GENSS2K5SQLTABTRIG" ENABLE;


PROMPT Completed GENSS2K5SQLTABTRIG.sql
PROMPT


-- ============================================================================
-- Deploy: INS_APPLICATIONFILE_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying INS_APPLICATIONFILE_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger INS_APPLICATIONFILE_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."INS_APPLICATIONFILE_TRG" BEFORE INSERT OR UPDATE ON MD_APPLICATIONFILES
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."INS_APPLICATIONFILE_TRG" ENABLE;


PROMPT Completed INS_APPLICATIONFILE_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: INS_APPLICATION_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying INS_APPLICATION_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger INS_APPLICATION_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."INS_APPLICATION_TRG" BEFORE INSERT OR UPDATE ON MD_APPLICATIONS
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."INS_APPLICATION_TRG" ENABLE;


PROMPT Completed INS_APPLICATION_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: INS_FILE_ARTIFACT_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying INS_FILE_ARTIFACT_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger INS_FILE_ARTIFACT_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."INS_FILE_ARTIFACT_TRG" BEFORE INSERT OR UPDATE ON MD_FILE_ARTIFACTS
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."INS_FILE_ARTIFACT_TRG" ENABLE;


PROMPT Completed INS_FILE_ARTIFACT_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_ADDITIONAL_PROPERTY_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_ADDITIONAL_PROPERTY_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_ADDITIONAL_PROPERTY_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_ADDITIONAL_PROPERTY_TRG" BEFORE INSERT OR UPDATE ON MD_ADDITIONAL_PROPERTIES 
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_ADDITIONAL_PROPERTY_TRG" ENABLE;


PROMPT Completed MD_ADDITIONAL_PROPERTY_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_CATALOGS_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_CATALOGS_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_CATALOGS_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_CATALOGS_TRG" BEFORE INSERT OR UPDATE ON MD_CATALOGS
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_CATALOGS_TRG" ENABLE;


PROMPT Completed MD_CATALOGS_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_COLUMNS_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_COLUMNS_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_COLUMNS_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_COLUMNS_TRG" BEFORE INSERT OR UPDATE ON MD_COLUMNS
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_COLUMNS_TRG" ENABLE;


PROMPT Completed MD_COLUMNS_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_CONNECTIONS_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_CONNECTIONS_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_CONNECTIONS_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_CONNECTIONS_TRG" BEFORE INSERT OR UPDATE ON MD_CONNECTIONS
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_CONNECTIONS_TRG" ENABLE;


PROMPT Completed MD_CONNECTIONS_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_CONSTRAINTS_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_CONSTRAINTS_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_CONSTRAINTS_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_CONSTRAINTS_TRG" BEFORE INSERT OR UPDATE ON MD_CONSTRAINTS
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_CONSTRAINTS_TRG" ENABLE;


PROMPT Completed MD_CONSTRAINTS_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_CONSTRAINT_DETAILS_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_CONSTRAINT_DETAILS_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_CONSTRAINT_DETAILS_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_CONSTRAINT_DETAILS_TRG" BEFORE INSERT OR UPDATE ON MD_CONSTRAINT_DETAILS
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_CONSTRAINT_DETAILS_TRG" ENABLE;


PROMPT Completed MD_CONSTRAINT_DETAILS_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_DERIVATIVES_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_DERIVATIVES_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_DERIVATIVES_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_DERIVATIVES_TRG" BEFORE INSERT OR UPDATE ON MD_DERIVATIVES
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_DERIVATIVES_TRG" ENABLE;


PROMPT Completed MD_DERIVATIVES_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_GROUPS_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_GROUPS_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_GROUPS_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_GROUPS_TRG" BEFORE INSERT OR UPDATE ON MD_GROUPS
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_GROUPS_TRG" ENABLE;


PROMPT Completed MD_GROUPS_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_GROUP_MEMBERS_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_GROUP_MEMBERS_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_GROUP_MEMBERS_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_GROUP_MEMBERS_TRG" BEFORE INSERT OR UPDATE ON MD_GROUP_MEMBERS
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_GROUP_MEMBERS_TRG" ENABLE;


PROMPT Completed MD_GROUP_MEMBERS_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_GROUP_PRIVILEGES_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_GROUP_PRIVILEGES_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_GROUP_PRIVILEGES_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_GROUP_PRIVILEGES_TRG" BEFORE INSERT OR UPDATE ON MD_GROUP_PRIVILEGES
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_GROUP_PRIVILEGES_TRG" ENABLE;


PROMPT Completed MD_GROUP_PRIVILEGES_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_INDEXES_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_INDEXES_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_INDEXES_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_INDEXES_TRG" BEFORE INSERT OR UPDATE ON MD_INDEXES
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_INDEXES_TRG" ENABLE;


PROMPT Completed MD_INDEXES_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_INDEX_DETAILS_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_INDEX_DETAILS_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_INDEX_DETAILS_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_INDEX_DETAILS_TRG" BEFORE INSERT OR UPDATE ON MD_INDEX_DETAILS
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_INDEX_DETAILS_TRG" ENABLE;


PROMPT Completed MD_INDEX_DETAILS_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_MIGR_DEPENDENCY_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_MIGR_DEPENDENCY_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_MIGR_DEPENDENCY_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_MIGR_DEPENDENCY_TRG" BEFORE INSERT OR UPDATE ON MD_MIGR_DEPENDENCY
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_MIGR_DEPENDENCY_TRG" ENABLE;


PROMPT Completed MD_MIGR_DEPENDENCY_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_MIGR_PARAMETER_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_MIGR_PARAMETER_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_MIGR_PARAMETER_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_MIGR_PARAMETER_TRG" BEFORE INSERT OR UPDATE ON MD_MIGR_PARAMETER
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_MIGR_PARAMETER_TRG" ENABLE;


PROMPT Completed MD_MIGR_PARAMETER_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_MIGR_WEAKDEP_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_MIGR_WEAKDEP_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_MIGR_WEAKDEP_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_MIGR_WEAKDEP_TRG" BEFORE INSERT OR UPDATE ON MD_MIGR_WEAKDEP
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_MIGR_WEAKDEP_TRG" ENABLE;


PROMPT Completed MD_MIGR_WEAKDEP_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_OTHER_OBJECTS_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_OTHER_OBJECTS_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_OTHER_OBJECTS_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_OTHER_OBJECTS_TRG" BEFORE INSERT OR UPDATE ON MD_OTHER_OBJECTS
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_OTHER_OBJECTS_TRG" ENABLE;


PROMPT Completed MD_OTHER_OBJECTS_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_PACKAGES_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_PACKAGES_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_PACKAGES_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_PACKAGES_TRG" BEFORE INSERT OR UPDATE ON MD_PACKAGES
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_PACKAGES_TRG" ENABLE;


PROMPT Completed MD_PACKAGES_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_PARTITIONS_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_PARTITIONS_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_PARTITIONS_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_PARTITIONS_TRG" BEFORE INSERT OR UPDATE ON MD_PARTITIONS
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_PARTITIONS_TRG" ENABLE;


PROMPT Completed MD_PARTITIONS_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_PRIVILEGES_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_PRIVILEGES_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_PRIVILEGES_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_PRIVILEGES_TRG" BEFORE INSERT OR UPDATE ON MD_PRIVILEGES
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_PRIVILEGES_TRG" ENABLE;


PROMPT Completed MD_PRIVILEGES_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_PROJECTS_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_PROJECTS_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_PROJECTS_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_PROJECTS_TRG" BEFORE INSERT OR UPDATE ON MD_PROJECTS
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_PROJECTS_TRG" ENABLE;


PROMPT Completed MD_PROJECTS_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_SCHEMAS_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_SCHEMAS_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_SCHEMAS_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_SCHEMAS_TRG" BEFORE INSERT OR UPDATE ON MD_SCHEMAS
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_SCHEMAS_TRG" ENABLE;


PROMPT Completed MD_SCHEMAS_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_SEQUENCES_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_SEQUENCES_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_SEQUENCES_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_SEQUENCES_TRG" BEFORE INSERT OR UPDATE ON MD_SEQUENCES
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_SEQUENCES_TRG" ENABLE;


PROMPT Completed MD_SEQUENCES_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_STORED_PROGRAMS_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_STORED_PROGRAMS_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_STORED_PROGRAMS_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_STORED_PROGRAMS_TRG" BEFORE INSERT OR UPDATE ON MD_STORED_PROGRAMS
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_STORED_PROGRAMS_TRG" ENABLE;


PROMPT Completed MD_STORED_PROGRAMS_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_SYNONYMS_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_SYNONYMS_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_SYNONYMS_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_SYNONYMS_TRG" BEFORE INSERT OR UPDATE ON MD_SYNONYMS
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_SYNONYMS_TRG" ENABLE;


PROMPT Completed MD_SYNONYMS_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_TABLESPACES_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_TABLESPACES_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_TABLESPACES_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_TABLESPACES_TRG" BEFORE INSERT OR UPDATE ON MD_TABLESPACES
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_TABLESPACES_TRG" ENABLE;


PROMPT Completed MD_TABLESPACES_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_TABLES_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_TABLES_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_TABLES_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_TABLES_TRG" BEFORE INSERT OR UPDATE ON MD_TABLES
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_TABLES_TRG" ENABLE;


PROMPT Completed MD_TABLES_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_TRIGGERS_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_TRIGGERS_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_TRIGGERS_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_TRIGGERS_TRG" BEFORE INSERT OR UPDATE ON MD_TRIGGERS
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_TRIGGERS_TRG" ENABLE;


PROMPT Completed MD_TRIGGERS_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_USERS_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_USERS_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_USERS_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_USERS_TRG" BEFORE INSERT OR UPDATE ON MD_USERS
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_USERS_TRG" ENABLE;


PROMPT Completed MD_USERS_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_USER_DEFINED_DATA_TYPES_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_USER_DEFINED_DATA_TYPES_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_USER_DEFINED_DATA_TYPES_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_USER_DEFINED_DATA_TYPES_TRG" BEFORE INSERT OR UPDATE ON MD_USER_DEFINED_DATA_TYPES
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_USER_DEFINED_DATA_TYPES_TRG" ENABLE;


PROMPT Completed MD_USER_DEFINED_DATA_TYPES_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_USER_PRIVILEGES_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_USER_PRIVILEGES_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_USER_PRIVILEGES_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_USER_PRIVILEGES_TRG" BEFORE INSERT OR UPDATE ON MD_USER_PRIVILEGES
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_USER_PRIVILEGES_TRG" ENABLE;


PROMPT Completed MD_USER_PRIVILEGES_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MD_VIEWS_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MD_VIEWS_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MD_VIEWS_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MD_VIEWS_TRG" BEFORE INSERT OR UPDATE ON MD_VIEWS
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MD_VIEWS_TRG" ENABLE;


PROMPT Completed MD_VIEWS_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MIGRLOG_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MIGRLOG_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MIGRLOG_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MIGRLOG_TRG" BEFORE INSERT OR UPDATE ON MIGRLOG
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MIGRLOG_TRG" ENABLE;


PROMPT Completed MIGRLOG_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MIGR_DATATYPE_MAP_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MIGR_DATATYPE_MAP_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MIGR_DATATYPE_MAP_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MIGR_DATATYPE_MAP_TRG" BEFORE INSERT OR UPDATE ON MIGR_DATATYPE_TRANSFORM_MAP
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MIGR_DATATYPE_MAP_TRG" ENABLE;


PROMPT Completed MIGR_DATATYPE_MAP_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MIGR_DATATYPE_RULE_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MIGR_DATATYPE_RULE_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MIGR_DATATYPE_RULE_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MIGR_DATATYPE_RULE_TRG" BEFORE INSERT OR UPDATE ON MIGR_DATATYPE_TRANSFORM_RULE
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MIGR_DATATYPE_RULE_TRG" ENABLE;


PROMPT Completed MIGR_DATATYPE_RULE_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: MIGR_GENERATION_ORDER_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying MIGR_GENERATION_ORDER_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger MIGR_GENERATION_ORDER_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."MIGR_GENERATION_ORDER_TRG" BEFORE INSERT OR UPDATE ON MIGR_GENERATION_ORDER
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."MIGR_GENERATION_ORDER_TRG" ENABLE;


PROMPT Completed MIGR_GENERATION_ORDER_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: SET_ROLE_ROLE_ID.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying SET_ROLE_ROLE_ID.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger SET_ROLE_ROLE_ID
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."SET_ROLE_ROLE_ID" 
       BEFORE INSERT 
       ON role 
       FOR EACH ROW 
       BEGIN 
             SELECT role_role_id_SEQ.NEXTVAL 
             INTO :NEW.role_id 
             FROM DUAL; 
       END;

/
ALTER TRIGGER "DB_JT"."SET_ROLE_ROLE_ID" ENABLE;


PROMPT Completed SET_ROLE_ROLE_ID.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_MIGRLOG_ID_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying STAGE_MIGRLOG_ID_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger STAGE_MIGRLOG_ID_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."STAGE_MIGRLOG_ID_TRG" BEFORE INSERT OR UPDATE ON STAGE_MIGRLOG
FOR EACH ROW
BEGIN
  if inserting and :new.id is null then
        :new.id := MD_META.get_next_id;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."STAGE_MIGRLOG_ID_TRG" ENABLE;


PROMPT Completed STAGE_MIGRLOG_ID_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: STAGE_MIGRLOG_LOG_DATE_TRG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying STAGE_MIGRLOG_LOG_DATE_TRG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger STAGE_MIGRLOG_LOG_DATE_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."STAGE_MIGRLOG_LOG_DATE_TRG" BEFORE INSERT OR UPDATE ON STAGE_MIGRLOG
FOR EACH ROW
BEGIN
  if inserting and :new.log_date is null then
        :new.log_date := systimestamp;
    end if;
END;

/
ALTER TRIGGER "DB_JT"."STAGE_MIGRLOG_LOG_DATE_TRG" ENABLE;


PROMPT Completed STAGE_MIGRLOG_LOG_DATE_TRG.sql
PROMPT


-- ============================================================================
-- Deploy: TAD_KPRELSUBKONSCLEN_CLEN.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAD_KPRELSUBKONSCLEN_CLEN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAD_KPRELSUBKONSCLEN_CLEN
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAD_KPRELSUBKONSCLEN_CLEN" 
BEFORE DELETE ON KP_REL_SUBKONSOLIDACECLEN
FOR EACH ROW
begin

	delete kp_rel_subKonsolidaceClen_RP
	where
	 id_ktgSubKonsolidace = :old.id_ktgSubKonsolidace and
	 id_ktgUcetniSpolecnost = :old.id_ktgUcetniSpolecnost;
end;


/
ALTER TRIGGER "DB_JT"."TAD_KPRELSUBKONSCLEN_CLEN" ENABLE;


PROMPT Completed TAD_KPRELSUBKONSCLEN_CLEN.sql
PROMPT


-- ============================================================================
-- Deploy: TAD_KP_DAT_DOKLADFRONTA.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAD_KP_DAT_DOKLADFRONTA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAD_KP_DAT_DOKLADFRONTA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAD_KP_DAT_DOKLADFRONTA" 
after delete
ON DB_JT.KP_DAT_DOKLADFRONTA
REFERENCING NEW AS NEW OLD AS OLD
FOR EACH ROW
begin
   delete db_dsa.kp_radicImportu where id_fronta = :old.id;
end;


/
ALTER TRIGGER "DB_JT"."TAD_KP_DAT_DOKLADFRONTA" ENABLE;


PROMPT Completed TAD_KP_DAT_DOKLADFRONTA.sql
PROMPT


-- ============================================================================
-- Deploy: TAD_KP_DEFLISTBUNKAUCET.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAD_KP_DEFLISTBUNKAUCET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAD_KP_DEFLISTBUNKAUCET
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAD_KP_DEFLISTBUNKAUCET" 
after delete on KP_def_ListBunkaUcet
for each row



begin
	db_jt.kap_prim.updateIdRowDefUcet :=  :old.id;
end;



/
ALTER TRIGGER "DB_JT"."TAD_KP_DEFLISTBUNKAUCET" ENABLE;


PROMPT Completed TAD_KP_DEFLISTBUNKAUCET.sql
PROMPT


-- ============================================================================
-- Deploy: TAD_KP_DOKLAD.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAD_KP_DOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAD_KP_DOKLAD
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAD_KP_DOKLAD" AFTER DELETE ON "DB_JT"."KP_DAT_DOKLAD" FOR EACH ROW 
begin
	if ( NVL ( :old.dt_datumExportOlap, '1.1.1970' ) < '1.1.2000'  ) then
		return;
	end if;
	insert into db_kostka.ADM_DAT_DOKLAD_DELETE ( id_doklad ) values ( :old.id );
end;



/
ALTER TRIGGER "DB_JT"."TAD_KP_DOKLAD" ENABLE;


PROMPT Completed TAD_KP_DOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: TAD_KP_KTG_IFRSPRAVIDLODETAIL.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAD_KP_KTG_IFRSPRAVIDLODETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAD_KP_KTG_IFRSPRAVIDLODETAIL
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAD_KP_KTG_IFRSPRAVIDLODETAIL" 
after delete on KP_ktg_IFRSPravidloDetail
for each row



begin
	insert into KP_log_IFRSPravidloDetail (
		s_akce, id_poradi, id_poradiPodminka, id_ktgIfrsPravidlo, id_ktgUcetniSpolecnost,
		id_cisIfrsPravDetailTyp, s_poznamka, s_ucetMD, s_ucetD,
		s_mena, nd_castka, nd_castkaLocal, s_ucetZbytek, s_podminka, s_uzivatel
	) values (
		'D', :old.id_poradi, :old.id_poradiPodminka, :old.id_ktgIfrsPravidlo, :new.id_ktgUcetniSpolecnost,
		:old.id_cisIfrsPravDetailTyp, :old.s_poznamka, :old.s_ucetMD, :old.s_ucetD,
		:old.s_mena, :old.nd_castka, :old.nd_castkaLocal, :old.s_ucetZbytek, :old.s_podminka, :old.s_uzivatel
	);
	update KP_ktg_IFRSPravidlo set dt_zmenaDefiniceDetail = sysdate;
end;


/
ALTER TRIGGER "DB_JT"."TAD_KP_KTG_IFRSPRAVIDLODETAIL" ENABLE;


PROMPT Completed TAD_KP_KTG_IFRSPRAVIDLODETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: TAD_N2N_NZNCP.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAD_N2N_NZNCP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAD_N2N_NZNCP
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAD_N2N_NZNCP" 
AFTER DELETE
ON DB_JT.FC_N2N_NASTROJZAJISTENINASTCP 
REFERENCING NEW AS NEW OLD AS OLD
FOR EACH ROW
BEGIN
  insert into FC_N2N_LOGNASTROJZAJNASTCP (   ID_NASTROJ, ID_ZAJISTENI  ) values ( :old.ID_NASTROJ, :old.ID_ZAJISTENI );   
END;


/
ALTER TRIGGER "DB_JT"."TAD_N2N_NZNCP" ENABLE;


PROMPT Completed TAD_N2N_NZNCP.sql
PROMPT


-- ============================================================================
-- Deploy: TAIUD_KP_DAT_DOKLADFRONTA.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAIUD_KP_DAT_DOKLADFRONTA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAIUD_KP_DAT_DOKLADFRONTA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAIUD_KP_DAT_DOKLADFRONTA" 
AFTER INSERT OR UPDATE OR DELETE ON KP_DAT_DOKLADFRONTA
FOR EACH ROW 

DECLARE
denneVoFronte NUMBER;

BEGIN
--ak sa vlozi novy zaznam zapise sa do temp tabulky
IF (:OLD.ID is null AND :NEW.AUZIVATEL = 'denni') THEN
  INSERT INTO KP_DAT_DOKLADFRONTA_TEMP (ID, DATUM, S_STAV, AIDCISDOKLAD, AIDKROK, AIDKTGUCETNISPOLECNOST, ADATUM, AUZIVATEL) VALUES (:NEW.ID, :NEW.DATUM, :NEW.S_STAV, :NEW.AIDCISDOKLAD, :NEW.AIDKROK, :NEW.AIDKTGUCETNISPOLECNOST, :NEW.ADATUM, :NEW.AUZIVATEL);
END IF;
--ak sa zaznam zmeni zmena sa prepise do temp tabulky a zaznam sa z nej odstrani
IF (:OLD.ID IS NOT NULL) THEN
  UPDATE KP_DAT_DOKLADFRONTA_TEMP SET S_STAV=(:NEW.S_STAV) WHERE ID=(:OLD.ID);
  SELECT COUNT(1) INTO denneVoFronte FROM KP_DAT_DOKLADFRONTA_TEMP WHERE S_STAV in ('Export excel','DB chyba');
  IF (denneVoFronte > 0) THEN
    DELETE FROM KP_DAT_DOKLADFRONTA_TEMP WHERE ID=(:OLD.ID) and S_STAV in ('Export excel','DB chyba');
    SELECT COUNT(1) INTO denneVoFronte FROM KP_DAT_DOKLADFRONTA_TEMP;
    --podmienka zbehne iba ak v temp tabulke nie je ziaden zaznam
    IF denneVoFronte = 0 THEN
      APP.P_LOG_DWH(102, '', (:NEW.ADATUM));
    END IF;
  END IF;
END IF;
--ak sa zaznam odstrani z fronty odstrani sa aj z temp tabulky
IF (:NEW.ID IS NULL) THEN
  DELETE FROM KP_DAT_DOKLADFRONTA_TEMP WHERE ID = (:OLD.ID);
END IF;
END;
/
ALTER TRIGGER "DB_JT"."TAIUD_KP_DAT_DOKLADFRONTA" ENABLE;


PROMPT Completed TAIUD_KP_DAT_DOKLADFRONTA.sql
PROMPT


-- ============================================================================
-- Deploy: TAIU_KPDATMNGSEGMENTBOSSTOP.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAIU_KPDATMNGSEGMENTBOSSTOP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAIU_KPDATMNGSEGMENTBOSSTOP
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAIU_KPDATMNGSEGMENTBOSSTOP" 
after insert or update
on kp_dat_mngSegmentBoss
for each row
begin
	if (sysdate between :new.dt_platnostOd and :new.dt_platnostDo) then
		update kp_ktg_ucetniSpolecnost
		set id_mngSegmentBoss = :new.id_boss, 
		    id_topMng = :new.id_topMng
		where id_mngSegment = :new.id_mngSegment;

		update kp_ktg_projekt
		set id_mngSegmentBoss = :new.id_boss, 
		    id_top = :new.id_topMng,
			id_sponzor = :new.id_sponzor
		where id_mngSegment = :new.id_mngSegment;
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TAIU_KPDATMNGSEGMENTBOSSTOP" ENABLE;


PROMPT Completed TAIU_KPDATMNGSEGMENTBOSSTOP.sql
PROMPT


-- ============================================================================
-- Deploy: TAIU_KPKTGEVIADMINSPOL_SYNC.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAIU_KPKTGEVIADMINSPOL_SYNC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAIU_KPKTGEVIADMINSPOL_SYNC
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAIU_KPKTGEVIADMINSPOL_SYNC" 
after insert or update
on Kp_ktg_eviAdminSpolecnost
for each row



declare
begin
  if (:new.id_ktgUcetniSpolecnost is not null and
      :new.id_ktgUcetniSpolecnost > 0 and
	  :new.c_navrh <> '1') then
    update kp_ktg_ucetnispolecnost
	set s_nazev = :new.s_nazev,
        --esc 10.05 2023 ak ICO zacina x tak ICO neaktualizujeme  ( pravdepodobne je to zamerne a existuje napr EUR spolocnost so spravnym ICO 
	    --s_ico = :new.s_ico,
---esc 19.07 2024        s_ico = decode( substr(s_ico,0,1),'x',s_ico,:new.s_ico) ,
		id_administrator = :new.id_administrator
	where id = :new.id_ktgUcetniSpolecnost   
    ;
  end if;
end;
/
ALTER TRIGGER "DB_JT"."TAIU_KPKTGEVIADMINSPOL_SYNC" ENABLE;


PROMPT Completed TAIU_KPKTGEVIADMINSPOL_SYNC.sql
PROMPT


-- ============================================================================
-- Deploy: TAIU_KPKTGUCETNISPOLECNOSTLINK.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAIU_KPKTGUCETNISPOLECNOSTLINK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAIU_KPKTGUCETNISPOLECNOSTLINK
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAIU_KPKTGUCETNISPOLECNOSTLINK" 
after insert or update on kp_ktg_ucetnispolecnost_link
for each row

begin

if (sysdate between :new.dt_platnostOd and :new.dt_platnostDo and :new.s_mena is NOT null)
 then

      p_ucetnispolecnostlink ( :new.id_ktgucetnispolecnost, :new.s_mena ); 

end if;  

end;
/
ALTER TRIGGER "DB_JT"."TAIU_KPKTGUCETNISPOLECNOSTLINK" ENABLE;


PROMPT Completed TAIU_KPKTGUCETNISPOLECNOSTLINK.sql
PROMPT


-- ============================================================================
-- Deploy: TAI_DATKURZLIST.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAI_DATKURZLIST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAI_DATKURZLIST
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAI_DATKURZLIST" 
after insert on dat_kurzlist
for each row
declare
	l_datum date;
begin
	if ( :new.id_cisBanka = 1 ) then
      select NVL( dt_lastKurz, '1.1.1970') into l_datum from kp_cis_mena where id = :new.id_cisMena; 
      if ( l_datum < :new.dt_datum and :new.nd_kurz != 0 ) then
         update kp_cis_mena set dt_lastKurz = :new.dt_datum where id = :new.id_cisMena;
      end if;
	elsif ( :new.id_cisBanka = 2 ) then     
      select NVL( dt_NBS_lastKurz, '1.1.1970') into l_datum from kp_cis_mena where id = :new.id_cisMena; 
      if ( l_datum < :new.dt_datum and :new.nd_kurz != 0 ) then
         update kp_cis_mena set dt_NBS_lastKurz = :new.dt_datum where id = :new.id_cisMena;
      end if;
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TAI_DATKURZLIST" ENABLE;


PROMPT Completed TAI_DATKURZLIST.sql
PROMPT


-- ============================================================================
-- Deploy: TAI_DATKURZLISTAVG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAI_DATKURZLISTAVG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAI_DATKURZLISTAVG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAI_DATKURZLISTAVG" 
after insert on dat_kurzlistAVG
for each row
declare
	l_datum date;
begin
   
	if ( :new.id_cisBanka = 1 ) then
      select NVL( dt_lastKurzAVG, '1.1.1970') into l_datum from kp_cis_mena where id = :new.id_cisMena;
      if ( l_datum < :new.dt_datum and :new.nd_kurz != 0 ) then
         update kp_cis_mena set dt_lastKurzAVG = :new.dt_datum where id = :new.id_cisMena;
      end if;
	elsif ( :new.id_cisBanka = 2 ) then     
      select NVL( dt_NBS_lastKurzAVG, '1.1.1970') into l_datum from kp_cis_mena where id = :new.id_cisMena; 
      if ( l_datum < :new.dt_datum and :new.nd_kurz != 0 ) then
         update kp_cis_mena set dt_NBS_lastKurzAVG = :new.dt_datum where id = :new.id_cisMena;
      end if;
	end if;
   
   
end;


/
ALTER TRIGGER "DB_JT"."TAI_DATKURZLISTAVG" ENABLE;


PROMPT Completed TAI_DATKURZLISTAVG.sql
PROMPT


-- ============================================================================
-- Deploy: TAI_DW_CIS_ISIT_APLIKACE.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAI_DW_CIS_ISIT_APLIKACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAI_DW_CIS_ISIT_APLIKACE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAI_DW_CIS_ISIT_APLIKACE" AFTER
  INSERT ON DW_CIS_ISIT_APLIKACE FOR EACH ROW 
  BEGIN
  INSERT
  INTO DB_JT.DW_CIS_ISIT_SEMAFOR_SYNC
    (
      ZMENENY_CISLENIK,
      DATUM_ZMENY
    )
    VALUES
    (
      'ISIT_APLIKACE',
      sysdate
    ); 
    exception
                when others then
                                --app.p_log_autonomous('TAI_ISIT_APLIKACE_DATA err:'||'Nepodarilo se vlozit radek o zmene v tabulce ISIT_APLIKACE_DATA do DWH_CIS_ISIT_SEMAFOR_SYNC');
                                raise_application_error ( -20007,'Nepodarilo se vlozit radek o zmene v tabulce DW_CIS_ISIT_APLIKACE do DW_CIS_ISIT_SEMAFOR_SYNC');
                end;
/
ALTER TRIGGER "DB_JT"."TAI_DW_CIS_ISIT_APLIKACE" ENABLE;


PROMPT Completed TAI_DW_CIS_ISIT_APLIKACE.sql
PROMPT


-- ============================================================================
-- Deploy: TAI_DW_CIS_ISIT_DRUH_NAKLADU.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAI_DW_CIS_ISIT_DRUH_NAKLADU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAI_DW_CIS_ISIT_DRUH_NAKLADU
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAI_DW_CIS_ISIT_DRUH_NAKLADU" AFTER
  INSERT ON DW_CIS_ISIT_DRUH_NAKLADU FOR EACH ROW 
  BEGIN
  INSERT
  INTO DB_JT.DW_CIS_ISIT_SEMAFOR_SYNC
    (
      ZMENENY_CISLENIK,
      DATUM_ZMENY
    )
    VALUES
    (
      'ISIT_DRUH_NAKLADU',
      sysdate
    ); 
    exception
                when others then
                                --app.p_log_autonomous('TAI_ISIT_DRUH_NAKLADU_DATA err:'||'Nepodarilo se vlozit radek o zmene v tabulce ISIT_DRUH_NAKLADU_DATA do ISIT_SEMAFOR_SYNC');
                                raise_application_error ( -20007,'Nepodarilo se vlozit radek o zmene v tabulce DW_CIS_ISIT_DRUH_NAKLADU do DW_CIS_ISIT_SEMAFOR_SYNC');
                end;
/
ALTER TRIGGER "DB_JT"."TAI_DW_CIS_ISIT_DRUH_NAKLADU" ENABLE;


PROMPT Completed TAI_DW_CIS_ISIT_DRUH_NAKLADU.sql
PROMPT


-- ============================================================================
-- Deploy: TAI_DW_CIS_ISIT_TYP_POLOZKY.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAI_DW_CIS_ISIT_TYP_POLOZKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAI_DW_CIS_ISIT_TYP_POLOZKY
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAI_DW_CIS_ISIT_TYP_POLOZKY" AFTER
  INSERT ON DW_CIS_ISIT_TYP_POLOZKY FOR EACH ROW 
  BEGIN
  INSERT
  INTO DB_JT.DW_CIS_ISIT_SEMAFOR_SYNC
    (
      ZMENENY_CISLENIK,
      DATUM_ZMENY
    )
    VALUES
    (
      'ISIT_TYP_POLOZKY',
      sysdate
    ); 
    exception
                when others then
                                --app.p_log_autonomous('TAI_ISIT_APLIKACE_DATA err:'||'Nepodarilo se vlozit radek o zmene v tabulce ISIT_APLIKACE_DATA do DWH_CIS_ISIT_SEMAFOR_SYNC');
                                raise_application_error ( -20007,'Nepodarilo se vlozit radek o zmene v tabulce DW_CIS_ISIT_TYP_POLOZKY do DW_CIS_ISIT_SEMAFOR_SYNC');
                end;
/
ALTER TRIGGER "DB_JT"."TAI_DW_CIS_ISIT_TYP_POLOZKY" ENABLE;


PROMPT Completed TAI_DW_CIS_ISIT_TYP_POLOZKY.sql
PROMPT


-- ============================================================================
-- Deploy: TAI_DW_CIS_ISIT_TYP_SW.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAI_DW_CIS_ISIT_TYP_SW.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAI_DW_CIS_ISIT_TYP_SW
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAI_DW_CIS_ISIT_TYP_SW" AFTER
  INSERT ON DW_CIS_ISIT_TYP_SW FOR EACH ROW 
  BEGIN
  INSERT
  INTO DB_JT.DW_CIS_ISIT_SEMAFOR_SYNC
    (
      ZMENENY_CISLENIK,
      DATUM_ZMENY
    )
    VALUES
    (
      'ISIT_TYP_SW',
      sysdate
    ); 
    exception
                when others then
                                --app.p_log_autonomous('TAI_ISIT_APLIKACE_DATA err:'||'Nepodarilo se vlozit radek o zmene v tabulce ISIT_APLIKACE_DATA do DWH_CIS_ISIT_SEMAFOR_SYNC');
                                raise_application_error ( -20007,'Nepodarilo se vlozit radek o zmene v tabulce DW_CIS_ISIT_TYP_SW do DW_CIS_ISIT_SEMAFOR_SYNC');
                end;
/
ALTER TRIGGER "DB_JT"."TAI_DW_CIS_ISIT_TYP_SW" ENABLE;


PROMPT Completed TAI_DW_CIS_ISIT_TYP_SW.sql
PROMPT


-- ============================================================================
-- Deploy: TAI_IMPORT_POZICE_UM.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAI_IMPORT_POZICE_UM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAI_IMPORT_POZICE_UM
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAI_IMPORT_POZICE_UM" 
AFTER INSERT ON DB_JT.IMPORT_POZICE_UM
REFERENCING NEW AS NEW OLD AS OLD 
FOR EACH ROW 
--  WHEN ( old.C_STATUS = 0  AND new.ND_POCET_ZAZNAMU > 0 )    
  
BEGIN

db_jt.app.p_log_autonomous(trim('TAI_IMPORT_POZICE_UM - START::'||' ID_IMP='||:new.ID_IMP||' ID_KTGUCETNISPOLECNOST:'||:new.ID_KTGUCETNISPOLECNOST||' IMPORT_TYP:'||:new.IMPORT_TYP||' IMP_PLATNOST_DAT:'||:new.IMP_PLATNOST_DAT||' S_USER:'||:new.S_USER   )) ;           

  db_jt.p_import_pozice_UM(
           aIdKtgUcetniSpolecnost   =>  :new.ID_KTGUCETNISPOLECNOST --int
          ,aDatum                   =>  :new.IMP_PLATNOST_DAT       --date
          ,aTyp                     =>  :new.IMPORT_TYP             --char 
          ,aUser                    =>  :new.S_USER                 --varchar2  
          ,aID_IMPORT               =>  :new.ID_IMP
       );
    
EXCEPTION
    WHEN OTHERS then
        db_jt.app.p_log_autonomous(trim('TAI_IMPORT_POZICE_UM - ERROR::'||sqlerrm||' ID_IMP='||:new.ID_IMP)) ;           
  
END;

/
ALTER TRIGGER "DB_JT"."TAI_IMPORT_POZICE_UM" DISABLE;


PROMPT Completed TAI_IMPORT_POZICE_UM.sql
PROMPT


-- ============================================================================
-- Deploy: TAI_KPDATMANUALZDROJDAT_LOG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAI_KPDATMANUALZDROJDAT_LOG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAI_KPDATMANUALZDROJDAT_LOG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAI_KPDATMANUALZDROJDAT_LOG" 
AFTER INSERT ON KP_DAT_MANUALNIZDROJDAT
FOR EACH ROW



begin

	insert into KP_log_ManualniZdrojDat (
		s_akce, id_ManualniZdrojDat,  id_ktgUcetniSpolecnost,
		s_mena, s_ucet, nd_castkaMena, nd_castkaLocal,
		s_popis, dt_datum, id_ktgUcetniSpolecnostUnif,
		id_ktgSpolecnost, id_ktgProjekt, id_ktgOdbor, s_uzivatel, c_typ
	) values (
		'I', :new.id,  :new.id_ktgUcetniSpolecnost,
		:new.s_mena, :new.s_ucet, :new.nd_castkaMena, :new.nd_castkaLocal,
		:new.s_popis, :new.dt_datum, :new.id_ktgUcetniSpolecnostUnif,
		:new.id_ktgSpolecnost, :new.id_ktgProjekt, :new.id_ktgOdbor, :new.s_uzivatel, :new.c_typ
	);
end;

/
ALTER TRIGGER "DB_JT"."TAI_KPDATMANUALZDROJDAT_LOG" ENABLE;


PROMPT Completed TAI_KPDATMANUALZDROJDAT_LOG.sql
PROMPT


-- ============================================================================
-- Deploy: TAI_KPKARTASPOLZPRAVA_DALSI.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAI_KPKARTASPOLZPRAVA_DALSI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAI_KPKARTASPOLZPRAVA_DALSI
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAI_KPKARTASPOLZPRAVA_DALSI" 
after insert on kp_dat_kartaSpolZprava
for each row
declare
	l_zpravaDalsi date;
	l_periodaMesicu int;
begin
	select dt_zpravaDalsi, nl_periodaMesicu
	into l_zpravaDalsi, l_periodaMesicu
	from kp_rel_spolecnostKartaTyp kt 
	where kt.id_kartaTyp = :new.id_kartaTyp
	  and kt.id_ktgUcetniSpolecnost = :new.id_ktgUcetniSpolecnost;
	  
	if(:new.dt_datumZmeny > add_months(l_zpravaDalsi, -1*l_periodaMesicu)) then
		update kp_rel_spolecnostKartaTyp kt
		set dt_zpravaDalsi = add_months(dt_zpravaDalsi, nl_periodaMesicu)
		where kt.id_kartaTyp = :new.id_kartaTyp
		  and kt.id_ktgUcetniSpolecnost = :new.id_ktgUcetniSpolecnost;
	end if;
end;

/
ALTER TRIGGER "DB_JT"."TAI_KPKARTASPOLZPRAVA_DALSI" ENABLE;


PROMPT Completed TAI_KPKARTASPOLZPRAVA_DALSI.sql
PROMPT


-- ============================================================================
-- Deploy: TAI_KPKTGSPOLECNOSTVPRECHODU.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAI_KPKTGSPOLECNOSTVPRECHODU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAI_KPKTGSPOLECNOSTVPRECHODU
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAI_KPKTGSPOLECNOSTVPRECHODU" 
AFTER INSERT
ON DB_JT.KP_KTG_SPOLECNOSTVPRECHODU
FOR EACH ROW
begin
	update kp_ktg_spolecnost
	set c_vPrechodu = '1'
	where id = :new.id_ktgSpolecnost;
end;




/
ALTER TRIGGER "DB_JT"."TAI_KPKTGSPOLECNOSTVPRECHODU" ENABLE;


PROMPT Completed TAI_KPKTGSPOLECNOSTVPRECHODU.sql
PROMPT


-- ============================================================================
-- Deploy: TAI_KPKTGUCETNISPOLECNOSTLINK.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAI_KPKTGUCETNISPOLECNOSTLINK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAI_KPKTGUCETNISPOLECNOSTLINK
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAI_KPKTGUCETNISPOLECNOSTLINK" 
after insert
on kp_ktg_ucetniSpolecnost_link
for each row

begin
    insert into kp_log_ucetniSpolecnost_link 
	       (S_AKCE,
		    ID,
			ID_KTGUCETNISPOLECNOST,
			DT_PLATNOSTOD,
			DT_PLATNOSTDO,
			SPIN_ID,
			TOPAS_ID,
			C_EXTSYSTEM,
			ID_CISDATABAZE,
			S_UZIVATEL,
			ID_CISSUBJECT,
			S_MENA,
			C_IFRSPRIMARNI)	
	values ('I',
	        :new.ID,
			:new.ID_KTGUCETNISPOLECNOST,
			:new.DT_PLATNOSTOD,
			:new.DT_PLATNOSTDO,
			:new.SPIN_ID,
			:new.TOPAS_ID,
			:new.C_EXTSYSTEM,
			:new.ID_CISDATABAZE,
			:new.S_UZIVATEL,
			:new.ID_CISSUBJECT,
			:new.S_MENA,
			:new.C_IFRSPRIMARNI);
end;


/
ALTER TRIGGER "DB_JT"."TAI_KPKTGUCETNISPOLECNOSTLINK" ENABLE;


PROMPT Completed TAI_KPKTGUCETNISPOLECNOSTLINK.sql
PROMPT


-- ============================================================================
-- Deploy: TAI_KPLOGEVIADMINSPOL_SYNC.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAI_KPLOGEVIADMINSPOL_SYNC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAI_KPLOGEVIADMINSPOL_SYNC
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAI_KPLOGEVIADMINSPOL_SYNC" 
after insert
on Kp_Log_eviAdminSpolecnost
for each row



declare
begin
  if (:new.id_ktgUcetniSpolecnost is not null and
      :new.id_ktgUcetniSpolecnost > 0 and
	  :new.c_navrh <> '1') then
    insert into kp_log_ucetnispolecnost (s_akce, s_nazev, s_ico, id_administrator, id, s_uzivatel, dt_datumzmeny)
	values ('A', :new.s_nazev, :new.s_ico, :new.id_administrator, :new.id_ktgUcetniSpolecnost, :new.s_uzivatel, :new.dt_datumzmeny);
  end if;
end;


/
ALTER TRIGGER "DB_JT"."TAI_KPLOGEVIADMINSPOL_SYNC" ENABLE;


PROMPT Completed TAI_KPLOGEVIADMINSPOL_SYNC.sql
PROMPT


-- ============================================================================
-- Deploy: TAI_KPRELSPOLECNOSTSKUPINAIC.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAI_KPRELSPOLECNOSTSKUPINAIC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAI_KPRELSPOLECNOSTSKUPINAIC
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAI_KPRELSPOLECNOSTSKUPINAIC" 
AFTER INSERT
ON DB_JT.KP_REL_SPOLECNOSTSKUPINAIC 
REFERENCING NEW AS NEW OLD AS OLD
FOR EACH ROW
begin
	update kp_ktg_spolecnost
	set c_skupinaIc = '1'
	where id = :new.id_ktgSpolecnostClen;
end;

/
ALTER TRIGGER "DB_JT"."TAI_KPRELSPOLECNOSTSKUPINAIC" ENABLE;


PROMPT Completed TAI_KPRELSPOLECNOSTSKUPINAIC.sql
PROMPT


-- ============================================================================
-- Deploy: TAI_KPTMPDOKLADVAZBY.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAI_KPTMPDOKLADVAZBY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAI_KPTMPDOKLADVAZBY
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAI_KPTMPDOKLADVAZBY" 
after insert on KP_TMP_DOKLADVAZBY
for each row



begin
    insert into KP_LOG_TMPDOKLADVAZBY (
	  ID_DOKLAD,
	  ID_KTGUCETNISKUPINA
    )
	values (
	  :new.ID_DOKLAD,
	  :new.ID_KTGUCETNISKUPINA
    );
end;


/
ALTER TRIGGER "DB_JT"."TAI_KPTMPDOKLADVAZBY" ENABLE;


PROMPT Completed TAI_KPTMPDOKLADVAZBY.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TRIGGERS/TAI_KP_KTGUCETNISPOL_ODBOR.sql: 'utf-8' codec can't decode byte 0xf8 in position 1795: invalid start byte


-- ============================================================================
-- Deploy: TAI_KP_KTG_IFRSPRAVIDLODETAIL.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAI_KP_KTG_IFRSPRAVIDLODETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAI_KP_KTG_IFRSPRAVIDLODETAIL
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAI_KP_KTG_IFRSPRAVIDLODETAIL" 
after insert on KP_ktg_IFRSPravidloDetail
for each row



begin
	insert into KP_log_IFRSPravidloDetail (
		s_akce, id_poradi, id_poradiPodminka, id_ktgIfrsPravidlo, id_ktgUcetniSpolecnost,
		id_cisIfrsPravDetailTyp, s_poznamka, s_ucetMD, s_ucetD,
		s_mena, nd_castka, nd_castkaLocal, s_ucetZbytek, s_podminka, s_uzivatel
	) values (
		'I', :new.id_poradi, :new.id_poradiPodminka, :new.id_ktgIfrsPravidlo, :new.id_ktgUcetniSpolecnost,
		:new.id_cisIfrsPravDetailTyp, :new.s_poznamka, :new.s_ucetMD, :new.s_ucetD,
		:new.s_mena, :new.nd_castka, :new.nd_castkaLocal, :new.s_ucetZbytek, :new.s_podminka, :new.s_uzivatel
	);
	update KP_ktg_IFRSPravidlo set dt_zmenaDefiniceDetail = sysdate;
end;


/
ALTER TRIGGER "DB_JT"."TAI_KP_KTG_IFRSPRAVIDLODETAIL" ENABLE;


PROMPT Completed TAI_KP_KTG_IFRSPRAVIDLODETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: TAUI_KP_PARAMETRY.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAUI_KP_PARAMETRY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAUI_KP_PARAMETRY
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAUI_KP_PARAMETRY" 
after insert or update on KP_parametry
for each row



begin
	insert into log_KP_parametry (
		c_NG_povoleno, dt_NG_datum_Do, s_NG_hodiny, s_uzivatel, dt_zmena )
	values (
		:new.c_NG_povoleno, :new.dt_NG_datum_Do, :new.s_NG_hodiny, :new.s_uzivatel, :new.dt_zmena );
end;


/
ALTER TRIGGER "DB_JT"."TAUI_KP_PARAMETRY" ENABLE;


PROMPT Completed TAUI_KP_PARAMETRY.sql
PROMPT


-- ============================================================================
-- Deploy: TAU_DOKUMENT_ODEMKNOUT.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAU_DOKUMENT_ODEMKNOUT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAU_DOKUMENT_ODEMKNOUT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAU_DOKUMENT_ODEMKNOUT" 
before update on KP_DAT_DOKUMENT_ODEMKNOUT
for each row

begin
  if(:new.C_ODEMKNOUT != :old.C_ODEMKNOUT) then
      :new.DT_DATUM_ZMENY := sysdate;
  end if;
end;
/
ALTER TRIGGER "DB_JT"."TAU_DOKUMENT_ODEMKNOUT" ENABLE;


PROMPT Completed TAU_DOKUMENT_ODEMKNOUT.sql
PROMPT


-- ============================================================================
-- Deploy: TAU_KPDATMANUALZDROJDAT_LOG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAU_KPDATMANUALZDROJDAT_LOG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAU_KPDATMANUALZDROJDAT_LOG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAU_KPDATMANUALZDROJDAT_LOG" 
AFTER UPDATE ON KP_DAT_MANUALNIZDROJDAT
FOR EACH ROW



begin
	insert into KP_log_ManualniZdrojDat (
		s_akce, id_ManualniZdrojDat,  id_ktgUcetniSpolecnost,
		s_mena, s_ucet, nd_castkaMena, nd_castkaLocal,
		s_popis, dt_datum, id_ktgUcetniSpolecnostUnif,
		id_ktgSpolecnost, id_ktgProjekt, id_ktgOdbor, s_uzivatel, c_typ
	) values (
		'U', :new.id,  :new.id_ktgUcetniSpolecnost,
		:new.s_mena, :new.s_ucet, :new.nd_castkaMena, :new.nd_castkaLocal,
		:new.s_popis, :new.dt_datum, :new.id_ktgUcetniSpolecnostUnif,
		:new.id_ktgSpolecnost, :new.id_ktgProjekt, :new.id_ktgOdbor, :new.s_uzivatel, :new.c_typ
	);
end;

/
ALTER TRIGGER "DB_JT"."TAU_KPDATMANUALZDROJDAT_LOG" ENABLE;


PROMPT Completed TAU_KPDATMANUALZDROJDAT_LOG.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TRIGGERS/TAU_KPDOKUMENT_MISTRAN.sql: 'utf-8' codec can't decode byte 0xc8 in position 2214: invalid continuation byte


-- ============================================================================
-- Deploy: TAU_KPKTGUCETNISPOLECNOSTLINK.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAU_KPKTGUCETNISPOLECNOSTLINK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAU_KPKTGUCETNISPOLECNOSTLINK
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAU_KPKTGUCETNISPOLECNOSTLINK" 
after update
on kp_ktg_ucetniSpolecnost_link
for each row

begin
    insert into kp_log_ucetniSpolecnost_link 
	       (S_AKCE,
		    ID,
			ID_KTGUCETNISPOLECNOST,
			DT_PLATNOSTOD,
			DT_PLATNOSTDO,
			SPIN_ID,
			TOPAS_ID,
			C_EXTSYSTEM,
			ID_CISDATABAZE,
			S_UZIVATEL,
			ID_CISSUBJECT,
			S_MENA,
			C_IFRSPRIMARNI)	
	values ('U',
	        :new.ID,
			:new.ID_KTGUCETNISPOLECNOST,
			:new.DT_PLATNOSTOD,
			:new.DT_PLATNOSTDO,
			:new.SPIN_ID,
			:new.TOPAS_ID,
			:new.C_EXTSYSTEM,
			:new.ID_CISDATABAZE,
			:new.S_UZIVATEL,
			:new.ID_CISSUBJECT,
			:new.S_MENA,
			:new.C_IFRSPRIMARNI);
end;


/
ALTER TRIGGER "DB_JT"."TAU_KPKTGUCETNISPOLECNOSTLINK" ENABLE;


PROMPT Completed TAU_KPKTGUCETNISPOLECNOSTLINK.sql
PROMPT


-- ============================================================================
-- Deploy: TAU_KP_DAT_DOKLADFRONTA.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAU_KP_DAT_DOKLADFRONTA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAU_KP_DAT_DOKLADFRONTA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAU_KP_DAT_DOKLADFRONTA" AFTER
  UPDATE OF s_stav ON DB_JT.KP_DAT_DOKLADFRONTA REFERENCING NEW AS NEW OLD AS OLD FOR EACH ROW    WHEN ( old.s_stav != 'DB chyba'
  AND new.s_stav                                                                                                  = 'DB chyba' ) DECLARE c utl_smtp.connection;
  l_database VARCHAR2(50);
  l_spolecnost kp_ktg_ucetniSpolecnost.s_nazev%type;
BEGIN
  BEGIN
    c := utl_smtp.open_connection('smtp.pa.jtfg.com');
    --     c := utl_smtp.open_connection('czpae00023.pa.jtfg.com');
    utl_smtp.helo(c, 'jtbank.cz');
    utl_smtp.mail(c, 'smrecek@jtbank.cz');
    utl_smtp.rcpt(c, 'stastny@jtfg.com');
    utl_smtp.rcpt(c, 'mikysek@jtfg.com');
    utl_smtp.rcpt(c, 'smrecek@jtbank.cz');
    utl_smtp.open_data(c);
    --utl_smtp.write_data(c, 'From: Hlidac fronty' || utl_tcp.CRLF);
    utl_smtp.write_data(c, 'From: KIS_Hlidac_fronty@jtbank.cz' || utl_tcp.CRLF);
    utl_smtp.write_data(c, 'To: Obsluha fronty' || utl_tcp.CRLF);
    SELECT DECODE(host_name,'CZPAE00043','TWEEK',host_name)
      || ' / '
      || instance_name
    INTO l_database
    FROM v$instance;
    utl_smtp.write_data(c, 'Subject: Neco visi ve fronte ' || l_database || utl_tcp.CRLF);
    utl_smtp.write_data(c, utl_tcp.CRLF || 'Neco visi ve fronte na ' || l_database || '!');
    SELECT s_nazev
    INTO l_spolecnost
    FROM kp_ktg_ucetniSpolecnost
    WHERE id = :new.aIdKtgUcetniSpolecnost;
    utl_smtp.write_data(c, utl_tcp.CRLF || utl_tcp.CRLF || 'Spolecnost: ' || l_spolecnost || ' (' || :new.aIdKtgUcetniSpolecnost || ')' || utl_tcp.CRLF || 'duvod: ' || :new.s_sqlError);
    utl_smtp.close_data(c);
    utl_smtp.quit(c);
  EXCEPTION
  WHEN utl_smtp.transient_error OR utl_smtp.permanent_error THEN
    BEGIN
      utl_smtp.quit(c);
    EXCEPTION
    WHEN utl_smtp.transient_error OR utl_smtp.permanent_error THEN
      NULL; -- When the SMTP server is down or unavailable, we don't
      -- have a connection to the server. The quit call will
      -- raise an exception that we can ignore.
    END;
    --       raise_application_error(-20000,         'Failed to send mail due to the following error: ' || sqlerrm);
  END;
END;


/
ALTER TRIGGER "DB_JT"."TAU_KP_DAT_DOKLADFRONTA" ENABLE;


PROMPT Completed TAU_KP_DAT_DOKLADFRONTA.sql
PROMPT


-- ============================================================================
-- Deploy: TAU_KP_DAT_DOKLADPOLOZKA.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAU_KP_DAT_DOKLADPOLOZKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAU_KP_DAT_DOKLADPOLOZKA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAU_KP_DAT_DOKLADPOLOZKA" 
after update or insert on KP_dat_DokladPolozka
for each row
begin
   if ( :new.id_defListBunka = 142 and :new.nd_castkaLocal = 5591726809.07 ) then
   	  raise_application_error ( -20001, 'problem' );
   end if;   
   
end;


/
ALTER TRIGGER "DB_JT"."TAU_KP_DAT_DOKLADPOLOZKA" DISABLE;


PROMPT Completed TAU_KP_DAT_DOKLADPOLOZKA.sql
PROMPT


-- ============================================================================
-- Deploy: TAU_KP_DAT_ZZZZ.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAU_KP_DAT_ZZZZ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAU_KP_DAT_ZZZZ
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAU_KP_DAT_ZZZZ" AFTER UPDATE OR INSERT ON "DB_JT"."KP_DAT_DOKLADZDROJDAT" FOR EACH ROW begin
   if ( :new.nd_castkaLocal = 1086311 ) then
   	  raise_application_error ( -20001, 'problem' );
   end if;   
   
end;



/
ALTER TRIGGER "DB_JT"."TAU_KP_DAT_ZZZZ" DISABLE;


PROMPT Completed TAU_KP_DAT_ZZZZ.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TRIGGERS/TAU_KP_KTGUCETNISPOL_ODBOR.sql: 'utf-8' codec can't decode byte 0xf8 in position 2167: invalid start byte


-- ============================================================================
-- Deploy: TAU_KP_KTG_IFRSPRAVIDLODETAIL.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAU_KP_KTG_IFRSPRAVIDLODETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAU_KP_KTG_IFRSPRAVIDLODETAIL
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAU_KP_KTG_IFRSPRAVIDLODETAIL" 
after update on KP_ktg_IFRSPravidloDetail
for each row



begin
	insert into KP_log_IFRSPravidloDetail (
		s_akce, id_poradi, id_poradiPodminka, id_ktgIfrsPravidlo, id_ktgUcetniSpolecnost,
		id_cisIfrsPravDetailTyp, s_poznamka, s_ucetMD, s_ucetD,
		s_mena, nd_castka, nd_castkaLocal, s_ucetZbytek, s_podminka, s_uzivatel
	) values (
		'U', :old.id_poradi, :old.id_poradiPodminka, :old.id_ktgIfrsPravidlo, :new.id_ktgUcetniSpolecnost,
		:old.id_cisIfrsPravDetailTyp, :old.s_poznamka, :old.s_ucetMD, :old.s_ucetD,
		:old.s_mena, :old.nd_castka, :old.nd_castkaLocal, :old.s_ucetZbytek, :old.s_podminka, :old.s_uzivatel
	);
	update KP_ktg_IFRSPravidlo set dt_zmenaDefiniceDetail = sysdate;
end;


/
ALTER TRIGGER "DB_JT"."TAU_KP_KTG_IFRSPRAVIDLODETAIL" ENABLE;


PROMPT Completed TAU_KP_KTG_IFRSPRAVIDLODETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: TAU_KTGUCETNISPOLECNOST_MNGSEG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TAU_KTGUCETNISPOLECNOST_MNGSEG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TAU_KTGUCETNISPOLECNOST_MNGSEG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TAU_KTGUCETNISPOLECNOST_MNGSEG" 
after update of id_mngSegment on KP_KTG_UCETNISPOLECNOST
for each row



begin
  update kp_ktg_odbor o
  set o.ID_MNGSEGMENT = :new.id_mngSegment
  where o.ID_KTGUCETNISPOLECNOST = :new.ID
    and (o.ID_MNGSEGMENT = :old.id_mngSegment
	  or o.ID_MNGSEGMENT is null)
	and sysdate between o.DT_PLATNOSTOD and o.DT_PLATNOSTDO
	and o.C_ARCHIVNI <> '1';
end;	


/
ALTER TRIGGER "DB_JT"."TAU_KTGUCETNISPOLECNOST_MNGSEG" ENABLE;


PROMPT Completed TAU_KTGUCETNISPOLECNOST_MNGSEG.sql
PROMPT


-- ============================================================================
-- Deploy: TBD_KPDATMANUALZDROJDAT_LOG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBD_KPDATMANUALZDROJDAT_LOG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBD_KPDATMANUALZDROJDAT_LOG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBD_KPDATMANUALZDROJDAT_LOG" 
BEFORE DELETE ON KP_DAT_MANUALNIZDROJDAT
FOR EACH ROW



begin
	insert into KP_log_ManualniZdrojDat (
		s_akce, id_ManualniZdrojDat,  id_ktgUcetniSpolecnost,
		s_mena, s_ucet, nd_castkaMena, nd_castkaLocal,
		s_popis, dt_datum, id_ktgUcetniSpolecnostUnif,
		id_ktgSpolecnost, id_ktgProjekt, id_ktgOdbor, s_uzivatel, c_typ
	) values (
		'D', :old.id,  :old.id_ktgUcetniSpolecnost,
		:old.s_mena, :old.s_ucet, :old.nd_castkaMena, :old.nd_castkaLocal,
		:old.s_popis, :old.dt_datum, :old.id_ktgUcetniSpolecnostUnif,
		:old.id_ktgSpolecnost, :old.id_ktgProjekt, :old.id_ktgOdbor, :old.s_uzivatel, :new.c_typ
	);
end;

/
ALTER TRIGGER "DB_JT"."TBD_KPDATMANUALZDROJDAT_LOG" ENABLE;


PROMPT Completed TBD_KPDATMANUALZDROJDAT_LOG.sql
PROMPT


-- ============================================================================
-- Deploy: TBD_KPDATVAZBYZAMEK.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBD_KPDATVAZBYZAMEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBD_KPDATVAZBYZAMEK
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBD_KPDATVAZBYZAMEK" 
before delete on KP_dat_VazbyZamek
for each row
begin
    insert into KP_log_VazbyZamek (
	  S_AKCE,
	  ID_CISDOKLAD,
	  ID_KTGUCETNISPOLECNOSTFROM,
	  ID_KTGUCETNISPOLECNOSTTO,
	  ID_KTGUCETNISKUPINA,
	  DT_DATUM,
	  S_UZIVATEL,
	  DT_DATUMZMENY)
	values (
	  'D',
	  :old.ID_CISDOKLAD,
	  :old.ID_KTGUCETNISPOLECNOSTFROM,
	  :old.ID_KTGUCETNISPOLECNOSTTO,
	  :old.ID_KTGUCETNISKUPINA,
	  :old.DT_DATUM,
	  :old.S_UZIVATEL,
	  :old.DT_DATUMZMENY);

end;


/
ALTER TRIGGER "DB_JT"."TBD_KPDATVAZBYZAMEK" ENABLE;


PROMPT Completed TBD_KPDATVAZBYZAMEK.sql
PROMPT


-- ============================================================================
-- Deploy: TBD_KPKTGSPOLECNOSTVPRECHODU.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBD_KPKTGSPOLECNOSTVPRECHODU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBD_KPKTGSPOLECNOSTVPRECHODU
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBD_KPKTGSPOLECNOSTVPRECHODU" 
BEFORE DELETE
ON DB_JT.KP_KTG_SPOLECNOSTVPRECHODU
FOR EACH ROW
declare
	idUcSpol int;   
begin
	update kp_ktg_spolecnost
	set c_vPrechodu = '0',
		s_ico = db_dsa.f_formatICO ( :old.s_ico )
	where id = :old.id_ktgSpolecnost;
	
	select id_ktgSpolecnost
	into idUcSpol
	from kp_ktg_spolecnost
	where id = :old.id_ktgSpolecnost;
	
	if( idUcSpol is not null ) then
		update kp_ktg_ucetniSpolecnost
		set s_ico = db_dsa.f_formatICO ( :old.s_ico )
		where id = idUcSpol; 
	end if; 
end;

/
ALTER TRIGGER "DB_JT"."TBD_KPKTGSPOLECNOSTVPRECHODU" ENABLE;


PROMPT Completed TBD_KPKTGSPOLECNOSTVPRECHODU.sql
PROMPT


-- ============================================================================
-- Deploy: TBD_KPKTGUCETNISPOLECNOSTLINK.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBD_KPKTGUCETNISPOLECNOSTLINK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBD_KPKTGUCETNISPOLECNOSTLINK
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBD_KPKTGUCETNISPOLECNOSTLINK" 
before delete
on kp_ktg_ucetniSpolecnost_link
for each row

begin
    insert into kp_log_ucetniSpolecnost_link 
	       (S_AKCE,
		    ID,
			ID_KTGUCETNISPOLECNOST,
			DT_PLATNOSTOD,
			DT_PLATNOSTDO,
			SPIN_ID,
			TOPAS_ID,
			C_EXTSYSTEM,
			ID_CISDATABAZE,
			S_UZIVATEL,
			ID_CISSUBJECT,
			S_MENA,
			C_IFRSPRIMARNI)	
	values ('D',
	        :old.ID,
			:old.ID_KTGUCETNISPOLECNOST,
			:old.DT_PLATNOSTOD,
			:old.DT_PLATNOSTDO,
			:old.SPIN_ID,
			:old.TOPAS_ID,
			:old.C_EXTSYSTEM,
			:old.ID_CISDATABAZE,
			:old.S_UZIVATEL,
			:old.ID_CISSUBJECT,
			:old.S_MENA,
			:old.C_IFRSPRIMARNI);
end;


/
ALTER TRIGGER "DB_JT"."TBD_KPKTGUCETNISPOLECNOSTLINK" ENABLE;


PROMPT Completed TBD_KPKTGUCETNISPOLECNOSTLINK.sql
PROMPT


-- ============================================================================
-- Deploy: TBD_KPRELSUBCLEN_RP.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBD_KPRELSUBCLEN_RP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBD_KPRELSUBCLEN_RP
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBD_KPRELSUBCLEN_RP" 
BEFORE DELETE ON KP_REL_SUBKONSOLIDACECLEN_RP
FOR EACH ROW
begin
  insert into KP_LOG_SUBKONSOLIDACECLEN_RP (
    C_AKCE,
	ID_KTGSUBKONSOLIDACE,
	ID_KTGUCETNISPOLECNOST,
	C_KDYPOUZIT,
	C_AKTIVAPASIVA,
	C_VYSLEDOVKA,
	C_DOKLADVAZBY,
	C_DOKLAD,
	S_UZIVATEL,
	DT_DATUMZMENY)
  values (
    'D',
	:old.ID_KTGSUBKONSOLIDACE,
	:old.ID_KTGUCETNISPOLECNOST,
	:old.C_KDYPOUZIT,
	:old.C_AKTIVAPASIVA,
	:old.C_VYSLEDOVKA,
	:old.C_DOKLADVAZBY,
	:old.C_DOKLAD,
	:old.S_UZIVATEL,
	:old.DT_DATUMZMENY);
end;


/
ALTER TRIGGER "DB_JT"."TBD_KPRELSUBCLEN_RP" ENABLE;


PROMPT Completed TBD_KPRELSUBCLEN_RP.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TRIGGERS/TBD_KPRELSUBKONSCLEN_CLEN.sql: 'utf-8' codec can't decode byte 0xed in position 567: invalid continuation byte


-- ============================================================================
-- Deploy: TBD_KP_LOG_CUSTOMER_GROUP.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBD_KP_LOG_CUSTOMER_GROUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBD_KP_LOG_CUSTOMER_GROUP
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBD_KP_LOG_CUSTOMER_GROUP" 
before delete on  KP_CIS_CUSTOMER_GROUP
for each row
begin

insert into KP_LOG_CUSTOMER_GROUP 
            ( cust_group_name,
              cust_group_code,
              cust_struc_name,
              cust_struc_code,
              dt_platnostod,
              dt_platnostdo,
              c_akce,
              s_uzivatel,
              dt_zmena )
     values ( :old.cust_group_name,
              :old.cust_group_code,
              :old.cust_struc_name,
              :old.cust_struc_code,
              :old.dt_platnostod,
              :old.dt_platnostdo,
              'D',
              ( select 'DB/OS user: ' ||user || '/'||sys_context('USERENV','OS_USER') || ' Host:'||sys_context('USERENV','HOST') || ' Terminal:'||sys_context('USERENV','TERMINAL') from dual ),
              sysdate );           
end;
/
ALTER TRIGGER "DB_JT"."TBD_KP_LOG_CUSTOMER_GROUP" DISABLE;


PROMPT Completed TBD_KP_LOG_CUSTOMER_GROUP.sql
PROMPT


-- ============================================================================
-- Deploy: TBD_KP_LOG_SPOLECNOST_GROUP.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBD_KP_LOG_SPOLECNOST_GROUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBD_KP_LOG_SPOLECNOST_GROUP
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBD_KP_LOG_SPOLECNOST_GROUP" 
before delete on  KP_KTG_SPOLECNOST_GROUP
for each row
begin

insert into KP_LOG_SPOLECNOST_GROUP 
            ( id_spolecnost,
              cust_group_name,
              cust_group_code,
              cust_struc_name,
              cust_struc_code,
              dt_platnostod,
              dt_platnostdo,
              dt_datumzmeny,
              c_akce,
              s_uzivatel,
              dt_zmena )
     values ( :old.id_spolecnost,
              :old.cust_group_name,
              :old.cust_group_code,
              :old.cust_struc_name,
              :old.cust_struc_code,
              :old.dt_platnostod,
              :old.dt_platnostdo,
              :old.dt_datumzmeny,
              'D',
              ( select 'DB/OS user: ' ||user || '/'||sys_context('USERENV','OS_USER') || ' Host:'||sys_context('USERENV','HOST') || ' Terminal:'||sys_context('USERENV','TERMINAL') from dual ),
              sysdate );           
end;
/
ALTER TRIGGER "DB_JT"."TBD_KP_LOG_SPOLECNOST_GROUP" DISABLE;


PROMPT Completed TBD_KP_LOG_SPOLECNOST_GROUP.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TRIGGERS/TBIU_DEFUCET2UCETUNIF_DEFU.sql: 'utf-8' codec can't decode byte 0xfd in position 964: invalid start byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TRIGGERS/TBIU_DEFUCETBUSINESSLINIE_DEFU.sql: 'utf-8' codec can't decode byte 0x9e in position 941: invalid start byte


-- ============================================================================
-- Deploy: TBIU_KPDATBUDGETPOLOZKA.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBIU_KPDATBUDGETPOLOZKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBIU_KPDATBUDGETPOLOZKA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBIU_KPDATBUDGETPOLOZKA" 
before insert or update on KP_dat_BudgetPolozka
for each row



begin
    insert into kp_log_budgetpolozka (
	  id,
	  id_budget,
	  id_cistyptran,
	  nd_castka,
      s_mena,
      id_odboroo,
      dt_schvalenoodbor,
      id_gestor,
      dt_schvalenogestor,
      id_ucspoloo,
      dt_schvalenoucspol,
      id_ucspoltop,
      dt_schvalenotop,
      s_poznamka,
	  id_appuser)
	values (
	  :new.id,
	  :new.id_budget,
	  :new.id_cistyptran,
	  :new.nd_castka,
      :new.s_mena,
      :new.id_odboroo,
      :new.dt_schvalenoodbor,
      :new.id_gestor,
      :new.dt_schvalenogestor,
      :new.id_ucspoloo,
      :new.dt_schvalenoucspol,
      :new.id_ucspoltop,
      :new.dt_schvalenotop,
      :new.s_poznamka,
	  :new.id_appuser);

end;


/
ALTER TRIGGER "DB_JT"."TBIU_KPDATBUDGETPOLOZKA" ENABLE;


PROMPT Completed TBIU_KPDATBUDGETPOLOZKA.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TRIGGERS/TBIU_KPDATDOKLADVAZBY_CASTKY.sql: 'utf-8' codec can't decode byte 0x9e in position 1105: invalid start byte


-- ============================================================================
-- Deploy: TBIU_KPDATDOKLADVAZBY_SUBKON.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBIU_KPDATDOKLADVAZBY_SUBKON.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBIU_KPDATDOKLADVAZBY_SUBKON
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBIU_KPDATDOKLADVAZBY_SUBKON" 
before insert or update of id_ktgSubKonsolidace
on KP_dat_DokladVazby
for each row
begin
	-- kontroluje aby nove definovany sloupec nebyl NULL - stare hodnoty jsou null
	if ( :new.id_ktgSubKonsolidace is null  ) then
		raise_application_error ( -20999, '***Chyba kodu => nezapisujes id subkonsolidace !!!***' );
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBIU_KPDATDOKLADVAZBY_SUBKON" DISABLE;


PROMPT Completed TBIU_KPDATDOKLADVAZBY_SUBKON.sql
PROMPT


-- ============================================================================
-- Deploy: TBIU_KPDATDOKUMENTRADEK_CHECK.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBIU_KPDATDOKUMENTRADEK_CHECK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBIU_KPDATDOKUMENTRADEK_CHECK
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBIU_KPDATDOKUMENTRADEK_CHECK" 
before insert or update of ID_PROJEKTMAN,ID_ODBOROO,ID_UCSPOLOO,ID_UCSPOLTOP
on KP_dat_dokumentRadek
for each row



declare
begin
  if(:new.ID_PROJEKTMAN < 0) then
    :new.ID_PROJEKTMAN := null;
  end if;

  if(:new.ID_ODBOROO < 0) then
    :new.ID_ODBOROO := null;
  end if;

  if(:new.ID_UCSPOLOO < 0) then
    :new.ID_UCSPOLOO := null;
  end if;

  if(:new.ID_UCSPOLTOP < 0) then
    :new.ID_UCSPOLTOP := null;
  end if;
end;


/
ALTER TRIGGER "DB_JT"."TBIU_KPDATDOKUMENTRADEK_CHECK" ENABLE;


PROMPT Completed TBIU_KPDATDOKUMENTRADEK_CHECK.sql
PROMPT


-- ============================================================================
-- Deploy: TBIU_KPDATDOKUMENT_CHECK.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBIU_KPDATDOKUMENT_CHECK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBIU_KPDATDOKUMENT_CHECK
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBIU_KPDATDOKUMENT_CHECK" 
before insert or update of ID_ZADAVATEL,ID_GESTOR
on KP_dat_dokument
for each row



declare
begin
  if(:new.ID_ZADAVATEL < 0) then
    :new.ID_ZADAVATEL := null;
  end if;

  if(:new.ID_GESTOR < 0) then
    :new.ID_GESTOR := null;
  end if;
end;


/
ALTER TRIGGER "DB_JT"."TBIU_KPDATDOKUMENT_CHECK" ENABLE;


PROMPT Completed TBIU_KPDATDOKUMENT_CHECK.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TRIGGERS/TBIU_KPDATMAJETKOVAUCAST.sql: 'utf-8' codec can't decode byte 0xf9 in position 531: invalid start byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TRIGGERS/TBIU_KPDEFBUDGETMUSTEK_UCET.sql: 'utf-8' codec can't decode byte 0xda in position 1266: invalid continuation byte


-- ============================================================================
-- Deploy: TBIU_KPDEFKONTROLAMAJETKUCAST.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBIU_KPDEFKONTROLAMAJETKUCAST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBIU_KPDEFKONTROLAMAJETKUCAST
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBIU_KPDEFKONTROLAMAJETKUCAST" 
before insert or update on KP_def_KontrolaMajetkovaUcast
for each row



begin
	:new.dt_last_modify := sysdate;
end;

/
ALTER TRIGGER "DB_JT"."TBIU_KPDEFKONTROLAMAJETKUCAST" ENABLE;


PROMPT Completed TBIU_KPDEFKONTROLAMAJETKUCAST.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TRIGGERS/TBIU_KPDEFLISTRADUCET_DEFL.sql: 'utf-8' codec can't decode byte 0x9e in position 615: invalid start byte


-- ============================================================================
-- Deploy: TBIU_KPDEFUCETVAZBAUCET.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBIU_KPDEFUCETVAZBAUCET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBIU_KPDEFUCETVAZBAUCET
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBIU_KPDEFUCETVAZBAUCET" 
before insert or update on KP_Def_UcetVazbaUcet
for each row

begin
	if ( :new.id_typ = 6 ) then
	   :new.s_ucet_1 := 'protistran';
	end if;

end;


/
ALTER TRIGGER "DB_JT"."TBIU_KPDEFUCETVAZBAUCET" ENABLE;


PROMPT Completed TBIU_KPDEFUCETVAZBAUCET.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TRIGGERS/TBIU_KPKTGIFRSPRAVIDLO.sql: 'utf-8' codec can't decode byte 0xed in position 744: invalid continuation byte


-- ============================================================================
-- Deploy: TBIU_KPKTGPROJEKT_SEGMENT.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBIU_KPKTGPROJEKT_SEGMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBIU_KPKTGPROJEKT_SEGMENT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBIU_KPKTGPROJEKT_SEGMENT" 
before insert or update of id_mngSegment 
on kp_ktg_projekt
for each row
begin
	select id_boss, id_topMng, id_sponzor
	into :new.id_mngSegmentBoss, :new.id_top, :new.id_sponzor
	from kp_dat_mngSegmentBoss
	where id_mngSegment = :new.id_mngSegment
	  and sysdate between dt_platnostOd and dt_platnostDo;
	
	exception when no_data_found then null; 
end;


/
ALTER TRIGGER "DB_JT"."TBIU_KPKTGPROJEKT_SEGMENT" ENABLE;


PROMPT Completed TBIU_KPKTGPROJEKT_SEGMENT.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TRIGGERS/TBIU_KPKTGSUBKONSOLIDACE.sql: 'utf-8' codec can't decode byte 0x9e in position 806: invalid start byte


-- ============================================================================
-- Deploy: TBIU_KPKTGUCETNISPOL_SEGMENT.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBIU_KPKTGUCETNISPOL_SEGMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBIU_KPKTGUCETNISPOL_SEGMENT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBIU_KPKTGUCETNISPOL_SEGMENT" 
before insert or update of id_mngSegment 
on kp_ktg_ucetniSpolecnost
for each row
begin
	select id_boss, id_topMng
	into :new.id_mngSegmentBoss, :new.id_topMng
	from kp_dat_mngSegmentBoss
	where id_mngSegment = :new.id_mngSegment
	  and sysdate between dt_platnostOd and dt_platnostDo;
	
	exception when no_data_found then 
        :new.id_mngSegmentBoss := null;
	    :new.id_topMng := null;
end;


/
ALTER TRIGGER "DB_JT"."TBIU_KPKTGUCETNISPOL_SEGMENT" ENABLE;


PROMPT Completed TBIU_KPKTGUCETNISPOL_SEGMENT.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TRIGGERS/TBIU_KPRELPROJEKTUCSPOL_MATKA.sql: 'utf-8' codec can't decode byte 0xed in position 969: invalid continuation byte


-- ============================================================================
-- Deploy: TBIU_KPRELSUBKONSCLEN_CLEN.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBIU_KPRELSUBKONSCLEN_CLEN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBIU_KPRELSUBKONSCLEN_CLEN
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBIU_KPRELSUBKONSCLEN_CLEN" 
BEFORE INSERT OR UPDATE OF ID_KTGSUBKONSOLIDACE ON KP_REL_SUBKONSOLIDACECLEN
FOR EACH ROW
begin
   select id_ktgUcetniSkupina into :new.id_ktgUcetniSkupina from kp_ktg_subkonsolidace where id_ktgUcetniSpolecnost = :new.id_ktgSubKonsolidace;
end;


/
ALTER TRIGGER "DB_JT"."TBIU_KPRELSUBKONSCLEN_CLEN" ENABLE;


PROMPT Completed TBIU_KPRELSUBKONSCLEN_CLEN.sql
PROMPT


-- ============================================================================
-- Deploy: TBIU_KPSUBKONSOLIDACEPRAVIDLO.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBIU_KPSUBKONSOLIDACEPRAVIDLO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBIU_KPSUBKONSOLIDACEPRAVIDLO
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBIU_KPSUBKONSOLIDACEPRAVIDLO" 
before insert or update on KP_ktg_SubKonsolidacePravidlo
for each row



begin
	if ( :new.id is null ) then
		select sq_KPSubKonsolidacePravidlo.nextVal into :new.id from dual;
	end if;

	:new.dt_zmena := sysdate;
end;

/
ALTER TRIGGER "DB_JT"."TBIU_KPSUBKONSOLIDACEPRAVIDLO" ENABLE;


PROMPT Completed TBIU_KPSUBKONSOLIDACEPRAVIDLO.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TRIGGERS/TBIU_KPSUBKONSPRAVIDLO_CLEN.sql: 'utf-8' codec can't decode byte 0x9e in position 644: invalid start byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TRIGGERS/TBIU_KPSUBKONSPRAVIDLO_TYP.sql: 'utf-8' codec can't decode byte 0xed in position 581: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TRIGGERS/TBIU_KPTMPDEFLISTRUCET_DEFU.sql: 'utf-8' codec can't decode byte 0xf8 in position 2707: invalid start byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TRIGGERS/TBIU_KP_DEF_LISTBUNKAUCET.sql: 'utf-8' codec can't decode byte 0xed in position 573: invalid continuation byte


-- ============================================================================
-- Deploy: TBIU_KP_DEF_NASTROJOPERACE_TN.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBIU_KP_DEF_NASTROJOPERACE_TN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBIU_KP_DEF_NASTROJOPERACE_TN
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBIU_KP_DEF_NASTROJOPERACE_TN" 
before insert or update of id_ktgTypOperace on KP_def_nastrojOperace
for each row



begin
	select id_typNastroje into  :new.id_ktgTypNastroje from KP_Ktg_TypOperace where id = :new.id_ktgTypOperace;
end;

/
ALTER TRIGGER "DB_JT"."TBIU_KP_DEF_NASTROJOPERACE_TN" ENABLE;


PROMPT Completed TBIU_KP_DEF_NASTROJOPERACE_TN.sql
PROMPT


-- ============================================================================
-- Deploy: TBIU_KP_KTG_FININV_DATUM.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBIU_KP_KTG_FININV_DATUM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBIU_KP_KTG_FININV_DATUM
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBIU_KP_KTG_FININV_DATUM" 
before insert or update on KP_ktg_FinancniInvestice
for each row



begin
	:new.dt_zmena := sysdate;
end;



/
ALTER TRIGGER "DB_JT"."TBIU_KP_KTG_FININV_DATUM" ENABLE;


PROMPT Completed TBIU_KP_KTG_FININV_DATUM.sql
PROMPT

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TRIGGERS/TBIU_KP_KTG_IFRSPRAVIDLODETAIL.sql: 'utf-8' codec can't decode byte 0xed in position 700: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TRIGGERS/TBIU_KP_KTG_SUBKONPRAVDETAIL.sql: 'utf-8' codec can't decode byte 0xed in position 713: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TRIGGERS/TBIU_KP_KTG_SUBKONPRAVDETAIL_2.sql: 'utf-8' codec can't decode byte 0xd8 in position 816: invalid continuation byte

-- ERROR: Cannot read /Users/radektuma/DEV/KIS/sources/DB/DB_JT/TRIGGERS/TBIU_KP_KTG_TYPOPERACE.sql: 'utf-8' codec can't decode byte 0xf8 in position 543: invalid start byte


-- ============================================================================
-- Deploy: TBIU_KP_KTG_UCETNISPOLECN_DB.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBIU_KP_KTG_UCETNISPOLECN_DB.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBIU_KP_KTG_UCETNISPOLECN_DB
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBIU_KP_KTG_UCETNISPOLECN_DB" 
before insert or update of id_cisDatabaze on KP_ktg_ucetniSpolecnost
for each row



begin
  -- synchronizace s_dbLink
  select s_dbLink into :new.s_dbLink from KP_cis_databaze where id = :new.id_cisDatabaze;
  
  -- orezu mezery na ICO
  :new.s_ico := trim ( :new.s_ico);
end;


/
ALTER TRIGGER "DB_JT"."TBIU_KP_KTG_UCETNISPOLECN_DB" ENABLE;


PROMPT Completed TBIU_KP_KTG_UCETNISPOLECN_DB.sql
PROMPT


-- ============================================================================
-- Deploy: TBIU_KTGSPOLECNOSTU.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBIU_KTGSPOLECNOSTU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBIU_KTGSPOLECNOSTU
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBIU_KTGSPOLECNOSTU" 
BEFORE insert or UPDATE
ON DB_JT.KP_KTG_SPOLECNOST
REFERENCING NEW AS NEW OLD AS OLD
FOR EACH ROW

BEGIN
	 select Max(c_zona) into :new.c_zona
	 from kp_cis_stat where id = :new.s_country; 
	 
	  :new.c_zona := NVL ( :new.c_zona, 'A' );
END ;


/
ALTER TRIGGER "DB_JT"."TBIU_KTGSPOLECNOSTU" ENABLE;


PROMPT Completed TBIU_KTGSPOLECNOSTU.sql
PROMPT


-- ============================================================================
-- Deploy: TBIU_SEGMENTZASTUP.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBIU_SEGMENTZASTUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBIU_SEGMENTZASTUP
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBIU_SEGMENTZASTUP" 
BEFORE INSERT or UPDATE OF dt_platnostOd, dt_platnostDo
ON kp_dat_segmentZastup 
FOR EACH ROW
begin
	if ( :new.dt_platnostOd is null ) then
		:new.dt_platnostOd := trunc(sysdate);
	end if;
	if ( :new.dt_platnostDo is null ) then
		:new.dt_platnostDo := to_date('01.01.2999','dd.mm.yyyy');
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBIU_SEGMENTZASTUP" ENABLE;


PROMPT Completed TBIU_SEGMENTZASTUP.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_CIS_BANKAR.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_CIS_BANKAR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_CIS_BANKAR
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_CIS_BANKAR" 
  BEFORE INSERT ON DB_JT.KP_CIS_BANKAR
  FOR EACH ROW
  begin
  if ( NVL ( :new.id, 0 ) = 0 ) then
    select SQ_CIS_BANKAR.nextval INTO :new.ID from dual;
  end if;  
  end;
  

/
ALTER TRIGGER "DB_JT"."TBI_CIS_BANKAR" ENABLE;


PROMPT Completed TBI_CIS_BANKAR.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_CIS_ISIT_APLIKACE_.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_CIS_ISIT_APLIKACE_.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_CIS_ISIT_APLIKACE 
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_CIS_ISIT_APLIKACE " 
  BEFORE INSERT ON DB_JT.KP_CIS_ISIT_APLIKACE 
  FOR EACH ROW
  begin
  if ( NVL ( :new.id, 0 ) = 0 ) then
    select SQ_CIS_ISIT_APLIKACE .nextval INTO :new.ID from dual;
  end if;  
  end
;
/
ALTER TRIGGER "DB_JT"."TBI_CIS_ISIT_APLIKACE " ENABLE;


PROMPT Completed TBI_CIS_ISIT_APLIKACE_.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_CIS_ISIT_BUDGET.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_CIS_ISIT_BUDGET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_CIS_ISIT_BUDGET
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_CIS_ISIT_BUDGET" 
  BEFORE INSERT ON DB_JT.KP_CIS_ISIT_BUDGET
  FOR EACH ROW
  begin
  if ( NVL ( :new.id, 0 ) = 0 ) then
    select SQ_CIS_ISIT_BUDGET.nextval INTO :new.ID from dual;
  end if;  
  end;
  
/
ALTER TRIGGER "DB_JT"."TBI_CIS_ISIT_BUDGET" ENABLE;


PROMPT Completed TBI_CIS_ISIT_BUDGET.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_CIS_ISIT_DRUH_NAKLADU.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_CIS_ISIT_DRUH_NAKLADU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_CIS_ISIT_DRUH_NAKLADU
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_CIS_ISIT_DRUH_NAKLADU" 
  BEFORE INSERT ON DB_JT.KP_CIS_ISIT_DRUH_NAKLADU
  FOR EACH ROW
  begin
  if ( NVL ( :new.id, 0 ) = 0 ) then
    select SQ_CIS_DRUH_NAKLADU.nextval INTO :new.ID from dual;
  end if;  
  end
;
/
ALTER TRIGGER "DB_JT"."TBI_CIS_ISIT_DRUH_NAKLADU" ENABLE;


PROMPT Completed TBI_CIS_ISIT_DRUH_NAKLADU.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_CIS_ISIT_TYP_POLOZKY.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_CIS_ISIT_TYP_POLOZKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_CIS_ISIT_TYP_POLOZKY
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_CIS_ISIT_TYP_POLOZKY" 
  BEFORE INSERT ON DB_JT.KP_CIS_ISIT_TYP_POLOZKY
  FOR EACH ROW
  begin
  if ( NVL ( :new.id, 0 ) = 0 ) then
    select SQ_CIS_TYP_POLOZKY.nextval INTO :new.ID from dual;
  end if;  
  end;
/
ALTER TRIGGER "DB_JT"."TBI_CIS_ISIT_TYP_POLOZKY" ENABLE;


PROMPT Completed TBI_CIS_ISIT_TYP_POLOZKY.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_CIS_ISIT_TYP_SW.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_CIS_ISIT_TYP_SW.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_CIS_ISIT_TYP_SW
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_CIS_ISIT_TYP_SW" 
  BEFORE INSERT ON DB_JT.KP_CIS_ISIT_TYP_SW
  FOR EACH ROW
  begin
  if ( NVL ( :new.id, 0 ) = 0 ) then
    select SQ_CIS_TYP_SW.nextval INTO :new.ID from dual;
  end if;  
  end;
  
/
ALTER TRIGGER "DB_JT"."TBI_CIS_ISIT_TYP_SW" ENABLE;


PROMPT Completed TBI_CIS_ISIT_TYP_SW.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_CIS_ODBOR_SKUPINA.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_CIS_ODBOR_SKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_CIS_ODBOR_SKUPINA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_CIS_ODBOR_SKUPINA" 
  BEFORE INSERT ON DB_JT.KP_CIS_ODBOR_SKUPINA
  FOR EACH ROW
  begin
  if ( NVL ( :new.id, 0 ) = 0 ) then
    select SQ_CIS_ODBOR_SKUPINY.nextval INTO :new.ID from dual;
  end if;  
  end;
/
ALTER TRIGGER "DB_JT"."TBI_CIS_ODBOR_SKUPINA" ENABLE;


PROMPT Completed TBI_CIS_ODBOR_SKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_CIS_ODBOR_ZARADENIE.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_CIS_ODBOR_ZARADENIE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_CIS_ODBOR_ZARADENIE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_CIS_ODBOR_ZARADENIE" 
  BEFORE INSERT ON DB_JT.KP_CIS_ODBOR_ZARADENIE
  FOR EACH ROW
  begin
  if ( NVL ( :new.id, 0 ) = 0 ) then
    select SQ_CIS_ODBOR_SKUPINY.nextval INTO :new.ID from dual;
  end if;  
  end;
/
ALTER TRIGGER "DB_JT"."TBI_CIS_ODBOR_ZARADENIE" ENABLE;


PROMPT Completed TBI_CIS_ODBOR_ZARADENIE.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_CIS_PROJEKT_SKUPINA.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_CIS_PROJEKT_SKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_CIS_PROJEKT_SKUPINA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_CIS_PROJEKT_SKUPINA" 
  BEFORE INSERT ON DB_JT.KP_CIS_PROJEKT_SKUPINA
  FOR EACH ROW
  begin
  if ( NVL ( :new.id, 0 ) = 0 ) then
    select SQ_CIS_PROJEKT_SKUPINY.nextval INTO :new.ID from dual;
  end if;  
  end;
/
ALTER TRIGGER "DB_JT"."TBI_CIS_PROJEKT_SKUPINA" ENABLE;


PROMPT Completed TBI_CIS_PROJEKT_SKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_CIS_PROJEKT_TYPY_TRAN.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_CIS_PROJEKT_TYPY_TRAN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_CIS_PROJEKT_TYPY_TRAN
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_CIS_PROJEKT_TYPY_TRAN" 
  BEFORE INSERT ON DB_JT.KP_CIS_PROJEKT_TYPY_TRAN
  FOR EACH ROW
  begin
  if ( NVL ( :new.id, 0 ) = 0 ) then
    select SQ_CIS_PROJEKT_SKUPINY.nextval INTO :new.ID from dual;
  end if;  
  end;
/
ALTER TRIGGER "DB_JT"."TBI_CIS_PROJEKT_TYPY_TRAN" ENABLE;


PROMPT Completed TBI_CIS_PROJEKT_TYPY_TRAN.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_CIS_SPOL_SKUPINA0.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_CIS_SPOL_SKUPINA0.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_CIS_SPOL_SKUPINA0
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_CIS_SPOL_SKUPINA0" 
  BEFORE INSERT ON DB_JT.KP_CIS_SPOL_SKUPINA0
  FOR EACH ROW
  begin
  if ( NVL ( :new.id, 0 ) = 0 ) then
    select SQ_CIS_SPOL_SKUPINA.nextval INTO :new.ID from dual;
  end if;  
  end;
/
ALTER TRIGGER "DB_JT"."TBI_CIS_SPOL_SKUPINA0" ENABLE;


PROMPT Completed TBI_CIS_SPOL_SKUPINA0.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_CIS_SPOL_SKUPINA1.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_CIS_SPOL_SKUPINA1.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_CIS_SPOL_SKUPINA1
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_CIS_SPOL_SKUPINA1" 
  BEFORE INSERT ON DB_JT.KP_CIS_SPOL_SKUPINA1
  FOR EACH ROW
  begin
  if ( NVL ( :new.id, 0 ) = 0 ) then
    select SQ_CIS_SPOL_SKUPINA.nextval INTO :new.ID from dual;
  end if;  
  end;
/
ALTER TRIGGER "DB_JT"."TBI_CIS_SPOL_SKUPINA1" ENABLE;


PROMPT Completed TBI_CIS_SPOL_SKUPINA1.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_CIS_SPOL_SKUPINA2.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_CIS_SPOL_SKUPINA2.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_CIS_SPOL_SKUPINA2
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_CIS_SPOL_SKUPINA2" 
  BEFORE INSERT ON DB_JT.KP_CIS_SPOL_SKUPINA2
  FOR EACH ROW
  begin
  if ( NVL ( :new.id, 0 ) = 0 ) then
    select SQ_CIS_SPOL_SKUPINA.nextval INTO :new.ID from dual;
  end if;  
  end;
/
ALTER TRIGGER "DB_JT"."TBI_CIS_SPOL_SKUPINA2" ENABLE;


PROMPT Completed TBI_CIS_SPOL_SKUPINA2.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_CIS_SPOL_SKUPINA3.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_CIS_SPOL_SKUPINA3.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_CIS_SPOL_SKUPINA3
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_CIS_SPOL_SKUPINA3" 
  BEFORE INSERT ON DB_JT.KP_CIS_SPOL_SKUPINA3
  FOR EACH ROW
  begin
  if ( NVL ( :new.id, 0 ) = 0 ) then
    select SQ_CIS_SPOL_SKUPINA.nextval INTO :new.ID from dual;
  end if;  
  end;  
/
ALTER TRIGGER "DB_JT"."TBI_CIS_SPOL_SKUPINA3" ENABLE;


PROMPT Completed TBI_CIS_SPOL_SKUPINA3.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_CIS_TYPFKT.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_CIS_TYPFKT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_CIS_TYPFKT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_CIS_TYPFKT" 
  BEFORE INSERT ON DB_JT.KP_CIS_TYPFAKTURY
  FOR EACH ROW
  begin
    select SQ_CIS_TYPFKT.nextval INTO :new.ID from dual;
  end;

/
ALTER TRIGGER "DB_JT"."TBI_CIS_TYPFKT" ENABLE;


PROMPT Completed TBI_CIS_TYPFKT.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_EVIADMINSPOLECNOST.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_EVIADMINSPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_EVIADMINSPOLECNOST
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_EVIADMINSPOLECNOST" 
before insert on kp_ktg_eviAdminSpolecnost 
for each row 



begin 
	if ( NVL ( :new.id, 0 ) = 0 ) then 
		select sq_ktg_eviAdminSpolecnost.nextVal into :new.id from dual; 
	end if; 
end;


/
ALTER TRIGGER "DB_JT"."TBI_EVIADMINSPOLECNOST" ENABLE;


PROMPT Completed TBI_EVIADMINSPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_EVIOBCHODNIREJSTRIK.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_EVIOBCHODNIREJSTRIK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_EVIOBCHODNIREJSTRIK
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_EVIOBCHODNIREJSTRIK" 
before insert on KP_dat_EVIOBCHODNIREJSTRIK
for each row



begin
    insert into KP_LOG_EVIOBCHODNIREJSTRIK (
	  ID,
	  ID_CISOBCHODNIREJSTRIK,
	  DT_DATUM,
	  ID_ADMINSPOLECNOST
	  )
	values (
	  :new.ID,
	  :new.ID_CISOBCHODNIREJSTRIK,
	  :new.DT_DATUM,
	  :new.ID_ADMINSPOLECNOST
    );
end;


/
ALTER TRIGGER "DB_JT"."TBI_EVIOBCHODNIREJSTRIK" ENABLE;


PROMPT Completed TBI_EVIOBCHODNIREJSTRIK.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPBUDGETDOCZASTUP.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPBUDGETDOCZASTUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPBUDGETDOCZASTUP
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPBUDGETDOCZASTUP" 
before insert on kp_dat_budgetzastup 
for each row 



begin 
	if ( NVL ( :new.id, 0 ) = 0 ) then 
		select SQ_BUDGET_ZASTUP.nextVal into :new.id from dual; 
	end if; 
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPBUDGETDOCZASTUP" ENABLE;


PROMPT Completed TBI_KPBUDGETDOCZASTUP.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPCISBUSINESSLINIE.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPCISBUSINESSLINIE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPCISBUSINESSLINIE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPCISBUSINESSLINIE" 
before insert
on kp_cis_businessLinie
for each row



begin
	if ( NVL ( :new.id, 0 ) = 0 ) then
		select SQ_KP_BUSINESSLINIE.nextVal into :new.id from dual;
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPCISBUSINESSLINIE" ENABLE;


PROMPT Completed TBI_KPCISBUSINESSLINIE.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPCISFLOW.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPCISFLOW.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPCISFLOW
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPCISFLOW" 
before insert
on kp_cis_flow
for each row
begin
	if ( NVL ( :new.id, 0 ) = 0 ) then
		select sq_kpCisFlow.nextVal into :new.id from dual;
	end if;
end;



/
ALTER TRIGGER "DB_JT"."TBI_KPCISFLOW" ENABLE;


PROMPT Completed TBI_KPCISFLOW.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPCISIFRSSEGMENT.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPCISIFRSSEGMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPCISIFRSSEGMENT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPCISIFRSSEGMENT" 
before insert on kp_cis_ifrsSegment
for each row



begin
	if ( NVL ( :new.id, 0 ) = 0 ) then
		select sq_kpCisIfrsSegment.nextVal into :new.id from dual;
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPCISIFRSSEGMENT" ENABLE;


PROMPT Completed TBI_KPCISIFRSSEGMENT.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPCISIFRSSUBSEGMENT.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPCISIFRSSUBSEGMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPCISIFRSSUBSEGMENT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPCISIFRSSUBSEGMENT" 
before insert on kp_cis_ifrsSubSegment
for each row



begin
	if ( NVL ( :new.id, 0 ) = 0 ) then
		select sq_kpCisIfrsSubSegment.nextVal into :new.id from dual;
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPCISIFRSSUBSEGMENT" ENABLE;


PROMPT Completed TBI_KPCISIFRSSUBSEGMENT.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPCISMAJETUCASTTYPTRAN.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPCISMAJETUCASTTYPTRAN.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPCISMAJETUCASTTYPTRAN
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPCISMAJETUCASTTYPTRAN" 
before insert on KP_cis_MajetkovaUcastTypTran
for each row



begin
	if ( :new.id is null ) then
		select sq_KP_cis_MajetUcastTypTran.nextVal into :new.id from dual;
	end if;


end;


/
ALTER TRIGGER "DB_JT"."TBI_KPCISMAJETUCASTTYPTRAN" ENABLE;


PROMPT Completed TBI_KPCISMAJETUCASTTYPTRAN.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPCISMAJETUCASTZPUSOB.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPCISMAJETUCASTZPUSOB.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPCISMAJETUCASTZPUSOB
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPCISMAJETUCASTZPUSOB" 
before insert on KP_cis_MajetkovaUcastZpusob
for each row



begin
	if ( :new.id is null ) then
		select sq_KP_cis_MajetUcastZpusob.nextVal into :new.id from dual;
	end if;
end;



/
ALTER TRIGGER "DB_JT"."TBI_KPCISMAJETUCASTZPUSOB" ENABLE;


PROMPT Completed TBI_KPCISMAJETUCASTZPUSOB.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPCISMNGSEGMENT.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPCISMNGSEGMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPCISMNGSEGMENT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPCISMNGSEGMENT" 
before insert on kp_cis_mngSegment
for each row



begin
	if ( NVL ( :new.id, 0 ) = 0 ) then
		select sq_kpCisMngSegment.nextVal into :new.id from dual;
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPCISMNGSEGMENT" ENABLE;


PROMPT Completed TBI_KPCISMNGSEGMENT.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPCISTYPPROJBILANCE.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPCISTYPPROJBILANCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPCISTYPPROJBILANCE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPCISTYPPROJBILANCE" 
before insert on kp_cis_typProjektoveBilance
for each row



begin
	if ( NVL ( :new.id, 0 ) = 0 ) then
		select sq_kpCisTypProjBilance.nextVal into :new.id from dual;
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPCISTYPPROJBILANCE" ENABLE;


PROMPT Completed TBI_KPCISTYPPROJBILANCE.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPCISTYPPROJBUDGETU.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPCISTYPPROJBUDGETU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPCISTYPPROJBUDGETU
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPCISTYPPROJBUDGETU" 
before insert on kp_cis_typBudgetuProjektu
for each row



begin
	if ( NVL ( :new.id, 0 ) = 0 ) then
		select sq_kpCisTypProjBudgetu.nextVal into :new.id from dual;
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPCISTYPPROJBUDGETU" ENABLE;


PROMPT Completed TBI_KPCISTYPPROJBUDGETU.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPDATDANOVESAZBY.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPDATDANOVESAZBY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPDATDANOVESAZBY
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPDATDANOVESAZBY" 
before insert on KP_DAT_DANOVESAZBY 
for each row 



begin 
	if ( NVL ( :new.id, 0 ) = 0 ) then 
		select SQ_KP_DANOVESAZBY.nextVal into :new.id from dual; 
	end if; 
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPDATDANOVESAZBY" ENABLE;


PROMPT Completed TBI_KPDATDANOVESAZBY.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPDATDOCZASTUP.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPDATDOCZASTUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPDATDOCZASTUP
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPDATDOCZASTUP" 
before insert on kp_dat_doczastup 
for each row 



begin 
	if ( NVL ( :new.id, 0 ) = 0 ) then 
		select SQ_DOC_ZASTUP.nextVal into :new.id from dual; 
	end if; 
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPDATDOCZASTUP" ENABLE;


PROMPT Completed TBI_KPDATDOCZASTUP.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPDATDOKLADNASTROJ_CASTKY.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPDATDOKLADNASTROJ_CASTKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPDATDOKLADNASTROJ_CASTKY
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPDATDOKLADNASTROJ_CASTKY" 
before insert on kp_dat_DOKLADNASTROJ_CASTKY
for each row
begin
	if ( NVL ( :new.id, 0 )  = 0 ) then
		select sq_kpDOKLADNASTROJ_CASTKY.nextVal into :new.id from dual;
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPDATDOKLADNASTROJ_CASTKY" ENABLE;


PROMPT Completed TBI_KPDATDOKLADNASTROJ_CASTKY.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPDATDOKLADPOLOZKADENIK.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPDATDOKLADPOLOZKADENIK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPDATDOKLADPOLOZKADENIK
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPDATDOKLADPOLOZKADENIK" 
before insert on KP_dat_DokladPolozkaDenik
for each row



begin
	select sq_KP_dat_DokladPolozkaDenik.nextVal into :new.id from dual;

	if ( :new.c_akce = 'I' ) then
		return;
	end if;
end;

/
ALTER TRIGGER "DB_JT"."TBI_KPDATDOKLADPOLOZKADENIK" ENABLE;


PROMPT Completed TBI_KPDATDOKLADPOLOZKADENIK.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPDATDOKLADPROTOKOL.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPDATDOKLADPROTOKOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPDATDOKLADPROTOKOL
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPDATDOKLADPROTOKOL" 
before insert on KP_dat_DokladProtokol
for each row



begin
	if ( NVL ( :new.id, 0 )  = 0 ) then
		select sq_KP_dat_DokladProtokol.nextVal into :new.id from dual;
	end if;
	if ( :new.c_kod > '5' ) then
		update KP_dat_Doklad set nl_error = nl_error + 1 where id = :new.id_doklad;
	elsif ( :new.c_kod between '1' and '5' ) then
		update KP_dat_Doklad set nl_warning = nl_warning + 1 where id = :new.id_doklad;
	end if;

end;


/
ALTER TRIGGER "DB_JT"."TBI_KPDATDOKLADPROTOKOL" ENABLE;


PROMPT Completed TBI_KPDATDOKLADPROTOKOL.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPDATDOKLADVAZBY.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPDATDOKLADVAZBY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPDATDOKLADVAZBY
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPDATDOKLADVAZBY" 
BEFORE INSERT
ON DB_JT.KP_DAT_DOKLADVAZBY 
REFERENCING NEW AS NEW OLD AS OLD
FOR EACH ROW



begin
	if ( NVL ( :new.id, 0 )  = 0 ) then
		select sq_KP_dat_DokladVazby.nextVal into :new.id from dual;
	end if;
	:new.nd_castkaVyparovat := :new.nd_castkaMena;
/*	
	if ( :new.nd_castkaMena = -14105.41 ) then
	raise_application_error ( -20200, 'xx' );
	end if;
	*/
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPDATDOKLADVAZBY" ENABLE;


PROMPT Completed TBI_KPDATDOKLADVAZBY.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPDATDOKLADVAZBYPAROVANI.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPDATDOKLADVAZBYPAROVANI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPDATDOKLADVAZBYPAROVANI
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPDATDOKLADVAZBYPAROVANI" 
before insert on KP_dat_DokladVazbyParovani
for each row



declare
	l_subKon int;
begin
	select id_ktgUcetniSpolecnost, dt_datum, id_ktgDoklad, id_subKonsolidace
		into :new.id_ktgUcetniSpolecnostFrom, :new.dt_datumDoklad, :new.id_ktgDoklad, l_subKon
	from KP_dat_doklad where id = :new.id_doklad;

	if ( l_subKon = :new.id_ktgUcetniSpolecnostFrom ) then
		:new.c_typ := 'U';
	else
		:new.c_typ := 'S';
	end if;

end;

/
ALTER TRIGGER "DB_JT"."TBI_KPDATDOKLADVAZBYPAROVANI" ENABLE;


PROMPT Completed TBI_KPDATDOKLADVAZBYPAROVANI.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPDATDOKLZDROJDAT.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPDATDOKLZDROJDAT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPDATDOKLZDROJDAT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPDATDOKLZDROJDAT" BEFORE INSERT ON "DB_JT"."KP_DAT_DOKLADZDROJDAT" FOR EACH ROW 
declare
	l_pocet int;
begin

	if ( NVL ( :new.id, 0 )  = 0 ) then
		select sq_KP_tmp_ZdrojDat.nextVal into :new.id from dual;
	end if;

	if ( :new.nd_castkaLocal is null ) then
		raise_application_error ( -20000, 'Null nd_castka pro IdExt=' || :new.id_extSystem ||
			' mena=' || :new.s_mena || ' ucet=' || :new.s_ucet  || ' castka=' || :new.nd_castkaMena || '  ' || :new.s_popis );
	end if;

	if ( :new.datum <= '30.6.2005' ) then
		if ( NVL ( :new.id_ktgProjekt, 1000001 ) = 1000001 ) then
			:new.id_ktgProjekt := kap_load.DEFAULT_PROJEKT;
		end if;

		if ( NVL ( :new.id_ktgOdbor, -1 ) = -1 ) then
			:new.id_ktgOdbor := kap_load.DEFAULT_ODBOR;
		end if;
	end if;

	if ( -1 != NVL ( :new.id_ktgProjekt, -1 ) ) then
		-- tak jeste se musi zkontrolovat zda takovy projekt mame v ciselniku
		-- pokud je Null nebo -1 tak nemusim kontrolovat
		select count(*) into l_pocet from kp_ktg_projekt where id = :new.id_ktgProjekt;
		if ( l_pocet = 0 ) then
			-- problem takovy projekt nezname
			--kap_doklad.p_insertProtokol ( '0', :new.id_Doklad, '3', 'Neznamy projekt ' || :new.id_ktgProjekt || '  ucet: ' || :new.s_ucet );
         kap_doklad.p_insertProtokolUcetProblem ( '0', 'P', :new.id_Doklad, '3', :new.s_ucet, :new.id_ktgProjekt  );
			:new.id_ktgProjekt := -1;
		end if;
	end if;

	if ( -1 != NVL ( :new.id_ktgOdbor, -1 ) ) then
		-- tak jeste se musi zkontrolovat zda takovy odbor mame v ciselniku
		-- pokud je Null nebo -1 tak nemusim kontrolovat
		select count(*) into l_pocet from kp_ktg_odbor where id = :new.id_ktgOdbor;
		if ( l_pocet = 0 ) then
			-- problem takovy projekt nezname
			--kap_doklad.p_insertProtokol ( '0', :new.id_Doklad, '3', 'Neznamy odbor ' || :new.id_ktgOdbor || '  ucet: ' || :new.s_ucet );
         kap_doklad.p_insertProtokolUcetProblem ( '0', 'O', :new.id_Doklad, '3', :new.s_ucet, :new.id_ktgOdbor  );
			:new.id_ktgOdbor := -1;
		end if;
	end if;


end;




/
ALTER TRIGGER "DB_JT"."TBI_KPDATDOKLZDROJDAT" ENABLE;


PROMPT Completed TBI_KPDATDOKLZDROJDAT.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPDATDOKUMENT.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPDATDOKUMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPDATDOKUMENT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPDATDOKUMENT" 
before insert on KP_dat_Dokument
for each row
begin
    insert into KP_LOG_DOKUMENT (
	  C_AKCE,
	  ID,
	  ID_CISDOKUMENT,
	  ID_KTGUCETNISPOLECNOST,
	  DT_DATUMZADANI,
	  ID_ZADAVATEL,
	  S_POPIS,
	  ID_TYPTRANSAKCE,
	  S_MENA,
	  S_PISEMNE,
	  C_TYPIZOVANATRAN,
	  DT_TYPIZOVANAOD,
	  DT_TYPIZOVANADO,
	  DT_DATUMZAUCTOVANI,
	  ID_SPOLECNOST,
	  S_CISLODOKLADU,
	  DT_DATUMSPLATNOSTI,
	  ID_APPUSER,
	  ID_ZAUCT,
	  S_PROTISTRANA,
	  ID_CISSTATUS,
	  C_POKLADNITRANSAKCE,
	  ID_GESTOR,
	  DT_GESTORSCHVALENO,
	  DT_POZADDATUMUHRADY,
	  DT_REALDATUMUHRADY,
	  DT_GESTORZAMITNUTO,
	  S_GESTORZAMITNUTO,
	  DT_ZADAVATELZAMITNUTO,
	  S_ZADAVATELZAMITNUTO,
	  id_typizlink,
	  s_duvodzruseni,
	  id_ucspoluhrada,
	  dt_zauctuhrada,
	  id_zauctuhrada,
	  ID_TYPPRECENENI,
    S_UCET,
    S_UCET2,
     C_DPH,
    ID_BUDGET,
    ID_TTDEVELOPER,
    ID_CISUHRADA,
    DT_UCETNIZAMITNUTO,
    S_UCETNIZAMITNUTO,
    ID_KTGUCETNISPOLECNOST2,
    S_UCETB,
    S_UCETB2,
    CERPAT_REZERVU,
    DT_NAVYSENI_SCHVALENO,
    DT_NAVYSENI_ZAMITNUTO,
    S_NAVYSENI_ZAMITNUTO,
    ID_NAVYSENI_MB,
    CISLOFA                                 
    ,DATPRIJ                                 
    ,DATDPH                                  
    ,CASTKA                                  
    ,FEIS_PRENOS                             
    ,DATODES                                 
    ,TYP_FKT                                 
    ,C_CAPEX_OPEX                            
    ,S_FEISTEXT                              
    ,DATVYSTAVENI                                
    )
	values (
	  'I',
	  :new.ID,
	  :new.ID_CISDOKUMENT,
	  :new.ID_KTGUCETNISPOLECNOST,
	  :new.DT_DATUMZADANI,
	  :new.ID_ZADAVATEL,
	  :new.S_POPIS,
	  :new.ID_TYPTRANSAKCE,
	  :new.S_MENA,
	  :new.S_PISEMNE,
	  :new.C_TYPIZOVANATRAN,
	  :new.DT_TYPIZOVANAOD,
	  :new.DT_TYPIZOVANADO,
	  :new.DT_DATUMZAUCTOVANI,
	  :new.ID_SPOLECNOST,
	  :new.S_CISLODOKLADU,
	  :new.DT_DATUMSPLATNOSTI,
	  :new.ID_APPUSER,
	  :new.ID_ZAUCT,
	  :new.S_PROTISTRANA,
	  :new.ID_CISSTATUS,
	  :new.C_POKLADNITRANSAKCE,
	  :new.ID_GESTOR,
	  :new.DT_GESTORSCHVALENO,
	  :new.DT_POZADDATUMUHRADY,
	  :new.DT_REALDATUMUHRADY,
	  :new.DT_GESTORZAMITNUTO,
	  :new.S_GESTORZAMITNUTO,
	  :new.DT_ZADAVATELZAMITNUTO,
	  :new.S_ZADAVATELZAMITNUTO,
	  :new.id_typizlink,
	  :new.s_duvodzruseni,
	  :new.id_ucspoluhrada,
	  :new.dt_zauctuhrada,
	  :new.id_zauctuhrada,
	  :new.ID_TYPPRECENENI,
      :new.S_UCET,
      :new.S_UCET2,
      :new.C_DPH,
    :new.ID_BUDGET,
    :new.ID_TTDEVELOPER,
    :new.ID_CISUHRADA,
    :new.DT_UCETNIZAMITNUTO,
    :new.S_UCETNIZAMITNUTO,
    :new.ID_KTGUCETNISPOLECNOST2,
    :new.S_UCETB,
    :new.S_UCETB2,
    :new.CERPAT_REZERVU,
    :new.DT_NAVYSENI_SCHVALENO,
    :new.DT_NAVYSENI_ZAMITNUTO,
    :new.S_NAVYSENI_ZAMITNUTO,
    :new.ID_NAVYSENI_MB      ,
    :new.CISLOFA                                 
    ,:new.DATPRIJ                                 
    ,:new.DATDPH                                  
    ,:new.CASTKA                                  
    ,:new.FEIS_PRENOS                             
    ,:new.DATODES                                 
    ,:new.TYP_FKT                                 
    ,:new.C_CAPEX_OPEX                            
    ,:new.S_FEISTEXT                              
    ,:new.DATVYSTAVENI                                    
    );
end;

/
ALTER TRIGGER "DB_JT"."TBI_KPDATDOKUMENT" ENABLE;


PROMPT Completed TBI_KPDATDOKUMENT.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPDATDOKUMENTRADEK.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPDATDOKUMENTRADEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPDATDOKUMENTRADEK
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPDATDOKUMENTRADEK" 

before insert on KP_dat_DokumentRadek
for each row



begin
    insert into KP_LOG_DOKUMENTRADEK (
	  C_AKCE,
	  ID,
	  ID_DOKUMENT,
	  ID_ODBOR,
	  ID_PROJEKT,
	  ND_CASTKA,
	  ID_ODBOROO,
	  DT_SCHVALENOODBOR,
	  ID_PROJEKTMAN,
	  DT_SCHVALENOPROJEKT,
	  ID_UCSPOLOO,
	  DT_SCHVALENOUCSPOL,
	  ID_UCSPOLTOP,
	  DT_SCHVALENOTOP,
	  S_KOMENTAR,
	  DT_DATUMPREFAKT,
	  ID_PREFAKT,
	  C_KPREFAKT,
	  DT_DATUMZADANI,
	  C_REMOVED,
	  C_ZOBJEDNAVKY,
	  ID_ZAMITNUTO,
	  DT_ZAMITNUTO,
	  S_ZAMITNUTO,
	  ID_DOKUMENTORIG,
	  ID_ODBOROOREAL,
	  ID_PROJEKTMANREAL,
	  ID_UCSPOLOOREAL,
	  ID_UCSPOLTOPREAL,
    ND_OBJ_CASTKA_VOLNA, 
	  ID_OBJ_RADEK
	  )
	values (
	  'I',
	  :new.ID,
	  :new.ID_DOKUMENT,
	  :new.ID_ODBOR,
	  :new.ID_PROJEKT,
	  :new.ND_CASTKA,
	  :new.ID_ODBOROO,
	  :new.DT_SCHVALENOODBOR,
	  :new.ID_PROJEKTMAN,
	  :new.DT_SCHVALENOPROJEKT,
	  :new.ID_UCSPOLOO,
	  :new.DT_SCHVALENOUCSPOL,
	  :new.ID_UCSPOLTOP,
	  :new.DT_SCHVALENOTOP,
	  :new.S_KOMENTAR,
	  :new.DT_DATUMPREFAKT,
	  :new.ID_PREFAKT,
	  :new.C_KPREFAKT,
	  :new.DT_DATUMZADANI,
	  :new.C_REMOVED,
	  :new.C_ZOBJEDNAVKY,
	  :new.ID_ZAMITNUTO,
	  :new.DT_ZAMITNUTO,
	  :new.S_ZAMITNUTO,
	  :new.ID_DOKUMENTORIG,
	  :new.ID_ODBOROOREAL,
	  :new.ID_PROJEKTMANREAL,
	  :new.ID_UCSPOLOOREAL,
	  :new.ID_UCSPOLTOPREAL,
    :new.ND_OBJ_CASTKA_VOLNA, 
	  :new.ID_OBJ_RADEK
    );

end;

/
ALTER TRIGGER "DB_JT"."TBI_KPDATDOKUMENTRADEK" ENABLE;


PROMPT Completed TBI_KPDATDOKUMENTRADEK.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPDATGENEROVANIZAMEK.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPDATGENEROVANIZAMEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPDATGENEROVANIZAMEK
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPDATGENEROVANIZAMEK" 
before insert 
on kp_dat_generovaniZamek
for each row
begin
	if( :new.C_ZAMCENO = '1' ) then
		insert into kp_log_generovaniZamek l	 
		       (S_AKCE,
			    ID_CISDOKLAD,
		        ID_KTGUCETNISPOLECNOST,
				DT_DATUM,
				ID_CISZAMEK,
				ID_KTGAPPUSER,
				DT_TIMESTAMP,
				nl_krok)
		values ('I',
			    :new.ID_CISDOKLAD,
		        :new.ID_KTGUCETNISPOLECNOST,
				:new.DT_DATUM,
				:new.ID_CISZAMEK,
				:new.ID_KTGAPPUSER,
				:new.DT_DATUMZMENY,
				:new.nl_krok);
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPDATGENEROVANIZAMEK" ENABLE;


PROMPT Completed TBI_KPDATGENEROVANIZAMEK.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPDATMAJETKOVAUCAST.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPDATMAJETKOVAUCAST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPDATMAJETKOVAUCAST
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPDATMAJETKOVAUCAST" 
before insert on KP_dat_MajetkovaUcast
for each row



begin
	if ( :new.id is null ) then
		select sq_KP_dat_MajetkovaUcast.nextVal into :new.id from dual;
	end if;

	if ( :new.id_parent is null ) then
		:new.id_parent := :new.id;
	end if;

end;



/
ALTER TRIGGER "DB_JT"."TBI_KPDATMAJETKOVAUCAST" ENABLE;


PROMPT Completed TBI_KPDATMAJETKOVAUCAST.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPDATMANUALZDROJDAT.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPDATMANUALZDROJDAT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPDATMANUALZDROJDAT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPDATMANUALZDROJDAT" 
before insert on KP_dat_ManualniZdrojDat
for each row



begin
	select sq_KP_ManZdrojDat.nextVal into :new.id from dual;
end;

/
ALTER TRIGGER "DB_JT"."TBI_KPDATMANUALZDROJDAT" ENABLE;


PROMPT Completed TBI_KPDATMANUALZDROJDAT.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPDATMISTRANSAKCE.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPDATMISTRANSAKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPDATMISTRANSAKCE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPDATMISTRANSAKCE" 
before insert on KP_DAT_MISTRANSAKCE 
for each row 
begin 
	if ( NVL ( :new.id, 0 ) = 0 ) then 
		select sq_kp_misTransakce.nextVal into :new.id from dual; 
	end if; 
   
   -- max aby nepadal na chybu kdyby tam zadny nebyl
   select Max(id) into :new.id_cisUcetUnif from Kp_Cis_Ucetunif u where u.s_ucet = :new.s_ucet;
   
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPDATMISTRANSAKCE" ENABLE;


PROMPT Completed TBI_KPDATMISTRANSAKCE.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPDATSEGMENTZASTUP.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPDATSEGMENTZASTUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPDATSEGMENTZASTUP
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPDATSEGMENTZASTUP" 
before insert on kp_dat_segmentZastup
for each row
begin
	if ( NVL ( :new.id, 0 ) = 0 ) then
		select SQ_SEGMENTZASTUP.nextVal into :new.id from dual;
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPDATSEGMENTZASTUP" ENABLE;


PROMPT Completed TBI_KPDATSEGMENTZASTUP.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPDATUVERMANUAL.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPDATUVERMANUAL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPDATUVERMANUAL
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPDATUVERMANUAL" 
BEFORE INSERT ON KP_DAT_UVERMANUAL 
FOR EACH ROW 



BEGIN 
	IF ( NVL ( :NEW.ID, 0 ) = 0 ) THEN 
		SELECT SQ_KP_UVERMANUAL.NEXTVAL INTO :NEW.ID FROM DUAL; 
	END IF; 
END;


/
ALTER TRIGGER "DB_JT"."TBI_KPDATUVERMANUAL" ENABLE;


PROMPT Completed TBI_KPDATUVERMANUAL.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPDATVAZBYZAMEK.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPDATVAZBYZAMEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPDATVAZBYZAMEK
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPDATVAZBYZAMEK" 
before insert on KP_dat_VazbyZamek
for each row
begin
    insert into KP_log_VazbyZamek (
	  S_AKCE,
	  ID_CISDOKLAD,
	  ID_KTGUCETNISPOLECNOSTFROM,
	  ID_KTGUCETNISPOLECNOSTTO,
	  ID_KTGUCETNISKUPINA,
	  DT_DATUM,
	  S_UZIVATEL,
	  DT_DATUMZMENY)
	values (
	  'I',
	  :new.ID_CISDOKLAD,
	  :new.ID_KTGUCETNISPOLECNOSTFROM,
	  :new.ID_KTGUCETNISPOLECNOSTTO,
	  :new.ID_KTGUCETNISKUPINA,
	  :new.DT_DATUM,
	  :new.S_UZIVATEL,
	  :new.DT_DATUMZMENY);

end;


/
ALTER TRIGGER "DB_JT"."TBI_KPDATVAZBYZAMEK" ENABLE;


PROMPT Completed TBI_KPDATVAZBYZAMEK.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPDEFKONTROLAMAJETKUCAST.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPDEFKONTROLAMAJETKUCAST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPDEFKONTROLAMAJETKUCAST
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPDEFKONTROLAMAJETKUCAST" 
before insert on KP_def_KontrolaMajetkovaUcast
for each row



begin
	if ( NVL ( :new.id, 0 )  = 0 ) then
		select sq_KPDefKontrolaMajetkovaUcast.nextVal into :new.id from dual;
	end if;

end;

/
ALTER TRIGGER "DB_JT"."TBI_KPDEFKONTROLAMAJETKUCAST" ENABLE;


PROMPT Completed TBI_KPDEFKONTROLAMAJETKUCAST.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPDEFQUESVAZBAPRODUCT.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPDEFQUESVAZBAPRODUCT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPDEFQUESVAZBAPRODUCT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPDEFQUESVAZBAPRODUCT" 
before insert on KP_Def_QuestorVazbaProduct
for each row

begin
	if ( NVL ( :new.id, 0 )  = 0 ) then
		select sq_KP_Def_QuestorVazbaProduct.nextVal into :new.id from dual;
	end if;
end;

/
ALTER TRIGGER "DB_JT"."TBI_KPDEFQUESVAZBAPRODUCT" ENABLE;


PROMPT Completed TBI_KPDEFQUESVAZBAPRODUCT.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPDEFUCETBUSINESSLINIE.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPDEFUCETBUSINESSLINIE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPDEFUCETBUSINESSLINIE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPDEFUCETBUSINESSLINIE" 
before insert
on kp_def_ucetBusinessLinie
for each row



begin
	if ( NVL ( :new.id, 0 ) = 0 ) then
		select SQ_KP_DEFBUSINESSLINIE.nextVal into :new.id from dual;
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPDEFUCETBUSINESSLINIE" ENABLE;


PROMPT Completed TBI_KPDEFUCETBUSINESSLINIE.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPDEFUCETVAZBAUCET.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPDEFUCETVAZBAUCET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPDEFUCETVAZBAUCET
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPDEFUCETVAZBAUCET" 
before insert on KP_Def_UcetVazbaUcet
for each row

begin
	if ( NVL ( :new.id, 0 )  = 0 ) then
		select sq_KP_Def_UcetVazbaUcet.nextVal into :new.id from dual;
	end if;
	if ( :new.id_typ = 99 ) then
	   :new.s_ucet_2 := :new.s_ucet_1;
	end if;

end;

/
ALTER TRIGGER "DB_JT"."TBI_KPDEFUCETVAZBAUCET" ENABLE;


PROMPT Completed TBI_KPDEFUCETVAZBAUCET.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPDENNIAGREGACE.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPDENNIAGREGACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPDENNIAGREGACE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPDENNIAGREGACE" 
before insert on KP_dat_DenniAgregace
for each row



begin
	if ( NVL ( :new.id, 0 )  = 0 ) then
		select sq_KPDenniAgregace.nextVal into :new.id from dual;
	end if;
end;

/
ALTER TRIGGER "DB_JT"."TBI_KPDENNIAGREGACE" ENABLE;


PROMPT Completed TBI_KPDENNIAGREGACE.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPDOKLADROZDILY.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPDOKLADROZDILY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPDOKLADROZDILY
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPDOKLADROZDILY" 
before insert on KP_DAT_DOKLADROZDILY
for each row
begin
	if ( NVL ( :new.id, 0 )  = 0 ) then
		select SQ_KP_DAT_DOKLADROZDILY.nextVal into :new.id from dual;
	end if;
end;




/
ALTER TRIGGER "DB_JT"."TBI_KPDOKLADROZDILY" ENABLE;


PROMPT Completed TBI_KPDOKLADROZDILY.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPDOKLADZDROJDATAGREGACE.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPDOKLADZDROJDATAGREGACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPDOKLADZDROJDATAGREGACE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPDOKLADZDROJDATAGREGACE" BEFORE INSERT ON "DB_JT"."KP_DAT_DOKLADZDROJDATAGREGACE" FOR EACH ROW 
begin
/*
if ( :new.id_ktgSpolecnost = 29420 ) then 
   :new.id_ktgSpolecnost := 46444;
end if;   	
*/

	if ( NVL ( :new.id, 0 )  = 0 ) then
		select sq_KPDokladZdrojDatAgregace.nextVal into :new.id from dual;
	end if;
end;



/
ALTER TRIGGER "DB_JT"."TBI_KPDOKLADZDROJDATAGREGACE" ENABLE;


PROMPT Completed TBI_KPDOKLADZDROJDATAGREGACE.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPKAPITALSKUPINY.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPKAPITALSKUPINY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPKAPITALSKUPINY
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPKAPITALSKUPINY" 
before insert on kp_dat_kapitalSkupiny
for each row



begin
	if ( NVL ( :new.id, 0 ) = 0 ) then
		select sq_kpKapitalSkupiny.nextVal into :new.id from dual;
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPKAPITALSKUPINY" ENABLE;


PROMPT Completed TBI_KPKAPITALSKUPINY.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPKARTAPRAVIDLA.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPKARTAPRAVIDLA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPKARTAPRAVIDLA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPKARTAPRAVIDLA" 
before insert on kp_dat_kartaPravidla
for each row
begin
	if ( NVL ( :new.id, 0 ) = 0 ) then
		select SQ_KP_kartaPravidla.nextVal into :new.id from dual;
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPKARTAPRAVIDLA" ENABLE;


PROMPT Completed TBI_KPKARTAPRAVIDLA.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPKARTASPOLZPRAVA.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPKARTASPOLZPRAVA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPKARTASPOLZPRAVA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPKARTASPOLZPRAVA" 
before insert on kp_dat_kartaSpolZprava
for each row
begin
	if ( NVL ( :new.id, 0 ) = 0 ) then
		select sq_kp_kartaZprava.nextVal into :new.id from dual;
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPKARTASPOLZPRAVA" ENABLE;


PROMPT Completed TBI_KPKARTASPOLZPRAVA.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPKARTATYP.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPKARTATYP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPKARTATYP
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPKARTATYP" 
before insert on kp_dat_kartaTyp
for each row
begin
	if ( NVL ( :new.id, 0 ) = 0 ) then
		select SQ_KP_kartaTyp.nextVal into :new.id from dual;
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPKARTATYP" ENABLE;


PROMPT Completed TBI_KPKARTATYP.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPKARTAVYJIMKY.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPKARTAVYJIMKY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPKARTAVYJIMKY
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPKARTAVYJIMKY" 
before insert on kp_dat_kartaVyjimky
for each row
begin
	if ( NVL ( :new.id, 0 ) = 0 ) then
		select SQ_KP_kartaVyjimky.nextVal into :new.id from dual;
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPKARTAVYJIMKY" ENABLE;


PROMPT Completed TBI_KPKARTAVYJIMKY.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPKTGDOKLADMUCASTVYJIMKA.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPKTGDOKLADMUCASTVYJIMKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPKTGDOKLADMUCASTVYJIMKA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPKTGDOKLADMUCASTVYJIMKA" 
before insert on KP_Ktg_DokladMajUcastVyjimka
for each row



begin
	if ( NVL ( :new.id, 0 )  = 0 ) then
		select sq_KPKtgDokladMajUcastVyjimka.nextVal into :new.id from dual;
	end if;
end;

/
ALTER TRIGGER "DB_JT"."TBI_KPKTGDOKLADMUCASTVYJIMKA" ENABLE;


PROMPT Completed TBI_KPKTGDOKLADMUCASTVYJIMKA.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPKTGFINANCNIINVESTICE.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPKTGFINANCNIINVESTICE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPKTGFINANCNIINVESTICE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPKTGFINANCNIINVESTICE" 
before insert on KP_KTG_FINANCNIINVESTICE
for each row



begin
    insert into KP_LOG_FINANCNIINVESTICE (
	  C_AKCE,
	  ID,
	  ID_KTGSPOLECNOST,
	  S_MENA,
	  DT_ZMENA,
	  S_UZIVATEL,
	  S_ISIN
    )
	values (
	  'I',
	  :new.ID,
	  :new.ID_KTGSPOLECNOST,
	  :new.S_MENA,
	  :new.DT_ZMENA,
	  :new.S_UZIVATEL,
	  :new.S_ISIN
    );

end;


/
ALTER TRIGGER "DB_JT"."TBI_KPKTGFINANCNIINVESTICE" ENABLE;


PROMPT Completed TBI_KPKTGFINANCNIINVESTICE.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPKTGPBKLIENT.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPKTGPBKLIENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPKTGPBKLIENT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPKTGPBKLIENT" 
before insert
on kp_ktg_pbKlient
for each row
begin
	if ( NVL ( :new.id, 0 ) = 0 ) then
		select SQ_KP_KTGPBKLIENT.nextVal into :new.id from dual;
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPKTGPBKLIENT" ENABLE;


PROMPT Completed TBI_KPKTGPBKLIENT.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPKTGPROJEKT.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPKTGPROJEKT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPKTGPROJEKT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPKTGPROJEKT" 
before insert on KP_KTG_PROJEKT 
for each row 



begin 
	if ( NVL ( :new.id, 0 ) = 0 ) then 
		select SQ_KP_PROJEKT.nextVal into :new.id from dual; 
	end if; 
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPKTGPROJEKT" ENABLE;


PROMPT Completed TBI_KPKTGPROJEKT.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPKTGPROJEKTNAVRH.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPKTGPROJEKTNAVRH.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPKTGPROJEKTNAVRH
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPKTGPROJEKTNAVRH" 
before insert on kp_ktg_projektnavrh 
for each row 



begin 
	if ( NVL ( :new.id, 0 ) = 0 ) then 
		select SQ_KTG_PROJEKTNAVRH.nextVal into :new.id from dual; 
	end if; 
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPKTGPROJEKTNAVRH" ENABLE;


PROMPT Completed TBI_KPKTGPROJEKTNAVRH.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPLOGAPPUSERSPOLPROTOKOL.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPLOGAPPUSERSPOLPROTOKOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPLOGAPPUSERSPOLPROTOKOL
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPLOGAPPUSERSPOLPROTOKOL" 
before insert on kp_log_appUserSpolProtokol
for each row



begin
	if ( NVL ( :new.id, 0 ) = 0 ) then
		select SQ_KP_logAppUserSpolProtokol.nextVal into :new.id from dual;
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPLOGAPPUSERSPOLPROTOKOL" ENABLE;


PROMPT Completed TBI_KPLOGAPPUSERSPOLPROTOKOL.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPPROJCASHFLOW_ID.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPPROJCASHFLOW_ID.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPPROJCASHFLOW_ID
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPPROJCASHFLOW_ID" 
BEFORE INSERT ON KP_DAT_PROJEKTCASHFLOW 
FOR EACH ROW 



BEGIN 
	IF ( :NEW.ID IS NULL ) THEN 
		SELECT SQ_KP_KPPROJCASHFLOW.NEXTVAL INTO :NEW.ID FROM DUAL; 
	END IF; 
END;


/
ALTER TRIGGER "DB_JT"."TBI_KPPROJCASHFLOW_ID" ENABLE;


PROMPT Completed TBI_KPPROJCASHFLOW_ID.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPPROJEKTDOKLADPOLOZKA.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPPROJEKTDOKLADPOLOZKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPPROJEKTDOKLADPOLOZKA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPPROJEKTDOKLADPOLOZKA" 
before insert on kp_dat_projektdokladpolozka
for each row



begin
	if ( NVL ( :new.id, 0 ) = 0 ) then
		select SQ_KP_DAT_PDP.nextVal into :new.id from dual;
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPPROJEKTDOKLADPOLOZKA" ENABLE;


PROMPT Completed TBI_KPPROJEKTDOKLADPOLOZKA.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPPROJNAKLDETAIL_ID.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPPROJNAKLDETAIL_ID.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPPROJNAKLDETAIL_ID
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPPROJNAKLDETAIL_ID" 
BEFORE INSERT ON KP_DAT_PROJEKTNAKLADYDETAIL 
FOR EACH ROW 



BEGIN 
	IF ( :NEW.ID IS NULL ) THEN 
		SELECT SQ_KP_KPPROJNAKLDETAIL.NEXTVAL INTO :NEW.ID FROM DUAL; 
	END IF; 
END;


/
ALTER TRIGGER "DB_JT"."TBI_KPPROJNAKLDETAIL_ID" ENABLE;


PROMPT Completed TBI_KPPROJNAKLDETAIL_ID.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPPROJNAKL_ID.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPPROJNAKL_ID.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPPROJNAKL_ID
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPPROJNAKL_ID" 
BEFORE INSERT ON KP_DAT_PROJEKTNAKLADY 
FOR EACH ROW 



BEGIN 
	IF ( :NEW.ID IS NULL ) THEN 
		SELECT SQ_KP_KPPROJNAKL.NEXTVAL INTO :NEW.ID FROM DUAL; 
	END IF; 
END;


/
ALTER TRIGGER "DB_JT"."TBI_KPPROJNAKL_ID" ENABLE;


PROMPT Completed TBI_KPPROJNAKL_ID.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPRELSUBCLEN_RP.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPRELSUBCLEN_RP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPRELSUBCLEN_RP
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPRELSUBCLEN_RP" 
BEFORE INSERT ON KP_REL_SUBKONSOLIDACECLEN_RP
FOR EACH ROW
begin
  insert into KP_LOG_SUBKONSOLIDACECLEN_RP (
    C_AKCE,
	ID_KTGSUBKONSOLIDACE,
	ID_KTGUCETNISPOLECNOST,
	C_KDYPOUZIT,
	C_AKTIVAPASIVA,
	C_VYSLEDOVKA,
	C_DOKLADVAZBY,
	C_DOKLAD,
	S_UZIVATEL,
	DT_DATUMZMENY)
  values (
    'I',
	:new.ID_KTGSUBKONSOLIDACE,
	:new.ID_KTGUCETNISPOLECNOST,
	:new.C_KDYPOUZIT,
	:new.C_AKTIVAPASIVA,
	:new.C_VYSLEDOVKA,
	:new.C_DOKLADVAZBY,
	:new.C_DOKLAD,
	:new.S_UZIVATEL,
	:new.DT_DATUMZMENY);
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPRELSUBCLEN_RP" ENABLE;


PROMPT Completed TBI_KPRELSUBCLEN_RP.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPSPOLECNOSTLIST.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPSPOLECNOSTLIST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPSPOLECNOSTLIST
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPSPOLECNOSTLIST" 
before insert
on kp_dat_spolecnostList
for each row
begin
	if ( NVL ( :new.id, 0 ) = 0 ) then
		select sq_kpSpolecnostList.nextVal into :new.id from dual;
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPSPOLECNOSTLIST" ENABLE;


PROMPT Completed TBI_KPSPOLECNOSTLIST.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPSPOLECNOSTLISTDETAIL.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPSPOLECNOSTLISTDETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPSPOLECNOSTLISTDETAIL
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPSPOLECNOSTLISTDETAIL" 
before insert
on kp_dat_spolecnostListDetail
for each row
begin
	if ( NVL ( :new.id, 0 ) = 0 ) then
		select sq_kpSpolecnostListDetail.nextVal into :new.id from dual;
	end if;
end;



/
ALTER TRIGGER "DB_JT"."TBI_KPSPOLECNOSTLISTDETAIL" ENABLE;


PROMPT Completed TBI_KPSPOLECNOSTLISTDETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPSUBKONSETAPA.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPSUBKONSETAPA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPSUBKONSETAPA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPSUBKONSETAPA" 
before insert on KP_ktg_subKonsolidaceEtapa
for each row



begin
	select sq_KP_ktg_subKonsolidaceEtapa.nextVal into :new.id from dual;
end;

/
ALTER TRIGGER "DB_JT"."TBI_KPSUBKONSETAPA" ENABLE;


PROMPT Completed TBI_KPSUBKONSETAPA.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPTMPDOKLADVAZBY.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPTMPDOKLADVAZBY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPTMPDOKLADVAZBY
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPTMPDOKLADVAZBY" 
before insert on KP_TMP_DOKLADVAZBY
for each row
declare
  rowDoklad kp_dat_doklad%rowtype;
  rowSpolecnost kp_ktg_ucetniSpolecnost%rowtype;
  l int;
begin
   :new.nl_poradi := 100;  -- neutralni
   select * into rowDoklad from kp_dat_doklad where id = :new.id_doklad;
   select * into rowSpolecnost from kp_ktg_ucetniSpolecnost where id = rowDoklad.id_ktgUcetniSPolecnost;
   if ( rowSpolecnost.id_centrala is not null ) then
      -- kdyz mam urcenou centralu tak jsem pobocka
      :new.id_centrala := rowSpolecnost.id_centrala;
      :new.nl_poradi := 10;  -- pobocky
   else
      -- zjistit jestli nejsem centrala
      select count(*) into l from kp_ktg_ucetniSpolecnost where id_centrala = rowSpolecnost.id;
      if ( l > 0 ) then
        :new.nl_poradi := 20;  -- centraly
      end if;
   end if;

end;

/
ALTER TRIGGER "DB_JT"."TBI_KPTMPDOKLADVAZBY" ENABLE;


PROMPT Completed TBI_KPTMPDOKLADVAZBY.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPTYPSUBETAPA.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPTYPSUBETAPA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPTYPSUBETAPA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPTYPSUBETAPA" 
before insert on KP_KTG_TYPSUBETAPA
for each row
begin
	select sq_KP_ktgTYPSUBETAPA.nextVal into :new.id from dual;
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPTYPSUBETAPA" ENABLE;


PROMPT Completed TBI_KPTYPSUBETAPA.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPTYPSUBPRAVIDLO.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPTYPSUBPRAVIDLO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPTYPSUBPRAVIDLO
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPTYPSUBPRAVIDLO" 
before insert on KP_KTG_TYPSUBPRAVIDLO
for each row
begin
	select sq_KP_ktgTYPSUBPRAVIDLO.nextVal into :new.id from dual;
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPTYPSUBPRAVIDLO" ENABLE;


PROMPT Completed TBI_KPTYPSUBPRAVIDLO.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KPTYPSUBPRAVIDLODETAIL.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KPTYPSUBPRAVIDLODETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KPTYPSUBPRAVIDLODETAIL
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KPTYPSUBPRAVIDLODETAIL" 
before insert on KP_KTG_TYPSUBPRAVIDLODETAIL
for each row
begin
	select sq_KP_ktgTYPSUBPRAVIDLODETAIL.nextVal into :new.id from dual;
end;


/
ALTER TRIGGER "DB_JT"."TBI_KPTYPSUBPRAVIDLODETAIL" ENABLE;


PROMPT Completed TBI_KPTYPSUBPRAVIDLODETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_CISRADEKTEXT.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_CISRADEKTEXT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_CISRADEKTEXT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_CISRADEKTEXT" 
after insert on KP_cis_RadekText
for each row



begin
	insert into KP_cis_RadekTextLang ( id, s_locale, s_popis )
	values ( :new.id, 'cs_CZ', :new.s_popis );
end;

/
ALTER TRIGGER "DB_JT"."TBI_KP_CISRADEKTEXT" ENABLE;


PROMPT Completed TBI_KP_CISRADEKTEXT.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_CISUCETUNIF.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_CISUCETUNIF.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_CISUCETUNIF
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_CISUCETUNIF" 
before insert on KP_CIS_UCETUNIF
for each row



begin
	if ( NVL ( :new.id, 0 ) = 0 ) then
		select SQ_KP_UCETUNIF.nextVal into :new.id from dual;
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBI_KP_CISUCETUNIF" ENABLE;


PROMPT Completed TBI_KP_CISUCETUNIF.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_CIS_ACC_PPF.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_CIS_ACC_PPF.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_CIS_ACC_PPF
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_CIS_ACC_PPF" 
BEFORE INSERT ON KP_CIS_ACC_PPF
FOR EACH ROW 
BEGIN
  SELECT SQ_KP_CIS_ACC_PPF.NEXTVAL INTO :NEW.ID FROM DUAL;
END;

/
ALTER TRIGGER "DB_JT"."TBI_KP_CIS_ACC_PPF" ENABLE;


PROMPT Completed TBI_KP_CIS_ACC_PPF.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_DAT_DOKLADFRONTA.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_DAT_DOKLADFRONTA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_DAT_DOKLADFRONTA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_DAT_DOKLADFRONTA" 
BEFORE INSERT
ON DB_JT.KP_DAT_DOKLADFRONTA 
REFERENCING NEW AS NEW OLD AS OLD
FOR EACH ROW



begin
	if ( :new.id is null ) then
		select sq_KP_dat_DokladFronta.nextVal into :new.id from dual;
	end if;
	--:new.aidkrok:=1;
end;


/
ALTER TRIGGER "DB_JT"."TBI_KP_DAT_DOKLADFRONTA" ENABLE;


PROMPT Completed TBI_KP_DAT_DOKLADFRONTA.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_DAT_DOKLADNASTROJ.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_DAT_DOKLADNASTROJ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_DAT_DOKLADNASTROJ
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_DAT_DOKLADNASTROJ" 
BEFORE INSERT ON KP_DAT_DOKLADNASTROJ
FOR EACH ROW
begin
	if ( :new.id is null ) then
		select sq_KP_dat_DokladAgrTypNast.nextVal into :new.id from dual;
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBI_KP_DAT_DOKLADNASTROJ" ENABLE;


PROMPT Completed TBI_KP_DAT_DOKLADNASTROJ.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_DAT_DOKLADNASTROJCP.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_DAT_DOKLADNASTROJCP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_DAT_DOKLADNASTROJCP
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_DAT_DOKLADNASTROJCP" 
BEFORE INSERT ON KP_DAT_DOKLADnastrojCP
FOR EACH ROW
begin
	if ( :new.id is null ) then
		select sq_KP_dat_DokladAgrTypNastCP.nextVal into :new.id from dual;
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBI_KP_DAT_DOKLADNASTROJCP" ENABLE;


PROMPT Completed TBI_KP_DAT_DOKLADNASTROJCP.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_DAT_DOKLADPOLOZKA.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_DAT_DOKLADPOLOZKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_DAT_DOKLADPOLOZKA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_DAT_DOKLADPOLOZKA" 
before insert on KP_dat_DokladPolozka
for each row
begin
  if ( :new.id is null ) then
   	select sq_KP_tmp_DokladPolozka.nextVal into :new.id from dual;
   end if;
   
end;


/
ALTER TRIGGER "DB_JT"."TBI_KP_DAT_DOKLADPOLOZKA" ENABLE;


PROMPT Completed TBI_KP_DAT_DOKLADPOLOZKA.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_DAT_KONSOLIDACEFRONTA.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_DAT_KONSOLIDACEFRONTA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_DAT_KONSOLIDACEFRONTA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_DAT_KONSOLIDACEFRONTA" 
BEFORE INSERT
ON KP_DAT_KonsolidaceFRONTA
REFERENCING NEW AS NEW OLD AS OLD
FOR EACH ROW
begin
	if ( :new.id is null ) then
		select sq_KP_dat_KonsolidaceFronta.nextVal into :new.id from dual;
	end if;
	:new.session_id := app.f_getSessionID;
	select id_ktgUcetniSkupina into :new.id_ktgUcetniSkupina from kp_ktg_subkonsolidace where id_ktgUcetniSpolecnost = :new.aIdKtgSubKonsolidace;
end;


/
ALTER TRIGGER "DB_JT"."TBI_KP_DAT_KONSOLIDACEFRONTA" ENABLE;


PROMPT Completed TBI_KP_DAT_KONSOLIDACEFRONTA.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_DAT_OPERACNIRIZIKOD_ID.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_DAT_OPERACNIRIZIKOD_ID.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_DAT_OPERACNIRIZIKOD_ID
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_DAT_OPERACNIRIZIKOD_ID" 
before insert on KP_dat_operacniRizikoDetail
for each row



begin
	if ( NVL ( :new.id, 0 )  = 0 ) then
		select sq_KP_dat_operacniRizikoD.nextVal into :new.id from dual;
	end if;
end;

/
ALTER TRIGGER "DB_JT"."TBI_KP_DAT_OPERACNIRIZIKOD_ID" ENABLE;


PROMPT Completed TBI_KP_DAT_OPERACNIRIZIKOD_ID.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_DAT_OPERACNIRIZIKO_ID.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_DAT_OPERACNIRIZIKO_ID.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_DAT_OPERACNIRIZIKO_ID
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_DAT_OPERACNIRIZIKO_ID" 
before insert on KP_dat_operacniRiziko
for each row



begin
	if ( NVL ( :new.id, 0 )  = 0 ) then
		select sq_KP_dat_operacniRiziko.nextVal into :new.id from dual;
	end if;
end;

/
ALTER TRIGGER "DB_JT"."TBI_KP_DAT_OPERACNIRIZIKO_ID" ENABLE;


PROMPT Completed TBI_KP_DAT_OPERACNIRIZIKO_ID.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_DEFLISTBUNKA.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_DEFLISTBUNKA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_DEFLISTBUNKA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_DEFLISTBUNKA" 
before insert on KP_def_ListBunka
for each row



begin
	if ( NVL ( :new.id, 0 )  = 0 ) then
		select SQ_KP_DEFLISTBUNKA.nextVal into :new.id from dual;
	end if;
end;

/
ALTER TRIGGER "DB_JT"."TBI_KP_DEFLISTBUNKA" ENABLE;


PROMPT Completed TBI_KP_DEFLISTBUNKA.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_DEFLISTBUNKASUM.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_DEFLISTBUNKASUM.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_DEFLISTBUNKASUM
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_DEFLISTBUNKASUM" 
before insert on KP_def_ListBunkaSum 
for each row 



begin 
	if ( NVL ( :new.id, 0 )  = 0 ) then 
		select sq_KP_tmp_DefListBunkaSum.nextVal into :new.id from dual; 
	end if; 
end;


/
ALTER TRIGGER "DB_JT"."TBI_KP_DEFLISTBUNKASUM" ENABLE;


PROMPT Completed TBI_KP_DEFLISTBUNKASUM.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_DEFLISTBUNKAUCET.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_DEFLISTBUNKAUCET.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_DEFLISTBUNKAUCET
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_DEFLISTBUNKAUCET" 
before insert on KP_def_ListBunkaUcet
for each row



begin
	if ( NVL ( :new.id, 0 )  = 0 ) then
		select sq_KP_tmp_DefListBunkaUcet.nextVal into :new.id from dual;
	end if;

	if ( NVL ( :new.id_parent, 0 )  = 0 ) then
		:new.id_parent := :new.id;
	end if;

end;



/
ALTER TRIGGER "DB_JT"."TBI_KP_DEFLISTBUNKAUCET" ENABLE;


PROMPT Completed TBI_KP_DEFLISTBUNKAUCET.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_DEF_NASTROJOPERACE.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_DEF_NASTROJOPERACE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_DEF_NASTROJOPERACE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_DEF_NASTROJOPERACE" 
before insert on KP_def_nastrojOperace
for each row



begin
	if ( NVL ( :new.id, 0 )  = 0 ) then
		select sq_KP_def_nastrojOperace.nextVal into :new.id from dual;
	end if;
end;

/
ALTER TRIGGER "DB_JT"."TBI_KP_DEF_NASTROJOPERACE" ENABLE;


PROMPT Completed TBI_KP_DEF_NASTROJOPERACE.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_DOKLAD_TESTDENNI.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_DOKLAD_TESTDENNI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_DOKLAD_TESTDENNI
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_DOKLAD_TESTDENNI" BEFORE INSERT ON "DB_JT"."KP_DAT_DOKLAD" FOR EACH ROW 
declare
l_pocet int;
begin
	  if ( :new.id_ktgUcetniSpolecnost != :new.id_subKonsolidace ) then
	  	  :new.c_baseDoklad := '0';
	  end if;

	if ( :new.s_uzivatel != 'denni' ) then
		return;
	end if;

  select count(*) into l_pocet
  from KP_dat_Doklad
  where
    id_ktgDoklad = :new.id_ktgDoklad and id_ktgUcetniSpolecnost = :new.id_ktgUcetniSpolecnost and
    nl_krok = :new.nl_krok and s_uzivatel = :new.s_uzivatel and trunc(dt_datum,'month') = trunc(:new.dt_datum,'month');

  if ( l_pocet > 0 ) then
    raise_application_error ( -20000, 'Denni doklad pro tento mesic jiz existuje. ' || :new.dt_datum || '  ' || :new.id_ktgUcetniSpolecnost );
  end if;

end;



/
ALTER TRIGGER "DB_JT"."TBI_KP_DOKLAD_TESTDENNI" ENABLE;


PROMPT Completed TBI_KP_DOKLAD_TESTDENNI.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_GESTORTRANSAKCE.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_GESTORTRANSAKCE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_GESTORTRANSAKCE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_GESTORTRANSAKCE" 
BEFORE INSERT ON KP_REL_GESTORTRANSAKCE
for each row
BEGIN  
	if ( NVL ( :new.id, 0 ) = 0 ) then
		select sq_kp_REL_GESTORTRANSAKCE.nextVal into :new.id from dual;
	end if;
END;

/
ALTER TRIGGER "DB_JT"."TBI_KP_GESTORTRANSAKCE" ENABLE;


PROMPT Completed TBI_KP_GESTORTRANSAKCE.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_GESTORTRANSAKCESPOL.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_GESTORTRANSAKCESPOL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_GESTORTRANSAKCESPOL
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_GESTORTRANSAKCESPOL" 
BEFORE INSERT ON KP_REL_GESTORTRANSAKCE_SPOL
for each row
BEGIN  
	if ( NVL ( :new.id, 0 ) = 0 ) then
		select sq_kp_REL_GESTORTRANSAKCESPOL.nextVal into :new.id from dual;
	end if;
END;

/
ALTER TRIGGER "DB_JT"."TBI_KP_GESTORTRANSAKCESPOL" ENABLE;


PROMPT Completed TBI_KP_GESTORTRANSAKCESPOL.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_KTGUCETNISPOL_PREHLED.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_KTGUCETNISPOL_PREHLED.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_KTGUCETNISPOL_PREHLED
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_KTGUCETNISPOL_PREHLED" 
BEFORE INSERT OR UPDATE ON KP_KTG_UCETNISPOLECNOST
FOR EACH ROW



DECLARE
    pomCnt int;
BEGIN
	select count(*)
	into pomCnt
	from kp_cis_katSpol cks
	where cks.ID = :NEW.ID_CISKATSPOL
	  and cks.C_VYRADIT = '1';

	IF ( :NEW.ID_KATEGORIE=300 OR
	     --:NEW.C_EXTSYSTEM='M' OR
		 :NEW.ID_KATEGORIE=0 OR
		 pomCnt > 0 ) THEN
		:NEW.C_PREHLEDDISPLAY := '0';
	ELSE
		:NEW.C_PREHLEDDISPLAY := '1';
	END IF;
END;


/
ALTER TRIGGER "DB_JT"."TBI_KP_KTGUCETNISPOL_PREHLED" ENABLE;


PROMPT Completed TBI_KP_KTGUCETNISPOL_PREHLED.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_KTG_FINANCNIINVESTICE.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_KTG_FINANCNIINVESTICE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_KTG_FINANCNIINVESTICE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_KTG_FINANCNIINVESTICE" 
before insert on KP_ktg_FinancniInvestice
for each row



begin
	if ( :new.id is null ) then
		select sq_KP_ktg_FinancniInvestice.nextVal into :new.id from dual;
	end if;
end;



/
ALTER TRIGGER "DB_JT"."TBI_KP_KTG_FINANCNIINVESTICE" ENABLE;


PROMPT Completed TBI_KP_KTG_FINANCNIINVESTICE.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_KTG_FININVESTICEEMISE.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_KTG_FININVESTICEEMISE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_KTG_FININVESTICEEMISE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_KTG_FININVESTICEEMISE" 
before insert on KP_ktg_FinInvesticeEmise
for each row



begin
	if ( :new.id is null ) then
		select sq_KP_ktg_FinInvesticeEmise.nextVal into :new.id from dual;
	end if;

	if ( :new.id_parent is null ) then
		:new.id_parent := :new.id;
	end if;

end;



/
ALTER TRIGGER "DB_JT"."TBI_KP_KTG_FININVESTICEEMISE" ENABLE;


PROMPT Completed TBI_KP_KTG_FININVESTICEEMISE.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_KTG_OBDOBI.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_KTG_OBDOBI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_KTG_OBDOBI
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_KTG_OBDOBI" 
before insert on KP_ktg_Obdobi
for each row



declare
	pom int;
	pocet int;
begin

	if ( :new.dt_datumDo is not null ) then
		raise_application_error ( -20000, 'Zakladat lze pouze nova neuzavena obdobi. Tj. musi mit dt_datumDo is null' );
	end if;

	select count(*) into pocet from KP_ktg_Obdobi where dt_datumDo is null;

	if ( pocet > 0 ) then
		raise_application_error ( -20000, 'Existuje dosud neuzavrene obdobi, nelze zalozit nove neuzavrene' );
	end if;
end;



/
ALTER TRIGGER "DB_JT"."TBI_KP_KTG_OBDOBI" ENABLE;


PROMPT Completed TBI_KP_KTG_OBDOBI.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_KTG_OBDOBI_ID.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_KTG_OBDOBI_ID.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_KTG_OBDOBI_ID
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_KTG_OBDOBI_ID" 
before insert on KP_ktg_Obdobi
for each row



begin
	if ( NVL ( :new.id, 0 )  = 0 ) then
		select sq_KP_ktg_Obdobi.nextVal into :new.id from dual;
	end if;
end;



/
ALTER TRIGGER "DB_JT"."TBI_KP_KTG_OBDOBI_ID" ENABLE;


PROMPT Completed TBI_KP_KTG_OBDOBI_ID.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_KTG_UCETNISPOLECNOST.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_KTG_UCETNISPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_KTG_UCETNISPOLECNOST
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_KTG_UCETNISPOLECNOST" 
AFTER INSERT OR UPDATE
OF S_ICO
ON DB_JT.KP_KTG_UCETNISPOLECNOST
REFERENCING NEW AS NEW OLD AS OLD
FOR EACH ROW
declare
    l_proti int;
begin

    update db_jt.KP_ktg_Spolecnost set id_ktgSpolecnost = null where id_ktgSpolecnost = :old.id;

    update db_jt.KP_ktg_Spolecnost set
        id_ktgSpolecnost = :new.id
    where s_ico = :new.s_ico or db_dsa.f_formatICO(:new.s_ico) = s_ico
    ;

    if ( sql%rowcount = 0 ) then
      select db_dsa.sq_kp_ktg_spolecnost.nextVal into l_proti from dual;
      insert into KP_Ktg_Spolecnost ( id, s_ico, s_nazev, id_ktgspolecnost, s_psc )
      values ( l_proti, db_dsa.f_formatICO(:new.s_ico), :new.s_nazev, :new.id, 'U/M' );
    end if;

end;


/
ALTER TRIGGER "DB_JT"."TBI_KP_KTG_UCETNISPOLECNOST" ENABLE;


PROMPT Completed TBI_KP_KTG_UCETNISPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_KTG_UCETNISPOL_LOC.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_KTG_UCETNISPOL_LOC.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_KTG_UCETNISPOL_LOC
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_KTG_UCETNISPOL_LOC" 
before insert on KP_ktg_ucetniSpolecnost
for each row



begin

	if ( :new.s_locale is not null ) then
		return;
	end if;

	select s_locale into :new.s_locale from kp_cis_spolecnostKategorie where id = :new.id_kategorie;

end;

/
ALTER TRIGGER "DB_JT"."TBI_KP_KTG_UCETNISPOL_LOC" ENABLE;


PROMPT Completed TBI_KP_KTG_UCETNISPOL_LOC.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_KTG_UCETSPOL_ID.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_KTG_UCETSPOL_ID.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_KTG_UCETSPOL_ID
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_KTG_UCETSPOL_ID" 
before insert on KP_ktg_ucetniSpolecnost_link
for each row



begin
	if ( NVL ( :new.id, 0 )  = 0 ) then
		select sq_KP_ktg_ucetSpol_link.nextVal into :new.id from dual;
	end if;
end;

/
ALTER TRIGGER "DB_JT"."TBI_KP_KTG_UCETSPOL_ID" ENABLE;


PROMPT Completed TBI_KP_KTG_UCETSPOL_ID.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_LOG_CUSTOMER_GROUP.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_LOG_CUSTOMER_GROUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_LOG_CUSTOMER_GROUP
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_LOG_CUSTOMER_GROUP" 
before insert on  KP_CIS_CUSTOMER_GROUP
for each row
begin

insert into KP_LOG_CUSTOMER_GROUP 
            ( cust_group_name,
              cust_group_code,
              cust_struc_name,
              cust_struc_code,
              dt_platnostod,
              dt_platnostdo,
              c_akce,
              s_uzivatel,
              dt_zmena )
     values ( :new.cust_group_name,
              :new.cust_group_code,
              :new.cust_struc_name,
              :new.cust_struc_code,
              :new.dt_platnostod,
              :new.dt_platnostdo,
              'I',
              ( select 'DB/OS user: ' ||user || '/'||sys_context('USERENV','OS_USER') || ' Host:'||sys_context('USERENV','HOST') || ' Terminal:'||sys_context('USERENV','TERMINAL') from dual ),
              sysdate );           
end;
/
ALTER TRIGGER "DB_JT"."TBI_KP_LOG_CUSTOMER_GROUP" DISABLE;


PROMPT Completed TBI_KP_LOG_CUSTOMER_GROUP.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_LOG_SPOLECNOST_GROUP.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_LOG_SPOLECNOST_GROUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_LOG_SPOLECNOST_GROUP
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_LOG_SPOLECNOST_GROUP" 
before insert on  KP_KTG_SPOLECNOST_GROUP
for each row
begin

insert into KP_LOG_SPOLECNOST_GROUP 
            ( id_spolecnost,
              cust_group_name,
              cust_group_code,
              cust_struc_name,
              cust_struc_code,
              dt_platnostod,
              dt_platnostdo,
              dt_datumzmeny,
              c_akce,
              s_uzivatel,
              dt_zmena )
     values ( :new.id_spolecnost,
              :new.cust_group_name,
              :new.cust_group_code,
              :new.cust_struc_name,
              :new.cust_struc_code,
              :new.dt_platnostod,
              :new.dt_platnostdo,
              :new.dt_datumzmeny,
              'I',
              ( select 'DB/OS user: ' ||user || '/'||sys_context('USERENV','OS_USER') || ' Host:'||sys_context('USERENV','HOST') || ' Terminal:'||sys_context('USERENV','TERMINAL') from dual ),
              sysdate );           
end;
/
ALTER TRIGGER "DB_JT"."TBI_KP_LOG_SPOLECNOST_GROUP" DISABLE;


PROMPT Completed TBI_KP_LOG_SPOLECNOST_GROUP.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_MNGSEGMENTBOSS.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_MNGSEGMENTBOSS.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_MNGSEGMENTBOSS
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_MNGSEGMENTBOSS" 
BEFORE INSERT ON kp_dat_mngSegmentBoss
FOR EACH ROW



BEGIN
	IF ( :NEW.ID IS NULL ) THEN
		SELECT SQ_KP_MNGSEGMENTBOSS.NEXTVAL INTO :NEW.ID FROM DUAL;
	END IF;
END;


/
ALTER TRIGGER "DB_JT"."TBI_KP_MNGSEGMENTBOSS" ENABLE;


PROMPT Completed TBI_KP_MNGSEGMENTBOSS.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KP_PARAMETRY.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KP_PARAMETRY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KP_PARAMETRY
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KP_PARAMETRY" 
before insert on KP_parametry
for each row



begin
	:new.dt_zmena := sysdate;
end;



/
ALTER TRIGGER "DB_JT"."TBI_KP_PARAMETRY" ENABLE;


PROMPT Completed TBI_KP_PARAMETRY.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KTGCENNYPAPIR.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KTGCENNYPAPIR.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KTGCENNYPAPIR
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KTGCENNYPAPIR" 
before insert on Ktg_CennyPapir
for each row



begin
	if ( NVL ( :new.id, 0 ) = 0 ) then
		select SQ_KTG_CENNYPAPIR.nextVal into :new.id from dual;
	end if;
end;

/
ALTER TRIGGER "DB_JT"."TBI_KTGCENNYPAPIR" ENABLE;


PROMPT Completed TBI_KTGCENNYPAPIR.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KTGSPOLECNOSTU.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KTGSPOLECNOSTU.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KTGSPOLECNOSTU
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KTGSPOLECNOSTU" 
BEFORE UPDATE
ON DB_JT.KP_KTG_SPOLECNOST
REFERENCING NEW AS NEW OLD AS OLD
FOR EACH ROW



DECLARE
tmpVar NUMBER;
/******************************************************************************
   NAME:
   PURPOSE:

   REVISIONS:
   Ver        Date        Author           Description
   ---------  ----------  ---------------  ------------------------------------
   1.0        8.10.2004             1. Created this trigger.

   NOTES:

   Automatically available Auto Replace Keywords:
      Object Name:
      Sysdate:         8.10.2004
      Date and Time:   8.10.2004, 19:02:51, and 8.10.2004 19:02:51
      Username:         (set in TOAD Options, Proc Templates)
      Table Name:       (set in the "New PL/SQL Object" dialog)
      Trigger Options:  (set in the "New PL/SQL Object" dialog)
******************************************************************************/
BEGIN
   if ( :new.id != 29148 ) then
   	  return;
	  end if;

	  :new.s_pom_ico := :new.s_ico;
END ;




/
ALTER TRIGGER "DB_JT"."TBI_KTGSPOLECNOSTU" ENABLE;


PROMPT Completed TBI_KTGSPOLECNOSTU.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_KTGUCETNISPOLECNOST.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_KTGUCETNISPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_KTGUCETNISPOLECNOST
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_KTGUCETNISPOLECNOST" 
after insert on KP_KTG_UCETNISPOLECNOST
for each row



begin
	INSERT INTO KP_LOG_UCETNISPOLECNOST (
	   S_AKCE, ID, ID_CISSUBJECT, 
	   S_ICO, SPIN_ID, TOPAS_ID, 
	   QUEST_ID, C_EXTSYSTEM, S_NAZEV, 
	   C_POCITATROZVAHU, S_SOUBORPREDPONA, S_MENA, 
	   S_DBLINK, C_AUTOMATICKEGENEROVANI, ID_KATEGORIE, 
	   C_RKC, S_ZKRATKA, DT_LASTCLOSEDATE, 
	   DT_DATUMARCHIVACE, C_OPCE, ID_CISKATSPOL, 
	   ID_ZODPOVEDNAUCETNI, ID_ODPOVEDNAOSOBA, ID_ADMINISTRATOR, 
	   DT_RELATIVEDATE, ID_TOPMNG, S_POZNAMKA, 
	   C_DANOVAZTRATA, ID_CISOPCE, ND_DOCUROVEN2, 
	   S_LOCALE, C_DOCDISPLAY, C_PREHLEDDISPLAY, 
	   ID_CISNOMINEE, NL_ROKPOCSTAVIMPORTSYSTEM, 
	   S_UZIVATEL, ID_TYPPROJEKTU, DT_UCETNIOBDOBISTART, 
	   DT_UCETNIOBDOBIKONEC, C_ONLINE, DT_ONLINEOD, 
	   ID_CISDATABAZE, ID_KTGODBOR, ID_KTGPROJEKT, 
	   C_NOCNIZPRACOVANI, ID_CISNASTROJUCETNIVYJIMKY, S_SKUPINALIKE, 
	   ND_BUDGETNAVYSENI_OO, ND_BUDGETNAVYSENI_TOP, S_DUVODOFFLINE,
	   ID_MNGSEGMENT) 
	VALUES ( 'I', :new.ID, :new.ID_CISSUBJECT, 
	   :new.S_ICO, :new.SPIN_ID, :new.TOPAS_ID, 
	   :new.QUEST_ID, :new.C_EXTSYSTEM, :new.S_NAZEV, 
	   :new.C_POCITATROZVAHU, :new.S_SOUBORPREDPONA, :new.S_MENA, 
	   :new.S_DBLINK, :new.C_AUTOMATICKEGENEROVANI, :new.ID_KATEGORIE, 
	   :new.C_RKC, :new.S_ZKRATKA, :new.DT_LASTCLOSEDATE, 
	   :new.DT_DATUMARCHIVACE, :new.C_OPCE, :new.ID_CISKATSPOL, 
	   :new.ID_ZODPOVEDNAUCETNI, :new.ID_ODPOVEDNAOSOBA, :new.ID_ADMINISTRATOR, 
	   :new.DT_RELATIVEDATE, :new.ID_TOPMNG, :new.S_POZNAMKA, 
	   :new.C_DANOVAZTRATA, :new.ID_CISOPCE, :new.ND_DOCUROVEN2, 
	   :new.S_LOCALE, :new.C_DOCDISPLAY, :new.C_PREHLEDDISPLAY, 
	   :new.ID_CISNOMINEE, :new.NL_ROKPOCSTAVIMPORTSYSTEM, 
	   :new.S_UZIVATEL, :new.ID_TYPPROJEKTU, :new.DT_UCETNIOBDOBISTART, 
	   :new.DT_UCETNIOBDOBIKONEC, :new.C_ONLINE, :new.DT_ONLINEOD, 
	   :new.ID_CISDATABAZE, :new.ID_KTGODBOR, :new.ID_KTGPROJEKT, 
	   :new.C_NOCNIZPRACOVANI, :new.ID_CISNASTROJUCETNIVYJIMKY, :new.S_SKUPINALIKE, 
	   :new.ND_BUDGETNAVYSENI_OO, :new.ND_BUDGETNAVYSENI_TOP, :new.S_DUVODOFFLINE,
	   :new.ID_MNGSEGMENT); 
end;	


/
ALTER TRIGGER "DB_JT"."TBI_KTGUCETNISPOLECNOST" ENABLE;


PROMPT Completed TBI_KTGUCETNISPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_LOG_AKCE_DETAIL.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_LOG_AKCE_DETAIL.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_LOG_AKCE_DETAIL
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_LOG_AKCE_DETAIL" 
before insert on LOG_akce_Detail
for each row



begin
	select sq_LOG_akce_Detail.nextVal into :new.id from dual;
end;


/
ALTER TRIGGER "DB_JT"."TBI_LOG_AKCE_DETAIL" ENABLE;


PROMPT Completed TBI_LOG_AKCE_DETAIL.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_LOG_SPOL_SKUPINA0.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_LOG_SPOL_SKUPINA0.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_LOG_SPOL_SKUPINA0
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_LOG_SPOL_SKUPINA0" 
  BEFORE INSERT ON DB_JT.LOG_CIS_SPOL_SKUPINA0
  FOR EACH ROW
  begin
  if ( NVL ( :new.id, 0 ) = 0 ) then
    select SQ_CIS_SPOL_SKUPINA_LOG.nextval INTO :new.ID from dual;
  end if;  
  end;
/
ALTER TRIGGER "DB_JT"."TBI_LOG_SPOL_SKUPINA0" ENABLE;


PROMPT Completed TBI_LOG_SPOL_SKUPINA0.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_PROJEKTDOKLAD.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_PROJEKTDOKLAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_PROJEKTDOKLAD
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_PROJEKTDOKLAD" 
before insert on kp_dat_projektDoklad
for each row



begin
	if ( NVL ( :new.id, 0 ) = 0 ) then
		select sq_projektDoklad.nextVal into :new.id from dual;
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBI_PROJEKTDOKLAD" ENABLE;


PROMPT Completed TBI_PROJEKTDOKLAD.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_RELACCJT2PPF.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_RELACCJT2PPF.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_RELACCJT2PPF
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_RELACCJT2PPF" before insert on "KP_REL_ACC_JT2PPF"    for each row begin     if inserting then       if :NEW."ID" is null then          select SQ_KP_REL_ACC_JT2PPF.nextval into :NEW."ID" from dual;       end if;    end if; end;

/
ALTER TRIGGER "DB_JT"."TBI_RELACCJT2PPF" ENABLE;


PROMPT Completed TBI_RELACCJT2PPF.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_TMP_DAT_DOKLADNASTROJCP.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_TMP_DAT_DOKLADNASTROJCP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_TMP_DAT_DOKLADNASTROJCP
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_TMP_DAT_DOKLADNASTROJCP" 
before insert on TMP_DOKLADNASTROJCP
for each row
begin
	if ( :new.id is null ) then
		select sq_KP_dat_DokladAgrTypNastCP.nextVal into :new.id from dual;
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBI_TMP_DAT_DOKLADNASTROJCP" ENABLE;


PROMPT Completed TBI_TMP_DAT_DOKLADNASTROJCP.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_TMP_DOKLADAGRTYPNAST.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_TMP_DOKLADAGRTYPNAST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_TMP_DOKLADAGRTYPNAST
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_TMP_DOKLADAGRTYPNAST" 
BEFORE INSERT ON TMP_DOKLADAGREGTYPNASTROJ
FOR EACH ROW
begin
	if ( :new.id is null ) then
		select sq_KP_dat_DokladAgrTypNast.nextVal into :new.id from dual;
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBI_TMP_DOKLADAGRTYPNAST" ENABLE;


PROMPT Completed TBI_TMP_DOKLADAGRTYPNAST.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_TMP_DOKLADNAST.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_TMP_DOKLADNAST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_TMP_DOKLADNAST
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_TMP_DOKLADNAST" 
BEFORE INSERT ON TMP_DOKLADNASTROJ
FOR EACH ROW
begin
	if ( :new.id is null ) then
		select sq_KP_dat_DokladAgrTypNast.nextVal into :new.id from dual;
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBI_TMP_DOKLADNAST" ENABLE;


PROMPT Completed TBI_TMP_DOKLADNAST.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_TMP_NASTROJDATA.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_TMP_NASTROJDATA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_TMP_NASTROJDATA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_TMP_NASTROJDATA" 
before insert on tmp_nastrojData
for each row
declare
	rowPolozka kp_dat_dokladPolozka%ROWTYPE;
	rowKtgDoklad kp_ktg_doklad%ROWTYPE;
begin
	if ( NVL ( :new.id_dokladPolozka, 0 )  = 0 ) then
		return;
	end if;

	select * into rowPolozka
	from kp_dat_dokladPolozka where id = :new.id_dokladPolozka;

	:new.nl_poradiList := rowPolozka.nl_poradiList;
	:new.nl_radek := rowPolozka.nl_radek;
	:new.nl_sloupec := rowPolozka.nl_sloupec;

	if ( rowPolozka.nl_poradiList < 5 ) then
		:new.c_typVykaz := to_char( rowPolozka.nl_poradiList );
		return;
	end if;

	select
		k.* into rowKtgDoklad
	from
		kp_ktg_doklad k,
		kp_dat_doklad d
	where
		d.id = rowPolozka.id_doklad and
		d.id_ktgDoklad = k.id;

	if ( :new.s_ucet like rowKtgDoklad.s_ucetNaklady || '%' ) then
		:new.c_typVykaz := '6';

	elsif ( :new.s_ucet like rowKtgDoklad.s_ucetVynosy || '%' ) then
		:new.c_typVykaz := '5';
	else
		raise_application_error ( -20000, 'Nelze urcit ucet ' || :new.s_ucet );
	end if;

end;


/
ALTER TRIGGER "DB_JT"."TBI_TMP_NASTROJDATA" ENABLE;


PROMPT Completed TBI_TMP_NASTROJDATA.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_TMP_NASTROJDATAD.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_TMP_NASTROJDATAD.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_TMP_NASTROJDATAD
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_TMP_NASTROJDATAD" 
before insert on TMP_NASTROJData_D
for each row
declare
	pocet int:=0;
	l1 int;
	l2 int;
begin
	 if ( substr(:new.id_extSystem2,1,1) = 'X' ) then
	 	:new.id_extSystem2 := substr(:new.id_extSystem2,2);
	 end if;
	 if ( substr(:new.id_extSystem3,1,1) = 'X' ) then
	 	:new.id_extSystem3 := substr(:new.id_extSystem3,2);
	 end if;

	select count(*) into pocet from KP_def_vyjimkaUcetProdukt
	where :new.s_ucet like s_ucet || '%' and id_cisSubject = kap_nastrojePrepare.currentUcetniSpolecnost.id_cisSubject;

	if ( pocet  = 0 ) then
		return;
	end if;

	l1 := length(:new.id_extSystem2);
	l2 := length(:new.id_extSystem3);

	if ( :new.id_extSystem3 is null ) then
		return;
	end if;

	if ( :new.id_extSystem2 is null and :new.id_extSystem3 is not null ) then
		return;
	end if;

	if ( l1 = 6 ) then
		-- tak nemusim nic prepisovat
		:new.id_extSystem3 := null;
		return;
	end if;

	-- pripad kdyz chceme ignorovat inicializacni produkt number
	:new.id_extSystem2 := :new.id_extSystem3;

end;


/
ALTER TRIGGER "DB_JT"."TBI_TMP_NASTROJDATAD" ENABLE;


PROMPT Completed TBI_TMP_NASTROJDATAD.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_TMP_NASTROJDATAD_KIND.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_TMP_NASTROJDATAD_KIND.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_TMP_NASTROJDATAD_KIND
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_TMP_NASTROJDATAD_KIND" 
before insert on TMP_NASTROJData_D
for each row
begin

	 if ( :new.id_extSystem2 in ( '007835', '000676', '008723', '004634', '008715', '001708', '010831' ) ) then
	 	-- banka CR u ktere chci ignorovat prod_kind, jinak se mi to neagreguje kdyz delam group by prod_kind
		-- a nikomu tady na tom nezalezi, vetsinou jsou to nejake prubezne ucty
		-- asi idealnejsi by bylo to dat rovnou do pripravy dat do kodu v Questoru ( casem :-)
		:new.pc_prod_kind := null;
	end if;

end;


/
ALTER TRIGGER "DB_JT"."TBI_TMP_NASTROJDATAD_KIND" ENABLE;


PROMPT Completed TBI_TMP_NASTROJDATAD_KIND.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_TMP_NASTROJDATAD_TYPE.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_TMP_NASTROJDATAD_TYPE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_TMP_NASTROJDATAD_TYPE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_TMP_NASTROJDATAD_TYPE" 
before insert on TMP_NASTROJData_D
for each row
begin

	if ( :new.pc_prod_kind = 'DEB' ) then
	   if ( :new.pc_prod_type != 'D01' and :new.c_poziceUcet = '.' ) then
	   	  -- u jistiny chci vzdy D01
		  :new.pc_prod_type := 'D01';
		  return;
	   end if;

	   if ( :new.pc_prod_type != 'D07' and :new.c_poziceUcet = '2' ) then
	   	  -- u casoveho rozliseni chci vzdy D07
		  :new.pc_prod_type := 'D07';
		  return;
	   end if;

	end if;

end;


/
ALTER TRIGGER "DB_JT"."TBI_TMP_NASTROJDATAD_TYPE" ENABLE;


PROMPT Completed TBI_TMP_NASTROJDATAD_TYPE.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_TMP_NASTROJDATA_ID.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_TMP_NASTROJDATA_ID.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_TMP_NASTROJDATA_ID
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_TMP_NASTROJDATA_ID" 
BEFORE INSERT ON TMP_NASTROJDATA
FOR EACH ROW
begin
	if ( NVL ( :new.id, 0 )  = 0 ) then
	   select SQ_KP_TMP_NASTROJDATA.nextVal into :new.id from dual;
	end if;
end;


/
ALTER TRIGGER "DB_JT"."TBI_TMP_NASTROJDATA_ID" ENABLE;


PROMPT Completed TBI_TMP_NASTROJDATA_ID.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_TMP_NASTROJZPRACD_KIND.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_TMP_NASTROJZPRACD_KIND.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_TMP_NASTROJZPRACD_KIND
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_TMP_NASTROJZPRACD_KIND" 
before insert on tmp_nastrojZpracovani_D
for each row
begin

	 if ( :new.id_extSystem2 in ( '007835', '000676', '008723', '004634', '008715', '001708', '010831' ) ) then
	 	-- banka CR u ktere chci ignorovat prod_kind, jinak se mi to neagreguje kdyz delam group by prod_kind
		-- a nikomu tady na tom nezalezi, vetsinou jsou to nejake prubezne ucty
		-- asi idealnejsi by bylo to dat rovnou do pripravy dat do kodu v Questoru ( casem :-)
		:new.pc_prod_kind := null;
	end if;

end;


/
ALTER TRIGGER "DB_JT"."TBI_TMP_NASTROJZPRACD_KIND" ENABLE;


PROMPT Completed TBI_TMP_NASTROJZPRACD_KIND.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_TMP_NASTROJZPRACD_TYPE.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_TMP_NASTROJZPRACD_TYPE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_TMP_NASTROJZPRACD_TYPE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_TMP_NASTROJZPRACD_TYPE" 
before insert on tmp_nastrojZpracovani_D
for each row
begin

	if ( :new.pc_prod_kind = 'DEB' ) then
	   if ( :new.pc_prod_type != 'D01' and :new.c_poziceUcet = '.' ) then
	   	  -- u jistiny chci vzdy D01
		  :new.pc_prod_type := 'D01';
		  return;
	   end if;

	   if ( :new.pc_prod_type != 'D07' and :new.c_poziceUcet = '2' ) then
	   	  -- u casoveho rozliseni chci vzdy D07
		  :new.pc_prod_type := 'D07';
		  return;
	   end if;
	   
	end if;

end;


/
ALTER TRIGGER "DB_JT"."TBI_TMP_NASTROJZPRACD_TYPE" ENABLE;


PROMPT Completed TBI_TMP_NASTROJZPRACD_TYPE.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_TMP_NASTROJZPRACOVANI.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_TMP_NASTROJZPRACOVANI.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_TMP_NASTROJZPRACOVANI
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_TMP_NASTROJZPRACOVANI" 
before insert on tmp_nastrojZpracovani
for each row
declare
	rowPolozka kp_dat_dokladPolozka%ROWTYPE;
	rowKtgDoklad kp_ktg_doklad%ROWTYPE;
begin
	if ( NVL ( :new.id_dokladPolozka, 0 )  = 0 ) then
		return;
	end if;

	select * into rowPolozka
	from kp_dat_dokladPolozka where id = :new.id_dokladPolozka;

	:new.nl_poradiList := rowPolozka.nl_poradiList;
	:new.nl_radek := rowPolozka.nl_radek;
	:new.nl_sloupec := rowPolozka.nl_sloupec;

	if ( rowPolozka.nl_poradiList < 5 ) then
		:new.c_typVykaz := to_char( rowPolozka.nl_poradiList );
		return;
	end if;

	select
		k.* into rowKtgDoklad
	from
		kp_ktg_doklad k,
		kp_dat_doklad d
	where
		d.id = rowPolozka.id_doklad and
		d.id_ktgDoklad = k.id;		
		
		
		
	if ( :new.s_ucet like rowKtgDoklad.s_ucetNaklady || '%' ) then
		:new.c_typVykaz := '6';

	elsif ( :new.s_ucet like rowKtgDoklad.s_ucetVynosy || '%' ) then
		:new.c_typVykaz := '5';
	else
		raise_application_error ( -20000, 'Nelze urcit ucet ' || :new.s_ucet );
	end if;

end;


/
ALTER TRIGGER "DB_JT"."TBI_TMP_NASTROJZPRACOVANI" ENABLE;


PROMPT Completed TBI_TMP_NASTROJZPRACOVANI.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_TMP_NASTROJZPRACOVANID.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_TMP_NASTROJZPRACOVANID.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_TMP_NASTROJZPRACOVANID
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_TMP_NASTROJZPRACOVANID" 
before insert on tmp_nastrojZpracovani_D
for each row

declare
	pocet int:=0;
	l1 int;
	l2 int;
begin
	 if ( substr(:new.id_extSystem2,1,1) = 'X' ) then
	 	:new.id_extSystem2 := substr(:new.id_extSystem2,2);
	 end if;
	 if ( substr(:new.id_extSystem3,1,1) = 'X' ) then
	 	:new.id_extSystem3 := substr(:new.id_extSystem3,2);
	 end if;

	select count(*) into pocet from KP_def_vyjimkaUcetProdukt
	where :new.s_ucet like s_ucet || '%' and id_cisSubject = calcNastroje.currentUcetniSpolecnost.id_cisSubject;

	if ( pocet  = 0 ) then
		return;
	end if;

	l1 := length(:new.id_extSystem2);
	l2 := length(:new.id_extSystem3);

	if ( :new.id_extSystem3 is null ) then
		return;
	end if;

	if ( :new.id_extSystem2 is null and :new.id_extSystem3 is not null ) then
		return;
	end if;

	if ( l1 = 6 ) then
		-- tak nemusim nic prepisovat
		:new.id_extSystem3 := null;
		return;
	end if;

	-- pripad kdyz chceme ignorovat inicializacni produkt number
	:new.id_extSystem2 := :new.id_extSystem3;

end;

/
ALTER TRIGGER "DB_JT"."TBI_TMP_NASTROJZPRACOVANID" ENABLE;


PROMPT Completed TBI_TMP_NASTROJZPRACOVANID.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_TMP_NASTROJZPRAC_FCVIEW.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_TMP_NASTROJZPRAC_FCVIEW.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_TMP_NASTROJZPRAC_FCVIEW
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_TMP_NASTROJZPRAC_FCVIEW" 
before insert on tmp_nastrojZpracovani
for each row



declare
   l_id int;
   l_idSpolecnost int;
begin
	if ( :new.id_ktgSpolecnost is null ) then
		return;
	end if;

	select id_ktgSpolecnost into l_idSpolecnost
	from KP_ktg_Spolecnost s
	where  s.id = :new.id_ktgSpolecnost;

	if ( l_idSpolecnost is null ) then
		return;
	end if;

	select count(*)into l_id
	from FC_cis_ucetniSpolecnost f
	where f.id_ktgUcetniSpolecnost = l_idSpolecnost;

	if ( l_id = 0 ) then
		insert into FC_cis_ucetniSpolecnost  ( id_ktgUcetniSpolecnost ) values ( l_idSpolecnost );
	end if;

end;

/
ALTER TRIGGER "DB_JT"."TBI_TMP_NASTROJZPRAC_FCVIEW" DISABLE;


PROMPT Completed TBI_TMP_NASTROJZPRAC_FCVIEW.sql
PROMPT


-- ============================================================================
-- Deploy: TBI_YYY.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBI_YYY.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBI_YYY
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBI_YYY" 
BEFORE INSERT ON yyy
FOR EACH ROW
begin
	
		select sq_KP_dat_DokladAgrTypNast.nextVal into :new.id from dual;
	
end;


/
ALTER TRIGGER "DB_JT"."TBI_YYY" ENABLE;


PROMPT Completed TBI_YYY.sql
PROMPT


-- ============================================================================
-- Deploy: TBU_KPDATDOKLADVAZBYAKCEPT.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBU_KPDATDOKLADVAZBYAKCEPT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBU_KPDATDOKLADVAZBYAKCEPT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBU_KPDATDOKLADVAZBYAKCEPT" 
before update of c_akceptace on KP_dat_DokladVazbyAkcept
for each row



begin
	if ( :new.c_akceptace  = '1' ) then
		:new.dt_akceptace := sysdate;
	else
		:new.dt_akceptace := null;
	end if;
end;

/
ALTER TRIGGER "DB_JT"."TBU_KPDATDOKLADVAZBYAKCEPT" ENABLE;


PROMPT Completed TBU_KPDATDOKLADVAZBYAKCEPT.sql
PROMPT


-- ============================================================================
-- Deploy: TBU_KPDATDOKLZDROJDAT.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBU_KPDATDOKLZDROJDAT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBU_KPDATDOKLZDROJDAT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBU_KPDATDOKLZDROJDAT" BEFORE UPDATE OF "ID_KTGSPOLECNOST" ON "DB_JT"."KP_DAT_DOKLADZDROJDAT" FOR EACH ROW begin

	if ( :new.id_ktgSpolecnost > -2 ) then
		return;
	end if;

	-- nektere prirazeni na -2 ( Chybne ico potrebuji ignorovat )
	-- ta funkce co to aktualizuje neumi rozeznat mezi neni definovano a nenalezena protistrana
	-- v obou pripadech dava -2

	if (
			:new.id_proti_1 is null and
			:new.id_proti_2 is null and
			:new.id_proti_3 is null and
			:new.id_proti_4 is null
	) then
		:new.id_ktgSpolecnost := null;
		return;
	end if;


	if ( :new.id_proti_1 is not null and instr ( :new.s_evidovatProtistranu, '1' ) > 0 ) then
		-- OK tak existuje nejaka protistrana je pozadovana a nebyla nalezena, takze -2 je pro tento pripad korektni
		return;
	end if;
	if ( :new.id_proti_2 is not null and instr ( :new.s_evidovatProtistranu, '2' ) > 0 ) then
		-- OK tak existuje nejaka protistrana je pozadovana a nebyla nalezena, takze -2 je pro tento pripad korektni
		return;
	end if;
	if ( :new.id_proti_3 is not null and instr ( :new.s_evidovatProtistranu, '3' ) > 0 ) then
		-- OK tak existuje nejaka protistrana je pozadovana a nebyla nalezena, takze -2 je pro tento pripad korektni
		return;
	end if;
	if ( :new.id_proti_4 is not null and instr ( :new.s_evidovatProtistranu, '4' ) > 0 ) then
		-- OK tak existuje nejaka protistrana je pozadovana a nebyla nalezena, takze -2 je pro tento pripad korektni
		return;
	end if;

	:new.id_ktgSpolecnost := null;

end;


/
ALTER TRIGGER "DB_JT"."TBU_KPDATDOKLZDROJDAT" DISABLE;


PROMPT Completed TBU_KPDATDOKLZDROJDAT.sql
PROMPT


-- ============================================================================
-- Deploy: TBU_KPDATDOKLZDROJDAT_POLOZ.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBU_KPDATDOKLZDROJDAT_POLOZ.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBU_KPDATDOKLZDROJDAT_POLOZ
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBU_KPDATDOKLZDROJDAT_POLOZ" BEFORE UPDATE OF "ID_DOKLADPOLOZKA" ON "DB_JT"."KP_DAT_DOKLADZDROJDAT" FOR EACH ROW 
  WHEN ( new.id_dokladPolozka is not null and old.id_typNastroje is null ) begin

	if ( kap_doklad_calculate.rowDefListBunkaNastroj.id > 0 ) then
		:new.id_typNastroje := kap_doklad_calculate.rowDefListBunkaNastroj.id_typNastroje;
      return;
	end if;

	if ( kap_prim.rowDefListBunkaNastroj.id is not null ) then
		:new.id_typNastroje := kap_prim.rowDefListBunkaNastroj.id_typNastroje;
      return;
	end if;

	:new.id_typNastroje := kap_doklad_calculate.f_getTypNastroje ( :new.id_dokladPolozka, :new.pc_prod_kind, :new.pc_prod_type );

end;



/
ALTER TRIGGER "DB_JT"."TBU_KPDATDOKLZDROJDAT_POLOZ" ENABLE;


PROMPT Completed TBU_KPDATDOKLZDROJDAT_POLOZ.sql
PROMPT


-- ============================================================================
-- Deploy: TBU_KPDATDOKLZDROJDAT_UNIF.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBU_KPDATDOKLZDROJDAT_UNIF.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBU_KPDATDOKLZDROJDAT_UNIF
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBU_KPDATDOKLZDROJDAT_UNIF" BEFORE UPDATE OF "S_EVIDOVATPROTISTRANU" ON "DB_JT"."KP_DAT_DOKLADZDROJDAT" FOR EACH ROW 
begin

	if ( kap_cache.rowDoklad.id_ktgdoklad = 950 ) then
      if ( :new.datum >= '1.1.2005' and 5004 = :new.id_ktgUcetniSpolecnostUnif ) then
         -- vyjimka pro ASSET
         :new.id_ktgUcetniSpolecnostUnif := 5054;
      end if;
   
   	return;
   end if;

	  if ( kap_cache.rowDoklad.nl_krok > 2 ) then
	  	  -- protistranu nastavujeme jenom pro doklad normalni a IFRS
		  :new.s_evidovatProtistranu := :old.s_evidovatProtistranu;
		  return;
	  end if;

	if ( :new.id_ktgUcetniSpolecnostUnif is not null ) then
		-- ted jeste vyjimka pokud to jsou manualne dopisovane transakce, tak to bud maji nastaveno, nebo dohledam
		if ( :new.id_ktgSpolecnost is null ) then
			-- dohledavam
			select id into :new.id_ktgSpolecnost from kp_ktg_spolecnost where id_ktgSpolecnost = :new.id_ktgUcetniSpolecnostUnif;
		else
			-- ma nastaveno tak konec
			return;
		end if;

		return;
	end if;

	if ( :new.pocatecnistav = '1' and ( :new.id_ktgSpolecnost is not null ) ) then
		-- pocatecni stav uz ma tu unifikovanou protistranu urcenou, jenom bych to prepsal a jeste k tomu spatne
		return;
	end if;

	if
		( :new.s_evidovatProtistranu = '0000' or :new.s_evidovatProtistranu = '----' )
	then
		:new.id_ktgSpolecnost := null;
		:new.id_ktgUcetniSpolecnostUnif := null;
		return;
	end if;

	if
		( :new.id_ktgSpolecnost is not null ) and  
		( :new.id_proti_1 is null and :new.id_proti_2 is null and :new.id_proti_3 is null and :new.id_proti_4 is null )
	then
		-- nedelej nic, protistrana je urcena jde o manualne nastavovane transakce
		null;
	else
		:new.id_ktgSpolecnost := f_getUnifProtiID ( :new.c_vyjimkaProtistrana, :new.s_evidovatProtistranu, :new.id_proti_1, :new.id_proti_2, :new.id_proti_3, :new.id_proti_4 );
	end if;
	

	if ( :new.id_ktgSpolecnost is null ) then
		:new.id_ktgUcetniSpolecnostUnif := null;
		return;
	end if;
/*
	select id_ktgSpolecnost into :new.id_ktgUcetniSpolecnostUnif
	from kp_ktg_spolecnost where id = :new.id_ktgSpolecnost;
*/
	:new.id_ktgUcetniSpolecnostUnif := kap_doklad_calculate.f_getCacheUcetniSpolecnost ( :new.id_ktgSpolecnost );

	if ( :new.datum >= '1.1.2005' and 5004 = :new.id_ktgUcetniSpolecnostUnif ) then
		-- vyjimka pro ASSET
		:new.id_ktgUcetniSpolecnostUnif := 5054;
	end if;

end;



/
ALTER TRIGGER "DB_JT"."TBU_KPDATDOKLZDROJDAT_UNIF" ENABLE;


PROMPT Completed TBU_KPDATDOKLZDROJDAT_UNIF.sql
PROMPT


-- ============================================================================
-- Deploy: TBU_KPDATDOKUMENT.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBU_KPDATDOKUMENT.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBU_KPDATDOKUMENT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBU_KPDATDOKUMENT" 
before update on KP_dat_Dokument
for each row
begin
    insert into KP_LOG_DOKUMENT (
	  C_AKCE,
	  ID,
	  ID_CISDOKUMENT,
	  ID_KTGUCETNISPOLECNOST,
	  DT_DATUMZADANI,
	  ID_ZADAVATEL,
	  S_POPIS,
	  ID_TYPTRANSAKCE,
	  S_MENA,
	  S_PISEMNE,
	  C_TYPIZOVANATRAN,
	  DT_TYPIZOVANAOD,
	  DT_TYPIZOVANADO,
	  DT_DATUMZAUCTOVANI,
	  ID_SPOLECNOST,
	  S_CISLODOKLADU,
	  DT_DATUMSPLATNOSTI,
	  ID_APPUSER,
	  ID_ZAUCT,
	  S_PROTISTRANA,
	  ID_CISSTATUS,
	  C_POKLADNITRANSAKCE,
	  ID_GESTOR,
	  DT_GESTORSCHVALENO,
	  DT_POZADDATUMUHRADY,
	  DT_REALDATUMUHRADY,
	  DT_GESTORZAMITNUTO,
	  S_GESTORZAMITNUTO,
	  DT_ZADAVATELZAMITNUTO,
	  S_ZADAVATELZAMITNUTO,
	  id_typizlink,
	  s_duvodzruseni,
	  id_ucspoluhrada,
	  dt_zauctuhrada,
	  id_zauctuhrada,
	  ID_TYPPRECENENI,
      S_UCET,
      S_UCET2,
      C_DPH,
    ID_BUDGET,
    ID_TTDEVELOPER,
    ID_CISUHRADA,
    DT_UCETNIZAMITNUTO,
    S_UCETNIZAMITNUTO,
    ID_KTGUCETNISPOLECNOST2,
    S_UCETB,
    S_UCETB2,
    CERPAT_REZERVU,
    DT_NAVYSENI_SCHVALENO,
    DT_NAVYSENI_ZAMITNUTO,
    S_NAVYSENI_ZAMITNUTO,
    ID_NAVYSENI_MB ,
    CISLOFA                                 
    ,DATPRIJ                                 
    ,DATDPH                                  
    ,CASTKA                                  
    ,FEIS_PRENOS                             
    ,DATODES                                 
    ,TYP_FKT                                 
    ,C_CAPEX_OPEX                            
    ,S_FEISTEXT                              
    ,DATVYSTAVENI                                    
    )
	values (
	  'U',
	  :new.ID,
	  :new.ID_CISDOKUMENT,
	  :new.ID_KTGUCETNISPOLECNOST,
	  :new.DT_DATUMZADANI,
	  :new.ID_ZADAVATEL,
	  :new.S_POPIS,
	  :new.ID_TYPTRANSAKCE,
	  :new.S_MENA,
	  :new.S_PISEMNE,
	  :new.C_TYPIZOVANATRAN,
	  :new.DT_TYPIZOVANAOD,
	  :new.DT_TYPIZOVANADO,
	  :new.DT_DATUMZAUCTOVANI,
	  :new.ID_SPOLECNOST,
	  :new.S_CISLODOKLADU,
	  :new.DT_DATUMSPLATNOSTI,
	  :new.ID_APPUSER,
	  :new.ID_ZAUCT,
	  :new.S_PROTISTRANA,
	  :new.ID_CISSTATUS,
	  :new.C_POKLADNITRANSAKCE,
	  :new.ID_GESTOR,
	  :new.DT_GESTORSCHVALENO,
	  :new.DT_POZADDATUMUHRADY,
	  :new.DT_REALDATUMUHRADY,
	  :new.DT_GESTORZAMITNUTO,
	  :new.S_GESTORZAMITNUTO,
	  :new.DT_ZADAVATELZAMITNUTO,
	  :new.S_ZADAVATELZAMITNUTO,
	  :new.id_typizlink,
	  :new.s_duvodzruseni,
	  :new.id_ucspoluhrada,
	  :new.dt_zauctuhrada,
	  :new.id_zauctuhrada,
	  :new.ID_TYPPRECENENI,
      :new.S_UCET,
      :new.S_UCET2,
      :new.C_DPH,
    :new.ID_BUDGET,
    :new.ID_TTDEVELOPER,
    :new.ID_CISUHRADA,
    :new.DT_UCETNIZAMITNUTO,
    :new.S_UCETNIZAMITNUTO,
    :new.ID_KTGUCETNISPOLECNOST2,
    :new.S_UCETB,
    :new.S_UCETB2,
    :new.CERPAT_REZERVU,
    :new.DT_NAVYSENI_SCHVALENO,
    :new.DT_NAVYSENI_ZAMITNUTO,
    :new.S_NAVYSENI_ZAMITNUTO,
    :new.ID_NAVYSENI_MB ,
        :new.CISLOFA                                 
    ,:new.DATPRIJ                                 
    ,:new.DATDPH                                  
    ,:new.CASTKA                                  
    ,:new.FEIS_PRENOS                             
    ,:new.DATODES                                 
    ,:new.TYP_FKT                                 
    ,:new.C_CAPEX_OPEX                            
    ,:new.S_FEISTEXT                              
    ,:new.DATVYSTAVENI                                    
    );

end;

/
ALTER TRIGGER "DB_JT"."TBU_KPDATDOKUMENT" ENABLE;


PROMPT Completed TBU_KPDATDOKUMENT.sql
PROMPT


-- ============================================================================
-- Deploy: TBU_KPDATDOKUMENTRADEK.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBU_KPDATDOKUMENTRADEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBU_KPDATDOKUMENTRADEK
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBU_KPDATDOKUMENTRADEK" 
 before update on KP_dat_DokumentRadek
 for each row
 begin
    insert into KP_LOG_DOKUMENTRADEK (
	  C_AKCE,
	  ID,
	  ID_DOKUMENT,
	  ID_ODBOR,
	  ID_PROJEKT,
	  ND_CASTKA,
	  ID_ODBOROO,
	  DT_SCHVALENOODBOR,
	  ID_PROJEKTMAN,
	  DT_SCHVALENOPROJEKT,
	  ID_UCSPOLOO,
	  DT_SCHVALENOUCSPOL,
	  ID_UCSPOLTOP,
	  DT_SCHVALENOTOP,
	  S_KOMENTAR,
	  DT_DATUMPREFAKT,
	  ID_PREFAKT,
	  C_KPREFAKT,
	  DT_DATUMZADANI,
	  C_REMOVED,
	  C_ZOBJEDNAVKY,
	  ID_ZAMITNUTO,
	  DT_ZAMITNUTO,
	  S_ZAMITNUTO,
	  ID_DOKUMENTORIG,
	  ID_ODBOROOREAL,
	  ID_PROJEKTMANREAL,
	  ID_UCSPOLOOREAL,
	  ID_UCSPOLTOPREAL,
    ND_OBJ_CASTKA_VOLNA, 
	  ID_OBJ_RADEK    
	  )
	values (
	  'U',
	  :new.ID,
	  :new.ID_DOKUMENT,
	  :new.ID_ODBOR,
	  :new.ID_PROJEKT,
	  :new.ND_CASTKA,
	  :new.ID_ODBOROO,
	  :new.DT_SCHVALENOODBOR,
	  :new.ID_PROJEKTMAN,
	  :new.DT_SCHVALENOPROJEKT,
	  :new.ID_UCSPOLOO,
	  :new.DT_SCHVALENOUCSPOL,
	  :new.ID_UCSPOLTOP,
	  :new.DT_SCHVALENOTOP,
	  :new.S_KOMENTAR,
	  :new.DT_DATUMPREFAKT,
	  :new.ID_PREFAKT,
	  :new.C_KPREFAKT,
	  :new.DT_DATUMZADANI,
	  :new.C_REMOVED,
	  :new.C_ZOBJEDNAVKY,
	  :new.ID_ZAMITNUTO,
	  :new.DT_ZAMITNUTO,
	  :new.S_ZAMITNUTO,
	  :new.ID_DOKUMENTORIG,
	  :new.ID_ODBOROOREAL,
	  :new.ID_PROJEKTMANREAL,
	  :new.ID_UCSPOLOOREAL,
	  :new.ID_UCSPOLTOPREAL,
    :new.ND_OBJ_CASTKA_VOLNA, 
	  :new.ID_OBJ_RADEK
    );
end;

/
ALTER TRIGGER "DB_JT"."TBU_KPDATDOKUMENTRADEK" ENABLE;


PROMPT Completed TBU_KPDATDOKUMENTRADEK.sql
PROMPT


-- ============================================================================
-- Deploy: TBU_KPDATGENEROVANIZAMEK.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBU_KPDATGENEROVANIZAMEK.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBU_KPDATGENEROVANIZAMEK
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBU_KPDATGENEROVANIZAMEK" 
before update 
on kp_dat_generovaniZamek
for each row
begin
	insert into kp_log_generovaniZamek l	 
	       (S_AKCE,
		    ID_CISDOKLAD,
	        ID_KTGUCETNISPOLECNOST,
			DT_DATUM,
			ID_CISZAMEK,
			ID_KTGAPPUSER,
			DT_TIMESTAMP,
			nl_krok)
	values (decode(:new.C_ZAMCENO,'1','I','D'),
		    :new.ID_CISDOKLAD,
	        :new.ID_KTGUCETNISPOLECNOST,
			:new.DT_DATUM,
			:new.ID_CISZAMEK,
			:new.ID_KTGAPPUSER,
			:new.DT_DATUMZMENY,
			:new.nl_krok);
end;


/
ALTER TRIGGER "DB_JT"."TBU_KPDATGENEROVANIZAMEK" ENABLE;


PROMPT Completed TBU_KPDATGENEROVANIZAMEK.sql
PROMPT


-- ============================================================================
-- Deploy: TBU_KPKTGFINANCNIINVESTICE.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBU_KPKTGFINANCNIINVESTICE.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBU_KPKTGFINANCNIINVESTICE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBU_KPKTGFINANCNIINVESTICE" 
before update on KP_KTG_FINANCNIINVESTICE
for each row



begin
    insert into KP_LOG_FINANCNIINVESTICE (
	  C_AKCE,
	  ID,
	  ID_KTGSPOLECNOST,
	  S_MENA,
	  DT_ZMENA,
	  S_UZIVATEL,
	  S_ISIN
    )
	values (
	  'U',
	  :new.ID,
	  :new.ID_KTGSPOLECNOST,
	  :new.S_MENA,
	  :new.DT_ZMENA,
	  :new.S_UZIVATEL,
	  :new.S_ISIN
    );

end;


/
ALTER TRIGGER "DB_JT"."TBU_KPKTGFINANCNIINVESTICE" ENABLE;


PROMPT Completed TBU_KPKTGFINANCNIINVESTICE.sql
PROMPT


-- ============================================================================
-- Deploy: TBU_KPKTGUCETNISKUPINA.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBU_KPKTGUCETNISKUPINA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBU_KPKTGUCETNISKUPINA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBU_KPKTGUCETNISKUPINA" 
before update on kp_ktg_ucetniSkupina
for each row
begin
  insert into kp_log_ucetniSkupina (
    C_AKCE,
	ID,
	S_KOD,
	S_POPIS,
	S_TYPKURSLISTEK,
	ID_CISBANKA,
	S_SKUPINALIKE,
	C_POROVNAVAT,
	C_EXPORTOLAP,
	C_GENERUJSUBKONKAMIL,
	C_TESTOVATVAZBY,
	S_UZIVATEL)
  values (
    'U',
	:new.ID,
	:new.S_KOD,
	:new.S_POPIS,
	:new.S_TYPKURSLISTEK,
	:new.ID_CISBANKA,
	:new.S_SKUPINALIKE,
	:new.C_POROVNAVAT,
	:new.C_EXPORTOLAP,
	:new.C_GENERUJSUBKONKAMIL,
	:new.C_TESTOVATVAZBY,
	:new.S_UZIVATEL);
end;


/
ALTER TRIGGER "DB_JT"."TBU_KPKTGUCETNISKUPINA" ENABLE;


PROMPT Completed TBU_KPKTGUCETNISKUPINA.sql
PROMPT


-- ============================================================================
-- Deploy: TBU_KPRELSUBCLEN_RP.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBU_KPRELSUBCLEN_RP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBU_KPRELSUBCLEN_RP
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBU_KPRELSUBCLEN_RP" 
BEFORE UPDATE ON KP_REL_SUBKONSOLIDACECLEN_RP
FOR EACH ROW
begin
  insert into KP_LOG_SUBKONSOLIDACECLEN_RP (
    C_AKCE,
	ID_KTGSUBKONSOLIDACE,
	ID_KTGUCETNISPOLECNOST,
	C_KDYPOUZIT,
	C_AKTIVAPASIVA,
	C_VYSLEDOVKA,
	C_DOKLADVAZBY,
	C_DOKLAD,
	S_UZIVATEL,
	DT_DATUMZMENY)
  values (
    'U',
	:new.ID_KTGSUBKONSOLIDACE,
	:new.ID_KTGUCETNISPOLECNOST,
	:new.C_KDYPOUZIT,
	:new.C_AKTIVAPASIVA,
	:new.C_VYSLEDOVKA,
	:new.C_DOKLADVAZBY,
	:new.C_DOKLAD,
	:new.S_UZIVATEL,
	:new.DT_DATUMZMENY);
end;


/
ALTER TRIGGER "DB_JT"."TBU_KPRELSUBCLEN_RP" ENABLE;


PROMPT Completed TBU_KPRELSUBCLEN_RP.sql
PROMPT


-- ============================================================================
-- Deploy: TBU_KP_LOG_CUSTOMER_GROUP.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBU_KP_LOG_CUSTOMER_GROUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBU_KP_LOG_CUSTOMER_GROUP
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBU_KP_LOG_CUSTOMER_GROUP" 
before update on  KP_CIS_CUSTOMER_GROUP
for each row
begin

  if ( :old.cust_group_name != :new.cust_group_name or
       :old.cust_group_code != :new.cust_group_code or
       :old.cust_struc_name != :new.cust_struc_name or
       :old.cust_struc_code != :new.cust_struc_code or
       :old.dt_platnostod != :new.dt_platnostod or
       :old.dt_platnostdo != :new.dt_platnostdo )
    then

          insert into KP_LOG_CUSTOMER_GROUP 
                      ( cust_group_name,
                        cust_group_code,
                        cust_struc_name,
                        cust_struc_code,
                        dt_platnostod,
                        dt_platnostdo,
                        c_akce,
                        s_uzivatel,
                        dt_zmena )
               values ( :old.cust_group_name,
                        :old.cust_group_code,
                        :old.cust_struc_name,
                        :old.cust_struc_code,
                        :old.dt_platnostod,
                        :old.dt_platnostdo,
                        'B',
                        ( select 'DB/OS user: ' ||user || '/'||sys_context('USERENV','OS_USER') || ' Host:'||sys_context('USERENV','HOST') || ' Terminal:'||sys_context('USERENV','TERMINAL') from dual ),
                        sysdate );           

          insert into KP_LOG_CUSTOMER_GROUP 
                      ( cust_group_name,
                        cust_group_code,
                        cust_struc_name,
                        cust_struc_code,
                        dt_platnostod,
                        dt_platnostdo,
                        c_akce,
                        s_uzivatel,
                        dt_zmena )
               values ( :new.cust_group_name,
                        :new.cust_group_code,
                        :new.cust_struc_name,
                        :new.cust_struc_code,
                        :new.dt_platnostod,
                        :new.dt_platnostdo,
                        'U',
                        ( select 'DB/OS user: ' ||user || '/'||sys_context('USERENV','OS_USER') || ' Host:'||sys_context('USERENV','HOST') || ' Terminal:'||sys_context('USERENV','TERMINAL') from dual ),
                        sysdate );           

  end if;

end;
/
ALTER TRIGGER "DB_JT"."TBU_KP_LOG_CUSTOMER_GROUP" DISABLE;


PROMPT Completed TBU_KP_LOG_CUSTOMER_GROUP.sql
PROMPT


-- ============================================================================
-- Deploy: TBU_KP_LOG_SPOLECNOST_GROUP.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBU_KP_LOG_SPOLECNOST_GROUP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBU_KP_LOG_SPOLECNOST_GROUP
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBU_KP_LOG_SPOLECNOST_GROUP" 
before update on  KP_KTG_SPOLECNOST_GROUP
for each row
begin

  if ( :old.id_spolecnost != :new.id_spolecnost or
       :old.cust_group_name != :new.cust_group_name or
       :old.cust_group_code != :new.cust_group_code or
       :old.cust_struc_name != :new.cust_struc_name or
       :old.cust_struc_code != :new.cust_struc_code or
       :old.dt_platnostod != :new.dt_platnostod or
       :old.dt_platnostdo != :new.dt_platnostdo or
       :old.dt_datumzmeny != :new.dt_datumzmeny )
    then

          insert into KP_LOG_SPOLECNOST_GROUP 
                      ( id_spolecnost,
                        cust_group_name,
                        cust_group_code,
                        cust_struc_name,
                        cust_struc_code,
                        dt_platnostod,
                        dt_platnostdo,
                        dt_datumzmeny,
                        c_akce,
                        s_uzivatel,
                        dt_zmena )
               values ( :old.id_spolecnost,
                        :old.cust_group_name,
                        :old.cust_group_code,
                        :old.cust_struc_name,
                        :old.cust_struc_code,
                        :old.dt_platnostod,
                        :old.dt_platnostdo,
                        :old.dt_datumzmeny,
                        'B',
                        ( select 'DB/OS user: ' ||user || '/'||sys_context('USERENV','OS_USER') || ' Host:'||sys_context('USERENV','HOST') || ' Terminal:'||sys_context('USERENV','TERMINAL') from dual ),
                        sysdate );           

          insert into KP_LOG_SPOLECNOST_GROUP 
                      ( id_spolecnost,
                        cust_group_name,
                        cust_group_code,
                        cust_struc_name,
                        cust_struc_code,
                        dt_platnostod,
                        dt_platnostdo,
                        dt_datumzmeny,
                        c_akce,
                        s_uzivatel,
                        dt_zmena )
               values ( :new.id_spolecnost,
                        :new.cust_group_name,
                        :new.cust_group_code,
                        :new.cust_struc_name,
                        :new.cust_struc_code,
                        :new.dt_platnostod,
                        :new.dt_platnostdo,
                        :new.dt_datumzmeny,
                        'U',
                        ( select 'DB/OS user: ' ||user || '/'||sys_context('USERENV','OS_USER') || ' Host:'||sys_context('USERENV','HOST') || ' Terminal:'||sys_context('USERENV','TERMINAL') from dual ),
                        sysdate );           

  end if;

end;
/
ALTER TRIGGER "DB_JT"."TBU_KP_LOG_SPOLECNOST_GROUP" DISABLE;


PROMPT Completed TBU_KP_LOG_SPOLECNOST_GROUP.sql
PROMPT


-- ============================================================================
-- Deploy: TBU_KP_REL_SPOLECNOSTKARTATYP.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBU_KP_REL_SPOLECNOSTKARTATYP.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBU_KP_REL_SPOLECNOSTKARTATYP
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBU_KP_REL_SPOLECNOSTKARTATYP" 
before update on kp_rel_spolecnostkartatyp
for each row
begin
   if ( (:new.DT_ZPRAVADALSI != :old.DT_ZPRAVADALSI) 
        or (:new.NL_PERIODAMESICU != :old.NL_PERIODAMESICU) 
      )
      then 
      :new.DT_OLD_ZPRAVADALSI := :old.DT_ZPRAVADALSI;
      :new.OLD_NL_PERIODA     := :old.NL_PERIODAMESICU;
      :new.DT_zmena := sysdate;	
      --:new.S_uzivatel := user;
      select 'DB/OS user: ' ||user || '/'||sys_context('USERENV','OS_USER') || ' Host:'||sys_context('USERENV','HOST') || ' Terminal:'||sys_context('USERENV','TERMINAL') 
      into :new.S_uzivatel
      from dual;      
   end if;
end;

/
ALTER TRIGGER "DB_JT"."TBU_KP_REL_SPOLECNOSTKARTATYP" ENABLE;


PROMPT Completed TBU_KP_REL_SPOLECNOSTKARTATYP.sql
PROMPT


-- ============================================================================
-- Deploy: TBU_KTGUCETNISPOLECNOST.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBU_KTGUCETNISPOLECNOST.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBU_KTGUCETNISPOLECNOST
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBU_KTGUCETNISPOLECNOST" 
after update on KP_KTG_UCETNISPOLECNOST
for each row
declare
	dt date := '1.1.1970';
begin

	if (    
		nvl ( :new.ID, -99 ) = nvl ( :old.id, -99 ) and
      nvl ( :new.ID_CISSUBJECT, -99 ) = nvl ( :old.id_cisSUbject, -99 )  and 
	   nvl ( :new.S_ICO, 'x' ) = nvl ( :old.s_ico, 'x' ) and
      nvl ( :new.SPIN_ID, -99 ) = nvl ( :old.spin_Id, -99 ) and
      nvl ( :new.TOPAS_ID, 'x' ) = nvl ( :Old.topas_id, 'x' ) and 
	   nvl ( :new.QUEST_ID, 'x' ) = nvl ( :old.quest_Id, 'x' ) and
      nvl ( :new.C_EXTSYSTEM, 'x' ) = nvl ( :old.C_EXTSYSTEM, 'x' ) and
      nvl ( :new.S_NAZEV, 'x' ) = nvl ( :old.S_NAZEV, 'x' ) and
	   nvl ( :new.C_POCITATROZVAHU, 'x' ) = nvl ( :old.C_POCITATROZVAHU, 'x' ) and 
      nvl ( :new.S_SOUBORPREDPONA, 'x' ) = nvl ( :old.S_SOUBORPREDPONA, 'x' ) and
      nvl ( :new.S_MENA, 'x' ) = nvl ( :old.S_MENA, 'x' ) and 
	   nvl ( :new.S_DBLINK, 'x' ) = nvl ( :old.S_DBLINK, 'x' ) and
      nvl ( :new.C_AUTOMATICKEGENEROVANI, 'x' ) = nvl ( :old.C_AUTOMATICKEGENEROVANI, 'x' ) and
      nvl ( :new.ID_KATEGORIE, -99 ) = nvl ( :old.ID_KATEGORIE, -99 )  and 
	   nvl ( :new.C_RKC, 'x' ) = nvl ( :old.C_RKC, 'x' ) and 
      nvl ( :new.S_ZKRATKA, 'x' ) = nvl ( :old.S_ZKRATKA, 'x' ) and
	   nvl ( :new.C_OPCE, 'x' ) = nvl ( :old.C_OPCE, 'x' ) and 
      nvl ( :new.ID_CISKATSPOL, -99 ) = nvl ( :old.ID_CISKATSPOL, -99 )  and 
	   nvl ( :new.ID_ZODPOVEDNAUCETNI, -99 ) = nvl ( :old.ID_ZODPOVEDNAUCETNI, -99 )  and
      nvl ( :new.ID_ODPOVEDNAOSOBA, -99 ) = nvl ( :old.ID_ODPOVEDNAOSOBA, -99 )  and
      nvl ( :new.ID_ADMINISTRATOR, -99 ) = nvl (  :old.ID_ADMINISTRATOR, -99 )  and 
	   nvl ( :new.DT_RELATIVEDATE, DT) = nvl ( :old.DT_RELATIVEDATE, dt) and
      nvl ( :new.ID_TOPMNG, -99 ) = nvl ( :old.ID_TOPMNG, -99 ) and
      nvl ( :new.S_POZNAMKA, 'x' ) = nvl ( :old.S_POZNAMKA, 'x' ) and 
	   nvl ( :new.C_DANOVAZTRATA, 'x' ) = nvl ( :old.C_DANOVAZTRATA, 'x' ) and
      nvl ( :new.ID_CISOPCE, -99 ) = nvl (  :old.ID_CISOPCE, -99 )  and
      nvl ( :new.ND_DOCUROVEN2, -99 ) = nvl ( :old.ND_DOCUROVEN2, -99 )  and 
	   nvl ( :new.S_LOCALE, 'x' ) = nvl ( :old.S_LOCALE, 'x' ) and
      nvl ( :new.C_DOCDISPLAY, 'x' ) = nvl ( :old.C_DOCDISPLAY, 'x' ) and      
      nvl ( :new.C_PREHLEDDISPLAY, 'x' ) = nvl ( :old.C_PREHLEDDISPLAY, 'x' ) and 
	   nvl ( :new.ID_CISNOMINEE, -99 ) = nvl (  :old.ID_CISNOMINEE, -99 )  and
      nvl ( :new.NL_ROKPOCSTAVIMPORTSYSTEM, -99 ) = nvl ( :old.NL_ROKPOCSTAVIMPORTSYSTEM, -99 )  and 
      nvl ( :new.ID_TYPPROJEKTU, -99 ) = nvl ( :old.ID_TYPPROJEKTU, -99 ) and
      nvl ( :new.DT_UCETNIOBDOBISTART, DT) = nvl ( :old.DT_UCETNIOBDOBISTART, dt ) and 
	   nvl ( :new.DT_UCETNIOBDOBIKONEC, DT) = nvl ( :old.DT_UCETNIOBDOBIKONEC, dt )  and
      nvl ( :new.C_ONLINE, 'x' ) = nvl ( :old.C_ONLINE, 'x' ) and
      nvl ( :new.DT_ONLINEOD, DT) = nvl ( :old.DT_ONLINEOD, dt ) and
	   nvl ( :new.ID_CISDATABAZE, -99 ) = nvl ( :old.ID_CISDATABAZE, -99 )  and
      nvl ( :new.ID_KTGODBOR, -99 ) = nvl (  :old.ID_KTGODBOR, -99 )  and
      nvl ( :new.ID_KTGPROJEKT, -99 ) = nvl ( :old.ID_KTGPROJEKT, -99 )  and 
	   nvl ( :new.C_NOCNIZPRACOVANI, 'x' ) = nvl ( :old.C_NOCNIZPRACOVANI, 'x' ) and
      nvl ( :new.ID_CISNASTROJUCETNIVYJIMKY, -99 ) = nvl ( :old.ID_CISNASTROJUCETNIVYJIMKY, -99 )  and
      nvl ( :new.S_SKUPINALIKE, 'x' ) = nvl ( :old.S_SKUPINALIKE, 'x' ) and
	   nvl ( :new.ND_BUDGETNAVYSENI_OO, -99 )  = nvl ( :old.ND_BUDGETNAVYSENI_OO, -99 )  and
      nvl ( :new.ND_BUDGETNAVYSENI_TOP, -99 )  = nvl ( :old.ND_BUDGETNAVYSENI_TOP, -99 )  and      
      nvl ( :new.S_DUVODOFFLINE, 'x' ) = nvl ( :old.S_DUVODOFFLINE, 'x' ) and
	   nvl ( :new.ID_MNGSEGMENT, -99 ) = nvl ( :old.ID_MNGSEGMENT , -99 ) 
 	or  :new.S_UZIVATEL  is null
   ) then
   	return;
	end if;      

	INSERT INTO KP_LOG_UCETNISPOLECNOST (
	   S_AKCE, ID, ID_CISSUBJECT, 
	   S_ICO, SPIN_ID, TOPAS_ID, 
	   QUEST_ID, C_EXTSYSTEM, S_NAZEV, 
	   C_POCITATROZVAHU, S_SOUBORPREDPONA, S_MENA, 
	   S_DBLINK, C_AUTOMATICKEGENEROVANI, ID_KATEGORIE, 
	   C_RKC, S_ZKRATKA, DT_LASTCLOSEDATE, 
	   DT_DATUMARCHIVACE, C_OPCE, ID_CISKATSPOL, 
	   ID_ZODPOVEDNAUCETNI, ID_ODPOVEDNAOSOBA, ID_ADMINISTRATOR, 
	   DT_RELATIVEDATE, ID_TOPMNG, S_POZNAMKA, 
	   C_DANOVAZTRATA, ID_CISOPCE, ND_DOCUROVEN2, 
	   S_LOCALE, C_DOCDISPLAY, C_PREHLEDDISPLAY, 
	   ID_CISNOMINEE, NL_ROKPOCSTAVIMPORTSYSTEM, 
	   S_UZIVATEL, ID_TYPPROJEKTU, DT_UCETNIOBDOBISTART, 
	   DT_UCETNIOBDOBIKONEC, C_ONLINE, DT_ONLINEOD, 
	   ID_CISDATABAZE, ID_KTGODBOR, ID_KTGPROJEKT, 
	   C_NOCNIZPRACOVANI, ID_CISNASTROJUCETNIVYJIMKY, S_SKUPINALIKE, 
	   ND_BUDGETNAVYSENI_OO, ND_BUDGETNAVYSENI_TOP, S_DUVODOFFLINE,
	   ID_MNGSEGMENT) 
	VALUES ( 'U', :new.ID, :new.ID_CISSUBJECT, 
	   :new.S_ICO, :new.SPIN_ID, :new.TOPAS_ID, 
	   :new.QUEST_ID, :new.C_EXTSYSTEM, :new.S_NAZEV, 
	   :new.C_POCITATROZVAHU, :new.S_SOUBORPREDPONA, :new.S_MENA, 
	   :new.S_DBLINK, :new.C_AUTOMATICKEGENEROVANI, :new.ID_KATEGORIE, 
	   :new.C_RKC, :new.S_ZKRATKA, :new.DT_LASTCLOSEDATE, 
	   :new.DT_DATUMARCHIVACE, :new.C_OPCE, :new.ID_CISKATSPOL, 
	   :new.ID_ZODPOVEDNAUCETNI, :new.ID_ODPOVEDNAOSOBA, :new.ID_ADMINISTRATOR, 
	   :new.DT_RELATIVEDATE, :new.ID_TOPMNG, :new.S_POZNAMKA, 
	   :new.C_DANOVAZTRATA, :new.ID_CISOPCE, :new.ND_DOCUROVEN2, 
	   :new.S_LOCALE, :new.C_DOCDISPLAY, :new.C_PREHLEDDISPLAY, 
	   :new.ID_CISNOMINEE, :new.NL_ROKPOCSTAVIMPORTSYSTEM, 
	   :new.S_UZIVATEL, :new.ID_TYPPROJEKTU, :new.DT_UCETNIOBDOBISTART, 
	   :new.DT_UCETNIOBDOBIKONEC, :new.C_ONLINE, :new.DT_ONLINEOD, 
	   :new.ID_CISDATABAZE, :new.ID_KTGODBOR, :new.ID_KTGPROJEKT, 
	   :new.C_NOCNIZPRACOVANI, :new.ID_CISNASTROJUCETNIVYJIMKY, :new.S_SKUPINALIKE, 
	   :new.ND_BUDGETNAVYSENI_OO, :new.ND_BUDGETNAVYSENI_TOP, :new.S_DUVODOFFLINE,
	   :new.ID_MNGSEGMENT); 
end;


/
ALTER TRIGGER "DB_JT"."TBU_KTGUCETNISPOLECNOST" ENABLE;


PROMPT Completed TBU_KTGUCETNISPOLECNOST.sql
PROMPT


-- ============================================================================
-- Deploy: TBU_KTG_APPUSER.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBU_KTG_APPUSER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBU_KTG_APPUSER
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBU_KTG_APPUSER" 

before update on KTG_APPUSER
for each row
begin

begin
   insert into LOG_KTG_APPUSER (  
  ID,
               S_USERID, 
               S_USERNAME, 
               S_KRESTNI, 
               S_PRIJMENI, 
               S_TITULYPRED, 
               S_TITULYPO, 
               S_EMAIL, 
               C_INDIKATOR, 
               S_TELEFON, 
               ID_CISDOCUCSPOL, 
               ID_DOCUCSPOL, 
               ID_DOCCOUNTRY, 
               ID_NADRIZENAUCETNI, 
               C_ARCHIVNI, 
               C_OLAP, 
               S_ACTUATEUSERNAME, 
               C_EXTERNI, 
               OLD_USERID,
  S_UZIVATEL,
  C_AKCE,
  DT_DATUM_ZMENY,
  S_POZNAMKA, -- Pridal T.Hronek dne 6.10.2015
  DT_PRIHLASEN -- Pridal T.Hronek dne 6.10.2015
    )
               values (
:old.ID,
:old.S_USERID, 
:old.S_USERNAME, 
:old.S_KRESTNI, 
:old.S_PRIJMENI, 
:old.S_TITULYPRED, 
:old.S_TITULYPO, 
:old.S_EMAIL, 
:old.C_INDIKATOR, 
:old.S_TELEFON, 
:old.ID_CISDOCUCSPOL, 
:old.ID_DOCUCSPOL, 
:old.ID_DOCCOUNTRY, 
:old.ID_NADRIZENAUCETNI, 
:old.C_ARCHIVNI, 
:old.C_OLAP, 
:old.S_ACTUATEUSERNAME, 
:old.C_EXTERNI, 
:old.OLD_USERID,
(  select 'DB/OS user: ' 
||user || '/'||sys_context('USERENV','OS_USER') || ' Host:'||sys_context('USERENV','HOST') || ' Terminal:'||sys_context('USERENV','TERMINAL') 
from dual)
,'B', --backup
sysdate,
  :old.S_POZNAMKA, -- Pridal T.Hronek dne 6.10.2015
  :old.DT_PRIHLASEN -- Pridal T.Hronek dne 6.10.2015
    );

end;


begin
   insert into LOG_KTG_APPUSER (  
  ID,
               S_USERID, 
               S_USERNAME, 
               S_KRESTNI, 
               S_PRIJMENI, 
               S_TITULYPRED, 
               S_TITULYPO, 
               S_EMAIL, 
               C_INDIKATOR, 
               S_TELEFON, 
               ID_CISDOCUCSPOL, 
               ID_DOCUCSPOL, 
               ID_DOCCOUNTRY, 
               ID_NADRIZENAUCETNI, 
               C_ARCHIVNI, 
               C_OLAP, 
               S_ACTUATEUSERNAME, 
               C_EXTERNI, 
               OLD_USERID,
  S_UZIVATEL,
  C_AKCE,
  DT_DATUM_ZMENY,
    S_POZNAMKA, -- Pridal T.Hronek dne 6.10.2015
  DT_PRIHLASEN -- Pridal T.Hronek dne 6.10.2015
    )
               values (
:new.ID,
:new.S_USERID, 
:new.S_USERNAME, 
:new.S_KRESTNI, 
:new.S_PRIJMENI, 
:new.S_TITULYPRED, 
:new.S_TITULYPO, 
:new.S_EMAIL, 
:new.C_INDIKATOR, 
:new.S_TELEFON, 
:new.ID_CISDOCUCSPOL, 
:new.ID_DOCUCSPOL, 
:new.ID_DOCCOUNTRY, 
:new.ID_NADRIZENAUCETNI, 
:new.C_ARCHIVNI, 
:new.C_OLAP, 
:new.S_ACTUATEUSERNAME, 
:new.C_EXTERNI, 
:new.OLD_USERID,
(  select 'DB/OS user: ' 
||user || '/'||sys_context('USERENV','OS_USER') || ' Host:'||sys_context('USERENV','HOST') || ' Terminal:'||sys_context('USERENV','TERMINAL') 
from dual)
,'U', --update
sysdate,
:new.S_POZNAMKA,-- Pridal T.Hronek dne 6.10.2015
:new.DT_PRIHLASEN -- Pridal T.Hronek dne 6.10.2015
    );

end;

end;
/
ALTER TRIGGER "DB_JT"."TBU_KTG_APPUSER" ENABLE;


PROMPT Completed TBU_KTG_APPUSER.sql
PROMPT


-- ============================================================================
-- Deploy: TBU_TMP_OPERACNIRIZIKO.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TBU_TMP_OPERACNIRIZIKO.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TBU_TMP_OPERACNIRIZIKO
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TBU_TMP_OPERACNIRIZIKO" 
before update
on db_jt.tmp_operacniriziko
for each row
begin
	if ( :new.id_businessLinie != -9 ) then
		return;
	end if;
	-- pokud se nepodarilo urcit tak
	:new.c_typ := 'C';
	:new.c_indicator_pc := 'C';
	:new.id_businessLinieOrg := :new.id_businessLinie;
	:new.id_businessLinie := kap_operacni_riziko.f_getBL ( kap_operacni_riziko.aktIdSubject, :new.s_ucet, 'C' );
end ;


/
ALTER TRIGGER "DB_JT"."TBU_TMP_OPERACNIRIZIKO" ENABLE;


PROMPT Completed TBU_TMP_OPERACNIRIZIKO.sql
PROMPT


-- ============================================================================
-- Deploy: TDATA_GENCHECKTRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TDATA_GENCHECKTRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TDATA_GENCHECKTRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TDATA_GENCHECKTRIG" 
                                BEFORE INSERT ON STAGE_TERADATA_SHOWTBLCHECKS
                                FOR EACH ROW 
                                BEGIN
                                  IF :new.MDID IS NULL OR :new.MDID=0 THEN
                                     :new.MDID := MD_META.get_next_id;
                                  END IF;
                                END TDATA_GENCHECKTRIG;

/
ALTER TRIGGER "DB_JT"."TDATA_GENCHECKTRIG" ENABLE;


PROMPT Completed TDATA_GENCHECKTRIG.sql
PROMPT


-- ============================================================================
-- Deploy: TDATA_GENCOLUMNKEYTRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TDATA_GENCOLUMNKEYTRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TDATA_GENCOLUMNKEYTRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TDATA_GENCOLUMNKEYTRIG" 
                                BEFORE INSERT ON STAGE_TERADATA_COLUMNS
                                FOR EACH ROW 
                                BEGIN
                                  IF :new.MDID IS NULL OR :new.MDID=0 THEN
                                     :new.MDID := MD_META.get_next_id;
                                  END IF;
                                END TDATA_GENCOLUMNKEYTRIG;

/
ALTER TRIGGER "DB_JT"."TDATA_GENCOLUMNKEYTRIG" ENABLE;


PROMPT Completed TDATA_GENCOLUMNKEYTRIG.sql
PROMPT


-- ============================================================================
-- Deploy: TDATA_GENCONNKEYTRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TDATA_GENCONNKEYTRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TDATA_GENCONNKEYTRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TDATA_GENCONNKEYTRIG" 
                    BEFORE INSERT ON STAGE_SERVERDETAIL 
                    FOR EACH ROW 
                    BEGIN
                      IF :new.project_id IS NULL THEN
                         :new.project_id := MD_META.get_next_id;
                      END IF;
                      IF :new.svrid IS NULL THEN
                         :new.svrid := MD_META.get_next_id;     
                      END IF;    
                    END TDATA_GENCONNKEYTRIG;

/
ALTER TRIGGER "DB_JT"."TDATA_GENCONNKEYTRIG" ENABLE;


PROMPT Completed TDATA_GENCONNKEYTRIG.sql
PROMPT


-- ============================================================================
-- Deploy: TDATA_GENFKEYKEYTRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TDATA_GENFKEYKEYTRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TDATA_GENFKEYKEYTRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TDATA_GENFKEYKEYTRIG" 
                                BEFORE INSERT ON STAGE_TERADATA_FKEYS
                                FOR EACH ROW 
                                BEGIN
                                  IF :new.MDID1 IS NULL OR :new.MDID1=0 THEN
                                     :new.MDID1 := MD_META.get_next_id;
                                  END IF;
                                  IF :new.MDID2 IS NULL OR :new.MDID2=0 THEN
                                     :new.MDID2 := MD_META.get_next_id;
                                  END IF;
                                END TDATA_GENFKEYKEYTRIG;

/
ALTER TRIGGER "DB_JT"."TDATA_GENFKEYKEYTRIG" ENABLE;


PROMPT Completed TDATA_GENFKEYKEYTRIG.sql
PROMPT


-- ============================================================================
-- Deploy: TDATA_GENIDXCONSTKEYTRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TDATA_GENIDXCONSTKEYTRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TDATA_GENIDXCONSTKEYTRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TDATA_GENIDXCONSTKEYTRIG" 
                                BEFORE INSERT ON STAGE_TERADATA_IDXCONSTRAINTS
                                FOR EACH ROW 
                                BEGIN
                                  IF :new.MDID IS NULL OR :new.MDID=0 THEN
                                     :new.MDID := MD_META.get_next_id;
                                  END IF;
                                END TDATA_GENIDXCONSTKEYTRIG;

/
ALTER TRIGGER "DB_JT"."TDATA_GENIDXCONSTKEYTRIG" ENABLE;


PROMPT Completed TDATA_GENIDXCONSTKEYTRIG.sql
PROMPT


-- ============================================================================
-- Deploy: TDATA_GENINDICESKEYTRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TDATA_GENINDICESKEYTRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TDATA_GENINDICESKEYTRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TDATA_GENINDICESKEYTRIG" 
                                BEFORE INSERT ON STAGE_TERADATA_INDICES
                                FOR EACH ROW 
                                BEGIN
                                  IF :new.MDID IS NULL OR :new.MDID=0 THEN
                                     :new.MDID := MD_META.get_next_id;
                                  END IF;
                                END TDATA_GENINDICESKEYTRIG;

/
ALTER TRIGGER "DB_JT"."TDATA_GENINDICESKEYTRIG" ENABLE;


PROMPT Completed TDATA_GENINDICESKEYTRIG.sql
PROMPT


-- ============================================================================
-- Deploy: TDATA_GENPROCSTRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TDATA_GENPROCSTRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TDATA_GENPROCSTRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TDATA_GENPROCSTRIG" 
                                BEFORE INSERT ON STAGE_TERADATA_PROCEDURES
                                FOR EACH ROW 
                                BEGIN
                                  IF :new.MDID IS NULL OR :new.MDID=0 THEN
                                     :new.MDID := MD_META.get_next_id;
                                  END IF;
                                END TDATA_GENPROCSTRIG;

/
ALTER TRIGGER "DB_JT"."TDATA_GENPROCSTRIG" ENABLE;


PROMPT Completed TDATA_GENPROCSTRIG.sql
PROMPT


-- ============================================================================
-- Deploy: TDATA_GENSCHEMAKEYTRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TDATA_GENSCHEMAKEYTRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TDATA_GENSCHEMAKEYTRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TDATA_GENSCHEMAKEYTRIG" 
                                BEFORE INSERT ON STAGE_TERADATA_DATABASES
                                FOR EACH ROW 
                                BEGIN
                                  IF :new.MDID IS NULL OR :new.MDID=0 THEN
                                     :new.MDID := MD_META.get_next_id;
                                  END IF;
                                END TDATA_GENSCHEMAKEYTRIG;

/
ALTER TRIGGER "DB_JT"."TDATA_GENSCHEMAKEYTRIG" ENABLE;


PROMPT Completed TDATA_GENSCHEMAKEYTRIG.sql
PROMPT


-- ============================================================================
-- Deploy: TDATA_GENTABLEKEYTRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TDATA_GENTABLEKEYTRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TDATA_GENTABLEKEYTRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TDATA_GENTABLEKEYTRIG" 
                                BEFORE INSERT ON STAGE_TERADATA_TABLES
                                FOR EACH ROW 
                                BEGIN
                                  IF :new.MDID IS NULL OR :new.MDID=0 THEN
                                     :new.MDID := MD_META.get_next_id;
                                  END IF;
                                END TDATA_GENTABLEKEYTRIG;

/
ALTER TRIGGER "DB_JT"."TDATA_GENTABLEKEYTRIG" ENABLE;


PROMPT Completed TDATA_GENTABLEKEYTRIG.sql
PROMPT


-- ============================================================================
-- Deploy: TDATA_GENTRIGGERKEYTRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TDATA_GENTRIGGERKEYTRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TDATA_GENTRIGGERKEYTRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TDATA_GENTRIGGERKEYTRIG" 
                                BEFORE INSERT ON STAGE_TERADATA_TRIGGERS
                                FOR EACH ROW 
                                BEGIN
                                  IF :new.MDID IS NULL OR :new.MDID=0 THEN
                                     :new.MDID := MD_META.get_next_id;
                                  END IF;
                                END TDATA_GENTRIGGERKEYTRIG;

/
ALTER TRIGGER "DB_JT"."TDATA_GENTRIGGERKEYTRIG" ENABLE;


PROMPT Completed TDATA_GENTRIGGERKEYTRIG.sql
PROMPT


-- ============================================================================
-- Deploy: TDATA_GENUDTKEYTRIG.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TDATA_GENUDTKEYTRIG.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TDATA_GENUDTKEYTRIG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TDATA_GENUDTKEYTRIG" 
                                BEFORE INSERT ON STAGE_TERADATA_UDTS
                                FOR EACH ROW 
                                BEGIN
                                  IF :new.MDID IS NULL OR :new.MDID=0 THEN
                                     :new.MDID := MD_META.get_next_id;
                                  END IF;
                                END TDATA_GENUDTKEYTRIG;

/
ALTER TRIGGER "DB_JT"."TDATA_GENUDTKEYTRIG" ENABLE;


PROMPT Completed TDATA_GENUDTKEYTRIG.sql
PROMPT


-- ============================================================================
-- Deploy: TRI_KTGAPPUSER.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TRI_KTGAPPUSER.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TRI_KTGAPPUSER
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TRI_KTGAPPUSER" 
BEFORE INSERT ON KTG_APPUSER 
FOR EACH ROW 



BEGIN 
	IF ( :NEW.ID IS NULL ) THEN 
		SELECT SQ_KTGAPPUSER.NEXTVAL INTO :NEW.ID FROM DUAL; 
	END IF; 
END;


/
ALTER TRIGGER "DB_JT"."TRI_KTGAPPUSER" ENABLE;


PROMPT Completed TRI_KTGAPPUSER.sql
PROMPT


-- ============================================================================
-- Deploy: TTTXXX.sql
-- Category: triggers
-- ============================================================================

PROMPT Deploying TTTXXX.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Trigger TTTXXX
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "DB_JT"."TTTXXX" 
BEFORE UPDATE
ON DB_JT.KP_KTG_SPOLECNOST
REFERENCING NEW AS NEW OLD AS OLD
FOR EACH ROW



BEGIN
   if ( :new.id in ( 2,3,4) ) then
   -- ochrana testovacich spolecnosti je mozne cely trigger zrusit po testech
      :new.id_ktgSpolecnost := 6039 + :new.id;
   end if;
END ;




/
ALTER TRIGGER "DB_JT"."TTTXXX" ENABLE;


PROMPT Completed TTTXXX.sql
PROMPT


-- ============================================================================
-- PHASE: Deploy SYNONYMS (2 files)
-- ============================================================================

PROMPT
PROMPT ============================================================================
PROMPT Deploying SYNONYMS (2 files)
PROMPT ============================================================================
PROMPT


-- ============================================================================
-- Deploy: SYN_EXT_SPOLECNOST_ARCH_CESTA.sql
-- Category: synonyms
-- ============================================================================

PROMPT Deploying SYN_EXT_SPOLECNOST_ARCH_CESTA.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Synonymn SYN_EXT_SPOLECNOST_ARCH_CESTA
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE SYNONYM "DB_JT"."SYN_EXT_SPOLECNOST_ARCH_CESTA" FOR "DB_JT"."VW_EXT_SPOLECNOST_ARCH_CESTA";


PROMPT Completed SYN_EXT_SPOLECNOST_ARCH_CESTA.sql
PROMPT


-- ============================================================================
-- Deploy: VW_DEF_ACC_JT2PPF.sql
-- Category: synonyms
-- ============================================================================

PROMPT Deploying VW_DEF_ACC_JT2PPF.sql...

WHENEVER SQLERROR CONTINUE

--------------------------------------------------------
--  DDL for Synonymn VW_DEF_ACC_JT2PPF
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE SYNONYM "DB_JT"."VW_DEF_ACC_JT2PPF" FOR "DB_JT"."KP_DEF_ACC_JT2PPF";


PROMPT Completed VW_DEF_ACC_JT2PPF.sql
PROMPT


-- ============================================================================
-- Post-Deployment: Summary of Objects
-- ============================================================================

PROMPT ============================================================================
PROMPT Object Summary
PROMPT ============================================================================

SELECT object_type, status, COUNT(*) as count
FROM user_objects
GROUP BY object_type, status
ORDER BY object_type, status;

-- ============================================================================
-- Post-Deployment: Check Invalid Objects
-- ============================================================================

PROMPT ============================================================================
PROMPT Checking for INVALID objects...
PROMPT ============================================================================

SELECT object_type, object_name, status
FROM user_objects
WHERE status = 'INVALID'
ORDER BY object_type, object_name;

-- ============================================================================
-- Post-Deployment: Recompile Invalid Objects (3 passes)
-- ============================================================================

PROMPT ============================================================================
PROMPT Recompiling INVALID objects - Pass 1
PROMPT ============================================================================

BEGIN
    FOR obj IN (SELECT object_name, object_type
                FROM user_objects
                WHERE status = 'INVALID'
                ORDER BY DECODE(object_type,
                    'TYPE', 1,
                    'PACKAGE', 2,
                    'PACKAGE BODY', 3,
                    'FUNCTION', 4,
                    'PROCEDURE', 5,
                    'TRIGGER', 6,
                    'VIEW', 7,
                    99))
    LOOP
        BEGIN
            IF obj.object_type = 'PACKAGE BODY' THEN
                EXECUTE IMMEDIATE 'ALTER PACKAGE ' || obj.object_name || ' COMPILE BODY';
            ELSIF obj.object_type = 'PACKAGE' THEN
                EXECUTE IMMEDIATE 'ALTER PACKAGE ' || obj.object_name || ' COMPILE';
            ELSIF obj.object_type = 'TYPE BODY' THEN
                EXECUTE IMMEDIATE 'ALTER TYPE ' || obj.object_name || ' COMPILE BODY';
            ELSIF obj.object_type = 'TYPE' THEN
                EXECUTE IMMEDIATE 'ALTER TYPE ' || obj.object_name || ' COMPILE';
            ELSIF obj.object_type = 'VIEW' THEN
                EXECUTE IMMEDIATE 'ALTER VIEW ' || obj.object_name || ' COMPILE';
            ELSIF obj.object_type = 'TRIGGER' THEN
                EXECUTE IMMEDIATE 'ALTER TRIGGER ' || obj.object_name || ' COMPILE';
            ELSIF obj.object_type = 'FUNCTION' THEN
                EXECUTE IMMEDIATE 'ALTER FUNCTION ' || obj.object_name || ' COMPILE';
            ELSIF obj.object_type = 'PROCEDURE' THEN
                EXECUTE IMMEDIATE 'ALTER PROCEDURE ' || obj.object_name || ' COMPILE';
            END IF;
            DBMS_OUTPUT.PUT_LINE('PASS1 OK: ' || obj.object_type || ' ' || obj.object_name);
        EXCEPTION
            WHEN OTHERS THEN
                DBMS_OUTPUT.PUT_LINE('PASS1 FAIL: ' || obj.object_type || ' ' || obj.object_name);
        END;
    END LOOP;
END;
/

PROMPT ============================================================================
PROMPT Recompiling INVALID objects - Pass 2
PROMPT ============================================================================

BEGIN
    FOR obj IN (SELECT object_name, object_type
                FROM user_objects
                WHERE status = 'INVALID'
                ORDER BY DECODE(object_type,
                    'TYPE', 1,
                    'PACKAGE', 2,
                    'PACKAGE BODY', 3,
                    'FUNCTION', 4,
                    'PROCEDURE', 5,
                    'TRIGGER', 6,
                    'VIEW', 7,
                    99))
    LOOP
        BEGIN
            IF obj.object_type = 'PACKAGE BODY' THEN
                EXECUTE IMMEDIATE 'ALTER PACKAGE ' || obj.object_name || ' COMPILE BODY';
            ELSIF obj.object_type = 'PACKAGE' THEN
                EXECUTE IMMEDIATE 'ALTER PACKAGE ' || obj.object_name || ' COMPILE';
            ELSIF obj.object_type = 'TYPE BODY' THEN
                EXECUTE IMMEDIATE 'ALTER TYPE ' || obj.object_name || ' COMPILE BODY';
            ELSIF obj.object_type = 'TYPE' THEN
                EXECUTE IMMEDIATE 'ALTER TYPE ' || obj.object_name || ' COMPILE';
            ELSIF obj.object_type = 'VIEW' THEN
                EXECUTE IMMEDIATE 'ALTER VIEW ' || obj.object_name || ' COMPILE';
            ELSIF obj.object_type = 'TRIGGER' THEN
                EXECUTE IMMEDIATE 'ALTER TRIGGER ' || obj.object_name || ' COMPILE';
            ELSIF obj.object_type = 'FUNCTION' THEN
                EXECUTE IMMEDIATE 'ALTER FUNCTION ' || obj.object_name || ' COMPILE';
            ELSIF obj.object_type = 'PROCEDURE' THEN
                EXECUTE IMMEDIATE 'ALTER PROCEDURE ' || obj.object_name || ' COMPILE';
            END IF;
            DBMS_OUTPUT.PUT_LINE('PASS2 OK: ' || obj.object_type || ' ' || obj.object_name);
        EXCEPTION
            WHEN OTHERS THEN
                DBMS_OUTPUT.PUT_LINE('PASS2 FAIL: ' || obj.object_type || ' ' || obj.object_name);
        END;
    END LOOP;
END;
/

PROMPT ============================================================================
PROMPT Recompiling INVALID objects - Pass 3
PROMPT ============================================================================

BEGIN
    FOR obj IN (SELECT object_name, object_type
                FROM user_objects
                WHERE status = 'INVALID'
                ORDER BY DECODE(object_type,
                    'TYPE', 1,
                    'PACKAGE', 2,
                    'PACKAGE BODY', 3,
                    'FUNCTION', 4,
                    'PROCEDURE', 5,
                    'TRIGGER', 6,
                    'VIEW', 7,
                    99))
    LOOP
        BEGIN
            IF obj.object_type = 'PACKAGE BODY' THEN
                EXECUTE IMMEDIATE 'ALTER PACKAGE ' || obj.object_name || ' COMPILE BODY';
            ELSIF obj.object_type = 'PACKAGE' THEN
                EXECUTE IMMEDIATE 'ALTER PACKAGE ' || obj.object_name || ' COMPILE';
            ELSIF obj.object_type = 'TYPE BODY' THEN
                EXECUTE IMMEDIATE 'ALTER TYPE ' || obj.object_name || ' COMPILE BODY';
            ELSIF obj.object_type = 'TYPE' THEN
                EXECUTE IMMEDIATE 'ALTER TYPE ' || obj.object_name || ' COMPILE';
            ELSIF obj.object_type = 'VIEW' THEN
                EXECUTE IMMEDIATE 'ALTER VIEW ' || obj.object_name || ' COMPILE';
            ELSIF obj.object_type = 'TRIGGER' THEN
                EXECUTE IMMEDIATE 'ALTER TRIGGER ' || obj.object_name || ' COMPILE';
            ELSIF obj.object_type = 'FUNCTION' THEN
                EXECUTE IMMEDIATE 'ALTER FUNCTION ' || obj.object_name || ' COMPILE';
            ELSIF obj.object_type = 'PROCEDURE' THEN
                EXECUTE IMMEDIATE 'ALTER PROCEDURE ' || obj.object_name || ' COMPILE';
            END IF;
            DBMS_OUTPUT.PUT_LINE('PASS3 OK: ' || obj.object_type || ' ' || obj.object_name);
        EXCEPTION
            WHEN OTHERS THEN
                DBMS_OUTPUT.PUT_LINE('PASS3 FAIL: ' || obj.object_type || ' ' || obj.object_name);
        END;
    END LOOP;
END;
/

-- ============================================================================
-- Final Status Report
-- ============================================================================

PROMPT ============================================================================
PROMPT Final Object Status
PROMPT ============================================================================

SELECT object_type, status, COUNT(*) as count
FROM user_objects
GROUP BY object_type, status
ORDER BY object_type, status;

PROMPT
PROMPT ============================================================================
PROMPT Remaining INVALID Objects
PROMPT ============================================================================

SELECT object_type, object_name
FROM user_objects
WHERE status = 'INVALID'
ORDER BY object_type, object_name;

PROMPT ============================================================================
PROMPT DB_JT Schema Deployment Complete
PROMPT ============================================================================

EXIT;
