package cz.jtbank.konsolidace.mustky;
import cz.jtbank.konsolidace.common.KisException;
import java.sql.*;
import oracle.jbo.server.ApplicationModuleImpl;
import oracle.jbo.server.DBTransaction;
import java.sql.CallableStatement;
import java.sql.SQLException;
import oracle.jbo.server.ViewLinkImpl;
import cz.jtbank.konsolidace.doklady.CisLocaleViewImpl;
//  ---------------------------------------------------------------
//  ---    File generated by Oracle Business Components for Java.
//  ---------------------------------------------------------------

public class MustkyModuleImpl extends ApplicationModuleImpl implements cz.jtbank.konsolidace.mustky.common.MustkyModule   
{
  /**
   * 
   * This is the default constructor (do not remove)
   */
  public MustkyModuleImpl()
  {
  }


  /**
   * 
   * Container's getter for KpTmpCissubjectView1
   */
  public KpTmpCissubjectViewImpl getKpTmpCissubjectView1()
  {
    return (KpTmpCissubjectViewImpl)findViewObject("KpTmpCissubjectView1");
  }

  /**
   * 
   * Sample main for debugging Business Components code using the tester.
   */
  public static void main(String[] args)
  {
    launchTester("cz.jtbank.konsolidace.mustky", "MustkyModuleLocal");
  }

  /**
   * 
   * Container's getter for VwKpBilanceDokladStrukturaView1
   */
  public VwKpBilanceDokladStrukturaViewImpl getVwKpBilanceDokladStrukturaView1()
  {
    return (VwKpBilanceDokladStrukturaViewImpl)findViewObject("VwKpBilanceDokladStrukturaView1");
  }

  /**
   * 
   * Container's getter for ListDokladView1
   */
  public ListDokladViewImpl getListDokladView1()
  {
    return (ListDokladViewImpl)findViewObject("ListDokladView1");
  }

  /**
   * 
   * Container's getter for KpTmpCisucetsumatypView1
   */
  public KpTmpCisucetsumatypViewImpl getKpTmpCisucetsumatypView1()
  {
    return (KpTmpCisucetsumatypViewImpl)findViewObject("KpTmpCisucetsumatypView1");
  }

  /**
   * 
   * Container's getter for VwKpBunkadefiniceuctuView1
   */
  public VwKpBunkadefiniceuctuViewImpl getVwKpBunkadefiniceuctuView1()
  {
    return (VwKpBunkadefiniceuctuViewImpl)findViewObject("VwKpBunkadefiniceuctuView1");
  }

  private String getUser() 
  {
    String user = cz.jtbank.konsolidace.common.Utils.getUserName(this, false);
    return user;
  }
  
  public void defListBunkaUcet(String akce,
                               int cellRowId,
                               int cellId,
                               String ucet,
                               String suma,
                               String valid,
                               String ucetMinus,
                               String evid,
                               String mp,
                               String up,
                               boolean master,
                               int orgTyp) throws KisException 
  {
    String userName = getUser();
    String mustekUserName = master?"master":userName;
    DBTransaction dbTran = this.getDBTransaction();
    CallableStatement st = null;
    try {
      st = dbTran.createCallableStatement("begin db_jt.kap_gui.p_KpDefListBunkaUcet(?,?,?,?,?,?,?,?,?,?,?,?,?); end;",0);
      st.setString(1, akce);
      st.setInt(2, cellRowId);
      st.setInt(3, cellId);
      st.setString(4, ucet==null?null:ucet.trim());
      st.setString(5, suma);
      st.setString(6, valid);
      st.setString(7, ucetMinus==null?null:ucetMinus.trim());
      st.setString(8, evid);
      st.setString(9, mp);
      st.setString(10, up);
      st.setString(11, mustekUserName);
      st.setString(12, userName);
      st.setInt(13, orgTyp);
      st.execute();
    }
    catch (SQLException s) {
      s.printStackTrace(); //pro zacatek
      throw new KisException("Selhalo volání procedury db_jt.kap_gui.p_KpDefListBunkaUcet",s);
    }
    finally {
      try {
        if (st != null) st.close();
      } 
      catch (SQLException s) { /* ignore */}
    }
  }


  public void defListBunkaUcetPlatnost(int Id,
                                       java.sql.Date platnostDo,
                                       boolean master,
                                       boolean konecna) throws KisException 
  {
    String userName = getUser();
    String mustekUserName = master?"master":userName;
    DBTransaction dbTran = this.getDBTransaction();
    CallableStatement st = null;
    try {
      st = dbTran.createCallableStatement("begin db_jt.kap_gui.p_KpDefListBunkaUcetPlatnost(?,?,?,?,?); end;",0);
      st.setInt(1, Id);
      st.setDate(2, platnostDo);
      st.setString(3, mustekUserName);
      st.setString(4, userName);
      st.setString(5, konecna?"1":"0");
      st.execute();
    }
    catch (SQLException s) {
      s.printStackTrace(); //pro zacatek
      throw new KisException("Selhalo volání procedury db_jt.kap_gui.p_KpDefListBunkaUcetPlatnost",s);
    }
    finally {
      try {
        if (st != null) st.close();
      } 
      catch (SQLException s) { /* ignore */}
    }
  }

  public void defListBunkaUcetStart(int Id,
                                    java.sql.Date platnostOd,
                                    boolean master) throws KisException 
  {
    String userName = getUser();
    String mustekUserName = master?"master":userName;
    DBTransaction dbTran = this.getDBTransaction();
    CallableStatement st = null;
    try {
      st = dbTran.createCallableStatement("begin db_jt.kap_gui.p_KpDefListBunkaUcetStart(?,?,?,?); end;",0);
      st.setInt(1, Id);
      st.setDate(2, platnostOd);
      st.setString(3, mustekUserName);
      st.setString(4, userName);
      st.execute();
    }
    catch (SQLException s) {
      s.printStackTrace(); //pro zacatek
      throw new KisException("Selhalo volání procedury db_jt.kap_gui.p_KpDefListBunkaUcetStart",s);
    }
    finally {
      try {
        if (st != null) st.close();
      } 
      catch (SQLException s) { /* ignore */}
    }
  }

  /**
   * 
   * Container's getter for VwKpBunkadefiniceuctuView2
   */
  public VwKpBunkadefiniceuctuViewImpl getVwKpBunkadefiniceuctuView2()
  {
    return (VwKpBunkadefiniceuctuViewImpl)findViewObject("VwKpBunkadefiniceuctuView2");
  }

  /**
   * 
   * Container's getter for VwKpBunkadefiniceuctuView3
   */
  public VwKpBunkadefiniceuctuViewImpl getVwKpBunkadefiniceuctuView3()
  {
    return (VwKpBunkadefiniceuctuViewImpl)findViewObject("VwKpBunkadefiniceuctuView3");
  }

  /**
   * 
   * Container's getter for VwKpBunkadefiniceuctuView4
   */
  public VwKpBunkadefiniceuctuViewImpl getVwKpBunkadefiniceuctuView4()
  {
    return (VwKpBunkadefiniceuctuViewImpl)findViewObject("VwKpBunkadefiniceuctuView4");
  }

  /**
   * 
   * Container's getter for ViewLinkStructBunka1
   */
  public ViewLinkImpl getViewLinkStructBunka1()
  {
    return (ViewLinkImpl)findViewLink("ViewLinkStructBunka1");
  }

  /**
   * 
   * Container's getter for ViewLinkStructBunkaOpr1
   */
  public ViewLinkImpl getViewLinkStructBunkaOpr1()
  {
    return (ViewLinkImpl)findViewLink("ViewLinkStructBunkaOpr1");
  }

  /**
   * 
   * Container's getter for VwKpBunkadefiniceuctuhistView1
   */
  public VwKpBunkadefiniceuctuhistViewImpl getVwKpBunkadefiniceuctuhistView1()
  {
    return (VwKpBunkadefiniceuctuhistViewImpl)findViewObject("VwKpBunkadefiniceuctuhistView1");
  }

  /**
   * 
   * Container's getter for CisLocaleView1
   */
  public CisLocaleViewImpl getCisLocaleView1()
  {
    return (CisLocaleViewImpl)findViewObject("CisLocaleView1");
  }

  /**
   * 
   * Container's getter for KpDefUcetvazbaucetView1
   */
  public KpDefUcetvazbaucetViewImpl getKpDefUcetvazbaucetView1()
  {
    return (KpDefUcetvazbaucetViewImpl)findViewObject("KpDefUcetvazbaucetView1");
  }

  public void ucetVazbaUcet(String akce,
                            int id,
                            int idKtgDoklad,
                            String ucet1,
                            String ucet2,
                            java.sql.Date platnostOd,
                            java.sql.Date platnostDo,
                            String popis,
                            int typ) throws KisException 
  {
    String userName = getUser();
    DBTransaction dbTran = this.getDBTransaction();
    CallableStatement st = null;
    try {
      st = dbTran.createCallableStatement("begin db_jt.kap_guiv.p_KPDefUcetVazbaUcet(?,?,?,?,?,?,?,?,?,?); end;",0);
      st.setString(1, akce);
      st.setInt(2, id);
      st.setInt(3, idKtgDoklad);
      st.setString(4, ucet1==null?null:ucet1.trim());
      st.setString(5, ucet2==null?null:ucet2.trim());
      st.setDate(6, platnostOd);
      st.setDate(7, platnostDo);
      st.setString(8, popis);
      if(typ>0) st.setInt(9, typ); else st.setNull(9, Types.INTEGER);
      st.setString(10, userName);
      st.execute();
    }
    catch (SQLException s) {
      s.printStackTrace(); //pro zacatek
      throw new KisException("Selhalo volání procedury db_jt.kap_guiv.p_KPDefUcetVazbaUcet",s);
    }
    finally {
      try {
        if (st != null) st.close();
      } 
      catch (SQLException s) { /* ignore */}
    }
  }

  /**
   * 
   * Container's getter for KpCisUcetvazbaucettypView1
   */
  public KpCisUcetvazbaucettypViewImpl getKpCisUcetvazbaucettypView1()
  {
    return (KpCisUcetvazbaucettypViewImpl)findViewObject("KpCisUcetvazbaucettypView1");
  }

  /**
   * 
   * Container's getter for KpLogListbunkaucetView1
   */
  public KpLogListbunkaucetViewImpl getKpLogListbunkaucetView1()
  {
    return (KpLogListbunkaucetViewImpl)findViewObject("KpLogListbunkaucetView1");
  }

  /**
   * 
   * Container's getter for KpCisUcetunifView1
   */
  public KpCisUcetunifViewImpl getKpCisUcetunifView1()
  {
    return (KpCisUcetunifViewImpl)findViewObject("KpCisUcetunifView1");
  }

  /**
   * 
   * Container's getter for KpCisUcetuniflangView1
   */
  public KpCisUcetuniflangViewImpl getKpCisUcetuniflangView1()
  {
    return (KpCisUcetuniflangViewImpl)findViewObject("KpCisUcetuniflangView1");
  }

  /**
   * 
   * Container's getter for KpDefUcet2ucetunifView1
   */
  public KpDefUcet2ucetunifViewImpl getKpDefUcet2ucetunifView1()
  {
    return (KpDefUcet2ucetunifViewImpl)findViewObject("KpDefUcet2ucetunifView1");
  }

  public void defUcet2ucetUnif(String akce,
                               int id,
                               int idUcetUnif,
                               String ucet,
                               int idSubject,
                               java.sql.Date platnostOd,
                               java.sql.Date platnostDo,
                               String suma,
                               String evid,
                               String testMU) throws KisException 
  {
    String userName = getUser();
    DBTransaction dbTran = this.getDBTransaction();
    CallableStatement st = null;
    try {
      st = dbTran.createCallableStatement("begin db_jt.kap_gui.p_KpDefUcet2UcetUnif(?,?,?,?,?,?,?,?,?,?,?); end;",0);
      st.setString(1, akce);
      st.setInt(2, id);
      st.setInt(3, idUcetUnif);
      st.setString(4, ucet);
      st.setInt(5, idSubject);
      st.setDate(6, platnostOd);
      st.setDate(7, platnostDo);
      st.setString(8, userName);
      st.setString(9, suma);
      st.setString(10, evid);
      st.setString(11, testMU);
      st.execute();
    }
    catch (SQLException s) {
      s.printStackTrace(); //pro zacatek
      throw new KisException("Selhalo volání procedury db_jt.kap_gui.p_KpDefUcet2UcetUnif",s);
    }
    finally {
      try {
        if (st != null) st.close();
      } 
      catch (SQLException s) { /* ignore */}
    }
  }

  public void cisUcetUnif(String akce,
                          int id,
                          String ucet,
                          String popis,
                          String locale,
                          String vazby,
                          String klasse,
                          String share,
                          String multi,
                          String country, 
                          String parties, 
                          String sLimitDetail,
						  String maturity
                          ) throws KisException 
  {
    String userName = getUser();
    DBTransaction dbTran = this.getDBTransaction();
    CallableStatement st = null;
    try {
      st = dbTran.createCallableStatement("begin db_jt.kap_gui.p_KpCisUcetUnif(?,?,?,?,?,?,?,?,?,?,?,?,?,?); end;",0);
      st.setString(1, akce);
      st.setInt(2, id);
      st.setString(3, ucet);
      st.setString(4, popis);
      st.setString(5, locale);
      st.setString(6, userName);
      st.setString(7, vazby);
      st.setString(8, klasse);
      st.setString(9, share);
      st.setString(10, multi);
      st.setString(11, country);
      st.setString(12, parties);
      st.setString(13, sLimitDetail);
	  st.setString(14, maturity);
      st.execute();
    }
    catch (SQLException s) {
      s.printStackTrace(); //pro zacatek
      throw new KisException("Selhalo volání procedury db_jt.kap_gui.p_KpCisUcetUnif",s);
    }
    finally {
      try {
        if (st != null) st.close();
      } 
      catch (SQLException s) { /* ignore */}
    }
  }

  /**
   * 
   * Container's getter for VwKpUcet2definiceView1
   */
  public VwKpUcet2definiceViewImpl getVwKpUcet2definiceView1()
  {
    return (VwKpUcet2definiceViewImpl)findViewObject("VwKpUcet2definiceView1");
  }

  /**
   * 
   * Container's getter for KpTmpCissubjectAllView1
   */
  public KpTmpCissubjectAllViewImpl getKpTmpCissubjectAllView1()
  {
    return (KpTmpCissubjectAllViewImpl)findViewObject("KpTmpCissubjectAllView1");
  }
}