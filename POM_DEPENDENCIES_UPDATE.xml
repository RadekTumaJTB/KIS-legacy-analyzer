<!--
  Apache Log4j 1.x â†’ SLF4J Migration - POM.xml Dependency Updates
  Date: 2025-12-05
  Security: CVE-2021-44228 (Log4Shell) vulnerability fix
-->

<!-- ============================================ -->
<!-- STEP 1: ADD NEW SLF4J/Logback dependencies  -->
<!-- ============================================ -->

<!-- SLF4J API - Simple Logging Facade for Java -->
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-api</artifactId>
    <version>2.0.9</version>
</dependency>

<!-- Logback Classic - SLF4J implementation -->
<dependency>
    <groupId>ch.qos.logback</groupId>
    <artifactId>logback-classic</artifactId>
    <version>1.4.11</version>
</dependency>

<!-- Logback Core - Required by logback-classic -->
<dependency>
    <groupId>ch.qos.logback</groupId>
    <artifactId>logback-core</artifactId>
    <version>1.4.11</version>
</dependency>

<!-- Optional: Log4j to SLF4J bridge (if other libraries use Log4j) -->
<!--
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>log4j-over-slf4j</artifactId>
    <version>2.0.9</version>
</dependency>
-->

<!-- ============================================ -->
<!-- STEP 2: REMOVE OLD Log4j 1.x dependency     -->
<!-- ============================================ -->

<!-- REMOVE THIS - Contains CVE-2021-44228 (Log4Shell) vulnerability -->
<!--
<dependency>
    <groupId>log4j</groupId>
    <artifactId>log4j</artifactId>
    <version>1.2.17</version>
</dependency>
-->

<!-- Also remove if present: -->
<!--
<dependency>
    <groupId>org.apache.logging.log4j</groupId>
    <artifactId>log4j-core</artifactId>
    <version>2.x</version>
</dependency>
-->

<!-- ============================================ -->
<!-- STEP 3: Exclude Log4j from transitive deps -->
<!-- ============================================ -->

<!-- Add exclusions to dependencies that bring Log4j transitively -->
<!-- Example for Oracle JDBC or other libraries: -->
<!--
<dependency>
    <groupId>com.example</groupId>
    <artifactId>some-library</artifactId>
    <version>1.0.0</version>
    <exclusions>
        <exclusion>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
        </exclusion>
    </exclusions>
</dependency>
-->

<!-- ============================================ -->
<!-- Version Information                          -->
<!-- ============================================ -->

<!--
  SLF4J versions:
  - 2.0.9 (latest stable as of 2024)
  - 1.7.36 (older stable, use if Java 7 required)

  Logback versions:
  - 1.4.11 (latest stable, requires Java 11+)
  - 1.3.12 (older stable, requires Java 8+)
  - 1.2.13 (old stable, requires Java 7+)

  For this project (Java 17):
  - SLF4J 2.0.9
  - Logback 1.4.11
-->

<!-- ============================================ -->
<!-- Verification Commands                        -->
<!-- ============================================ -->

<!--
  After updating pom.xml, verify:

  1. Check dependency tree:
     mvn dependency:tree | grep -i log4j

     Expected: NO log4j-1.2.17 in output
     OK to see: log4j-over-slf4j (bridge)

  2. Check for vulnerabilities:
     mvn dependency:analyze
     mvn org.owasp:dependency-check-maven:check

  3. Compile project:
     mvn clean compile

  4. Run tests:
     mvn test

  5. Check for Log4j in classpath:
     mvn dependency:build-classpath | grep log4j
-->

<!-- ============================================ -->
<!-- Optional: Logback Configuration              -->
<!-- ============================================ -->

<!--
  Create src/main/resources/logback.xml for configuration:

  <?xml version="1.0" encoding="UTF-8"?>
  <configuration>

    <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
      <file>${PROTOKOL_FILES_PATH}/konsolidace.log</file>
      <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
        <fileNamePattern>${PROTOKOL_FILES_PATH}/konsolidace.%d{yyyy-MM-dd}.log</fileNamePattern>
        <maxHistory>30</maxHistory>
      </rollingPolicy>
      <encoder>
        <pattern>%-5p [%d{dd.MM.yyyy,HH:mm.ss}]: %m%n</pattern>
      </encoder>
    </appender>

    <root level="INFO">
      <appender-ref ref="FILE" />
    </root>

    <logger name="cz.jtbank.konsolidace" level="DEBUG" />

  </configuration>

  Note: Current implementation uses programmatic configuration via Logging.java
        XML config is optional alternative
-->
